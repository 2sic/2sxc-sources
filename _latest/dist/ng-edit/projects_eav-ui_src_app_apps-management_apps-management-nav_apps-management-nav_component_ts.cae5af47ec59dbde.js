"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts","projects_eav-ui_src_app_app-administration_services_content-types_service_ts-projects_eav-ui_-bcb93a"],{7693:(P,m,t)=>{t.d(m,{X:()=>c,g:()=>g});var e=t(271),h=t(6474),o=t(7580);const c="admin/type/",s="admin/type/scopes";let g=(()=>{class a extends h.D{retrieveContentType(_){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.appId,contentTypeId:_}})}retrieveContentTypes(_){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.appId,scope:_}})}getScopes(){return this.http.get(this.apiUrl(s),{params:{appId:this.appId}}).pipe((0,e.T)(_=>{const u=_.old;return Object.keys(u).map(f=>({name:u[f],value:f}))}))}getScopesV2(){return this.http.get(this.apiUrl(s),{params:{appId:this.appId}}).pipe((0,e.T)(_=>_.scopes))}save(_){return this.http.post(this.apiUrl("admin/type/save"),_,{params:{appid:this.appId}})}delete(_){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:_.StaticName}})}import(_){const u=new FormData;for(const v of _)u.append("File",v);return this.http.post(this.apiUrl("admin/type/import"),u,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(_){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:_}})}static#t=this.\u0275fac=(()=>{let _;return function(v){return(_||(_=o.xGo(a)))(v||a)}})();static#e=this.\u0275prov=o.jDH({token:a,factory:a.\u0275fac})}return a})()},1475:(P,m,t)=>{t.d(m,{j:()=>c});var e=t(8624),h=t(6474),o=t(7580);let c=(()=>{class p extends h.D{getContentInfo(s){return this.http.get(this.apiUrl(e.Q+"Get"),{params:{appid:this.appId,zoneId:this.zoneId,scope:s}})}exportParts(s,l,d){const r=this.apiUrl(e.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+s.join(";")+"&entityIdsString="+l.join(";")+"&templateIdsString="+d.join(";");window.open(r,"_blank","")}static#t=this.\u0275fac=(()=>{let s;return function(d){return(s||(s=o.xGo(p)))(d||p)}})();static#e=this.\u0275prov=o.jDH({token:p,factory:p.\u0275fac})}return p})()},320:(P,m,t)=>{t.d(m,{t:()=>c});var e=t(1772),h=t(6474),o=t(7580);let c=(()=>{class p extends h.D{getAppInfo(){return this.http.get(this.apiUrl(e.u+"Statistics"),{params:{appid:this.appId,zoneId:this.zoneId}})}exportAppUrl(){return`${this.apiUrl(`${e.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:s,resetAppGuid:l,withFiles:d}){return this.http.get(this.apiUrl(e.u+"SaveData"),{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:s.toString(),resetAppGuid:l.toString(),withPortalFiles:d.toString()}})}static#t=this.\u0275fac=(()=>{let s;return function(d){return(s||(s=o.xGo(p)))(d||p)}})();static#e=this.\u0275prov=o.jDH({token:p,factory:p.\u0275fac})}return p})()},8624:(P,m,t)=>{t.d(m,{Q:()=>c,S:()=>p});var e=t(1772),h=t(6474),o=t(7580);const c="admin/appParts/";let p=(()=>{class n extends h.D{importAppParts(l){const d=new FormData;return d.append("File",l),this.http.post(this.apiUrl(c+"Import"),d,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(l){return this.http.post(this.apiUrl(e.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:l.toString()}})}static#t=this.\u0275fac=(()=>{let l;return function(r){return(l||(l=o.xGo(n)))(r||n)}})();static#e=this.\u0275prov=o.jDH({token:n,factory:n.\u0275fac})}return n})()},5445:(P,m,t)=>{t.d(m,{Cu:()=>n.Cu,JL:()=>n.JL,Mk:()=>n.Mk,ei:()=>n.ei,gs:()=>h.g,tr:()=>e.t,vN:()=>n.vN,xR:()=>n.xR,y0:()=>s.y});var e=t(1479),h=t(7693),n=(t(1475),t(320),t(8624),t(6460)),s=t(2570)},6460:(P,m,t)=>{t.d(m,{Cu:()=>a,JL:()=>i,Mk:()=>E,ei:()=>g,vN:()=>_,xR:()=>u});var e=t(4600),h=t(6647),o=t(271),c=t(693),p=t(9234),n=t(6474),s=t(7580);const E="admin/query/Run",g="admin/query/DebugStream",a="admin/query/Save",i="admin/query/Get",_="admin/query/DataSources";let u=(()=>{class v extends n.D{getAll(D){return this.http.get(this.apiUrl(p.Gg),{params:{appId:this.appId,contentType:D}})}importQuery(D){return(0,e.H)((0,c.n)(D)).pipe((0,h.n)(O=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:O})),(0,o.T)(O=>({Success:O,Messages:[]})))}clonePipeline(D){return this.http.get(this.apiUrl("admin/query/Clone"),{params:{Id:D.toString(),appId:this.appId}})}delete(D){return this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:D.toString()}})}static#t=this.\u0275fac=(()=>{let D;return function(y){return(D||(D=s.xGo(v)))(y||v)}})();static#e=this.\u0275prov=s.jDH({token:v,factory:v.\u0275fac})}return v})()},2570:(P,m,t)=>{t.d(m,{y:()=>d});var e=t(6474),h=t(7580);const o="admin/view/",c=o+"all",p=o+"delete",n=o+"import",s=o+"polymorphism",l=o+"usage";let d=(()=>{class r extends e.D{getAll(){return this.http.get(this.apiUrl(c),{params:{appId:this.appId}})}delete(g){return this.http.get(this.apiUrl(p),{params:{appId:this.appId,Id:g.toString()}})}import(g){const a=new FormData;return a.append("File",g),this.http.post(this.apiUrl(n),a,{params:{appId:this.appId,zoneId:this.zoneId}})}export(g){const a=this.apiUrl(o+"json")+"?appId="+this.appId+"&viewId="+g;window.open(a,"_blank","")}getPolymorphism(){return this.http.get(this.apiUrl(s),{params:{appId:this.appId}})}getUsage(g){return this.http.get(this.apiUrl(l),{params:{appId:this.appId,guid:g}})}static#t=this.\u0275fac=(()=>{let g;return function(i){return(g||(g=h.xGo(r)))(i||r)}})();static#e=this.\u0275prov=h.jDH({token:r,factory:r.\u0275fac})}return r})()},7756:(P,m,t)=>{t.r(m),t.d(m,{AppsManagementNavComponent:()=>B});var e=t(7580),h=t(2159),o=t(8873),c=t(7049),p=t(5445);const n=[{name:"System",path:"system",icon:"settings",svgIcon:!1,tippy:"System Info",child:[{name:"Register",path:"registration",icon:"how_to_reg",svgIcon:!1,tippy:"Register this System on 2sxc Patrons"}]},{name:"Apps",path:"list",icon:"star",svgIcon:!1,tippy:"Apps"},{name:"Languages",path:"languages",icon:"translate",svgIcon:!1,tippy:"Languages"},{name:"Extensions / Features",path:"license",icon:"tune",svgIcon:!1,tippy:"Extensions and Features"}];var s=t(4175),l=t(3011),d=t(3840),r=t(9552),E=t(1808),g=t(5699),a=t(5437),i=t(8471),_=t(7941),u=t(7912);const v=["sidenav"],f=(I,T)=>T.path;function D(I,T){if(1&I&&(e.j41(0,"mat-icon",13),e.EFF(1,"chevron_right"),e.k0s(),e.EFF(2)),2&I){const M=e.XpG().$implicit;e.R7$(2),e.SpI(" ",M," ")}}function O(I,T){if(1&I&&(e.qex(0),e.DNE(1,D,3,1),e.bVm()),2&I){const M=T.last;e.R7$(),e.vxM(1,M?1:-1)}}function y(I,T){}function R(I,T){1&I&&e.nrm(0,"app-nav-item-list",10),2&I&&e.Y8G("navItem",T.$implicit)}let B=(()=>{class I{#t;#e;constructor(M,A,C){this.dialogRef=M,this.context=A,this.media=C,this.#t=(0,e.WQX)(p.tr),this.zoneId=this.context.zoneId,this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=n,this.#e=(0,a.d)(i.c)}ngOnInit(){this.fetchDialogSettings(),this.#e.doOnDialogClosed(()=>this.fetchDialogSettings()),this.smallScreen.addEventListener("change",M=>(this.sidenav.opened=!M.matches,this.sidenav.mode=M.matches?"over":"side"))}closeDialog(){this.dialogRef.close()}fetchDialogSettings(){this.#t.getShared$(0).subscribe()}static#a=this.\u0275fac=function(A){return new(A||I)(e.rXU(_.CP),e.rXU(o.o),e.rXU(u.DY))};static#s=this.\u0275cmp=e.VBU({type:I,selectors:[["app-apps-management-nav"]],viewQuery:function(A,C){if(1&A&&e.GBs(v,5),2&A){let U;e.mGM(U=e.lsd())&&(C.sidenav=U.first)}},standalone:!0,features:[e.aNF],decls:26,vars:4,consts:[["emptyTemplate",""],["sidenav",""],["appToggleDebug",""],[1,"toolbar-container"],[1,"menu-container",3,"click"],[3,"separator"],[4,"xngBreadcrumbItem"],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],[3,"navItem"],[1,"sideNav-bottom-info"],[1,"container-content"],[1,"breadcrumb-icon"]],template:function(A,C){if(1&A){const U=e.RV6();e.j41(0,"mat-toolbar",2)(1,"div",3)(2,"mat-icon",4),e.bIt("click",function(){e.eBV(U);const x=e.sdS(17);return e.Njj(x.opened=!x.opened)}),e.EFF(3,"menu"),e.k0s(),e.j41(4,"div")(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"xng-breadcrumb",5),e.DNE(8,O,2,1,"ng-container",6),e.k0s(),e.DNE(9,y,0,0,"ng-template",null,0,e.C5r),e.k0s(),e.nrm(11,"span",7),e.j41(12,"button",8),e.bIt("click",function(){return e.eBV(U),e.Njj(C.closeDialog())}),e.j41(13,"mat-icon"),e.EFF(14,"close"),e.k0s()()(),e.j41(15,"mat-sidenav-container",2)(16,"mat-sidenav",9,1),e.Z7z(18,R,1,1,"app-nav-item-list",10,f),e.j41(20,"div",11)(21,"p"),e.EFF(22,"use Burger icon to show/hide menu"),e.k0s()()(),e.j41(23,"mat-sidenav-content")(24,"div",12),e.nrm(25,"router-outlet"),e.k0s()()()}if(2&A){const U=e.sdS(10);e.R7$(6),e.SpI(" Manage Zone ",C.zoneId," "),e.R7$(),e.Y8G("separator",U),e.R7$(9),e.Y8G("mode",C.smallScreen.matches?"over":"side")("opened",C.sideNavOpened),e.R7$(2),e.Dyx(C.navItems)}},dependencies:[r.s5,r.KQ,d.m_,d.An,l._S,l.Dg,l._Y,s.Hl,s.iY,c.vg,c.LG,c.US,c.El,h.n3,E.a,g.V],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]   .mat-icon-admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}  .mat-drawer-container{background-color:transparent!important}"]})}return I})()},1772:(P,m,t)=>{t.d(m,{I:()=>s,u:()=>n});var e=t(6647),h=t(9452),o=t(3550),c=t(6474),p=t(7580);const n="admin/app/";let s=(()=>{class l extends c.D{importApp(r,E,g=!1){const a=new FormData;return a.append("File",r),a.append("Name",E??""),this.http.post(this.apiUrl(n+"Import"),a,{params:{zoneId:this.zoneId}}).pipe((0,e.n)(i=>{if(g&&i.Messages[0]?.MessageType===o.G1.Warning){const _=prompt(i.Messages[0].Text+" Would you like to install it using another folder name?");if(_)return this.importApp(r,_,!0)}return(0,h.of)(i)}))}static#t=this.\u0275fac=(()=>{let r;return function(g){return(r||(r=p.xGo(l)))(g||l)}})();static#e=this.\u0275prov=p.jDH({token:l,factory:l.\u0275fac})}return l})()},693:(P,m,t)=>{function e(o){return new Promise((c,p)=>{const n=new FileReader;n.readAsDataURL(o),n.onload=()=>{c(n.result.split(",")[1])},n.onerror=s=>{p(s)}})}function h(o){return new Promise((c,p)=>{const n=new FileReader;n.readAsText(o),n.onload=()=>{c(n.result)},n.onerror=s=>{p(s)}})}t.d(m,{d:()=>h,n:()=>e})},8471:(P,m,t)=>{t.d(m,{c:()=>r});var e=t(2159),h=t(1567),o=t(3037),c=t(271),p=t(5057),n=t(4979),s=t(4435),l=t(7580);const d={doOnDialogClosed:!0};let r=(()=>{class E extends n.V{constructor(a,i){super(),this.router=a,this.route=i,this.log=(0,s.T)({DialogRoutingService:E},d)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(a){return this.route.snapshot.paramMap.get(a)}getParams(a){const i=this.route.snapshot.paramMap;return a.reduce((_,u)=>(_[u]=i.get(u),_),{})}getQueryParam(a){return this.route.snapshot.queryParamMap.get(a)}getQueryParams(a){const i=this.route.snapshot.queryParamMap;return a.reduce((_,u)=>(_[u]=i.get(u),_),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(a){const i=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>a())),i.end()}navPath(a,i){return this.router.navigate([a],i)}navRelative(a,i){return this.router.navigate(a,{...i,relativeTo:this.route})}navParentFirstChild(a,i){return this.router.navigate(a,{...i,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,h.p)(a=>a instanceof e.wF),(0,o.Z)(!!this.route.snapshot.firstChild),(0,c.T)(()=>!!this.route.snapshot.firstChild),(0,p.J)(),(0,h.p)(([a,i])=>a&&!i))}static#t=this.\u0275fac=function(i){return new(i||E)(l.KVO(e.Ix),l.KVO(e.nX))};static#e=this.\u0275prov=l.jDH({token:E,factory:E.\u0275fac})}return E})()},9234:(P,m,t)=>{t.d(m,{Gg:()=>g,Tr:()=>a,gb:()=>E});var e=t(1567),h=t(6647),o=t(6301),c=t(271),p=t(4435),n=t(4839),s=t(5437),l=t(6474),d=t(7580);const r={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},E="admin/entity/",g="admin/entity/list";let a=(()=>{class i extends l.D{constructor(){super(...arguments),this.log=(0,p.T)({EntityService:i},r),this.queryService=(0,s.d)(n.c)}getEntities$(u){return this.log.fnIf("getEntities"),u.pipe((0,e.p)(v=>null!=v),(0,h.n)(v=>this.getAvailableEntities(v.contentTypeName).pipe((0,o.t)(1))))}getAvailableEntities(u,v){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[u],itemIds:v,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,c.T)(D=>D.Default))}delete(u,v,f,D,O,y){return this.log.fnIf("delete",{appId:u,contentType:v,entityId:f,force:D,parentId:O,parent}),this.http.delete(this.apiUrl(E+"delete"),{params:{contentType:v,id:f.toString(),appId:u,force:D.toString(),...O&&{parentId:O.toString()},...O&&y&&{parentField:y}}})}static#t=this.\u0275fac=(()=>{let u;return function(f){return(u||(u=d.xGo(i)))(f||i)}})();static#e=this.\u0275prov=d.jDH({token:i,factory:i.\u0275fac})}return i})()},4839:(P,m,t)=>{t.d(m,{c:()=>n});var e=t(8873),h=t(4435),o=t(7580),c=t(6443);const p={all:!1,getAvailableEntities:!1,getEntities:!1};let n=(()=>{class s{constructor(d,r){this.http=d,this.context=r,this.log=(0,h.T)({QueryService:s},p)}getAvailableEntities(d,r,E,g){this.log.fnIf("getAvailableEntities",{queryUrl:d,params:r,fields:E,entitiesFilter:g});const a=!!r,v=(((r?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(a?`&${r}`:"")+"&$select="+(E??"")).substring(1);return this.http.post(`app/auto/query/${d}?${v}`,{Guids:g})}getEntities({contentTypes:d,itemIds:r,fields:E,log:g}){this.log.fnIf("getEntities",{log:g,contentTypes:d,itemIds:r,fields:E});const i=("&typeNames="+(d?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(r?.join(",")??"")+"&$select="+(E??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${i}`,{})}static#t=this.\u0275fac=function(r){return new(r||s)(o.KVO(c.Qq),o.KVO(e.o))};static#e=this.\u0275prov=o.jDH({token:s,factory:s.\u0275fac})}return s})()},4979:(P,m,t)=>{t.d(m,{V:()=>o});var e=t(7092),h=t(7580);let o=(()=>{class c{constructor(){this.subscriptions=new e.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(s){return new(s||c)};static#e=this.\u0275prov=h.jDH({token:c,factory:c.\u0275fac})}return c})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.01.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.cae5af47ec59dbde.js.map