(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_ng-dialogs_src_app_permissions_index_ts","projects_ng-dialogs_src_app_permissions_permissions_module_ts-_9f4a0","projects_ng-dialogs_src_app_permissions_permissions_module_ts-_9f4a1","projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{7553:function(t,e,n){"use strict";n.d(e,{g:function(){return c}});var i=n(1407),o=n(1785),s=n(2693),r=n(3582),a=n(2837),c=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.create=function(t,e){return this.http.post("app/auto/data/"+t,e,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})},t.prototype.delete=function(t,e,n){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(i.Uo+"delete"),{params:{contentType:t,id:e.toString(),appId:this.context.appId.toString(),force:n.toString()}})},t.\u0275fac=function(e){return new(e||t)(o.LFG(s.eN),o.LFG(r._),o.LFG(a._y))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t}()},241:function(t,e,n){"use strict";n.d(e,{i:function(){return o}});var i=n(5803),o=function(){function t(){}return t.getUrl=function(t,e,n){return"permissions/"+t+"/"+e+"/"+n},t.getUrlApp=function(t){return this.getUrl(i.Z.metadata.app.type,i.Z.metadata.app.keyType,t.toString())},t.getUrlAttribute=function(t){return this.getUrl(i.Z.metadata.attribute.type,i.Z.metadata.attribute.keyType,t.toString())},t.getUrlContentType=function(t){return this.getUrlEntity(t)},t.getUrlEntity=function(t){return this.getUrl(i.Z.metadata.entity.type,i.Z.metadata.entity.keyType,t)},t.route={path:"permissions/:type/:keyType/:key",loadChildren:function(){return n.e("projects_ng-dialogs_src_app_permissions_permissions_module_ts-_9f4a1").then(n.bind(n,8600)).then(function(t){return t.PermissionsModule})},data:{title:"Permissions"}},t}()},4380:function(t,e,n){"use strict";n.d(e,{Do:function(){return i.D},qQ:function(){return o.q}}),n(241),n(8796),n(6475),n(398),n(8600);var i=n(3584),o=n(4943)},8796:function(t,e,n){"use strict";n.d(e,{g:function(){return o}});var i=n(4762),o={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,i.mG)(this,void 0,void 0,function(){return(0,i.Jh)(this,function(t){switch(t.label){case 0:return[4,Promise.all([n.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),n.e("default-node_modules_ag-grid-community_all-modules_dist_es6_main_js-projects_ng-dialogs_src_a-6105fe"),n.e("projects_ng-dialogs_src_app_permissions_permissions_component_ts")]).then(n.bind(n,398))];case 1:return[2,t.sent().PermissionsComponent]}})})}}},6475:function(t,e,n){"use strict";n.d(e,{T:function(){return p}});var i=n(1282),o=n(5788),s=n(9350),r=n(8796),a=n(1785),c=[{path:"",component:s.r,data:{dialog:r.g},children:[{matcher:o.eP,loadChildren:function(){return Promise.all([n.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_select_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_progress-spinner_js"),n.e("default-projects_ng-dialogs_src_app_create-file-dialog_index_ts"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_slide-toggle_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_list_js"),n.e("default-projects_ng-dialogs_src_app_monaco-editor_monaco-editor_component_ts-projects_ng-dial-aa5eee"),n.e("default-projects_edit_edit_module_ts"),n.e("default-node_modules_angular_cdk___ivy_ngcc___fesm2015_drag-drop_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_menu_js"),n.e("default-node_modules_angular_material___ivy_ngcc___fesm2015_autocomplete_js"),n.e("common"),n.e("node_modules_angular_material___ivy_ngcc___fesm2015_card_js-projects_ng-dialogs_src_app_share-9a97f00")]).then(n.bind(n,99)).then(function(t){return t.EditModule})}},{matcher:o.lZ,loadChildren:function(){return n.e("projects_edit_refresh-edit_module_ts").then(n.bind(n,6411)).then(function(t){return t.RefreshEditModule})}}]}],p=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.oAB({type:t}),t.\u0275inj=a.cJS({imports:[[i.Bz.forChild(c)],i.Bz]}),t}()},398:function(t,e,n){"use strict";n.r(e),n.d(e,{PermissionsComponent:function(){return P}});var i=n(4762),o=n(9206),s=n(1282),r=n(8512),a=n(7570),c=n(3835),p=n(6238),l=n(9996),u=n(2855),d=n(6085),_=n(8579),m=n(5803),f=n(2420),g=n(1785),h=n(7064),y=n(7512),v=n(7307),C=function(){function t(){}return t.prototype.agInit=function(t){this.params=t},t.prototype.refresh=function(t){return!0},t.prototype.deletePermission=function(){this.params.onDelete(this.params.data)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.NdJ("click",function(){return e.deletePermission()}),g.TgZ(2,"mat-icon"),g._uU(3,"delete"),g.qZA(),g.qZA(),g.qZA())},directives:[h.wG,y.$,v.Hw],styles:[""]}),t}(),T=n(2935),b=n(4943),Z=n(3589),k=n(4369),x=n(9825),w=n(1116),P=function(){function t(t,e,n,s,c){this.dialogRef=t,this.router=e,this.route=n,this.permissionsService=s,this.snackBar=c,this.permissions$=new r.X(null),this.modules=o.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},_.f),{frameworkComponents:{idFieldComponent:d.m,permissionsActionsComponent:C},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.Guid}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new a.w,this.targetType=parseInt(this.route.snapshot.paramMap.get("type"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return t.prototype.ngOnInit=function(){this.fetchPermissions(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.permissions$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchPermissions=function(){var t=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(e){t.permissions$.next(e)})},t.prototype.editPermission=function(t){var e,n,o=this;if(null==t){var s=null===(e=Object.values(m.Z.metadata).find(function(t){return t.type===o.targetType}))||void 0===e?void 0:e.target;n={items:[{ContentTypeName:m.Z.contentTypes.permissions,For:(0,i.pi)((0,i.pi)((0,i.pi)({Target:s},this.keyType===m.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===m.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===m.Z.keyTypes.string&&{String:this.key})}]}}else n={items:[{EntityId:t.data.Id}]};var r=(0,f.f)(n);this.router.navigate(["edit/"+r],{relativeTo:this.route})},t.prototype.deletePermission=function(t){var e=this;confirm("Delete '"+t.Title+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(t.Id).subscribe(function(){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchPermissions()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,c.h)(function(t){return t instanceof s.m2}),(0,p.O)(!!this.route.snapshot.firstChild),(0,l.U)(function(){return!!t.route.snapshot.firstChild}),(0,u.G)(),(0,c.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchPermissions()}))},t.\u0275fac=function(e){return new(e||t)(g.Y36(T.so),g.Y36(s.F0),g.Y36(s.gz),g.Y36(b.q),g.Y36(Z.ux))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(t,e){1&t&&(g.TgZ(0,"div",0),g.TgZ(1,"div",1),g.TgZ(2,"div",2),g.TgZ(3,"div"),g._uU(4,"Permissions"),g.qZA(),g.TgZ(5,"button",3),g.NdJ("click",function(){return e.closeDialog()}),g.TgZ(6,"mat-icon"),g._uU(7,"close"),g.qZA(),g.qZA(),g.qZA(),g.qZA(),g._UZ(8,"router-outlet"),g.TgZ(9,"div",4),g._UZ(10,"ag-grid-angular",5),g.ALo(11,"async"),g._UZ(12,"div",6),g.TgZ(13,"button",7),g.NdJ("click",function(){return e.editPermission(null)}),g.TgZ(14,"mat-icon"),g._uU(15,"add"),g.qZA(),g.qZA(),g.qZA(),g.qZA()),2&t&&(g.xp6(10),g.Q6J("rowData",g.lcZ(11,3,e.permissions$))("modules",e.modules)("gridOptions",e.gridOptions))},directives:[T.uh,k.lW,y.$,v.Hw,s.lC,x.N8],pipes:[w.Ov],styles:[""]}),t}()},8600:function(t,e,n){"use strict";n.r(e),n.d(e,{PermissionsModule:function(){return h}});var i=n(9825),o=n(1116),s=n(4369),r=n(7064),a=n(2935),c=n(7307),p=n(3589),l=n(7553),u=n(3582),d=n(2677),_=n(6475),m=n(3584),f=n(4943),g=n(1785),h=function(){function t(){}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[u._,f.q,m.D,l.g],imports:[[o.ez,_.T,d.q,a.Is,s.ot,c.Ps,i.sF.withComponents([]),r.si,p.ZX]]}),t}()},3584:function(t,e,n){"use strict";n.d(e,{D:function(){return c}});var i=n(4762),o=n(1785),s=n(2693),r=n(3582),a=n(2837),c=function(){function t(t,e,n){this.http=t,this.context=e,this.dnnContext=n}return t.prototype.getMetadata=function(t,e,n,o){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:(0,i.pi)({appId:this.context.appId.toString(),targetType:t.toString(),keyType:e,key:n.toString()},o&&{contentType:o})})},t.\u0275fac=function(e){return new(e||t)(o.LFG(s.eN),o.LFG(r._),o.LFG(a._y))},t.\u0275prov=o.Yz7({token:t,factory:t.\u0275fac}),t}()},4943:function(t,e,n){"use strict";n.d(e,{q:function(){return c}});var i=n(9996),o=n(5803),s=n(1785),r=n(3584),a=n(7553),c=function(){function t(t,e){this.metadataService=t,this.entitiesService=e}return t.prototype.getAll=function(t,e,n){return this.metadataService.getMetadata(t,e,n,o.Z.contentTypes.permissions).pipe((0,i.U)(function(t){return t.Items}))},t.prototype.delete=function(t){return this.entitiesService.delete(o.Z.contentTypes.permissions,t,!1)},t.\u0275fac=function(e){return new(e||t)(s.LFG(r.D),s.LFG(a.g))},t.\u0275prov=s.Yz7({token:t,factory:t.\u0275fac}),t}()},6085:function(t,e,n){"use strict";n.d(e,{m:function(){return p}});var i=n(8838),o=n(1785),s=n(3589),r=n(7064),a=n(7512),c=n(7307),p=function(){function t(t){this.snackBar=t}return t.prototype.agInit=function(t){this.id=t.value,this.tooltip=t.tooltipGetter(t.data)},t.prototype.refresh=function(t){return!0},t.prototype.copy=function(){(0,i.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},t.\u0275fac=function(e){return new(e||t)(o.Y36(s.ux))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(t,e){1&t&&(o.TgZ(0,"div",0),o.NdJ("click",function(){return e.copy()}),o.TgZ(1,"span",1),o._uU(2),o.qZA(),o.TgZ(3,"mat-icon",2),o._uU(4,"file_copy"),o.qZA(),o.qZA()),2&t&&(o.Q6J("tippy",e.tooltip),o.xp6(2),o.Oqu(e.id))},directives:[r.wG,a.$,c.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),t}()},8838:function(t,e,n){"use strict";function i(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);e.select(),document.execCommand("copy"),document.body.removeChild(e),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}n.d(e,{v:function(){return i}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/default-projects_ng-dialogs_src_app_permissions_index_ts.c0d57c8bba8b5a6fc251.js.map