"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_import-view_import-view_component_ts"],{7647:function(B,u,s){s.r(u),s.d(u,{ImportViewComponent:function(){return U}});var g=s(2090),d=s(8069),f=s(8047),p=s(5758),m=s(6317),v=s(6562),I=s(635),x=s(6559),e=s(7133),h=s(2528),a=s(6362),C=s(1529),T=s(7317),D=s(785),E=s(4742);function M(n,o){1&n&&e._UZ(0,"mat-spinner",12)}function O(n,o){1&n&&(e.TgZ(0,"div",17),e._uU(1," The import has been done. See the messages below for more information. "),e.qZA())}function w(n,o){1&n&&(e.TgZ(0,"div",18),e._uU(1," The import failed. See the messages below for more information. "),e.qZA())}var Z=function(o,t,i){return{"sxc-message-warning":o,"sxc-message-success":t,"sxc-message-error":i}};function A(n,o){if(1&n&&(e.TgZ(0,"div",19),e._uU(1),e.qZA()),2&n){var t=o.$implicit;e.Q6J("ngClass",e.kEZ(2,Z,0===t.MessageType,1===t.MessageType,2===t.MessageType)),e.xp6(1),e.hij(" ",t.Text," ")}}function P(n,o){if(1&n&&(e.TgZ(0,"div",13),e.YNc(1,O,2,0,"div",14),e.YNc(2,w,2,0,"div",15),e.YNc(3,A,2,6,"div",16),e.qZA()),2&n){var t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.importResult.Success),e.xp6(1),e.Q6J("ngIf",!t.importResult.Success),e.xp6(1),e.Q6J("ngForOf",t.importResult.Messages)}}function R(n,o){if(1&n){var t=e.EpF();e.ynx(0),e.TgZ(1,"button",20),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).closeDialog()}),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",21),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).importView()}),e._uU(4," Import "),e.qZA(),e.BQk()}if(2&n){var i=e.oxw().ngIf;e.xp6(3),e.Q6J("disabled",!i.importFile||i.isImporting||!!i.importResult)}}function V(n,o){if(1&n){var t=e.EpF();e.ynx(0),e.TgZ(1,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).closeDialog()}),e._uU(2,"Close"),e.qZA(),e.BQk()}}function y(n,o){if(1&n){var t=e.EpF();e.TgZ(0,"div",1),e.NdJ("filesDropped",function(l){return e.CHM(t),e.oxw().filesDropped(l)}),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e._uU(3,"Import View"),e.qZA(),e.qZA(),e.YNc(4,M,1,0,"mat-spinner",4),e.TgZ(5,"p",5),e._uU(6,"Select a view file (json) from your computer to import."),e.qZA(),e.TgZ(7,"div"),e.TgZ(8,"button",6),e.NdJ("click",function(){return e.CHM(t),e.MAs(12).click()}),e.TgZ(9,"span"),e._uU(10),e.qZA(),e.qZA(),e.TgZ(11,"input",7,8),e.NdJ("change",function(l){return e.CHM(t),e.oxw().fileChange(l)}),e.qZA(),e.qZA(),e.YNc(13,P,4,3,"div",9),e.TgZ(14,"div",10),e.YNc(15,R,5,1,"ng-container",11),e.YNc(16,V,3,0,"ng-container",11),e.qZA(),e.qZA()}if(2&n){var i=o.ngIf;e.Q6J("allowedFileTypes","json"),e.xp6(4),e.Q6J("ngIf",i.isImporting),e.xp6(4),e.Q6J("disabled",i.isImporting),e.xp6(2),e.Oqu(i.importFile?i.importFile.name:"Select or drop file"),e.xp6(3),e.Q6J("ngIf",i.importResult),e.xp6(2),e.Q6J("ngIf",!(null!=i.importResult&&i.importResult.Success)),e.xp6(1),e.Q6J("ngIf",null==i.importResult?null:i.importResult.Success)}}var U=function(){var n=function(){function o(t,i,r,l){(0,d.Z)(this,o),this.dialogData=t,this.dialogRef=i,this.viewsService=r,this.snackBar=l,this.hostClass="dialog-component",this.isImporting$=new m.X(!1),this.importFile$=new m.X(null),this.importResult$=new m.X(null),this.templateVars$=(0,v.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe((0,I.U)(function(_){var c=(0,g.Z)(_,3);return{isImporting:c[0],importFile:c[1],importResult:c[2]}}))}return(0,f.Z)(o,[{key:"ngOnInit",value:function(){null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importView())}},{key:"ngOnDestroy",value:function(){this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"filesDropped",value:function(i){this.importFile$.next(i[0]),this.importResult$.next(null),this.importView()}},{key:"fileChange",value:function(i){this.importFile$.next(i.target.files[0]),this.importResult$.next(null)}},{key:"importView",value:function(){var i=this;this.isImporting$.next(!0),this.viewsService.import(this.importFile$.value).subscribe({next:function(l){i.isImporting$.next(!1),i.importResult$.next(l)},error:function(l){i.isImporting$.next(!1),i.importResult$.next(null),i.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})}}]),o}();return n.\u0275fac=function(t){return new(t||n)(e.Y36(p.WI),e.Y36(p.so),e.Y36(x.h),e.Y36(h.ux))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-import-view"]],hostVars:1,hostBindings:function(t,i){2&t&&e.Ikx("className",i.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","tippy","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,i){1&t&&(e.YNc(0,y,17,7,"div",0),e.ALo(1,"async")),2&t&&e.Q6J("ngIf",e.lcZ(1,1,i.templateVars$))},directives:[a.O5,C.z,p.uh,T.lW,D.$,E.$g,a.sg,a.mk],pipes:[a.Ov],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"]}),n}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_import-view_import-view_component_ts.e82433c03756cd01.js.map