{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts.a165f81bc44b30c9.js","mappings":"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","names":["AppDialogConfigService","_class","constructor","http","context","dnnContext","globalConfigService","featuresService","this","dialogSettings$","loadFromService","getShared$","appId","getDialogSettings","pipe","shareReplay","refCount","get","$2sxc","apiUrl","webApiDialogRoot","params","toString","map","dialogSettings","Context","Language","List","filter","language","IsEnabled","tap","allowDebug","Enable","DebugMode","i0","i1","i2","i3","i4","i5","factory","ɵfac","ExportAppPartsService","getContentInfo","scope","webApiAppPartsRoot","appid","zoneId","exportParts","contentTypeIds","entityIds","templateIds","url","join","window","open","ExportAppService","getAppInfo","webApiAppRoot","exportApp","includeContentGroups","resetAppGuid","exportForVersionControl","withFiles","withPortalFiles","ImportAppPartsService","importAppParts","file","formData","FormData","append","post","resetApp","webApiQueryRun","webApiQueryDebugStream","webApiQuerySave","webApiQueryGet","webApiQueryDataSources","PipelinesService","getAll","contentType","webApiEntityList","importQuery","from","toBase64","switchMap","fileBase64","AppId","ContentBase64","success","Success","Messages","clonePipeline","id","Id","delete","webApiViewRoot","webApiViews","webApiViewDelete","webApiViewImport","webApiViewPolymorph","webApiViewUsage","ViewsService","import","export","getPolymorphism","getUsage","guid","ContentItemsService","contentTypeStaticName","getColumns","webApiFieldsAll","staticName","importItem","webApiEntityRoot","FeatureDetailService","getFeatureDetails","featureNameId","webApiRoot","nameId","id_r4","_r6","ngIf","ctx_r5","copyToClipboard","link_r7","_r9","ctx_r8","findOutMore","FeatureInfoDialogComponent_mat_card_0_div_15_Template","FeatureInfoDialogComponent_mat_card_0_button_17_Template","_r11","ctx_r10","closeDialog","vm_r1","feature","Name","Description","NameId","Link","FeatureInfoDialogComponent","dialogData","dialogRef","snackBar","featureDetailService","ngOnInit","viewModel$","combineLatest","text","duration","link","close","MAT_DIALOG_DATA","selectors","decls","vars","consts","template","rf","ctx","FeatureInfoDialogComponent_mat_card_0_Template","FeatureComponentBase","value","featureNameId$","next","showIf","showIf$","dialog","viewContainerRef","changeDetectorRef","BehaviorSubject","feature$","featName","get$","show$","feat","openDialog","featureId","autoFocus","data","width","markForCheck","inputs","ImportAppService","importApp","changedName","retryOnDuplicate","result","MessageType","FileUploadMessageTypes","Warning","folderName","prompt","Text","of","ctx_r0","message","ConfirmDeleteDialogComponent","hostClass","confirm","hostVars","hostBindings","ConfirmDeleteDialogComponent_mat_card_subtitle_4_Template","entityTitle","entityId","MetadataActionsComponent","agInit","refresh","deleteMetadata","onDelete","MetadataContentTypeComponent","metadata","_Type","scopeOption_r7","name","MetadataSaveDialogComponent_mat_card_0_ng_container_11_mat_option_5_Template","scopeOptions","length","ctx_r2","dropdownInsertValue","contentType_r10","StaticName","Label","MetadataSaveDialogComponent_mat_card_0_mat_select_15_mat_option_1_Template","contentTypes","MetadataSaveDialogComponent_mat_card_0_ng_container_11_Template","MetadataSaveDialogComponent_mat_card_0_mat_select_15_Template","MetadataSaveDialogComponent_mat_card_0_input_16_Template","_r13","ctx_r12","toggleGuidedContentType","ctx_r14","MetadataSaveDialogComponent_mat_card_0_app_field_hint_24_Template","$event","ctx_r15","toggleAdvancedMode","ctx_r16","ctx_r17","form","advancedMode","guidedContentType","_c0","controls","touched","errors","required","valid","MetadataSaveDialogComponent","contentTypesService","contentTypes$","scopeOptions$","buildForm","fetchScopes","ngOnDestroy","complete","event","checked","formValues","getRawValue","UntypedFormGroup","addControl","UntypedFormControl","Validators","eavConstants","scopes","default","valueChanges","startWith","distinctUntilChanged","subscribe","newScope","patchValue","some","option","fetchContentTypes","retrieveContentTypes","getScopes","MetadataSaveDialogComponent_mat_card_0_Template","itemFor","Number","Guid","String","MetadataComponent_ng_container_0_ng_container_11_ng_container_6_Template","MetadataComponent_ng_container_0_ng_container_11_ng_container_7_Template","MetadataComponent_ng_container_0_ng_container_11_ng_container_8_Template","MetadataComponent_ng_container_0_ng_container_11_ng_container_9_Template","Target","TargetType","Title","_r16","createMetadata","recommendation_r18","Icon","Enabled","_r26","$implicit","ctx_r25","MetadataComponent_ng_container_0_eco_fab_speed_dial_17_button_9_div_1_Template","MetadataComponent_ng_container_0_eco_fab_speed_dial_17_button_9_ng_template_2_Template","MetadataComponent_ng_container_0_eco_fab_speed_dial_17_button_9_ng_template_4_Template","_r20","_r22","_r28","ctx_r27","openChange","ctx_r29","MetadataComponent_ng_container_0_eco_fab_speed_dial_17_button_9_Template","fabOpen","recommendations","_r32","ctx_r31","MetadataComponent_ng_container_0_ng_container_10_Template","MetadataComponent_ng_container_0_ng_container_11_Template","MetadataComponent_ng_container_0_button_16_Template","MetadataComponent_ng_container_0_eco_fab_speed_dial_17_Template","title","gridOptions","MetadataComponent","BaseComponent","router","route","metadataService","entitiesService","contentItemsService","super","buildGridOptions","metadata$","recommendations$","itemFor$","undefined","fabOpen$","targetType","parseInt","snapshot","paramMap","keyType","key","decodeURIComponent","fetchFor","fetchMetadata","subscription","add","refreshOnChildClosedShallow","filteredRecommendations$","metadataItems","r","i","Count","recommendation","CreateEmpty","create","For","calculateItemFor","error","createMetadataForm","MissingFeature","afterClosed","items","ContentTypeName","formUrl","convertFormToUrl","navigate","relativeTo","Object","values","find","m","target","keyTypes","number","string","item","getMetadata","Recommendations","forEach","startsWith","replace","atob","Items","editMetadata","EntityId","confirmed","DeleteWarning","isConfirmed","defaultGridOptions","columnDefs","headerName","field","headerClass","cellClass","split","sortable","valueGetter","cellRenderer","IdFieldComponent","cellRendererParams","tooltipGetter","flex","minWidth","sort","onCellClicked","pinned","i6","features","MetadataComponent_ng_container_0_Template","FieldHintComponent_mat_hint_1_ng_container_1_Template","_r2","FieldHintComponent_mat_error_2_ng_container_1_Template","FieldHintComponent","isError","isShort","toggleIsShort","ngContentSelectors","_c1","FieldHintComponent_mat_hint_1_Template","FieldHintComponent_mat_error_2_Template","FieldHintComponent_ng_template_3_Template","ClickStopPropagationDirective","onClick","stopPropagation","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","onerror","readAsText"],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/services/app-dialog-config.service.ts","./projects/eav-ui/src/app/app-administration/services/export-app-parts.service.ts","./projects/eav-ui/src/app/app-administration/services/export-app.service.ts","./projects/eav-ui/src/app/app-administration/services/import-app-parts.service.ts","./projects/eav-ui/src/app/app-administration/services/pipelines.service.ts","./projects/eav-ui/src/app/app-administration/services/views.service.ts","./projects/eav-ui/src/app/content-items/services/content-items.service.ts","./projects/eav-ui/src/app/features/services/feature-detail.service.ts","./projects/eav-ui/src/app/features/feature-info-dialog/feature-info-dialog.component.html","./projects/eav-ui/src/app/features/feature-info-dialog/feature-info-dialog.component.ts","./projects/eav-ui/src/app/features/shared/base-feature.component.ts","./projects/eav-ui/src/app/import-app/services/import-app.service.ts","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.html","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/shared/helpers/file-to-base64.helper.ts"],"sourcesContent":["import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map, Observable, shareReplay, tap } from 'rxjs';\r\nimport { GlobalConfigService } from '../../edit/shared/store/ngrx-data';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\n\r\nconst webApiDialogRoot = 'admin/dialog/';\r\n\r\n@Injectable()\r\nexport class AppDialogConfigService {\r\n  constructor(\r\n    private http: HttpClient,\r\n    private context: Context,\r\n    private dnnContext: DnnContext,\r\n    private globalConfigService: GlobalConfigService,\r\n    featuresService: FeaturesService,\r\n  ) {\r\n    featuresService.loadFromService(this);\r\n  }\r\n\r\n  private dialogSettings$: Record<number, Observable<DialogSettings>> = {};\r\n\r\n  getShared$(appId?: number) {\r\n    appId ??= this.context.appId;\r\n    if (!this.dialogSettings$[appId])\r\n      this.dialogSettings$[appId] = this.getDialogSettings(appId).pipe(shareReplay({ refCount: false }));\r\n    return this.dialogSettings$[appId];\r\n    // TODO: probably should add an onDestroy and ensure all subscriptions are killed\r\n  }\r\n\r\n  getDialogSettings(appId?: number) {\r\n    return this.http.get<DialogSettings>(this.dnnContext.$2sxc.http.apiUrl(webApiDialogRoot + 'settings'), {\r\n      params: { appId: appId ?? this.context.appId.toString() },\r\n    }).pipe(\r\n      map(dialogSettings => {\r\n        dialogSettings.Context.Language.List = dialogSettings.Context.Language.List.filter(language => language.IsEnabled);\r\n        return dialogSettings;\r\n      }),\r\n      tap(dialogSettings => {\r\n        this.globalConfigService.allowDebug(dialogSettings.Context.Enable.DebugMode);\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Context } from '../../shared/services/context';\r\nimport { ContentInfo } from '../models/content-info.model';\r\nimport { webApiAppPartsRoot } from './import-app-parts.service';\r\n\r\n@Injectable()\r\nexport class ExportAppPartsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getContentInfo(scope: string) {\r\n    return this.http.get<ContentInfo>(this.dnnContext.$2sxc.http.apiUrl(webApiAppPartsRoot + 'Get'), {\r\n      params: { appid: this.context.appId.toString(), zoneId: this.context.zoneId.toString(), scope },\r\n    });\r\n  }\r\n\r\n  exportParts(contentTypeIds: number[], entityIds: number[], templateIds: number[]) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiAppPartsRoot + 'Export')\r\n      + '?appId=' + this.context.appId.toString()\r\n      + '&zoneId=' + this.context.zoneId.toString()\r\n      + '&contentTypeIdsString=' + contentTypeIds.join(';')\r\n      + '&entityIdsString=' + entityIds.join(';')\r\n      + '&templateIdsString=' + templateIds.join(';');\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { Context } from '../../shared/services/context';\r\nimport { AppInfo } from '../models/app-info.model';\r\n\r\n@Injectable()\r\nexport class ExportAppService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAppInfo() {\r\n    return this.http.get<AppInfo>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Statistics'), {\r\n      params: { appid: this.context.appId.toString(), zoneId: this.context.zoneId.toString() },\r\n    });\r\n  }\r\n\r\n  exportApp(includeContentGroups: boolean, resetAppGuid: boolean) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Export')\r\n      + '?appId=' + this.context.appId\r\n      + '&zoneId=' + this.context.zoneId\r\n      + '&includeContentGroups=' + includeContentGroups\r\n      + '&resetAppGuid=' + resetAppGuid;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  exportForVersionControl({ includeContentGroups, resetAppGuid, withFiles }:\r\n    { includeContentGroups: boolean; resetAppGuid: boolean; withFiles: boolean; }) {\r\n    return this.http.get<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'SaveData'), {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        zoneId: this.context.zoneId.toString(),\r\n        includeContentGroups: includeContentGroups.toString(),\r\n        resetAppGuid: resetAppGuid.toString(),\r\n        withPortalFiles: withFiles.toString(),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\n\r\nexport const webApiAppPartsRoot = 'admin/appParts/';\r\n\r\n@Injectable()\r\nexport class ImportAppPartsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  importAppParts(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppPartsRoot + 'Import'), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  /** Reset the App back to the state it was in the last xml export */\r\n  resetApp(withFiles: boolean) {\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Reset'), {}, {\r\n      params: {\r\n        appId: this.context.appId.toString(),\r\n        zoneId: this.context.zoneId.toString(),\r\n        withPortalFiles: withFiles.toString(),\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { webApiEntityList } from '../../edit/shared/services';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Query } from '../models/query.model';\r\n\r\nconst webApiQueryImport = 'admin/query/import';\r\nconst webApiQueryClone = 'admin/query/Clone';\r\nconst webApiQueryDelete = 'admin/query/Delete';\r\nexport const webApiQueryRun = 'admin/query/Run';\r\nexport const webApiQueryDebugStream = 'admin/query/DebugStream';\r\nexport const webApiQuerySave = 'admin/query/Save';\r\nexport const webApiQueryGet = 'admin/query/Get';\r\nexport const webApiQueryDataSources = 'admin/query/DataSources';\r\n\r\n@Injectable()\r\nexport class PipelinesService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll(contentType: string) {\r\n    return this.http.get<Query[]>(this.dnnContext.$2sxc.http.apiUrl(webApiEntityList), {\r\n      params: { appId: this.context.appId.toString(), contentType }\r\n    });\r\n  }\r\n\r\n  importQuery(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryImport), {\r\n          AppId: this.context.appId.toString(),\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n\r\n  clonePipeline(id: number) {\r\n    return this.http.get<null>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryClone), {\r\n      params: { Id: id.toString(), appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.delete<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiQueryDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { ViewUsage } from '../models/view-usage.model';\r\nimport { View } from '../models/view.model';\r\n\r\nconst webApiViewRoot = 'admin/view/';\r\nconst webApiViews = webApiViewRoot + 'all';\r\nconst webApiViewDelete = webApiViewRoot + 'delete';\r\nconst webApiViewImport = webApiViewRoot + 'import';\r\nconst webApiViewPolymorph = webApiViewRoot + 'polymorphism';\r\nconst webApiViewUsage = webApiViewRoot + 'usage';\r\n\r\n@Injectable()\r\nexport class ViewsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll() {\r\n    return this.http.get<View[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViews), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.http.get<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiViewDelete), {\r\n      params: { appId: this.context.appId.toString(), Id: id.toString() },\r\n    });\r\n  }\r\n\r\n  import(file: File) {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiViewImport), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  export(id: number) {\r\n    const url = this.dnnContext.$2sxc.http.apiUrl(webApiViewRoot + 'json')\r\n      + '?appId=' + this.context.appId\r\n      + '&viewId=' + id;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  getPolymorphism() {\r\n    return this.http.get<Polymorphism>(this.dnnContext.$2sxc.http.apiUrl(webApiViewPolymorph), {\r\n      params: { appId: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getUsage(guid: string) {\r\n    return this.http.get<ViewUsage[]>(this.dnnContext.$2sxc.http.apiUrl(webApiViewUsage), {\r\n      params: { appId: this.context.appId.toString(), guid }\r\n    });\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { Field } from '../../content-type-fields/models/field.model';\r\nimport { webApiFieldsAll } from '../../content-type-fields/services/content-types-fields.service';\r\nimport { webApiEntityList, webApiEntityRoot } from '../../edit/shared/services';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { Context } from '../../shared/services/context';\r\nimport { ContentItem } from '../models/content-item.model';\r\n\r\n@Injectable()\r\nexport class ContentItemsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  getAll(contentTypeStaticName: string) {\r\n    return this.http.get<ContentItem[]>(this.dnnContext.$2sxc.http.apiUrl(webApiEntityList), {\r\n      params: { appId: this.context.appId.toString(), contentType: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  getColumns(contentTypeStaticName: string) {\r\n    return this.http.get<Field[]>(this.dnnContext.$2sxc.http.apiUrl(webApiFieldsAll), {\r\n      params: { appId: this.context.appId.toString(), staticName: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  importItem(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(webApiEntityRoot + 'upload'), {\r\n          AppId: this.context.appId.toString(),\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Feature } from '../models';\r\n\r\nexport const webApiRoot = \"admin/feature/\";\r\n\r\n@Injectable()\r\nexport class FeatureDetailService {\r\n  constructor(\r\n    private http: HttpClient,\r\n    private dnnContext: DnnContext\r\n  ) { }\r\n\r\n  getFeatureDetails(featureNameId: string): Observable<Feature> {\r\n    return this.http.get<Feature>(this.dnnContext.$2sxc.http.apiUrl(webApiRoot + 'details'), {\r\n      params: { nameId: featureNameId }\r\n    });\r\n  }\r\n}\r\n","<mat-card *ngIf=\"viewModel$ | async as vm\">\r\n  <mat-card-header>\r\n    <mat-card-title>{{ vm.feature.Name }}</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <p [innerHtml]=\"vm.feature.Description | safeHtml\"></p>\r\n    <div class=\"eav-info-row\">\r\n      <div class=\"eav-info-row__label\">{{ \"Features.Status\" | translate }}:</div>\r\n      <div class=\"eav-info-row__value\">\r\n        <span>{{ (vm.feature.IsEnabled ? \"Features.Active\" : \"Features.NotActive\") | translate }}</span>\r\n      </div>\r\n    </div>\r\n    <div class=\"eav-info-row\" *ngIf=\"vm.feature.NameId as id\">\r\n      <div class=\"eav-info-row__label\">ID:</div>\r\n      <div class=\"eav-info-row__value eav_click\">\r\n        <span [tippy]=\"id\" (click)=\"copyToClipboard(id)\">{{ id }}</span>\r\n      </div>\r\n    </div>\r\n  </mat-card-content>\r\n  <mat-card-actions align=\"end\">\r\n    <button *ngIf=\"vm.feature.Link as link\" mat-raised-button color=\"accent\"\r\n      class=\"eav-card-action-button\" (click)=\"findOutMore(link)\">\r\n      <mat-icon>open_in_new</mat-icon>\r\n      {{ \"Features.FindOutMore\" | translate }}\r\n    </button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">\r\n      {{ \"Features.Close\" | translate }}\r\n    </button>\r\n  </mat-card-actions>\r\n</mat-card>","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Observable, combineLatest, map } from 'rxjs';\r\nimport { copyToClipboard } from '../../shared/helpers/copy-to-clipboard.helper';\r\nimport { Feature } from '../models';\r\nimport { FeatureDetailService } from '../services/feature-detail.service';\r\n\r\n@Component({\r\n  selector: 'app-feature-info-dialog',\r\n  templateUrl: './feature-info-dialog.component.html',\r\n  styleUrls: ['./feature-info-dialog.component.scss']\r\n})\r\nexport class FeatureInfoDialogComponent implements OnInit {\r\n  viewModel$: Observable<FeatureInfoViewModel>;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: string,\r\n    private dialogRef: MatDialogRef<FeatureInfoDialogComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private featureDetailService: FeatureDetailService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.viewModel$ = combineLatest([\r\n      this.featureDetailService.getFeatureDetails(this.dialogData)\r\n    ]).pipe(map(([feature]) => ({ feature })));\r\n  }\r\n\r\n  copyToClipboard(text: string): void {\r\n    copyToClipboard(text);\r\n    this.snackBar.open('Copied to clipboard', null, { duration: 2000 });\r\n  }\r\n\r\n  findOutMore(link: string): void { \r\n    window.open(link, '_blank');\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n\r\ninterface FeatureInfoViewModel {\r\n  feature: Feature;\r\n}","import { ChangeDetectorRef, Directive, Input, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { FeaturesService } from '../../shared/services/features.service';\r\nimport { FeatureInfoDialogComponent } from '../feature-info-dialog/feature-info-dialog.component';\r\nimport { BehaviorSubject, switchMap, Observable, map, combineLatest } from 'rxjs';\r\nimport { FeatureSummary } from '../models';\r\n\r\n@Directive()\r\nexport class FeatureComponentBase {\r\n  /** Feature NameId to check */\r\n  @Input()\r\n  public set featureNameId(value: string) { this.featureNameId$.next(value); }\r\n  protected featureNameId$ = new BehaviorSubject<string>(null);\r\n\r\n  /** By default, it will show if it's false - here we can change it to show if true */\r\n  @Input()\r\n  public set showIf(value: boolean) { this.showIf$.next(value == true); }\r\n  protected showIf$ = new BehaviorSubject<boolean>(false);\r\n\r\n  // TODO: @SDV - MAKE REACTIVE - SEE text-info-component example\r\n  // featureOn: boolean = true;\r\n  feature$: Observable<FeatureSummary>;\r\n  show$: Observable<boolean>;\r\n\r\n  constructor(\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    protected featuresService: FeaturesService\r\n  ) {\r\n    this.feature$ = this.featureNameId$.pipe(\r\n      switchMap(featName => this.featuresService.get$(featName)\r\n    ));\r\n    this.show$ = combineLatest([this.feature$, this.showIf$]).pipe(\r\n      // tap(data => console.log('2dm - show$', data)),\r\n      map(([feat,showIf]) => showIf == (feat?.IsEnabled ?? false))\r\n    );\r\n  }\r\n\r\n  openDialog() {\r\n    FeatureComponentBase.openDialog(this.dialog, this.featureNameId$.value, this.viewContainerRef, this.changeDetectorRef);\r\n  }\r\n\r\n  /** Public/Static so it can be called from elsewhere */\r\n  public static openDialog(dialog: MatDialog, featureId: string, viewContainerRef: ViewContainerRef, changeDetectorRef: ChangeDetectorRef) {\r\n    dialog.open(FeatureInfoDialogComponent, {\r\n      autoFocus: false,\r\n      data: featureId,\r\n      viewContainerRef: viewContainerRef,\r\n      width: '400px',\r\n    });\r\n\r\n    changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\n\r\nexport const webApiAppRoot = 'admin/app/';\r\n\r\n@Injectable()\r\nexport class ImportAppService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  importApp(file: File, changedName: string, retryOnDuplicate = false): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    formData.append('Name', changedName ?? '');\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Import'), formData, {\r\n      params: { zoneId: this.context.zoneId.toString() }\r\n    }).pipe(\r\n      switchMap(result => {\r\n        if (retryOnDuplicate && result.Messages[0]?.MessageType === FileUploadMessageTypes.Warning) {\r\n          const folderName = prompt(result.Messages[0].Text + ' Would you like to install it using another folder name?');\r\n          if (folderName) {\r\n            return this.importApp(file, folderName, true);\r\n          }\r\n        }\r\n        return of(result);\r\n      }),\r\n    );\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Delete {{ dialogData.entityTitle }} ({{ dialogData.entityId }})?</mat-card-title>\r\n    <mat-card-subtitle *ngIf=\"dialogData.message\" [innerHtml]=\"dialogData.message | safeHtml\"></mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog(true)\">Delete</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-confirm-delete-dialog',\r\n  templateUrl: './confirm-delete-dialog.component.html',\r\n  styleUrls: ['./confirm-delete-dialog.component.scss'],\r\n})\r\nexport class ConfirmDeleteDialogComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    private dialogRef: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.dialogRef.close(confirm);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-metadata-actions',\r\n  templateUrl: './metadata-actions.component.html',\r\n  styleUrls: ['./metadata-actions.component.scss'],\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\n\r\n@Component({\r\n  selector: 'app-metadata-content-type',\r\n  templateUrl: './metadata-content-type.component.html',\r\n  styleUrls: ['./metadata-content-type.component.scss'],\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\" [tippyDisabled]=\"!metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","<mat-card *ngIf=\"viewModel$ | async as vm\">\r\n  <mat-card-header>\r\n    <mat-card-title>Create Metadata</mat-card-title>\r\n    <mat-card-subtitle>\r\n      This is a special operation to add an item which is metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      <ng-container *ngIf=\"advancedMode && guidedContentType\">\r\n        <mat-form-field color=\"accent\" class=\"eav-form-field\">\r\n          <mat-label>Scope</mat-label>\r\n          <mat-select formControlName=\"scope\" [placeholder]=\"!vm.scopeOptions.length ? 'No items found' : ''\">\r\n            <mat-option *ngFor=\"let scopeOption of vm.scopeOptions\" [value]=\"scopeOption.value\">\r\n              {{ scopeOption.name }}\r\n            </mat-option>\r\n            <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n        <app-field-hint>\r\n          The scope should almost never be changed -\r\n          <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n        </app-field-hint>\r\n      </ng-container>\r\n  \r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        <mat-select *ngIf=\"guidedContentType\" formControlName=\"contentType\" required\r\n          [placeholder]=\"!vm.contentTypes.length ? 'No items found' : ''\">\r\n          <mat-option *ngFor=\"let contentType of vm.contentTypes\" [value]=\"contentType.StaticName\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n        </mat-select>\r\n  \r\n        <input matInput type=\"text\" *ngIf=\"!guidedContentType\" formControlName=\"contentType\" required>\r\n  \r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      <app-field-hint *ngIf=\"form.controls.contentType.touched && form.controls.contentType.errors?.required\"\r\n        [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"eav-card-actions\">\r\n    <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n      {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n    </mat-slide-toggle>\r\n    <div>\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\" (click)=\"confirm()\">\r\n        Confirm\r\n      </button>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>","import { Component, HostBinding, OnDestroy, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSlideToggleChange } from '@angular/material/slide-toggle';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, map, Observable, startWith } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { MetadataSaveDialogViewModel, MetadataSaveFormValues } from './metadata-save-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-metadata-save-dialog',\r\n  templateUrl: './metadata-save-dialog.component.html',\r\n  styleUrls: ['./metadata-save-dialog.component.scss']\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  viewModel$: Observable<MetadataSaveDialogViewModel>;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  private contentTypes$: BehaviorSubject<ContentType[]>;\r\n  private scopeOptions$: BehaviorSubject<ScopeOption[]>;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<MetadataSaveDialogComponent>,\r\n    private contentTypesService: ContentTypesService,\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.contentTypes$ = new BehaviorSubject<ContentType[]>([]);\r\n    this.scopeOptions$ = new BehaviorSubject<ScopeOption[]>([]);\r\n\r\n    this.buildForm();\r\n    this.fetchScopes();\r\n\r\n    this.viewModel$ = combineLatest([this.contentTypes$, this.scopeOptions$]).pipe(\r\n      map(([contentTypes, scopeOptions]) => {\r\n        const viewModel: MetadataSaveDialogViewModel = {\r\n          contentTypes,\r\n          scopeOptions,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.contentTypes$.complete();\r\n    this.scopeOptions$.complete();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialogRef.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions$.value.some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions$.next([newScopeOption, ...this.scopeOptions$.value]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.fetchContentTypes(newScope);\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchContentTypes(scope: string): void {\r\n    this.contentTypesService.retrieveContentTypes(scope).subscribe(contentTypes => {\r\n      this.contentTypes$.next(contentTypes);\r\n    });\r\n  }\r\n\r\n  private fetchScopes(): void {\r\n    this.contentTypesService.getScopes().subscribe(scopes => {\r\n      this.scopeOptions$.next(scopes);\r\n    });\r\n  }\r\n}\r\n","<ng-container *ngIf=\"viewModel$ | async as vm\">\r\n  <div class=\"eav-dialog nav-component-wrapper\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">\r\n        {{ title || 'Metadata' }}\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n    <div class=\"eav-dialog-content nav-component-wrapper\">\r\n      <p>\r\n        <ng-container *ngIf=\"!vm.itemFor\">This item is not metadata for anything else.</ng-container>\r\n        <ng-container *ngIf=\"vm.itemFor\">\r\n          This item is metadata for:\r\n          <br>Target: {{ vm.itemFor.Target }}\r\n          <br>TargetType: {{ vm.itemFor.TargetType }}\r\n          <ng-container *ngIf=\"vm.itemFor.Number\"><br>Number: {{ vm.itemFor.Number }}</ng-container>\r\n          <ng-container *ngIf=\"vm.itemFor.Guid\"><br>Guid: {{ vm.itemFor.Guid }}</ng-container>\r\n          <ng-container *ngIf=\"vm.itemFor.String\"><br>String: {{ vm.itemFor.String }}</ng-container>\r\n          <ng-container *ngIf=\"vm.itemFor.Title\"><br>Title: {{ vm.itemFor.String }}</ng-container>\r\n        </ng-container>\r\n      </p>\r\n      <router-outlet></router-outlet>\r\n      <div class=\"grid-wrapper\">\r\n        <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.metadata\" [gridOptions]=\"gridOptions\">\r\n        </ag-grid-angular>\r\n      </div>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      <button mat-fab mat-elevation-z24 class=\"grid-fab\" *ngIf=\"vm.recommendations.length === 0\"\r\n        tippy=\"Create a new metadata for this item\" (click)=\"createMetadata()\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n  \r\n      <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': vm.fabOpen }\" *ngIf=\"vm.recommendations.length > 0\"\r\n        (openChange)=\"openChange($event)\">\r\n        <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n          <button mat-fab>\r\n            <mat-icon class=\"spin180\">{{ vm.fabOpen ? 'close' : 'add' }}</mat-icon>\r\n          </button>\r\n        </eco-fab-speed-dial-trigger>\r\n        <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\" (click)=\"createMetadata()\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" *ngFor=\"let recommendation of vm.recommendations\" [attr.label]=\"recommendation.Title\"\r\n            (click)=\"createMetadata(recommendation)\">\r\n            <div *ngIf=\"recommendation.Icon; then svgIcon else matIcon\"></div>\r\n            <ng-template #svgIcon>\r\n              <div style=\"color: white; fill: white;\" [innerHTML]=\"recommendation.Icon | safeHtml\" [matBadgeHidden]=\"recommendation.Enabled\"\r\n                matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"💎\" matBadgePosition=\"below after\"\r\n                aria-hidden=\"false\"></div>\r\n            </ng-template>\r\n            <ng-template #matIcon>\r\n              <mat-icon>add</mat-icon>\r\n            </ng-template>\r\n          </button>\r\n        </eco-fab-speed-dial-actions>\r\n      </eco-fab-speed-dial>\r\n    </mat-dialog-actions>\r\n  </div>\r\n</ng-container>","import { GridOptions } from '@ag-grid-community/core';\r\nimport { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, map, Observable, tap } from 'rxjs';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EntitiesService } from '../content-items/services/entities.service';\r\nimport { EavFor } from '../edit/shared/models/eav';\r\nimport { MetadataService } from '../permissions';\r\nimport { BaseComponent } from '../shared/components/base-component/base.component';\r\nimport { IdFieldComponent } from '../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants, MetadataKeyType } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../shared/models/edit-form.model';\r\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataItem, MetadataRecommendation, MetadataViewModel } from './models/metadata.model';\r\nimport { FeatureComponentBase } from '../features/shared/base-feature.component';\r\n\r\n@Component({\r\n  selector: 'app-metadata',\r\n  templateUrl: './metadata.component.html',\r\n  styleUrls: ['./metadata.component.scss'],\r\n})\r\nexport class MetadataComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private metadata$ = new BehaviorSubject<MetadataItem[]>([]);\r\n  private recommendations$ = new BehaviorSubject<MetadataRecommendation[]>([]);\r\n  private itemFor$ = new BehaviorSubject<EavFor | undefined>(undefined);\r\n  private fabOpen$ = new BehaviorSubject(false);\r\n  private targetType = parseInt(this.route.snapshot.paramMap.get('targetType'), 10);\r\n  private keyType = this.route.snapshot.paramMap.get('keyType') as MetadataKeyType;\r\n  private key = this.route.snapshot.paramMap.get('key');\r\n  title = decodeURIComponent(this.route.snapshot.paramMap.get('title') ?? '');\r\n  private contentTypeStaticName = this.route.snapshot.paramMap.get('contentTypeStaticName');\r\n  viewModel$: Observable<MetadataViewModel>;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<MetadataComponent>,\r\n\r\n    private metadataService: MetadataService,\r\n    private snackBar: MatSnackBar,\r\n    private entitiesService: EntitiesService,\r\n    private contentItemsService: ContentItemsService,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchFor();\r\n    this.fetchMetadata();\r\n    this.subscription.add(this.refreshOnChildClosedShallow().subscribe(() => { this.fetchMetadata(); }));\r\n\r\n    const filteredRecommendations$ = combineLatest([this.metadata$, this.recommendations$]).pipe(\r\n      map(([metadataItems, recommendations]) =>\r\n        recommendations.filter(r => metadataItems.filter(i => i._Type.Id === r.Id).length < r.Count)),\r\n    );\r\n    this.viewModel$ = combineLatest([this.metadata$, filteredRecommendations$, this.itemFor$, this.fabOpen$]).pipe(\r\n      map(([metadata, recommendations, itemFor, fabOpen]) => {\r\n        const viewModel: MetadataViewModel = {\r\n          metadata,\r\n          recommendations,\r\n          itemFor,\r\n          fabOpen,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.metadata$.complete();\r\n    this.recommendations$.complete();\r\n    this.itemFor$.complete();\r\n    this.fabOpen$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen$.next(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        FeatureComponentBase.openDialog(this.dialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.entitiesService.create(recommendation.Id, { For: this.calculateItemFor() }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.fetchMetadata();\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.fetchMetadata();\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.dialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) { return; }\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [{\r\n        ContentTypeName: contentType,\r\n        For: this.calculateItemFor(),\r\n      }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(): EavFor {\r\n    const itemFor: EavFor = {\r\n      Target: Object.values(eavConstants.metadata).find(m => m.targetType === this.targetType)?.target ?? this.targetType.toString(),\r\n      TargetType: this.targetType,\r\n      ...(this.keyType === eavConstants.keyTypes.guid && { Guid: this.key }),\r\n      ...(this.keyType === eavConstants.keyTypes.number && { Number: parseInt(this.key, 10) }),\r\n      ...(this.keyType === eavConstants.keyTypes.string && { String: this.key }),\r\n    };\r\n    return itemFor;\r\n  }\r\n\r\n  private fetchFor() {\r\n    if (!this.contentTypeStaticName) { return; }\r\n\r\n    this.contentItemsService.getAll(this.contentTypeStaticName).subscribe(items => {\r\n      const item = items.find(i => i.Guid === this.key);\r\n      if (item?.For) {\r\n        this.itemFor$.next(item.For);\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchMetadata() {\r\n    this.metadataService.getMetadata(this.targetType, this.keyType, this.key).pipe(\r\n      map(metadata => {\r\n        metadata.Recommendations.forEach(recommendation => {\r\n          if (recommendation.Icon?.startsWith('base64:')) {\r\n            recommendation.Icon = recommendation.Icon.replace('base64:', '');\r\n            recommendation.Icon = window.atob(recommendation.Icon);\r\n            // used for coloring black icons to white\r\n            recommendation.Icon = recommendation.Icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n          }\r\n        });\r\n        return metadata;\r\n      }),\r\n      tap(metadata => {\r\n        this.metadata$.next(metadata.Items);\r\n        this.recommendations$.next(metadata.Recommendations);\r\n      })).subscribe();\r\n  }\r\n\r\n  private editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [{ EntityId: metadata.Id }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.recommendations$.value.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.dialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed) {\r\n          this.deleteMetadata(metadata, true);\r\n        }\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.entitiesService.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.fetchMetadata();\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          headerName: 'ID',\r\n          field: 'Id',\r\n          width: 70,\r\n          headerClass: 'dense',\r\n          cellClass: 'id-action no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: 'agNumberColumnFilter',\r\n          valueGetter: (params) => {\r\n            const metadata: MetadataItem = params.data;\r\n            return metadata.Id;\r\n          },\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<MetadataItem> = {\r\n              tooltipGetter: (metadata: MetadataItem) => `ID: ${metadata.Id}\\nGUID: ${metadata.Guid}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          field: 'Title',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'primary-action highlight'.split(' '),\r\n          sortable: true,\r\n          sort: 'asc',\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const metadata: MetadataItem = params.data;\r\n            return metadata.Title;\r\n          },\r\n          onCellClicked: (params) => {\r\n            const metadata: MetadataItem = params.data;\r\n            this.editMetadata(metadata);\r\n          },\r\n        },\r\n        {\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (params) => {\r\n            const metadata: MetadataItem = params.data;\r\n            return `${metadata._Type.Name}${metadata._Type.Title !== metadata._Type.Name ? ` (${metadata._Type.Title})` : ''}`;\r\n          },\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          width: 42,\r\n          cellClass: 'secondary-action no-padding'.split(' '),\r\n          pinned: 'right',\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: MetadataActionsParams = {\r\n              onDelete: (metadata) => this.deleteMetadata(metadata),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\" [ngSwitch]=\"isError\">\r\n  <mat-hint *ngSwitchCase=\"false\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-hint>\r\n\r\n  <mat-error *ngSwitchCase=\"true\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-error>\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","import { Directive, HostListener } from '@angular/core';\r\n\r\n@Directive({ selector: '[appClickStopPropagation]' })\r\nexport class ClickStopPropagationDirective {\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    event.stopPropagation();\r\n  }\r\n}\r\n","export function toBase64(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => {\r\n      resolve((reader.result as string).split(',')[1]);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n\r\nexport function toString(file: File): Promise<string> {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      resolve(reader.result as string);\r\n    };\r\n    reader.onerror = error => {\r\n      reject(error);\r\n    };\r\n  });\r\n}\r\n"],"x_google_ignoreList":[]}