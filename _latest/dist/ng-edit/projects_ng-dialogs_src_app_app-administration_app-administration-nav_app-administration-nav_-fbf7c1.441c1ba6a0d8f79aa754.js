(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_app-administration_app-administration-nav_app-administration-nav_-fbf7c1"],{3384:function(t,e,n){"use strict";n.r(e),n.d(e,{AppAdministrationNavComponent:function(){return _e}});var i=n(4762),o=n(1282),a=n(8512),s=n(1305),r=n(7570),p=n(3835),c=n(9996),l=n(6238),u=n(2855),d=n(5803),g=n(1652),m={App:"App",Site:"Site",Global:"Global"},f=n(1785),h=n(2935),Z=n(2887),y=n(1116),T=n(6146),b=n(4369),A=n(7512),v=n(7307),C=n(7173),x=n(2592),q=function(){function t(){}return t.prototype.ngOnInit=function(){},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-getting-started"]],inputs:{gettingStartedUrl:"gettingStartedUrl"},decls:2,vars:3,consts:[[1,"iframe",3,"src"]],template:function(t,e){1&t&&(f._UZ(0,"iframe",0),f.ALo(1,"safeResourceUrl")),2&t&&f.Q6J("src",f.lcZ(1,1,e.gettingStartedUrl),f.uOi)},pipes:[x.t],styles:[".iframe[_ngcontent-%COMP%]{border:none;width:100%;height:calc(100vh - 209px)}@media (max-width:600px){.iframe[_ngcontent-%COMP%]{height:calc(100vh - 161px)}}"]}),t}(),S=n(9206),w=n(9764),k=n(611),I=n(8720),U=n(5911),J=n(753),N=n(241),E=n(6085),P=n(8579),R=n(9529),_=n(8442),Q=n(2420),O=n(7289),F=n(7064),M=n(7070),B=n(7217);function D(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",11),f.NdJ("click",function(){return f.CHM(n),f.oxw().createOrEditMetadata()}),f.TgZ(1,"mat-icon"),f._uU(2,"edit"),f.qZA(),f.qZA()}}function G(t,e){1&t&&(f.TgZ(0,"div",12),f.TgZ(1,"mat-icon"),f._uU(2,"edit"),f.qZA(),f.qZA())}function V(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",13),f.NdJ("click",function(){return f.CHM(n),f.oxw().openMetadata()}),f.TgZ(1,"mat-icon",14),f._uU(2," local_offer "),f.qZA(),f.qZA()}if(2&t){var i=f.oxw();f.xp6(1),f.Q6J("matBadge",i.contentType.Metadata.length)("matBadgeHidden",!i.contentType.Metadata.length)}}function Y(t,e){if(1&t&&(f.TgZ(0,"div",12),f.TgZ(1,"mat-icon",15),f._uU(2," local_offer "),f.qZA(),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("matBadge",n.contentType.Metadata.length)("matBadgeHidden",!n.contentType.Metadata.length)}}function W(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",16),f.NdJ("click",function(){return f.CHM(n),f.oxw().openPermissions()}),f.TgZ(1,"mat-icon",14),f._uU(2," person "),f.qZA(),f.qZA()}if(2&t){var i=f.oxw();f.xp6(1),f.Q6J("matBadge",i.contentType.Permissions.Count)("matBadgeHidden",!i.contentType.Permissions.Count)}}function H(t,e){if(1&t&&(f.TgZ(0,"div",12),f.TgZ(1,"mat-icon",15),f._uU(2," person "),f.qZA(),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("matBadge",n.contentType.Permissions.Count)("matBadgeHidden",!n.contentType.Permissions.Count)}}var L=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.contentType=this.params.data;var e=this.params.enablePermissionsGetter();this.enablePermissions=e&&(0,O.M)().test(this.contentType.StaticName)},t.prototype.refresh=function(t){return!0},t.prototype.createOrEditMetadata=function(){this.params.onCreateOrEditMetadata(this.contentType)},t.prototype.openPermissions=function(){this.params.onOpenPermissions(this.contentType)},t.prototype.editContentType=function(){this.params.onEdit(this.contentType)},t.prototype.openMetadata=function(){this.params.onOpenMetadata(this.contentType)},t.prototype.openRestApi=function(){this.params.onOpenRestApi(this.contentType)},t.prototype.exportType=function(){this.params.onTypeExport(this.contentType)},t.prototype.openDataExport=function(){this.params.onOpenDataExport(this.contentType)},t.prototype.openDataImport=function(){this.params.onOpenDataImport(this.contentType)},t.prototype.deleteContentType=function(){this.params.onDelete(this.contentType)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-data-actions"]],decls:41,vars:9,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Description and more",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["matRipple","","tippy","Description and more",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"]],template:function(t,e){if(1&t&&(f.TgZ(0,"div",0),f.YNc(1,D,3,0,"div",1),f.YNc(2,G,3,0,"div",2),f.YNc(3,V,3,2,"div",3),f.YNc(4,Y,3,2,"div",2),f.YNc(5,W,3,2,"div",4),f.YNc(6,H,3,2,"div",2),f.TgZ(7,"div",5),f.TgZ(8,"mat-icon"),f._uU(9,"more_horiz"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"mat-menu",6,7),f.TgZ(12,"button",8),f.NdJ("click",function(){return e.editContentType()}),f.TgZ(13,"mat-icon"),f._uU(14,"settings"),f.qZA(),f.TgZ(15,"span"),f._uU(16,"Rename"),f.qZA(),f.qZA(),f.TgZ(17,"button",9),f.NdJ("click",function(){return e.openRestApi()}),f._UZ(18,"mat-icon",10),f.TgZ(19,"span"),f._uU(20,"REST API"),f.qZA(),f.qZA(),f.TgZ(21,"button",9),f.NdJ("click",function(){return e.exportType()}),f.TgZ(22,"mat-icon"),f._uU(23,"cloud_download"),f.qZA(),f.TgZ(24,"span"),f._uU(25,"Export content type"),f.qZA(),f.qZA(),f.TgZ(26,"button",9),f.NdJ("click",function(){return e.openDataExport()}),f.TgZ(27,"mat-icon"),f._uU(28,"cloud_download"),f.qZA(),f.TgZ(29,"span"),f._uU(30,"Export data"),f.qZA(),f.qZA(),f.TgZ(31,"button",9),f.NdJ("click",function(){return e.openDataImport()}),f.TgZ(32,"mat-icon"),f._uU(33,"cloud_upload"),f.qZA(),f.TgZ(34,"span"),f._uU(35,"Import data"),f.qZA(),f.qZA(),f.TgZ(36,"button",8),f.NdJ("click",function(){return e.deleteContentType()}),f.TgZ(37,"mat-icon"),f._uU(38,"delete"),f.qZA(),f.TgZ(39,"span"),f._uU(40,"Delete"),f.qZA(),f.qZA(),f.qZA()),2&t){var n=f.MAs(11);f.xp6(1),f.Q6J("ngIf",!e.contentType.EditInfo.ReadOnly||e.contentType.Properties),f.xp6(1),f.Q6J("ngIf",e.contentType.EditInfo.ReadOnly&&!e.contentType.Properties),f.xp6(1),f.Q6J("ngIf",!e.contentType.EditInfo.ReadOnly),f.xp6(1),f.Q6J("ngIf",e.contentType.EditInfo.ReadOnly),f.xp6(1),f.Q6J("ngIf",!e.contentType.EditInfo.ReadOnly&&e.enablePermissions),f.xp6(1),f.Q6J("ngIf",e.contentType.EditInfo.ReadOnly||!e.enablePermissions),f.xp6(1),f.Q6J("matMenuTriggerFor",n),f.xp6(5),f.Q6J("disabled",e.contentType.EditInfo.ReadOnly),f.xp6(24),f.Q6J("disabled",e.contentType.EditInfo.ReadOnly)}},directives:[y.O5,F.wG,A.$,M.p6,v.Hw,M.VK,M.OP,B.k],styles:[""]}),t}(),z=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.contentType=t.data,this.value=t.value,this.tooltip=this.contentType.EditInfo.ReadOnly?(this.contentType.EditInfo.ReadOnlyMessage?this.contentType.EditInfo.ReadOnlyMessage+"\n\n":"")+"This ContentType shares the definition of #"+this.contentType.SharedDefId+" so you can't edit it here. Read 2sxc.org/help?tag=shared-types":"Edit fields",this.icon=this.contentType.EditInfo.ReadOnly?"share":"dns"},t.prototype.refresh=function(t){return!0},t.prototype.editFields=function(){this.params.onEditFields(this.contentType)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-data-fields"]],decls:4,vars:4,consts:[[1,"actions-component"],["matRipple","",1,"like-button","highlight",3,"tippy","click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.NdJ("click",function(){return e.editFields()}),f.TgZ(2,"mat-icon",2),f._uU(3),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("tippy",e.tooltip),f.xp6(1),f.Q6J("matBadge",e.value)("matBadgeHidden",!e.value),f.xp6(1),f.hij(" ",e.icon," "))},directives:[F.wG,A.$,v.Hw,B.k],styles:[""]}),t}(),K=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.contentType=t.data,this.value=t.value},t.prototype.refresh=function(t){return!0},t.prototype.showItems=function(){this.params.onShowItems(this.contentType)},t.prototype.addItem=function(){this.params.onAddItem(this.contentType)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-data-items"]],decls:7,vars:2,consts:[[1,"actions-component"],["matRipple","",1,"like-button","highlight",3,"tippy","click"],[1,"text-icon"],["matRipple","","tippy","Add item",1,"like-button","highlight",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.NdJ("click",function(){return e.showItems()}),f.TgZ(2,"div",2),f._uU(3),f.qZA(),f.qZA(),f.TgZ(4,"div",3),f.NdJ("click",function(){return e.addItem()}),f.TgZ(5,"mat-icon"),f._uU(6,"add"),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.MGl("tippy","",e.value," items"),f.xp6(2),f.Oqu(e.value))},directives:[F.wG,A.$,v.Hw],styles:[".text-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px;line-height:22px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border:1px solid rgba(29,39,61,.44);border-radius:12px;box-sizing:border-box;background-color:#002753;color:#fff;-webkit-user-select:none;user-select:none;min-width:24px;width:auto}"]}),t}(),X=n(2832),j=n(9886),$=n(3589),tt=n(3653),et=n(9825),nt=n(5921),it=n(3070),ot=n(3841),at=n(1041);function st(t,e){if(1&t&&(f.TgZ(0,"mat-option",6),f._uU(1),f.qZA()),2&t){var n=e.$implicit;f.Q6J("value",n.value),f.xp6(1),f.hij(" ","Scope: "+n.name," ")}}function rt(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"button",10),f.NdJ("click",function(){return f.CHM(n),f.oxw().createGhost()}),f.TgZ(1,"mat-icon"),f._uU(2,"share"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Ghost"),f.qZA(),f.qZA()}}var pt=function(){function t(t,e,n,o,s,p){var c=this;this.router=t,this.route=e,this.contentTypesService=n,this.globalConfigService=o,this.snackBar=s,this.contentExportService=p,this.contentTypes$=new a.X(null),this.scope$=new a.X(null),this.scopeOptions$=new a.X([]),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.modules=S.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},P.f),{frameworkComponents:{idFieldComponent:E.m,dataItemsComponent:K,dataFieldsComponent:z,dataActionsComponent:L},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(t){return(t.data.EditInfo.ReadOnly?"disabled":"")+" id-action no-padding no-outline"},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.StaticName}}},{headerName:"Content Type",field:"Label",flex:3,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(t){return c.showContentItems(t.data)},comparator:function(t,e,n,i,o){return n.data._compareLabel.localeCompare(i.data._compareLabel)}},{headerName:"Items",field:"Items",width:102,headerClass:"dense",cellClass:"secondary-action no-padding",sortable:!0,filter:"agNumberColumnFilter",cellRenderer:"dataItemsComponent",cellRendererParams:{onShowItems:function(t){return c.showContentItems(t)},onAddItem:function(t){return c.addItem(t)}}},{headerName:"Fields",field:"Fields",width:94,headerClass:"dense",cellClass:"secondary-action no-padding",sortable:!0,filter:"agNumberColumnFilter",cellRenderer:"dataFieldsComponent",cellRendererParams:{onEditFields:function(t){return c.editFields(t)}}},{headerName:"Name",field:"Name",flex:1,minWidth:100,cellClass:function(t){return t.data.EditInfo.ReadOnly?"no-outline":"primary-action highlight"},sortable:!0,filter:"agTextColumnFilter",onCellClicked:function(t){return c.editContentType(t.data)}},{headerName:"Description",field:"Properties.Description",flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:162,cellClass:"secondary-action no-padding",cellRenderer:"dataActionsComponent",pinned:"right",cellRendererParams:{enablePermissionsGetter:this.enablePermissionsGetter.bind(this),onCreateOrEditMetadata:this.createOrEditMetadata.bind(this),onOpenPermissions:this.openPermissions.bind(this),onEdit:this.editContentType.bind(this),onOpenRestApi:this.openRestApi.bind(this),onOpenMetadata:this.openMetadata.bind(this),onTypeExport:this.exportType.bind(this),onOpenDataExport:this.openDataExport.bind(this),onOpenDataImport:this.openDataImport.bind(this),onDelete:this.deleteContentType.bind(this)}}]}),this.dropdownInsertValue=R.G,this.subscription=new r.w}return t.prototype.ngOnInit=function(){this.fetchScopes(),this.refreshScopeOnRouteChange(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.contentTypes$.complete(),this.scope$.complete(),this.scopeOptions$.complete(),this.subscription.unsubscribe()},t.prototype.filesDropped=function(t){var e=this,n=t[0];switch(n.name.substring(n.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":(0,w.D)((0,_.B)(t[0])).pipe((0,k.q)(1)).subscribe(function(n){var i,o=null===(i=n.split('<Entity Type="')[1])||void 0===i?void 0:i.split('"')[0],a=e.contentTypes$.value.find(function(t){return t.Name===o});null!=a?e.openDataImport(a,t):e.snackBar.open("Cannot find Content Type named '"+o+"'. Please open Content Type Import dialog manually.",null,{duration:5e3})});break;case"json":this.importType(t)}},t.prototype.importType=function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})},t.prototype.showContentItems=function(t){this.router.navigate(["items/"+t.StaticName],{relativeTo:this.route.firstChild})},t.prototype.editContentType=function(t){if(t){if(t.EditInfo.ReadOnly)return;this.router.navigate([t.StaticName+"/edit"],{relativeTo:this.route.firstChild})}else this.router.navigate(["add"],{relativeTo:this.route.firstChild})},t.prototype.fetchContentTypes=function(){var t=this;this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(function(e){var n,o;try{for(var a=(0,i.XA)(e),s=a.next();!s.done;s=a.next()){var r=s.value;r._compareLabel=r.Label.replace(/\p{Emoji}/gu,"\u017e")}}catch(p){n={error:p}}finally{try{s&&!s.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}t.contentTypes$.next(e),t.scope$.value!==d.Z.scopes.default.value&&t.snackBar.open("Warning! You are in a special scope. Changing things here could easily break functionality",null,{duration:2e3})})},t.prototype.fetchScopes=function(){var t=this;this.contentTypesService.getScopes().subscribe(function(e){var n=(0,i.ev)([],(0,i.CR)(t.scopeOptions$.value));e.forEach(function(t){var e=n.find(function(e){return e.value===t.value});e?e.name=t.name:n.push(t)}),t.scopeOptions$.next(n)})},t.prototype.createGhost=function(){var t=this,e=window.prompt("To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost");e&&(this.snackBar.open("Saving..."),this.contentTypesService.createGhost(e).subscribe(function(e){t.snackBar.open("Saved",null,{duration:2e3}),t.fetchContentTypes()}))},t.prototype.changeScope=function(t){t===R.G&&(t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||d.Z.scopes.default.value),this.router.navigate(["data/"+t],{relativeTo:this.route})},t.prototype.enablePermissionsGetter=function(){return this.enablePermissions},t.prototype.addItem=function(t){var e=(0,Q.f)({items:[{ContentTypeName:t.StaticName}]});this.router.navigate(["edit/"+e],{relativeTo:this.route.firstChild})},t.prototype.editFields=function(t){this.router.navigate(["fields/"+t.StaticName],{relativeTo:this.route.firstChild})},t.prototype.createOrEditMetadata=function(t){var e=(0,Q.f)({items:[t.Properties?{EntityId:t.Properties.Id}:{ContentTypeName:d.Z.contentTypes.contentType,For:{Target:d.Z.metadata.contentType.target,String:t.StaticName},Prefill:{Label:t.Name,Description:t.Description}}]});this.router.navigate(["edit/"+e],{relativeTo:this.route.firstChild})},t.prototype.openMetadata=function(t){var e=J.U.getUrlContentType(t.StaticName,"Metadata for Content Type: "+t.Name+" ("+t.Id+")");this.router.navigate([e],{relativeTo:this.route.firstChild})},t.prototype.openRestApi=function(t){this.router.navigate([U.i.getUrlData(t)],{relativeTo:this.route.firstChild})},t.prototype.exportType=function(t){this.contentExportService.exportJson(t.StaticName)},t.prototype.openDataExport=function(t){this.router.navigate(["export/"+t.StaticName],{relativeTo:this.route.firstChild})},t.prototype.openDataImport=function(t,e){this.router.navigate([t.StaticName+"/import"],{relativeTo:this.route.firstChild,state:{files:e}})},t.prototype.openPermissions=function(t){this.router.navigate([N.i.getUrlContentType(t.StaticName)],{relativeTo:this.route.firstChild})},t.prototype.deleteContentType=function(t){var e=this;confirm("Are you sure you want to delete '"+t.Name+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.contentTypesService.delete(t).subscribe(function(t){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchContentTypes()}))},t.prototype.refreshScopeOnRouteChange=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,c.U)(function(){return t.route.snapshot.firstChild.paramMap.get("scope")}),(0,l.O)(this.route.snapshot.firstChild.paramMap.get("scope")),(0,p.h)(function(t){return!!t}),(0,I.x)()).subscribe(function(e){if(t.scope$.next(e),!t.scopeOptions$.value.map(function(t){return t.value}).includes(e)){var n={name:e,value:e};t.scopeOptions$.next((0,i.ev)((0,i.ev)([],(0,i.CR)(t.scopeOptions$.value)),[n]))}t.fetchContentTypes()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,l.O)(!!this.route.snapshot.firstChild.firstChild),(0,c.U)(function(){return!!t.route.snapshot.firstChild.firstChild}),(0,u.G)(),(0,p.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchContentTypes()}))},t.\u0275fac=function(e){return new(e||t)(f.Y36(o.F0),f.Y36(o.gz),f.Y36(X.s),f.Y36(j.bE),f.Y36($.ux),f.Y36(tt.i))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-data"]],inputs:{enablePermissions:"enablePermissions"},decls:21,vars:16,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["appearance","standard","color","accent",1,"scope-dropdown"],["name","Scope",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-button","","tippy","Import content type",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Create a new content type",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"ag-grid-angular",1),f.NdJ("filesDropped",function(t){return e.filesDropped(t)}),f.ALo(2,"async"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"mat-form-field",3),f.TgZ(5,"mat-select",4),f.NdJ("ngModelChange",function(t){return e.changeScope(t)}),f.ALo(6,"async"),f.YNc(7,st,2,2,"mat-option",5),f.ALo(8,"async"),f.TgZ(9,"mat-option",6),f._uU(10,"Scope: Other..."),f.qZA(),f.qZA(),f.qZA(),f.TgZ(11,"button",7),f.NdJ("click",function(){return e.importType()}),f.TgZ(12,"mat-icon"),f._uU(13,"cloud_upload"),f.qZA(),f.TgZ(14,"span"),f._uU(15,"Content Type"),f.qZA(),f.qZA(),f.YNc(16,rt,5,0,"button",8),f.ALo(17,"async"),f.qZA(),f.TgZ(18,"button",9),f.NdJ("click",function(){return e.editContentType(null)}),f.TgZ(19,"mat-icon"),f._uU(20,"add"),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("rowData",f.lcZ(2,8,e.contentTypes$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),f.xp6(4),f.Q6J("ngModel",f.lcZ(6,10,e.scope$)),f.xp6(2),f.Q6J("ngForOf",f.lcZ(8,12,e.scopeOptions$)),f.xp6(2),f.Q6J("value",e.dropdownInsertValue),f.xp6(7),f.Q6J("ngIf",f.lcZ(17,14,e.debugEnabled$)))},directives:[et.N8,nt.z,it.KE,ot.gD,at.JJ,at.On,y.sg,F.ey,b.lW,A.$,v.Hw,y.O5],pipes:[y.Ov],styles:[".scope-dropdown[_ngcontent-%COMP%]{width:200px;margin-top:-14px;font-size:14px;height:auto}"]}),t}(),ct=function(t){return t[t.Edit=0]="Edit",t[t.Metadata=1]="Metadata",t[t.Rest=2]="Rest",t[t.Clone=3]="Clone",t[t.Permissions=4]="Permissions",t[t.Export=5]="Export",t[t.Delete=6]="Delete",t}({});function lt(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",11),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.params.do(t.actions.Metadata,t.item)}),f.TgZ(1,"mat-icon",12),f._uU(2," local_offer "),f.qZA(),f.qZA()}if(2&t){var i=f.oxw();f.xp6(1),f.Q6J("matBadge",null==i.item.Metadata?null:i.item.Metadata.length)("matBadgeHidden",!(null!=i.item.Metadata&&i.item.Metadata.length))}}function ut(t,e){if(1&t&&(f.TgZ(0,"div",13),f.TgZ(1,"mat-icon",14),f._uU(2," local_offer "),f.qZA(),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("matBadge",null==n.item.Metadata?null:n.item.Metadata.length)("matBadgeHidden",!(null!=n.item.Metadata&&n.item.Metadata.length))}}function dt(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",15),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.params.do(t.actions.Permissions,t.item)}),f.TgZ(1,"mat-icon",12),f._uU(2," person "),f.qZA(),f.qZA()}if(2&t){var i=f.oxw();f.xp6(1),f.Q6J("matBadge",i.item._Permissions.Count)("matBadgeHidden",!i.item._Permissions.Count)}}function gt(t,e){if(1&t&&(f.TgZ(0,"div",13),f.TgZ(1,"mat-icon",14),f._uU(2," person "),f.qZA(),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("matBadge",n.item._Permissions.Count)("matBadgeHidden",!n.item._Permissions.Count)}}var mt=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.actions=ct,e}return(0,i.ZT)(e,t),e.prototype.agInit=function(e){t.prototype.agInit.call(this,e),this.enablePermissions=this.params.getEnablePermissions()},e.\u0275fac=function(){var t;return function(n){return(t||(t=f.n5z(e)))(n||e)}}(),e.\u0275cmp=f.Xpm({type:e,selectors:[["app-queries-actions"]],features:[f.qOj],decls:32,vars:6,consts:[[1,"actions-component"],["matRipple","","tippy","Edit",1,"like-button","highlight",3,"click"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["mat-menu-item","",3,"disabled","click"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],[1,"like-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"]],template:function(t,e){if(1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"div",1),f.NdJ("click",function(){return e.params.do(e.actions.Edit,e.item)}),f.TgZ(2,"mat-icon"),f._uU(3,"edit"),f.qZA(),f.qZA(),f.YNc(4,lt,3,2,"div",2),f.YNc(5,ut,3,2,"div",3),f.YNc(6,dt,3,2,"div",4),f.YNc(7,gt,3,2,"div",3),f.TgZ(8,"div",5),f.TgZ(9,"mat-icon"),f._uU(10,"more_horiz"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(11,"mat-menu",6,7),f.TgZ(13,"button",8),f.NdJ("click",function(){return e.params.do(e.actions.Rest,e.item)}),f._UZ(14,"mat-icon",9),f.TgZ(15,"span"),f._uU(16,"REST API"),f.qZA(),f.qZA(),f.TgZ(17,"button",8),f.NdJ("click",function(){return e.params.do(e.actions.Clone,e.item)}),f.TgZ(18,"mat-icon"),f._uU(19,"file_copy"),f.qZA(),f.TgZ(20,"span"),f._uU(21,"Copy"),f.qZA(),f.qZA(),f.TgZ(22,"button",8),f.NdJ("click",function(){return e.params.do(e.actions.Export,e.item)}),f.TgZ(23,"mat-icon"),f._uU(24,"cloud_download"),f.qZA(),f.TgZ(25,"span"),f._uU(26,"Export"),f.qZA(),f.qZA(),f.TgZ(27,"button",10),f.NdJ("click",function(){return e.params.do(e.actions.Delete,e.item)}),f.TgZ(28,"mat-icon"),f._uU(29,"delete"),f.qZA(),f.TgZ(30,"span"),f._uU(31,"Delete"),f.qZA(),f.qZA(),f.qZA()),2&t){var n=f.MAs(12);f.xp6(4),f.Q6J("ngIf",!e.item._EditInfo.ReadOnly),f.xp6(1),f.Q6J("ngIf",e.item._EditInfo.ReadOnly),f.xp6(1),f.Q6J("ngIf",!e.item._EditInfo.ReadOnly&&e.enablePermissions),f.xp6(1),f.Q6J("ngIf",e.item._EditInfo.ReadOnly||!e.enablePermissions),f.xp6(1),f.Q6J("matMenuTriggerFor",n),f.xp6(19),f.Q6J("disabled",e.item._EditInfo.ReadOnly)}},directives:[F.wG,A.$,v.Hw,y.O5,M.p6,M.VK,M.OP,B.k],encapsulation:2}),e}(function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.item=this.params.data},t.prototype.refresh=function(t){return!0},t}()),ft=n(2394),ht=n(4903),Zt=function(){function t(t,e,n,o,s,p){var c=this;this.router=t,this.route=e,this.pipelinesService=n,this.contentExportService=o,this.snackBar=s,this.dialogService=p,this.queries$=new a.X(null),this.modules=S.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},P.f),{frameworkComponents:{idFieldComponent:E.m,queriesActionsComponent:mt},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(t){return(t.data._EditInfo.ReadOnly?"disabled":"")+" id-action no-padding no-outline"},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.Guid}}},{headerName:"Name",field:"Name",flex:2,minWidth:250,sortable:!0,cellClass:function(t){return t.data._EditInfo.ReadOnly?"no-outline":"primary-action highlight"},sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(t){return c.openVisualQueryDesigner(t.data)}},{headerName:"Description",field:"Description",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:162,cellClass:"secondary-action no-padding",pinned:"right",cellRenderer:"queriesActionsComponent",cellRendererParams:{getEnablePermissions:this.enablePermissionsGetter.bind(this),do:this.doMenuAction.bind(this)}}]}),this.subscription=new r.w}return t.prototype.ngOnInit=function(){this.fetchQueries(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.queries$.complete(),this.subscription.unsubscribe()},t.prototype.fetchQueries=function(){var t=this;this.pipelinesService.getAll(d.Z.contentTypes.query).subscribe(function(e){t.queries$.next(e)})},t.prototype.importQuery=function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})},t.prototype.doMenuAction=function(t,e){switch(t){case ct.Edit:return this.editQuery(e);case ct.Metadata:return this.openMetadata(e);case ct.Rest:return this.router.navigate([U.i.getUrlQuery(e.Guid)],{relativeTo:this.route.firstChild});case ct.Clone:return this.cloneQuery(e);case ct.Permissions:return this.openPermissions(e);case ct.Export:return this.exportQuery(e);case ct.Delete:return this.deleteQuery(e)}},t.prototype.editQuery=function(t){var e=(0,Q.f)({items:[null==t?{ContentTypeName:d.Z.contentTypes.query,Prefill:{TestParameters:d.Z.pipelineDesigner.testParameters}}:{EntityId:t.Id}]});this.router.navigate(["edit/"+e],{relativeTo:this.route.firstChild})},t.prototype.enablePermissionsGetter=function(){return this.enablePermissions},t.prototype.openVisualQueryDesigner=function(t){t._EditInfo.ReadOnly||this.dialogService.openQueryDesigner(t.Id)},t.prototype.openMetadata=function(t){var e=J.U.getUrlEntity(t.Guid,"Metadata for Query: "+t.Name+" ("+t.Id+")");this.router.navigate([e],{relativeTo:this.route.firstChild})},t.prototype.cloneQuery=function(t){var e=this;this.snackBar.open("Copying..."),this.pipelinesService.clonePipeline(t.Id).subscribe(function(){e.snackBar.open("Copied",null,{duration:2e3}),e.fetchQueries()})},t.prototype.openPermissions=function(t){this.router.navigate([N.i.getUrlEntity(t.Guid)],{relativeTo:this.route.firstChild})},t.prototype.exportQuery=function(t){this.contentExportService.exportEntity(t.Id,"Query",!0)},t.prototype.deleteQuery=function(t){var e=this;confirm("Delete Pipeline '"+t.Name+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.pipelinesService.delete(t.Id).subscribe(function(t){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchQueries()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,l.O)(!!this.route.snapshot.firstChild.firstChild),(0,c.U)(function(){return!!t.route.snapshot.firstChild.firstChild}),(0,u.G)(),(0,p.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchQueries()}))},t.\u0275fac=function(e){return new(e||t)(f.Y36(o.F0),f.Y36(o.gz),f.Y36(ft.vG),f.Y36(tt.i),f.Y36($.ux),f.Y36(ht.x))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-queries"]],inputs:{enablePermissions:"enablePermissions"},decls:12,vars:6,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Import query",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Create a new query",1,"grid-fab",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"ag-grid-angular",1),f.NdJ("filesDropped",function(t){return e.importQuery(t)}),f.ALo(2,"async"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"button",3),f.NdJ("click",function(){return e.importQuery()}),f.TgZ(5,"mat-icon"),f._uU(6,"cloud_upload"),f.qZA(),f.TgZ(7,"span"),f._uU(8,"Query"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"button",4),f.NdJ("click",function(){return e.editQuery(null)}),f.TgZ(10,"mat-icon"),f._uU(11,"add"),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("rowData",f.lcZ(2,4,e.queries$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","json"))},directives:[et.N8,nt.z,b.lW,A.$,v.Hw],pipes:[y.Ov],styles:[""]}),t}(),yt=n(7867);function Tt(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",10),f.NdJ("click",function(){return f.CHM(n),f.oxw().openCode()}),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA(),f.qZA()}}function bt(t,e){1&t&&(f.TgZ(0,"div",11),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA(),f.qZA())}function At(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",12),f.NdJ("click",function(){return f.CHM(n),f.oxw().openMetadata()}),f.TgZ(1,"mat-icon",13),f._uU(2," local_offer "),f.qZA(),f.qZA()}if(2&t){var i=f.oxw();f.xp6(1),f.Q6J("matBadge",i.view.Metadata.length)("matBadgeHidden",!i.view.Metadata.length)}}function vt(t,e){if(1&t&&(f.TgZ(0,"div",11),f.TgZ(1,"mat-icon",14),f._uU(2," local_offer "),f.qZA(),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("matBadge",n.view.Metadata.length)("matBadgeHidden",!n.view.Metadata.length)}}function Ct(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",15),f.NdJ("click",function(){return f.CHM(n),f.oxw().openPermissions()}),f.TgZ(1,"mat-icon",13),f._uU(2," person "),f.qZA(),f.qZA()}if(2&t){var i=f.oxw();f.xp6(1),f.Q6J("matBadge",i.view.Permissions.Count)("matBadgeHidden",!i.view.Permissions.Count)}}function xt(t,e){if(1&t&&(f.TgZ(0,"div",11),f.TgZ(1,"mat-icon",14),f._uU(2," person "),f.qZA(),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("matBadge",n.view.Permissions.Count)("matBadgeHidden",!n.view.Permissions.Count)}}var qt=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.view=this.params.data,this.enableCode=this.params.enableCodeGetter(),this.enablePermissions=this.params.enablePermissionsGetter()},t.prototype.refresh=function(t){return!0},t.prototype.openCode=function(){this.params.onOpenCode(this.view)},t.prototype.openPermissions=function(){this.params.onOpenPermissions(this.view)},t.prototype.openMetadata=function(){this.params.onOpenMetadata(this.view)},t.prototype.cloneView=function(){this.params.onClone(this.view)},t.prototype.exportView=function(){this.params.onExport(this.view)},t.prototype.deleteView=function(){this.params.onDelete(this.view)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-views-actions"]],decls:27,vars:8,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["matRipple","","tippy","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"]],template:function(t,e){if(1&t&&(f.TgZ(0,"div",0),f.YNc(1,Tt,3,0,"div",1),f.YNc(2,bt,3,0,"div",2),f.YNc(3,At,3,2,"div",3),f.YNc(4,vt,3,2,"div",2),f.YNc(5,Ct,3,2,"div",4),f.YNc(6,xt,3,2,"div",2),f.TgZ(7,"div",5),f.TgZ(8,"mat-icon"),f._uU(9,"more_horiz"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(10,"mat-menu",6,7),f.TgZ(12,"button",8),f.NdJ("click",function(){return e.cloneView()}),f.TgZ(13,"mat-icon"),f._uU(14,"file_copy"),f.qZA(),f.TgZ(15,"span"),f._uU(16,"Copy"),f.qZA(),f.qZA(),f.TgZ(17,"button",8),f.NdJ("click",function(){return e.exportView()}),f.TgZ(18,"mat-icon"),f._uU(19,"cloud_download"),f.qZA(),f.TgZ(20,"span"),f._uU(21,"Export"),f.qZA(),f.qZA(),f.TgZ(22,"button",9),f.NdJ("click",function(){return e.deleteView()}),f.TgZ(23,"mat-icon"),f._uU(24,"delete"),f.qZA(),f.TgZ(25,"span"),f._uU(26,"Delete"),f.qZA(),f.qZA(),f.qZA()),2&t){var n=f.MAs(11);f.xp6(1),f.Q6J("ngIf",!e.view.EditInfo.ReadOnly&&e.enableCode),f.xp6(1),f.Q6J("ngIf",e.view.EditInfo.ReadOnly||!e.enableCode),f.xp6(1),f.Q6J("ngIf",!e.view.EditInfo.ReadOnly),f.xp6(1),f.Q6J("ngIf",e.view.EditInfo.ReadOnly),f.xp6(1),f.Q6J("ngIf",!e.view.EditInfo.ReadOnly&&e.enablePermissions),f.xp6(1),f.Q6J("ngIf",e.view.EditInfo.ReadOnly||!e.enablePermissions),f.xp6(1),f.Q6J("matMenuTriggerFor",n),f.xp6(15),f.Q6J("disabled",e.view.EditInfo.ReadOnly)}},directives:[y.O5,F.wG,A.$,M.p6,v.Hw,M.VK,M.OP,B.k],styles:[""]}),t}();function St(t,e){1&t&&(f.TgZ(0,"mat-icon"),f._uU(1,"visibility"),f.qZA())}function wt(t,e){1&t&&(f.TgZ(0,"mat-icon"),f._uU(1,"visibility_off"),f.qZA())}var kt=function(){function t(){}return t.prototype.agInit=function(t){this.value=t.value},t.prototype.refresh=function(t){return!0},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-views-show"]],decls:3,vars:2,consts:[[1,"icon-container"],[4,"ngIf"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.YNc(1,St,2,0,"mat-icon",1),f.YNc(2,wt,2,0,"mat-icon",1),f.qZA()),2&t&&(f.xp6(1),f.Q6J("ngIf",e.value),f.xp6(1),f.Q6J("ngIf",!e.value))},directives:[y.O5,v.Hw],styles:[""]}),t}();function It(t){var e="",n="";return t.HasQuery?(e="Data (from query)",n="filter_list"):t.List?(e="Items (list)",n="format_list_numbered"):t.ContentType||t.HasQuery?t.List||(e="Item (one)",n="looks_one"):(e="Code",n="check_box_outline_blank"),{value:e,icon:n}}var Ut=function(){function t(){}return t.prototype.agInit=function(t){this.value=t.value;var e=It(t.data);this.icon=e.icon},t.prototype.refresh=function(t){return!0},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-views-type"]],decls:3,vars:2,consts:[[1,"icon-container",3,"tippy"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"mat-icon"),f._uU(2),f.qZA(),f.qZA()),2&t&&(f.Q6J("tippy",e.value),f.xp6(2),f.Oqu(e.icon))},directives:[A.$,v.Hw],styles:[""]}),t}(),Jt=n(1916),Nt=function(){function t(t,e,n,o,s){var p=this;this.viewsService=t,this.router=e,this.route=n,this.snackBar=o,this.dialogService=s,this.views$=new a.X(null),this.polymorphStatus$=new a.X(""),this.polymorphLogo="data:image/png;base64,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",this.modules=S.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},P.f),{frameworkComponents:{idFieldComponent:E.m,booleanFilterComponent:yt.U,viewsTypeComponent:Ut,viewsShowComponent:kt,viewsActionsComponent:qt},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(t){return(t.data.EditInfo.ReadOnly?"disabled":"")+" id-action no-padding no-outline"},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(t){return"ID: "+t.Id+"\nGUID: "+t.Guid}}},{headerName:"Show",field:"IsHidden",width:70,headerClass:"dense",cellClass:"no-outline",cellRenderer:"viewsShowComponent",sortable:!0,filter:"booleanFilterComponent",valueGetter:this.showValueGetter},{headerName:"Name",field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editView.bind(this)},{headerName:"Type",field:"Type",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"viewsTypeComponent",valueGetter:this.typeValueGetter},{headerName:"Used",field:"Used",width:70,headerClass:"dense",cellClass:"primary-action highlight",sortable:!0,filter:"agNumberColumnFilter",onCellClicked:function(t){p.openUsage(t)}},{headerName:"Url Key",field:"ViewNameInUrl",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Path",field:"TemplatePath",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Content",field:"ContentType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ContentType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.contentDemoValueGetter},{headerName:"Presentation",field:"PresentationType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"PresentationType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.presentationDemoValueGetter},{headerName:"Header",field:"ListContentType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ListContentType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.headerDemoValueGetter},{headerName:"Header Presentation",field:"ListPresentationType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ListPresentationType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.headerPresDemoValueGetter},{width:162,cellClass:"secondary-action no-padding",cellRenderer:"viewsActionsComponent",pinned:"right",cellRendererParams:{enableCodeGetter:this.enableCodeGetter.bind(this),enablePermissionsGetter:this.enablePermissionsGetter.bind(this),onOpenCode:this.openCode.bind(this),onOpenPermissions:this.openPermissions.bind(this),onOpenMetadata:this.openMetadata.bind(this),onClone:this.cloneView.bind(this),onExport:this.exportView.bind(this),onDelete:this.deleteView.bind(this)}}]}),this.subscription=new r.w}return t.prototype.ngOnInit=function(){this.fetchTemplates(),this.fetchPolymorphism(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.views$.complete(),this.polymorphStatus$.complete(),this.subscription.unsubscribe()},t.prototype.importView=function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})},t.prototype.fetchTemplates=function(){var t=this;this.viewsService.getAll().subscribe(function(e){t.views$.next(e)})},t.prototype.fetchPolymorphism=function(){var t=this;this.viewsService.getPolymorphism().subscribe(function(e){t.polymorphism=e,t.polymorphStatus$.next(null===e.Id?"not configured":null===e.Resolver?"disabled":"using "+e.Resolver)})},t.prototype.editView=function(t){var e=null==t?void 0:t.data,n={items:[null==e?{ContentTypeName:d.Z.contentTypes.template,Prefill:(0,i.pi)({},this.appIsGlobal&&{Location:"Global"})}:{EntityId:e.Id}]},o=(0,Q.f)(n);this.router.navigate(["edit/"+o],{relativeTo:this.route.firstChild})},t.prototype.editPolymorphisms=function(){if(this.polymorphism){var t=(0,Q.f)({items:[this.polymorphism.Id?{EntityId:this.polymorphism.Id}:{ContentTypeName:this.polymorphism.TypeName}]});this.router.navigate(["edit/"+t],{relativeTo:this.route.firstChild})}},t.prototype.showValueGetter=function(t){return!t.data.IsHidden},t.prototype.typeValueGetter=function(t){return It(t.data).value},t.prototype.enableCodeGetter=function(){return this.enableCode},t.prototype.enablePermissionsGetter=function(){return this.enablePermissions},t.prototype.contentDemoValueGetter=function(t){var e=t.data;return e.ContentType.DemoId+" "+e.ContentType.DemoTitle},t.prototype.presentationDemoValueGetter=function(t){var e=t.data;return e.PresentationType.DemoId+" "+e.PresentationType.DemoTitle},t.prototype.headerDemoValueGetter=function(t){var e=t.data;return e.ListContentType.DemoId+" "+e.ListContentType.DemoTitle},t.prototype.headerPresDemoValueGetter=function(t){var e=t.data;return e.ListPresentationType.DemoId+" "+e.ListPresentationType.DemoTitle},t.prototype.openUsage=function(t){this.router.navigate(["usage/"+t.data.Guid],{relativeTo:this.route.firstChild})},t.prototype.openCode=function(t){this.dialogService.openCodeFile(t.TemplatePath,t.Id,t.IsShared)},t.prototype.openPermissions=function(t){this.router.navigate([N.i.getUrlEntity(t.Guid)],{relativeTo:this.route.firstChild})},t.prototype.openMetadata=function(t){var e=J.U.getUrlEntity(t.Guid,"Metadata for View: "+t.Name+" ("+t.Id+")");this.router.navigate([e],{relativeTo:this.route.firstChild})},t.prototype.cloneView=function(t){var e=(0,Q.f)({items:[{ContentTypeName:d.Z.contentTypes.template,DuplicateEntity:t.Id}]});this.router.navigate(["edit/"+e],{relativeTo:this.route.firstChild})},t.prototype.exportView=function(t){this.viewsService.export(t.Id)},t.prototype.deleteView=function(t){var e=this;confirm("Delete '"+t.Name+"' ("+t.Id+")?")&&(this.snackBar.open("Deleting..."),this.viewsService.delete(t.Id).subscribe(function(t){e.snackBar.open("Deleted",null,{duration:2e3}),e.fetchTemplates()}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,l.O)(!!this.route.snapshot.firstChild.firstChild),(0,c.U)(function(){return!!t.route.snapshot.firstChild.firstChild}),(0,u.G)(),(0,p.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchTemplates(),t.fetchPolymorphism()}))},t.\u0275fac=function(e){return new(e||t)(f.Y36(Jt.h),f.Y36(o.F0),f.Y36(o.gz),f.Y36($.ux),f.Y36(ht.x))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-views"]],inputs:{enableCode:"enableCode",enablePermissions:"enablePermissions",appIsGlobal:"appIsGlobal",appIsInherited:"appIsInherited"},decls:17,vars:11,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Configure polymorphism",1,"polymorph-button",3,"disabled","click"],[1,"polymorph-logo",3,"src"],["mat-button","","tippy","Import view",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Create a new view",1,"grid-fab",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f.TgZ(1,"ag-grid-angular",1),f.NdJ("filesDropped",function(t){return e.importView(t)}),f.ALo(2,"async"),f.qZA(),f.TgZ(3,"div",2),f.TgZ(4,"button",3),f.NdJ("click",function(){return e.editPolymorphisms()}),f._UZ(5,"img",4),f.TgZ(6,"span"),f._uU(7),f.ALo(8,"async"),f.qZA(),f.qZA(),f.TgZ(9,"button",5),f.NdJ("click",function(){return e.importView()}),f.TgZ(10,"mat-icon"),f._uU(11,"cloud_upload"),f.qZA(),f.TgZ(12,"span"),f._uU(13,"View"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(14,"button",6),f.NdJ("click",function(){return e.editView(null)}),f.TgZ(15,"mat-icon"),f._uU(16,"add"),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("rowData",f.lcZ(2,7,e.views$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","json"),f.xp6(3),f.Q6J("disabled",e.appIsInherited),f.xp6(1),f.Q6J("src",e.polymorphLogo,f.LSH),f.xp6(2),f.hij("Polymorphism ",f.lcZ(8,9,e.polymorphStatus$),""))},directives:[et.N8,nt.z,b.lW,A.$,v.Hw],pipes:[y.Ov],styles:[".polymorph-logo[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:4px}.polymorph-button[disabled][_ngcontent-%COMP%]   .polymorph-logo[_ngcontent-%COMP%]{opacity:33%;filter:grayscale(1)}"]}),t}(),Et=n(7237);function Pt(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",8),f.NdJ("click",function(){return f.CHM(n),f.oxw().openCode()}),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA(),f.qZA()}}function Rt(t,e){1&t&&(f.TgZ(0,"div",9),f.TgZ(1,"mat-icon"),f._uU(2,"code"),f.qZA(),f.qZA())}var _t=function(){function t(){}return t.prototype.agInit=function(t){this.params=t,this.enableCode=this.params.enableCodeGetter()},t.prototype.refresh=function(t){return!0},t.prototype.openCode=function(){this.params.onOpenCode(this.params.data)},t.prototype.openRestApi=function(){this.params.onOpenRestApi(this.params.data)},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-web-api-actions"]],decls:12,vars:3,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["matRipple","","tippy","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"]],template:function(t,e){if(1&t&&(f.TgZ(0,"div",0),f.YNc(1,Pt,3,0,"div",1),f.YNc(2,Rt,3,0,"div",2),f.TgZ(3,"div",3),f.TgZ(4,"mat-icon"),f._uU(5,"more_horiz"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(6,"mat-menu",4,5),f.TgZ(8,"button",6),f.NdJ("click",function(){return e.openRestApi()}),f._UZ(9,"mat-icon",7),f.TgZ(10,"span"),f._uU(11,"REST API"),f.qZA(),f.qZA(),f.qZA()),2&t){var n=f.MAs(7);f.xp6(1),f.Q6J("ngIf",e.enableCode),f.xp6(1),f.Q6J("ngIf",!e.enableCode),f.xp6(1),f.Q6J("matMenuTriggerFor",n)}},directives:[y.O5,F.wG,A.$,M.p6,v.Hw,M.VK,M.OP],styles:[""]}),t}(),Qt=n(7915),Ot=function(){function t(t,e,n,o,s,r,p){this.webApisService=t,this.snackBar=e,this.dialogService=n,this.router=o,this.route=s,this.dialog=r,this.viewContainerRef=p,this.webApis$=new a.X(null),this.modules=S.F$,this.gridOptions=(0,i.pi)((0,i.pi)({},P.f),{frameworkComponents:{webApiActions:_t},columnDefs:[{headerName:"Folder",field:"folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter"},{headerName:"Name",field:"name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:82,cellClass:"secondary-action no-padding",cellRenderer:"webApiActions",pinned:"right",cellRendererParams:{enableCodeGetter:this.enableCodeGetter.bind(this),onOpenCode:this.openCode.bind(this),onOpenRestApi:this.openRestApi.bind(this)}}]})}return t.prototype.ngOnInit=function(){this.fetchWebApis()},t.prototype.ngOnDestroy=function(){this.webApis$.complete()},t.prototype.createController=function(){var t=this;this.dialog.open(Et.U,{autoFocus:!1,data:{folder:"api",purpose:"Api"},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(e){if(e){if(e.name.endsWith("Controller.cs")){var n=e.name.substring(e.name.lastIndexOf("/")+1);if(!/^[A-Z][a-zA-Z0-9]*Controller\.cs$/g.test(n))return void t.snackBar.open('"'+n+'" is invalid controller name. Should be something like "MyController.cs"',null,{duration:5e3})}t.snackBar.open("Saving..."),t.webApisService.create(e.name,e.templateKey).subscribe(function(){t.snackBar.open("Saved",null,{duration:2e3}),t.fetchWebApis()})}})},t.prototype.fetchWebApis=function(){var t=this;this.webApisService.getAll().subscribe(function(e){t.webApis$.next(e)})},t.prototype.enableCodeGetter=function(){return this.enableCode},t.prototype.openCode=function(t){this.dialogService.openCodeFile(t.path)},t.prototype.openRestApi=function(t){this.router.navigate([U.i.getUrlWebApi(t)],{relativeTo:this.route.firstChild})},t.\u0275fac=function(e){return new(e||t)(f.Y36(Qt.n),f.Y36($.ux),f.Y36(ht.x),f.Y36(o.F0),f.Y36(o.gz),f.Y36(h.uw),f.Y36(f.s_b))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-web-api"]],inputs:{enableCode:"enableCode"},decls:7,vars:5,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new controller",1,"grid-fab",3,"click"]],template:function(t,e){1&t&&(f.TgZ(0,"div",0),f._UZ(1,"ag-grid-angular",1),f.ALo(2,"async"),f._UZ(3,"div",2),f.TgZ(4,"button",3),f.NdJ("click",function(){return e.createController()}),f.TgZ(5,"mat-icon"),f._uU(6,"add"),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.xp6(1),f.Q6J("rowData",f.lcZ(2,3,e.webApis$))("modules",e.modules)("gridOptions",e.gridOptions))},directives:[et.N8,b.lW,A.$,v.Hw],pipes:[y.Ov],styles:[""]}),t}(),Ft=n(3148),Mt=n(878),Bt={Settings:"Settings",Resources:"Resources"},Dt=n(5223),Gt=n(3582),Vt=n(271),Yt=n(3475),Wt=n(7093),Ht=n(4380),Lt=n(5151),zt=n(2797);function Kt(t,e){1&t&&(f.ynx(0),f._uU(1," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. "),f.BQk())}function Xt(t,e){1&t&&(f.ynx(0),f._uU(1," This is the Primary App of this Site. You can also configure sitewide settings and resources here. "),f.BQk())}function jt(t,e){if(1&t&&(f.TgZ(0,"div",16),f.YNc(1,Kt,2,0,"ng-container",6),f.YNc(2,Xt,2,0,"ng-container",6),f._uU(3," See "),f.TgZ(4,"a",4),f._uU(5,"docs"),f.qZA(),f._uU(6,".\n"),f.qZA()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("ngIf",n.isGlobal),f.xp6(1),f.Q6J("ngIf",n.isPrimary)}}function $t(t,e){if(1&t){var n=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._uU(3,"Global"),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"button",17),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.systemSettings,t.SystemSettingsScopes.App)}),f.TgZ(6,"mat-icon",13),f._uU(7," edit "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"td"),f.TgZ(9,"button",18),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customSettings,"edit")}),f.TgZ(10,"mat-icon",13),f._uU(11," edit "),f.qZA(),f.qZA(),f.TgZ(12,"button",19),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customSettings,"config")}),f.TgZ(13,"mat-icon",13),f._uU(14," dns "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.BQk()}if(2&t){var i=f.oxw();f.xp6(6),f.Q6J("matBadge",i.systemSettingsCount||null),f.xp6(4),f.Q6J("matBadge",i.customSettingsCount||null),f.xp6(3),f.Q6J("matBadge",i.customSettingsFieldsCount||null)}}function te(t,e){1&t&&f.GkF(0)}function ee(t,e){if(1&t){var n=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._uU(3,"Site"),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"button",20),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.systemSettings,t.SystemSettingsScopes.Site)}),f.TgZ(6,"mat-icon",13),f._uU(7," edit "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"td"),f.TgZ(9,"button",21),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customSettings,"edit")}),f.TgZ(10,"mat-icon",13),f._uU(11," edit "),f.qZA(),f.qZA(),f.TgZ(12,"button",22),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customSettings,"config")}),f.TgZ(13,"mat-icon",13),f._uU(14," dns "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(15,te,1,0,"ng-container",23),f.BQk()}if(2&t){var i=f.oxw(),o=f.MAs(65);f.xp6(6),f.Q6J("matBadge",i.systemSettingsCount||null),f.xp6(4),f.Q6J("matBadge",i.customSettingsCount||null),f.xp6(3),f.Q6J("matBadge",i.customSettingsFieldsCount||null),f.xp6(2),f.Q6J("ngTemplateOutlet",o)}}function ne(t,e){1&t&&f.GkF(0)}function ie(t,e){1&t&&f.GkF(0)}function oe(t,e){if(1&t){var n=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._uU(3),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"button",24),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.systemSettings,t.SystemSettingsScopes.App)}),f.TgZ(6,"mat-icon",13),f._uU(7," edit "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"td"),f.TgZ(9,"button",25),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.settings)}),f.TgZ(10,"mat-icon",13),f._uU(11," edit "),f.qZA(),f.qZA(),f.TgZ(12,"button",26),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.config(t.eavConstants.contentTypes.settings)}),f.TgZ(13,"mat-icon",13),f._uU(14," dns "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(15,ne,1,0,"ng-container",23),f.YNc(16,ie,1,0,"ng-container",23),f.BQk()}if(2&t){var i=f.oxw(),o=f.MAs(67),a=f.MAs(65);f.xp6(3),f.Oqu(i.dialogSettings.Context.App.Name),f.xp6(3),f.Q6J("matBadge",i.systemSettingsCount||null),f.xp6(4),f.Q6J("matBadge",i.customSettingsCount||null),f.xp6(3),f.Q6J("matBadge",i.customSettingsFieldsCount||null),f.xp6(2),f.Q6J("ngTemplateOutlet",o),f.xp6(1),f.Q6J("ngTemplateOutlet",a)}}function ae(t,e){if(1&t){var n=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._uU(3,"Global"),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"button",27),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.systemResources,t.SystemSettingsScopes.App)}),f.TgZ(6,"mat-icon",13),f._uU(7," edit "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"td"),f.TgZ(9,"button",28),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customResources,"edit")}),f.TgZ(10,"mat-icon",13),f._uU(11," edit "),f.qZA(),f.qZA(),f.TgZ(12,"button",29),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customResources,"config")}),f.TgZ(13,"mat-icon",13),f._uU(14," dns "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.BQk()}if(2&t){var i=f.oxw();f.xp6(6),f.Q6J("matBadge",i.systemResourcesCount||null),f.xp6(4),f.Q6J("matBadge",i.customResourcesCount||null),f.xp6(3),f.Q6J("matBadge",i.customResourcesFieldsCount||null)}}function se(t,e){1&t&&f.GkF(0)}function re(t,e){if(1&t){var n=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._uU(3,"Site"),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"button",30),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.systemResources,t.SystemSettingsScopes.Site)}),f.TgZ(6,"mat-icon",13),f._uU(7," edit "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"td"),f.TgZ(9,"button",31),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customResources,"edit")}),f.TgZ(10,"mat-icon",13),f._uU(11," edit "),f.qZA(),f.qZA(),f.TgZ(12,"button",32),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.fixContentType(t.eavConstants.contentTypes.customResources,"config")}),f.TgZ(13,"mat-icon",13),f._uU(14," dns "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(15,se,1,0,"ng-container",23),f.BQk()}if(2&t){var i=f.oxw(),o=f.MAs(65);f.xp6(6),f.Q6J("matBadge",i.systemResourcesCount||null),f.xp6(4),f.Q6J("matBadge",i.customResourcesCount||null),f.xp6(3),f.Q6J("matBadge",i.customResourcesFieldsCount||null),f.xp6(2),f.Q6J("ngTemplateOutlet",o)}}function pe(t,e){1&t&&f.GkF(0)}function ce(t,e){1&t&&f.GkF(0)}function le(t,e){if(1&t){var n=f.EpF();f.ynx(0),f.TgZ(1,"tr"),f.TgZ(2,"th"),f._uU(3),f.qZA(),f.TgZ(4,"td"),f.TgZ(5,"button",33),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.systemResources,t.SystemSettingsScopes.App)}),f.TgZ(6,"mat-icon",13),f._uU(7," edit "),f.qZA(),f.qZA(),f.qZA(),f.TgZ(8,"td"),f.TgZ(9,"button",34),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.edit(t.eavConstants.contentTypes.resources)}),f.TgZ(10,"mat-icon",13),f._uU(11," edit "),f.qZA(),f.qZA(),f.TgZ(12,"button",35),f.NdJ("click",function(){f.CHM(n);var t=f.oxw();return t.config(t.eavConstants.contentTypes.resources)}),f.TgZ(13,"mat-icon",13),f._uU(14," dns "),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(15,pe,1,0,"ng-container",23),f.YNc(16,ce,1,0,"ng-container",23),f.BQk()}if(2&t){var i=f.oxw(),o=f.MAs(67),a=f.MAs(65);f.xp6(3),f.Oqu(i.dialogSettings.Context.App.Name),f.xp6(3),f.Q6J("matBadge",i.systemResourcesCount||null),f.xp6(4),f.Q6J("matBadge",i.customResourcesCount||null),f.xp6(3),f.Q6J("matBadge",i.customResourcesFieldsCount||null),f.xp6(2),f.Q6J("ngTemplateOutlet",o),f.xp6(1),f.Q6J("ngTemplateOutlet",a)}}function ue(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th"),f._uU(2,"Global"),f.qZA(),f.TgZ(3,"td"),f.TgZ(4,"button",36),f.NdJ("click",function(){return f.CHM(n),f.oxw().openGlobalSettings()}),f.TgZ(5,"mat-icon"),f._uU(6,"open_in_new"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}}function de(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"tr"),f.TgZ(1,"th"),f._uU(2,"Site"),f.qZA(),f.TgZ(3,"td"),f.TgZ(4,"button",37),f.NdJ("click",function(){return f.CHM(n),f.oxw().openSiteSettings()}),f.TgZ(5,"mat-icon"),f._uU(6,"open_in_new"),f.qZA(),f.qZA(),f.qZA(),f.qZA()}}function ge(t,e){1&t&&(f.ynx(0),f._uU(1," (not available on Global App) "),f.BQk())}function me(t,e){1&t&&(f.ynx(0),f._uU(1," (not available on Content App) "),f.BQk())}function fe(t,e){if(1&t&&(f.ynx(0),f.YNc(1,ge,2,0,"ng-container",6),f.YNc(2,me,2,0,"ng-container",6),f.BQk()),2&t){var n=f.oxw();f.xp6(1),f.Q6J("ngIf",n.isGlobal),f.xp6(1),f.Q6J("ngIf",n.isApp)}}function he(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"button",12),f.NdJ("click",function(){return f.CHM(n),f.oxw().openLanguagePermissions()}),f.TgZ(1,"mat-icon"),f._uU(2,"person"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Language Permissions"),f.qZA(),f.qZA()}}var Ze=function(){function t(t,e,n,i,o,a,s,r,p,c,l,u,g){this.contentItemsService=t,this.router=e,this.route=n,this.context=i,this.exportAppService=o,this.importAppPartsService=a,this.snackBar=s,this.dialogService=r,this.changeDetectorRef=p,this.contentTypesFieldsService=c,this.metadataService=l,this.contentTypesService=u,this.globalConfigService=g,this.eavConstants=d.Z,this.AnalyzeParts=Bt,this.SystemSettingsScopes=d.x,this.AppScopes=m,this.debugEnabled$=this.globalConfigService.getDebugEnabled$()}return t.prototype.ngOnInit=function(){this.subscription=new r.w,this.fetchSettings(),this.refreshOnChildClosed()},t.prototype.ngOnChanges=function(t){null!=t.dialogSettings&&(this.isGlobal=this.dialogSettings.Context.App.SettingsScope===m.Global,this.isPrimary=this.dialogSettings.Context.App.SettingsScope===m.Site,this.isApp=this.dialogSettings.Context.App.SettingsScope===m.App)},t.prototype.ngOnDestroy=function(){this.snackBar.dismiss(),this.subscription.unsubscribe()},t.prototype.edit=function(t,e){var n=this;this.contentItemsService.getAll(t).subscribe(function(o){var a;switch(t){case d.Z.contentTypes.systemSettings:case d.Z.contentTypes.systemResources:var s=o.filter(function(t){return e===d.x.App?!t.SettingsEntityScope:t.SettingsEntityScope===d.x.Site});if(s.length>1)throw new Error("Found too many settings for type "+t);var r=s[0];a={items:[null==r?{ContentTypeName:t,Prefill:(0,i.pi)({},e===d.x.Site&&{SettingsEntityScope:d.x.Site})}:{EntityId:r.Id}]};break;case d.Z.contentTypes.customSettings:case d.Z.contentTypes.customResources:if(o.length>1)throw new Error("Found too many settings for type "+t);var p=o[0];a={items:[null==p?{ContentTypeName:t}:{EntityId:p.Id}]};break;default:if(o.length<1)throw new Error("Found no settings for type "+t);if(o.length>1)throw new Error("Found too many settings for type "+t);a={items:[{EntityId:o[0].Id}]}}var c=(0,Q.f)(a);n.router.navigate(["edit/"+c],{relativeTo:n.route.firstChild})})},t.prototype.openMetadata=function(){var t=J.U.getUrlApp(this.context.appId,"Metadata for App: "+this.dialogSettings.Context.App.Name+" ("+this.context.appId+")");this.router.navigate([t],{relativeTo:this.route.firstChild})},t.prototype.openSiteSettings=function(){var t=this.dialogSettings.Context.Site.PrimaryApp;this.dialogService.openAppAdministration(t.ZoneId,t.AppId,"app")},t.prototype.openGlobalSettings=function(){var t=this.dialogSettings.Context.System.PrimaryApp;this.dialogService.openAppAdministration(t.ZoneId,t.AppId,"app")},t.prototype.config=function(t){this.router.navigate(["fields/"+t],{relativeTo:this.route.firstChild})},t.prototype.openPermissions=function(){this.router.navigate([N.i.getUrlApp(this.context.appId)],{relativeTo:this.route.firstChild})},t.prototype.openLanguagePermissions=function(){this.router.navigate(["language-permissions"],{relativeTo:this.route.firstChild})},t.prototype.exportApp=function(){this.router.navigate(["export"],{relativeTo:this.route.firstChild})},t.prototype.exportParts=function(){this.router.navigate(["export/parts"],{relativeTo:this.route.firstChild})},t.prototype.importParts=function(){this.router.navigate(["import/parts"],{relativeTo:this.route.firstChild})},t.prototype.exportAppXml=function(){var t=this;this.snackBar.open("Exporting..."),this.exportAppService.exportForVersionControl(!0,!1).subscribe({next:function(e){t.snackBar.open("Export done. Please check your '.data' folder",null,{duration:3e3})},error:function(e){t.snackBar.open("Export failed. Please check console for more information",null,{duration:3e3})}})},t.prototype.resetApp=function(){var t=this;confirm("Are you sure? All changes since last xml export will be lost")&&(this.snackBar.open("Resetting..."),this.importAppPartsService.resetApp().subscribe({next:function(e){t.snackBar.open("Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct",null,{duration:3e4})},error:function(e){t.snackBar.open("Reset failed. Please check console for more information",null,{duration:3e3})}}))},t.prototype.analyze=function(t){this.router.navigate(["analyze/"+t],{relativeTo:this.route.firstChild})},t.prototype.fetchSettings=function(){var t=this;this.contentTypesService.retrieveContentTypes(d.Z.scopes.configuration.value).subscribe(function(e){var n=e.some(function(t){return t.Name===d.Z.contentTypes.customSettings}),o=e.some(function(t){return t.Name===d.Z.contentTypes.customResources});(0,Ft.D)([(0,Ft.D)([t.contentItemsService.getAll(d.Z.contentTypes.systemSettings),t.isGlobal||t.isPrimary?n?t.contentItemsService.getAll(d.Z.contentTypes.customSettings):(0,Mt.of)(void 0):t.contentItemsService.getAll(d.Z.contentTypes.settings),t.isGlobal||t.isPrimary?n?t.contentTypesFieldsService.getFields(d.Z.contentTypes.customSettings):(0,Mt.of)(void 0):t.contentTypesFieldsService.getFields(d.Z.contentTypes.settings)]),(0,Ft.D)([t.contentItemsService.getAll(d.Z.contentTypes.systemResources),t.isGlobal||t.isPrimary?o?t.contentItemsService.getAll(d.Z.contentTypes.customResources):(0,Mt.of)(void 0):t.contentItemsService.getAll(d.Z.contentTypes.resources),t.isGlobal||t.isPrimary?o?t.contentTypesFieldsService.getFields(d.Z.contentTypes.customResources):(0,Mt.of)(void 0):t.contentTypesFieldsService.getFields(d.Z.contentTypes.resources)]),(0,Ft.D)([t.contentItemsService.getAll(d.Z.contentTypes.appConfiguration),t.metadataService.getMetadata(d.Z.metadata.app.type,d.Z.metadata.app.keyType,t.context.appId)])]).subscribe(function(e){var n=(0,i.CR)(e,3),o=(0,i.CR)(n[0],3),a=o[0],s=o[1],r=o[2],p=(0,i.CR)(n[1],3),c=p[0],l=p[1],u=p[2],g=(0,i.CR)(n[2],2),m=g[0],f=g[1];t.systemSettingsCount=t.isPrimary?a.filter(function(t){return t.SettingsEntityScope===d.x.Site}).length:a.filter(function(t){return!t.SettingsEntityScope}).length,t.customSettingsCount=null==s?void 0:s.length,t.customSettingsFieldsCount=null==r?void 0:r.length,t.systemResourcesCount=t.isPrimary?c.filter(function(t){return t.SettingsEntityScope===d.x.Site}).length:c.filter(function(t){return!t.SettingsEntityScope}).length,t.customResourcesCount=null==l?void 0:l.length,t.customResourcesFieldsCount=null==u?void 0:u.length,t.appConfigurationsCount=m.length,t.appMetadataCount=f.Items.length,t.changeDetectorRef.markForCheck()})})},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,l.O)(!!this.route.snapshot.firstChild.firstChild),(0,c.U)(function(){return!!t.route.snapshot.firstChild.firstChild}),(0,u.G)(),(0,p.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchSettings()}))},t.prototype.fixContentType=function(t,e){var n=this;this.contentTypesService.retrieveContentTypes(d.Z.scopes.configuration.value).subscribe(function(i){i.some(function(e){return e.Name===t})?"edit"===e?n.edit(t):"config"===e&&n.config(t):n.contentTypesService.save({StaticName:"",Name:t,Description:"",Scope:d.Z.scopes.configuration.value,ChangeStaticName:!1,NewStaticName:""}).subscribe(function(i){i&&("edit"===e?n.edit(t):"config"===e&&n.config(t))})})},t.\u0275fac=function(e){return new(e||t)(f.Y36(Dt.l),f.Y36(o.F0),f.Y36(o.gz),f.Y36(Gt._),f.Y36(Vt.v),f.Y36(Yt.z),f.Y36($.ux),f.Y36(ht.x),f.Y36(f.sBO),f.Y36(Wt.Mr),f.Y36(Ht.Do),f.Y36(Lt.sF),f.Y36(j.bE))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-app-configuration"]],inputs:{dialogSettings:"dialogSettings"},features:[f.TTD],decls:167,vars:15,consts:[["class","alert alert-info scope-info",4,"ngIf"],[1,"cards-box"],[1,"mat-elevation-z2"],[1,"mat-card-header-icon"],["href","http://r.2sxc.org/settings","target","_blank"],[1,"settings"],[4,"ngIf"],[1,"actions-row"],["mat-button","","tippy","See the result of combining all settings",3,"click"],["mat-button","","tippy","See the result of combining all resources",3,"click"],["goToGlobal",""],["goToSite",""],["mat-button","",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click",4,"ngIf"],[1,"alert","alert-info","scope-info"],["mat-button","","tippy","Edit global system settings",3,"click"],["mat-button","","tippy","Edit custom global settings",3,"click"],["mat-button","","tippy","Configure fields of the custom global settings",3,"click"],["mat-button","","tippy","Edit site system settings",3,"click"],["mat-button","","tippy","Edit custom site settings",3,"click"],["mat-button","","tippy","Configure fields of the custom site settings",3,"click"],[4,"ngTemplateOutlet"],["mat-button","","tippy","Edit app system settings",3,"click"],["mat-button","","tippy","Edit custom app settings",3,"click"],["mat-button","","tippy","Configure fields of the custom app settings",3,"click"],["mat-button","","tippy","Edit global system resources",3,"click"],["mat-button","","tippy","Edit custom global resources",3,"click"],["mat-button","","tippy","Configure fields of the custom global resources",3,"click"],["mat-button","","tippy","Edit site system resources",3,"click"],["mat-button","","tippy","Edit custom site resources",3,"click"],["mat-button","","tippy","Configure fields of the custom site resources",3,"click"],["mat-button","","tippy","Edit app system resources",3,"click"],["mat-button","","tippy","Edit custom app resources",3,"click"],["mat-button","","tippy","Configure fields of the custom app resources",3,"click"],["mat-button","","tippy","Go to global",3,"click"],["mat-button","","tippy","Go to site",3,"click"]],template:function(t,e){1&t&&(f.YNc(0,jt,7,2,"div",0),f.TgZ(1,"div",1),f.TgZ(2,"mat-card",2),f.TgZ(3,"mat-card-header"),f.TgZ(4,"mat-card-title"),f._uU(5,"Settings"),f.qZA(),f.TgZ(6,"div",3),f.TgZ(7,"mat-icon"),f._uU(8,"settings"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(9,"mat-card-content"),f.TgZ(10,"p"),f._uU(11,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),f.TgZ(12,"a",4),f._uU(13,"docs"),f.qZA(),f.qZA(),f.TgZ(14,"table",5),f.TgZ(15,"thead"),f.TgZ(16,"tr"),f._UZ(17,"th"),f.TgZ(18,"th"),f._uU(19,"System Settings"),f.qZA(),f.TgZ(20,"th"),f._uU(21,"Custom Settings"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(22,"tbody"),f.YNc(23,$t,15,3,"ng-container",6),f.YNc(24,ee,16,4,"ng-container",6),f.YNc(25,oe,17,6,"ng-container",6),f.qZA(),f.qZA(),f.qZA(),f.TgZ(26,"mat-card-actions"),f.TgZ(27,"div",7),f.TgZ(28,"button",8),f.NdJ("click",function(){return e.analyze(e.AnalyzeParts.Settings)}),f.TgZ(29,"mat-icon"),f._uU(30,"manage_search"),f.qZA(),f.TgZ(31,"span"),f._uU(32,"Analyze Combined Settings"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(33,"mat-card",2),f.TgZ(34,"mat-card-header"),f.TgZ(35,"mat-card-title"),f._uU(36,"Language Resources (i18n)"),f.qZA(),f.TgZ(37,"div",3),f.TgZ(38,"mat-icon"),f._uU(39,"translate"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(40,"mat-card-content"),f.TgZ(41,"p"),f._uU(42," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),f.TgZ(43,"a",4),f._uU(44,"docs"),f.qZA(),f.qZA(),f.TgZ(45,"table",5),f.TgZ(46,"thead"),f.TgZ(47,"tr"),f._UZ(48,"th"),f.TgZ(49,"th"),f._uU(50,"System Resources"),f.qZA(),f.TgZ(51,"th"),f._uU(52,"Custom Resources"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(53,"tbody"),f.YNc(54,ae,15,3,"ng-container",6),f.YNc(55,re,16,4,"ng-container",6),f.YNc(56,le,17,6,"ng-container",6),f.qZA(),f.qZA(),f.qZA(),f.TgZ(57,"mat-card-actions"),f.TgZ(58,"div",7),f.TgZ(59,"button",9),f.NdJ("click",function(){return e.analyze(e.AnalyzeParts.Resources)}),f.TgZ(60,"mat-icon"),f._uU(61,"manage_search"),f.qZA(),f.TgZ(62,"span"),f._uU(63,"Analyze Combined Resources"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.YNc(64,ue,7,0,"ng-template",null,10,f.W1O),f.YNc(66,de,7,0,"ng-template",null,11,f.W1O),f.qZA(),f.TgZ(68,"div",1),f.TgZ(69,"mat-card",2),f.TgZ(70,"mat-card-header"),f.TgZ(71,"mat-card-title"),f._uU(72,"App Configuration"),f.qZA(),f.TgZ(73,"div",3),f.TgZ(74,"mat-icon"),f._uU(75,"redeem"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(76,"mat-card-content"),f._uU(77," App name, folder, version and more. "),f.qZA(),f.TgZ(78,"mat-card-actions"),f.TgZ(79,"button",12),f.NdJ("click",function(){return e.edit(e.eavConstants.contentTypes.appConfiguration)}),f.TgZ(80,"mat-icon",13),f._uU(81," edit "),f.qZA(),f.TgZ(82,"span"),f._uU(83,"Edit Configuration"),f.qZA(),f.qZA(),f.TgZ(84,"button",12),f.NdJ("click",function(){return e.openMetadata()}),f.TgZ(85,"mat-icon",13),f._uU(86," local_offer "),f.qZA(),f.TgZ(87,"span"),f._uU(88,"Metadata"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(89,"mat-card",2),f.TgZ(90,"mat-card-header"),f.TgZ(91,"mat-card-title"),f._uU(92,"App Permissions"),f.qZA(),f.TgZ(93,"div",3),f.TgZ(94,"mat-icon"),f._uU(95,"person"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(96,"mat-card-content"),f._uU(97," Give access to the entire app (all data). Use with care. "),f.qZA(),f.TgZ(98,"mat-card-actions"),f.TgZ(99,"button",14),f.NdJ("click",function(){return e.openPermissions()}),f.TgZ(100,"mat-icon",13),f._uU(101," person "),f.qZA(),f.TgZ(102,"span"),f._uU(103," Edit Permissions "),f.YNc(104,fe,3,2,"ng-container",6),f.qZA(),f.qZA(),f.YNc(105,he,5,0,"button",15),f.ALo(106,"async"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(107,"div",1),f.TgZ(108,"mat-card",2),f.TgZ(109,"mat-card-header"),f.TgZ(110,"mat-card-title"),f._uU(111,"Export this entire App"),f.qZA(),f.TgZ(112,"div",3),f.TgZ(113,"mat-icon"),f._uU(114,"cloud_download"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(115,"mat-card-content"),f._uU(116," Create an package (zip) which can be installed in another site. "),f.qZA(),f.TgZ(117,"mat-card-actions"),f.TgZ(118,"button",12),f.NdJ("click",function(){return e.exportApp()}),f.TgZ(119,"mat-icon"),f._uU(120,"cloud_download"),f.qZA(),f.TgZ(121,"span"),f._uU(122,"Export App"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(123,"mat-card",2),f.TgZ(124,"mat-card-header"),f.TgZ(125,"mat-card-title"),f._uU(126,"Export or Import parts of this App"),f.qZA(),f.TgZ(127,"div",3),f.TgZ(128,"mat-icon"),f._uU(129,"import_export"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(130,"mat-card-content"),f._uU(131," Create an xml containing parts of the app, e.g. content and templates. Import parts from such an xml into this app. "),f.qZA(),f.TgZ(132,"mat-card-actions"),f.TgZ(133,"button",12),f.NdJ("click",function(){return e.exportParts()}),f.TgZ(134,"mat-icon"),f._uU(135,"cloud_download"),f.qZA(),f.TgZ(136,"span"),f._uU(137,"Export Parts"),f.qZA(),f.qZA(),f.TgZ(138,"button",12),f.NdJ("click",function(){return e.importParts()}),f.TgZ(139,"mat-icon"),f._uU(140,"cloud_upload"),f.qZA(),f.TgZ(141,"span"),f._uU(142,"Import Parts"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.TgZ(143,"div",1),f.TgZ(144,"mat-card",2),f.TgZ(145,"mat-card-header"),f.TgZ(146,"mat-card-title"),f._uU(147,"App-State Versioning"),f.qZA(),f.TgZ(148,"div",3),f.TgZ(149,"mat-icon"),f._uU(150,"history_toggle_off"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(151,"mat-card-content"),f._uU(152," You can save / restore the app with data and configuration in "),f.TgZ(153,"code"),f._uU(154,".data/app.xml"),f.qZA(),f._uU(155,". This file can then also be versioned using git. "),f.qZA(),f.TgZ(156,"mat-card-actions"),f.TgZ(157,"button",12),f.NdJ("click",function(){return e.exportAppXml()}),f.TgZ(158,"mat-icon"),f._uU(159,"more_time"),f.qZA(),f.TgZ(160,"span"),f._uU(161,"Save state"),f.qZA(),f.qZA(),f.TgZ(162,"button",12),f.NdJ("click",function(){return e.resetApp()}),f.TgZ(163,"mat-icon"),f._uU(164,"restore"),f.qZA(),f.TgZ(165,"span"),f._uU(166,"Restore state"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f.qZA()),2&t&&(f.Q6J("ngIf",e.isGlobal||e.isPrimary),f.xp6(23),f.Q6J("ngIf",e.isGlobal),f.xp6(1),f.Q6J("ngIf",e.isPrimary),f.xp6(1),f.Q6J("ngIf",e.isApp),f.xp6(29),f.Q6J("ngIf",e.isGlobal),f.xp6(1),f.Q6J("ngIf",e.isPrimary),f.xp6(1),f.Q6J("ngIf",e.isApp),f.xp6(24),f.Q6J("matBadge",e.appConfigurationsCount||null),f.xp6(5),f.Q6J("matBadge",e.appMetadataCount||null),f.xp6(14),f.Q6J("disabled",!e.dialogSettings.Context.Enable.AppPermissions),f.xp6(1),f.Q6J("matBadge",e.dialogSettings.Context.App.Permissions.Count||null),f.xp6(4),f.Q6J("ngIf",!e.dialogSettings.Context.Enable.AppPermissions),f.xp6(1),f.Q6J("ngIf",f.lcZ(106,13,e.debugEnabled$)))},directives:[y.O5,zt.a8,zt.dk,zt.n5,v.Hw,zt.dn,zt.hq,b.lW,A.$,B.k,y.tP],pipes:[y.Ov],styles:[".scope-info[_ngcontent-%COMP%]{width:888px;margin:16px 8px 0}table.settings[_ngcontent-%COMP%]{width:100%}table.settings[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}table.settings[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]}),t}();function ye(t,e){1&t&&(f.ynx(0),f._uU(1," Global "),f.BQk())}function Te(t,e){if(1&t&&(f.ynx(0),f._uU(1),f.BQk()),2&t){var n=f.oxw().ngIf;f.xp6(1),f.hij(" ",null==n.dialogSettings?null:n.dialogSettings.Context.App.Name," ")}}function be(t,e){1&t&&(f.TgZ(0,"div",16),f.TgZ(1,"mat-icon"),f._uU(2,"info"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Info"),f.qZA(),f.qZA())}function Ae(t,e){if(1&t&&f._UZ(0,"app-getting-started",17),2&t){var n=f.oxw(2).ngIf;f.Q6J("gettingStartedUrl",n.dialogSettings.Context.App.GettingStartedUrl)}}function ve(t,e){1&t&&(f.TgZ(0,"div",18),f.TgZ(1,"mat-icon"),f._uU(2,"menu"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Data"),f.qZA(),f.qZA())}function Ce(t,e){if(1&t&&f._UZ(0,"app-data",19),2&t){var n=f.oxw(2).ngIf;f.Q6J("enablePermissions",n.dialogSettings.Context.Enable.AppPermissions)}}function xe(t,e){1&t&&(f.TgZ(0,"div",21),f.TgZ(1,"mat-icon"),f._uU(2,"filter_list"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Queries"),f.qZA(),f.qZA())}function qe(t,e){if(1&t&&f._UZ(0,"app-queries",19),2&t){var n=f.oxw(3).ngIf;f.Q6J("enablePermissions",n.dialogSettings.Context.Enable.AppPermissions)}}function Se(t,e){1&t&&(f.TgZ(0,"mat-tab"),f.YNc(1,xe,5,0,"div",20),f.YNc(2,qe,1,1,"app-queries",11),f.qZA())}function we(t,e){1&t&&(f.TgZ(0,"div",22),f.TgZ(1,"mat-icon"),f._uU(2,"layers"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"Views"),f.qZA(),f.qZA())}function ke(t,e){if(1&t&&f._UZ(0,"app-views",23),2&t){var n=f.oxw(2).ngIf;f.Q6J("enableCode",n.dialogSettings.Context.Enable.CodeEditor)("enablePermissions",n.dialogSettings.Context.Enable.AppPermissions)("appIsGlobal",n.dialogSettings.Context.App.IsGlobal)("appIsInherited",n.dialogSettings.Context.App.IsInherited)}}function Ie(t,e){1&t&&(f.TgZ(0,"div",26),f.TgZ(1,"mat-icon"),f._uU(2,"offline_bolt"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"WebApi"),f.qZA(),f.qZA())}function Ue(t,e){if(1&t&&f._UZ(0,"app-web-api",27),2&t){var n=f.oxw(3).ngIf;f.Q6J("enableCode",n.dialogSettings.Context.Enable.CodeEditor)}}function Je(t,e){1&t&&(f.TgZ(0,"mat-tab"),f.YNc(1,Ie,5,0,"div",24),f.YNc(2,Ue,1,1,"app-web-api",25),f.qZA())}function Ne(t,e){1&t&&(f.TgZ(0,"div",28),f.TgZ(1,"mat-icon"),f._uU(2,"settings_applications"),f.qZA(),f.TgZ(3,"span"),f._uU(4,"App"),f.qZA(),f.qZA())}function Ee(t,e){if(1&t&&f._UZ(0,"app-app-configuration",29),2&t){var n=f.oxw(2).ngIf;f.Q6J("dialogSettings",n.dialogSettings)}}function Pe(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"mat-tab-group",7),f.NdJ("selectedTabChange",function(t){return f.CHM(n),f.oxw(2).changeTab(t)}),f.TgZ(1,"mat-tab"),f.YNc(2,be,5,0,"div",8),f.YNc(3,Ae,1,1,"app-getting-started",9),f.qZA(),f.TgZ(4,"mat-tab"),f.YNc(5,ve,5,0,"div",10),f.YNc(6,Ce,1,1,"app-data",11),f.qZA(),f.YNc(7,Se,3,0,"mat-tab",4),f.TgZ(8,"mat-tab"),f.YNc(9,we,5,0,"div",12),f.YNc(10,ke,1,4,"app-views",13),f.qZA(),f.YNc(11,Je,3,0,"mat-tab",4),f.TgZ(12,"mat-tab"),f.YNc(13,Ne,5,0,"div",14),f.YNc(14,Ee,1,1,"app-app-configuration",15),f.qZA(),f.qZA()}if(2&t){var i=f.oxw().ngIf;f.Q6J("selectedIndex",i.tabIndex),f.xp6(7),f.Q6J("ngIf",i.dialogSettings.Context.Enable.Query),f.xp6(4),f.Q6J("ngIf",i.dialogSettings.Context.Enable.Query)}}function Re(t,e){if(1&t){var n=f.EpF();f.TgZ(0,"div",1),f.TgZ(1,"div",2),f.TgZ(2,"div",3),f.TgZ(3,"div"),f.YNc(4,ye,2,0,"ng-container",4),f.YNc(5,Te,2,1,"ng-container",4),f._uU(6," Admin "),f.qZA(),f.TgZ(7,"button",5),f.NdJ("click",function(){return f.CHM(n),f.oxw().closeDialog()}),f.TgZ(8,"mat-icon"),f._uU(9,"close"),f.qZA(),f.qZA(),f.qZA(),f.qZA(),f._UZ(10,"router-outlet"),f.YNc(11,Pe,15,3,"mat-tab-group",6),f.qZA()}if(2&t){var i=e.ngIf,o=f.oxw();f.xp6(4),f.Q6J("ngIf",(null==i.dialogSettings?null:i.dialogSettings.Context.App.SettingsScope)===o.AppScopes.Global),f.xp6(1),f.Q6J("ngIf",(null==i.dialogSettings?null:i.dialogSettings.Context.App.SettingsScope)!==o.AppScopes.Global),f.xp6(6),f.Q6J("ngIf",i.dialogSettings&&null!=i.tabIndex)}}var _e=function(){function t(t,e,n,u){var d=this;this.dialogRef=t,this.appDialogConfigService=e,this.router=n,this.route=u,this.AppScopes=m,this.dialogSettings$=new a.X(null),this.tabs$=new a.X(null),this.tabIndex$=(0,s.aj)([this.tabs$,this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,c.U)(function(){return d.route.snapshot.firstChild.url[0].path}),(0,l.O)(this.route.snapshot.firstChild.url[0].path))]).pipe((0,c.U)(function(t){var e=(0,i.CR)(t,2),n=e[0];if(null!=n)return n.indexOf(e[1])}),(0,p.h)(function(t){return t>=0})),this.templateVars$=(0,s.aj)([this.dialogSettings$,this.tabIndex$]).pipe((0,c.U)(function(t){var e=(0,i.CR)(t,2);return{dialogSettings:e[0],tabIndex:e[1]}})),this.subscription=new r.w}return t.prototype.ngOnInit=function(){this.fetchDialogSettings(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.dialogSettings$.complete(),this.tabs$.complete(),this.subscription.unsubscribe()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.changeTab=function(t){var e=this.tabs$.value[t.index];"data"===e&&(e="data/"+d.Z.scopes.default.value),this.router.navigate([e],{relativeTo:this.route})},t.prototype.fetchDialogSettings=function(){var t=this;this.appDialogConfigService.getDialogSettings().subscribe(function(e){(0,g.X)(e.Context.App),t.dialogSettings$.next(e);var n=["home","data","queries","views","web-api","app"];e.Context.Enable.Query||(n=n.filter(function(t){return"queries"!==t&&"web-api"!==t})),t.tabs$.next(n)})},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe((0,p.h)(function(t){return t instanceof o.m2}),(0,l.O)(!!this.route.snapshot.firstChild.firstChild),(0,c.U)(function(){return!!t.route.snapshot.firstChild.firstChild}),(0,u.G)(),(0,p.h)(function(t){var e=(0,i.CR)(t,2);return e[0]&&!e[1]})).subscribe(function(){t.fetchDialogSettings()}))},t.\u0275fac=function(e){return new(e||t)(f.Y36(h.so),f.Y36(Z.K),f.Y36(o.F0),f.Y36(o.gz))},t.\u0275cmp=f.Xpm({type:t,selectors:[["app-app-administration-nav"]],decls:2,vars:3,consts:[["class","nav-component-wrapper","appToggleDebug","",4,"ngIf"],["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],["mat-icon-button","","tippy","Close dialog",3,"click"],["class","mat-tab-group-max-height","dynamicHeight","","color","accent",3,"selectedIndex","selectedTabChange",4,"ngIf"],["dynamicHeight","","color","accent",1,"mat-tab-group-max-height",3,"selectedIndex","selectedTabChange"],["class","mat-tab-label-box","tippy","App Info",4,"matTabLabel"],[3,"gettingStartedUrl",4,"matTabContent"],["class","mat-tab-label-box","tippy","Data / Content",4,"matTabLabel"],[3,"enablePermissions",4,"matTabContent"],["class","mat-tab-label-box","tippy","Views / Templates",4,"matTabLabel"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited",4,"matTabContent"],["class","mat-tab-label-box","tippy","App Settings",4,"matTabLabel"],[3,"dialogSettings",4,"matTabContent"],["tippy","App Info",1,"mat-tab-label-box"],[3,"gettingStartedUrl"],["tippy","Data / Content",1,"mat-tab-label-box"],[3,"enablePermissions"],["class","mat-tab-label-box","tippy","Queries / Visual Query Designer",4,"matTabLabel"],["tippy","Queries / Visual Query Designer",1,"mat-tab-label-box"],["tippy","Views / Templates",1,"mat-tab-label-box"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited"],["class","mat-tab-label-box","tippy","WebApi",4,"matTabLabel"],[3,"enableCode",4,"matTabContent"],["tippy","WebApi",1,"mat-tab-label-box"],[3,"enableCode"],["tippy","App Settings",1,"mat-tab-label-box"],[3,"dialogSettings"]],template:function(t,e){1&t&&(f.YNc(0,Re,12,3,"div",0),f.ALo(1,"async")),2&t&&f.Q6J("ngIf",f.lcZ(1,1,e.templateVars$))},directives:[y.O5,T.D,h.uh,b.lW,A.$,v.Hw,o.lC,C.SP,C.uX,C.uD,C.Vc,q,pt,Zt,Nt,Ot,Ze],pipes:[y.Ov],styles:[""]}),t}()},7289:function(t,e,n){"use strict";function i(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}n.d(e,{M:function(){return i}})},6146:function(t,e,n){"use strict";n.d(e,{D:function(){return a}});var i=n(1785),o=n(9886),a=function(){function t(t){this.globalConfigService=t}return t.prototype.onClick=function(t){(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&t.shiftKey&&t.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())},t.\u0275fac=function(e){return new(e||t)(i.Y36(o.bE))},t.\u0275dir=i.lG2({type:t,selectors:[["","appToggleDebug",""]],hostBindings:function(t,e){1&t&&i.NdJ("click",function(t){return e.onClick(t)})}}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_app-administration_app-administration-nav_app-administration-nav_-fbf7c1.441c1ba6a0d8f79aa754.js.map