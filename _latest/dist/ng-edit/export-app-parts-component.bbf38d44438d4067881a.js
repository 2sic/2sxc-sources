(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"0bV3":function(t,n,e){"use strict";e.r(n),e.d(n,"ExportAppPartsComponent",(function(){return $}));var o=e("D57K"),i=e("LiEJ"),c=e("3riI"),p=e("Jg5f"),a=e("o9tz"),r=e("1C3z"),s=e("BLjT"),l=e("bkzA"),b=e("S36y"),f=e("8AiQ"),h=e("hOvr"),u=e("LuBX"),d=e("ZSGP"),g=e("OeRG"),m=e("9HSk"),x=e("Qc/f"),v=e("r4gC"),_=e("Zfm5"),O=e("Uk43"),V=e("mPmy");function y(t,n){if(1&t&&(r.Vb(0,"mat-option",17),r.Oc(1),r.Ub()),2&t){var e=n.$implicit;r.nc("value",e.value),r.Bb(1),r.Qc(" ",e.name," ")}}function U(t,n){if(1&t){var e=r.Wb();r.Vb(0,"li",21),r.Vb(1,"div",22),r.Vb(2,"mat-checkbox",23),r.dc("ngModelChange",(function(t){return r.Dc(e),n.$implicit._export=t})),r.Vb(3,"span",24),r.Oc(4),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){var o=n.$implicit;r.Bb(2),r.nc("ngModel",o._export),r.Bb(2),r.Rc("",o.Name," (",o.Id,")")}}function C(t,n){if(1&t&&(r.Vb(0,"ul",26),r.Vb(1,"p",27),r.Oc(2,"Templates"),r.Ub(),r.Mc(3,U,5,3,"li",20),r.Ub()),2&t){var e=r.hc().$implicit;r.Bb(3),r.nc("ngForOf",e.Templates)}}function k(t,n){if(1&t){var e=r.Wb();r.Vb(0,"li",21),r.Vb(1,"div",22),r.Vb(2,"mat-checkbox",23),r.dc("ngModelChange",(function(t){return r.Dc(e),n.$implicit._export=t})),r.Vb(3,"span",24),r.Oc(4),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){var o=n.$implicit;r.Bb(2),r.nc("ngModel",o._export),r.Bb(2),r.Rc("",o.Title," (",o.Id,")")}}function S(t,n){if(1&t&&(r.Vb(0,"ul",26),r.Vb(1,"p",27),r.Oc(2,"Entities"),r.Ub(),r.Mc(3,k,5,3,"li",20),r.Ub()),2&t){var e=r.hc().$implicit;r.Bb(3),r.nc("ngForOf",e.Entities)}}function M(t,n){if(1&t){var e=r.Wb();r.Vb(0,"li",21),r.Vb(1,"div",22),r.Vb(2,"mat-checkbox",23),r.dc("ngModelChange",(function(t){return r.Dc(e),n.$implicit._export=t})),r.Vb(3,"span",24),r.Oc(4),r.Ub(),r.Ub(),r.Ub(),r.Mc(5,C,4,1,"ul",25),r.Mc(6,S,4,1,"ul",25),r.Ub()}if(2&t){var o=n.$implicit;r.Bb(2),r.nc("ngModel",o._export),r.Bb(2),r.Rc("",o.Name," (",o.Id,")"),r.Bb(1),r.nc("ngIf",o.Templates.length>0),r.Bb(1),r.nc("ngIf",o.Entities.length>0)}}function T(t,n){if(1&t){var e=r.Wb();r.Vb(0,"li",21),r.Vb(1,"div",22),r.Vb(2,"mat-checkbox",23),r.dc("ngModelChange",(function(t){return r.Dc(e),n.$implicit._export=t})),r.Vb(3,"span",24),r.Oc(4),r.Ub(),r.Ub(),r.Ub(),r.Ub()}if(2&t){var o=n.$implicit;r.Bb(2),r.nc("ngModel",o._export),r.Bb(2),r.Rc("",o.Name," (",o.Id,")")}}function I(t,n){if(1&t&&(r.Vb(0,"div"),r.Vb(1,"ul",18),r.Vb(2,"p",19),r.Oc(3,"Content Types"),r.Ub(),r.Mc(4,M,7,5,"li",20),r.Ub(),r.Vb(5,"ul",18),r.Vb(6,"p",19),r.Oc(7,"Templates Without Content Types"),r.Ub(),r.Mc(8,T,5,3,"li",20),r.Ub(),r.Ub()),2&t){var e=r.hc(2);r.Bb(4),r.nc("ngForOf",e.contentInfo.ContentTypes),r.Bb(4),r.nc("ngForOf",e.contentInfo.TemplatesWithoutContentTypes)}}function B(t,n){if(1&t){var e=r.Wb();r.Tb(0),r.Vb(1,"div",1),r.Vb(2,"div",2),r.Oc(3,"Export Content and Templates from this App"),r.Ub(),r.Ub(),r.Vb(4,"p",3),r.Oc(5," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),r.Vb(6,"a",4),r.Oc(7,"2sxc Help"),r.Ub(),r.Oc(8,". "),r.Ub(),r.Vb(9,"div",5),r.Vb(10,"div",6),r.Vb(11,"mat-form-field",7),r.Vb(12,"mat-label"),r.Oc(13,"Scope"),r.Ub(),r.Vb(14,"mat-select",8),r.dc("ngModelChange",(function(t){return r.Dc(e),r.hc().changeScope(t)})),r.Mc(15,y,2,2,"mat-option",9),r.Vb(16,"mat-option",10),r.Oc(17,"Other..."),r.Ub(),r.Ub(),r.Vb(18,"button",11),r.Vb(19,"mat-icon",12),r.dc("click",(function(){return r.Dc(e),r.hc().unlockScope()})),r.Oc(20),r.Ub(),r.Ub(),r.Ub(),r.Vb(21,"app-field-hint"),r.Oc(22," The scope should almost never be changed - "),r.Vb(23,"a",13),r.Oc(24,"see help"),r.Ub(),r.Ub(),r.Ub(),r.Mc(25,I,9,2,"div",0),r.Ub(),r.Vb(26,"div",14),r.Vb(27,"button",15),r.dc("click",(function(){return r.Dc(e),r.hc().closeDialog()})),r.Oc(28," Cancel "),r.Ub(),r.Vb(29,"button",16),r.dc("click",(function(){return r.Dc(e),r.hc().exportAppParts()})),r.Oc(30," Export "),r.Ub(),r.Ub(),r.Sb()}if(2&t){var o=n.ngIf,i=r.hc();r.Bb(14),r.nc("ngModel",i.exportScope)("disabled",i.lockScope),r.Bb(1),r.nc("ngForOf",i.scopeOptions),r.Bb(3),r.nc("matTooltip",i.lockScope?"Unlock":"Lock"),r.Bb(2),r.Qc(" ",i.lockScope?"lock":"lock_open"," "),r.Bb(5),r.nc("ngIf",i.contentInfo),r.Bb(2),r.nc("disabled",o.loading||o.isExporting),r.Bb(2),r.nc("disabled",o.loading||o.isExporting)}}var $=function(){function t(t,n,e){this.dialogRef=t,this.exportAppPartsService=n,this.contentTypesService=e,this.hostClass="dialog-component",this.exportScope=a.a.scopes.default.value,this.lockScope=!0,this.loading$=new i.a(!1),this.isExporting$=new i.a(!1),this.templateVars$=Object(c.a)([this.loading$,this.isExporting$]).pipe(Object(p.a)((function(t){var n=Object(o.f)(t,2);return{loading:n[0],isExporting:n[1]}})))}return t.prototype.ngOnInit=function(){this.fetchScopes(),this.fetchContentInfo()},t.prototype.ngOnDestroy=function(){this.loading$.complete(),this.isExporting$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.exportAppParts=function(){this.isExporting$.next(!0);var t=this.selectedContentTypes().map((function(t){return t.Id})),n=this.selectedTemplates().map((function(t){return t.Id})),e=this.selectedEntities().map((function(t){return t.Id}));e=e.concat(n),this.exportAppPartsService.exportParts(t,e,n),this.isExporting$.next(!1)},t.prototype.changeScope=function(t){"Other"===t&&((t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason."))?this.scopeOptions.find((function(n){return n.value===t}))||this.scopeOptions.push({name:t,value:t}):t=a.a.scopes.default.value),this.exportScope=t,this.fetchContentInfo()},t.prototype.unlockScope=function(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=a.a.scopes.default.value,this.fetchContentInfo())},t.prototype.fetchScopes=function(){var t=this;this.loading$.next(!0),this.contentTypesService.getScopes().subscribe((function(n){t.scopeOptions=n,t.loading$.next(!1)}))},t.prototype.fetchContentInfo=function(){var t=this;this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe((function(n){t.contentInfo=n,t.loading$.next(!1)}))},t.prototype.selectedContentTypes=function(){return this.contentInfo.ContentTypes.filter((function(t){return t._export}))},t.prototype.selectedEntities=function(){var t,n,e=[];try{for(var i=Object(o.i)(this.contentInfo.ContentTypes),c=i.next();!c.done;c=i.next())e=e.concat(c.value.Entities.filter((function(t){return t._export})))}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e},t.prototype.selectedTemplates=function(){var t,n,e=[];try{for(var i=Object(o.i)(this.contentInfo.ContentTypes),c=i.next();!c.done;c=i.next())e=e.concat(c.value.Templates.filter((function(t){return t._export})))}catch(p){t={error:p}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.concat(this.contentInfo.TemplatesWithoutContentTypes.filter((function(t){return t._export})))},t.\u0275fac=function(n){return new(n||t)(r.Pb(s.g),r.Pb(l.a),r.Pb(b.a))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(t,n){2&t&&r.Yb("className",n.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"matTooltip"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],[1,"dialog-component-actions"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],[1,"content-info__list","content-info__base"],[1,"content-info__title"],["class","content-info__item",4,"ngFor","ngForOf"],[1,"content-info__item"],[1,"option-box"],[3,"ngModel","ngModelChange"],[1,"option-box__text"],["class","content-info__list",4,"ngIf"],[1,"content-info__list"],[1,"content-info__subtitle"]],template:function(t,n){1&t&&(r.Mc(0,B,31,8,"ng-container",0),r.ic(1,"async")),2&t&&r.nc("ngIf",r.jc(1,1,n.templateVars$))},directives:[f.m,s.h,h.c,h.g,u.a,d.l,d.o,f.l,g.l,m.a,h.h,x.a,v.a,_.a,O.a,V.a],pipes:[f.b],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.content-info__base[_ngcontent-%COMP%]{padding:0}.content-info__item[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:2px}.option-box[_ngcontent-%COMP%]{margin:8px 0}.option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"],changeDetection:0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.00/ng-edit/export-app-parts-component.bbf38d44438d4067881a.js.map