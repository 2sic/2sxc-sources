"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--26d2a6"],{8242:(y,u,e)=>{e.r(u),e.d(u,{AddAppFromFolderComponent:()=>N});var t=e(8559),m=e(7941),C=e(4205),D=e(9999),g=e(3037),v=e(6647),I=e(1318),f=e(9452),p=e(1870),h=e(271),$=e(8136),s=e(3176),i=e(251),x=e(4858),A=e(3583),M=e(3840),O=e(4601);let S=(()=>{class r{agInit(n){this.name=n.value,this.tooltip=n.tooltipGetter(n.data)}refresh(n){return!0}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-app-name-show"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(o,d){1&o&&(t.j41(0,"div",0)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"mat-icon",1),t.EFF(4,"info"),t.k0s()()),2&o&&(t.R7$(2),t.JRh(d.name),t.R7$(),t.Y8G("tippy",d.tooltip))},dependencies:[M.m_,M.An,O.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return r})(),b=(()=>{class r{agInit(n){this.params=n}refresh(n){return!0}onChange(n){this.params.onChange(this.params.data,n.currentTarget.checked)}static#t=this.\u0275fac=function(o){return new(o||r)};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-checkbox-cell"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(o,d){1&o&&(t.j41(0,"div",0)(1,"input",1),t.bIt("change",function(U){return d.onChange(U)}),t.k0s()()),2&o&&(t.R7$(),t.Y8G("disabled",d.params.isDisabled)("checked",d.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return r})();var j=e(316),T=e(4175),B=e(7850),_=e(7037),c=e(5437),P=e(3347),a=e(9841);function l(r,W){1&r&&(t.j41(0,"p"),t.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),t.k0s())}function F(r,W){if(1&r&&(t.j41(0,"div"),t.nrm(1,"ag-grid-angular",8),t.k0s()),2&r){const n=t.XpG(),o=t.XpG();t.R7$(),t.Y8G("rowData",n.pendingApps)("gridOptions",o.gridOptions)}}function E(r,W){if(1&r){const n=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Add App from Folder"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"app-feature-text-info",4),t.j41(6,"p"),t.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),t.k0s(),t.DNE(8,l,2,0,"p")(9,F,2,2,"div"),t.k0s(),t.j41(10,"mat-dialog-actions",5)(11,"button",6),t.bIt("click",function(){t.eBV(n);const d=t.XpG();return t.Njj(d.closeDialog())}),t.EFF(12," Cancel "),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){t.eBV(n);const d=t.XpG();return t.Njj(d.install())}),t.EFF(14," Install "),t.k0s()()()}if(2&r){const n=W,o=t.XpG();t.R7$(5),t.Y8G("featureNameId","AppSyncWithSiteFiles"),t.R7$(3),t.vxM(8,0==(null==n.pendingApps?null:n.pendingApps.length)?8:-1),t.R7$(),t.vxM(9,(null==n.pendingApps?null:n.pendingApps.length)>0?9:-1),t.R7$(4),t.Y8G("disabled",0===o.pendingApps.length||o.installing)}}let N=(()=>{class r extends s.${constructor(n,o){super(),this.dialogRef=n,this.snackBar=o,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.pendingApps=[],this.installing=!1,this.refreshApps$=new C.B,this.features=(0,t.WQX)(x.D),this.isAddFromFolderEnabled=this.features.isEnabled($.T.AppSyncWithSiteFiles),this.appsListService=(0,c.d)(A.U)}ngOnInit(){this.viewModel$=(0,D.z)([this.refreshApps$.pipe((0,g.Z)(void 0),(0,v.n)(()=>this.appsListService.getPendingApps().pipe((0,I.W)(()=>(0,f.of)(void 0)))),(0,p.u)())]).pipe((0,h.T)(([n])=>({pendingApps:n})))}ngOnDestroy(){this.refreshApps$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onChange(n,o){o?this.pendingApps.push(n):this.pendingApps.splice(this.pendingApps.indexOf(n),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...i.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:b,cellRendererParams:()=>({isDisabled:!this.isAddFromFolderEnabled,onChange:(d,R)=>this.onChange(d,R)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:S,cellRendererParams:{tooltipGetter:d=>`Server folder: ${d.ServerFolder}\nFolder: ${d.Folder}\nVersion: ${d.Version}\nDescription: ${d.Description}`}}]}}static#t=this.\u0275fac=function(o){return new(o||r)(t.rXU(m.CP),t.rXU(P.UG))};static#e=this.\u0275cmp=t.VBU({type:r,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(o,d){2&o&&t.Mr5("className",d.hostClass)},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(o,d){if(1&o&&(t.DNE(0,E,15,4,"div",0),t.nI1(1,"async")),2&o){let R;t.vxM(0,(R=t.bMT(1,1,d.viewModel$))?0:-1,R)}},dependencies:[m.E7,T.Hl,T.$z,j.Jj,B.L,_.p,a.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return r})()},8136:(y,u,e)=>{e.d(u,{T:()=>t});const t={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},5943:(y,u,e)=>{e.d(u,{N:()=>g});var t=e(8559),m=e(6443),C=e(4821);let g=(()=>{class v{constructor(f,p){this.http=f,this.dnnContext=p}getFeatureDetails(f){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/feature/details"),{params:{nameId:f}})}static#t=this.\u0275fac=function(p){return new(p||v)(t.KVO(m.Qq),t.KVO(C.ob))};static#e=this.\u0275prov=t.jDH({token:v,factory:v.\u0275fac})}return v})()},6838:(y,u,e)=>{e.d(u,{xG:()=>B,IM:()=>T,jr:()=>_});var t=e(8559),m=e(7941),C=e(4858),D=e(519),g=e(852),v=e(316),I=e(3840),f=e(4175),p=e(3777),h=e(4601),$=e(9914),s=e(3347),i=e(5943);function x(c,P){if(1&c){const a=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2,"ID:"),t.k0s(),t.j41(3,"div",7)(4,"span",8),t.bIt("click",function(){const F=t.eBV(a),E=t.XpG(2);return t.Njj(E.copyToClipboard(F))}),t.EFF(5),t.k0s()()()}if(2&c){const a=P;t.R7$(4),t.Y8G("tippy",a),t.R7$(),t.JRh(a)}}function A(c,P){if(1&c){const a=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content"),t.nrm(5,"p",0),t.nI1(6,"safeHtml"),t.j41(7,"div",1)(8,"div",2),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",3)(12,"span"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.DNE(15,x,6,2,"div",1),t.k0s(),t.j41(16,"mat-card-actions",4)(17,"button",5),t.bIt("click",function(){const F=t.eBV(a),E=t.XpG();return t.Njj(E.findOutMore(F.link))}),t.j41(18,"mat-icon"),t.EFF(19,"open_in_new"),t.k0s(),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"button",6),t.bIt("click",function(){t.eBV(a);const F=t.XpG();return t.Njj(F.closeDialog())}),t.EFF(23),t.nI1(24,"translate"),t.k0s()()()}if(2&c){let a;const l=P;t.R7$(3),t.JRh(l.name),t.R7$(2),t.Y8G("innerHtml",t.bMT(6,7,l.description),t.npT),t.R7$(4),t.SpI("",t.bMT(10,9,"Features.Status"),":"),t.R7$(4),t.JRh(t.bMT(14,11,l.isEnabled?"Features.Active":"Features.NotActive")),t.R7$(2),t.vxM(15,(a=l.nameId)?15:-1,a),t.R7$(5),t.SpI(" ",t.bMT(21,13,"Features.FindOutMore")," "),t.R7$(3),t.SpI(" ",t.bMT(24,15,"Features.Close")," ")}}let M=(()=>{class c{constructor(a,l,F,E){this.dialogData=a,this.dialogRef=l,this.snackBar=F,this.featureDetailService=E}ngOnInit(){this.viewModel$=this.featureDetailService.getFeatureDetails(this.dialogData)}copyToClipboard(a){(0,D.l)(a),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(a){window.open(a,"_blank")}closeDialog(){this.dialogRef.close()}static#t=this.\u0275fac=function(l){return new(l||c)(t.rXU(m.Vh),t.rXU(m.CP),t.rXU(s.UG),t.rXU(i.N))};static#e=this.\u0275cmp=t.VBU({type:c,selectors:[["app-feature-info-dialog"]],standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["align","end"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"click","tippy"]],template:function(l,F){if(1&l&&(t.DNE(0,A,25,17,"mat-card"),t.nI1(1,"async")),2&l){let E;t.vxM(0,(E=t.bMT(1,1,F.viewModel$))?0:-1,E)}},dependencies:[p.Hu,p.RN,p.YY,p.m2,p.MM,p.dh,f.Hl,f.$z,I.m_,I.An,v.Jj,g.h,g.D9,h.e,$.$]})}return c})();var O=e(5797),S=e(6647),b=e(9999),j=e(271);const T=[i.N];let B=(()=>{class c{set featureNameId(a){this.featureNameId$.next(a)}set showIf(a){this.showIf$.next(1==a)}constructor(){this.featureNameId$=new O.t(null),this.showIf$=new O.t(!1),this.dialog=(0,t.WQX)(m.bZ),this.viewContainerRef=(0,t.WQX)(t.c1b),this.changeDetectorRef=(0,t.WQX)(t.gRc),this.featuresService=(0,t.WQX)(C.D),this.feature$=this.featureNameId$.pipe((0,S.n)(a=>this.featuresService.get$(a))),this.show$=(0,b.z)([this.feature$,this.showIf$]).pipe((0,j.T)(([a,l])=>l==(a?.isEnabled??!1)))}openDialog(){_(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static#t=this.\u0275fac=function(l){return new(l||c)};static#e=this.\u0275dir=t.FsC({type:c,inputs:{featureNameId:"featureNameId",showIf:"showIf"}})}return c})();function _(c,P,a,l){c.open(M,{autoFocus:!1,data:P,viewContainerRef:a,width:"400px"}),l.markForCheck()}},1772:(y,u,e)=>{e.d(u,{I:()=>p,u:()=>f});var t=e(6647),m=e(9452),C=e(3550),D=e(8873),g=e(8559),v=e(6443),I=e(4821);const f="admin/app/";let p=(()=>{class h{constructor(s,i,x){this.http=s,this.context=i,this.dnnContext=x}importApp(s,i,x=!1){const A=new FormData;return A.append("File",s),A.append("Name",i??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(f+"Import"),A,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,t.n)(M=>{if(x&&M.Messages[0]?.MessageType===C.G1.Warning){const O=prompt(M.Messages[0].Text+" Would you like to install it using another folder name?");if(O)return this.importApp(s,O,!0)}return(0,m.of)(M)}))}static#t=this.\u0275fac=function(i){return new(i||h)(g.KVO(v.Qq),g.KVO(D.o),g.KVO(I.ob))};static#e=this.\u0275prov=g.jDH({token:h,factory:h.\u0275fac})}return h})()},1576:(y,u,e)=>{e.d(u,{W:()=>m});var t=e(3826);class m{static#t=this.boolEquals={equal:t.a.valueEquals};static#e=this.numberEquals={equal:t.a.valueEquals};static#n=this.stringEquals={equal:t.a.valueEquals};static#a=this.objectEquals={equal:t.a.objectsEqual}}},4858:(y,u,e)=>{e.d(u,{D:()=>p});var t=e(8559),m=e(6042),C=e(271),D=e(4979),g=e(3472),v=e(1576),I=e(3826);let p=(()=>{class h extends D.V{constructor(){super(new g.B("FeaturesService",!1)),this.dialogContext$=new m.m(1),this.dialogContextSignal=(0,t.vPA)(null)}loadFromService(s){s.getCurrent$().subscribe(i=>this.load(i.Context))}load(s){this.dialogContext$.next(s),this.dialogContextSignal.set(s)}getAll(){return(0,t.EWP)(()=>this.dialogContextSignal()?.Features??[],{equal:I.a.arraysEqual})}get$(s){return this.dialogContext$.pipe((0,C.T)(i=>i?.Features.find(x=>x.nameId===s)))}getSignal(s){return(0,t.EWP)(()=>this.dialogContextSignal()?.Features.find(i=>i.nameId===s),{equal:I.a.objectsEqual})}isEnabled$(s){return this.get$(s).pipe((0,C.T)(i=>i?.isEnabled??!1))}isEnabled(s){return(0,t.EWP)(()=>this.dialogContextSignal()?.Features.find(i=>i.nameId===s)?.isEnabled??!1,v.W.boolEquals)}static#t=this.\u0275fac=function(i){return new(i||h)};static#e=this.\u0275prov=t.jDH({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--26d2a6.76040be0207a6847.js.map