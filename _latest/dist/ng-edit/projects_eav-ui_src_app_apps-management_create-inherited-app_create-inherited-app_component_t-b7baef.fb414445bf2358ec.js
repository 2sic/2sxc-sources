"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-b7baef"],{7574:(O,E,n)=>{n.r(E),n.d(E,{CreateInheritedAppComponent:()=>h});var e=n(7580),o=n(4456),t=n(7941),v=n(3583),m=n(4175),f=n(5060),C=n(5175),l=n(5944),M=n(2159),c=n(3758),g=n(5437),i=n(3347);function p(r,u){if(1&r&&(e.j41(0,"mat-option",7),e.EFF(1),e.k0s()),2&r){const s=u.$implicit;e.Y8G("value",s.Id),e.R7$(),e.SpI(" ",s.Name," ")}}function _(r,u){1&r&&(e.j41(0,"app-field-hint",8),e.EFF(1," Required "),e.k0s()),2&r&&e.Y8G("isError",!0)}let h=(()=>{class r{constructor(s,d){this.dialogRef=s,this.snackBar=d,this.hostClass="dialog-component",this.loading=(0,e.vPA)(!1),this.inheritableApps=(0,e.vPA)(void 0),this.appsListService=(0,g.d)(v.U),this.form=this.buildForm()}ngOnInit(){this.fetchInheritedApps()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading.set(!0);const s=this.form.controls.inheritId.value,d=this.inheritableApps().find(a=>a.Id===s).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(d,s).subscribe({error:()=>{this.form.enable(),this.loading.set(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps.set(null)},next:s=>{this.inheritableApps.set(s)}})}buildForm(){return new o.J3({inheritId:new o.hs(null,[o.k0.required])})}static#e=this.\u0275fac=function(d){return new(d||r)(e.rXU(t.CP),e.rXU(i.UG))};static#t=this.\u0275cmp=e.VBU({type:r,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(d,a){2&d&&e.Mr5("className",a.hostClass)},standalone:!0,features:[e.aNF],decls:21,vars:5,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"value"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",3,"click","disabled"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"]],template:function(d,a){1&d&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.EFF(3,"Create inherited App"),e.k0s()(),e.j41(4,"div",3),e.nrm(5,"router-outlet"),e.j41(6,"p"),e.EFF(7," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),e.k0s(),e.j41(8,"form",4)(9,"mat-form-field",5)(10,"mat-label"),e.EFF(11,"Inherit App"),e.k0s(),e.j41(12,"mat-select",6),e.Z7z(13,p,2,2,"mat-option",7,e.fX1),e.k0s()(),e.DNE(15,_,2,1,"app-field-hint",8),e.k0s()(),e.j41(16,"mat-dialog-actions",9)(17,"button",10),e.bIt("click",function(){return a.closeDialog()}),e.EFF(18," Cancel "),e.k0s(),e.j41(19,"button",11),e.bIt("click",function(){return a.create()}),e.EFF(20," Create "),e.k0s()()()),2&d&&(e.R7$(8),e.Y8G("formGroup",a.form),e.R7$(4),e.Y8G("placeholder",void 0===a.inheritableApps()?"Loading...":null===a.inheritableApps()||0===a.inheritableApps().length?"No inheritable apps found":""),e.R7$(),e.Dyx(a.inheritableApps()),e.R7$(2),e.vxM(15,a.form.controls.inheritId.touched&&null!=a.form.controls.inheritId.errors&&a.form.controls.inheritId.errors.required?15:-1),e.R7$(2),e.Y8G("disabled",a.loading()),e.R7$(2),e.Y8G("disabled",a.loading()||!a.form.valid))},dependencies:[M.n3,o.YN,o.qT,o.BC,o.cb,o.X1,o.j4,o.JD,l.RG,l.rl,l.nJ,C.Ve,C.VO,f.wT,f.Sy,t.E7,m.Hl,m.$z,c.F]})}return r})()},1772:(O,E,n)=>{n.d(E,{I:()=>C,u:()=>f});var e=n(6647),o=n(9452),t=n(3550),v=n(6474),m=n(7580);const f="admin/app/";let C=(()=>{class l extends v.D{importApp(c,g,i=!1){const p=new FormData;return p.append("File",c),p.append("Name",g??""),this.http.post(this.apiUrl(f+"Import"),p,{params:{zoneId:this.zoneId}}).pipe((0,e.n)(_=>{if(i&&_.Messages[0]?.MessageType===t.G1.Warning){const h=prompt(_.Messages[0].Text+" Would you like to install it using another folder name?");if(h)return this.importApp(c,h,!0)}return(0,o.of)(_)}))}static#e=this.\u0275fac=(()=>{let c;return function(i){return(c||(c=m.xGo(l)))(i||l)}})();static#t=this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}return l})()},3758:(O,E,n)=>{n.d(E,{F:()=>g});var e=n(316),o=n(5944),t=n(7580);const v=["*"],m=i=>({"hint-box__short":i});function f(i,p){1&i&&t.eu8(0)}function C(i,p){if(1&i&&(t.j41(0,"mat-hint"),t.DNE(1,f,1,0,"ng-container",2),t.k0s()),2&i){t.XpG();const _=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",_)}}function l(i,p){1&i&&t.eu8(0)}function M(i,p){if(1&i&&(t.j41(0,"mat-error"),t.DNE(1,l,1,0,"ng-container",2),t.k0s()),2&i){t.XpG();const _=t.sdS(4);t.R7$(),t.Y8G("ngTemplateOutlet",_)}}function c(i,p){1&i&&t.SdG(0)}let g=(()=>{class i{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#e=this.\u0275fac=function(h){return new(h||i)};static#t=this.\u0275cmp=t.VBU({type:i,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[t.aNF],ngContentSelectors:v,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(h,r){if(1&h){const u=t.RV6();t.NAR(),t.j41(0,"div",1),t.bIt("click",function(){return t.eBV(u),t.Njj(r.toggleIsShort())}),t.DNE(1,C,2,1)(2,M,2,1),t.k0s(),t.DNE(3,c,1,0,"ng-template",null,0,t.C5r)}if(2&h){let u;t.Y8G("ngClass",t.eq3(2,m,r.isShort)),t.R7$(),t.vxM(1,!1===(u=r.isError)?1:!0===u?2:-1)}},dependencies:[o.RG,o.MV,o.TL,e.YU,e.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.01.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-b7baef.fb414445bf2358ec.js.map