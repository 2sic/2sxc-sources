"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts"],{9262:(M,E,n)=>{n.r(E),n.d(E,{WebApiRestApiComponent:()=>s});var h=n(316),o=n(4456),c=n(4175),I=n(3777),O=n(3840),u=n(5175),A=n(5797),D=n(2159),T=n(9996),g=n(7037),P=n(5437),x=n(8471),e=n(7580),_=n(5944),f=n(5060);function t(p,l){if(1&p&&(e.j41(0,"mat-option",3),e.EFF(1),e.k0s()),2&p){const i=l.$implicit;e.Y8G("value",i.path),e.R7$(),e.SpI(" ",i.name," ")}}function a(p,l){1&p&&e.Z7z(0,t,2,2,"mat-option",3,e.fX1),2&p&&e.Dyx(l.sort())}let s=(()=>{class p{#e;#t;constructor(i){this.fb=i,this.#e=(0,P.d)(T.F),this.#t=(0,P.d)(x.c),this.webApis$=new A.t(void 0)}ngOnInit(){this.fetchWebApis(),this.webApiTypeForm=this.fb.group({webApiType:[""]})}fetchWebApis(){this.#e.getWebApis().subscribe(i=>{this.webApis$.next(i);const r=this.#t.url.split("/");var m=r[r.length-1].replace("%252F","/");const C=i.find(v=>v.path===m);C&&this.webApiTypeForm.get("webApiType").setValue(C.path)})}openRestApi(i){i&&this.#t.navParentFirstChild([encodeURIComponent(i)])}static#a=this.\u0275fac=function(r){return new(r||p)(e.rXU(o.ok))};static#s=this.\u0275cmp=e.VBU({type:p,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","webApiType",3,"valueChange"],[3,"value"]],template:function(r,d){if(1&r&&(e.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e.EFF(3,"Endpoint"),e.k0s(),e.j41(4,"mat-select",2),e.bIt("valueChange",function(C){return d.openRestApi(C)}),e.DNE(5,a,2,0),e.nI1(6,"async"),e.k0s()()(),e.nrm(7,"router-outlet")),2&r){let m;e.Y8G("formGroup",d.webApiTypeForm),e.R7$(5),e.vxM(5,(m=e.bMT(6,2,d.webApis$))?5:-1,m)}},dependencies:[u.Ve,_.rl,_.nJ,u.VO,f.wT,c.Hl,I.Hu,O.m_,o.X1,o.qT,o.BC,o.cb,o.j4,o.JD,h.Jj,D.n3,g.p]})}return p})()},9996:(M,E,n)=>{n.d(E,{F:()=>e});var h=n(271),o=n(8873),c=n(7580),I=n(6443),O=n(4821);const A="admin/AppFiles/asset";let e=(()=>{class _{constructor(t,a,s){this.http=t,this.context=a,this.dnnContext=s}get(t,a,s){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(A),{params:{appId:this.context.appId,global:a,...this.templateIdOrPath(t,a,s)}}).pipe((0,h.T)(p=>{if("auto"===p.Type.toLocaleLowerCase())switch(p.Extension.toLocaleLowerCase()){case".cs":case".cshtml":p.Type="Razor";break;case".html":case".css":case".js":p.Type="Token"}return p}))}save(t,a,s,p){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(A),s,{params:{appId:this.context.appId,global:a,...this.templateIdOrPath(t,a,p)}})}getAll(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/AppFiles"),{params:{appId:this.context.appId,...t&&{mask:t}}}).pipe((0,h.T)(({Files:a})=>(a.forEach(s=>{s.Shared??=!1}),a)))}getWebApis(){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/ApiExplorer/AppApiFiles"),{params:{appId:this.context.appId}}).pipe((0,h.T)(({files:t})=>(t.forEach(a=>{a.isShared??=!1,a.isCompiled??=!1}),t))).pipe((0,h.T)(t=>t.map(s=>{const p=s.path.lastIndexOf("/"),l=s.path.lastIndexOf("."),i=s.path.substring(0,p),r=s.path.substring(p+1,l);return{path:s.path,folder:i,name:r,isShared:s.isShared,endpointPath:s.endpointPath,isCompiled:s.isCompiled,edition:s.edition}})))}getWebApiDetails(t){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/ApiExplorer/inspect"),{params:{appId:this.context.appId,zoneId:this.context.zoneId,path:t}})}getPredefinedTemplates(t,a){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/GetTemplates"),{params:{...t&&{purpose:t},...a&&{type:a}}})}getPreview(t,a,s){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/preview"),{params:{appId:this.context.appId,path:t,templateKey:s,global:a}})}create(t,a,s){return this.http.post(this.dnnContext.$2sxc.http.apiUrl("admin/AppFiles/create"),{},{params:{appId:this.context.appId,global:a,purpose:"auto",path:t,templateKey:s}})}templateIdOrPath(t,a,s){if(/^[0-9]*$/g.test(t)){const p=s.find(l=>l.EntityId?.toString()===t&&l.IsShared===a)?.Path;return{templateId:t,...null!=p&&{path:p}}}return{path:t}}static#e=this.\u0275fac=function(a){return new(a||_)(c.KVO(I.Qq),c.KVO(o.o),c.KVO(O.ob))};static#t=this.\u0275prov=c.jDH({token:_,factory:_.\u0275fac})}return _})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts.58925d14d448982b.js.map