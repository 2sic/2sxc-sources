(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{TFsy:function(e,t,i){"use strict";i.r(t),i.d(t,"ImportQueryComponent",(function(){return V}));var n=i("D57K"),o=i("BLjT"),s=i("LiEJ"),c=i("3riI"),r=i("Jg5f"),a=i("1C3z"),l=i("frVg"),p=i("8AiQ"),m=i("8/3+"),u=i("9HSk"),g=i("Qc/f"),f=i("nYrE");function b(e,t){1&e&&a.Qb(0,"mat-spinner",12)}function d(e,t){1&e&&(a.Vb(0,"div",17),a.Oc(1," The import has been done. See the messages below for more information. "),a.Ub())}function h(e,t){1&e&&(a.Vb(0,"div",18),a.Oc(1," The import failed. See the messages below for more information. "),a.Ub())}var x=function(e,t,i){return{"sxc-message-warning":e,"sxc-message-success":t,"sxc-message-error":i}};function I(e,t){if(1&e&&(a.Vb(0,"div",19),a.Oc(1),a.Ub()),2&e){var i=t.$implicit;a.nc("ngClass",a.tc(2,x,0===i.MessageType,1===i.MessageType,2===i.MessageType)),a.Bb(1),a.Qc(" ",i.Text," ")}}function v(e,t){if(1&e&&(a.Vb(0,"div",13),a.Mc(1,d,2,0,"div",14),a.Mc(2,h,2,0,"div",15),a.Mc(3,I,2,6,"div",16),a.Ub()),2&e){var i=a.hc().ngIf;a.Bb(1),a.nc("ngIf",i.importResult.Succeeded),a.Bb(1),a.nc("ngIf",!i.importResult.Succeeded),a.Bb(1),a.nc("ngForOf",i.importResult.Messages)}}function y(e,t){if(1&e){var i=a.Wb();a.Tb(0),a.Vb(1,"button",20),a.dc("click",(function(){return a.Dc(i),a.hc(2).closeDialog()})),a.Oc(2,"Cancel"),a.Ub(),a.Vb(3,"button",21),a.dc("click",(function(){return a.Dc(i),a.hc(2).importQuery()})),a.Oc(4," Import "),a.Ub(),a.Sb()}if(2&e){var n=a.hc().ngIf;a.Bb(3),a.nc("disabled",!n.importFile||n.isImporting||n.importResult)}}function D(e,t){if(1&e){var i=a.Wb();a.Tb(0),a.Vb(1,"button",22),a.dc("click",(function(){return a.Dc(i),a.hc(2).closeDialog()})),a.Oc(2,"Close"),a.Ub(),a.Sb()}}function $(e,t){if(1&e){var i=a.Wb();a.Vb(0,"div",1),a.dc("filesDropped",(function(e){return a.Dc(i),a.hc().filesDropped(e)})),a.Vb(1,"div",2),a.Vb(2,"div",3),a.Oc(3,"Import Query"),a.Ub(),a.Ub(),a.Mc(4,b,1,0,"mat-spinner",4),a.Vb(5,"p",5),a.Oc(6,"Select a query file (json) from your computer to import."),a.Ub(),a.Vb(7,"div"),a.Vb(8,"button",6),a.dc("click",(function(){return a.Dc(i),a.Bc(12).click()})),a.Vb(9,"span"),a.Oc(10),a.Ub(),a.Ub(),a.Vb(11,"input",7,8),a.dc("change",(function(e){return a.Dc(i),a.hc().fileChange(e)})),a.Ub(),a.Ub(),a.Mc(13,v,4,3,"div",9),a.Vb(14,"div",10),a.Mc(15,y,5,1,"ng-container",11),a.Mc(16,D,3,0,"ng-container",11),a.Ub(),a.Ub()}if(2&e){var n=t.ngIf;a.Bb(4),a.nc("ngIf",n.isImporting),a.Bb(4),a.nc("disabled",n.isImporting),a.Bb(2),a.Pc(n.importFile?n.importFile.name:"Select file (or drag and drop)"),a.Bb(3),a.nc("ngIf",n.importResult),a.Bb(2),a.nc("ngIf",!(null!=n.importResult&&n.importResult.Succeeded)),a.Bb(1),a.nc("ngIf",null==n.importResult?null:n.importResult.Succeeded)}}var V=function(){function e(e,t,i){this.dialogData=e,this.dialogRef=t,this.pipelinesService=i,this.hostClass="dialog-component",this.isImporting$=new s.a(!1),this.importFile$=new s.a(null),this.importResult$=new s.a(null),this.templateVars$=Object(c.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe(Object(r.a)((function(e){var t=Object(n.f)(e,3);return{isImporting:t[0],importFile:t[1],importResult:t[2]}})))}return e.prototype.ngOnInit=function(){null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importQuery())},e.prototype.ngOnDestroy=function(){this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.filesDropped=function(e){this.importFile$.next(e[0]),this.importResult$.next(null),this.importQuery()},e.prototype.fileChange=function(e){this.importFile$.next(e.target.files[0]),this.importResult$.next(null)},e.prototype.importQuery=function(){var e=this;this.isImporting$.next(!0),this.pipelinesService.importQuery(this.importFile$.value).subscribe({next:function(t){e.isImporting$.next(!1),e.importResult$.next({Succeeded:!0,Messages:[]})},error:function(t){e.isImporting$.next(!1),e.importResult$.next({Succeeded:!1,Messages:[{Text:t.error.ExceptionMessage,MessageType:2}]})}})},e.\u0275fac=function(t){return new(t||e)(a.Pb(o.a),a.Pb(o.g),a.Pb(l.a))},e.\u0275cmp=a.Jb({type:e,selectors:[["app-import-query"]],hostVars:1,hostBindings:function(e,t){2&e&&a.Yb("className",t.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"filesDropped",4,"ngIf"],["appDragAndDrop","",3,"filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","matTooltip","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(a.Mc(0,$,17,6,"div",0),a.ic(1,"async")),2&e&&a.nc("ngIf",a.jc(1,1,t.templateVars$))},directives:[p.m,m.a,o.h,u.a,g.a,f.b,p.l,p.k],pipes:[p.b],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.00/ng-edit/import-query-component.641424f3d82de34bb0b6.js.map