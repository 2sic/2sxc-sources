(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts"],{5550:function(e,t,i){"use strict";i.r(t),i.d(t,{ViewsUsageComponent:function(){return q}});var n=i(4762),o=i(9206),l=i(8512),a=i(8579),s=i(8838),r=i(1785),d=i(3589),u=i(1116),c=i(7064),p=i(7512),g=i(7307);function h(e,t){if(1&e){var i=r.EpF();r.TgZ(0,"div",1),r.NdJ("click",function(){return r.CHM(i),r.oxw().copy()}),r.TgZ(1,"span",2),r._uU(2),r.qZA(),r.TgZ(3,"mat-icon",3),r._uU(4,"file_copy"),r.qZA(),r.qZA()}if(2&e){var n=r.oxw();r.Q6J("tippy",n.tooltip),r.xp6(2),r.Oqu(n.id)}}var f=function(){function e(e){this.snackBar=e}return e.prototype.agInit=function(e){if(this.tooltip=e.value,null!=this.tooltip){var t=this.tooltip.split("\n")[0];this.id=t.split(" ")[1]}},e.prototype.refresh=function(e){return!0},e.prototype.copy=function(){(0,s.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(r.Y36(d.ux))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","","class","id-box highlight",3,"tippy","click",4,"ngIf"],["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(e,t){1&e&&r.YNc(0,h,5,2,"div",0),2&e&&r.Q6J("ngIf",t.id)},directives:[u.O5,c.wG,p.$,g.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%], .id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),e}(),v=i(7436),m=i(1041),w=function(){function e(){this.isVisible="",this.isDeleted=""}return e.prototype.agInit=function(e){this.params=e},e.prototype.isFilterActive=function(){return""!==this.isVisible||""!==this.isDeleted},e.prototype.doesFilterPass=function(e){var t=!1,i=!1,n=this.params.valueGetter(e.node);return null!=n&&(t=""===this.isVisible||null!=n.IsVisible&&n.IsVisible.toString()===this.isVisible,i=""===this.isDeleted||null!=n.IsDeleted&&n.IsDeleted.toString()===this.isDeleted,t&&i)},e.prototype.getModel=function(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}},e.prototype.setModel=function(e){this.isVisible=e?e.isVisible:"",this.isDeleted=e?e.isDeleted:""},e.prototype.afterGuiAttached=function(e){},e.prototype.filterChanged=function(){this.params.filterChangedCallback()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0),r._uU(1,"Visible"),r.qZA(),r.TgZ(2,"mat-radio-group",1),r.NdJ("ngModelChange",function(e){return t.isVisible=e})("ngModelChange",function(){return t.filterChanged()}),r.TgZ(3,"mat-radio-button",2),r._uU(4,"All"),r.qZA(),r.TgZ(5,"mat-radio-button",3),r._uU(6,"Visible"),r.qZA(),r.TgZ(7,"mat-radio-button",4),r._uU(8,"Hidden"),r.qZA(),r.qZA(),r.TgZ(9,"div",0),r._uU(10,"Deleted"),r.qZA(),r.TgZ(11,"mat-radio-group",1),r.NdJ("ngModelChange",function(e){return t.isDeleted=e})("ngModelChange",function(){return t.filterChanged()}),r.TgZ(12,"mat-radio-button",2),r._uU(13,"All"),r.qZA(),r.TgZ(14,"mat-radio-button",3),r._uU(15,"Is deleted"),r.qZA(),r.TgZ(16,"mat-radio-button",4),r._uU(17,"Is not deleted"),r.qZA(),r.qZA()),2&e&&(r.xp6(2),r.Q6J("ngModel",t.isVisible),r.xp6(9),r.Q6J("ngModel",t.isDeleted))},directives:[v.VQ,m.JJ,m.On,v.U0],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),e}();function b(e){var t=e.data;return"ID: "+t.Block.Id+"\nGUID: "+t.Block.Guid}function y(e){var t=e.data;if(null!=t.Module)return"ID: "+t.Module.Id+"\nUsageId: "+t.Module.UsageId+"\nTitle: "+t.Module.Title}function C(e){return null==e.value?"no-outline":"id-action no-padding no-outline"}function Z(e){var t=e.data;if(null!=t.PageId)return"ID: "+t.PageId}function x(e){return null==e.value?"no-outline":"id-action no-padding no-outline"}function _(e){return null==e.value?"no-outline":"primary-action highlight"}function I(e){null!=e.value&&window.open(e.data.Url,"_blank")}function U(e){var t=e.value;if(null!=t)return'\n    <div style="height: 100%;display: flex;align-items: center;">\n      '+(t.IsVisible?'<span class="material-icons-outlined">visibility</span>':'<span class="material-icons-outlined">visibility_off</span>')+"\n      "+(t.IsDeleted?'<span style="margin-left: 8px;" class="material-icons-outlined">delete</span>':"")+"\n    </div>\n  "}var T=i(2935),A=i(1282),M=i(1916),D=i(4369),k=i(9825),q=function(){function e(e,t,i){this.dialogRef=e,this.route=t,this.viewsService=i,this.viewUsage$=new l.X(null),this.viewTooltip$=new l.X(""),this.data$=new l.X(null),this.modules=o.F$,this.gridOptions=(0,n.pi)((0,n.pi)({},a.f),{frameworkComponents:{viewsUsageIdComponent:f,viewsUsageStatusFilterComponent:w},columnDefs:[{headerName:"Block",field:"Block",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:b},{headerName:"Module",field:"Module",width:76,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:y,cellClass:C},{headerName:"Page",field:"PageId",width:70,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:Z,cellClass:x},{headerName:"Name",field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellClass:_,onCellClicked:I},{headerName:"Language",field:"Language",width:90,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Status",field:"Status",width:80,cellClass:"icon no-outline",filter:"viewsUsageStatusFilterComponent",cellRenderer:U}]})}return e.prototype.ngOnInit=function(){var e=this,t=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(t).subscribe(function(t){var i=t[0];e.viewUsage$.next(i),e.viewTooltip$.next("ID: "+i.Id+"\nGUID: "+i.Guid);var o=function(e){var t,i,o,l,a=[];try{for(var s=(0,n.XA)(e.Blocks),r=s.next();!r.done;r=s.next()){var d=r.value;0===d.Modules.length&&a.push({Block:{Id:d.Id,Guid:d.Guid}});try{for(var u=(o=void 0,(0,n.XA)(d.Modules)),c=u.next();!c.done;c=u.next()){var p=c.value;a.push({Block:{Id:d.Id,Guid:d.Guid},Module:p,PageId:p.Page.Id,Name:p.Page.Name,Url:p.Page.Url,Language:p.Page.CultureCode,Status:{IsVisible:p.Page.Visible,IsDeleted:p.IsDeleted}})}}catch(g){o={error:g}}finally{try{c&&!c.done&&(l=u.return)&&l.call(u)}finally{if(o)throw o.error}}}}catch(h){t={error:h}}finally{try{r&&!r.done&&(i=s.return)&&i.call(s)}finally{if(t)throw t.error}}return a}(i);e.data$.next(o)})},e.prototype.ngOnDestroy=function(){this.viewUsage$.complete(),this.viewTooltip$.complete(),this.data$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(r.Y36(T.so),r.Y36(A.gz),r.Y36(M.h))},e.\u0275cmp=r.Xpm({type:e,selectors:[["app-views-usage"]],decls:22,vars:11,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description"],["href","http://r.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"]],template:function(e,t){var i;1&e&&(r.TgZ(0,"div",0),r.TgZ(1,"div",1),r.TgZ(2,"div",2),r.TgZ(3,"div",3),r.ALo(4,"async"),r._uU(5),r.ALo(6,"async"),r.qZA(),r.TgZ(7,"button",4),r.NdJ("click",function(){return t.closeDialog()}),r.TgZ(8,"mat-icon"),r._uU(9,"close"),r.qZA(),r.qZA(),r.qZA(),r.qZA(),r.TgZ(10,"p",5),r._uU(11," This shows where this view is being used. Read about the "),r.TgZ(12,"a",6),r._uU(13,"connections between DNN and 2sxc Views"),r.qZA(),r._uU(14," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),r.TgZ(15,"em"),r._uU(16,"Before you get confused about some things you see here, do read the FAQ on that page."),r.qZA(),r.qZA(),r._UZ(17,"router-outlet"),r.TgZ(18,"div",7),r._UZ(19,"ag-grid-angular",8),r.ALo(20,"async"),r._UZ(21,"div",9),r.qZA(),r.qZA()),2&e&&(r.xp6(3),r.Q6J("tippy",r.lcZ(4,5,t.viewTooltip$)),r.xp6(2),r.hij("View: ",null==(i=r.lcZ(6,7,t.viewUsage$))?null:i.Name,""),r.xp6(14),r.Q6J("rowData",r.lcZ(20,9,t.data$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[T.uh,p.$,D.lW,g.Hw,A.lC,k.N8],pipes:[u.Ov],styles:[""]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.07.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.6e273507d3d084aa279e.js.map