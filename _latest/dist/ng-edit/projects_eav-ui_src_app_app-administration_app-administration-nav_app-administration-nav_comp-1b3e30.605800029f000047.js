"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_app-administration-nav_app-administration-nav_comp-1b3e30"],{6062:(B,w,r)=>{r.r(w),r.d(w,{AppAdministrationNavComponent:()=>on});var g=r(2977),p=r(6317),s=r(6562),f=r(116),v=r(635),h=r(4874),x=r(7714),I=r(679),m=r(941),F=r(2026);const b={App:"App",Site:"Site",Global:"Global"};var D=r(722),t=r(3184),k=r(5758),C=r(6362),z=r(6108),J=r(7317),A=r(6190),d=r(5590),T=r(2379),u=r(318);let U=(()=>{class o{constructor(e){this.sanitizer=e}transform(e){return this.sanitizer.bypassSecurityTrustResourceUrl(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.H7,16))},o.\u0275pipe=t.Yjl({name:"safeResourceUrl",type:o,pure:!0}),o})(),O=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-getting-started"]],inputs:{gettingStartedUrl:"gettingStartedUrl"},decls:2,vars:3,consts:[[1,"iframe",3,"src"]],template:function(e,n){1&e&&(t._UZ(0,"iframe",0),t.ALo(1,"safeResourceUrl")),2&e&&t.Q6J("src",t.lcZ(1,1,n.gettingStartedUrl),t.uOi)},pipes:[U],styles:[".iframe[_ngcontent-%COMP%]{border:none;width:100%;height:calc(100vh - 209px)}@media (max-width: 600px){.iframe[_ngcontent-%COMP%]{height:calc(100vh - 161px)}}"]}),o})();var E=r(7400),X=r(9295),rt=r(8977),et=r(2188),$=r(2895),nt=r(1745),V=r(2409),G=r(325),j=r(2087),Y=r(4153),it=r(2270),lt=r(9934),P=r(2225),pt=r(7066),ct=r(6619),M=r(1130),Q=r(178),y=r(2796);function dt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().createOrEditMetadata()}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA()()}}function ut(o,a){1&o&&(t.TgZ(0,"div",10)(1,"mat-icon"),t._uU(2,"edit"),t.qZA()())}function mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().openMetadata()}),t.TgZ(1,"mat-icon",12),t._uU(2,"local_offer"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Metadata.length)("matBadgeHidden",!e.contentType.Metadata.length)}}function gt(o,a){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2,"local_offer "),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Metadata.length)("matBadgeHidden",!e.contentType.Metadata.length)}}function _t(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPermissions()}),t.TgZ(1,"mat-icon",12),t._uU(2,"person"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Permissions.Count)("matBadgeHidden",!e.contentType.Permissions.Count)}}function ft(o,a){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2,"person"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Permissions.Count)("matBadgeHidden",!e.contentType.Permissions.Count)}}function ht(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().editContentType()}),t.TgZ(1,"mat-icon"),t._uU(2,"settings"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Rename"),t.qZA()(),t.TgZ(5,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openRestApi()}),t._UZ(6,"mat-icon",17),t.TgZ(7,"span"),t._uU(8,"REST API"),t.qZA()(),t.TgZ(9,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportType()}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_download"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"Export content type"),t.qZA()(),t.TgZ(14,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDataExport()}),t.TgZ(15,"mat-icon"),t._uU(16,"cloud_download"),t.qZA(),t.TgZ(17,"span"),t._uU(18,"Export data"),t.qZA()(),t.TgZ(19,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().openDataImport()}),t.TgZ(20,"mat-icon"),t._uU(21,"cloud_upload"),t.qZA(),t.TgZ(22,"span"),t._uU(23,"Import data"),t.qZA()(),t.TgZ(24,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteContentType()}),t.TgZ(25,"mat-icon"),t._uU(26,"delete"),t.qZA(),t.TgZ(27,"span"),t._uU(28,"Delete"),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.contentType.EditInfo.ReadOnly),t.xp6(24),t.Q6J("disabled",e.contentType.EditInfo.ReadOnly)}}let Ct=(()=>{class o{agInit(e){this.params=e,this.contentType=this.params.data;const n=this.params.enablePermissionsGetter();this.enablePermissions=n&&(0,ct.M)().test(this.contentType.StaticName)}refresh(e){return!0}createOrEditMetadata(){this.params.onCreateOrEditMetadata(this.contentType)}openPermissions(){this.params.onOpenPermissions(this.contentType)}editContentType(){this.params.onEdit(this.contentType)}openMetadata(){this.params.onOpenMetadata(this.contentType)}openRestApi(){this.params.onOpenRestApi(this.contentType)}exportType(){this.params.onTypeExport(this.contentType)}openDataExport(){this.params.onOpenDataExport(this.contentType)}openDataImport(){this.params.onOpenDataImport(this.contentType)}deleteContentType(){this.params.onDelete(this.contentType)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-actions"]],decls:13,vars:7,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Description and more",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Description and more",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,dt,3,0,"div",1),t.YNc(2,ut,3,0,"div",2),t.YNc(3,mt,3,2,"div",3),t.YNc(4,gt,3,2,"div",2),t.YNc(5,_t,3,2,"div",4),t.YNc(6,ft,3,2,"div",2),t.TgZ(7,"div",5)(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA()()(),t.TgZ(10,"mat-menu",6,7),t.YNc(12,ht,29,2,"ng-template",8),t.qZA()),2&e){const i=t.MAs(11);t.xp6(1),t.Q6J("ngIf",!n.contentType.EditInfo.ReadOnly||n.contentType.Properties),t.xp6(1),t.Q6J("ngIf",n.contentType.EditInfo.ReadOnly&&!n.contentType.Properties),t.xp6(1),t.Q6J("ngIf",!n.contentType.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",n.contentType.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",!n.contentType.EditInfo.ReadOnly&&n.enablePermissions),t.xp6(1),t.Q6J("ngIf",n.contentType.EditInfo.ReadOnly||!n.enablePermissions),t.xp6(1),t.Q6J("matMenuTriggerFor",i)}},directives:[C.O5,M.wG,A.$,d.Hw,Q.k,y.p6,y.VK,y.KA,y.OP],styles:[""]}),o})(),Tt=(()=>{class o{agInit(e){this.params=e,this.contentType=e.data,this.value=e.value,this.tooltip=this.contentType.EditInfo.ReadOnly?`${this.contentType.EditInfo.ReadOnlyMessage?`${this.contentType.EditInfo.ReadOnlyMessage}\n\n`:""}This ContentType shares the definition of #${this.contentType.SharedDefId} so you can't edit it here. Read 2sxc.org/help?tag=shared-types`:"Edit fields",this.icon=this.contentType.EditInfo.ReadOnly?"share":"dns"}refresh(e){return!0}editFields(){this.params.onEditFields(this.contentType)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-fields"]],decls:4,vars:4,consts:[[1,"actions-component"],["matRipple","",1,"like-button","highlight",3,"tippy","click"],["matBadgePosition","below after","matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.editFields()}),t.TgZ(2,"mat-icon",2),t._uU(3),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("tippy",n.tooltip),t.xp6(1),t.Q6J("matBadge",n.value)("matBadgeHidden",!n.value),t.xp6(1),t.hij(" ",n.icon," "))},directives:[M.wG,A.$,d.Hw,Q.k],styles:[""]}),o})(),vt=(()=>{class o{agInit(e){this.params=e,this.contentType=e.data,this.value=e.value}refresh(e){return!0}showItems(){this.params.onShowItems(this.contentType)}addItem(){this.params.onAddItem(this.contentType)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-data-items"]],decls:7,vars:2,consts:[[1,"actions-component"],["matRipple","",1,"like-button","highlight",3,"tippy","click"],[1,"text-icon"],["matRipple","","tippy","Add item",1,"like-button","highlight",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.showItems()}),t.TgZ(2,"div",2),t._uU(3),t.qZA()(),t.TgZ(4,"div",3),t.NdJ("click",function(){return n.addItem()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()()()),2&e&&(t.xp6(1),t.MGl("tippy","",n.value," items"),t.xp6(2),t.Oqu(n.value))},directives:[M.wG,A.$,d.Hw],styles:[".text-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px;line-height:22px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border:1px solid rgba(29,39,61,.44);border-radius:12px;box-sizing:border-box;background-color:#002753;color:#fff;-webkit-user-select:none;user-select:none}.text-icon[_ngcontent-%COMP%]{min-width:24px;width:initial}"]}),o})();var R=r(2528),W=r(1350),tt=r(5982),bt=r(4770),At=r(1434),H=r(587);function yt(o,a){if(1&o&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&o){const e=a.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ","Scope: "+e.name," ")}}function xt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(e),t.oxw().createGhost()}),t.TgZ(1,"mat-icon"),t._uU(2,"share"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Ghost"),t.qZA()()}}let Zt=(()=>{class o{constructor(e,n,i,l,c,_){this.router=e,this.route=n,this.contentTypesService=i,this.globalConfigService=l,this.snackBar=c,this.contentExportService=_,this.contentTypes$=new p.X(void 0),this.scope$=new p.X(void 0),this.scopeOptions$=new p.X([]),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.gridOptions=this.buildGridOptions(),this.dropdownInsertValue=it.G,this.subscription=new x.w0}ngOnInit(){this.fetchScopes(),this.refreshScopeOnRouteChange(),this.refreshOnChildClosed()}ngOnDestroy(){this.contentTypes$.complete(),this.scope$.complete(),this.scopeOptions$.complete(),this.subscription.unsubscribe()}filesDropped(e){const n=e[0];switch(n.name.substring(n.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":(0,E.D)((0,lt.B)(e[0])).pipe((0,X.q)(1)).subscribe(l=>{var c;const _=null===(c=l.split('<Entity Type="')[1])||void 0===c?void 0:c.split('"')[0],Z=this.contentTypes$.value.find(N=>N.Name===_);null!=Z?this.openDataImport(Z,e):this.snackBar.open(`Cannot find Content Type named '${_}'. Please open Content Type Import dialog manually.`,null,{duration:5e3})});break;case"json":this.importType(e)}}importType(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}showContentItems(e){this.router.navigate([`items/${e.StaticName}`],{relativeTo:this.route.firstChild})}editContentType(e){if(e){if(e.EditInfo.ReadOnly)return;this.router.navigate([`${e.StaticName}/edit`],{relativeTo:this.route.firstChild})}else this.router.navigate(["add"],{relativeTo:this.route.firstChild})}fetchContentTypes(){this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(e=>{for(const n of e)n._compareLabel=n.Label.replace(/\p{Emoji}/gu,"\u017e");this.contentTypes$.next(e),this.scope$.value!==m.Z.scopes.default.value&&this.snackBar.open("Warning! You are in a special scope. Changing things here could easily break functionality",null,{duration:2e3})})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{const n=[...this.scopeOptions$.value];e.forEach(i=>{const l=n.find(c=>c.value===i.value);l?l.name=i.name:n.push(i)}),this.scopeOptions$.next(n)})}createGhost(){const e=window.prompt("To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost");!e||(this.snackBar.open("Saving..."),this.contentTypesService.createGhost(e).subscribe(n=>{this.snackBar.open("Saved",null,{duration:2e3}),this.fetchContentTypes()}))}changeScope(e){e===it.G&&(e=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||m.Z.scopes.default.value),this.router.navigate([`data/${e}`],{relativeTo:this.route})}enablePermissionsGetter(){return this.enablePermissions}addItem(e){const i=(0,P.f)({items:[{ContentTypeName:e.StaticName}]});this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}editFields(e){this.router.navigate([`fields/${e.StaticName}`],{relativeTo:this.route.firstChild})}createOrEditMetadata(e){const i=(0,P.f)({items:[e.Properties?{EntityId:e.Properties.Id}:{ContentTypeName:m.Z.contentTypes.contentType,For:{Target:m.Z.metadata.contentType.target,TargetType:m.Z.metadata.contentType.targetType,String:e.StaticName},Prefill:{Label:e.Name,Description:e.Description}}]});this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}openMetadata(e){const n=V.U.getUrlContentType(e.StaticName,`Metadata for Content Type: ${e.Name} (${e.Id})`);this.router.navigate([n],{relativeTo:this.route.firstChild})}openRestApi(e){this.router.navigate([$.i.getUrlData(e)],{relativeTo:this.route.firstChild})}exportType(e){this.contentExportService.exportJson(e.StaticName)}openDataExport(e){this.router.navigate([`export/${e.StaticName}`],{relativeTo:this.route.firstChild})}openDataImport(e,n){this.router.navigate([`${e.StaticName}/import`],{relativeTo:this.route.firstChild,state:{files:n}})}openPermissions(e){this.router.navigate([G.i.getUrlContentType(e.StaticName)],{relativeTo:this.route.firstChild})}deleteContentType(e){!confirm(`Are you sure you want to delete '${e.Name}' (${e.Id})?`)||(this.snackBar.open("Deleting..."),this.contentTypesService.delete(e).subscribe(n=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchContentTypes()}))}refreshScopeOnRouteChange(){this.subscription.add(this.router.events.pipe((0,f.h)(e=>e instanceof g.m2),(0,v.U)(()=>this.route.snapshot.firstChild.paramMap.get("scope")),(0,h.O)(this.route.snapshot.firstChild.paramMap.get("scope")),(0,f.h)(e=>!!e),(0,rt.x)()).subscribe(e=>{this.scope$.next(e),this.scopeOptions$.value.map(n=>n.value).includes(e)||this.scopeOptions$.next([...this.scopeOptions$.value,{name:e,value:e}]),this.fetchContentTypes()}))}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,f.h)(e=>e instanceof g.m2),(0,h.O)(!!this.route.snapshot.firstChild.firstChild),(0,v.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,I.G)(),(0,f.h)(([e,n])=>e&&!n)).subscribe(()=>{this.fetchContentTypes()}))}buildGridOptions(){return Object.assign(Object.assign({},Y.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:n=>("id-action no-padding no-outline "+(n.data.EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:n=>n.data.Id,cellRenderer:j.m,cellRendererParams:{tooltipGetter:i=>`ID: ${i.Id}\nGUID: ${i.StaticName}`}},{headerName:"Content Type",field:"ContentType",flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:n=>{this.showContentItems(n.data)},valueGetter:n=>n.data.Label,comparator:(n,i,l,c,_)=>l.data._compareLabel.localeCompare(c.data._compareLabel)},{field:"Items",width:102,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:n=>n.data.Items,cellRenderer:vt,cellRendererParams:(()=>({onShowItems:i=>this.showContentItems(i),onAddItem:i=>this.addItem(i)}))()},{field:"Fields",width:94,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter",valueGetter:n=>n.data.Fields,cellRenderer:Tt,cellRendererParams:(()=>({onEditFields:i=>this.editFields(i)}))()},{field:"Name",flex:1,minWidth:100,sortable:!0,filter:"agTextColumnFilter",cellClass:n=>(n.data.EditInfo.ReadOnly?"no-outline":"primary-action highlight").split(" "),valueGetter:n=>n.data.Name,onCellClicked:n=>{this.editContentType(n.data)}},{field:"Description",flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>{var i;return null===(i=n.data.Properties)||void 0===i?void 0:i.Description}},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:Ct,cellRendererParams:(()=>({enablePermissionsGetter:()=>this.enablePermissionsGetter(),onCreateOrEditMetadata:i=>this.createOrEditMetadata(i),onOpenPermissions:i=>this.openPermissions(i),onEdit:i=>this.editContentType(i),onOpenRestApi:i=>this.openRestApi(i),onOpenMetadata:i=>this.openMetadata(i),onTypeExport:i=>this.exportType(i),onOpenDataExport:i=>this.openDataExport(i),onOpenDataImport:i=>this.openDataImport(i),onDelete:i=>this.deleteContentType(i)}))()}]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(pt.s),t.Y36(nt.bE),t.Y36(R.ux),t.Y36(et.i))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-data"]],inputs:{enablePermissions:"enablePermissions"},decls:21,vars:15,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["appearance","standard","color","accent",1,"scope-dropdown"],["name","Scope",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-button","","tippy","Import content type",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Create a new content type",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"ag-grid-angular",1),t.NdJ("filesDropped",function(l){return n.filesDropped(l)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-select",4),t.NdJ("ngModelChange",function(l){return n.changeScope(l)}),t.ALo(6,"async"),t.YNc(7,yt,2,2,"mat-option",5),t.ALo(8,"async"),t.TgZ(9,"mat-option",6),t._uU(10,"Scope: Other..."),t.qZA()()(),t.TgZ(11,"button",7),t.NdJ("click",function(){return n.importType()}),t.TgZ(12,"mat-icon"),t._uU(13,"cloud_upload"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Content Type"),t.qZA()(),t.YNc(16,xt,5,0,"button",8),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return n.editContentType(null)}),t.TgZ(19,"mat-icon"),t._uU(20,"add"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,7,n.contentTypes$))("gridOptions",n.gridOptions)("allowedFileTypes","xml,json"),t.xp6(4),t.Q6J("ngModel",t.lcZ(6,9,n.scope$)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,11,n.scopeOptions$)),t.xp6(2),t.Q6J("value",n.dropdownInsertValue),t.xp6(7),t.Q6J("ngIf",t.lcZ(17,13,n.debugEnabled$)))},directives:[W.N8,tt.z,bt.KE,At.gD,H.JJ,H.On,C.sg,M.ey,J.lW,A.$,d.Hw,C.O5],pipes:[C.Ov],styles:[".scope-dropdown[_ngcontent-%COMP%]{width:200px;margin-top:-14px;font-size:14px;height:auto}"]}),o})();var L=r(6500),St=r(3506),S=(()=>{return(o=S||(S={}))[o.Edit=0]="Edit",o[o.Metadata=1]="Metadata",o[o.Rest=2]="Rest",o[o.Clone=3]="Clone",o[o.Permissions=4]="Permissions",o[o.Export=5]="Export",o[o.Delete=6]="Delete",S;var o})();function It(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.params.do(i.actions.Metadata,i.item)}),t.TgZ(1,"mat-icon",10),t._uU(2,"local_offer"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",null==e.item.Metadata?null:e.item.Metadata.length)("matBadgeHidden",!(null!=e.item.Metadata&&e.item.Metadata.length))}}function kt(o,a){if(1&o&&(t.TgZ(0,"div",11)(1,"mat-icon",12),t._uU(2,"local_offer"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",null==e.item.Metadata?null:e.item.Metadata.length)("matBadgeHidden",!(null!=e.item.Metadata&&e.item.Metadata.length))}}function Ut(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.params.do(i.actions.Permissions,i.item)}),t.TgZ(1,"mat-icon",10),t._uU(2,"person"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.item._Permissions.Count)("matBadgeHidden",!e.item._Permissions.Count)}}function Nt(o,a){if(1&o&&(t.TgZ(0,"div",11)(1,"mat-icon",12),t._uU(2,"person"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.item._Permissions.Count)("matBadgeHidden",!e.item._Permissions.Count)}}function Jt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.params.do(i.actions.Rest,i.item)}),t._UZ(1,"mat-icon",15),t.TgZ(2,"span"),t._uU(3,"REST API"),t.qZA()(),t.TgZ(4,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.params.do(i.actions.Clone,i.item)}),t.TgZ(5,"mat-icon"),t._uU(6,"file_copy"),t.qZA(),t.TgZ(7,"span"),t._uU(8,"Copy"),t.qZA()(),t.TgZ(9,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.params.do(i.actions.Export,i.item)}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_download"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"Export"),t.qZA()(),t.TgZ(14,"button",16),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.params.do(i.actions.Delete,i.item)}),t.TgZ(15,"mat-icon"),t._uU(16,"delete"),t.qZA(),t.TgZ(17,"span"),t._uU(18,"Delete"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(14),t.Q6J("disabled",e.item._EditInfo.ReadOnly)}}let Ot=(()=>{class o extends class wt{agInit(a){this.params=a,this.item=this.params.data}refresh(a){return!0}}{constructor(){super(...arguments),this.actions=S}agInit(e){super.agInit(e),this.enablePermissions=this.params.getEnablePermissions()}}return o.\u0275fac=function(){let a;return function(n){return(a||(a=t.n5z(o)))(n||o)}}(),o.\u0275cmp=t.Xpm({type:o,selectors:[["app-queries-actions"]],features:[t.qOj],decls:14,vars:5,consts:[[1,"actions-component"],["matRipple","","tippy","Edit",1,"like-button","highlight",3,"click"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after",3,"matBadge","matBadgeHidden"],[1,"like-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["mat-menu-item","",3,"disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.params.do(n.actions.Edit,n.item)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA()(),t.YNc(4,It,3,2,"div",2),t.YNc(5,kt,3,2,"div",3),t.YNc(6,Ut,3,2,"div",4),t.YNc(7,Nt,3,2,"div",3),t.TgZ(8,"div",5)(9,"mat-icon"),t._uU(10,"more_horiz"),t.qZA()()(),t.TgZ(11,"mat-menu",6,7),t.YNc(13,Jt,19,1,"ng-template",8),t.qZA()),2&e){const i=t.MAs(12);t.xp6(4),t.Q6J("ngIf",!n.item._EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",n.item._EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",!n.item._EditInfo.ReadOnly&&n.enablePermissions),t.xp6(1),t.Q6J("ngIf",n.item._EditInfo.ReadOnly||!n.enablePermissions),t.xp6(1),t.Q6J("matMenuTriggerFor",i)}},directives:[M.wG,A.$,d.Hw,C.O5,Q.k,y.p6,y.VK,y.KA,y.OP],encapsulation:2}),o})(),Dt=(()=>{class o{constructor(e,n,i,l,c,_){this.router=e,this.route=n,this.pipelinesService=i,this.contentExportService=l,this.snackBar=c,this.dialogService=_,this.queries$=new p.X(void 0),this.gridOptions=this.buildGridOptions(),this.subscription=new x.w0}ngOnInit(){this.fetchQueries(),this.refreshOnChildClosed()}ngOnDestroy(){this.queries$.complete(),this.subscription.unsubscribe()}fetchQueries(){this.pipelinesService.getAll(m.Z.contentTypes.query).subscribe(e=>{this.queries$.next(e)})}importQuery(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}doMenuAction(e,n){switch(e){case S.Edit:return this.editQuery(n);case S.Metadata:return this.openMetadata(n);case S.Rest:return this.router.navigate([$.i.getUrlQuery(n.Guid)],{relativeTo:this.route.firstChild});case S.Clone:return this.cloneQuery(n);case S.Permissions:return this.openPermissions(n);case S.Export:return this.exportQuery(n);case S.Delete:return this.deleteQuery(n)}}editQuery(e){const i=(0,P.f)({items:[null==e?{ContentTypeName:m.Z.contentTypes.query,Prefill:{TestParameters:m.Z.pipelineDesigner.testParameters}}:{EntityId:e.Id}]});this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}enablePermissionsGetter(){return this.enablePermissions}openVisualQueryDesigner(e){e._EditInfo.ReadOnly||this.dialogService.openQueryDesigner(e.Id)}openMetadata(e){const n=V.U.getUrlEntity(e.Guid,`Metadata for Query: ${e.Name} (${e.Id})`);this.router.navigate([n],{relativeTo:this.route.firstChild})}cloneQuery(e){this.snackBar.open("Copying..."),this.pipelinesService.clonePipeline(e.Id).subscribe(()=>{this.snackBar.open("Copied",null,{duration:2e3}),this.fetchQueries()})}openPermissions(e){this.router.navigate([G.i.getUrlEntity(e.Guid)],{relativeTo:this.route.firstChild})}exportQuery(e){this.contentExportService.exportEntity(e.Id,"Query",!0)}deleteQuery(e){!confirm(`Delete Pipeline '${e.Name}' (${e.Id})?`)||(this.snackBar.open("Deleting..."),this.pipelinesService.delete(e.Id).subscribe(n=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchQueries()}))}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,f.h)(e=>e instanceof g.m2),(0,h.O)(!!this.route.snapshot.firstChild.firstChild),(0,v.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,I.G)(),(0,f.h)(([e,n])=>e&&!n)).subscribe(()=>{this.fetchQueries()}))}buildGridOptions(){return Object.assign(Object.assign({},Y.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:n=>("id-action no-padding no-outline "+(n.data._EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:n=>n.data.Id,cellRenderer:j.m,cellRendererParams:{tooltipGetter:i=>`ID: ${i.Id}\nGUID: ${i.Guid}`}},{field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellClass:n=>(n.data._EditInfo.ReadOnly?"no-outline":"primary-action highlight").split(" "),onCellClicked:n=>{this.openVisualQueryDesigner(n.data)},valueGetter:n=>n.data.Name},{field:"Description",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.Description},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:Ot,cellRendererParams:(()=>({getEnablePermissions:()=>this.enablePermissionsGetter(),do:(i,l)=>this.doMenuAction(i,l)}))()}]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(St.vG),t.Y36(et.i),t.Y36(R.ux),t.Y36(L.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-queries"]],inputs:{enablePermissions:"enablePermissions"},decls:12,vars:5,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Import query",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Create a new query",1,"grid-fab",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"ag-grid-angular",1),t.NdJ("filesDropped",function(l){return n.importQuery(l)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return n.importQuery()}),t.TgZ(5,"mat-icon"),t._uU(6,"cloud_upload"),t.qZA(),t.TgZ(7,"span"),t._uU(8,"Query"),t.qZA()()(),t.TgZ(9,"button",4),t.NdJ("click",function(){return n.editQuery(null)}),t.TgZ(10,"mat-icon"),t._uU(11,"add"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,3,n.queries$))("gridOptions",n.gridOptions)("allowedFileTypes","json"))},directives:[W.N8,tt.z,J.lW,A.$,d.Hw],pipes:[C.Ov],styles:[""]}),o})();var ot=r(5958),Pt=r(8930);function Mt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().openCode()}),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA()()}}function Ft(o,a){1&o&&(t.TgZ(0,"div",10)(1,"mat-icon"),t._uU(2,"code"),t.qZA()())}function Qt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().openMetadata()}),t.TgZ(1,"mat-icon",12),t._uU(2,"local_offer"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Metadata.length)("matBadgeHidden",!e.view.Metadata.length)}}function Rt(o,a){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2,"local_offer"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Metadata.length)("matBadgeHidden",!e.view.Metadata.length)}}function qt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",14),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPermissions()}),t.TgZ(1,"mat-icon",12),t._uU(2,"person"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Permissions.Count)("matBadgeHidden",!e.view.Permissions.Count)}}function Bt(o,a){if(1&o&&(t.TgZ(0,"div",10)(1,"mat-icon",13),t._uU(2,"person"),t.qZA()()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Permissions.Count)("matBadgeHidden",!e.view.Permissions.Count)}}function Vt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().cloneView()}),t.TgZ(1,"mat-icon"),t._uU(2,"file_copy"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Copy"),t.qZA()(),t.TgZ(5,"button",15),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportView()}),t.TgZ(6,"mat-icon"),t._uU(7,"cloud_download"),t.qZA(),t.TgZ(8,"span"),t._uU(9,"Export"),t.qZA()(),t.TgZ(10,"button",16),t.NdJ("click",function(){return t.CHM(e),t.oxw().deleteView()}),t.TgZ(11,"mat-icon"),t._uU(12,"delete"),t.qZA(),t.TgZ(13,"span"),t._uU(14,"Delete"),t.qZA()()}if(2&o){const e=t.oxw();t.xp6(10),t.Q6J("disabled",e.view.EditInfo.ReadOnly)}}let Gt=(()=>{class o{agInit(e){this.params=e,this.view=this.params.data,this.enableCode=this.params.enableCodeGetter(),this.enablePermissions=this.params.enablePermissionsGetter()}refresh(e){return!0}openCode(){this.params.onOpenCode(this.view)}openPermissions(){this.params.onOpenPermissions(this.view)}openMetadata(){this.params.onOpenMetadata(this.view)}cloneView(){this.params.onClone(this.view)}exportView(){this.params.onExport(this.view)}deleteView(){this.params.onDelete(this.view)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-views-actions"]],decls:13,vars:7,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,Mt,3,0,"div",1),t.YNc(2,Ft,3,0,"div",2),t.YNc(3,Qt,3,2,"div",3),t.YNc(4,Rt,3,2,"div",2),t.YNc(5,qt,3,2,"div",4),t.YNc(6,Bt,3,2,"div",2),t.TgZ(7,"div",5)(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA()()(),t.TgZ(10,"mat-menu",6,7),t.YNc(12,Vt,15,1,"ng-template",8),t.qZA()),2&e){const i=t.MAs(11);t.xp6(1),t.Q6J("ngIf",!n.view.EditInfo.ReadOnly&&n.enableCode),t.xp6(1),t.Q6J("ngIf",n.view.EditInfo.ReadOnly||!n.enableCode),t.xp6(1),t.Q6J("ngIf",!n.view.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",n.view.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",!n.view.EditInfo.ReadOnly&&n.enablePermissions),t.xp6(1),t.Q6J("ngIf",n.view.EditInfo.ReadOnly||!n.enablePermissions),t.xp6(1),t.Q6J("matMenuTriggerFor",i)}},directives:[C.O5,M.wG,A.$,d.Hw,Q.k,y.p6,y.VK,y.KA,y.OP],styles:[""]}),o})(),Yt=(()=>{class o{agInit(e){this.value=e.value}refresh(e){return!0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-views-show"]],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"mat-icon"),t._uU(2),t.qZA()()),2&e&&(t.xp6(2),t.Oqu(n.value?"visibility":"visibility_off"))},directives:[d.Hw],styles:[""]}),o})();function at(o){let a="",e="";return o.HasQuery?(a="Data (from query)",e="filter_list"):o.List?(a="Items (list)",e="format_list_numbered"):o.ContentType||o.HasQuery?o.List||(a="Item (one)",e="looks_one"):(a="Code",e="check_box_outline_blank"),{value:a,icon:e}}function Wt(o,a){1&o&&(t.TgZ(0,"div",3)(1,"mat-icon"),t._uU(2,"share"),t.qZA()())}let Ht=(()=>{class o{agInit(e){this.value=e.value;const n=e.data,i=at(n);this.icon=i.icon,this.isShared=n.IsShared}refresh(e){return!0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-views-type"]],decls:5,vars:3,consts:[[1,"icon-container"],[1,"like-button","icon",3,"tippy"],["class","like-button icon","tippy","View is shared",4,"ngIf"],["tippy","View is shared",1,"like-button","icon"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"mat-icon"),t._uU(3),t.qZA()(),t.YNc(4,Wt,3,0,"div",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("tippy",n.value),t.xp6(2),t.Oqu(n.icon),t.xp6(1),t.Q6J("ngIf",n.isShared))},directives:[A.$,d.Hw,C.O5],styles:[""]}),o})(),Lt=(()=>{class o{constructor(e,n,i,l,c){this.viewsService=e,this.router=n,this.route=i,this.snackBar=l,this.dialogService=c,this.views$=new p.X(void 0),this.polymorphStatus$=new p.X(void 0),this.polymorphLogo="data:image/png;base64,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",this.gridOptions=this.buildGridOptions(),this.subscription=new x.w0}ngOnInit(){this.fetchTemplates(),this.fetchPolymorphism(),this.refreshOnChildClosed()}ngOnDestroy(){this.views$.complete(),this.polymorphStatus$.complete(),this.subscription.unsubscribe()}importView(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}fetchTemplates(){this.viewsService.getAll().subscribe(e=>{this.views$.next(e)})}fetchPolymorphism(){this.viewsService.getPolymorphism().subscribe(e=>{this.polymorphism=e,this.polymorphStatus$.next(null===e.Id?"not configured":null===e.Resolver?"disabled":"using "+e.Resolver)})}editView(e){const n={items:[null==e?{ContentTypeName:m.Z.contentTypes.template,Prefill:Object.assign({},this.appIsGlobal&&{Location:"Global"})}:{EntityId:e.Id}]},i=(0,P.f)(n);this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}editPolymorphisms(){if(!this.polymorphism)return;const n=(0,P.f)({items:[this.polymorphism.Id?{EntityId:this.polymorphism.Id}:{ContentTypeName:this.polymorphism.TypeName}]});this.router.navigate([`edit/${n}`],{relativeTo:this.route.firstChild})}enableCodeGetter(){return this.enableCode}enablePermissionsGetter(){return this.enablePermissions}openUsage(e){this.router.navigate([`usage/${e.Guid}`],{relativeTo:this.route.firstChild})}openCode(e){this.dialogService.openCodeFile(e.TemplatePath,e.IsShared,e.Id)}openPermissions(e){this.router.navigate([G.i.getUrlEntity(e.Guid)],{relativeTo:this.route.firstChild})}openMetadata(e){const n=V.U.getUrlEntity(e.Guid,`Metadata for View: ${e.Name} (${e.Id})`);this.router.navigate([n],{relativeTo:this.route.firstChild})}cloneView(e){const i=(0,P.f)({items:[{ContentTypeName:m.Z.contentTypes.template,DuplicateEntity:e.Id}]});this.router.navigate([`edit/${i}`],{relativeTo:this.route.firstChild})}exportView(e){this.viewsService.export(e.Id)}deleteView(e){!confirm(`Delete '${e.Name}' (${e.Id})?`)||(this.snackBar.open("Deleting..."),this.viewsService.delete(e.Id).subscribe(n=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchTemplates()}))}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,f.h)(e=>e instanceof g.m2),(0,h.O)(!!this.route.snapshot.firstChild.firstChild),(0,v.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,I.G)(),(0,f.h)(([e,n])=>e&&!n)).subscribe(()=>{this.fetchTemplates(),this.fetchPolymorphism()}))}buildGridOptions(){return Object.assign(Object.assign({},Y.f),{columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:n=>("id-action no-padding no-outline "+(n.data.EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:n=>n.data.Id,cellRenderer:j.m,cellRendererParams:{tooltipGetter:i=>`ID: ${i.Id}\nGUID: ${i.Guid}`}},{field:"Show",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:ot.U,valueGetter:n=>!n.data.IsHidden,cellRenderer:Yt},{field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:n=>{this.editView(n.data)},valueGetter:n=>n.data.Name},{field:"Type",width:82,headerClass:"dense",cellClass:"no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>at(n.data).value,cellRenderer:Ht},{field:"Used",width:70,headerClass:"dense",cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agNumberColumnFilter",onCellClicked:n=>{this.openUsage(n.data)},valueGetter:n=>n.data.Used},{headerName:"Url Key",field:"UrlKey",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.ViewNameInUrl},{field:"Path",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.TemplatePath},{field:"Content",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.ContentType.Name},{headerName:"Default",field:"ContentDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>{const i=n.data;return`${i.ContentType.DemoId} ${i.ContentType.DemoTitle}`}},{field:"Presentation",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.PresentationType.Name},{headerName:"Default",field:"PresentationDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>{const i=n.data;return`${i.PresentationType.DemoId} ${i.PresentationType.DemoTitle}`}},{field:"Header",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.ListContentType.Name},{headerName:"Default",field:"HeaderDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>{const i=n.data;return`${i.ListContentType.DemoId} ${i.ListContentType.DemoTitle}`}},{headerName:"Header Presentation",field:"HeaderPresentation",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.ListPresentationType.Name},{headerName:"Default",field:"HeaderPresentationDemo",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>{const i=n.data;return`${i.ListPresentationType.DemoId} ${i.ListPresentationType.DemoTitle}`}},{width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:Gt,cellRendererParams:(()=>({enableCodeGetter:()=>this.enableCodeGetter(),enablePermissionsGetter:()=>this.enablePermissionsGetter(),onOpenCode:i=>this.openCode(i),onOpenPermissions:i=>this.openPermissions(i),onOpenMetadata:i=>this.openMetadata(i),onClone:i=>this.cloneView(i),onExport:i=>this.exportView(i),onDelete:i=>this.deleteView(i)}))()}]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Pt.h),t.Y36(g.F0),t.Y36(g.gz),t.Y36(R.ux),t.Y36(L.x))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-views"]],inputs:{enableCode:"enableCode",enablePermissions:"enablePermissions",appIsGlobal:"appIsGlobal",appIsInherited:"appIsInherited"},decls:17,vars:10,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Configure polymorphism",1,"polymorph-button",3,"disabled","click"],[1,"polymorph-logo",3,"src"],["mat-button","","tippy","Import view",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Create a new view",1,"grid-fab",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"ag-grid-angular",1),t.NdJ("filesDropped",function(l){return n.importView(l)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2)(4,"button",3),t.NdJ("click",function(){return n.editPolymorphisms()}),t._UZ(5,"img",4),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"async"),t.qZA()(),t.TgZ(9,"button",5),t.NdJ("click",function(){return n.importView()}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_upload"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"View"),t.qZA()()(),t.TgZ(14,"button",6),t.NdJ("click",function(){return n.editView(null)}),t.TgZ(15,"mat-icon"),t._uU(16,"add"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,6,n.views$))("gridOptions",n.gridOptions)("allowedFileTypes","json"),t.xp6(3),t.Q6J("disabled",n.appIsInherited),t.xp6(1),t.Q6J("src",n.polymorphLogo,t.LSH),t.xp6(2),t.hij("Polymorphism ",t.lcZ(8,8,n.polymorphStatus$),""))},directives:[W.N8,tt.z,J.lW,A.$,d.Hw],pipes:[C.Ov],styles:[".polymorph-logo[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:4px}.polymorph-button[disabled][_ngcontent-%COMP%]   .polymorph-logo[_ngcontent-%COMP%]{opacity:33%;filter:grayscale(1)}"]}),o})();var Kt=r(7207),st=r(7383);function zt(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",7),t.NdJ("click",function(){return t.CHM(e),t.oxw().openCode()}),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA()()}}function Xt(o,a){1&o&&(t.TgZ(0,"div",8)(1,"mat-icon"),t._uU(2,"code"),t.qZA()())}function $t(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){return t.CHM(e),t.oxw().openRestApi()}),t._UZ(1,"mat-icon",10),t.TgZ(2,"span"),t._uU(3,"REST API"),t.qZA()()}}let jt=(()=>{class o{agInit(e){this.params=e,this.enableCode=this.params.enableCodeGetter()}refresh(e){return!0}openCode(){this.params.onOpenCode(this.params.data)}openRestApi(){this.params.onOpenRestApi(this.params.data)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-web-api-actions"]],decls:9,vars:3,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["matRipple","","tippy","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,zt,3,0,"div",1),t.YNc(2,Xt,3,0,"div",2),t.TgZ(3,"div",3)(4,"mat-icon"),t._uU(5,"more_horiz"),t.qZA()()(),t.TgZ(6,"mat-menu",4,5),t.YNc(8,$t,4,0,"ng-template",6),t.qZA()),2&e){const i=t.MAs(7);t.xp6(1),t.Q6J("ngIf",n.enableCode),t.xp6(1),t.Q6J("ngIf",!n.enableCode),t.xp6(1),t.Q6J("matMenuTriggerFor",i)}},directives:[C.O5,M.wG,A.$,d.Hw,y.p6,y.VK,y.KA,y.OP],styles:[""]}),o})();function te(o,a){1&o&&(t.TgZ(0,"div",2)(1,"mat-icon"),t._uU(2,"share"),t.qZA()())}let ee=(()=>{class o{agInit(e){this.value=e.value}refresh(e){return!0}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-web-api-type"]],decls:2,vars:1,consts:[[1,"icon-container"],["class","like-button icon","tippy","WebApi is shared",4,"ngIf"],["tippy","WebApi is shared",1,"like-button","icon"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,te,3,0,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",n.value))},directives:[C.O5,A.$,d.Hw],styles:[""]}),o})(),ne=(()=>{class o{constructor(e,n,i,l,c,_,Z){this.sourceService=e,this.snackBar=n,this.dialogService=i,this.router=l,this.route=c,this.dialog=_,this.viewContainerRef=Z,this.webApis$=new p.X(void 0),this.gridOptions=this.buildGridOptions()}ngOnInit(){this.fetchWebApis()}ngOnDestroy(){this.webApis$.complete()}createController(e){null!=e?this.dialog.open(st.UH,{autoFocus:!1,data:{folder:"api",global:e,purpose:"Api"},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(l=>{if(l){if(l.name.endsWith("Controller.cs")){const c=l.name.substring(l.name.lastIndexOf("/")+1);if(!/^[A-Z][a-zA-Z0-9]*Controller\.cs$/g.test(c))return void this.snackBar.open(`"${c}" is invalid controller name. Should be something like "MyController.cs"`,null,{duration:5e3})}this.snackBar.open("Saving..."),this.sourceService.create(l.name,e,l.templateKey).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.fetchWebApis()})}}):this.dialog.open(st.i6,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(c=>{null!=c&&this.createController(c)})}fetchWebApis(){this.sourceService.getWebApis().subscribe(e=>{this.webApis$.next(e)})}enableCodeGetter(){return this.enableCode}openCode(e){this.dialogService.openCodeFile(e.path,e.isShared)}openRestApi(e){this.router.navigate([$.i.getUrlWebApi(e)],{relativeTo:this.route.firstChild})}buildGridOptions(){return Object.assign(Object.assign({},Y.f),{columnDefs:[{field:"Folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",valueGetter:n=>n.data.folder},{field:"Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:n=>n.data.name},{field:"Type",flex:1,minWidth:250,cellClass:"no-outline",sortable:!0,filter:ot.U,valueGetter:n=>n.data.isShared,cellRenderer:ee},{width:82,cellClass:"secondary-action no-padding".split(" "),pinned:"right",cellRenderer:jt,cellRendererParams:(()=>({enableCodeGetter:()=>this.enableCodeGetter(),onOpenCode:i=>this.openCode(i),onOpenRestApi:i=>this.openRestApi(i)}))()}]})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Kt.t),t.Y36(R.ux),t.Y36(L.x),t.Y36(g.F0),t.Y36(g.gz),t.Y36(k.uw),t.Y36(t.s_b))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-web-api"]],inputs:{enableCode:"enableCode"},decls:7,vars:4,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new controller",1,"grid-fab",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._UZ(1,"ag-grid-angular",1),t.ALo(2,"async"),t._UZ(3,"div",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.createController()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,2,n.webApis$))("gridOptions",n.gridOptions))},directives:[W.N8,J.lW,A.$,d.Hw],pipes:[C.Ov],styles:[""]}),o})();var ie=r(8812),oe=r(5368),ae=r(5916),se=r(4536),re=r(9597),le=r(6794),pe=r(2240);const ce={Settings:"Settings",Resources:"Resources"};var q=r(1961),de=r(6623),ue=r(9669);function me(o,a){1&o&&(t.ynx(0),t._uU(1," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. "),t.BQk())}function ge(o,a){1&o&&(t.ynx(0),t._uU(1," This is the Primary App of this Site. You can also configure sitewide settings and resources here. "),t.BQk())}function _e(o,a){if(1&o&&(t.TgZ(0,"div",18),t.YNc(1,me,2,0,"ng-container",6),t.YNc(2,ge,2,0,"ng-container",6),t._uU(3," See "),t.TgZ(4,"a",4),t._uU(5,"docs"),t.qZA(),t._uU(6,".\n"),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isGlobal),t.xp6(1),t.Q6J("ngIf",e.isPrimary)}}function fe(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3,"Global"),t.qZA(),t.TgZ(4,"td")(5,"button",19),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.systemSettings,i.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7,"edit"),t.qZA()()(),t.TgZ(8,"td")(9,"button",20),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customSettings,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",21),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customSettings,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14,"dns"),t.qZA()()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null)}}function he(o,a){1&o&&t.GkF(0)}function Ce(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3,"Site"),t.qZA(),t.TgZ(4,"td")(5,"button",22),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.systemSettings,i.SystemSettingsScopes.Site)}),t.TgZ(6,"mat-icon",13),t._uU(7,"edit"),t.qZA()()(),t.TgZ(8,"td")(9,"button",23),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customSettings,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",24),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customSettings,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14,"dns"),t.qZA()()()(),t.YNc(15,he,1,0,"ng-container",25),t.BQk()}if(2&o){const e=t.oxw(),n=t.MAs(65);t.xp6(6),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function Te(o,a){1&o&&t.GkF(0)}function ve(o,a){1&o&&t.GkF(0)}function be(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.systemSettings,i.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7,"edit"),t.qZA()()(),t.TgZ(8,"td")(9,"button",27),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.settings)}),t.TgZ(10,"mat-icon",13),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",28),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.config(i.eavConstants.contentTypes.settings)}),t.TgZ(13,"mat-icon",13),t._uU(14,"dns"),t.qZA()()()(),t.YNc(15,Te,1,0,"ng-container",25),t.YNc(16,ve,1,0,"ng-container",25),t.BQk()}if(2&o){const e=t.oxw(),n=t.MAs(67),i=t.MAs(65);t.xp6(3),t.Oqu(e.dialogSettings.Context.App.Name),t.xp6(3),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Ae(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3,"Global"),t.qZA(),t.TgZ(4,"td")(5,"button",29),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.systemResources,i.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7,"edit"),t.qZA()()(),t.TgZ(8,"td")(9,"button",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customResources,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",31),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customResources,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14,"dns"),t.qZA()()()(),t.BQk()}if(2&o){const e=t.oxw();t.xp6(6),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null)}}function ye(o,a){1&o&&t.GkF(0)}function xe(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3,"Site"),t.qZA(),t.TgZ(4,"td")(5,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.systemResources,i.SystemSettingsScopes.Site)}),t.TgZ(6,"mat-icon",13),t._uU(7,"edit"),t.qZA()()(),t.TgZ(8,"td")(9,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customResources,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",34),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.fixContentType(i.eavConstants.contentTypes.customResources,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14,"dns"),t.qZA()()()(),t.YNc(15,ye,1,0,"ng-container",25),t.BQk()}if(2&o){const e=t.oxw(),n=t.MAs(65);t.xp6(6),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",n)}}function Ze(o,a){1&o&&t.GkF(0)}function Se(o,a){1&o&&t.GkF(0)}function we(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"tr")(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"button",35),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.systemResources,i.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7,"edit"),t.qZA()()(),t.TgZ(8,"td")(9,"button",36),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.edit(i.eavConstants.contentTypes.resources)}),t.TgZ(10,"mat-icon",13),t._uU(11,"edit"),t.qZA()(),t.TgZ(12,"button",37),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return i.config(i.eavConstants.contentTypes.resources)}),t.TgZ(13,"mat-icon",13),t._uU(14,"dns"),t.qZA()()()(),t.YNc(15,Ze,1,0,"ng-container",25),t.YNc(16,Se,1,0,"ng-container",25),t.BQk()}if(2&o){const e=t.oxw(),n=t.MAs(67),i=t.MAs(65);t.xp6(3),t.Oqu(e.dialogSettings.Context.App.Name),t.xp6(3),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",n),t.xp6(1),t.Q6J("ngTemplateOutlet",i)}}function Ie(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Global"),t.qZA(),t.TgZ(3,"td")(4,"button",38),t.NdJ("click",function(){return t.CHM(e),t.oxw().openGlobalSettings()}),t.TgZ(5,"mat-icon"),t._uU(6,"open_in_new"),t.qZA()()()()}}function ke(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"tr")(1,"th"),t._uU(2,"Site"),t.qZA(),t.TgZ(3,"td")(4,"button",39),t.NdJ("click",function(){return t.CHM(e),t.oxw().openSiteSettings()}),t.TgZ(5,"mat-icon"),t._uU(6,"open_in_new"),t.qZA()()()()}}function Ue(o,a){1&o&&(t.ynx(0),t._uU(1," (not available on Global App) "),t.BQk())}function Ne(o,a){1&o&&(t.ynx(0),t._uU(1," (not available on Content App) "),t.BQk())}function Je(o,a){if(1&o&&(t.ynx(0),t.YNc(1,Ue,2,0,"ng-container",6),t.YNc(2,Ne,2,0,"ng-container",6),t.BQk()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.isGlobal),t.xp6(1),t.Q6J("ngIf",e.isApp)}}function Oe(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openLanguagePermissions()}),t.TgZ(1,"mat-icon"),t._uU(2,"person"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Language Permissions"),t.qZA()()}}function De(o,a){1&o&&(t.TgZ(0,"div"),t._UZ(1,"br"),t._uU(2," In Advanced mode you can also sync all the site files used by this app. They will be placed in a folder inside "),t.TgZ(3,"code"),t._uU(4,"App_Data"),t.qZA(),t._uU(5," and allow sync/restore with git or another server. "),t.qZA())}function Ee(o,a){1&o&&t._UZ(0,"app-feature-text-info",40),2&o&&t.Q6J("featureNameId","AppSyncWithSiteFiles")}function Pe(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportAppXml(!1)}),t.TgZ(2,"mat-icon"),t._uU(3,"more_time"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Save state"),t.qZA()(),t.TgZ(6,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetApp(!1)}),t.TgZ(7,"mat-icon"),t._uU(8,"restore"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Restore state"),t.qZA()(),t.BQk()}}function Me(o,a){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().exportAppXml(!0)}),t.TgZ(2,"mat-icon"),t._uU(3,"more_time"),t.qZA(),t.TgZ(4,"span"),t._uU(5,"Save with Assets"),t.qZA()(),t.TgZ(6,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().resetApp(!0)}),t.TgZ(7,"mat-icon"),t._uU(8,"restore"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Restore with Assets"),t.qZA()(),t.BQk()}}let Fe=(()=>{class o{constructor(e,n,i,l,c,_,Z,N,K,an,sn){this.contentItemsService=e,this.router=n,this.route=i,this.context=l,this.exportAppService=c,this.importAppPartsService=_,this.snackBar=Z,this.dialogService=N,this.appInternalsService=K,this.contentTypesService=an,this.globalConfigService=sn,this.eavConstants=m.Z,this.AnalyzeParts=ce,this.SystemSettingsScopes=m.x,this.AppScopes=b,this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.appStateAdvanced=!1,this.features=new ae.k}ngOnInit(){this.subscription=new x.w0,this.fetchSettings(),this.refreshOnChildClosed()}ngOnChanges(e){null!=e.dialogSettings&&(this.isGlobal=this.dialogSettings.Context.App.SettingsScope===b.Global,this.isPrimary=this.dialogSettings.Context.App.SettingsScope===b.Site,this.isApp=this.dialogSettings.Context.App.SettingsScope===b.App)}ngOnDestroy(){this.snackBar.dismiss(),this.subscription.unsubscribe()}edit(e,n){this.contentItemsService.getAll(e).subscribe(i=>{let l;switch(e){case m.Z.contentTypes.systemSettings:case m.Z.contentTypes.systemResources:const _=i.filter(K=>n===m.x.App?!K.SettingsEntityScope:K.SettingsEntityScope===m.x.Site);if(_.length>1)throw new Error(`Found too many settings for type ${e}`);const Z=_[0];l={items:[null==Z?{ContentTypeName:e,Prefill:Object.assign({},n===m.x.Site&&{SettingsEntityScope:m.x.Site})}:{EntityId:Z.Id}]};break;case m.Z.contentTypes.customSettings:case m.Z.contentTypes.customResources:if(i.length>1)throw new Error(`Found too many settings for type ${e}`);const N=i[0];l={items:[null==N?{ContentTypeName:e}:{EntityId:N.Id}]};break;default:if(i.length<1)throw new Error(`Found no settings for type ${e}`);if(i.length>1)throw new Error(`Found too many settings for type ${e}`);l={items:[{EntityId:i[0].Id}]}}const c=(0,P.f)(l);this.router.navigate([`edit/${c}`],{relativeTo:this.route.firstChild})})}openMetadata(){const e=V.U.getUrlApp(this.context.appId,`Metadata for App: ${this.dialogSettings.Context.App.Name} (${this.context.appId})`);this.router.navigate([e],{relativeTo:this.route.firstChild})}openSiteSettings(){const e=this.dialogSettings.Context.Site.PrimaryApp;this.dialogService.openAppAdministration(e.ZoneId,e.AppId,"app")}openGlobalSettings(){const e=this.dialogSettings.Context.System.PrimaryApp;this.dialogService.openAppAdministration(e.ZoneId,e.AppId,"app")}config(e){this.router.navigate([`fields/${e}`],{relativeTo:this.route.firstChild})}openPermissions(){this.router.navigate([G.i.getUrlApp(this.context.appId)],{relativeTo:this.route.firstChild})}openLanguagePermissions(){this.router.navigate(["language-permissions"],{relativeTo:this.route.firstChild})}exportApp(){this.router.navigate(["export"],{relativeTo:this.route.firstChild})}exportParts(){this.router.navigate(["export/parts"],{relativeTo:this.route.firstChild})}importParts(){this.router.navigate(["import/parts"],{relativeTo:this.route.firstChild})}exportAppXml(e){this.snackBar.open("Exporting..."),this.exportAppService.exportForVersionControl({includeContentGroups:!0,resetAppGuid:!1,withFiles:e}).subscribe({next:n=>{this.snackBar.open("Export completed into the 'App_Data' folder.",null,{duration:3e3})},error:n=>{this.snackBar.open("Export failed. Please check console for more information",null,{duration:3e3})}})}resetApp(e){!confirm("Are you sure? All changes since last xml export will be lost")||(this.snackBar.open("Resetting..."),this.importAppPartsService.resetApp(e).subscribe({next:n=>{this.snackBar.open("Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct",null,{duration:3e4})},error:n=>{this.snackBar.open("Reset failed. Please check console for more information",null,{duration:3e3})}}))}analyze(e){this.router.navigate([`analyze/${e}`],{relativeTo:this.route.firstChild})}fetchSettings(){this.appInternalsService.getAppInternals(m.Z.metadata.app.targetType,m.Z.metadata.app.keyType,this.context.appId).subscribe(e=>{var n,i,l,c;this.systemSettingsCount=this.isPrimary?e.EntityLists.SettingsSystem.filter(_=>_.SettingsEntityScope===m.x.Site).length:e.EntityLists.SettingsSystem.filter(_=>!_.SettingsEntityScope).length,this.customSettingsCount=null===(n=e.EntityLists.AppSettings)||void 0===n?void 0:n.length,this.customSettingsFieldsCount=null===(i=e.FieldAll.AppSettings)||void 0===i?void 0:i.length,this.systemResourcesCount=this.isPrimary?e.EntityLists.ResourcesSystem.filter(_=>_.SettingsEntityScope===m.x.Site).length:e.EntityLists.ResourcesSystem.filter(_=>!_.SettingsEntityScope).length,this.customResourcesCount=null===(l=e.EntityLists.AppResources)||void 0===l?void 0:l.length,this.customResourcesFieldsCount=null===(c=e.FieldAll.AppResources)||void 0===c?void 0:c.length,this.appConfigurationsCount=e.EntityLists.ToSxcContentApp.length,this.appMetadataCount=e.MetadataList.Items.length})}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,f.h)(e=>e instanceof g.m2),(0,h.O)(!!this.route.snapshot.firstChild.firstChild),(0,v.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,I.G)(),(0,f.h)(([e,n])=>e&&!n)).subscribe(()=>{this.fetchSettings()}))}fixContentType(e,n){this.contentTypesService.retrieveContentTypes(m.Z.scopes.configuration.value).subscribe(i=>{i.some(c=>c.Name===e)?"edit"===n?this.edit(e):"config"===n&&this.config(e):this.contentTypesService.save({StaticName:"",Name:e,Description:"",Scope:m.Z.scopes.configuration.value,ChangeStaticName:!1,NewStaticName:""}).subscribe(_=>{!_||("edit"===n?this.edit(e):"config"===n&&this.config(e))})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(ie.l),t.Y36(g.F0),t.Y36(g.gz),t.Y36(oe._),t.Y36(le.v),t.Y36(pe.z),t.Y36(R.ux),t.Y36(L.x),t.Y36(re.l),t.Y36(se.sF),t.Y36(nt.bE))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-app-configuration"]],inputs:{dialogSettings:"dialogSettings"},features:[t.TTD],decls:163,vars:21,consts:[["class","alert alert-info scope-info",4,"ngIf"],[1,"cards-box"],[1,"mat-elevation-z2"],[1,"mat-card-header-icon"],["href","http://r.2sxc.org/settings","target","_blank"],[1,"settings"],[4,"ngIf"],[1,"actions-row"],["mat-button","","tippy","See the result of combining all settings",3,"click"],["mat-button","","tippy","See the result of combining all resources",3,"click"],["goToGlobal",""],["goToSite",""],["mat-button","",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after",3,"matBadge"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click",4,"ngIf"],[3,"ngModel","ngModelChange"],[3,"featureNameId",4,"ngIf"],[1,"alert","alert-info","scope-info"],["mat-button","","tippy","Edit global system settings",3,"click"],["mat-button","","tippy","Edit custom global settings",3,"click"],["mat-button","","tippy","Configure fields of the custom global settings",3,"click"],["mat-button","","tippy","Edit site system settings",3,"click"],["mat-button","","tippy","Edit custom site settings",3,"click"],["mat-button","","tippy","Configure fields of the custom site settings",3,"click"],[4,"ngTemplateOutlet"],["mat-button","","tippy","Edit app system settings",3,"click"],["mat-button","","tippy","Edit custom app settings",3,"click"],["mat-button","","tippy","Configure fields of the custom app settings",3,"click"],["mat-button","","tippy","Edit global system resources",3,"click"],["mat-button","","tippy","Edit custom global resources",3,"click"],["mat-button","","tippy","Configure fields of the custom global resources",3,"click"],["mat-button","","tippy","Edit site system resources",3,"click"],["mat-button","","tippy","Edit custom site resources",3,"click"],["mat-button","","tippy","Configure fields of the custom site resources",3,"click"],["mat-button","","tippy","Edit app system resources",3,"click"],["mat-button","","tippy","Edit custom app resources",3,"click"],["mat-button","","tippy","Configure fields of the custom app resources",3,"click"],["mat-button","","tippy","Go to global",3,"click"],["mat-button","","tippy","Go to site",3,"click"],[3,"featureNameId"]],template:function(e,n){1&e&&(t.YNc(0,_e,7,2,"div",0),t.TgZ(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title"),t._uU(5,"Settings"),t.qZA(),t.TgZ(6,"div",3)(7,"mat-icon"),t._uU(8,"settings"),t.qZA()()(),t.TgZ(9,"mat-card-content")(10,"p"),t._uU(11,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),t.TgZ(12,"a",4),t._uU(13,"docs"),t.qZA()(),t.TgZ(14,"table",5)(15,"thead")(16,"tr"),t._UZ(17,"th"),t.TgZ(18,"th"),t._uU(19,"System Settings"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Custom Settings"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,fe,15,3,"ng-container",6),t.YNc(24,Ce,16,4,"ng-container",6),t.YNc(25,be,17,6,"ng-container",6),t.qZA()()(),t.TgZ(26,"mat-card-actions")(27,"div",7)(28,"button",8),t.NdJ("click",function(){return n.analyze(n.AnalyzeParts.Settings)}),t.TgZ(29,"mat-icon"),t._uU(30,"manage_search"),t.qZA(),t.TgZ(31,"span"),t._uU(32,"Analyze Combined Settings"),t.qZA()()()()(),t.TgZ(33,"mat-card",2)(34,"mat-card-header")(35,"mat-card-title"),t._uU(36,"Language Resources (i18n)"),t.qZA(),t.TgZ(37,"div",3)(38,"mat-icon"),t._uU(39,"translate"),t.qZA()()(),t.TgZ(40,"mat-card-content")(41,"p"),t._uU(42," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),t.TgZ(43,"a",4),t._uU(44,"docs"),t.qZA()(),t.TgZ(45,"table",5)(46,"thead")(47,"tr"),t._UZ(48,"th"),t.TgZ(49,"th"),t._uU(50,"System Resources"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Custom Resources"),t.qZA()()(),t.TgZ(53,"tbody"),t.YNc(54,Ae,15,3,"ng-container",6),t.YNc(55,xe,16,4,"ng-container",6),t.YNc(56,we,17,6,"ng-container",6),t.qZA()()(),t.TgZ(57,"mat-card-actions")(58,"div",7)(59,"button",9),t.NdJ("click",function(){return n.analyze(n.AnalyzeParts.Resources)}),t.TgZ(60,"mat-icon"),t._uU(61,"manage_search"),t.qZA(),t.TgZ(62,"span"),t._uU(63,"Analyze Combined Resources"),t.qZA()()()()(),t.YNc(64,Ie,7,0,"ng-template",null,10,t.W1O),t.YNc(66,ke,7,0,"ng-template",null,11,t.W1O),t.qZA(),t.TgZ(68,"div",1)(69,"mat-card",2)(70,"mat-card-header")(71,"mat-card-title"),t._uU(72,"App Configuration"),t.qZA(),t.TgZ(73,"div",3)(74,"mat-icon"),t._uU(75,"redeem"),t.qZA()()(),t.TgZ(76,"mat-card-content"),t._uU(77," App name, folder, version and more. "),t.qZA(),t.TgZ(78,"mat-card-actions")(79,"button",12),t.NdJ("click",function(){return n.edit(n.eavConstants.contentTypes.appConfiguration)}),t.TgZ(80,"mat-icon",13),t._uU(81,"edit"),t.qZA(),t.TgZ(82,"span"),t._uU(83,"Edit Configuration"),t.qZA()(),t.TgZ(84,"button",12),t.NdJ("click",function(){return n.openMetadata()}),t.TgZ(85,"mat-icon",13),t._uU(86,"local_offer"),t.qZA(),t.TgZ(87,"span"),t._uU(88,"Metadata"),t.qZA()()()(),t.TgZ(89,"mat-card",2)(90,"mat-card-header")(91,"mat-card-title"),t._uU(92,"App Permissions"),t.qZA(),t.TgZ(93,"div",3)(94,"mat-icon"),t._uU(95,"person"),t.qZA()()(),t.TgZ(96,"mat-card-content"),t._uU(97," Give access to the entire app (all data). Use with care. "),t.qZA(),t.TgZ(98,"mat-card-actions")(99,"button",14),t.NdJ("click",function(){return n.openPermissions()}),t.TgZ(100,"mat-icon",13),t._uU(101,"person"),t.qZA(),t.TgZ(102,"span"),t._uU(103," Edit Permissions "),t.YNc(104,Je,3,2,"ng-container",6),t.qZA()(),t.YNc(105,Oe,5,0,"button",15),t.ALo(106,"async"),t.qZA()()(),t.TgZ(107,"div",1)(108,"mat-card",2)(109,"mat-card-header")(110,"mat-card-title"),t._uU(111,"Export this entire App"),t.qZA(),t.TgZ(112,"div",3)(113,"mat-icon"),t._uU(114,"cloud_download"),t.qZA()()(),t.TgZ(115,"mat-card-content"),t._uU(116," Create an package (zip) which can be installed in another site. "),t.qZA(),t.TgZ(117,"mat-card-actions")(118,"button",12),t.NdJ("click",function(){return n.exportApp()}),t.TgZ(119,"mat-icon"),t._uU(120,"cloud_download"),t.qZA(),t.TgZ(121,"span"),t._uU(122,"Export App"),t.qZA()()()(),t.TgZ(123,"mat-card",2)(124,"mat-card-header")(125,"mat-card-title"),t._uU(126,"Export or Import parts of this App"),t.qZA(),t.TgZ(127,"div",3)(128,"mat-icon"),t._uU(129,"import_export"),t.qZA()()(),t.TgZ(130,"mat-card-content"),t._uU(131," Create an xml containing parts of the app, e.g. content and templates. Import parts from such an xml into this app. "),t.qZA(),t.TgZ(132,"mat-card-actions")(133,"button",12),t.NdJ("click",function(){return n.exportParts()}),t.TgZ(134,"mat-icon"),t._uU(135,"cloud_download"),t.qZA(),t.TgZ(136,"span"),t._uU(137,"Export Parts"),t.qZA()(),t.TgZ(138,"button",12),t.NdJ("click",function(){return n.importParts()}),t.TgZ(139,"mat-icon"),t._uU(140,"cloud_upload"),t.qZA(),t.TgZ(141,"span"),t._uU(142,"Import Parts"),t.qZA()()()()(),t.TgZ(143,"div",1)(144,"mat-card",2)(145,"mat-card-header")(146,"mat-card-title"),t._uU(147,"App-State Versioning"),t.qZA(),t.TgZ(148,"mat-slide-toggle",16),t.NdJ("ngModelChange",function(l){return n.appStateAdvanced=l}),t._uU(149),t.qZA(),t.TgZ(150,"div",3)(151,"mat-icon"),t._uU(152,"history_toggle_off"),t.qZA()()(),t.TgZ(153,"mat-card-content"),t._uU(154," You can save / restore the app with data and configuration in "),t.TgZ(155,"code"),t._uU(156,".data/app.xml"),t.qZA(),t._uU(157,". This file can then also be versioned using git. "),t.YNc(158,De,6,0,"div",6),t.qZA(),t.YNc(159,Ee,1,1,"app-feature-text-info",17),t.TgZ(160,"mat-card-actions"),t.YNc(161,Pe,11,0,"ng-container",6),t.YNc(162,Me,11,0,"ng-container",6),t.qZA()()()),2&e&&(t.Q6J("ngIf",n.isGlobal||n.isPrimary),t.xp6(23),t.Q6J("ngIf",n.isGlobal),t.xp6(1),t.Q6J("ngIf",n.isPrimary),t.xp6(1),t.Q6J("ngIf",n.isApp),t.xp6(29),t.Q6J("ngIf",n.isGlobal),t.xp6(1),t.Q6J("ngIf",n.isPrimary),t.xp6(1),t.Q6J("ngIf",n.isApp),t.xp6(24),t.Q6J("matBadge",n.appConfigurationsCount||null),t.xp6(5),t.Q6J("matBadge",n.appMetadataCount||null),t.xp6(14),t.Q6J("disabled",!n.dialogSettings.Context.Enable.AppPermissions),t.xp6(1),t.Q6J("matBadge",n.dialogSettings.Context.App.Permissions.Count||null),t.xp6(4),t.Q6J("ngIf",!n.dialogSettings.Context.Enable.AppPermissions),t.xp6(1),t.Q6J("ngIf",t.lcZ(106,19,n.debugEnabled$)),t.xp6(43),t.Q6J("ngModel",n.appStateAdvanced),t.xp6(1),t.Oqu(n.appStateAdvanced?"advanced":"basic"),t.xp6(9),t.Q6J("ngIf",n.appStateAdvanced),t.xp6(1),t.Q6J("ngIf",n.appStateAdvanced),t.xp6(2),t.Q6J("ngIf",!n.appStateAdvanced),t.xp6(1),t.Q6J("ngIf",n.appStateAdvanced))},directives:[C.O5,q.a8,q.dk,q.n5,d.Hw,q.dn,J.lW,A.$,Q.k,C.tP,q.hq,de.Rr,H.JJ,H.On,ue.B],pipes:[C.Ov],styles:[".scope-info[_ngcontent-%COMP%]{width:888px;margin:16px 8px 0}table.settings[_ngcontent-%COMP%]{width:100%}table.settings[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}table.settings[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]}),o})();function Qe(o,a){1&o&&(t.ynx(0),t._uU(1," Global "),t.BQk())}function Re(o,a){if(1&o&&(t.ynx(0),t._uU(1),t.BQk()),2&o){const e=t.oxw().ngIf;t.xp6(1),t.hij(" ",null==e.dialogSettings?null:e.dialogSettings.Context.App.Name," ")}}function qe(o,a){1&o&&(t.TgZ(0,"div",16)(1,"mat-icon"),t._uU(2,"info"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Info"),t.qZA()())}function Be(o,a){if(1&o&&t._UZ(0,"app-getting-started",17),2&o){const e=t.oxw(2).ngIf;t.Q6J("gettingStartedUrl",e.dialogSettings.Context.App.GettingStartedUrl)}}function Ve(o,a){1&o&&(t.TgZ(0,"div",18)(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Data"),t.qZA()())}function Ge(o,a){if(1&o&&t._UZ(0,"app-data",19),2&o){const e=t.oxw(2).ngIf;t.Q6J("enablePermissions",e.dialogSettings.Context.Enable.AppPermissions)}}function Ye(o,a){1&o&&(t.TgZ(0,"div",21)(1,"mat-icon"),t._uU(2,"filter_list"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Queries"),t.qZA()())}function We(o,a){if(1&o&&t._UZ(0,"app-queries",19),2&o){const e=t.oxw(3).ngIf;t.Q6J("enablePermissions",e.dialogSettings.Context.Enable.AppPermissions)}}function He(o,a){1&o&&(t.TgZ(0,"mat-tab"),t.YNc(1,Ye,5,0,"div",20),t.YNc(2,We,1,1,"app-queries",11),t.qZA())}function Le(o,a){1&o&&(t.TgZ(0,"div",22)(1,"mat-icon"),t._uU(2,"layers"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Views"),t.qZA()())}function Ke(o,a){if(1&o&&t._UZ(0,"app-views",23),2&o){const e=t.oxw(2).ngIf;t.Q6J("enableCode",e.dialogSettings.Context.Enable.CodeEditor)("enablePermissions",e.dialogSettings.Context.Enable.AppPermissions)("appIsGlobal",e.dialogSettings.Context.App.IsShared)("appIsInherited",e.dialogSettings.Context.App.IsInherited)}}function ze(o,a){1&o&&(t.TgZ(0,"div",26)(1,"mat-icon"),t._uU(2,"offline_bolt"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"WebApi"),t.qZA()())}function Xe(o,a){if(1&o&&t._UZ(0,"app-web-api",27),2&o){const e=t.oxw(3).ngIf;t.Q6J("enableCode",e.dialogSettings.Context.Enable.CodeEditor)}}function $e(o,a){1&o&&(t.TgZ(0,"mat-tab"),t.YNc(1,ze,5,0,"div",24),t.YNc(2,Xe,1,1,"app-web-api",25),t.qZA())}function je(o,a){1&o&&(t.TgZ(0,"div",28)(1,"mat-icon"),t._uU(2,"settings_applications"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"App"),t.qZA()())}function tn(o,a){if(1&o&&t._UZ(0,"app-app-configuration",29),2&o){const e=t.oxw(2).ngIf;t.Q6J("dialogSettings",e.dialogSettings)}}function en(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"mat-tab-group",7),t.NdJ("selectedTabChange",function(i){return t.CHM(e),t.oxw(2).changeTab(i)}),t.TgZ(1,"mat-tab"),t.YNc(2,qe,5,0,"div",8),t.YNc(3,Be,1,1,"app-getting-started",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,Ve,5,0,"div",10),t.YNc(6,Ge,1,1,"app-data",11),t.qZA(),t.YNc(7,He,3,0,"mat-tab",4),t.TgZ(8,"mat-tab"),t.YNc(9,Le,5,0,"div",12),t.YNc(10,Ke,1,4,"app-views",13),t.qZA(),t.YNc(11,$e,3,0,"mat-tab",4),t.TgZ(12,"mat-tab"),t.YNc(13,je,5,0,"div",14),t.YNc(14,tn,1,1,"app-app-configuration",15),t.qZA()()}if(2&o){const e=t.oxw().ngIf;t.Q6J("selectedIndex",e.tabIndex),t.xp6(7),t.Q6J("ngIf",e.dialogSettings.Context.Enable.Query),t.xp6(4),t.Q6J("ngIf",e.dialogSettings.Context.Enable.Query)}}function nn(o,a){if(1&o){const e=t.EpF();t.TgZ(0,"div",1)(1,"div",2)(2,"div",3)(3,"div"),t.YNc(4,Qe,2,0,"ng-container",4),t.YNc(5,Re,2,1,"ng-container",4),t._uU(6," Admin "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(e),t.oxw().closeDialog()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA()()()(),t._UZ(10,"router-outlet"),t.YNc(11,en,15,3,"mat-tab-group",6),t.qZA()}if(2&o){const e=a.ngIf,n=t.oxw();t.xp6(4),t.Q6J("ngIf",(null==e.dialogSettings?null:e.dialogSettings.Context.App.SettingsScope)===n.AppScopes.Global),t.xp6(1),t.Q6J("ngIf",(null==e.dialogSettings?null:e.dialogSettings.Context.App.SettingsScope)!==n.AppScopes.Global),t.xp6(6),t.Q6J("ngIf",e.dialogSettings&&null!=e.tabIndex)}}let on=(()=>{class o{constructor(e,n,i,l){this.dialogRef=e,this.appDialogConfigService=n,this.router=i,this.route=l,this.AppScopes=b,this.dialogSettings$=new p.X(void 0),this.tabs$=new p.X(void 0),this.tabIndex$=(0,s.a)([this.tabs$,this.router.events.pipe((0,f.h)(c=>c instanceof g.m2),(0,v.U)(()=>this.route.snapshot.firstChild.url[0].path),(0,h.O)(this.route.snapshot.firstChild.url[0].path))]).pipe((0,v.U)(([c,_])=>null==c?void 0:c.indexOf(_)),(0,f.h)(c=>c>=0)),this.templateVars$=(0,s.a)([this.dialogSettings$,this.tabIndex$]).pipe((0,v.U)(([c,_])=>({dialogSettings:c,tabIndex:_}))),this.subscription=new x.w0}ngOnInit(){this.fetchDialogSettings(),this.refreshOnChildClosed()}ngOnDestroy(){this.dialogSettings$.complete(),this.tabs$.complete(),this.subscription.unsubscribe()}closeDialog(){this.dialogRef.close()}changeTab(e){let n=this.tabs$.value[e.index];"data"===n&&(n=`data/${m.Z.scopes.default.value}`),this.router.navigate([n],{relativeTo:this.route})}fetchDialogSettings(){this.appDialogConfigService.getShared$().subscribe(e=>{(0,F.X)(e.Context.App),this.dialogSettings$.next(e);let n=["home","data","queries","views","web-api","app"];e.Context.Enable.Query||(n=n.filter(i=>"queries"!==i&&"web-api"!==i)),this.tabs$.next(n)})}refreshOnChildClosed(){this.subscription.add(this.router.events.pipe((0,f.h)(e=>e instanceof g.m2),(0,h.O)(!!this.route.snapshot.firstChild.firstChild),(0,v.U)(()=>!!this.route.snapshot.firstChild.firstChild),(0,I.G)(),(0,f.h)(([e,n])=>e&&!n)).subscribe(()=>{this.fetchDialogSettings()}))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.so),t.Y36(D.K),t.Y36(g.F0),t.Y36(g.gz))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-app-administration-nav"]],decls:2,vars:3,consts:[["class","nav-component-wrapper","appToggleDebug","",4,"ngIf"],["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],["mat-icon-button","","tippy","Close dialog",3,"click"],["class","mat-tab-group-max-height","dynamicHeight","","color","accent",3,"selectedIndex","selectedTabChange",4,"ngIf"],["dynamicHeight","","color","accent",1,"mat-tab-group-max-height",3,"selectedIndex","selectedTabChange"],["class","mat-tab-label-box","tippy","App Info",4,"matTabLabel"],[3,"gettingStartedUrl",4,"matTabContent"],["class","mat-tab-label-box","tippy","Data / Content",4,"matTabLabel"],[3,"enablePermissions",4,"matTabContent"],["class","mat-tab-label-box","tippy","Views / Templates",4,"matTabLabel"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited",4,"matTabContent"],["class","mat-tab-label-box","tippy","App Settings",4,"matTabLabel"],[3,"dialogSettings",4,"matTabContent"],["tippy","App Info",1,"mat-tab-label-box"],[3,"gettingStartedUrl"],["tippy","Data / Content",1,"mat-tab-label-box"],[3,"enablePermissions"],["class","mat-tab-label-box","tippy","Queries / Visual Query Designer",4,"matTabLabel"],["tippy","Queries / Visual Query Designer",1,"mat-tab-label-box"],["tippy","Views / Templates",1,"mat-tab-label-box"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited"],["class","mat-tab-label-box","tippy","WebApi",4,"matTabLabel"],[3,"enableCode",4,"matTabContent"],["tippy","WebApi",1,"mat-tab-label-box"],[3,"enableCode"],["tippy","App Settings",1,"mat-tab-label-box"],[3,"dialogSettings"]],template:function(e,n){1&e&&(t.YNc(0,nn,12,3,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.templateVars$))},directives:[C.O5,z.D,k.uh,J.lW,A.$,d.Hw,g.lC,T.SP,T.uX,T.uD,T.Vc,O,Zt,Dt,Lt,ne,Fe],pipes:[C.Ov],styles:[""]}),o})()},9669:(B,w,r)=>{r.d(w,{B:()=>F});var g=r(1329),p=r(3184),s=r(5758),f=r(5916),v=r(6362),h=r(6190),x=r(5590),I=r(7514);function m(b,D){if(1&b){const t=p.EpF();p.TgZ(0,"div",1),p.NdJ("click",function(){return p.CHM(t),p.oxw().openDialog()}),p.ALo(1,"translate"),p.TgZ(2,"mat-icon",2),p._uU(3,"warning"),p.qZA(),p.TgZ(4,"div",3)(5,"div",4),p._uU(6),p.ALo(7,"translate"),p.qZA(),p.TgZ(8,"div",5),p._uU(9),p.ALo(10,"translate"),p.qZA()()()}if(2&b){const t=p.oxw();p.Q6J("tippy",p.xi3(1,3,"Features.Tooltip",t.featureSummary)),p.xp6(6),p.Oqu(p.lcZ(7,6,"Features.FeatureNotActivated")),p.xp6(3),p.Oqu(p.lcZ(10,8,"Features.ClickToFindOutMore"))}}let F=(()=>{class b extends g.s{constructor(t,k,C){super(t,k,C)}ngOnInit(){super.ngOnInit(),this.featureSummary=this.featuresService.getFeature(this.featureNameId)}}return b.\u0275fac=function(t){return new(t||b)(p.Y36(s.uw),p.Y36(p.s_b),p.Y36(f.k))},b.\u0275cmp=p.Xpm({type:b,selectors:[["app-feature-text-info"]],features:[p.qOj],decls:1,vars:1,consts:[["class","feature-text-info",3,"tippy","click",4,"ngIf"],[1,"feature-text-info",3,"tippy","click"],[1,"feature-text-info-icon"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(t,k){1&t&&p.YNc(0,m,11,10,"div",0),2&t&&p.Q6J("ngIf",!k.featureOn)},directives:[v.O5,h.$,x.Hw],pipes:[I.X$],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.feature-text-info-icon[_ngcontent-%COMP%]{font-size:45px;color:red;height:-moz-fit-content;height:fit-content;width:-moz-fit-content;width:fit-content}"]}),b})()},1329:(B,w,r)=>{r.d(w,{s:()=>A});var g=r(5758),p=r(9673),s=r(3184),f=r(2528),v=r(3265),h=r(6362),x=r(7317),I=r(6190),m=r(5590),F=r(1555),b=r(7514);function D(d,T){if(1&d){const u=s.EpF();s.TgZ(0,"div",6)(1,"div",7),s._uU(2,"ID"),s.qZA(),s.TgZ(3,"div",10)(4,"span",11),s.NdJ("click",function(){const E=s.CHM(u).ngIf;return s.oxw(2).copyToClipboard(E)}),s._uU(5),s.qZA()()()}if(2&d){const u=T.ngIf;s.xp6(4),s.Q6J("tippy",u),s.xp6(1),s.Oqu(u)}}function t(d,T){if(1&d){const u=s.EpF();s.TgZ(0,"div",6)(1,"div",7),s._uU(2,"GUID"),s.qZA(),s.TgZ(3,"div",10)(4,"span",11),s.NdJ("click",function(){const E=s.CHM(u).ngIf;return s.oxw(2).copyToClipboard(E)}),s._uU(5),s.qZA()()()}if(2&d){const u=T.ngIf;s.xp6(4),s.Q6J("tippy",u),s.xp6(1),s.Oqu(u)}}function k(d,T){if(1&d&&(s.TgZ(0,"div",6)(1,"div",7),s._uU(2),s.ALo(3,"translate"),s.qZA(),s.TgZ(4,"div",8)(5,"span"),s._uU(6),s.qZA()()()),2&d){const u=T.ngIf;s.xp6(2),s.Oqu(s.lcZ(3,2,"Features.SecurityRating")),s.xp6(4),s.Oqu(u)}}function C(d,T){if(1&d){const u=s.EpF();s.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"div"),s._uU(4),s.qZA(),s.TgZ(5,"button",3),s.NdJ("click",function(){return s.CHM(u),s.oxw().closeDialog()}),s.TgZ(6,"mat-icon"),s._uU(7,"close"),s.qZA()()()(),s._UZ(8,"p",4),s.ALo(9,"safeHtml"),s.TgZ(10,"div",5)(11,"div",6)(12,"div",7),s._uU(13),s.ALo(14,"translate"),s.qZA(),s.TgZ(15,"div",8)(16,"span"),s._uU(17),s.ALo(18,"translate"),s.qZA()()(),s.YNc(19,D,6,2,"div",9),s.YNc(20,t,6,2,"div",9),s.YNc(21,k,7,4,"div",9),s.qZA()()}if(2&d){const u=T.ngIf;s.xp6(4),s.Oqu(u.Name),s.xp6(4),s.Q6J("innerHtml",s.lcZ(9,7,u.Description),s.oJD),s.xp6(5),s.Oqu(s.lcZ(14,9,"Features.Status")),s.xp6(4),s.Oqu(u.Enabled?"Features.Active":s.lcZ(18,11,"Features.NotActive")),s.xp6(2),s.Q6J("ngIf",u.NameId),s.xp6(1),s.Q6J("ngIf",u.Guid),s.xp6(1),s.Q6J("ngIf",u.Security.Impact+": "+u.Security.Message)}}let z=(()=>{class d{constructor(u,U,O,E){this.dialogData=u,this.dialogRef=U,this.snackBar=O,this.featureDetailService=E,this.feature$=this.featureDetailService.getFeatureDetails(u)}ngOnInit(){}copyToClipboard(u){(0,p.v)(u),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}closeDialog(){this.dialogRef.close()}}return d.\u0275fac=function(u){return new(u||d)(s.Y36(g.WI),s.Y36(g.so),s.Y36(f.ux),s.Y36(v.f))},d.\u0275cmp=s.Xpm({type:d,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description",3,"innerHtml"],[1,"info-box"],[1,"info-row"],[1,"info-row__label"],[1,"info-row__value"],["class","info-row",4,"ngIf"],[1,"info-row__value","click"],[3,"tippy","click"]],template:function(u,U){1&u&&(s.YNc(0,C,22,13,"div",0),s.ALo(1,"async")),2&u&&s.Q6J("ngIf",s.lcZ(1,1,U.feature$))},directives:[h.O5,x.lW,I.$,m.Hw],pipes:[h.Ov,F.z,b.X$],styles:[".info-box[_ngcontent-%COMP%]{margin-top:32px}.info-row[_ngcontent-%COMP%]{display:flex;overflow-wrap:anywhere;margin-top:4px;margin-bottom:4px;font-size:14px}.info-row__label[_ngcontent-%COMP%]{flex:1;font-weight:500}.info-row__value[_ngcontent-%COMP%]{flex:2}.info-row__value.click[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),d})();var J=r(5916);let A=(()=>{class d{constructor(u,U,O){this.dialog=u,this.viewContainerRef=U,this.featuresService=O,this.featureOn=!0}ngOnInit(){this.featureOn=this.featuresService.isEnabled(this.featureNameId)}openDialog(){this.dialog.open(z,{autoFocus:!1,data:this.featureNameId,viewContainerRef:this.viewContainerRef,width:"650px"})}}return d.\u0275fac=function(u){return new(u||d)(s.Y36(g.uw),s.Y36(s.s_b),s.Y36(J.k))},d.\u0275dir=s.lG2({type:d,inputs:{featureNameId:"featureNameId"}}),d})()},6619:(B,w,r)=>{function g(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}r.d(w,{M:()=>g})},6108:(B,w,r)=>{r.d(w,{D:()=>s});var g=r(1745),p=r(3184);let s=(()=>{class f{constructor(h){this.globalConfigService=h}onClick(h){(navigator.platform.match("Mac")?h.metaKey:h.ctrlKey)&&h.shiftKey&&h.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}return f.\u0275fac=function(h){return new(h||f)(p.Y36(g.bE))},f.\u0275dir=p.lG2({type:f,selectors:[["","appToggleDebug",""]],hostBindings:function(h,x){1&h&&p.NdJ("click",function(m){return x.onClick(m)})}}),f})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/15.00.00/ng-edit/projects_eav-ui_src_app_app-administration_app-administration-nav_app-administration-nav_comp-1b3e30.605800029f000047.js.map