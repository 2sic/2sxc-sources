{"version":3,"file":"common.js","mappings":"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","sources":["./projects/eav-ui/src/app/admin-shared/lightspeed-action/lightspeed-action.component.ts","./projects/eav-ui/src/app/admin-shared/lightspeed-action/lightspeed-action.component.html","./projects/eav-ui/src/app/app-administration/app-admin-helpers.ts","./projects/eav-ui/src/app/app-administration/services/analyze-settings.service.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings-value/analyze-settings-value.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings-value/analyze-settings-value.component.html","./projects/eav-ui/src/app/apps-management/services/apps-list.service.ts","./projects/eav-ui/src/app/apps-management/services/features-config.service.ts","./projects/eav-ui/src/app/apps-management/services/zone.service.ts","./projects/eav-ui/src/app/content-export/services/content-export.service.ts","./projects/eav-ui/src/app/content-items/content-items-dialog.config.ts","./projects/eav-ui/src/app/content-items/content-items.routing.ts","./projects/eav-ui/src/app/content-items/import-content-item/import-content-item-dialog.config.ts","./projects/eav-ui/src/app/content-items/services/content-items.service.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-dialog.config.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields.routing.ts","./projects/eav-ui/src/app/content-type-fields/edit-content-type-fields/edit-content-type-fields-dialog.config.ts","./projects/eav-ui/src/app/create-file-dialog/file-location-dialog/file-location-dialog.component.ts","./projects/eav-ui/src/app/create-file-dialog/file-location-dialog/file-location-dialog.component.html","./projects/eav-ui/src/app/create-file-dialog/index.ts","./projects/eav-ui/src/app/edit/edit-debug.ts","./projects/eav-ui/src/app/edit/shared/controls/ui-control.ts","./projects/eav-ui/src/app/edit/shared/helpers/field-value.helpers.ts","./projects/eav-ui/src/app/edit/shared/validation/validation-messages.helpers.ts","./projects/eav-ui/src/app/import-app/import-app-dialog.config.ts","./projects/eav-ui/src/app/import-app/import-app.routing.ts","./projects/eav-ui/src/app/manage-content-list/services/content-group.service.ts","./projects/eav-ui/src/app/replace-content/replace-content-dialog.config.ts","./projects/eav-ui/src/app/replace-content/replace-content.routing.ts","./projects/eav-ui/src/app/shared/components/dialog-entry/dialog-entry.component.ts","./projects/eav-ui/src/app/shared/constants/guid.constants.ts","./projects/eav-ui/src/app/shared/helpers/json.helpers.ts","./projects/eav-ui/src/app/shared/helpers/load-scripts.helper.ts","./projects/eav-ui/src/app/shared/helpers/update-env-vars-from-dialog-settings.helper.ts","./projects/eav-ui/src/app/shared/models/dialog-context.models.ts","./projects/eav-ui/src/app/shared/services/dialog.service.ts"],"sourcesContent":["import { Component, Input, inject } from '@angular/core';\r\nimport { LightSpeedInfo } from '../../apps-management/models/LightSpeedInfo';\r\nimport { LightSpeedActionsParams } from './lightspeed-actions.models';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { FeaturesScopedService } from '../../features/features-scoped.service';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n/**\r\n * LightSpeedActionsComponent\r\n *\r\n * Specially meant to be used inside an AGGrid action, and receive the parameters from it.\r\n *\r\n */\r\n@Component({\r\n  selector: 'app-lightspeed-action',\r\n  templateUrl: './lightspeed-action.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    TippyDirective,\r\n    MatIconModule,\r\n    MatBadgeModule,\r\n    MatRippleModule,\r\n  ],\r\n})\r\nexport class LightSpeedActionsComponent {\r\n  /** App needed for lightspeed checks */\r\n  @Input({ required: true }) lightSpeedOwner: unknown;\r\n\r\n  @Input({ required: true }) params: LightSpeedActionsParams;\r\n\r\n  @Input({ required: true }) lightSpeed: LightSpeedInfo | null;\r\n\r\n  public features = inject(FeaturesScopedService);\r\n\r\n  constructor() { }\r\n\r\n  protected lightSpeedEnabled = this.features.isEnabled[FeatureNames.LightSpeed]\r\n\r\n  public get appHasLightSpeed(): boolean {\r\n    return this.lightSpeed?.Id != null;\r\n  }\r\n\r\n  public get appLightSpeedEnabled(): boolean {\r\n    return this.lightSpeed?.IsEnabled == true;\r\n  }\r\n\r\n  openLightspeed(): void {\r\n    this.params.onOpenLightspeed(this.lightSpeedOwner);\r\n  }\r\n\r\n  openLightspeedFeatureInfo(): void {\r\n    this.params.openLightspeedFeatureInfo();\r\n  }\r\n}\r\n","@if (!lightSpeedEnabled()) {\r\n  <div class=\"eav-grid-action-button disabled\" tippy=\"Lightspeed is disabled\" (click)=\"openLightspeedFeatureInfo()\">\r\n    <mat-icon matBadgeSize=\"small\" matBadge=\"💎\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n  </div>\r\n} @else {\r\n  <div\r\n    class=\"eav-grid-action-button {{ appHasLightSpeed ? '' : 'disabled' }}\"\r\n    matRipple\r\n    [tippy]=\"appHasLightSpeed ? lightSpeed.Title : 'Not yet configured for LightSpeed'\"\r\n    (click)=\"openLightspeed()\"\r\n  >\r\n    @if (appLightSpeedEnabled) {\r\n      <mat-icon matBadgeSize=\"small\" matBadge=\"✅\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n    } @else {\r\n      <mat-icon matBadgeSize=\"small\" matBadge=\"⛔\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n    }\r\n  </div>\r\n}\r\n","import { eavConstants } from '../shared/constants/eav.constants';\r\nimport { EditForm, EditPrep } from '../shared/models/edit-form.model';\r\n\r\nexport class AppAdminHelpers {\r\n  public static getLightSpeedEditParams(appId: number) {\r\n    const form: EditForm = {\r\n      items: [\r\n        EditPrep.newMetadata(appId, eavConstants.appMetadata.LightSpeed.ContentTypeName, eavConstants.metadata.app, true),\r\n      ],\r\n    };\r\n    return form;\r\n  }\r\n}\r\n","import { computed, Injectable, signal, Signal } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { Of } from '../../../../../core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { AnalyzeParts, SettingsStackItem } from '../sub-dialogs/analyze-settings/analyze-settings.models';\r\n\r\n@Injectable()\r\nexport class AnalyzeSettingsService extends HttpServiceBase {\r\n\r\n\r\n  // TEMP, not sure if this are correct\r\n  getStackSig(part: Of<typeof AnalyzeParts>, key?: string, view?: string, stringifyValue = false): Signal<SettingsStackItem[]> {\r\n    const stackSignal = signal<SettingsStackItem[]>([]);\r\n\r\n    this.getAndWrite<SettingsStackItem[]>(webApiAppRoot + 'GetStack', {\r\n      params: {\r\n        appId: this.appId,\r\n        part,\r\n        ...(key && { key }),\r\n        ...(view && { view }),\r\n      },\r\n    }, stackSignal);\r\n\r\n    return computed(() => stringifyValue\r\n      ? stackSignal().map(stackItem => ({ ...stackItem, _value: JSON.stringify(stackItem.Value) }))\r\n      : stackSignal()\r\n    );\r\n  }\r\n\r\n\r\n  getStack(part: Of<typeof AnalyzeParts>, key?: string, view?: string, stringifyValue = false): Observable<SettingsStackItem[]> {\r\n\r\n    return this.getHttp<SettingsStackItem[]>(webApiAppRoot + 'GetStack', {\r\n      params: {\r\n        appId: this.appId,\r\n        part,\r\n        ...(key && { key }),\r\n        ...(view && { view }),\r\n      },\r\n    }).pipe(\r\n      map(stack => {\r\n\r\n        if (!stringifyValue) { return stack; }\r\n\r\n        for (const stackItem of stack) {\r\n          stackItem._value = JSON.stringify(stackItem.Value);\r\n        }\r\n        return stack;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { JsonHelpers } from '../../../../shared/helpers/json.helpers';\r\nimport { ClipboardService } from '../../../../shared/services/clipboard.service';\r\n\r\n@Component({\r\n  selector: 'app-analyze-settings-value',\r\n  templateUrl: './analyze-settings-value.component.html',\r\n  styleUrls: ['./analyze-settings-value.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class AnalyzeSettingsValueComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n\r\n  constructor() { }\r\n\r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n  \r\n  copy(value: string) {\r\n    value = JsonHelpers.tryParse(value) ?? value;\r\n    this.clipboard.copyToClipboard(value);\r\n  }\r\n}\r\n","<div matRipple class=\"value-box highlight\" [tippy]=\"value\" (click)=\"copy(value)\">\r\n  <span class=\"value\">{{ value }}</span>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { App, PendingApp } from '../models/app.model';\r\n\r\n const webApiAppRootList = 'admin/app/list';\r\n const webApiAppRootInheritableApps = 'admin/app/InheritableApps';\r\n const webApiAppRootPendingApps = 'admin/app/GetPendingApps';\r\n const webApiAppRootApp = 'admin/app/app';\r\n const webApiAppRootInstallPendingApps = 'admin/app/InstallPendingApps';\r\n const webApiAppRootFlushcache = 'admin/app/flushcache';\r\n\r\n@Injectable()\r\nexport class AppsListService extends HttpServiceBase {\r\n\r\n  getAll() {\r\n    return this.getSignal<App[]>(webApiAppRootList, {\r\n      params: { zoneId: this.zoneId }\r\n    });\r\n  }\r\n\r\n  getInheritable() {\r\n    return this.getSignal<App[]>(webApiAppRootInheritableApps, {\r\n      params: { zoneId: this.zoneId }\r\n    });\r\n  }\r\n\r\n  getPendingApps() {\r\n    return this.getSignal<PendingApp[]>(webApiAppRootPendingApps, {\r\n      params: { zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  create(name: string, inheritAppId?: number, templateId?: number) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootApp), {}, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n        name,\r\n        ...(inheritAppId != null && { inheritAppId }),\r\n        ...(templateId != null && { templateId }),\r\n      },\r\n    });\r\n  }\r\n\r\n  installPendingApps(pendingApps: PendingApp[]) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootInstallPendingApps), pendingApps, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(appId: number) {\r\n    return this.http.delete<null>(this.apiUrl(webApiAppRootApp), {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n  flushCache(appId: number) {\r\n    return this.getHttpApiUrl<null>(webApiAppRootFlushcache, {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { FeatureState } from '../../features/models';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { License, LicenseDownloadInfo, LicenseUploadInfo } from '../models/license.model';\r\n\r\nconst webAPiLicenseRetrieve = 'sys/license/Retrieve';\r\nconst webApiFeatSaveNew = 'admin/feature/SaveNew';\r\nconst webApiLicSummary = 'sys/license/Summary';\r\nconst webApiUpload = 'sys/license/Upload';\r\n\r\n@Injectable()\r\nexport class FeaturesConfigService extends HttpServiceBase {\r\n\r\n  saveFeatures(featuresStates: FeatureState[]): Observable<null> {\r\n    return this.http.post<null>(this.apiUrl(webApiFeatSaveNew), featuresStates);\r\n  }\r\n\r\n  getLicenses(): Observable<License[]> { // Use new Signals\r\n    return this.getHttpApiUrl<License[]>(webApiLicSummary);\r\n\r\n  }\r\n\r\n  uploadLicense(file: File): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<LicenseUploadInfo>(this.apiUrl(webApiUpload), formData)\r\n      .pipe(\r\n        map(info => ({\r\n          Success: info.Success,\r\n          Messages: [{\r\n            MessageType: info.Success ? FileUploadMessageTypes.Success : FileUploadMessageTypes.Error,\r\n            Text: `License ${info.Success ? 'uploaded' : 'upload failed'}: ${info.Message}`,\r\n          }],\r\n        } satisfies FileUploadResult)),\r\n      );\r\n  }\r\n\r\n  retrieveLicense(): Observable<LicenseDownloadInfo> {\r\n    return this.getHttpApiUrl<LicenseDownloadInfo>(webAPiLicenseRetrieve);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { SiteLanguage, SiteLanguagePermissions } from '../models/site-language.model';\r\nimport { SystemInfoSet } from '../models/system-info.model';\r\n\r\nconst webApiZoneRoot = 'admin/zone/';\r\n\r\n@Injectable()\r\nexport class ZoneService extends HttpServiceBase {\r\n\r\n  getLanguages() {\r\n    return this.getHttpApiUrl<SiteLanguage[]>(webApiZoneRoot + 'GetLanguages');\r\n  }\r\n\r\n  toggleLanguage(code: string, enable: boolean) {\r\n    return this.getHttpApiUrl<null>(webApiZoneRoot + 'SwitchLanguage', {\r\n      params: { cultureCode: code, enable: enable.toString() },\r\n    });\r\n  }\r\n\r\n  getSystemInfo() {\r\n    return this.getHttpApiUrl<SystemInfoSet>(webApiZoneRoot + 'GetSystemInfo');\r\n  }\r\n\r\n  getLanguagesPermissions() {\r\n    return this.getHttpApiUrl<SiteLanguagePermissions[]>(webApiAppRoot + 'languages', {\r\n      params: { appId: this.appId },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { webApiTypeRoot } from '../../app-administration/services/content-types.service';\r\nimport { ContentExport } from '../models/content-export.model';\r\nimport { webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\n\r\n@Injectable()\r\nexport class ContentExportService extends HttpServiceBase {\r\n\r\n  exportContent(values: ContentExport, selectedIds: number[]) {\r\n    const selectedIdsString = selectedIds ? '&selectedids=' + selectedIds.join() : '';\r\n    const url = this.apiUrl(webApiEntityRoot + 'Download')\r\n      + '?appId=' + this.appId\r\n      + '&language=' + values.language\r\n      + '&defaultLanguage=' + values.defaultLanguage\r\n      + '&contentType=' + values.contentTypeStaticName\r\n      + '&recordExport=' + values.recordExport\r\n      + '&resourcesReferences=' + values.resourcesReferences\r\n      + '&languageReferences=' + values.languageReferences\r\n      + selectedIdsString;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  exportJson(typeName: string) {\r\n    const url = this.apiUrl(webApiTypeRoot + 'Json')\r\n      + '?appId=' + this.appId\r\n      + '&name=' + typeName;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  exportEntity(id: number, prefix: string, metadata: boolean) {\r\n    const url = this.apiUrl(webApiEntityRoot + 'Json')\r\n      + '?appId=' + this.appId\r\n      + '&id=' + id\r\n      + '&prefix=' + prefix\r\n      + '&withMetadata=' + metadata;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentItemsDialog: DialogConfig = {\r\n  name: 'CONTENT_ITEMS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentItemsComponent } = await import('./content-items.component');\r\n    return ContentItemsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { importContentItemDialog } from './import-content-item/import-content-item-dialog.config';\r\nimport { contentItemsDialog } from './content-items-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const contentItemsRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentItemsDialog },\r\n    children: [\r\n      ...GoToMetadata.getRoutes(),\r\n      {\r\n        path: 'export/:contentTypeStaticName',\r\n        loadChildren: () => import('../content-export/content-export.routing').then(m => m.ContentExportRoutes)\r\n      },\r\n      {\r\n        path: 'export/:contentTypeStaticName/:selectedIds',\r\n        loadChildren: () => import('../content-export/content-export.routing').then(m => m.ContentExportRoutes)\r\n      },\r\n      {\r\n        path: 'import',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: importContentItemDialog }\r\n      },\r\n      {\r\n        path: ':contentTypeStaticName/import',\r\n        loadChildren: () => import('../content-import/content-import.routing').then(m => m.contentImportRoutes),\r\n        data: { title: 'Import Items' },\r\n      },\r\n      ...EditRoutes,\r\n    ]\r\n  },\r\n];\r\n\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const importContentItemDialog: DialogConfig = {\r\n  name: 'IMPORT_CONTENT_ITEM_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ImportContentItemComponent: ImportContentItemComponent } = await import('./import-content-item.component');\r\n    return ImportContentItemComponent;\r\n  }\r\n};\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { webApiEntityList, webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentItem } from '../models/content-item.model';\r\n\r\n@Injectable()\r\nexport class ContentItemsService extends HttpServiceBase {\r\n\r\n  getAll(contentTypeStaticName: string) {\r\n    return this.getHttpApiUrl<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  getAllSig(contentTypeStaticName: string, initial: undefined): Signal<ContentItem[]> {\r\n    return this.getSignal<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    }, initial);\r\n  }\r\n\r\n  getColumns(contentTypeStaticName: string) {\r\n    return this.getHttpApiUrl<Field[]>(webApiFieldsAll, {\r\n      params: { appId: this.appId, staticName: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  importItem(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.apiUrl(webApiEntityRoot + 'upload'), {\r\n          AppId: this.appId,\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentTypeFieldsDialog: DialogConfig = {\r\n  name: 'CONTENT_TYPE_FIELDS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentTypeFieldsComponent } = await import('./content-type-fields.component');\r\n    return ContentTypeFieldsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { GoToPermissions } from '../permissions/go-to-permissions';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { contentTypeFieldsDialog } from './content-type-fields-dialog.config';\r\nimport { editContentTypeFieldsDialog } from './edit-content-type-fields/edit-content-type-fields-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const contentTypeFieldsRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentTypeFieldsDialog },\r\n    children: [\r\n      {\r\n        path: 'add/:contentTypeStaticName',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: editContentTypeFieldsDialog }\r\n      },\r\n      {\r\n        path: 'update/:contentTypeStaticName/:id/:editMode',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: editContentTypeFieldsDialog },\r\n      },\r\n      ...GoToMetadata.getRoutes(),\r\n      GoToPermissions.route,\r\n      ...EditRoutes,\r\n    ]\r\n  }\r\n];\r\n\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const editContentTypeFieldsDialog: DialogConfig = {\r\n  name: 'EDIT_CONTENT_TYPE_FIELDS_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { EditContentTypeFieldsComponent } = await import('./edit-content-type-fields.component');\r\n    return EditContentTypeFieldsComponent;\r\n  }\r\n};\r\n","import { Component, HostBinding, OnInit } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { FileLocationFormValues } from '..';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\n\r\n@Component({\r\n  selector: 'app-file-location-dialog',\r\n  templateUrl: './file-location-dialog.component.html',\r\n  styleUrls: ['./file-location-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatButtonModule,\r\n    FieldHintComponent,\r\n  ]\r\n})\r\nexport class FileLocationDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n\r\n  constructor(private dialog: MatDialogRef<FileLocationDialogComponent>) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new UntypedFormGroup({\r\n      isShared: new UntypedFormControl(null, Validators.required),\r\n    });\r\n  }\r\n\r\n  closeDialog(isShared?: boolean): void {\r\n    this.dialog.close(isShared);\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: FileLocationFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.isShared);\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>New file location</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Shared -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Location</mat-label>\r\n        <mat-select formControlName=\"isShared\">\r\n          <mat-option [value]=\"false\">App</mat-option>\r\n          <mat-option [value]=\"true\">Shared (global)</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      @if (form.controls.isShared.touched && form.controls.isShared.errors?.required) {\r\n        <app-field-hint [isError]=\"true\">\r\n          This field is required\r\n        </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\" (click)=\"confirm()\">\r\n      Confirm\r\n    </button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","export * from './file-location-dialog/file-location-dialog.component';\r\nexport * from './file-location-dialog/file-location-dialog.models';\r\nexport * from './create-file-dialog.component';\r\nexport * from './create-file-dialog.models';\r\n// export * from './create-file-dialog.module';\r\n","import { environment } from '../../environments/environment';\r\n\r\n/**\r\n * List of fields to debug across the entire application.\r\n * \r\n * Change as you need, but after debugging, best set it back to [].\r\n */\r\nexport const DebugFields: string[] = !environment.production\r\n  // ? ['StringPicker']\r\n  // ? ['NumberInputAddUntillDevisibleBy5']\r\n  // ? ['WysiwygConfiguration']\r\n  // ? ['Items']\r\n  ? ['ViewController']\r\n  // ? ['Title']\r\n  // ? [] // no fields\r\n  // ? ['*'] // all fields\r\n  : [];\r\n","import { AbstractControl } from '@angular/forms';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FieldValueHelpers } from '../helpers/field-value.helpers';\r\nimport { ValidationMsgHelper } from '../validation/validation-messages.helpers';\r\nimport { AbstractControlPro } from '../validation/validation.helpers';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  markTouched: false,\r\n  set: false,\r\n  disable: false,\r\n  getErrors: true,\r\n  fields: [...DebugFields, '*'],\r\n};\r\n\r\nconst pfx = 'ValidationMessage.';\r\n\r\n/**\r\n * Provides information about the UI Control, but NOT the value.\r\n * It is used to simplify the logic when interacting with the Angular Virtual Form.\r\n */\r\nexport class UiControl {\r\n\r\n  log = classLog({UiControl}, logSpecs);\r\n\r\n  constructor(\r\n    public control: AbstractControl,\r\n    private name = 'unknown',\r\n    private moreDisabled: boolean = false,\r\n  ) {\r\n    // Patch control with dummy object for the nullable case where we're just creating a fake control...\r\n    this.control ??= { dirty: false, invalid: false, touched: false, value: null, disabled: false } as AbstractControl;\r\n    this.log.extendName(`[${name}]`);\r\n    this.log.aIfInList('fields', this.name, { moreDisabled }, 'constructor');\r\n  }\r\n\r\n  static emptyControl() {\r\n    return new UiControl({ dirty: false, invalid: false, touched: false, value: null, disabled: false } as AbstractControl);\r\n  }\r\n\r\n  //#region simple direct properties & complex properties\r\n  get dirty() { return this.control.dirty; }\r\n  get invalid() { return this.control.invalid; }\r\n  get touched() { return this.control.touched; }\r\n  get disabled() { return this.control.disabled || this.moreDisabled; }\r\n  get touchedAndInvalid() { return this.control.touched && this.control.invalid; }\r\n  //#endregion\r\n\r\n  //#region methods\r\n\r\n  markTouched(): void {\r\n    this.log.aIfInList('fields', this.name, null, 'markTouched');\r\n    UiControl.markTouched(this.control);\r\n  }\r\n\r\n  setIfChanged(newValue: FieldValue): void {\r\n    const before = this.control.value;\r\n    this.log.aIfInList('fields', this.name, { before, newValue }, 'setIfChanged');\r\n    if (isEqual(newValue, this.control.value)) return;\r\n    this.#set(newValue);\r\n  }\r\n\r\n  /** Use to update form controls value */\r\n  #set(newValue: FieldValue): void {\r\n    const control = this.control;\r\n    const before = control.value;\r\n    this.log.aIfInList('fields', this.name, { before, newValue }, 'set');\r\n\r\n    if (!control.touched)\r\n      control.markAsTouched();\r\n\r\n    if (!control.dirty && !FieldValueHelpers.fieldValuesAreEqual(before, newValue))\r\n      control.markAsDirty();\r\n\r\n    // Note: 2024-10-21 ca. 18.02 we have some timing issues, error always seems to show previous error; maybe fixed now, otherwise revisit\r\n    // Set value must happen at the end, otherwise errors will be late by one cycle\r\n    // for example, they could show \"required\" after the value was\r\n    control.patchValue(newValue);\r\n  }\r\n\r\n  disable(disable: boolean): void {\r\n    this.log.aIfInList('fields', this.name, null, `disable: ${disable}`);\r\n    UiControl.disable(this.control, disable);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region private helpers\r\n\r\n  /** TODO: Try to remove this by assigning controls [formControlName] in [formGroup] */\r\n  static markTouched(control: AbstractControl): void {\r\n    if (control.touched)\r\n      return;\r\n\r\n    control.markAsTouched();\r\n    control.updateValueAndValidity();\r\n  }\r\n\r\n  /** Disables/enables control if not already disabled/enabled. Use this helper to trigger fewer events on the form */\r\n  static disable(control: AbstractControl, disable: boolean) {\r\n    if (control.disabled === disable)\r\n      return;\r\n\r\n    if (disable)\r\n      control.disable();\r\n    else\r\n      control.enable();\r\n  }\r\n  //#endregion\r\n\r\n  /** Calculates error message */\r\n  getErrors(): string {\r\n    const control = this.control;\r\n    const errors = control.errors;\r\n    const l = this.log.fnIfInList('getErrors', 'fields', this.name, { control, name: this.name });\r\n    if (!control.invalid)\r\n      return l.r('', 'valid');\r\n    if (!control.dirty && !control.touched)\r\n      return l.r('', 'not dirty or touched');\r\n\r\n    for (const errorKey of Object.keys(errors)) {\r\n      const error = (errorKey === 'formulaError')\r\n        ? control.errors['formulaMessage'] ?? ValidationMsgHelper.messages[errorKey]?.(true)\r\n        : ValidationMsgHelper.messages[errorKey]?.(true);\r\n      if (error)\r\n        return l.r(error, 'error found');\r\n    }\r\n\r\n    return l.r('', 'no error');\r\n  }\r\n\r\n  #warningMessages: Record<string, string> = {\r\n    jsonWarning: `${pfx}JsonWarning`,\r\n    formulaWarning: `${pfx}NotValid`,\r\n  };\r\n\r\n  getWarnings(): string {\r\n    const control = this.control as AbstractControlPro;\r\n    if (control._warning == null)\r\n      return '';\r\n    if (!control.dirty && !control.touched)\r\n      return '';\r\n\r\n    let warning = '';\r\n    for (const warningKey of Object.keys(control._warning)) {\r\n      warning = (warningKey === 'formulaWarning')\r\n        ? control._warning['formulaMessage'] ?? this.#warningMessages[warningKey]\r\n        : this.#warningMessages[warningKey];\r\n      if (warning)\r\n        break;\r\n    }\r\n    return warning;\r\n  }\r\n}\r\n","import { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { RxHelpers } from '../../../shared/rxJs/rx.helpers';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\n\r\n\r\nexport class FieldValueHelpers {\r\n  /** Detect if two values are equal, incl. special NaN and Array checks */\r\n  static fieldValuesAreEqual(x: FieldValue, y: FieldValue): boolean {\r\n    if (x === y) return true;\r\n    if (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y)) return true;\r\n    if (Array.isArray(x) && Array.isArray(y) && RxHelpers.arraysEqual(x, y)) return true;\r\n    return false;\r\n  }\r\n\r\n  /** Searches where newValues has values different from oldValues */\r\n  static getItemValuesChanges(oldValues: ItemValuesOfLanguage, newValues: ItemValuesOfLanguage): ItemValuesOfLanguage {\r\n    const changes: ItemValuesOfLanguage = {};\r\n    for (const key of Object.keys(newValues)) {\r\n      const newValue = newValues[key];\r\n      const oldValue = oldValues[key];\r\n      if (FieldValueHelpers.fieldValuesAreEqual(newValue, oldValue))\r\n        continue;\r\n\r\n      changes[key] = newValue;\r\n    }\r\n    return Object.keys(changes).length === 0 ? undefined : changes;\r\n  }\r\n}\r\n","import { UntypedFormGroup } from '@angular/forms';\r\nimport { UiControl } from '../controls/ui-control';\r\n\r\n// prefix for translation keys\r\nconst prefix = 'ValidationMessage.';\r\nconst notValid = 'ValidationMessage.NotValid';\r\n\r\nexport class ValidationMsgHelper {\r\n\r\n  public static messages: Record<string, (long: boolean) => string> = {\r\n    required: (long: boolean) => long ? `${prefix}Required` : `${prefix}RequiredShort` /* short version in snackbar*/,\r\n    min: (long: boolean) => long ? `${prefix}Min` : notValid,\r\n    max: (long: boolean) => long ? `${prefix}Max` : notValid,\r\n    minNoItems: (long: boolean) => long ? `${prefix}MinNoItems` : notValid,\r\n    maxNoItems: (long: boolean) => long ? `${prefix}MaxNoItems` : notValid,\r\n    pattern: (long: boolean) => long ? `${prefix}Pattern` : notValid,\r\n    decimals: (long: boolean) => long ? `${prefix}Decimals` : notValid,\r\n    jsonError: (long: boolean) => long ? `${prefix}JsonError` : notValid,\r\n    formulaError: (long: boolean) => notValid,\r\n  };\r\n\r\n  /** Marks controls as touched to show errors beneath controls and collects error messages */\r\n  static validateForm(form: UntypedFormGroup): Record<string, string> {\r\n    const errors: Record<string, string> = {};\r\n    for (const [controlKey, control] of Object.entries(form.controls)) {\r\n      UiControl.markTouched(control);\r\n\r\n      if (!control.invalid) continue;\r\n\r\n      for (const errorKey of Object.keys(control.errors)) {\r\n        errors[controlKey] = this.messages[errorKey]?.(false);\r\n        if (errors[controlKey]) break;\r\n      }\r\n    }\r\n    return errors;\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const importAppDialog: DialogConfig = {\r\n  name: 'IMPORT_APP_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ImportAppComponent } = await import('./import-app.component');\r\n    return ImportAppComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { importAppDialog } from './import-app-dialog.config';\r\n\r\nexport const importRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: importAppDialog }\r\n  }\r\n];\r\n\r\n","import { Injectable } from '@angular/core';\r\nimport { ReplaceConfig } from '../../replace-content/replace-config.model';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentGroup, ContentGroupAdd } from '../models/content-group.model';\r\nimport { GroupHeader } from '../models/group-header.model';\r\n\r\nconst webApiContentGroup = 'cms/contentgroup/';\r\n\r\n@Injectable()\r\nexport class ContentGroupService extends HttpServiceBase {\r\n\r\n  getItems(item: ContentGroup) {\r\n    return this.getHttpApiUrl<ReplaceConfig>(webApiContentGroup + 'replace', {\r\n      params: { appId: this.appId, guid: item.guid, part: item.part, index: item.index.toString() }\r\n    });\r\n  }\r\n\r\n  saveItem(item: ContentGroupAdd) {\r\n    return this.http.post<null>(this.apiUrl(webApiContentGroup + 'replace'), {}, {\r\n      params: { guid: item.guid, part: item.part, index: item.index.toString(), entityId: item.id.toString(), add: `${item.add}` }\r\n    });\r\n  }\r\n\r\n  removeItem(contentGroup: ContentGroup, index: number) {\r\n    // note: the server checks if the part == 'content' and will automatically treat it as a pair with presentation\r\n    return this.http.delete<null>(this.apiUrl('cms/list/delete'), {\r\n      params: { index: index, parent: contentGroup.guid, fields: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getList(contentGroup: ContentGroup) {\r\n    return this.getHttpApiUrl<GroupHeader[]>(webApiContentGroup + 'itemlist', {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  saveList(contentGroup: ContentGroup, resortedList: GroupHeader[]) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiContentGroup + 'itemlist'), resortedList, {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getHeader(contentGroup: ContentGroup) {\r\n    return this.getHttpApiUrl<GroupHeader>(webApiContentGroup + 'header', {\r\n      params: { appId: this.appId, guid: contentGroup.guid }\r\n    });\r\n  }\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const replaceContentDialog: DialogConfig = {\r\n  name: 'REPLACE_CONTENT_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ReplaceContentComponent } = await import('./replace-content.component');\r\n    return ReplaceContentComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { replaceContentDialog } from './replace-content-dialog.config';\r\nimport { EditRoutesNoHistory } from '../edit/edit.routing';\r\n\r\nexport const replaceContentRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: replaceContentDialog },\r\n    children: [\r\n      // Note 2024-07-01 2dm - not sure why it is configured without history, but to be safe I'll keep it for now\r\n      ...EditRoutesNoHistory\r\n    ],\r\n  },\r\n];\r\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NavigateFormResult } from '../../../edit/routing/edit-routing.service';\r\nimport { classLog } from '../../logging';\r\nimport { DialogConfig } from '../../models/dialog-config.model';\r\nimport { EavWindow } from '../../models/eav-window.model';\r\nimport { Context } from '../../services/context';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n  selector: 'app-dialog-entry',\r\n  templateUrl: './dialog-entry.component.html',\r\n  standalone: true,\r\n  imports: [],\r\n  providers: [\r\n    Context, // this is used in the dialog to get the correct App\r\n  ],\r\n})\r\nexport class DialogEntryComponent implements OnInit, OnDestroy {\r\n  \r\n  log = classLog({DialogEntryComponent});\r\n  \r\n  #dialogData: Record<string, any>;\r\n  #dialog: MatDialogRef<any>;\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    const navigation = this.router.getCurrentNavigation();\r\n    this.#dialogData = navigation?.extras?.state || {};\r\n  }\r\n\r\n  ngOnInit() {\r\n    const l = this.log.fn('ngOnInit');\r\n    const dialogConfig: DialogConfig = this.route.snapshot.data.dialog;\r\n    if (dialogConfig == null)\r\n      throw new Error(`Could not find config for dialog. Did you forget to add DialogConfig to route data?`);\r\n\r\n    l.a('Open dialog: '+ dialogConfig.name, { id: this.context.id, context: this.context });\r\n\r\n    dialogConfig.getComponent().then(component => {\r\n      // spm Workaround for \"feature\" where you can't open new dialog while last one is still opening\r\n      // https://github.com/angular/components/commit/728cf1c8ebd49e089f4bae945511bb0918972c26\r\n      const dialog = (this.matDialog as any);\r\n      if (dialog._dialogAnimatingOpen && dialog._lastDialogRef)\r\n        (dialog._lastDialogRef as MatDialogRef<any>).afterOpened()\r\n          .subscribe(() => this.openDialogComponent(dialogConfig, component));\r\n      else\r\n        this.openDialogComponent(dialogConfig, component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#dialog.close();\r\n  }\r\n\r\n  private openDialogComponent(dialogConfig: DialogConfig, component: Type<any>) {\r\n    this.log.a(`Open dialog(initContext: ${dialogConfig.initContext})`, { name: dialogConfig.name, 'Contextid:': this.context.log.svcId, 'Context:': this.context });\r\n    if (dialogConfig.initContext)\r\n      this.context.init(this.route);\r\n\r\n    this.#dialog = this.matDialog.open(component, {\r\n      autoFocus: false,\r\n      backdropClass: 'dialog-backdrop',\r\n      closeOnNavigation: false,\r\n      data: this.#dialogData,\r\n      panelClass: [\r\n        'dialog-panel',\r\n        `dialog-panel-${dialogConfig.panelSize}`,\r\n        dialogConfig.showScrollbar ? 'show-scrollbar' : 'no-scrollbar',\r\n        ...(dialogConfig.panelClass ? dialogConfig.panelClass : []),\r\n      ],\r\n      // spm NOTE: position used to force align-items: flex-start; on cdk-global-overlay-wrapper.\r\n      // Real top margin is overwritten in css e.g. dialog-panel-large\r\n      position: { top: '0' },\r\n      viewContainerRef: this.viewContainerRef,\r\n    });\r\n\r\n    this.#dialog.afterClosed().subscribe((data: any) => {\r\n      this.log.a('Dialog was closed - name:' + dialogConfig.name, { data });\r\n\r\n      const navRes = data as NavigateFormResult;\r\n      if (navRes?.navigateUrl != null) {\r\n        this.router.navigate([navRes.navigateUrl]);\r\n        return;\r\n      }\r\n\r\n      if (this.route.pathFromRoot.length <= 3) {\r\n        try {\r\n          window.parent.$2sxc.totalPopup.close();\r\n        } catch (error) { }\r\n        return;\r\n      }\r\n\r\n      if (this.route.snapshot.url.length > 0)\r\n        this.router.navigate(['./'], { relativeTo: this.route.parent, state: data });\r\n      else\r\n        this.router.navigate(['./'], { relativeTo: this.route.parent.parent, state: data });\r\n    });\r\n\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","/**\r\n * Do not reuse regex:\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test#using_test_on_a_regex_with_the_global_flag\r\n */\r\nexport function guidRegex(): RegExp {\r\n  return /^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i;\r\n}\r\n","\r\nexport class JsonHelpers {\r\n\r\n  /** Tries to parse string as JSON */\r\n  static tryParse(input: string): any {\r\n    try {\r\n      return JSON.parse(input);\r\n    } catch { }\r\n  }\r\n}\r\n","import { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport function loadScripts(scriptObjects: ScriptObject[], callback: () => void, iteration = 0) {\r\n  const isLast = scriptObjects.length === iteration + 1;\r\n  const newCallback = isLast ? callback : loadScripts.bind(this, scriptObjects, callback, iteration + 1);\r\n  const scrObj = scriptObjects[iteration];\r\n\r\n  const global = typeof scrObj.test === 'string' ? scrObj.test : null;\r\n  const test = typeof scrObj.test === 'function' ? scrObj.test : null;\r\n  const w = window as Record<string, any>;\r\n\r\n  if (global != null && !!w[global]) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  if (test != null && test()) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  window.require([scrObj.src], (exportedVar: any) => {\r\n    if (exportedVar && !w[global]) {\r\n      w[global] = exportedVar;\r\n    }\r\n    newCallback();\r\n  });\r\n}\r\n\r\nexport interface ScriptObject {\r\n  /** window.xxx or a function that returns a boolean */\r\n  test: string | (() => boolean);\r\n  src: string;\r\n}\r\n","import { EnvironmentSpecs } from '@2sic.com/2sxc-typings';\r\nimport { DialogContextApp } from '../models/dialog-context.models';\r\nimport { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n/**\r\n * This ensures that $2sxc is fully initialized with parameters which are provided later on\r\n * The appApi is being added in v12\r\n * It's important because in Oqtane the app-api root is different in from the normal admin-apis\r\n */\r\nexport function UpdateEnvVarsFromDialogSettings(appContext: DialogContextApp): void {\r\n  try {\r\n    const includedApiRoot = appContext?.Api;\r\n    if (!includedApiRoot) return;\r\n\r\n    const old2sxcHeader = (window.$2sxc.env as any).header as EnvironmentSpecs;\r\n    const new2sxcHeader = { ...old2sxcHeader, appApi: includedApiRoot } as EnvironmentSpecs;\r\n    window.$2sxc.env.load(new2sxcHeader);\r\n  } catch { /* ignore */ }\r\n}\r\n","import { Of } from '../../../../../core';\r\nimport { PermissionsCount } from '../../app-administration/models/permissions-count.model';\r\nimport { Language } from './language.model';\r\n\r\nexport interface DialogContextApp {\r\n  /** Root for app APIs and content/query */\r\n  Api: string;\r\n  Folder: string;\r\n  GettingStartedUrl: string;\r\n  Id: number;\r\n  Identifier: string;\r\n  IsContentApp: boolean;\r\n  IsGlobalApp: boolean;\r\n  IsInherited: boolean;\r\n  IsShared: boolean;\r\n  IsSiteApp: boolean;\r\n  Name: string;\r\n  Permissions: PermissionsCount;\r\n  SettingsScope: Of<typeof AppScopes>;\r\n  Url: string;\r\n  SharedUrl: string;\r\n\r\n  /** New app icon */\r\n  Icon: string;\r\n}\r\n\r\nexport interface ApiKeySpecs {\r\n  NameId: string;\r\n  ApiKey: string;\r\n  IsDemo: boolean;\r\n}\r\n\r\nexport const AppScopes = {\r\n  App: 'App',\r\n  Site: 'Site',\r\n  Global: 'Global',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n\r\nexport interface DialogContextEnable {\r\n  /** Determines if app admin should show app-permissions (true for Apps, false for Content and Global) */\r\n  AppPermissions?: boolean;\r\n  /** Determines if Code editing should be enabled (true for super-users) */\r\n  CodeEditor?: boolean;\r\n  DebugMode: boolean;\r\n  /** True if saving of formulas should be enabled (for edit-ui) */\r\n  FormulaSave?: boolean;\r\n  /** While debug is enabled, this allows some Edit Ui actions even when they are disabled in fields settings */\r\n  OverrideEditRestrictions?: boolean;\r\n  /** Determines if Queries should be enabled (true for Apps) */\r\n  Query?: boolean;\r\n}\r\n\r\nexport interface DialogContextLanguage {\r\n  Current: string;\r\n  List: Language[];\r\n  Primary: string;\r\n}\r\n\r\nexport interface DialogContextPage {\r\n  Id: number;\r\n}\r\n\r\nexport interface DialogContextSite {\r\n  DefaultApp: DialogContextSiteApp;\r\n  Id: number;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSystem {\r\n  DefaultApp: DialogContextSiteApp;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSiteApp {\r\n  ZoneId: number;\r\n  AppId: number;\r\n}\r\n\r\nexport interface DialogContextUser {\r\n  Email: string;\r\n  Id: number;\r\n  Guid: string;\r\n  IsAnonymous: boolean;\r\n  IsSiteAdmin: boolean;\r\n  IsContentAdmin: boolean;\r\n  IsSystemAdmin: boolean;\r\n  Name: string;\r\n  Username: string;\r\n}\r\n\r\n// export interface DialogContextFeature {\r\n//   NameId: string;\r\n//   Enabled: boolean;\r\n// }\r\n","import { Injectable } from '@angular/core';\r\nimport { DialogTypeConstants } from '../constants/dialog-type.constants';\r\n// tslint:disable-next-line:max-line-length\r\nimport { keyAppId, keyContentBlockId, keyDebug, keyDialog, keyExtras, keyIsShared, keyItems, keyModuleId, keyPartOfPage, keyPipelineId, keyUrl, keyZoneId, prefix } from '../constants/session.constants';\r\nimport { DialogHashParams, ExtrasParam } from '../models/dialog-url-params.model';\r\nimport { EditForm, EditPrep, ViewOrFileIdentifier } from '../models/edit-form.model';\r\nimport { HttpServiceBase } from './http-service-base';\r\n\r\n@Injectable()\r\nexport class DialogService extends HttpServiceBase {\r\n\r\n  openCodeFile(path: string, isShared: boolean, templateId?: number) {\r\n    const dialog = DialogTypeConstants.Develop;\r\n    const form = {\r\n      items: [{\r\n        Path: path,\r\n        ...(templateId != null && EditPrep.editId(templateId)),\r\n      }] as ViewOrFileIdentifier[]\r\n    };\r\n\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyDialog, dialog),\r\n      ...this.buildHashParam(keyIsShared, isShared.toString()),\r\n      ...this.buildHashParam(keyItems, JSON.stringify(form.items)),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openQueryDesigner(queryId: number) {\r\n    const dialog = DialogTypeConstants.PipelineDesigner;\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(queryId)],\r\n    };\r\n\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyDialog, dialog),\r\n      ...this.buildHashParam(keyPipelineId, queryId.toString()),\r\n      ...this.buildHashParam(keyItems, JSON.stringify(form.items)),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openAppsManagement(zoneId: number, tab?: string) {\r\n    const extras: ExtrasParam = {\r\n      ...(tab && { tab }),\r\n    };\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyZoneId, zoneId.toString()),\r\n      ...this.buildHashParam(keyDialog, DialogTypeConstants.Zone),\r\n      ...(Object.keys(extras).length ? this.buildHashParam(keyExtras, JSON.stringify(extras)) : ''),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openAppAdministration(zoneId: number, appId: number, tab?: string, scope?: string) {\r\n    const extras: ExtrasParam = {\r\n      ...(tab && { tab }),\r\n      ...(scope && { scope }),\r\n    };\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyZoneId, zoneId.toString()),\r\n      ...this.buildHashParam(keyAppId, appId.toString()),\r\n      ...this.buildHashParam(keyDialog, DialogTypeConstants.App),\r\n      ...(Object.keys(extras).length ? this.buildHashParam(keyExtras, JSON.stringify(extras)) : ''),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  /** A lot of the link is identical when opening the admin-dialogs in a new window */\r\n  private buildSharedHashParams() {\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyZoneId, this.zoneId),\r\n      ...this.buildHashParam(keyAppId, this.appId),\r\n      ...this.buildHashParam(keyModuleId, this.context.moduleId?.toString()),\r\n      ...this.buildHashParam(keyContentBlockId, this.context.contentBlockId?.toString()),\r\n      ...this.buildHashParam(keyPartOfPage),\r\n      ...(sessionStorage.getItem(keyDebug) ? this.buildHashParam(keyDebug) : {}),\r\n    };\r\n    return hashParams;\r\n  }\r\n\r\n  /** Encodes param if necessary */\r\n  private buildHashParam(key: string, value?: string) {\r\n    const rawKey = key.replace(prefix, '');\r\n    const valueTemp = (value != null) ? value : sessionStorage.getItem(key);\r\n    const rawValue = encodeURIComponent(valueTemp);\r\n    const hashParam: DialogHashParams = { [rawKey]: rawValue };\r\n    return hashParam;\r\n  }\r\n\r\n  private buildFullUrl(hashParams: DialogHashParams) {\r\n    const oldHref = sessionStorage.getItem(keyUrl);\r\n    const oldUrl = new URL(oldHref);\r\n    const newHref = oldUrl.origin + oldUrl.pathname + oldUrl.search;\r\n\r\n    const allHashParams: DialogHashParams = {\r\n      ...this.buildSharedHashParams(),\r\n      ...hashParams,\r\n    };\r\n    const hashUrl = Object.entries(allHashParams).reduce((acc, [key, value]) => `${acc}&${key}=${value}`, '').replace('&', '#');\r\n    return newHref + hashUrl;\r\n  }\r\n}\r\n"],"names":["inject","MatRippleModule","MatBadgeModule","MatIconModule","FeaturesScopedService","FeatureNames","TippyDirective","i0","ɵɵelementStart","ɵɵlistener","LightSpeedActionsComponent_Conditional_0_Template_div_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","openLightspeedFeatureInfo","ɵɵtext","ɵɵelementEnd","LightSpeedActionsComponent_Conditional_1_Template_div_click_0_listener","_r3","openLightspeed","ɵɵtemplate","LightSpeedActionsComponent_Conditional_1_Conditional_1_Template","LightSpeedActionsComponent_Conditional_1_Conditional_2_Template","ɵɵclassMapInterpolate1","appHasLightSpeed","ɵɵproperty","lightSpeed","Title","ɵɵadvance","ɵɵconditional","appLightSpeedEnabled","LightSpeedActionsComponent","constructor","features","lightSpeedEnabled","isEnabled","LightSpeed","Id","IsEnabled","params","onOpenLightspeed","lightSpeedOwner","selectors","inputs","standalone","ɵɵStandaloneFeature","decls","vars","consts","template","LightSpeedActionsComponent_Template","rf","ctx","LightSpeedActionsComponent_Conditional_0_Template","LightSpeedActionsComponent_Conditional_1_Template","i1","MatIcon","i2","MatBadge","i3","MatRipple","encapsulation","eavConstants","EditPrep","AppAdminHelpers","getLightSpeedEditParams","appId","form","items","newMetadata","appMetadata","ContentTypeName","metadata","app","computed","signal","Signal","map","webApiAppRoot","HttpServiceBase","AnalyzeSettingsService","getStackSig","part","key","view","stringifyValue","stackSignal","getAndWrite","stackItem","_value","JSON","stringify","Value","getStack","getHttp","pipe","stack","__ngFactoryType__","factory","ɵfac","transient","JsonHelpers","ClipboardService","AnalyzeSettingsValueComponent","clipboard","agInit","value","refresh","copy","tryParse","copyToClipboard","AnalyzeSettingsValueComponent_Template","AnalyzeSettingsValueComponent_Template_div_click_0_listener","ɵɵtextInterpolate","styles","webApiAppRootList","webApiAppRootInheritableApps","webApiAppRootPendingApps","webApiAppRootApp","webApiAppRootInstallPendingApps","webApiAppRootFlushcache","AppsListService","getAll","getSignal","zoneId","getInheritable","getPendingApps","create","name","inheritAppId","templateId","http","post","apiUrl","installPendingApps","pendingApps","delete","toString","flushCache","getHttpApiUrl","FileUploadMessageTypes","webAPiLicenseRetrieve","webApiFeatSaveNew","webApiLicSummary","webApiUpload","FeaturesConfigService","saveFeatures","featuresStates","getLicenses","uploadLicense","file","formData","FormData","append","info","Success","Messages","MessageType","Error","Text","Message","retrieveLicense","webApiZoneRoot","ZoneService","getLanguages","toggleLanguage","code","enable","cultureCode","getSystemInfo","getLanguagesPermissions","webApiTypeRoot","webApiEntityRoot","ContentExportService","exportContent","values","selectedIds","selectedIdsString","join","url","language","defaultLanguage","contentTypeStaticName","recordExport","resourcesReferences","languageReferences","window","open","exportJson","typeName","exportEntity","id","prefix","contentItemsDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","ContentItemsComponent","GoToMetadata","DialogEntryComponent","importContentItemDialog","EditRoutes","contentItemsRoutes","path","component","data","dialog","children","getRoutes","loadChildren","then","m","ContentExportRoutes","contentImportRoutes","title","ImportContentItemComponent","from","switchMap","webApiFieldsAll","toBase64","webApiEntityList","ContentItemsService","contentType","getAllSig","initial","getColumns","staticName","importItem","fileBase64","AppId","ContentBase64","success","result","contentTypeFieldsDialog","ContentTypeFieldsComponent","GoToPermissions","editContentTypeFieldsDialog","contentTypeFieldsRoutes","route","EditContentTypeFieldsComponent","FormsModule","ReactiveFormsModule","UntypedFormControl","UntypedFormGroup","Validators","MatButtonModule","MatCardModule","MatOptionModule","MatDialogRef","MatFormFieldModule","MatSelectModule","FieldHintComponent","FileLocationDialogComponent","hostClass","ngOnInit","isShared","required","closeDialog","close","confirm","formValues","getRawValue","ɵɵdirectiveInject","hostVars","hostBindings","FileLocationDialogComponent_HostBindings","ɵɵhostProperty","FileLocationDialogComponent_Conditional_14_Template","FileLocationDialogComponent_Template_button_click_16_listener","FileLocationDialogComponent_Template_button_click_18_listener","controls","touched","errors","valid","MatCard","MatCardActions","MatCardContent","MatCardHeader","MatCardTitle","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","i5","MatSelect","i6","MatOption","i7","MatButton","environment","DebugFields","production","isEqual","classLog","FieldValueHelpers","ValidationMsgHelper","logSpecs","all","markTouched","set","disable","getErrors","fields","pfx","UiControl","control","moreDisabled","log","warningMessages","jsonWarning","formulaWarning","dirty","invalid","disabled","extendName","aIfInList","emptyControl","touchedAndInvalid","setIfChanged","newValue","before","#set","markAsTouched","fieldValuesAreEqual","markAsDirty","patchValue","updateValueAndValidity","l","fnIfInList","r","errorKey","Object","keys","error","messages","getWarnings","_warning","warning","warningKey","RxHelpers","x","y","isNaN","Array","isArray","arraysEqual","getItemValuesChanges","oldValues","newValues","changes","oldValue","length","undefined","notValid","long","min","max","minNoItems","maxNoItems","pattern","decimals","jsonError","formulaError","validateForm","controlKey","entries","importAppDialog","ImportAppComponent","importRoutes","webApiContentGroup","ContentGroupService","getItems","item","guid","index","saveItem","entityId","add","removeItem","contentGroup","parent","getList","saveList","resortedList","getHeader","replaceContentDialog","ReplaceContentComponent","EditRoutesNoHistory","replaceContentRoutes","ChangeDetectorRef","Type","ViewContainerRef","MatDialog","ActivatedRoute","Router","Context","dialogData","matDialog","viewContainerRef","router","context","changeDetectorRef","navigation","getCurrentNavigation","extras","state","fn","dialogConfig","snapshot","a","_dialogAnimatingOpen","_lastDialogRef","afterOpened","subscribe","openDialogComponent","ngOnDestroy","svcId","init","autoFocus","backdropClass","closeOnNavigation","showScrollbar","position","top","afterClosed","navRes","navigateUrl","navigate","pathFromRoot","$2sxc","totalPopup","relativeTo","markForCheck","ɵɵProvidersFeature","DialogEntryComponent_Template","guidRegex","input","parse","loadScripts","scriptObjects","callback","iteration","isLast","newCallback","bind","scrObj","global","test","w","require","src","exportedVar","UpdateEnvVarsFromDialogSettings","appContext","includedApiRoot","Api","old2sxcHeader","env","header","new2sxcHeader","appApi","load","AppScopes","App","Site","Global","DialogTypeConstants","keyAppId","keyContentBlockId","keyDebug","keyDialog","keyExtras","keyIsShared","keyItems","keyModuleId","keyPartOfPage","keyPipelineId","keyUrl","keyZoneId","DialogService","openCodeFile","Develop","Path","editId","hashParams","buildHashParam","buildFullUrl","openQueryDesigner","queryId","PipelineDesigner","openAppsManagement","tab","Zone","openAppAdministration","scope","buildSharedHashParams","moduleId","contentBlockId","sessionStorage","getItem","rawKey","replace","valueTemp","rawValue","encodeURIComponent","hashParam","oldHref","oldUrl","URL","newHref","origin","pathname","search","allHashParams","hashUrl","reduce","acc"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}