{"version":3,"file":"common.js","mappings":"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","sources":["./projects/eav-ui/src/app/admin-shared/lightspeed-action/lightspeed-action.component.ts","./projects/eav-ui/src/app/admin-shared/lightspeed-action/lightspeed-action.component.html","./projects/eav-ui/src/app/app-administration/app-admin-helpers.ts","./projects/eav-ui/src/app/app-administration/constants/field-name.patterns.ts","./projects/eav-ui/src/app/app-administration/queries/ag-actions/ag-actions-component.ts","./projects/eav-ui/src/app/app-administration/services/analyze-settings.service.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings-value/analyze-settings-value.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/analyze-settings/analyze-settings-value/analyze-settings-value.component.html","./projects/eav-ui/src/app/apps-management/services/apps-list.service.ts","./projects/eav-ui/src/app/apps-management/services/features-config.service.ts","./projects/eav-ui/src/app/apps-management/services/zone.service.ts","./projects/eav-ui/src/app/content-export/content-export-dialog.config.ts","./projects/eav-ui/src/app/content-export/content-export.routing.ts","./projects/eav-ui/src/app/content-export/services/content-export.service.ts","./projects/eav-ui/src/app/content-import/content-import-dialog.config.ts","./projects/eav-ui/src/app/content-import/content-import.routing.ts","./projects/eav-ui/src/app/content-items/content-items-dialog.config.ts","./projects/eav-ui/src/app/content-items/content-items.routing.ts","./projects/eav-ui/src/app/content-items/import-content-item/import-content-item-dialog.config.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-dialog.config.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields.helpers.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields.routing.ts","./projects/eav-ui/src/app/content-type-fields/edit-content-type-fields/edit-content-type-fields-dialog.config.ts","./projects/eav-ui/src/app/content-type-fields/edit-content-type-fields/reserved-names.directive.ts","./projects/eav-ui/src/app/create-file-dialog/file-location-dialog/file-location-dialog.component.ts","./projects/eav-ui/src/app/create-file-dialog/file-location-dialog/file-location-dialog.component.html","./projects/eav-ui/src/app/create-file-dialog/index.ts","./projects/eav-ui/src/app/edit/edit-debug.ts","./projects/eav-ui/src/app/edit/shared/controls/ui-control.ts","./projects/eav-ui/src/app/edit/shared/helpers/field-value.helpers.ts","./projects/eav-ui/src/app/edit/shared/validation/validation-messages.helpers.ts","./projects/eav-ui/src/app/import-app/import-app-dialog.config.ts","./projects/eav-ui/src/app/import-app/import-app.routing.ts","./projects/eav-ui/src/app/item-history/item-history-dialog.config.ts","./projects/eav-ui/src/app/item-history/item-history.routing.ts","./projects/eav-ui/src/app/manage-content-list/services/content-group.service.ts","./projects/eav-ui/src/app/replace-content/replace-content-dialog.config.ts","./projects/eav-ui/src/app/replace-content/replace-content.routing.ts","./projects/eav-ui/src/app/shared/components/dialog-entry/dialog-entry.component.ts","./projects/eav-ui/src/app/shared/constants/guid.constants.ts","./projects/eav-ui/src/app/shared/helpers/json.helpers.ts","./projects/eav-ui/src/app/shared/helpers/load-scripts.helper.ts","./projects/eav-ui/src/app/shared/helpers/update-env-vars-from-dialog-settings.helper.ts","./projects/eav-ui/src/app/shared/models/dialog-context.models.ts","./projects/eav-ui/src/app/shared/services/dialog.service.ts","./node_modules/rxjs/dist/esm/internal/operators/toArray.js"],"sourcesContent":["import { Component, inject, input } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { LightSpeedInfo } from '../../apps-management/models/LightSpeedInfo';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeaturesScopedService } from '../../features/features-scoped.service';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { LightSpeedActionsParams } from './lightspeed-actions.models';\r\n\r\n/**\r\n * LightSpeedActionsComponent\r\n *\r\n * Specially meant to be used inside an AGGrid action, and receive the parameters from it.\r\n *\r\n */\r\n@Component({\r\n    selector: 'app-lightspeed-action',\r\n    templateUrl: './lightspeed-action.component.html',\r\n    imports: [\r\n        TippyDirective,\r\n        MatIconModule,\r\n        MatBadgeModule,\r\n        MatRippleModule,\r\n    ]\r\n})\r\nexport class LightSpeedActionsComponent {\r\n  /** App needed for lightspeed checks */\r\n  lightSpeedOwner = input.required<unknown>();\r\n\r\n  params = input.required<LightSpeedActionsParams>();\r\n\r\n  lightSpeed = input.required<LightSpeedInfo | null>();\r\n\r\n  public features = inject(FeaturesScopedService);\r\n\r\n  constructor() { }\r\n\r\n  protected lightSpeedEnabled = this.features.isEnabled[FeatureNames.LightSpeed]\r\n\r\n  public get appHasLightSpeed(): boolean {\r\n    return this.lightSpeed()?.Id != null;\r\n  }\r\n\r\n  public get appLightSpeedEnabled(): boolean {\r\n    return this.lightSpeed()?.IsEnabled == true;\r\n  }\r\n\r\n  openLightspeedFeatureInfo(): void {\r\n    this.params().openLightspeedFeatureInfo();\r\n  }\r\n}\r\n","@if (!lightSpeedEnabled()) {\r\n  <div class=\"eav-grid-action-button disabled\" tippy=\"Lightspeed is disabled\" (click)=\"openLightspeedFeatureInfo()\">\r\n    <mat-icon matBadgeSize=\"small\" matBadge=\"💎\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n  </div>\r\n} @else {\r\n  <div\r\n    class=\"eav-grid-action-button {{ appHasLightSpeed ? '' : 'disabled' }}\"\r\n    matRipple\r\n    [tippy]=\"appHasLightSpeed ? lightSpeed().Title : 'Not yet configured for LightSpeed'\"\r\n  >\r\n    @if (appLightSpeedEnabled) {\r\n      <a class=\"default-link\" [href]=\"'#' + params().lightSpeedLink(lightSpeedOwner())\">\r\n        <mat-icon matBadgeSize=\"small\" matBadge=\"✅\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n      </a>\r\n    } @else {\r\n      <a class=\"default-link\" [href]=\"'#' + params().lightSpeedLink(lightSpeedOwner())\">\r\n        <mat-icon matBadgeSize=\"small\" matBadge=\"⛔\" matBadgePosition=\"below after\" aria-hidden=\"false\"> bolt </mat-icon>\r\n      </a>\r\n    }\r\n  </div>\r\n}\r\n","import { eavConstants } from '../shared/constants/eav.constants';\r\nimport { EditForm, EditPrep } from '../shared/models/edit-form.model';\r\n\r\nexport class AppAdminHelpers {\r\n  public static getLightSpeedEditParams(appId: number) {\r\n    const form: EditForm = {\r\n      items: [\r\n        EditPrep.newMetadata(appId, eavConstants.appMetadata.LightSpeed.ContentTypeName, eavConstants.metadata.app, true),\r\n      ],\r\n    };\r\n    return form;\r\n  }\r\n}\r\n","export const fieldNamePattern = /^[A-Za-z][A-Za-z0-9]+$/;\r\nexport const fieldNameError = 'Standard letters and numbers are allowed. Must start with a letter.';\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nexport abstract class AgActionsAlwaysRefresh implements ICellRendererAngularComp {\r\n  abstract agInit(params: any): void;\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","import { computed, Injectable, signal, Signal } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { Of } from '../../../../../core';\r\nimport { webApiAppRoot } from '../../import-app/services/import-app.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { AnalyzeParts, SettingsStackItem } from '../sub-dialogs/analyze-settings/analyze-settings.models';\r\n\r\n@Injectable()\r\nexport class AnalyzeSettingsService extends HttpServiceBase {\r\n\r\n\r\n  // TEMP, not sure if this are correct\r\n  getStackSig(part: Of<typeof AnalyzeParts>, key?: string, view?: string, stringifyValue = false): Signal<SettingsStackItem[]> {\r\n    const stackSignal = signal<SettingsStackItem[]>([]);\r\n\r\n    this.getAndWrite<SettingsStackItem[]>(webApiAppRoot + 'GetStack', {\r\n      params: {\r\n        appId: this.appId,\r\n        part,\r\n        ...(key && { key }),\r\n        ...(view && { view }),\r\n      },\r\n    }, stackSignal);\r\n\r\n    return computed(() => stringifyValue\r\n      ? stackSignal().map(stackItem => ({ ...stackItem, _value: JSON.stringify(stackItem.Value) }))\r\n      : stackSignal()\r\n    );\r\n  }\r\n\r\n\r\n  getStack(part: Of<typeof AnalyzeParts>, key?: string, view?: string, stringifyValue = false): Observable<SettingsStackItem[]> {\r\n\r\n    return this.getHttp<SettingsStackItem[]>(webApiAppRoot + 'GetStack', {\r\n      params: {\r\n        appId: this.appId,\r\n        part,\r\n        ...(key && { key }),\r\n        ...(view && { view }),\r\n      },\r\n    }).pipe(\r\n      map(stack => {\r\n\r\n        if (!stringifyValue) { return stack; }\r\n\r\n        for (const stackItem of stack) {\r\n          stackItem._value = JSON.stringify(stackItem.Value);\r\n        }\r\n        return stack;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { JsonHelpers } from '../../../../shared/helpers/json.helpers';\r\nimport { ClipboardService } from '../../../../shared/services/clipboard.service';\r\n\r\n@Component({\r\n    selector: 'app-analyze-settings-value',\r\n    templateUrl: './analyze-settings-value.component.html',\r\n    styleUrls: ['./analyze-settings-value.component.scss'],\r\n    imports: [\r\n        MatRippleModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class AnalyzeSettingsValueComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n\r\n  constructor() { }\r\n\r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n  \r\n  copy(value: string) {\r\n    value = JsonHelpers.tryParse(value) ?? value;\r\n    this.clipboard.copyToClipboard(value);\r\n  }\r\n}\r\n","<div matRipple class=\"value-box highlight\" [tippy]=\"value\" (click)=\"copy(value)\">\r\n  <span class=\"value\">{{ value }}</span>\r\n</div>\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { App, PendingApp } from '../models/app.model';\r\n\r\n const webApiAppRootList = 'admin/app/list';\r\n const webApiAppRootInheritableApps = 'admin/app/InheritableApps';\r\n const webApiAppRootPendingApps = 'admin/app/GetPendingApps';\r\n const webApiAppRootApp = 'admin/app/app';\r\n const webApiAppRootInstallPendingApps = 'admin/app/InstallPendingApps';\r\n const webApiAppRootFlushcache = 'admin/app/flushcache';\r\n\r\n@Injectable()\r\nexport class AppsListService extends HttpServiceBase {\r\n\r\n  getAll() {\r\n    return this.getSignal<App[]>(webApiAppRootList, {\r\n      params: { zoneId: this.zoneId }\r\n    });\r\n  }\r\n\r\n  getInheritable() {\r\n    return this.getSignal<App[]>(webApiAppRootInheritableApps, {\r\n      params: { zoneId: this.zoneId }\r\n    });\r\n  }\r\n\r\n  getPendingApps() {\r\n    return this.getSignal<PendingApp[]>(webApiAppRootPendingApps, {\r\n      params: { zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  create(name: string, inheritAppId?: number, templateId?: number) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootApp), {}, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n        name,\r\n        ...(inheritAppId != null && { inheritAppId }),\r\n        ...(templateId != null && { templateId }),\r\n      },\r\n    });\r\n  }\r\n\r\n  installPendingApps(pendingApps: PendingApp[]) {\r\n    return this.http.post<null>(this.apiUrl(webApiAppRootInstallPendingApps), pendingApps, {\r\n      params: {\r\n        zoneId: this.zoneId,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(appId: number) {\r\n    return this.http.delete<null>(this.apiUrl(webApiAppRootApp), {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n\r\n  flushCache(appId: number) {\r\n    return this.getHttpApiUrl<null>(webApiAppRootFlushcache, {\r\n      params: { zoneId: this.zoneId, appId: appId.toString() },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { FeatureState } from '../../features/models';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { License, LicenseDownloadInfo, LicenseUploadInfo } from '../models/license.model';\r\n\r\nconst webAPiLicenseRetrieve = 'sys/license/Retrieve';\r\nconst webApiFeatSaveNew = 'admin/feature/SaveNew';\r\nconst webApiLicSummary = 'sys/license/Summary';\r\nconst webApiUpload = 'sys/license/Upload';\r\n\r\n@Injectable()\r\nexport class FeaturesConfigService extends HttpServiceBase {\r\n\r\n  saveFeatures(featuresStates: FeatureState[]): Observable<null> {\r\n    return this.http.post<null>(this.apiUrl(webApiFeatSaveNew), featuresStates);\r\n  }\r\n\r\n  getLicenses(): Observable<License[]> { // Use new Signals\r\n    return this.getHttpApiUrl<License[]>(webApiLicSummary);\r\n  }\r\n\r\n  getLicensesSig() { // Use new Signals\r\n    return this.getSignal<License[]>(webApiLicSummary);\r\n  }\r\n\r\n  uploadLicense(file: File): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    return this.http.post<LicenseUploadInfo>(this.apiUrl(webApiUpload), formData)\r\n      .pipe(\r\n        map(info => ({\r\n          Success: info.Success,\r\n          Messages: [{\r\n            MessageType: info.Success ? FileUploadMessageTypes.Success : FileUploadMessageTypes.Error,\r\n            Text: `License ${info.Success ? 'uploaded' : 'upload failed'}: ${info.Message}`,\r\n          }],\r\n        } satisfies FileUploadResult)),\r\n      );\r\n  }\r\n\r\n  retrieveLicense(): Observable<LicenseDownloadInfo> {\r\n    return this.getHttpApiUrl<LicenseDownloadInfo>(webAPiLicenseRetrieve);\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { SiteLanguage, SiteLanguagePermissions } from '../models/site-language.model';\r\nimport { SystemInfoSet } from '../models/system-info.model';\r\n\r\nconst webApiZoneRootGetLanguages = 'admin/zone/GetLanguages';\r\nconst webApiZoneRootSwitchLanguage = 'admin/zone/SwitchLanguage';\r\nconst webApiZoneRootGetSystemInfo = 'admin/zone/GetSystemInfo';\r\nconst webApiAppRootRootlanguages = 'admin/app/languages';\r\n\r\n@Injectable()\r\nexport class ZoneService extends HttpServiceBase {\r\n\r\n  getLanguage(initial: undefined) {\r\n    return this.getSignal<SiteLanguage[]>(webApiZoneRootGetLanguages, {}, initial);\r\n  }\r\n\r\n  toggleLanguage(code: string, enable: boolean) {\r\n    return this.getHttpApiUrl<null>(webApiZoneRootSwitchLanguage, {\r\n      params: { cultureCode: code, enable: enable.toString() },\r\n    });\r\n  }\r\n\r\n  // toggleLanguageSig(code: string, enable: boolean)  {\r\n  //   return this.getSignal<null>(webApiZoneRootSwitchLanguage, {\r\n  //     params: { cultureCode: code, enable: enable.toString() },\r\n  //   });\r\n  // }\r\n\r\n  getSystemInfo(initial: undefined) {\r\n    return this.getSignal<SystemInfoSet>(webApiZoneRootGetSystemInfo, {}, initial);\r\n  }\r\n\r\n  getLanguagesPermissions(initial: undefined) {\r\n    return this.getSignal<SiteLanguagePermissions[]>(webApiAppRootRootlanguages, {\r\n      params: { appId: this.appId },\r\n    }, initial);\r\n  };\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentExportDialog: DialogConfig = {\r\n  name: 'EXPORT_CONTENT_TYPE_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentExportComponent } = await import('./content-export.component');\r\n    return ContentExportComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { contentExportDialog } from './content-export-dialog.config';\r\n\r\nexport const ContentExportRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentExportDialog }\r\n  },\r\n];\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentExport } from '../models/content-export.model';\r\n\r\nconst webApiEntityRootDownload = 'admin/entity/Download';\r\nconst webApiEntityRootJson = 'admin/entity/Json';\r\nconst webApiTypeRootJson = 'admin/type/Json';\r\nconst webApiTypeRootJsonBundleExport = 'admin/type/JsonBundleExport';\r\nconst webApiTypeRootJsonBundleSave = 'admin/type/BundleSave';\r\n\r\n\r\n\r\n@Injectable()\r\nexport class ContentExportService extends HttpServiceBase {\r\n\r\n  exportContent(values: ContentExport, selectedIds: number[]) {\r\n    const selectedIdsString = selectedIds ? '&selectedids=' + selectedIds.join() : '';\r\n    const url = this.apiUrl(webApiEntityRootDownload)\r\n      + '?appId=' + this.appId\r\n      + '&language=' + values.language\r\n      + '&defaultLanguage=' + values.defaultLanguage\r\n      + '&contentType=' + values.contentTypeStaticName\r\n      + '&recordExport=' + values.recordExport\r\n      + '&resourcesReferences=' + values.resourcesReferences\r\n      + '&languageReferences=' + values.languageReferences\r\n      + selectedIdsString;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  exportJson(typeName: string) {\r\n    const url = this.apiUrl(webApiTypeRootJson)\r\n      + '?appId=' + this.appId\r\n      + '&name=' + typeName;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n  exportEntity(id: number, prefix: string, metadata: boolean) {\r\n    const url = this.apiUrl(webApiEntityRootJson)\r\n      + '?appId=' + this.appId\r\n      + '&id=' + id\r\n      + '&prefix=' + prefix\r\n      + '&withMetadata=' + metadata;\r\n\r\n    window.open(url, '_blank', '');\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentImportDialog: DialogConfig = {\r\n  name: 'IMPORT_CONTENT_TYPE_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentImportComponent } = await import('./content-import.component');\r\n    return ContentImportComponent;\r\n  }\r\n};\r\n\r\nexport interface ContentImportDialogData {\r\n  files?: File[];\r\n}\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { contentImportDialog } from './content-import-dialog.config';\r\n\r\nexport const contentImportRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentImportDialog }\r\n  },\r\n];\r\n\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentItemsDialog: DialogConfig = {\r\n  name: 'CONTENT_ITEMS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentItemsComponent } = await import('./content-items.component');\r\n    return ContentItemsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { importContentItemDialog } from './import-content-item/import-content-item-dialog.config';\r\nimport { contentItemsDialog } from './content-items-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const contentItemsRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentItemsDialog },\r\n    children: [\r\n      ...GoToMetadata.getRoutes(),\r\n      {\r\n        path: 'export/:contentTypeStaticName',\r\n        loadChildren: () => import('../content-export/content-export.routing').then(m => m.ContentExportRoutes)\r\n      },\r\n      {\r\n        path: 'export/:contentTypeStaticName/:selectedIds',\r\n        loadChildren: () => import('../content-export/content-export.routing').then(m => m.ContentExportRoutes)\r\n      },\r\n      {\r\n        path: 'import',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: importContentItemDialog }\r\n      },\r\n      {\r\n        path: ':contentTypeStaticName/import',\r\n        loadChildren: () => import('../content-import/content-import.routing').then(m => m.contentImportRoutes),\r\n        data: { title: 'Import Items' },\r\n      },\r\n      ...EditRoutes,\r\n    ]\r\n  },\r\n];\r\n\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const importContentItemDialog: DialogConfig = {\r\n  name: 'IMPORT_CONTENT_ITEM_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ImportContentItemComponent: ImportContentItemComponent } = await import('./import-content-item.component');\r\n    return ImportContentItemComponent;\r\n  }\r\n};\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const contentTypeFieldsDialog: DialogConfig = {\r\n  name: 'CONTENT_TYPE_FIELDS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ContentTypeFieldsComponent } = await import('./content-type-fields.component');\r\n    return ContentTypeFieldsComponent;\r\n  }\r\n};\r\n","import { DataTypeCatalog } from '../shared/fields/data-type-catalog';\r\n\r\nexport function calculateTypeIcon(typeName: string): string {\r\n  const typeIconMap: Record<string, string> = {\r\n    [DataTypeCatalog.Boolean]: 'toggle_on',\r\n    [DataTypeCatalog.Custom]: 'extension',\r\n    [DataTypeCatalog.DateTime]: 'today',\r\n    [DataTypeCatalog.Empty]: 'crop_free',\r\n    [DataTypeCatalog.Entity]: 'share',\r\n    [DataTypeCatalog.Hyperlink]: 'link',\r\n    [DataTypeCatalog.Number]: 'dialpad',\r\n    [DataTypeCatalog.String]: 'text_fields',\r\n  };\r\n  return typeIconMap[typeName] ?? 'device_unknown';\r\n}\r\n\r\nexport function calculateTypeLabel(typeName: string): string {\r\n  const typeLabelMap: Record<string, string> = {\r\n    [DataTypeCatalog.Boolean]: 'Boolean (yes/no)',\r\n    [DataTypeCatalog.Custom]: 'Custom - ui-tools or custom types',\r\n    [DataTypeCatalog.DateTime]: 'Date and/or time',\r\n    [DataTypeCatalog.Empty]: 'Empty - for form-titles etc.',\r\n    [DataTypeCatalog.Entity]: 'Entity (other content-items)',\r\n    [DataTypeCatalog.Hyperlink]: 'Link / file reference',\r\n    [DataTypeCatalog.Number]: 'Number',\r\n    [DataTypeCatalog.String]: 'Text / string',\r\n  };\r\n  return typeLabelMap[typeName] ?? 'device_unknown';\r\n}\r\n","import { Routes } from '@angular/router';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { GoToPermissions } from '../permissions/go-to-permissions';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { contentTypeFieldsDialog } from './content-type-fields-dialog.config';\r\nimport { editContentTypeFieldsDialog } from './edit-content-type-fields/edit-content-type-fields-dialog.config';\r\n\r\nexport const contentTypeFieldsRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: contentTypeFieldsDialog },\r\n    children: [\r\n      {\r\n        path: 'add/:contentTypeStaticName',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: editContentTypeFieldsDialog }\r\n      },\r\n      {\r\n        path: 'update/:contentTypeStaticName/:id/:editMode',\r\n        component: DialogEntryComponent,\r\n        data: { dialog: editContentTypeFieldsDialog },\r\n      },\r\n      ...GoToMetadata.getRoutes(),\r\n      GoToPermissions.route,\r\n      ...EditRoutes,\r\n    ]\r\n  }\r\n];\r\n","import { DialogConfig } from '../../shared/models/dialog-config.model';\r\n\r\nexport const editContentTypeFieldsDialog: DialogConfig = {\r\n  name: 'EDIT_CONTENT_TYPE_FIELDS_DIALOG',\r\n  initContext: false,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { EditContentTypeFieldsComponent } = await import('./edit-content-type-fields.component');\r\n    return EditContentTypeFieldsComponent;\r\n  }\r\n};\r\n","import { Directive, input } from '@angular/core';\r\nimport { AbstractControl, NG_VALIDATORS, ValidationErrors, Validator } from '@angular/forms';\r\nimport { Field } from '../../shared/fields/field.model';\r\n\r\n@Directive({\r\n  selector: '[appReservedNames]',\r\n  providers: [\r\n    { provide: NG_VALIDATORS, useExisting: ReservedNamesValidatorDirective, multi: true },\r\n  ],\r\n})\r\nexport class ReservedNamesValidatorDirective implements Validator {\r\n  appReservedNames = input<Record<string, string>>({});\r\n\r\n\r\n  validate(control: AbstractControl): ValidationErrors | null {\r\n    if (!control.value) { return null; }\r\n\r\n    const controlValue = (control.value as string).toLocaleLowerCase();\r\n    const reservedName = Object.keys(this.appReservedNames()).find(name => name.toLocaleLowerCase() === controlValue);\r\n    return reservedName ? { reservedNames: this.appReservedNames()[reservedName] } : null;\r\n  }\r\n\r\n  static mergeReserved(reservedNames: Record<string, string>, fields: Field[]) {\r\n    const existingFields: Record<string, string> = {};\r\n    fields.forEach(field => {\r\n      existingFields[field.StaticName] = 'this field already exists';\r\n    });\r\n    return {\r\n      ...reservedNames,\r\n      ...existingFields,\r\n    };\r\n  }\r\n\r\n}\r\n","import { Component, HostBinding, OnInit } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { FileLocationFormValues } from '..';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\n\r\n@Component({\r\n    selector: 'app-file-location-dialog',\r\n    templateUrl: './file-location-dialog.component.html',\r\n    styleUrls: ['./file-location-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatFormFieldModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatButtonModule,\r\n        FieldHintComponent,\r\n    ]\r\n})\r\nexport class FileLocationDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n\r\n  constructor(private dialog: MatDialogRef<FileLocationDialogComponent>) { }\r\n\r\n  ngOnInit(): void {\r\n    this.form = new UntypedFormGroup({\r\n      isShared: new UntypedFormControl(null, Validators.required),\r\n    });\r\n  }\r\n\r\n  closeDialog(isShared?: boolean): void {\r\n    this.dialog.close(isShared);\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: FileLocationFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.isShared);\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>New file location</mat-card-title>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Shared -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Location</mat-label>\r\n        <mat-select formControlName=\"isShared\">\r\n          <mat-option [value]=\"false\">App</mat-option>\r\n          <mat-option [value]=\"true\">Shared (global)</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      @if (form.controls.isShared.touched && form.controls.isShared.errors?.required) {\r\n        <app-field-hint [isError]=\"true\">\r\n          This field is required\r\n        </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\" (click)=\"confirm()\">\r\n      Confirm\r\n    </button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","export * from './file-location-dialog/file-location-dialog.component';\r\nexport * from './file-location-dialog/file-location-dialog.models';\r\nexport * from './create-file-dialog.component';\r\nexport * from './create-file-dialog.models';\r\n// export * from './create-file-dialog.module';\r\n","import { environment } from '../../environments/environment';\r\n\r\n/**\r\n * List of fields to debug across the entire application.\r\n * \r\n * Change as you need, but after debugging, best set it back to [].\r\n */\r\nexport const DebugFields: string[] = !environment.production\r\n  // ? ['StringPicker']\r\n  // ? ['NumberInputAddUntillDevisibleBy5']\r\n  // ? ['WysiwygConfiguration']\r\n  // ? ['Items']\r\n  ? ['ViewController']\r\n  // ? ['Title']\r\n  // ? [] // no fields\r\n  // ? ['*'] // all fields\r\n  : [];\r\n","import { AbstractControl } from '@angular/forms';\r\nimport isEqual from 'lodash-es/isEqual';\r\nimport { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { DebugFields } from '../../edit-debug';\r\nimport { FieldValueHelpers } from '../helpers/field-value.helpers';\r\nimport { ValidationMsgHelper } from '../validation/validation-messages.helpers';\r\nimport { AbstractControlPro } from '../validation/validation.helpers';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: false,\r\n  markTouched: false,\r\n  set: false,\r\n  disable: false,\r\n  getErrors: true,\r\n  fields: [...DebugFields, '*'],\r\n};\r\n\r\nconst pfx = 'ValidationMessage.';\r\n\r\n/**\r\n * Provides information about the UI Control, but NOT the value.\r\n * It is used to simplify the logic when interacting with the Angular Virtual Form.\r\n */\r\nexport class UiControl {\r\n\r\n  log = classLog({UiControl}, logSpecs);\r\n\r\n  constructor(\r\n    public control: AbstractControl,\r\n    private name = 'unknown',\r\n    private moreDisabled: boolean = false,\r\n  ) {\r\n    // Patch control with dummy object for the nullable case where we're just creating a fake control...\r\n    this.control ??= { dirty: false, invalid: false, touched: false, value: null, disabled: false } as AbstractControl;\r\n    this.log.extendName(`[${name}]`);\r\n    this.log.aIfInList('fields', this.name, { moreDisabled }, 'constructor');\r\n  }\r\n\r\n  static emptyControl() {\r\n    return new UiControl({ dirty: false, invalid: false, touched: false, value: null, disabled: false } as AbstractControl);\r\n  }\r\n\r\n  //#region simple direct properties & complex properties\r\n  get dirty() { return this.control.dirty; }\r\n  get invalid() { return this.control.invalid; }\r\n  get touched() { return this.control.touched; }\r\n  get disabled() { return this.control.disabled || this.moreDisabled; }\r\n  get touchedAndInvalid() { return this.control.touched && this.control.invalid; }\r\n  //#endregion\r\n\r\n  //#region methods\r\n\r\n  markTouched(): void {\r\n    this.log.aIfInList('fields', this.name, null, 'markTouched');\r\n    UiControl.markTouched(this.control);\r\n  }\r\n\r\n  setIfChanged(newValue: FieldValue): void {\r\n    const before = this.control.value;\r\n    this.log.aIfInList('fields', this.name, { before, newValue }, 'setIfChanged');\r\n    if (isEqual(newValue, this.control.value)) return;\r\n    this.#set(newValue);\r\n  }\r\n\r\n  /** Use to update form controls value */\r\n  #set(newValue: FieldValue): void {\r\n    const control = this.control;\r\n    const before = control.value;\r\n    this.log.aIfInList('fields', this.name, { before, newValue }, 'set');\r\n\r\n    if (!control.touched)\r\n      control.markAsTouched();\r\n\r\n    if (!control.dirty && !FieldValueHelpers.fieldValuesAreEqual(before, newValue))\r\n      control.markAsDirty();\r\n\r\n    // Note: 2024-10-21 ca. 18.02 we have some timing issues, error always seems to show previous error; maybe fixed now, otherwise revisit\r\n    // Set value must happen at the end, otherwise errors will be late by one cycle\r\n    // for example, they could show \"required\" after the value was\r\n    control.patchValue(newValue);\r\n  }\r\n\r\n  disable(disable: boolean): void {\r\n    this.log.aIfInList('fields', this.name, null, `disable: ${disable}`);\r\n    UiControl.disable(this.control, disable);\r\n  }\r\n\r\n  //#endregion\r\n\r\n  //#region private helpers\r\n\r\n  /** TODO: Try to remove this by assigning controls [formControlName] in [formGroup] */\r\n  static markTouched(control: AbstractControl): void {\r\n    if (control.touched)\r\n      return;\r\n\r\n    control.markAsTouched();\r\n    control.updateValueAndValidity();\r\n  }\r\n\r\n  /** Disables/enables control if not already disabled/enabled. Use this helper to trigger fewer events on the form */\r\n  static disable(control: AbstractControl, disable: boolean) {\r\n    if (control.disabled === disable)\r\n      return;\r\n\r\n    if (disable)\r\n      control.disable();\r\n    else\r\n      control.enable();\r\n  }\r\n  //#endregion\r\n\r\n  /** Calculates error message */\r\n  getErrors(): string {\r\n    const control = this.control;\r\n    const errors = control.errors;\r\n    const l = this.log.fnIfInList('getErrors', 'fields', this.name, { control, name: this.name });\r\n    if (!control.invalid)\r\n      return l.r('', 'valid');\r\n    if (!control.dirty && !control.touched)\r\n      return l.r('', 'not dirty or touched');\r\n\r\n    for (const errorKey of Object.keys(errors)) {\r\n      const error = (errorKey === 'formulaError')\r\n        ? control.errors['formulaMessage'] ?? ValidationMsgHelper.messages[errorKey]?.(true)\r\n        : ValidationMsgHelper.messages[errorKey]?.(true);\r\n      if (error)\r\n        return l.r(error, 'error found');\r\n    }\r\n\r\n    return l.r('', 'no error');\r\n  }\r\n\r\n  #warningMessages: Record<string, string> = {\r\n    jsonWarning: `${pfx}JsonWarning`,\r\n    formulaWarning: `${pfx}NotValid`,\r\n  };\r\n\r\n  getWarnings(): string {\r\n    const control = this.control as AbstractControlPro;\r\n    if (control._warning == null)\r\n      return '';\r\n    if (!control.dirty && !control.touched)\r\n      return '';\r\n\r\n    let warning = '';\r\n    for (const warningKey of Object.keys(control._warning)) {\r\n      warning = (warningKey === 'formulaWarning')\r\n        ? control._warning['formulaMessage'] ?? this.#warningMessages[warningKey]\r\n        : this.#warningMessages[warningKey];\r\n      if (warning)\r\n        break;\r\n    }\r\n    return warning;\r\n  }\r\n}\r\n","import { FieldValue } from '../../../../../../edit-types/src/FieldValue';\r\nimport { RxHelpers } from '../../../shared/rxJs/rx.helpers';\r\nimport { ItemValuesOfLanguage } from '../../state/item-values-of-language.model';\r\n\r\n\r\nexport class FieldValueHelpers {\r\n  /** Detect if two values are equal, incl. special NaN and Array checks */\r\n  static fieldValuesAreEqual(x: FieldValue, y: FieldValue): boolean {\r\n    if (x === y) return true;\r\n    if (typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y)) return true;\r\n    if (Array.isArray(x) && Array.isArray(y) && RxHelpers.arraysEqual(x, y)) return true;\r\n    return false;\r\n  }\r\n\r\n  /** Searches where newValues has values different from oldValues */\r\n  static getItemValuesChanges(oldValues: ItemValuesOfLanguage, newValues: ItemValuesOfLanguage): ItemValuesOfLanguage {\r\n    const changes: ItemValuesOfLanguage = {};\r\n    for (const key of Object.keys(newValues)) {\r\n      const newValue = newValues[key];\r\n      const oldValue = oldValues[key];\r\n      if (FieldValueHelpers.fieldValuesAreEqual(newValue, oldValue))\r\n        continue;\r\n\r\n      changes[key] = newValue;\r\n    }\r\n    return Object.keys(changes).length === 0 ? undefined : changes;\r\n  }\r\n}\r\n","import { UntypedFormGroup } from '@angular/forms';\r\nimport { UiControl } from '../controls/ui-control';\r\n\r\n// prefix for translation keys\r\nconst prefix = 'ValidationMessage.';\r\nconst notValid = 'ValidationMessage.NotValid';\r\n\r\nexport class ValidationMsgHelper {\r\n\r\n  public static messages: Record<string, (long: boolean) => string> = {\r\n    required: (long: boolean) => long ? `${prefix}Required` : `${prefix}RequiredShort` /* short version in snackbar*/,\r\n    min: (long: boolean) => long ? `${prefix}Min` : notValid,\r\n    max: (long: boolean) => long ? `${prefix}Max` : notValid,\r\n    minNoItems: (long: boolean) => long ? `${prefix}MinNoItems` : notValid,\r\n    maxNoItems: (long: boolean) => long ? `${prefix}MaxNoItems` : notValid,\r\n    pattern: (long: boolean) => long ? `${prefix}Pattern` : notValid,\r\n    decimals: (long: boolean) => long ? `${prefix}Decimals` : notValid,\r\n    jsonError: (long: boolean) => long ? `${prefix}JsonError` : notValid,\r\n    formulaError: (long: boolean) => notValid,\r\n  };\r\n\r\n  /** Marks controls as touched to show errors beneath controls and collects error messages */\r\n  static validateForm(form: UntypedFormGroup): Record<string, string> {\r\n    const errors: Record<string, string> = {};\r\n    for (const [controlKey, control] of Object.entries(form.controls)) {\r\n      UiControl.markTouched(control);\r\n\r\n      if (!control.invalid) continue;\r\n\r\n      for (const errorKey of Object.keys(control.errors)) {\r\n        errors[controlKey] = this.messages[errorKey]?.(false);\r\n        if (errors[controlKey]) break;\r\n      }\r\n    }\r\n    return errors;\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const importAppDialog: DialogConfig = {\r\n  name: 'IMPORT_APP_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ImportAppComponent } = await import('./import-app.component');\r\n    return ImportAppComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { importAppDialog } from './import-app-dialog.config';\r\n\r\nexport const importRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: importAppDialog }\r\n  }\r\n];\r\n\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const itemHistoryDialog: DialogConfig = {\r\n  name: 'ITEM_HISTORY_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ItemHistoryComponent } = await import('./item-history.component');\r\n    return ItemHistoryComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { itemHistoryDialog } from './item-history-dialog.config';\r\n\r\nexport const historyRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: itemHistoryDialog, title: 'Item History' }\r\n  },\r\n];\r\n","import { Injectable } from '@angular/core';\r\nimport { ReplaceConfig } from '../../replace-content/replace-config.model';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentGroup, ContentGroupAdd } from '../models/content-group.model';\r\nimport { GroupHeader } from '../models/group-header.model';\r\n\r\nconst webApiContentGroup = 'cms/contentgroup/';\r\n\r\n@Injectable()\r\nexport class ContentGroupService extends HttpServiceBase {\r\n\r\n  getItems(item: ContentGroup) {\r\n    return this.getHttpApiUrl<ReplaceConfig>(webApiContentGroup + 'replace', {\r\n      params: { appId: this.appId, guid: item.guid, part: item.part, index: item.index.toString() }\r\n    });\r\n  }\r\n\r\n  saveItem(item: ContentGroupAdd) {\r\n    return this.http.post<null>(this.apiUrl(webApiContentGroup + 'replace'), {}, {\r\n      params: { guid: item.guid, part: item.part, index: item.index.toString(), entityId: item.id.toString(), add: `${item.add}` }\r\n    });\r\n  }\r\n\r\n  removeItem(contentGroup: ContentGroup, index: number) {\r\n    // note: the server checks if the part == 'content' and will automatically treat it as a pair with presentation\r\n    return this.http.delete<null>(this.apiUrl('cms/list/delete'), {\r\n      params: { index: index, parent: contentGroup.guid, fields: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getList(contentGroup: ContentGroup) {\r\n    return this.getHttpApiUrl<GroupHeader[]>(webApiContentGroup + 'itemlist', {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  saveList(contentGroup: ContentGroup, resortedList: GroupHeader[]) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiContentGroup + 'itemlist'), resortedList, {\r\n      params: { appId: this.appId, guid: contentGroup.guid, part: contentGroup.part }\r\n    });\r\n  }\r\n\r\n  getHeader(contentGroup: ContentGroup, initial: GroupHeader) {\r\n    return this.getSignal<GroupHeader>(webApiContentGroup + 'header', {\r\n      params: { appId: this.appId, guid: contentGroup.guid }\r\n    }, initial);\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const replaceContentDialog: DialogConfig = {\r\n  name: 'REPLACE_CONTENT_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'medium',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ReplaceContentComponent } = await import('./replace-content.component');\r\n    return ReplaceContentComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { replaceContentDialog } from './replace-content-dialog.config';\r\nimport { EditRoutesNoHistory } from '../edit/edit.routing';\r\n\r\nexport const replaceContentRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: replaceContentDialog },\r\n    children: [\r\n      // Note 2024-07-01 2dm - not sure why it is configured without history, but to be safe I'll keep it for now\r\n      ...EditRoutesNoHistory\r\n    ],\r\n  },\r\n];\r\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit, Type, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { NavigateFormResult } from '../../../edit/routing/edit-routing.service';\r\nimport { classLog } from '../../logging';\r\nimport { DialogConfig } from '../../models/dialog-config.model';\r\nimport { EavWindow } from '../../models/eav-window.model';\r\nimport { Context } from '../../services/context';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n    selector: 'app-dialog-entry',\r\n    templateUrl: './dialog-entry.component.html',\r\n    imports: [],\r\n    providers: [\r\n        Context, // this is used in the dialog to get the correct App\r\n    ]\r\n})\r\nexport class DialogEntryComponent implements OnInit, OnDestroy {\r\n  \r\n  log = classLog({DialogEntryComponent});\r\n  \r\n  #dialogData: Record<string, any>;\r\n  #dialog: MatDialogRef<any>;\r\n\r\n  constructor(\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    const navigation = this.router.getCurrentNavigation();\r\n    this.#dialogData = navigation?.extras?.state || {};\r\n  }\r\n\r\n  ngOnInit() {\r\n    const l = this.log.fn('ngOnInit');\r\n    const dialogConfig: DialogConfig = this.route.snapshot.data.dialog;\r\n    if (dialogConfig == null)\r\n      throw new Error(`Could not find config for dialog. Did you forget to add DialogConfig to route data?`);\r\n\r\n    l.a('Open dialog: '+ dialogConfig.name, { id: this.context.id, context: this.context });\r\n\r\n    dialogConfig.getComponent().then(component => {\r\n      // spm Workaround for \"feature\" where you can't open new dialog while last one is still opening\r\n      // https://github.com/angular/components/commit/728cf1c8ebd49e089f4bae945511bb0918972c26\r\n      const dialog = (this.matDialog as any);\r\n      if (dialog._dialogAnimatingOpen && dialog._lastDialogRef)\r\n        (dialog._lastDialogRef as MatDialogRef<any>).afterOpened()\r\n          .subscribe(() => this.openDialogComponent(dialogConfig, component));\r\n      else\r\n        this.openDialogComponent(dialogConfig, component);\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.#dialog.close();\r\n  }\r\n\r\n  private openDialogComponent(dialogConfig: DialogConfig, component: Type<any>) {\r\n    this.log.a(`Open dialog(initContext: ${dialogConfig.initContext})`, { name: dialogConfig.name, 'Contextid:': this.context.log.svcId, 'Context:': this.context });\r\n    if (dialogConfig.initContext)\r\n      this.context.init(this.route);\r\n\r\n    this.#dialog = this.matDialog.open(component, {\r\n      autoFocus: false,\r\n      backdropClass: 'dialog-backdrop',\r\n      closeOnNavigation: false,\r\n      data: this.#dialogData,\r\n      panelClass: [\r\n        'dialog-panel',\r\n        `dialog-panel-${dialogConfig.panelSize}`,\r\n        dialogConfig.showScrollbar ? 'show-scrollbar' : 'no-scrollbar',\r\n        ...(dialogConfig.panelClass ? dialogConfig.panelClass : []),\r\n      ],\r\n      // spm NOTE: position used to force align-items: flex-start; on cdk-global-overlay-wrapper.\r\n      // Real top margin is overwritten in css e.g. dialog-panel-large\r\n      position: { top: '0' },\r\n      viewContainerRef: this.viewContainerRef,\r\n    });\r\n\r\n    this.#dialog.afterClosed().subscribe((data: any) => {\r\n      this.log.a('Dialog was closed - name:' + dialogConfig.name, { data });\r\n\r\n      const navRes = data as NavigateFormResult;\r\n      if (navRes?.navigateUrl != null) {\r\n        this.router.navigate([navRes.navigateUrl]);\r\n        return;\r\n      }\r\n\r\n      if (this.route.pathFromRoot.length <= 3) {\r\n        try {\r\n          window.parent.$2sxc.totalPopup.close();\r\n        } catch (error) { }\r\n        return;\r\n      }\r\n\r\n      if (this.route.snapshot.url.length > 0)\r\n        this.router.navigate(['./'], { relativeTo: this.route.parent, state: data });\r\n      else\r\n        this.router.navigate(['./'], { relativeTo: this.route.parent.parent, state: data });\r\n    });\r\n\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n}\r\n","/**\r\n * Do not reuse regex:\r\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test#using_test_on_a_regex_with_the_global_flag\r\n */\r\nexport function guidRegex(): RegExp {\r\n  return /^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i;\r\n}\r\n","\r\nexport class JsonHelpers {\r\n\r\n  /** Tries to parse string as JSON */\r\n  static tryParse(input: string): any {\r\n    try {\r\n      return JSON.parse(input);\r\n    } catch { }\r\n  }\r\n}\r\n","import { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport function loadScripts(scriptObjects: ScriptObject[], callback: () => void, iteration = 0) {\r\n  const isLast = scriptObjects.length === iteration + 1;\r\n  const newCallback = isLast ? callback : loadScripts.bind(this, scriptObjects, callback, iteration + 1);\r\n  const scrObj = scriptObjects[iteration];\r\n\r\n  const global = typeof scrObj.test === 'string' ? scrObj.test : null;\r\n  const test = typeof scrObj.test === 'function' ? scrObj.test : null;\r\n  const w = window as Record<string, any>;\r\n\r\n  if (global != null && !!w[global]) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  if (test != null && test()) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  window.require([scrObj.src], (exportedVar: any) => {\r\n    if (exportedVar && !w[global]) {\r\n      w[global] = exportedVar;\r\n    }\r\n    newCallback();\r\n  });\r\n}\r\n\r\nexport interface ScriptObject {\r\n  /** window.xxx or a function that returns a boolean */\r\n  test: string | (() => boolean);\r\n  src: string;\r\n}\r\n","import { EnvironmentSpecs } from '@2sic.com/2sxc-typings';\r\nimport { DialogContextApp } from '../models/dialog-context.models';\r\nimport { EavWindow } from '../models/eav-window.model';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n/**\r\n * This ensures that $2sxc is fully initialized with parameters which are provided later on\r\n * The appApi is being added in v12\r\n * It's important because in Oqtane the app-api root is different in from the normal admin-apis\r\n */\r\nexport function UpdateEnvVarsFromDialogSettings(appContext: DialogContextApp): void {\r\n  try {\r\n    const includedApiRoot = appContext?.Api;\r\n    if (!includedApiRoot) return;\r\n\r\n    const old2sxcHeader = (window.$2sxc.env as any).header as EnvironmentSpecs;\r\n    const new2sxcHeader = { ...old2sxcHeader, appApi: includedApiRoot } as EnvironmentSpecs;\r\n    window.$2sxc.env.load(new2sxcHeader);\r\n  } catch { /* ignore */ }\r\n}\r\n","import { Of } from '../../../../../core';\r\nimport { PermissionsCount } from '../../app-administration/models/permissions-count.model';\r\nimport { Language } from './language.model';\r\n\r\nexport interface DialogContextApp {\r\n  /** Root for app APIs and content/query */\r\n  Api: string;\r\n  Folder: string;\r\n  GettingStartedUrl: string;\r\n  Id: number;\r\n  Identifier: string;\r\n  IsContentApp: boolean;\r\n  IsGlobalApp: boolean;\r\n  IsInherited: boolean;\r\n  IsShared: boolean;\r\n  IsSiteApp: boolean;\r\n  Name: string;\r\n  Permissions: PermissionsCount;\r\n  SettingsScope: Of<typeof AppScopes>;\r\n  Url: string;\r\n  SharedUrl: string;\r\n\r\n  /** New app icon */\r\n  Icon: string;\r\n}\r\n\r\nexport interface ApiKeySpecs {\r\n  NameId: string;\r\n  ApiKey: string;\r\n  IsDemo: boolean;\r\n}\r\n\r\nexport const AppScopes = {\r\n  App: 'App',\r\n  Site: 'Site',\r\n  Global: 'Global',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n\r\n\r\nexport interface DialogContextEnable {\r\n  /** Determines if app admin should show app-permissions (true for Apps, false for Content and Global) */\r\n  AppPermissions?: boolean;\r\n  /** Determines if Code editing should be enabled (true for super-users) */\r\n  CodeEditor?: boolean;\r\n  DebugMode: boolean;\r\n  /** True if saving of formulas should be enabled (for edit-ui) */\r\n  FormulaSave?: boolean;\r\n  /** While debug is enabled, this allows some Edit Ui actions even when they are disabled in fields settings */\r\n  OverrideEditRestrictions?: boolean;\r\n  /** Determines if Queries should be enabled (true for Apps) */\r\n  Query?: boolean;\r\n}\r\n\r\nexport interface DialogContextLanguage {\r\n  Current: string;\r\n  List: Language[];\r\n  Primary: string;\r\n}\r\n\r\nexport interface DialogContextPage {\r\n  Id: number;\r\n}\r\n\r\nexport interface DialogContextSite {\r\n  DefaultApp: DialogContextSiteApp;\r\n  Id: number;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSystem {\r\n  DefaultApp: DialogContextSiteApp;\r\n  PrimaryApp: DialogContextSiteApp;\r\n  Url: string;\r\n}\r\n\r\nexport interface DialogContextSiteApp {\r\n  ZoneId: number;\r\n  AppId: number;\r\n}\r\n\r\nexport interface DialogContextUser {\r\n  Email: string;\r\n  Id: number;\r\n  Guid: string;\r\n  IsAnonymous: boolean;\r\n  IsSiteAdmin: boolean;\r\n  IsContentAdmin: boolean;\r\n  IsSystemAdmin: boolean;\r\n  Name: string;\r\n  Username: string;\r\n}\r\n\r\n// export interface DialogContextFeature {\r\n//   NameId: string;\r\n//   Enabled: boolean;\r\n// }\r\n","import { Injectable } from '@angular/core';\r\nimport { DialogTypeConstants } from '../constants/dialog-type.constants';\r\n// tslint:disable-next-line:max-line-length\r\nimport { keyAppId, keyContentBlockId, keyDebug, keyDialog, keyExtras, keyIsShared, keyItems, keyModuleId, keyPartOfPage, keyPipelineId, keyUrl, keyZoneId, prefix } from '../constants/session.constants';\r\nimport { DialogHashParams, ExtrasParam } from '../models/dialog-url-params.model';\r\nimport { EditForm, EditPrep, ViewOrFileIdentifier } from '../models/edit-form.model';\r\nimport { HttpServiceBase } from './http-service-base';\r\n\r\n@Injectable()\r\nexport class DialogService extends HttpServiceBase {\r\n\r\n  openCodeFile(path: string, isShared: boolean, templateId?: number) {\r\n    const dialog = DialogTypeConstants.Develop;\r\n    const form = {\r\n      items: [{\r\n        Path: path,\r\n        ...(templateId != null && EditPrep.editId(templateId)),\r\n      }] as ViewOrFileIdentifier[]\r\n    };\r\n\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyDialog, dialog),\r\n      ...this.buildHashParam(keyIsShared, isShared.toString()),\r\n      ...this.buildHashParam(keyItems, JSON.stringify(form.items)),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openQueryDesigner(queryId: number) {\r\n    const dialog = DialogTypeConstants.PipelineDesigner;\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(queryId)],\r\n    };\r\n\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyDialog, dialog),\r\n      ...this.buildHashParam(keyPipelineId, queryId.toString()),\r\n      ...this.buildHashParam(keyItems, JSON.stringify(form.items)),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openAppsManagement(zoneId: number, tab?: string) {\r\n    const extras: ExtrasParam = {\r\n      ...(tab && { tab }),\r\n    };\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyZoneId, zoneId.toString()),\r\n      ...this.buildHashParam(keyDialog, DialogTypeConstants.Zone),\r\n      ...(Object.keys(extras).length ? this.buildHashParam(keyExtras, JSON.stringify(extras)) : ''),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  openAppAdministration(zoneId: number, appId: number, tab?: string, scope?: string) {\r\n    const extras: ExtrasParam = {\r\n      ...(tab && { tab }),\r\n      ...(scope && { scope }),\r\n    };\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyZoneId, zoneId.toString()),\r\n      ...this.buildHashParam(keyAppId, appId.toString()),\r\n      ...this.buildHashParam(keyDialog, DialogTypeConstants.App),\r\n      ...(Object.keys(extras).length ? this.buildHashParam(keyExtras, JSON.stringify(extras)) : ''),\r\n    };\r\n    const url = this.buildFullUrl(hashParams);\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  /** A lot of the link is identical when opening the admin-dialogs in a new window */\r\n  private buildSharedHashParams() {\r\n    const hashParams: DialogHashParams = {\r\n      ...this.buildHashParam(keyZoneId, this.zoneId),\r\n      ...this.buildHashParam(keyAppId, this.appId),\r\n      ...this.buildHashParam(keyModuleId, this.context.moduleId?.toString()),\r\n      ...this.buildHashParam(keyContentBlockId, this.context.contentBlockId?.toString()),\r\n      ...this.buildHashParam(keyPartOfPage),\r\n      ...(sessionStorage.getItem(keyDebug) ? this.buildHashParam(keyDebug) : {}),\r\n    };\r\n    return hashParams;\r\n  }\r\n\r\n  /** Encodes param if necessary */\r\n  private buildHashParam(key: string, value?: string) {\r\n    const rawKey = key.replace(prefix, '');\r\n    const valueTemp = (value != null) ? value : sessionStorage.getItem(key);\r\n    const rawValue = encodeURIComponent(valueTemp);\r\n    const hashParam: DialogHashParams = { [rawKey]: rawValue };\r\n    return hashParam;\r\n  }\r\n\r\n  private buildFullUrl(hashParams: DialogHashParams) {\r\n    const oldHref = sessionStorage.getItem(keyUrl);\r\n    const oldUrl = new URL(oldHref);\r\n    const newHref = oldUrl.origin + oldUrl.pathname + oldUrl.search;\r\n\r\n    const allHashParams: DialogHashParams = {\r\n      ...this.buildSharedHashParams(),\r\n      ...hashParams,\r\n    };\r\n    const hashUrl = Object.entries(allHashParams).reduce((acc, [key, value]) => `${acc}&${key}=${value}`, '').replace('&', '#');\r\n    return newHref + hashUrl;\r\n  }\r\n}\r\n","import { reduce } from './reduce';\nimport { operate } from '../util/lift';\nconst arrReducer = (arr, value) => (arr.push(value), arr);\nexport function toArray() {\n    return operate((source, subscriber) => {\n        reduce(arrReducer, [])(source).subscribe(subscriber);\n    });\n}\n"],"names":["inject","input","MatBadgeModule","MatRippleModule","MatIconModule","FeatureNames","FeaturesScopedService","TippyDirective","i0","ɵɵelementStart","ɵɵlistener","LightSpeedActionsComponent_Conditional_0_Template_div_click_0_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","openLightspeedFeatureInfo","ɵɵtext","ɵɵelementEnd","ɵɵproperty","params","lightSpeedLink","lightSpeedOwner","ɵɵsanitizeUrl","ɵɵtemplate","LightSpeedActionsComponent_Conditional_1_Conditional_1_Template","LightSpeedActionsComponent_Conditional_1_Conditional_2_Template","ɵɵclassMapInterpolate1","appHasLightSpeed","lightSpeed","Title","ɵɵadvance","ɵɵconditional","appLightSpeedEnabled","LightSpeedActionsComponent","constructor","required","features","lightSpeedEnabled","isEnabled","LightSpeed","Id","IsEnabled","selectors","inputs","decls","vars","consts","template","LightSpeedActionsComponent_Template","rf","ctx","LightSpeedActionsComponent_Conditional_0_Template","LightSpeedActionsComponent_Conditional_1_Template","i1","MatIcon","i2","MatBadge","i3","MatRipple","encapsulation","eavConstants","EditPrep","AppAdminHelpers","getLightSpeedEditParams","appId","form","items","newMetadata","appMetadata","ContentTypeName","metadata","app","fieldNamePattern","fieldNameError","AgActionsAlwaysRefresh","refresh","computed","signal","Signal","map","webApiAppRoot","HttpServiceBase","AnalyzeSettingsService","getStackSig","part","key","view","stringifyValue","stackSignal","getAndWrite","stackItem","_value","JSON","stringify","Value","getStack","getHttp","pipe","stack","__ngFactoryType__","factory","ɵfac","transient","JsonHelpers","ClipboardService","AnalyzeSettingsValueComponent","clipboard","agInit","value","copy","tryParse","copyToClipboard","AnalyzeSettingsValueComponent_Template","AnalyzeSettingsValueComponent_Template_div_click_0_listener","ɵɵtextInterpolate","styles","webApiAppRootList","webApiAppRootInheritableApps","webApiAppRootPendingApps","webApiAppRootApp","webApiAppRootInstallPendingApps","webApiAppRootFlushcache","AppsListService","getAll","getSignal","zoneId","getInheritable","getPendingApps","create","name","inheritAppId","templateId","http","post","apiUrl","installPendingApps","pendingApps","delete","toString","flushCache","getHttpApiUrl","FileUploadMessageTypes","webAPiLicenseRetrieve","webApiFeatSaveNew","webApiLicSummary","webApiUpload","FeaturesConfigService","saveFeatures","featuresStates","getLicenses","getLicensesSig","uploadLicense","file","formData","FormData","append","info","Success","Messages","MessageType","Error","Text","Message","retrieveLicense","webApiZoneRootGetLanguages","webApiZoneRootSwitchLanguage","webApiZoneRootGetSystemInfo","webApiAppRootRootlanguages","ZoneService","getLanguage","initial","toggleLanguage","code","enable","cultureCode","getSystemInfo","getLanguagesPermissions","contentExportDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","ContentExportComponent","DialogEntryComponent","ContentExportRoutes","path","component","data","dialog","webApiEntityRootDownload","webApiEntityRootJson","webApiTypeRootJson","webApiTypeRootJsonBundleExport","webApiTypeRootJsonBundleSave","ContentExportService","exportContent","values","selectedIds","selectedIdsString","join","url","language","defaultLanguage","contentTypeStaticName","recordExport","resourcesReferences","languageReferences","window","open","exportJson","typeName","exportEntity","id","prefix","contentImportDialog","ContentImportComponent","contentImportRoutes","contentItemsDialog","ContentItemsComponent","GoToMetadata","importContentItemDialog","EditRoutes","contentItemsRoutes","children","getRoutes","loadChildren","then","m","title","ImportContentItemComponent","contentTypeFieldsDialog","ContentTypeFieldsComponent","DataTypeCatalog","calculateTypeIcon","typeIconMap","Boolean","Custom","DateTime","Empty","Entity","Hyperlink","Number","String","calculateTypeLabel","typeLabelMap","GoToPermissions","editContentTypeFieldsDialog","contentTypeFieldsRoutes","route","EditContentTypeFieldsComponent","AbstractControl","NG_VALIDATORS","ValidationErrors","ReservedNamesValidatorDirective","appReservedNames","validate","control","controlValue","toLocaleLowerCase","reservedName","Object","keys","find","reservedNames","mergeReserved","fields","existingFields","forEach","field","StaticName","ɵɵProvidersFeature","provide","useExisting","multi","FormsModule","ReactiveFormsModule","UntypedFormControl","UntypedFormGroup","Validators","MatButtonModule","MatCardModule","MatOptionModule","MatDialogRef","MatFormFieldModule","MatSelectModule","FieldHintComponent","FileLocationDialogComponent","hostClass","ngOnInit","isShared","closeDialog","close","confirm","formValues","getRawValue","ɵɵdirectiveInject","hostVars","hostBindings","FileLocationDialogComponent_HostBindings","ɵɵhostProperty","FileLocationDialogComponent_Conditional_14_Template","FileLocationDialogComponent_Template_button_click_16_listener","FileLocationDialogComponent_Template_button_click_18_listener","controls","touched","errors","valid","MatCard","MatCardActions","MatCardContent","MatCardHeader","MatCardTitle","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","i5","MatSelect","i6","MatOption","i7","MatButton","environment","DebugFields","production","isEqual","classLog","FieldValueHelpers","ValidationMsgHelper","logSpecs","all","markTouched","set","disable","getErrors","pfx","UiControl","moreDisabled","log","warningMessages","jsonWarning","formulaWarning","dirty","invalid","disabled","extendName","aIfInList","emptyControl","touchedAndInvalid","setIfChanged","newValue","before","#set","markAsTouched","fieldValuesAreEqual","markAsDirty","patchValue","updateValueAndValidity","l","fnIfInList","r","errorKey","error","messages","getWarnings","_warning","warning","warningKey","RxHelpers","x","y","isNaN","Array","isArray","arraysEqual","getItemValuesChanges","oldValues","newValues","changes","oldValue","length","undefined","notValid","long","min","max","minNoItems","maxNoItems","pattern","decimals","jsonError","formulaError","validateForm","controlKey","entries","importAppDialog","ImportAppComponent","importRoutes","itemHistoryDialog","ItemHistoryComponent","historyRoutes","webApiContentGroup","ContentGroupService","getItems","item","guid","index","saveItem","entityId","add","removeItem","contentGroup","parent","getList","saveList","resortedList","getHeader","replaceContentDialog","ReplaceContentComponent","EditRoutesNoHistory","replaceContentRoutes","ChangeDetectorRef","Type","ViewContainerRef","MatDialog","ActivatedRoute","Router","Context","dialogData","matDialog","viewContainerRef","router","context","changeDetectorRef","navigation","getCurrentNavigation","extras","state","fn","dialogConfig","snapshot","a","_dialogAnimatingOpen","_lastDialogRef","afterOpened","subscribe","openDialogComponent","ngOnDestroy","svcId","init","autoFocus","backdropClass","closeOnNavigation","showScrollbar","position","top","afterClosed","navRes","navigateUrl","navigate","pathFromRoot","$2sxc","totalPopup","relativeTo","markForCheck","DialogEntryComponent_Template","guidRegex","parse","loadScripts","scriptObjects","callback","iteration","isLast","newCallback","bind","scrObj","global","test","w","require","src","exportedVar","UpdateEnvVarsFromDialogSettings","appContext","includedApiRoot","Api","old2sxcHeader","env","header","new2sxcHeader","appApi","load","AppScopes","App","Site","Global","DialogTypeConstants","keyAppId","keyContentBlockId","keyDebug","keyDialog","keyExtras","keyIsShared","keyItems","keyModuleId","keyPartOfPage","keyPipelineId","keyUrl","keyZoneId","DialogService","openCodeFile","Develop","Path","editId","hashParams","buildHashParam","buildFullUrl","openQueryDesigner","queryId","PipelineDesigner","openAppsManagement","tab","Zone","openAppAdministration","scope","buildSharedHashParams","moduleId","contentBlockId","sessionStorage","getItem","rawKey","replace","valueTemp","rawValue","encodeURIComponent","hashParam","oldHref","oldUrl","URL","newHref","origin","pathname","search","allHashParams","hashUrl","reduce","acc","operate","arrReducer","arr","push","toArray","source","subscriber"],"sourceRoot":"webpack:///","x_google_ignoreList":[45]}