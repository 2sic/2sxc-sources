"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6"],{7693:(D,E,t)=>{t.d(E,{X:()=>d,g:()=>s});var I=t(271),g=t(8873),_=t(8559),l=t(6443),h=t(4821);const d="admin/type/",u="admin/type/scopes";let s=(()=>{class n{constructor(p,r,c){this.http=p,this.context=r,this.dnnContext=c}apiUrl(p){return this.dnnContext.$2sxc.http.apiUrl(p)}retrieveContentType(p){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:p}})}retrieveContentTypes(p){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:p}})}getScopes(){return this.http.get(this.apiUrl(u),{params:{appId:this.context.appId.toString()}}).pipe((0,I.T)(p=>{const r=p.old;return Object.keys(r).map(y=>({name:r[y],value:y}))}))}getScopesV2(){return this.http.get(this.apiUrl(u),{params:{appId:this.context.appId.toString()}}).pipe((0,I.T)(p=>p.scopes))}save(p){return this.http.post(this.apiUrl("admin/type/save"),p,{params:{appid:this.context.appId.toString()}})}delete(p){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:p.StaticName}})}import(p){const r=new FormData;for(const c of p)r.append("File",c);return this.http.post(this.apiUrl("admin/type/import"),r,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(p){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:p}})}static#t=this.\u0275fac=function(r){return new(r||n)(_.KVO(l.Qq),_.KVO(g.o),_.KVO(h.ob))};static#e=this.\u0275prov=_.jDH({token:n,factory:n.\u0275fac})}return n})()},6754:(D,E,t)=>{t.r(E),t.d(E,{ImportContentItemComponent:()=>d});var I=t(7941),g=t(3550),_=t(336),l=t(5437),h=t(8559);let d=(()=>{class i{constructor(u){this.uploadType=g.HL.ContentItem,this.contentItemsService=(0,l.d)(_.F),u.title??="Import Single Item",u.description??="Select an item file (json) from your computer to import.",u.allowedFileTypes??="json",u.upload$??=o=>this.contentItemsService.importItem(o[0])}static#t=this.\u0275fac=function(o){return new(o||i)(h.rXU(I.Vh))};static#e=this.\u0275cmp=h.VBU({type:i,selectors:[["app-import-content-item"]],standalone:!0,features:[h.aNF],decls:1,vars:1,consts:[[3,"uploadType"]],template:function(o,a){1&o&&h.nrm(0,"app-file-upload-dialog",0),2&o&&h.Y8G("uploadType",a.uploadType)},dependencies:[g.jj]})}return i})()},5959:(D,E,t)=>{t.d(E,{h6:()=>o,zZ:()=>T});var I=t(271),g=t(7693),_=t(8873),l=t(8559),h=t(6443),d=t(4821);const i="admin/field/",T="admin/field/all",u="admin/field/GetSharedFields";let o=(()=>{class a{constructor(e,s,n){this.http=e,this.context=s,this.dnnContext=n}apiUrl(e){return this.dnnContext.$2sxc.http.apiUrl(e)}typeListRetrieve(){return this.http.get(this.apiUrl(i+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(i+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,I.T)(e=>e.map(n=>({dataType:n.Type.substring(0,n.Type.indexOf("-")),inputType:n.Type,label:n.Label,description:n.Description,isDefault:n.IsDefault,isObsolete:n.IsObsolete,isRecommended:n.IsRecommended,obsoleteMessage:n.ObsoleteMessage,icon:n.IsDefault?"star":n.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(i+"ReservedNames"))}getFields(e){return this.http.get(this.apiUrl(T),{params:{appid:this.context.appId.toString(),staticName:e}}).pipe((0,I.T)(s=>{if(s)for(const n of s){if(!n.Metadata)continue;const m=n.Metadata;m.merged={...m.All,...m[n.Type],...m[n.InputType]}}return s}))}getShareableFields(){return this.http.get(this.apiUrl(u),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(e){return this.http.get(this.apiUrl(u),{params:{appid:this.context.appId.toString(),attributeId:e.toString()}})}addInheritedField(e,s,n,m){return this.http.post(this.apiUrl(i+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:e.toString(),SourceType:s,SourceField:n,name:m}})}share(e,s=!0){return this.http.post(this.apiUrl(i+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:e.toString(),share:s}})}inherit(e,s){return this.http.post(this.apiUrl(i+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:e.toString(),inheritMetadataOf:s}})}reOrder(e,s){return this.http.post(this.apiUrl(i+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:s.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,s){return this.http.post(this.apiUrl(g.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:s.Id.toString(),attributeId:e.Id.toString()}})}rename(e,s,n){return this.http.post(this.apiUrl(i+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:s.toString(),attributeId:e.toString(),newName:n}})}delete(e,s){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(i+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:s.Id.toString(),attributeId:e.Id.toString()}})}add(e,s){return this.http.post(this.apiUrl(i+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:s.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,s,n){return this.http.post(this.apiUrl(i+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:e.toString(),field:s,inputType:n}})}static#t=this.\u0275fac=function(s){return new(s||a)(l.KVO(h.Qq),l.KVO(_.o),l.KVO(d.ob))};static#e=this.\u0275prov=l.jDH({token:a,factory:a.\u0275fac})}return a})()},693:(D,E,t)=>{function I(_){return new Promise((l,h)=>{const d=new FileReader;d.readAsDataURL(_),d.onload=()=>{l(d.result.split(",")[1])},d.onerror=i=>{h(i)}})}function g(_){return new Promise((l,h)=>{const d=new FileReader;d.readAsText(_),d.onload=()=>{l(d.result)},d.onerror=i=>{h(i)}})}t.d(E,{d:()=>g,n:()=>I})},9234:(D,E,t)=>{t.d(E,{Gg:()=>s,Tr:()=>n,gb:()=>e});var I=t(1567),g=t(6647),_=t(6301),l=t(271),h=t(4979),d=t(8147),i=t(4839),T=t(5437),u=t(8559),o=t(6443),a=t(4821);const e="admin/entity/",s="admin/entity/list";let n=(()=>{class m extends h.V{constructor(r,c){super(new d.B("EntityService",!1)),this.http=r,this.dnnContext=c,this.queryService=(0,T.d)(i.c)}getEntities$(r){return r.pipe((0,I.p)(c=>null!=c),(0,g.n)(c=>this.getAvailableEntities(c.contentTypeName).pipe((0,_.t)(1))))}getAvailableEntities(r,c){var y=this.log.rxTap("getEntities",{enabled:!0});return this.queryService.getEntities({contentTypes:[r],itemIds:c,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe(y.pipe(),(0,l.T)(P=>P.Default))}delete(r,c,y,P,v,M){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(e+"delete"),{params:{contentType:c,id:y.toString(),appId:r,force:P.toString(),...v&&{parentId:v.toString()},...v&&M&&{parentField:M}}})}static#t=this.\u0275fac=function(c){return new(c||m)(u.KVO(o.Qq),u.KVO(a.ob))};static#e=this.\u0275prov=u.jDH({token:m,factory:m.\u0275fac})}return m})()},4839:(D,E,t)=>{t.d(E,{c:()=>i});var I=t(8147),g=t(4979),_=t(8873),l=t(8559),h=t(6443);let i=(()=>{class T extends g.V{constructor(o,a){super(new I.B("QueryService",!1)),this.http=o,this.context=a}getAvailableEntities(o,a,O,e){this.log.a("getAvailableEntities",{queryUrl:o,params:a,fields:O,entitiesFilter:e});const s=!!a,r=(((a?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(s?`&${a}`:"")+"&$select="+(O??"")).substring(1);return this.http.post(`app/auto/query/${o}?${r}`,{Guids:e})}getEntities({contentTypes:o,itemIds:a,fields:O,log:e}){this.log.a(`getEntities(${e})`,{contentTypes:o,itemIds:a,fields:O});const n=("&typeNames="+(o?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(a?.join(",")??"")+"&$select="+(O??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${n}`,{})}static#t=this.\u0275fac=function(a){return new(a||T)(l.KVO(h.Qq),l.KVO(_.o))};static#e=this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac})}return T})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6.d922ec0fe622f1d3.js.map