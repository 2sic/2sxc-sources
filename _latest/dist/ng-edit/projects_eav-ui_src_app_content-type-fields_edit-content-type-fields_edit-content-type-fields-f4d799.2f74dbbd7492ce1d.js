"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-f4d799"],{6335:(J,F,o)=>{o.r(F),o.d(F,{EditContentTypeFieldsComponent:()=>je});var l=o(8849),c=o(8071),v=o(5584),h=o(1891),n=o(9736),Z=o(4300),u=o(4980),I=o(4520),U=o(5616),D=o(2389),y=o(7938),m=o(4114);const x=(t,r)=>(t.push(r),t);function A(){return(0,m.e)((t,r)=>{(function S(t,r){return(0,m.e)((0,y.U)(t,r,arguments.length>=2,!1,!0))})(x,[])(t).subscribe(r)})}const w=/^[A-Za-z][A-Za-z0-9]+$/,H="Standard letters and numbers are allowed. Must start with a letter.";var W=o(5530),$=o(9097),O=o(6191),K=o(5809),N=o(9294),g=o(5807);const b={Boolean:{label:(0,N.C)(O.Q.Boolean),description:"Yes/no or true/false values"},Custom:{label:(0,N.C)(O.Q.Custom),description:"Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything"},DateTime:{label:(0,N.C)(O.Q.DateTime),description:"For date, time or combined values"},Empty:{label:(0,N.C)(O.Q.Empty),description:"Use to structure your form"},Entity:{label:(0,N.C)(O.Q.Entity),description:"One or more other content-items"},Hyperlink:{label:(0,N.C)(O.Q.Hyperlink),description:"Hyperlink or reference to a picture / file"},Number:{label:(0,N.C)(O.Q.Number),description:"Any kind of number"},String:{label:(0,N.C)(O.Q.String),description:"Any kind of text"}};var f=o(3488),T=o(6861),_=o(5299),E=o(1527),R=o(5331),G=o(8968),e=o(1699),X=o(9409),ae=o(7648),B=o(6575),q=o(9851),z=o(895),V=o(9674),k=o(1268),se=o(8497),le=o(425);let ee=(()=>{var t;class r{constructor(){this.reservedNames={}}validate(i){if(!i.value)return null;const a=i.value.toLocaleLowerCase(),d=Object.keys(this.reservedNames).find(p=>p.toLocaleLowerCase()===a);return d?{reservedNames:this.reservedNames[d]}:null}}return(t=r).\u0275fac=function(i){return new(i||t)},t.\u0275dir=e.lG2({type:t,selectors:[["","appReservedNames",""]],inputs:{reservedNames:["appReservedNames","reservedNames"]},features:[e._Bn([{provide:l.Cf,useExisting:t,multi:!0}])]}),r})();var te=o(1916);const re=["ngForm"];function de(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"Content Type"),e.qZA()())}function ce(t,r){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&t){const s=r.$implicit;e.xp6(1),e.hij(" ",s.ContentType.Name," ")}}function pe(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"Name"),e.qZA()())}function me(t,r){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&t){const s=r.$implicit;e.xp6(1),e.hij(" ",s.StaticName," ")}}function ue(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"Type"),e.qZA()())}function fe(t,r){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.qZA()),2&t){const s=r.$implicit;e.xp6(1),e.hij(" ",s.Type," ")}}function ge(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"Share"),e.qZA()())}function he(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"td",27)(1,"button",22),e.NdJ("click",function(){const d=e.CHM(s).$implicit,p=e.oxw();return e.KtG(p.selectField(d))}),e._uU(2,"Select"),e.qZA()()}}function _e(t,r){1&t&&e._UZ(0,"tr",28)}function ve(t,r){1&t&&e._UZ(0,"tr",29)}function Ce(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"New Name"),e.qZA()())}function Te(t,r){if(1&t&&(e.TgZ(0,"app-field-hint",35),e._uU(1),e.qZA()),2&t){const s=e.oxw(3);e.Q6J("isError",!0),e.xp6(1),e.Oqu(s.fieldNameError)}}function ye(t,r){if(1&t&&(e.TgZ(0,"app-field-hint",35),e._uU(1),e.qZA()),2&t){e.oxw(2);const s=e.MAs(5);e.Q6J("isError",!0),e.xp6(1),e.hij(" ",s.errors.reservedNames," ")}}function xe(t,r){if(1&t&&(e.ynx(0),e.YNc(1,Te,2,2,"app-field-hint",34),e.YNc(2,ye,2,2,"app-field-hint",34),e.BQk()),2&t){e.oxw();const s=e.MAs(5);e.xp6(1),e.Q6J("ngIf",s.errors.pattern),e.xp6(1),e.Q6J("ngIf",s.errors.reservedNames)}}function Fe(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"td",27)(1,"mat-form-field",30)(2,"mat-label"),e._uU(3,"New Name"),e.qZA(),e.TgZ(4,"input",31,32),e.NdJ("ngModelChange",function(a){const p=e.CHM(s).$implicit;return e.KtG(p.newName=a)}),e.qZA()(),e.YNc(6,xe,3,2,"ng-container",33),e.qZA()}if(2&t){const s=r.$implicit,i=r.index,a=e.MAs(5),d=e.oxw();e.xp6(4),e.Q6J("pattern",d.fieldNamePattern)("ngModel",s.newName)("name","StaticName"+i)("appReservedNames",d.reservedNames),e.xp6(2),e.Q6J("ngIf",a.errors)}}function be(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"Source"),e.qZA()())}function Se(t,r){if(1&t&&(e.TgZ(0,"td",36),e._uU(1),e.qZA()),2&t){const s=r.$implicit;e.xp6(1),e.lnq(" ",s.field.ContentType.Name,"/",s.field.StaticName," (",s.field.Type,") ")}}function Ae(t,r){1&t&&(e.TgZ(0,"th",26)(1,"b"),e._uU(2,"Remove"),e.qZA()())}function Ne(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"td",27)(1,"button",22),e.NdJ("click",function(){const d=e.CHM(s).$implicit,p=e.oxw();return e.KtG(p.removeField(d))}),e._uU(2,"Remove"),e.qZA()()}}function Ze(t,r){1&t&&e._UZ(0,"tr",28)}function Ie(t,r){1&t&&e._UZ(0,"tr",29)}let Me=(()=>{var t;class r extends $.f{constructor(i,a,d,p,P,L,Y,Q){super(),this.dialogData=i,this.dialogRef=a,this.contentTypesFieldsService=d,this.snackBar=p,this.featuresService=P,this.dialog=L,this.viewContainerRef=Y,this.changeDetectorRef=Q,this.hostClass="dialog-component",this.displayedShareableFieldsColumns=["contentType","name","type","share"],this.displayedSelectedFieldsColumns=["newName","source","remove"],this.shareableFields=new _.by([]),this.selectedFields=new _.by([]),this.fieldNamePattern=w,this.fieldNameError=H,this.saving$=new c.X(!1),this.dialogRef.disableClose=!0,this.subscription.add(this.dialogRef.backdropClick().subscribe(()=>{(this.form.dirty||this.selectedFields.data.length>0)&&!confirm("You have unsaved changes. Are you sure you want to close this dialog?")||this.closeDialog()}))}ngOnInit(){this.subscription.add(this.contentTypesFieldsService.getShareableFields().subscribe(i=>{this.shareableFields.data=i})),this.subscription.add(this.contentTypesFieldsService.getReservedNames().subscribe(i=>{const a={};this.dialogData.existingFields.forEach(d=>{a[d.StaticName]="Field with this name already exists"}),this.reservedNames={...i,...a}}))}ngOnDestroy(){this.saving$.complete(),super.ngOnDestroy()}selectField(i){const a=this.selectedFields.data;a.push({newName:i.StaticName,field:i}),this.selectedFields.data=a}removeField(i){const a=this.selectedFields.data;a.splice(a.indexOf(i),1),this.selectedFields.data=a}save(){this.featuresService.isEnabled$(R.C.FieldShareConfigManagement).pipe((0,E.q)(1)).subscribe(i=>{i?(this.saving$.next(!0),this.snackBar.open("Saving..."),(0,u.of)(...this.selectedFields.data).pipe((0,I.h)(a=>!!a.newName),(0,U.b)(a=>this.contentTypesFieldsService.addInheritedField(this.dialogData.contentType.Id,a.field.ContentType.Id,a.field.Guid,a.newName).pipe((0,D.K)(d=>(0,u.of)(null)))),A()).subscribe(a=>{this.saving$.next(!1),this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})):G.B.openDialog(this.dialog,R.C.FieldShareConfigManagement,this.viewContainerRef,this.changeDetectorRef)})}closeDialog(){this.dialogRef.close()}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(T.WI),e.Y36(T.so),e.Y36(g.Mr),e.Y36(X.ux),e.Y36(ae.k),e.Y36(T.uw),e.Y36(e.s_b),e.Y36(e.sBO))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-add-sharing-fields"]],viewQuery:function(i,a){if(1&i&&e.Gf(re,5,l.F),2&i){let d;e.iGM(d=e.CRH())&&(a.form=d.first)}},hostVars:1,hostBindings:function(i,a){2&i&&e.Ikx("className",a.hostClass)},features:[e.qOj],decls:50,vars:16,consts:[[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"eav-tables-div"],[1,"eav-table-div-left"],["mat-table","",1,"eav-fields-table",3,"dataSource"],["matColumnDef","contentType"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","eav-table-cell",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","type"],["matColumnDef","share"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"eav-table-div-right"],["ngForm","ngForm"],["matColumnDef","newName"],["matColumnDef","source"],["mat-cell","","style","word-break:break-all;","class","eav-table-cell",4,"matCellDef"],["matColumnDef","remove"],["align","end"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"disabled","click"],[1,"eav-button-feature"],[1,"eav-button-feature-icon",3,"featureNameId"],["mat-header-cell",""],["mat-cell","",1,"eav-table-cell"],["mat-header-row",""],["mat-row",""],["color","accent",1,"eav-form-field"],["matInput","",3,"pattern","ngModel","name","appReservedNames","ngModelChange"],["newName","ngModel"],[4,"ngIf"],[3,"isError",4,"ngIf"],[3,"isError"],["mat-cell","",1,"eav-table-cell",2,"word-break","break-all"]],template:function(i,a){if(1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._uU(3),e.ALo(4,"translate"),e.qZA()(),e.TgZ(5,"div",3)(6,"span"),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",4)(10,"mat-card",5)(11,"table",6),e.ynx(12,7),e.YNc(13,de,3,0,"th",8),e.YNc(14,ce,2,1,"td",9),e.BQk(),e.ynx(15,10),e.YNc(16,pe,3,0,"th",8),e.YNc(17,me,2,1,"td",9),e.BQk(),e.ynx(18,11),e.YNc(19,ue,3,0,"th",8),e.YNc(20,fe,2,1,"td",9),e.BQk(),e.ynx(21,12),e.YNc(22,ge,3,0,"th",8),e.YNc(23,he,3,0,"td",9),e.BQk(),e.YNc(24,_e,1,0,"tr",13),e.YNc(25,ve,1,0,"tr",14),e.qZA()(),e.TgZ(26,"mat-card",15)(27,"form",null,16)(29,"table",6),e.ynx(30,17),e.YNc(31,Ce,3,0,"th",8),e.YNc(32,Fe,7,5,"td",9),e.BQk(),e.ynx(33,18),e.YNc(34,be,3,0,"th",8),e.YNc(35,Se,2,3,"td",19),e.BQk(),e.ynx(36,20),e.YNc(37,Ae,3,0,"th",8),e.YNc(38,Ne,3,0,"td",9),e.BQk(),e.YNc(39,Ze,1,0,"tr",13),e.YNc(40,Ie,1,0,"tr",14),e.qZA()()()(),e.TgZ(41,"mat-dialog-actions",21)(42,"button",22),e.NdJ("click",function(){return a.closeDialog()}),e._uU(43,"Cancel"),e.qZA(),e.TgZ(44,"button",23),e.NdJ("click",function(){return a.save()}),e.ALo(45,"async"),e.TgZ(46,"div",24)(47,"span"),e._uU(48,"Save"),e.qZA(),e._UZ(49,"app-feature-icon-indicator",25),e.qZA()()()()()),2&i){const d=e.MAs(28);e.xp6(3),e.hij(" ",e.lcZ(4,10,"SharingOrInheriting.TitleAddFieldsWhichInherit")," "),e.xp6(4),e.Oqu(e.lcZ(8,12,"SharingOrInheriting.PickFieldsToInheritFrom")),e.xp6(4),e.Q6J("dataSource",a.shareableFields),e.xp6(13),e.Q6J("matHeaderRowDef",a.displayedShareableFieldsColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedShareableFieldsColumns),e.xp6(4),e.Q6J("dataSource",a.selectedFields),e.xp6(10),e.Q6J("matHeaderRowDef",a.displayedSelectedFieldsColumns),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedSelectedFieldsColumns),e.xp6(4),e.Q6J("disabled",!d.form.valid||0==a.selectedFields.data.length||e.lcZ(45,14,a.saving$)),e.xp6(5),e.Q6J("featureNameId","FieldShareConfigManagement")}},dependencies:[B.O5,q.Y,T.H8,z.lW,l._Y,l.Fj,l.JJ,l.JL,l.c5,l.On,l.F,V.Nt,k.KE,k.hX,_.BZ,_.fO,_.as,_.w1,_.Dz,_.nj,_.ge,_.ev,_.XQ,_.Gk,se.a8,le.F,ee,B.Ov,te.X$],styles:[".eav-tables-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;margin-top:4px;padding-top:4px;height:400px}.eav-tables-div[_ngcontent-%COMP%]   .eav-table-div-left[_ngcontent-%COMP%]{width:50%;height:100%;margin-right:4px;overflow-y:auto;border:1px solid rgba(0,0,0,.1)}.eav-tables-div[_ngcontent-%COMP%]   .eav-table-div-right[_ngcontent-%COMP%]{width:50%;height:100%;margin-left:4px;overflow-y:auto;border:1px solid rgba(0,0,0,.1)}.eav-tables-div[_ngcontent-%COMP%]   .eav-table-div-right[_ngcontent-%COMP%]   .eav-form-field[_ngcontent-%COMP%]{max-width:150px}.eav-tables-div[_ngcontent-%COMP%]   .eav-table-cell[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.1)}.eav-tables-div[_ngcontent-%COMP%]   .mat-column-source[_ngcontent-%COMP%]{min-width:150px}.eav-button-feature[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.eav-button-feature[_ngcontent-%COMP%]   .eav-button-feature-icon[_ngcontent-%COMP%]{margin-left:4px;margin-top:6px}"]}),r})();var Oe=o(91),Ee=o(40),De=o(6515),ne=o(6355),we=o(257);const Ue=["ngForm"];function Ye(t,r){1&t&&(e.ynx(0),e._uU(1,"Fields"),e.BQk())}function Pe(t,r){1&t&&(e.ynx(0),e._uU(1,"Add Fields"),e.BQk())}function Qe(t,r){1&t&&(e.ynx(0),e._uU(1,"Edit Field"),e.BQk())}function Je(t,r){if(1&t&&(e.TgZ(0,"app-field-hint",24),e._uU(1),e.qZA()),2&t){const s=e.oxw(4);e.Q6J("isError",!0),e.xp6(1),e.Oqu(s.fieldNameError)}}function He(t,r){if(1&t&&(e.TgZ(0,"app-field-hint",24),e._uU(1),e.qZA()),2&t){e.oxw(2);const s=e.MAs(6);e.Q6J("isError",!0),e.xp6(1),e.hij(" ",s.errors.reservedNames," ")}}function Re(t,r){if(1&t&&(e.ynx(0),e.YNc(1,Je,2,2,"app-field-hint",23),e.YNc(2,He,2,2,"app-field-hint",23),e.BQk()),2&t){e.oxw();const s=e.MAs(6);e.xp6(1),e.Q6J("ngIf",s.errors.pattern),e.xp6(1),e.Q6J("ngIf",s.errors.reservedNames)}}function Be(t,r){if(1&t&&(e.TgZ(0,"mat-option",25)(1,"mat-icon",19),e._uU(2),e.qZA(),e.TgZ(3,"span"),e._uU(4),e.qZA()()),2&t){const s=r.$implicit;e.Q6J("value",s.name),e.xp6(2),e.Oqu(s.icon),e.xp6(2),e.Oqu(s.label)}}function $e(t,r){if(1&t&&(e.TgZ(0,"mat-icon",21),e._uU(1),e.qZA()),2&t){const s=e.oxw().$implicit;e.xp6(1),e.Oqu(s.icon)}}const Le=function(t){return{"eav-input-obsolete":t}};function Ke(t,r){if(1&t&&(e.TgZ(0,"mat-option",26)(1,"div")(2,"span"),e._uU(3),e.qZA(),e.YNc(4,$e,2,1,"mat-icon",27),e.qZA()()),2&t){const s=r.$implicit;e.Q6J("value",s.inputType)("ngClass",e.VKq(4,Le,s.isObsolete)),e.xp6(3),e.Oqu(s.label),e.xp6(1),e.Q6J("ngIf",s.icon)}}function ke(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"div",13)(1,"div",14)(2,"mat-form-field",15)(3,"mat-label"),e._uU(4,"Name"),e.qZA(),e.TgZ(5,"input",16,17),e.NdJ("ngModelChange",function(a){const p=e.CHM(s).$implicit;return e.KtG(p.StaticName=a)}),e.qZA()(),e.YNc(7,Re,3,2,"ng-container",3),e.qZA(),e.TgZ(8,"div",14)(9,"mat-form-field",15)(10,"mat-label"),e._uU(11,"Data Type"),e.qZA(),e.TgZ(12,"mat-select",18),e.NdJ("selectionChange",function(){const d=e.CHM(s).index,p=e.oxw(2);return p.filterInputTypeOptions(d),p.resetInputType(d),e.KtG(p.calculateHints(d))})("ngModelChange",function(a){const p=e.CHM(s).$implicit;return e.KtG(p.Type=a)}),e.TgZ(13,"mat-select-trigger")(14,"mat-icon",19),e._uU(15),e.qZA(),e.TgZ(16,"span"),e._uU(17),e.qZA()(),e.YNc(18,Be,5,3,"mat-option",20),e.qZA()(),e.TgZ(19,"app-field-hint"),e._uU(20),e.qZA()(),e.TgZ(21,"div",14)(22,"mat-form-field",15)(23,"mat-label"),e._uU(24,"Input Type"),e.qZA(),e.TgZ(25,"mat-select",18),e.NdJ("selectionChange",function(){const d=e.CHM(s).index,p=e.oxw(2);return e.KtG(p.calculateHints(d))})("ngModelChange",function(a){const p=e.CHM(s).$implicit;return e.KtG(p.InputType=a)}),e.TgZ(26,"mat-select-trigger")(27,"span"),e._uU(28),e.qZA(),e.TgZ(29,"mat-icon",21),e._uU(30),e.qZA()(),e.YNc(31,Ke,5,6,"mat-option",22),e.qZA()(),e.TgZ(32,"app-field-hint"),e._uU(33),e.qZA()()()}if(2&t){const s=r.$implicit,i=r.index,a=e.MAs(6),d=e.oxw(2);let p,P;e.xp6(5),e.Q6J("pattern",d.fieldNamePattern)("appReservedNames",d.reservedNames)("ngModel",s.StaticName)("name","StaticName"+i)("disabled","inputType"===d.editMode),e.xp6(2),e.Q6J("ngIf",a.touched&&a.errors),e.xp6(5),e.Q6J("ngModel",s.Type)("name","Type"+i)("disabled",null!=d.editMode),e.xp6(3),e.Oqu(d.findIcon(s.Type)),e.xp6(2),e.Oqu(d.findLabel(s.Type)),e.xp6(1),e.Q6J("ngForOf",d.dataTypes),e.xp6(2),e.Oqu(d.dataTypeHints[i]),e.xp6(5),e.Q6J("ngModel",s.InputType)("name","InputType"+i)("disabled","name"===d.editMode),e.xp6(3),e.Oqu(null==(p=d.getInputTypeOption(s.InputType))?null:p.label),e.xp6(2),e.Oqu(null==(P=d.getInputTypeOption(s.InputType))?null:P.icon),e.xp6(1),e.Q6J("ngForOf",d.filteredInputTypeOptions[i]),e.xp6(2),e.Oqu(d.inputTypeHints[i])}}function We(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(s);const a=e.oxw(2);return e.KtG(a.addSharedField())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SharingOrInheriting.AddSharedField")))}function Ge(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.save())}),e.TgZ(2,"div",7),e.YNc(3,ke,34,20,"div",8),e.qZA(),e.TgZ(4,"mat-dialog-actions"),e.YNc(5,We,3,3,"button",9),e.ALo(6,"async"),e._UZ(7,"div",10),e.TgZ(8,"button",11),e.NdJ("click",function(){e.CHM(s);const a=e.oxw();return e.KtG(a.closeDialog())}),e._uU(9,"Cancel"),e.qZA(),e.TgZ(10,"button",12),e.ALo(11,"async"),e._uU(12," Save "),e.qZA()()()}if(2&t){const s=e.MAs(1),i=e.oxw();e.xp6(3),e.Q6J("ngForOf",i.fields),e.xp6(2),e.Q6J("ngIf",e.lcZ(6,3,i.debugEnabled$)),e.xp6(5),e.Q6J("disabled",!s.form.valid||e.lcZ(11,5,i.saving$))}}let je=(()=>{var t;class r extends $.f{constructor(i,a,d,p,P,L,Y){super(),this.dialogRef=i,this.route=a,this.contentTypesService=d,this.contentTypesFieldsService=p,this.globalConfigService=P,this.snackBar=L,this.dialog=Y,this.hostClass="dialog-component",this.fields=[],this.existingFields=[],this.filteredInputTypeOptions=[],this.dataTypeHints=[],this.inputTypeHints=[],this.fieldNamePattern=w,this.fieldNameError=H,this.findIcon=N.x,this.findLabel=N.C,this.loading$=new c.X(!0),this.saving$=new c.X(!1),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.dialogRef.disableClose=!0,this.subscription.add(this.dialogRef.backdropClick().subscribe(Q=>{this.form.dirty&&!confirm("You have unsaved changes. Are you sure you want to close this dialog?")||this.closeDialog()}))}ngOnInit(){this.editMode=this.route.snapshot.paramMap.get("editMode");const i=this.route.snapshot.paramMap.get("contentTypeStaticName"),a=this.contentTypesService.retrieveContentType(i).pipe((0,v.B)()),d=a.pipe((0,h.w)(Y=>this.contentTypesFieldsService.getFields(Y.StaticName))),p=this.contentTypesFieldsService.typeListRetrieve().pipe((0,n.U)(Y=>function C(t){const r=[];for(const s of t)r.push({name:s,label:b[s].label,icon:(0,N.x)(s),description:b[s].description});return r}(Y))),P=this.contentTypesFieldsService.getInputTypesList(),L=this.contentTypesFieldsService.getReservedNames();(0,Z.D)([a,d,p,P,L]).subscribe(([Y,Q,j,Xe,qe])=>{this.contentType=Y,this.dataTypes=j,this.inputTypeOptions=Xe,this.existingFields=Q;const ie={};if(Q.forEach(M=>{ie[M.StaticName]="Field with this name already exists"}),this.reservedNames={...qe,...ie},null!=this.editMode){const M=this.route.snapshot.paramMap.get("id")?parseInt(this.route.snapshot.paramMap.get("id"),10):null,oe=Q.find(ze=>ze.Id===M);"name"===this.editMode&&delete this.reservedNames[oe.StaticName],this.fields.push(oe)}else for(let M=1;M<=8;M++)this.fields.push({Id:0,Type:O.Q.String,InputType:K.v.StringDefault,StaticName:"",IsTitle:0===Q.length,SortOrder:Q.length+M});for(let M=0;M<this.fields.length;M++)this.filterInputTypeOptions(M),this.calculateHints(M);this.loading$.next(!1)})}ngOnDestroy(){this.loading$.complete(),this.saving$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}filterInputTypeOptions(i){this.filteredInputTypeOptions[i]=this.inputTypeOptions.filter(a=>a.dataType===this.fields[i].Type.toLocaleLowerCase())}resetInputType(i){let a=this.fields[i].Type.toLocaleLowerCase()+K.v.DefaultSuffix;this.filteredInputTypeOptions[i].some(p=>p.inputType===a)||(a=this.filteredInputTypeOptions[i][0].inputType),this.fields[i].InputType=a}calculateHints(i){const a=this.dataTypes.find(p=>p.name===this.fields[i].Type),d=this.inputTypeOptions.find(p=>p.inputType===this.fields[i].InputType);this.dataTypeHints[i]=a?.description??"",this.inputTypeHints[i]=d?.isObsolete?`OBSOLETE - ${d.obsoleteMessage}`:d?.description??""}getInputTypeOption(i){return this.inputTypeOptions.find(a=>a.inputType===i)}addSharedField(){this.dialog.open(Me,{autoFocus:!1,width:"1600px",data:{contentType:this.contentType,existingFields:this.existingFields}})}save(){if(this.saving$.next(!0),this.snackBar.open("Saving..."),null!=this.editMode){const i=this.fields[0];"name"===this.editMode?this.contentTypesFieldsService.rename(i.Id,this.contentType.Id,i.StaticName).subscribe(()=>{this.saving$.next(!1),this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()}):"inputType"===this.editMode&&this.contentTypesFieldsService.updateInputType(i.Id,i.StaticName,i.InputType).subscribe(()=>{this.saving$.next(!1),this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}else(0,u.of)(...this.fields).pipe((0,I.h)(i=>!!i.StaticName),(0,U.b)(i=>this.contentTypesFieldsService.add(i,this.contentType.Id).pipe((0,D.K)(a=>(0,u.of)(null)))),A()).subscribe(i=>{this.saving$.next(!1),this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}}return(t=r).\u0275fac=function(i){return new(i||t)(e.Y36(T.so),e.Y36(Oe.gz),e.Y36(W.s),e.Y36(g.Mr),e.Y36(f.bE),e.Y36(X.ux),e.Y36(T.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-content-type-fields"]],viewQuery:function(i,a){if(1&i&&e.Gf(Ue,5,l.F),2&i){let d;e.iGM(d=e.CRH())&&(a.form=d.first)}},hostVars:1,hostBindings:function(i,a){2&i&&e.Ikx("className",a.hostClass)},features:[e.qOj],decls:8,vars:6,consts:[["appToggleDebug","",1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["ngForm","ngForm"],[1,"eav-dialog-content"],["class","eav-row-container",4,"ngFor","ngForOf"],["mat-raised-button","","type","button",3,"click",4,"ngIf"],[1,"spacer"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[1,"eav-row-container"],[1,"eav-edit-input"],["color","accent",1,"eav-form-field"],["matInput","",3,"pattern","appReservedNames","ngModel","name","disabled","ngModelChange"],["staticName","ngModel"],[3,"ngModel","name","disabled","selectionChange","ngModelChange"],[1,"eav-type-icon"],[3,"value",4,"ngFor","ngForOf"],[1,"eav-input-icon"],[3,"value","ngClass",4,"ngFor","ngForOf"],[3,"isError",4,"ngIf"],[3,"isError"],[3,"value"],[3,"value","ngClass"],["class","eav-input-icon",4,"ngIf"]],template:function(i,a){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e.YNc(3,Ye,2,0,"ng-container",3),e.YNc(4,Pe,2,0,"ng-container",3),e.YNc(5,Qe,2,0,"ng-container",3),e.qZA()(),e.YNc(6,Ge,13,7,"form",4),e.ALo(7,"async"),e.qZA()),2&i&&(e.xp6(3),e.Q6J("ngIf",void 0===a.editMode),e.xp6(1),e.Q6J("ngIf",null===a.editMode),e.xp6(1),e.Q6J("ngIf",null!=a.editMode),e.xp6(1),e.Q6J("ngIf",!1===e.lcZ(7,4,a.loading$)))},dependencies:[B.mk,B.sg,B.O5,q.Y,Ee.D,T.H8,z.lW,De.Hw,l._Y,l.Fj,l.JJ,l.JL,l.c5,l.On,l.F,V.Nt,k.KE,k.hX,ne.gD,ne.$L,we.ey,ee,B.Ov,te.X$],styles:[".eav-row-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.eav-edit-input[_ngcontent-%COMP%]{padding-bottom:8px;width:30%}.eav-type-icon[_ngcontent-%COMP%]{width:inherit;height:inherit;margin-right:8px;font-size:inherit;vertical-align:top;line-height:inherit}.eav-input-icon[_ngcontent-%COMP%]{width:inherit;height:inherit;margin-left:8px;font-size:inherit;vertical-align:top;line-height:inherit}.eav-input-obsolete[_ngcontent-%COMP%]{-webkit-text-decoration:black line-through;text-decoration:black line-through;color:#696969}"]}),r})()},425:(J,F,o)=>{o.d(F,{F:()=>D});var l=o(8968),c=o(1699),v=o(6861),h=o(7648),n=o(6575),Z=o(6515),u=o(9498),I=o(1916);function U(y,m){1&y&&(c.TgZ(0,"mat-icon",1),c.ALo(1,"translate"),c._uU(2,"diamond"),c.qZA()),2&y&&c.Q6J("tippy",c.lcZ(1,1,"Features.NotActivated"))}let D=(()=>{var y;class m extends l.B{constructor(x,A,w,H){super(x,A,H,w)}}return(y=m).\u0275fac=function(x){return new(x||y)(c.Y36(v.uw),c.Y36(c.s_b),c.Y36(h.k),c.Y36(c.sBO))},y.\u0275cmp=c.Xpm({type:y,selectors:[["app-feature-icon-indicator"]],features:[c.qOj],decls:2,vars:3,consts:[[3,"tippy",4,"ngIf"],[3,"tippy"]],template:function(x,A){1&x&&(c.YNc(0,U,3,3,"mat-icon",0),c.ALo(1,"async")),2&x&&c.Q6J("ngIf",c.lcZ(1,1,A.show$))},dependencies:[n.O5,Z.Hw,u.$,n.Ov,I.X$]}),m})()},5331:(J,F,o)=>{o.d(F,{C:()=>l});const l={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",FieldShareConfigManagement:"FieldShareConfigManagement"}},8968:(J,F,o)=>{o.d(F,{B:()=>N});var l=o(6861),c=o(3839),v=o(9736),h=o(4472),n=o(1699),Z=o(9409),u=o(8737),I=o(6575),U=o(895),D=o(6515),y=o(8497),m=o(9498),S=o(6537),x=o(1916);function A(g,b){if(1&g){const C=n.EpF();n.TgZ(0,"div",2)(1,"div",3),n._uU(2,"ID:"),n.qZA(),n.TgZ(3,"div",9)(4,"span",10),n.NdJ("click",function(){const _=n.CHM(C).ngIf,E=n.oxw(2);return n.KtG(E.copyToClipboard(_))}),n._uU(5),n.qZA()()()}if(2&g){const C=b.ngIf;n.xp6(4),n.Q6J("tippy",C),n.xp6(1),n.Oqu(C)}}function w(g,b){if(1&g){const C=n.EpF();n.TgZ(0,"button",11),n.NdJ("click",function(){const _=n.CHM(C).ngIf,E=n.oxw(2);return n.KtG(E.findOutMore(_))}),n.TgZ(1,"mat-icon"),n._uU(2,"open_in_new"),n.qZA(),n._uU(3),n.ALo(4,"translate"),n.qZA()}2&g&&(n.xp6(3),n.hij(" ",n.lcZ(4,1,"Features.FindOutMore")," "))}function H(g,b){if(1&g){const C=n.EpF();n.TgZ(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),n._uU(3),n.qZA()(),n.TgZ(4,"mat-card-content"),n._UZ(5,"p",1),n.ALo(6,"safeHtml"),n.TgZ(7,"div",2)(8,"div",3),n._uU(9),n.ALo(10,"translate"),n.qZA(),n.TgZ(11,"div",4)(12,"span"),n._uU(13),n.ALo(14,"translate"),n.qZA()()(),n.YNc(15,A,6,2,"div",5),n.qZA(),n.TgZ(16,"mat-card-actions",6),n.YNc(17,w,5,3,"button",7),n.TgZ(18,"button",8),n.NdJ("click",function(){n.CHM(C);const T=n.oxw();return n.KtG(T.closeDialog())}),n._uU(19),n.ALo(20,"translate"),n.qZA()()()}if(2&g){const C=b.ngIf;n.xp6(3),n.Oqu(C.feature.Name),n.xp6(2),n.Q6J("innerHtml",n.lcZ(6,7,C.feature.Description),n.oJD),n.xp6(4),n.hij("",n.lcZ(10,9,"Features.Status"),":"),n.xp6(4),n.Oqu(n.lcZ(14,11,C.feature.IsEnabled?"Features.Active":"Features.NotActive")),n.xp6(2),n.Q6J("ngIf",C.feature.NameId),n.xp6(2),n.Q6J("ngIf",C.feature.Link),n.xp6(2),n.hij(" ",n.lcZ(20,13,"Features.Close")," ")}}let W=(()=>{var g;class b{constructor(f,T,_,E){this.dialogData=f,this.dialogRef=T,this.snackBar=_,this.featureDetailService=E}ngOnInit(){this.viewModel$=(0,c.a)([this.featureDetailService.getFeatureDetails(this.dialogData)]).pipe((0,v.U)(([f])=>({feature:f})))}copyToClipboard(f){(0,h.v)(f),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}findOutMore(f){window.open(f,"_blank")}closeDialog(){this.dialogRef.close()}}return(g=b).\u0275fac=function(f){return new(f||g)(n.Y36(l.WI),n.Y36(l.so),n.Y36(Z.ux),n.Y36(u.f))},g.\u0275cmp=n.Xpm({type:g,selectors:[["app-feature-info-dialog"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["class","eav-info-row",4,"ngIf"],["align","end"],["mat-raised-button","","color","accent","class","eav-card-action-button",3,"click",4,"ngIf"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"tippy","click"],["mat-raised-button","","color","accent",1,"eav-card-action-button",3,"click"]],template:function(f,T){1&f&&(n.YNc(0,H,21,15,"mat-card",0),n.ALo(1,"async")),2&f&&n.Q6J("ngIf",n.lcZ(1,1,T.viewModel$))},dependencies:[I.O5,U.lW,D.Hw,y.a8,y.hq,y.dn,y.dk,y.n5,m.$,I.Ov,S.z,x.X$]}),b})();var $=o(8071),O=o(1891),K=o(7648);let N=(()=>{var g;class b{set featureNameId(f){this.featureNameId$.next(f)}set showIf(f){this.showIf$.next(1==f)}constructor(f,T,_,E){this.dialog=f,this.viewContainerRef=T,this.changeDetectorRef=_,this.featuresService=E,this.featureNameId$=new $.X(null),this.showIf$=new $.X(!1),this.feature$=this.featureNameId$.pipe((0,O.w)(R=>this.featuresService.get$(R))),this.show$=(0,c.a)([this.feature$,this.showIf$]).pipe((0,v.U)(([R,G])=>G==(R?.IsEnabled??!1)))}openDialog(){b.openDialog(this.dialog,this.featureNameId$.value,this.viewContainerRef,this.changeDetectorRef)}static openDialog(f,T,_,E){f.open(W,{autoFocus:!1,data:T,viewContainerRef:_,width:"400px"}),E.markForCheck()}}return(g=b).\u0275fac=function(f){return new(f||g)(n.Y36(l.uw),n.Y36(n.s_b),n.Y36(n.sBO),n.Y36(K.k))},g.\u0275dir=n.lG2({type:g,inputs:{featureNameId:"featureNameId",showIf:"showIf"}}),b})()},9851:(J,F,o)=>{o.d(F,{Y:()=>y});var l=o(1699),c=o(6575),v=o(1268);function h(m,S){1&m&&l.GkF(0)}function n(m,S){if(1&m&&(l.TgZ(0,"mat-hint"),l.YNc(1,h,1,0,"ng-container",3),l.qZA()),2&m){l.oxw();const x=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",x)}}function Z(m,S){1&m&&l.GkF(0)}function u(m,S){if(1&m&&(l.TgZ(0,"mat-error"),l.YNc(1,Z,1,0,"ng-container",3),l.qZA()),2&m){l.oxw();const x=l.MAs(4);l.xp6(1),l.Q6J("ngTemplateOutlet",x)}}function I(m,S){1&m&&l.Hsn(0)}const U=function(m){return{"hint-box__short":m}},D=["*"];let y=(()=>{var m;class S{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return(m=S).\u0275fac=function(A){return new(A||m)},m.\u0275cmp=l.Xpm({type:m,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:D,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(A,w){1&A&&(l.F$t(),l.TgZ(0,"div",0),l.NdJ("click",function(){return w.toggleIsShort()}),l.YNc(1,n,2,1,"mat-hint",1),l.YNc(2,u,2,1,"mat-error",1),l.qZA(),l.YNc(3,I,1,0,"ng-template",null,2,l.W1O)),2&A&&(l.Q6J("ngClass",l.VKq(4,U,w.isShort))("ngSwitch",w.isError),l.xp6(1),l.Q6J("ngSwitchCase",!1),l.xp6(1),l.Q6J("ngSwitchCase",!0))},dependencies:[c.mk,c.tP,c.RF,c.n9,v.bx,v.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),S})()},40:(J,F,o)=>{o.d(F,{D:()=>v});var l=o(3488),c=o(1699);let v=(()=>{var h;class n{constructor(u){this.globalConfigService=u}onClick(u){(navigator.platform.match("Mac")?u.metaKey:u.ctrlKey)&&u.shiftKey&&u.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}return(h=n).\u0275fac=function(u){return new(u||h)(c.Y36(l.bE))},h.\u0275dir=c.lG2({type:h,selectors:[["","appToggleDebug",""]],hostBindings:function(u,I){1&u&&c.NdJ("click",function(D){return I.onClick(D)})}}),n})()},4472:(J,F,o)=>{function l(c){const v=document.createElement("textarea");v.value=c,v.setAttribute("readonly",""),v.style.position="absolute",v.style.left="-9999px",document.body.appendChild(v);const h=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);v.select(),document.execCommand("copy"),document.body.removeChild(v),h&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(h))}o.d(F,{v:()=>l})},6537:(J,F,o)=>{o.d(F,{z:()=>v});var l=o(1699),c=o(6480);let v=(()=>{var h;class n{constructor(u){this.sanitizer=u}transform(u){return this.sanitizer.bypassSecurityTrustHtml(u)}}return(h=n).\u0275fac=function(u){return new(u||h)(l.Y36(c.H7,16))},h.\u0275pipe=l.Yjl({name:"safeHtml",type:h,pure:!0}),n})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.17.00/dist/ng-edit/projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-f4d799.2f74dbbd7492ce1d.js.map