{"version":3,"file":"projects_eav-ui_src_app_visual-query_visual-query_component_ts.js","mappings":";;;;;;;;;;;;;;;;AAA4D;AAEM;;;;;;;;;ICE1DG,gEAAA,GAAyD;;;;;IAD3DA,4DAAA,eAAU;IACRA,wDAAA,IAAAI,iDAAA,0BAA0C;IAC5CJ,0DAAA,EAAW;;;;;IADMA,uDAAA,EAAyB;IAAzBA,wDAAA,qBAAAQ,UAAA,CAAyB;;;;;IAKxCR,gEAAA,GAAyD;;;;;IAD3DA,4DAAA,gBAAW;IACTA,wDAAA,IAAAS,iDAAA,0BAA0C;IAC5CT,0DAAA,EAAY;;;;;IADKA,uDAAA,EAAyB;IAAzBA,wDAAA,qBAAAQ,UAAA,CAAyB;;;;;IAO9CR,0DAAA,GAAyB;;;ADHrB,MAAOW,kBAAkB;EAI7BC,YAAA;IAHS,KAAAC,OAAO,GAAG,KAAK;IACxB,KAAAC,OAAO,GAAG,IAAI;EAEE;EAEhBC,aAAaA,CAAA;IACX,IAAI,CAACD,OAAO,GAAG,CAAC,IAAI,CAACA,OAAO;EAC9B;EAAC,QAAAE,CAAA;qBARUL,kBAAkB;EAAA;EAAA,QAAAM,EAAA;UAAlBN,kBAAkB;IAAAO,SAAA;IAAAC,MAAA;MAAAN,OAAA;IAAA;IAAAO,UAAA;IAAAC,QAAA,GAAArB,iEAAA;IAAAuB,kBAAA,EAAAC,GAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,4BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;QCb/B9B,4DAAA,aAA2F;QAArEA,wDAAA,mBAAAiC,iDAAA;UAAAjC,2DAAA,CAAAmC,GAAA;UAAA,OAAAnC,yDAAA,CAAS+B,GAAA,CAAAhB,aAAA,EAAe;QAAA,EAAC;QAO3Cf,wDALA,IAAAqC,kCAAA,OAAe,IAAAC,kCAAA,OAKD;QAMlBtC,0DAAA,EAAM;QAENA,wDAAA,IAAAuC,yCAAA,gCAAAvC,oEAAA,CAAsB;;;;QAf0BA,wDAAA,YAAAA,6DAAA,IAAA0C,GAAA,EAAAX,GAAA,CAAAjB,OAAA,EAA0C;QACxFd,uDAAA,EAWC;QAXDA,2DAAA,KAAA4C,OAAA,GAAAb,GAAA,CAAAlB,OAAA,WAAK,OAAA+B,OAAA,KAAL,IAAI,UAWH;;;mBDFC7C,4EAAkB,EAAA8C,iEAAA,EAAAA,kEAAA,EAAEhD,oDAAO,EAAEC,6DAAgB;IAAAkD,MAAA;EAAA;;;;;;;;;;;;;;;;;AEP3C,MAAOC,iCAAiC;EAE5CC,WAAWA,CAACC,KAAiB;IAC3BA,KAAK,CAACC,eAAe,EAAE;EACzB;EAAC,QAAApC,CAAA;qBAJUiC,iCAAiC;EAAA;EAAA,QAAAhC,EAAA;UAAjCgC,iCAAiC;IAAA/B,SAAA;IAAAmC,YAAA,WAAAC,+CAAAxB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QAAjC9B,wDAAA,uBAAAuD,+DAAAC,MAAA;UAAA,OAAAzB,GAAA,CAAAmB,WAAA,CAAAM,MAAA,CAAmB;QAAA,EAAc;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACHsB;AAEwB;AACrB;AACH;AAEJ;AACM;AACJ;AACX;AACW;AACO;;;;;;;;ICI7DxD,4DAAA,aAC0G;IAApCA,wDAAA,mBAAAsE,2FAAA;MAAA,MAAAC,aAAA,GAAAvE,2DAAA,CAAAwE,GAAA,EAAAC,SAAA;MAAA,MAAAC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAE,aAAA,CAAAL,aAAA,CAAyB;IAAA,EAAC;IACvGvE,4DAAA,eAAU;IAAAA,oDAAA,GAA8C;IAAAA,0DAAA,EAAW;IACnEA,4DAAA,WAAM;IAAAA,oDAAA,GAAqB;IAC7BA,0DAD6B,EAAO,EAC9B;;;;;IAHJA,wDAAA,UAAAuE,aAAA,CAAAO,MAAA,IAAAP,aAAA,CAAAQ,IAAA,CAA8C;IACpC/E,uDAAA,GAA8C;IAA9CA,+DAAA,CAAAuE,aAAA,CAAAU,IAAA,IAAAP,MAAA,CAAAV,QAAA,CAAAkB,OAAA,CAAAD,IAAA,CAA8C;IAClDjF,uDAAA,GAAqB;IAArBA,+DAAA,CAAAuE,aAAA,CAAAQ,IAAA,CAAqB;;;;;IALjC/E,4DAAA,aAAkB;IAChBA,8DAAA,IAAAoF,qEAAA,kBAAApF,iEAAA,GAAAsF,gBAAA,OAMC;IACHtF,0DAAA,EAAM;;;;IAPJA,uDAAA,EAMC;IANDA,wDAAA,CAAAwF,QAAA,CAAAC,KAAA,CAMC;;;;;;IAbLzF,4DAAA,aACkC;IAAhCA,wDAAA,mBAAA0F,uEAAA;MAAA,MAAAF,QAAA,GAAAxF,2DAAA,CAAA2F,GAAA,EAAAlB,SAAA;MAAA,MAAAC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAkB,UAAA,CAAAJ,QAAA,CAAAK,GAAA,CAAqB;IAAA,EAAC;IAC/B7F,4DAAA,eAAU;IAAAA,oDAAA,GAAuD;IAAAA,0DAAA,EAAW;IAC5EA,4DAAA,WAAM;IAAAA,oDAAA,GAAwE;IAChFA,0DADgF,EAAO,EACjF;IACNA,wDAAA,IAAA8F,+DAAA,iBAAwC;;;;;;IALf9F,wDAAA,UAAA0E,MAAA,CAAAV,QAAA,CAAAwB,QAAA,CAAAK,GAAA,EAAAf,MAAA,IAAAU,QAAA,CAAAK,GAAA,CAAiD;IAE9D7F,uDAAA,GAAuD;IAAvDA,+DAAA,CAAA0E,MAAA,CAAAV,QAAA,CAAAwB,QAAA,CAAAK,GAAA,EAAAZ,IAAA,IAAAP,MAAA,CAAAV,QAAA,CAAAkB,OAAA,CAAAD,IAAA,CAAuD;IAC3DjF,uDAAA,GAAwE;IAAxEA,+DAAA,EAAA+F,QAAA,IAAAA,QAAA,GAAArB,MAAA,CAAAV,QAAA,CAAAwB,QAAA,CAAAK,GAAA,EAAAG,KAAA,cAAAD,QAAA,KAAAE,SAAA,GAAAF,QAAA,GAAArB,MAAA,CAAAV,QAAA,CAAAwB,QAAA,CAAAK,GAAA,EAAAd,IAAA,cAAAgB,QAAA,KAAAE,SAAA,GAAAF,QAAA,GAAAP,QAAA,CAAAK,GAAA,CAAwE;IAEhF7F,uDAAA,EAUC;IAVDA,2DAAA,IAAA0E,MAAA,CAAAwB,YAAA,CAAAC,QAAA,CAAAX,QAAA,CAAAK,GAAA,WAUC;;;;;;IAnBD7F,4DAFJ,aAAyD,aACxB,cACQ;IAAAA,oDAAA,oBAAa;IAAAA,0DAAA,EAAO;IACzDA,4DAAA,0BAAwE;IAAtCA,wDAAA,oBAAAoG,+EAAA5C,MAAA;MAAAxD,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAU0E,MAAA,CAAA2B,gBAAA,CAAA7C,MAAA,CAAwB;IAAA,EAAC;IACvExD,0DADE,EAAwE,EACpE;IACNA,8DAAA,IAAAsG,iDAAA,oBAAAtG,iEAAA,GAAAuG,WAAA,OAiBC;;IACHvG,0DAAA,EAAM;;;IAlBJA,uDAAA,GAiBC;IAjBDA,wDAAA,CAAAA,yDAAA,OAAA+B,GAAA,CAAA0E,MAAA,EAiBC;;;ADGC,MAAOC,oBAAoB;EAS/B9F,YAAoB+F,kBAAsC;IAAtC,KAAAA,kBAAkB,GAAlBA,kBAAkB;IARtC,KAAAT,YAAY,GAAa,EAAE;IAC3B,KAAAlC,QAAQ,GAAGA,wEAAQ;IAEX,KAAA4C,YAAY,GAAG7C,yEAAY,CAAC8C,gBAAgB,CAACC,sBAAsB;IACnE,KAAAC,WAAW,GAAG,IAAInD,iDAAe,CAAC,IAAI,CAACgD,YAAY,CAACI,OAAO,CAAC;EAIN;EAE9DC,QAAQA,CAAA;IACN,IAAI,CAACC,UAAU,GAAGrD,mDAAa,CAAC,CAC9BA,mDAAa,CAAC,CAAC,IAAI,CAAC8C,kBAAkB,CAACQ,YAAY,EAAE,IAAI,CAACJ,WAAW,CAAC,CAAC,CAACK,IAAI,CAC1EtD,yCAAG,CAAC,CAAC,CAACuD,WAAW,EAAEC,UAAU,CAAC,KAAKpD,+EAAwB,CAACmD,WAAW,EAAEC,UAAU,CAAC,CAAC,CACtF,CACF,CAAC,CAACF,IAAI,CAACtD,yCAAG,CAAC,CAAC,CAAC2C,MAAM,CAAC,MAAM;MAAEA;IAAM,CAAE,CAAC,CAAC,CAAC;EAC1C;EAEAc,WAAWA,CAAA;IACT,IAAI,CAACR,WAAW,CAACS,QAAQ,EAAE;EAC7B;EAEAnB,gBAAgBA,CAAClD,KAA2B;IAC1C,MAAMmE,UAAU,GAAGnE,KAAK,CAACsE,OAAO,GAAG,IAAI,CAACb,YAAY,CAACc,QAAQ,GAAG,IAAI,CAACd,YAAY,CAACI,OAAO;IACzF,IAAI,CAACD,WAAW,CAACY,IAAI,CAACL,UAAU,CAAC;EACnC;EAEA1C,aAAaA,CAACgD,UAAsB;IAClC,IAAI,CAACjB,kBAAkB,CAAC/B,aAAa,CAACgD,UAAU,CAAC;EACnD;EAEAhC,UAAUA,CAACiC,IAAY;IACrBzD,uEAAY,CAAC0D,aAAa,CAACD,IAAI,EAAE,IAAI,CAAC3B,YAAY,CAAC;EACrD;EAEAK,WAAWA,CAACwB,KAAa,EAAEC,IAAoC;IAC7D,OAAOA,IAAI,CAACnC,GAAG;EACjB;EAEAP,gBAAgBA,CAACyC,KAAa,EAAEH,UAAsB;IACpD,OAAOA,UAAU,CAACK,mBAAmB;EACvC;EAAC,QAAAjH,CAAA;qBA1CU0F,oBAAoB,EAAA1G,+DAAA,CAAA6C,8EAAA;EAAA;EAAA,QAAA5B,EAAA;UAApByF,oBAAoB;IAAAxF,SAAA;IAAAE,UAAA;IAAAC,QAAA,GAAArB,iEAAA;IAAAyB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAuG,8BAAArG,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QC1BjC9B,wDAAA,IAAAoI,2CAAA,iBAAiC;;;;;QAAjCpI,2DAAA,KAAAqI,OAAA,GAAArI,yDAAA,OAAA+B,GAAA,CAAAmF,UAAA,aAAAmB,OAAA,CAyBC;;;mBDNG1E,iFAAoB,EAAA2E,2EAAA,EACpBnE,kEAAa,EAAAqE,4DAAA,EACb/E,uDAAS,EACTC,0DAAY,EACZW,8EAAc;IAAArB,MAAA;EAAA;;;;;;;;;;;;;;;;;AEvB0B;AACwB;AAG9D,SAAUkB,wBAAwBA,CAACmD,WAAyB,EAAEsB,aAAqB;EACvF,IAAI,CAACtB,WAAW,EAAE;IAAE;;EAEpB,MAAMuB,MAAM,GAAGF,+DAAS,CAACrB,WAAW,CAAC;EAErC,MAAMwB,QAAQ,GAAGD,MAAM,CAACE,MAAM,CAAClB,UAAU,IACvCA,UAAU,CAACmB,UAAU,IAAIJ,aAAa,IACnCf,UAAU,CAACK,mBAAmB,KAAKlE,yEAAY,CAAC8C,gBAAgB,CAACmC,aAAa,CAACf,mBAAmB,CACtG;EAEDY,QAAQ,CAACI,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACnE,IAAI,CAACqE,iBAAiB,EAAE,CAACC,aAAa,CAACF,CAAC,CAACpE,IAAI,CAACqE,iBAAiB,EAAE,CAAC,CAAC;EAE7F,MAAM3C,MAAM,GAAsB,EAAE;EACpC,KAAK,MAAMmB,UAAU,IAAIiB,QAAQ,EAAE;IACjC,MAAMb,IAAI,GAAGJ,UAAU,CAAC0B,WAAW;IACnC,IAAI7C,MAAM,CAACuB,IAAI,CAAC,EAAE;MAChBvB,MAAM,CAACuB,IAAI,CAAC,CAACuB,IAAI,CAAC3B,UAAU,CAAC;KAC9B,MAAM;MACLnB,MAAM,CAACuB,IAAI,CAAC,GAAG,CAACJ,UAAU,CAAC;;;EAI/B,OAAOnB,MAAM;AACf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC3BA;AACiK;AAC5G;AACwC;AACtB;AACH;AACG;AAEO;AACR;AACV;AAEA;AACL;AACO;AACE;AACP;AACwD;;;;;;;;;;;;;;;;;;;ICA3GzG,6DAAA,mBAC4C;IAA1CA,yDAAA,mBAAAuK,wGAAA;MAAAvK,4DAAA,CAAAwK,GAAA;MAAA,MAAAC,aAAA,GAAAzK,4DAAA,GAAAyE,SAAA;MAAA,MAAAiG,MAAA,GAAA1K,4DAAA;MAAA,OAAAA,0DAAA,CAAS0K,MAAA,CAAAC,mBAAA,CAAAF,aAAA,CAA+B;IAAA,EAAC;IACzCzK,qDAAA,iBACF;IAAAA,2DAAA,EAAW;;;;;;IAGXA,6DAAA,mBACmE;IAAjEA,yDAAA,mBAAA4K,wGAAA;MAAA5K,4DAAA,CAAAwE,GAAA;MAAA,MAAAiG,aAAA,GAAAzK,4DAAA,GAAAyE,SAAA;MAAA,MAAAoG,KAAA,GAAA7K,4DAAA;MAAA,MAAA0K,MAAA,GAAA1K,4DAAA;MAAA,OAAAA,0DAAA,CAAS0K,MAAA,CAAAI,QAAA,CAAAD,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAAC,QAAA,CAAsD;IAAA,EAAC;IAChEjL,qDAAA,qBACF;IAAAA,2DAAA,EAAW;;;;;;IAKXA,6DAAA,mBAAiG;IAA7BA,yDAAA,mBAAAkL,wGAAA;MAAAlL,4DAAA,CAAAmL,GAAA;MAAA,MAAAV,aAAA,GAAAzK,4DAAA,GAAAyE,SAAA;MAAA,MAAAiG,MAAA,GAAA1K,4DAAA;MAAA,OAAAA,0DAAA,CAAS0K,MAAA,CAAAU,MAAA,CAAAX,aAAA,CAAkB;IAAA,EAAC;IAC9FzK,qDAAA,eACF;IAAAA,2DAAA,EAAW;;;;;IAoBTA,6DADF,aAAmB,aAC6B;IAAAA,qDAAA,GAAiB;IAAAA,2DAAA,EAAK;IACpEA,6DAAA,aAAgD;IAAAA,qDAAA,GAAkB;IACpEA,2DADoE,EAAK,EACpE;;;;IAFqBA,wDAAA,EAAqB;IAArBA,yDAAA,UAAAqL,SAAA,CAAAC,IAAA,CAAqB;IAACtL,wDAAA,EAAiB;IAAjBA,gEAAA,CAAAqL,SAAA,CAAAC,IAAA,CAAiB;IACtCtL,wDAAA,EAAsB;IAAtBA,yDAAA,UAAAqL,SAAA,CAAA5F,KAAA,CAAsB;IAACzF,wDAAA,EAAkB;IAAlBA,gEAAA,CAAAqL,SAAA,CAAA5F,KAAA,CAAkB;;;;;IALtEzF,wDAAA,aAAsB;IACtBA,6DAAA,gBAAuB;IACrBA,+DAAA,IAAAwL,oFAAA,kBAAAxL,wEAAA,CAKC;IACHA,2DAAA,EAAQ;;;;;IANNA,wDAAA,GAKC;IALDA,yDAAA,CAAA6K,KAAA,CAAAa,iBAAA,CAAAjB,aAAA,CAAAkB,QAAA,EAKC;;;;;IAOH3L,wDAAA,cACM;;;;;IAGNA,wDAAA,cACM;;;;;;IAvDJA,6DARJ,gBAMW,aACiB,kBACyD;IAC/EA,qDAAA,GACF;IAAAA,2DAAA,EAAW;IAOXA,yDANA,IAAA4L,6EAAA,sBAAwE,IAAAC,6EAAA,sBAMpB;IAMtD7L,2DAAA,EAAM;IACNA,6DAAA,aAA2B;IACzBA,yDAAA,IAAA8L,6EAAA,sBAAoD;IAKtD9L,2DAAA,EAAM;IACNA,6DAAA,cACiD;IAA/CA,yDAAA,mBAAA+L,qFAAA;MAAA,MAAAtB,aAAA,GAAAzK,4DAAA,CAAAmC,GAAA,EAAAsC,SAAA;MAAA,MAAAoG,KAAA,GAAA7K,4DAAA;MAAA,MAAA0K,MAAA,GAAA1K,4DAAA;MAAA,OAAAA,0DAAA,CAAA6K,KAAA,CAAAmB,SAAA,IAAyBtB,MAAA,CAAAuB,QAAA,CAAAxB,aAAA,CAAoB;IAAA,EAAC;IAC9CzK,6DAAA,YAAM;IAAAA,qDAAA,IAAoC;IAAAA,2DAAA,EAAO;IACjDA,6DAAA,oBAAoC;IAAAA,qDAAA,YAAI;IAC1CA,2DAD0C,EAAW,EAC/C;IACNA,wDAAA,UAAI;IACJA,6DAAA,eACwD;IAAtDA,yDAAA,mBAAAkM,sFAAA;MAAA,MAAAzB,aAAA,GAAAzK,4DAAA,CAAAmC,GAAA,EAAAsC,SAAA;MAAA,MAAAoG,KAAA,GAAA7K,4DAAA;MAAA,MAAA0K,MAAA,GAAA1K,4DAAA;MAAA,OAAAA,0DAAA,CAAA6K,KAAA,CAAAmB,SAAA,IAAyBtB,MAAA,CAAAyB,eAAA,CAAA1B,aAAA,CAA2B;IAAA,EAAC;IACrDzK,6DAAA,YAAM;IAAAA,qDAAA,IAA4B;IAAAA,2DAAA,EAAO;IACzCA,6DAAA,oBAAoC;IAAAA,qDAAA,YAAI;IAC1CA,2DAD0C,EAAW,EAC/C;IACNA,wDAAA,UAAI;IACJA,yDAAA,KAAAoM,8EAAA,OAAqF;IAWrFpM,6DAAA,eAA+D;IAC7DA,qDAAA,IACF;IAAAA,2DAAA,EAAM;IAKNA,yDAJA,KAAAqM,8EAAA,kBAAsE,KAAAC,8EAAA,kBAID;IAIvEtM,2DAAA,EAAM;;;;;;IA7DKA,yDAJS,OAAA0K,MAAA,CAAAR,eAAA,GAAAO,aAAA,CAAAO,UAAA,CAA8C,YAAAhL,8DAAA,KAAAwM,GAAA,EAAA/B,aAAA,CAAAgC,kBAAA,CAAAC,GAAA,SAAAjC,aAAA,CAAAgC,kBAAA,CAAAE,IAAA,SAAAlC,aAAA,CAAAgC,kBAAA,CAAAG,KAAA,GAAAnC,aAAA,CAAAgC,kBAAA,CAAAG,KAAA,gBAIxD,YAAA5M,8DAAA,KAAA6M,GAAA,EAAAhC,KAAA,CAAAiC,qBAAA,KAAAjC,KAAA,CAAAa,iBAAA,CAAAjB,aAAA,CAAAkB,QAAA,mBAAAd,KAAA,CAAAa,iBAAA,CAAAjB,aAAA,CAAAkB,QAAA,EAAAoB,MAAA,GAEA;IAEsB/M,wDAAA,GAAoD;IAApDA,yDAAA,UAAA6K,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAAlG,MAAA,CAAoD;IAC9E9E,wDAAA,EACF;IADEA,iEAAA,MAAA6K,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAA/F,IAAA,MACF;IACAjF,wDAAA,EAKC;IALDA,4DAAA,IAAA6K,KAAA,CAAAmB,SAAA,IAAAnB,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAAiC,YAAA,UAKC;IACDjN,wDAAA,EAKC;IALDA,4DAAA,IAAA6K,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAAC,QAAA,UAKC;IAGDjL,wDAAA,GAIC;IAJDA,4DAAA,IAAA6K,KAAA,CAAAmB,SAAA,KAAAtB,MAAA,CAAAwC,eAAA,CAAAzC,aAAA,WAIC;IAIKzK,wDAAA,GAAoC;IAApCA,gEAAA,CAAAyK,aAAA,CAAA1F,IAAA,gBAAoC;IAMpC/E,wDAAA,GAA4B;IAA5BA,gEAAA,CAAAyK,aAAA,CAAA0C,WAAA,CAA4B;IAIpCnN,wDAAA,GAUC;IAVDA,4DAAA,KAAA6K,KAAA,CAAAiC,qBAAA,KAAAjC,KAAA,CAAAa,iBAAA,CAAAjB,aAAA,CAAAkB,QAAA,mBAAAd,KAAA,CAAAa,iBAAA,CAAAjB,aAAA,CAAAkB,QAAA,EAAAoB,MAAA,YAUC;IACqB/M,wDAAA,EAAwC;IAAxCA,yDAAA,UAAAyK,aAAA,CAAAxC,mBAAA,CAAwC;IAC5DjI,wDAAA,EACF;IADEA,iEAAA,YAAA0K,MAAA,CAAA0C,WAAA,CAAA3C,aAAA,CAAAxC,mBAAA,OACF;IACAjI,wDAAA,EAGC;IAHDA,4DAAA,KAAA6K,KAAA,CAAAmB,SAAA,IAAAnB,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAAqC,UAAA,WAGC;IACDrN,wDAAA,EAGC;IAHDA,4DAAA,KAAA6K,KAAA,CAAAmB,SAAA,IAAAnB,KAAA,CAAAE,SAAA,CAAAN,aAAA,CAAAO,UAAA,EAAAsC,SAAA,WAGC;;;;;IAjEHtN,+DAAA,IAAAuN,+DAAA,oBAAAvN,wEAAA,CAmEC;;;;IAnEDA,yDAAA,CAAA6K,KAAA,CAAA2C,mBAAA,CAmEC;;;;;IAtEHxN,6DAAA,gBAAiC;IAE/BA,yDAAA,IAAAyN,yDAAA,OAAkB;IAsEpBzN,2DAAA,EAAM;;;;IAtEJA,wDAAA,GAqEC;IArEDA,4DAAA,KAAA0K,MAAA,CAAAgD,SAAA,UAqEC;;;ADrDH,MAAMC,UAAU,GAAG,yEAAyE;AAgBtF,MAAOC,oBAAqB,SAAQ9D,4EAAa;EAYrDlJ,YACU+F,kBAAsC,EACtCkH,sBAA8C,EAC9CC,iBAAoC,EACpCC,MAAiB,EACjBC,gBAAkC;IAE1C,KAAK,EAAE;IANC,KAAArH,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAAkH,sBAAsB,GAAtBA,sBAAsB;IACtB,KAAAC,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAb1B,KAAA9D,eAAe,GAAGA,4DAAe;IACjC,KAAAwD,SAAS,GAAG,KAAK;IAGT,KAAAO,aAAa,GAAG,IAAIrK,kDAAe,CAAC,KAAK,CAAC;EAYlD;EAEAqD,QAAQA,CAAA;IACN8C,gFAAW,CAAC,CAAC;MAAEmE,IAAI,EAAE,SAAS;MAAEC,GAAG,EAAER;IAAU,CAAE,CAAC,EAAE,MAAK;MACvD,IAAI,CAACM,aAAa,CAACtG,IAAI,CAAC,IAAI,CAAC;IAC/B,CAAC,CAAC;IAEF,IAAI,CAACyG,aAAa,CAACC,GAAG,CACpB,IAAI,CAAC1H,kBAAkB,CAAC2H,4BAA4B,CAACC,SAAS,CAACC,MAAM,IAAG;MACtE,IAAI,CAACC,OAAO,CAACC,2BAA2B,CAACF,MAAM,CAAC;IAClD,CAAC,CAAC,CACH;IAED,MAAMG,qBAAqB,GAAG,IAAI,CAAChI,kBAAkB,CAACiI,cAAc,CAACxH,IAAI,CACvEtD,0CAAG,CAAC+K,aAAa,IAAIxE,qEAAW,CAACyE,QAAQ,CAACD,aAAa,EAAEE,QAAQ,CAACtC,kBAAkB,CAAC,IAAI,EAAE,CAAC,EAC5F5C,2DAAoB,CAACS,8DAAS,CAAC0E,YAAY,CAAC,CAC7C;IAED,IAAI,CAAC9H,UAAU,GAAGrD,oDAAa,CAAC,CAC9B,IAAI,CAAC8C,kBAAkB,CAACiI,cAAc,EACtC,IAAI,CAACjI,kBAAkB,CAACQ,YAAY,EACpCwH,qBAAqB,EACrB,IAAI,CAAChI,kBAAkB,CAACsI,kBAAkB,CAC3C,CAAC,CAAC7H,IAAI,CACLtD,0CAAG,CAAC,CAAC,CAAC+K,aAAa,EAAExH,WAAW,EAAE6H,oBAAoB,EAAExD,iBAAiB,CAAC,KAAI;MAC5E,IAAImD,aAAa,IAAI,IAAI,IAAIxH,WAAW,IAAI,IAAI,EAAE;QAAE;;MAEpD;MACA;MACA,IAAI,CAACqG,SAAS,GAAG,IAAI;MACrB,IAAI,CAACI,iBAAiB,CAACqB,aAAa,EAAE;MACtC,IAAI,CAACzB,SAAS,GAAG,KAAK;MACtB,MAAM0B,SAAS,GAAyB;QACtC5B,mBAAmB,EAAEqB,aAAa,CAACQ,WAAW;QAC9CtE,SAAS,EAAEd,yEAAkB,CAAC4E,aAAa,CAACQ,WAAW,EAAEhI,WAAW,CAAC;QACrE2E,SAAS,EAAE6C,aAAa,CAACE,QAAQ,CAACO,SAAS;QAC3CxC,qBAAqB,EAAEoC,oBAAoB,CAACK,qBAAqB,IAAI,KAAK;QAC1E7D;OACD;MACD,OAAO0D,SAAS;IAClB,CAAC,CAAC,CACH;EACH;EAEAI,eAAeA,CAAA;IACb;IACA,MAAMC,qBAAqB,GAAG,IAAI,CAACC,iBAAiB,CAACC,OAAO,CAACvI,IAAI,CAACtD,0CAAG,CAAC,MAAM,IAAI,CAAC,CAAC;IAElF,IAAI,CAACsK,aAAa,CAACC,GAAG,CACpBxK,oDAAa,CAAC,CAAC,IAAI,CAACoK,aAAa,EAAEwB,qBAAqB,CAAC,CAAC,CAAClB,SAAS,CAAC,CAAC,CAACqB,YAAY,EAAEC,oBAAoB,CAAC,KAAI;MAC5G,IAAI,CAACD,YAAY,IAAI,CAACC,oBAAoB,EAAE;QAAE;;MAE9C,IAAI,CAACpB,OAAO,EAAEqB,OAAO,EAAE;MACvB,IAAI,CAACrB,OAAO,GAAG,IAAItE,oDAAO,CACxB,IAAI,CAAC4F,UAAU,CAACC,aAAa,EAC7B,IAAI,CAACrJ,kBAAkB,CAACiI,cAAc,CAACnJ,KAAK,EAC5C,IAAI,CAACkB,kBAAkB,CAACQ,YAAY,CAAC1B,KAAK,EAC1C,IAAI,CAACwK,oBAAoB,CAACC,IAAI,CAAC,IAAI,CAAC,EACpC,IAAI,CAACC,SAAS,CAACD,IAAI,CAAC,IAAI,CAAC,EACzB,IAAI,CAACE,aAAa,CAACF,IAAI,CAAC,IAAI,CAAC,EAC7B,IAAI,CAACnC,MAAM,EACX,IAAI,CAACC,gBAAgB,EACrB,IAAI,CAACF,iBAAiB,CACvB;IACH,CAAC,CAAC,CACH;EACH;EAEAvG,WAAWA,CAAA;IACT,IAAI,CAACkH,OAAO,EAAEqB,OAAO,EAAE;IACvB,IAAI,CAAC7B,aAAa,CAACzG,QAAQ,EAAE;IAC7B,KAAK,CAACD,WAAW,EAAE;EACrB;EAEA0I,oBAAoBA,CAAA;IAClB,MAAMI,WAAW,GAAG,IAAI,CAAC5B,OAAO,CAAC6B,iBAAiB,EAAE;IACpD,MAAMC,UAAU,GAAG,IAAI,CAAC9B,OAAO,CAAC+B,aAAa,EAAE;IAC/C,IAAI,CAAC7J,kBAAkB,CAAC8J,iBAAiB,CAACJ,WAAW,EAAEE,UAAU,CAAC;EACpE;EAEAJ,SAASA,CAACO,sBAA8B,EAAEC,QAA4B;IACpE,IAAI,CAAChK,kBAAkB,CAACiK,wBAAwB,CAACF,sBAAsB,EAAEC,QAAQ,CAAC;EACpF;EAEAP,aAAaA,CAACS,MAA4B;IACxC,IAAI,CAAClK,kBAAkB,CAACmK,WAAW,CAACD,MAAM,CAAC;EAC7C;EAEAlG,mBAAmBA,CAAC/C,UAA8B;IAChD;IACA,IAAIA,UAAU,CAACoD,UAAU,CAAC7E,QAAQ,CAAC,SAAS,CAAC,EAAE;MAC7C,IAAI,CAACQ,kBAAkB,CAACoK,UAAU,CAAC,IAAI,EAAE,KAAK,CAAC;KAChD,MAAM;MACL,IAAI,CAACpK,kBAAkB,CAACqK,cAAc,CAACpJ,UAAU,CAAC;;EAEtD;EAEAwF,WAAWA,CAAC6D,mBAA2B;IACrC,MAAMrJ,UAAU,GAAG,IAAI,CAACjB,kBAAkB,CAACQ,YAAY,CAAC1B,KAAK,CAACyL,IAAI,CAACC,EAAE,IAAIA,EAAE,CAAClJ,mBAAmB,KAAKgJ,mBAAmB,CAAC;IACxH,OAAO,IAAI,CAACpD,sBAAsB,CAACuD,cAAc,CAACxJ,UAAU,EAAEyJ,aAAa,IAAIJ,mBAAmB,EAAE,WAAW,CAAC;EAClH;EAEA/D,eAAeA,CAACoE,kBAAsC;IACpD,OAAOA,kBAAkB,CAACrJ,mBAAmB,KAAKlE,yEAAY,CAAC8C,gBAAgB,CAACmC,aAAa,CAACf,mBAAmB;EACnH;EAEAmD,MAAMA,CAACkG,kBAAsC;IAC3C,IAAI,CAACC,OAAO,CAAC,UAAUD,kBAAkB,CAACvM,IAAI,eAAe,CAAC,EAAE;MAAE;;IAElE,IAAI,CAAC0J,OAAO,CAAC+C,2BAA2B,CAACF,kBAAkB,CAACtG,UAAU,CAAC;IACvE,MAAMqF,WAAW,GAAG,IAAI,CAAC5B,OAAO,CAAC6B,iBAAiB,EAAE;IACpD,MAAMC,UAAU,GAAG,IAAI,CAAC9B,OAAO,CAAC+B,aAAa,EAAE;IAC/C,IAAI,CAAC7J,kBAAkB,CAAC8K,gBAAgB,CAACH,kBAAkB,CAACtG,UAAU,EAAEqF,WAAW,EAAEE,UAAU,CAAC;EAClG;EAEAzF,QAAQA,CAAC4G,GAAW;IAClBC,MAAM,CAACC,IAAI,CAACF,GAAG,EAAE,QAAQ,CAAC;EAC5B;EAEAzF,QAAQA,CAACrE,UAA8B;IACrC,MAAMiK,OAAO,GAAGC,MAAM,CAAC,oBAAoB,EAAElK,UAAU,CAAC7C,IAAI,CAAC,EAAEgN,IAAI,EAAE;IACrE,IAAIF,OAAO,IAAI,IAAI,IAAIA,OAAO,KAAK,EAAE,EAAE;MAAE;;IAEzC,IAAI,CAAClL,kBAAkB,CAACqL,gBAAgB,CAACpK,UAAU,CAACoD,UAAU,EAAE6G,OAAO,CAAC;EAC1E;EAEA1F,eAAeA,CAACvE,UAA8B;IAC5C,MAAMqK,cAAc,GAAGH,MAAM,CAAC,kBAAkB,EAAElK,UAAU,CAACuF,WAAW,CAAC,EAAE4E,IAAI,EAAE;IACjF,IAAIE,cAAc,IAAI,IAAI,EAAE;MAAE;;IAE9B,IAAI,CAACtL,kBAAkB,CAACuL,2BAA2B,CAACtK,UAAU,CAACoD,UAAU,EAAEiH,cAAc,CAAC;EAC5F;EAAC,QAAAjR,CAAA;qBAvJU4M,oBAAoB,EAAA5N,gEAAA,CAAA6C,8EAAA,GAAA7C,gEAAA,CAAAsI,sFAAA,GAAAtI,gEAAA,CAAAA,6DAAA,GAAAA,gEAAA,CAAAwI,gEAAA,GAAAxI,gEAAA,CAAAA,4DAAA;EAAA;EAAA,QAAAiB,EAAA;UAApB2M,oBAAoB;IAAA1M,SAAA;IAAAiR,SAAA,WAAAC,2BAAAtQ,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;;;;;;;;;;;;;;;QCnCjC9B,yDAAA,IAAAqS,2CAAA,iBAAmC;;;;;QAAnCrS,4DAAA,KAAAqI,OAAA,GAAArI,0DAAA,OAAA+B,GAAA,CAAAmF,UAAA,aAAAmB,OAAA,CA0EC;;;mBD9CG+B,qDAAO,EACPvK,qDAAO,EACPsE,kEAAa,EAAAmO,4DAAA,EACb7O,uDAAS,EACTR,sHAAiC;IAAAD,MAAA;EAAA;;;;;;;;;;;;;;;;AE7B9B,MAAMgB,QAAQ,GAAa;EAChCuO,GAAG,EAAE;IAAExN,IAAI,EAAE,KAAK;IAAEiB,KAAK,EAAE,iBAAiB;IAAEf,IAAI,EAAE,MAAM;IAAEH,MAAM,EAAE;EAAkC,CAAE;EACxG0N,KAAK,EAAE;IAAEzN,IAAI,EAAE,OAAO;IAAEE,IAAI,EAAE,SAAS;IAAEH,MAAM,EAAE;EAAiB,CAAE;EACpE2N,MAAM,EAAE;IAAE1N,IAAI,EAAE,QAAQ;IAAEE,IAAI,EAAE,aAAa;IAAEH,MAAM,EAAE;EAAyD,CAAE;EAClH4N,KAAK,EAAE;IAAE3N,IAAI,EAAE,OAAO;IAAEE,IAAI,EAAE,OAAO;IAAEH,MAAM,EAAE;EAA+D,CAAE;EAChH6N,MAAM,EAAE;IAAE5N,IAAI,EAAE,QAAQ;IAAEE,IAAI,EAAE,QAAQ;IAAEH,MAAM,EAAE;EAAuE,CAAE;EAC3H8N,MAAM,EAAE;IAAE7N,IAAI,EAAE,QAAQ;IAAEE,IAAI,EAAE,iBAAiB;IAAEH,MAAM,EAAE;EAA2D,CAAE;EACxH+N,QAAQ,EAAE;IAAE9N,IAAI,EAAE,UAAU;IAAEE,IAAI,EAAE,gBAAgB;IAAEH,MAAM,EAAE;EAAmE,CAAE;EACnIgO,IAAI,EAAE;IAAE/N,IAAI,EAAE,MAAM;IAAEE,IAAI,EAAE,MAAM;IAAEH,MAAM,EAAE;EAAgB,CAAE;EAC9DiO,MAAM,EAAE;IAAEhO,IAAI,EAAE,QAAQ;IAAEE,IAAI,EAAE,cAAc;IAAEH,MAAM,EAAE;EAAkD,CAAE;EAC5GkO,MAAM,EAAE;IAAEjO,IAAI,EAAE,QAAQ;IAAEE,IAAI,EAAE,QAAQ;IAAEH,MAAM,EAAE;EAA6C,CAAE;EACjGI,OAAO,EAAE;IAAEH,IAAI,EAAE,SAAS;IAAEE,IAAI,EAAE,qBAAqB;IAAEH,MAAM,EAAE;EAAc,CAAE;EACjFmO,KAAK,EAAE;IAAElO,IAAI,EAAE,OAAO;IAAEE,IAAI,EAAE,YAAY;IAAEH,MAAM,EAAE;EAAiB,CAAC;EACtEoO,MAAM,EAAE;IAAEnO,IAAI,EAAE,QAAQ;IAAEE,IAAI,EAAE,eAAe;IAAEH,MAAM,EAAE;EAAa;CACvE;AAEK,SAAUmF,kBAAkBA,CAACuD,mBAAyC,EAAEnG,WAAyB;EACrG,MAAM0D,SAAS,GAAc,EAAE;EAE/B,KAAK,MAAMuG,kBAAkB,IAAI9D,mBAAmB,EAAE;IACpD,IAAI2F,QAAkB;IACtB,MAAMvL,UAAU,GAAGP,WAAW,CAAC6J,IAAI,CAACC,EAAE,IAAIA,EAAE,CAAClJ,mBAAmB,KAAKqJ,kBAAkB,CAACrJ,mBAAmB,CAAC;IAC5G,IAAIL,UAAU,EAAE;MACduL,QAAQ,GAAG;QAAE,IAAIvL,UAAU,CAAC0B,WAAW,GAAGtF,QAAQ,CAAC4D,UAAU,CAAC0B,WAAW,CAAC,GAAGtF,QAAQ,CAACkB,OAAO;MAAC,CAAE;MAChG,IAAI0C,UAAU,CAAC3C,IAAI,IAAI,IAAI,EAAE;QAAEkO,QAAQ,CAAClO,IAAI,GAAG2C,UAAU,CAAC3C,IAAI;;MAC9D,IAAI2C,UAAU,CAAC0F,SAAS,IAAI,IAAI,EAAE;QAAE6F,QAAQ,CAAC7F,SAAS,GAAG1F,UAAU,CAAC0F,SAAS;;MAC7E,IAAI1F,UAAU,CAACyF,UAAU,IAAI,IAAI,EAAE;QAAE8F,QAAQ,CAAC9F,UAAU,GAAGzF,UAAU,CAACyF,UAAU;;MAChF,IAAIzF,UAAU,CAACqD,QAAQ,IAAI,IAAI,EAAE;QAAEkI,QAAQ,CAAClI,QAAQ,GAAGrD,UAAU,CAACqD,QAAQ;;MAC1E,IAAIrD,UAAU,CAACqF,YAAY,IAAI,IAAI,EAAE;QAAEkG,QAAQ,CAAClG,YAAY,GAAGrF,UAAU,CAACqF,YAAY;;MACtF,IAAIrF,UAAU,CAAC9C,MAAM,IAAI,IAAI,EAAE;QAAEqO,QAAQ,CAACrO,MAAM,GAAG8C,UAAU,CAAC9C,MAAM;;;IAEtE,IAAI,CAACqO,QAAQ,EAAE;MAAEA,QAAQ,GAAG;QAAE,GAAGnP,QAAQ,CAACkB;MAAO,CAAE;;IACnD6F,SAAS,CAACuG,kBAAkB,CAACtG,UAAU,CAAC,GAAGmI,QAAQ;;EAGrD,OAAOpI,SAAS;AAClB;;;;;;;;;;;;;;;;;ACrCoE;AAIY;AAKzE,MAAMb,eAAe,GAAG,aAAa;AAEtC,MAAOC,OAAO;EAsBlBvJ,YACUyS,WAAwB,EACxBxE,aAA4B,EAC5BxH,WAAyB,EACzB4I,oBAAgC,EAChCE,SAAiF,EACjFC,aAAqD,EACrDrC,MAAiB,EACjBC,gBAAkC,EAClCF,iBAAoC;IARpC,KAAAuF,WAAW,GAAXA,WAAW;IACX,KAAAxE,aAAa,GAAbA,aAAa;IACb,KAAAxH,WAAW,GAAXA,WAAW;IACX,KAAA4I,oBAAoB,GAApBA,oBAAoB;IACpB,KAAAE,SAAS,GAATA,SAAS;IACT,KAAAC,aAAa,GAAbA,aAAa;IACb,KAAArC,MAAM,GAANA,MAAM;IACN,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAAF,iBAAiB,GAAjBA,iBAAiB;IA7BnB,KAAAwF,SAAS,GAAG,CAAC;IACb,KAAAC,gBAAgB,GAAG;MACzBC,MAAM,EAAE,SAAS;MACjBC,WAAW,EAAE,CAAC;MACdC,aAAa,EAAE,OAAO;MACtBC,YAAY,EAAE;KACf;IACO,KAAAC,UAAU,GAAG,CACnB,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACrD,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACrD,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACrD,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACrD,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EACrD,SAAS,EAAE,SAAS,CACrB;IACO,KAAAC,OAAO,GAAG,IAAI,CAACD,UAAU,CAAC7G,MAAM,GAAG,CAAC;IACpC,KAAA+G,YAAY,GAAwB,EAAE;IACtC,KAAAC,UAAU,GAAG,KAAK;IAcxB,IAAI,CAACC,QAAQ,GAAGrC,MAAM,CAACsC,OAAO,CAACC,WAAW,CAAC,IAAI,CAACC,mBAAmB,CAAC,IAAI,CAACd,WAAW,CAAC,CAAC;IACtF,IAAI,CAACW,QAAQ,CAACI,KAAK,CAAC,MAAK;MACvB,IAAI,CAACC,kBAAkB,EAAE;MACzB,IAAI,CAACC,WAAW,EAAE;MAClB,IAAI,CAACC,UAAU,EAAE;IACnB,CAAC,CAAC;IACF;IACA;IACA,IAAI,CAACP,QAAQ,CAACQ,iBAAiB,EAAE;EACnC;EAEA1E,OAAOA,CAAA;IACL,IAAI,CAAC2E,SAAS,EAAEC,KAAK,EAAE;IACvB,IAAI,CAACV,QAAQ,CAACW,KAAK,EAAE;IACrB,IAAI,CAACX,QAAQ,CAACY,eAAe,EAAE;EACjC;EAEApD,2BAA2BA,CAACd,sBAA8B;IACxD,MAAMmE,SAAS,GAAG3K,eAAe,GAAGwG,sBAAsB;IAC1D,IAAI,CAACqD,UAAU,GAAG,IAAI;IACtB,IAAI,CAACC,QAAQ,CAACI,KAAK,CAAC,MAAK;MACvB,IAAI,CAACJ,QAAQ,CAACc,eAAe,CAAC;QAAEC,OAAO,EAAEF;MAAS,CAAE,CAAC,CAACG,MAAM,EAAE;IAChE,CAAC,CAAC;IACF,IAAI,CAACjB,UAAU,GAAG,KAAK;EACzB;EAEAzD,iBAAiBA,CAAA;IACf,MAAM2E,eAAe,GAAiB,IAAI,CAACjB,QAAQ,CAAC1D,iBAAiB,EAAE,CAACxM,GAAG,CAAEoR,UAAqB,IAAI;MACpG,MAAMC,IAAI,GAAe;QACvBC,IAAI,EAAEF,UAAU,CAACG,QAAQ,CAACC,OAAO,CAACpL,eAAe,EAAE,EAAE,CAAC;QACtDqL,GAAG,EAAEL,UAAU,CAACM,SAAS,CAAC,CAAC,CAAC,CAACC,UAAU,CAAC,eAAe,CAAC,CAACC,KAAK;QAC9DC,EAAE,EAAET,UAAU,CAACU,QAAQ,CAACN,OAAO,CAACpL,eAAe,EAAE,EAAE,CAAC;QACpD2L,EAAE,EAAEX,UAAU,CAACM,SAAS,CAAC,CAAC,CAAC,CAACC,UAAU,CAAC,eAAe,CAAC,CAACC;OACzD;MACD,OAAOP,IAAI;IACb,CAAC,CAAC;IACF,OAAOF,eAAe;EACxB;EAEAzE,aAAaA,CAAA;IACX,MAAMD,UAAU,GAAa,EAAE;IAC/B,IAAI,CAACyD,QAAQ,CAACc,eAAe,CAAC;MAAEgB,MAAM,EAAE5L,eAAe,GAAG;IAAK,CAAE,CAAC,CAAC6L,IAAI,CAAEC,QAAmB,IAAI;MAC9FzF,UAAU,CAAChH,IAAI,CAACyM,QAAQ,CAACP,UAAU,CAAC,eAAe,CAAC,CAACC,KAAK,CAAC;IAC7D,CAAC,CAAC;IACF,MAAMO,aAAa,GAAG1F,UAAU,CAAC2F,IAAI,CAAC,GAAG,CAAC;IAC1C,OAAOD,aAAa;EACtB;EAEAvH,2BAA2BA,CAACF,MAAsB;IAChDA,MAAM,CAAC2H,OAAO,EAAEC,OAAO,CAACvF,MAAM,IAAG;MAC/B,MAAMwF,eAAe,GAAGnM,eAAe,GAAG2G,MAAM,CAACkC,MAAM;MACvD,MAAMuD,UAAU,GAAG,CAAC,sCAAsC,EAAE,IAAI,CAACzH,aAAa,CAACE,QAAQ,CAAC/D,UAAU,CAAC;MACnG,MAAMuL,eAAe,GAAGD,UAAU,CAACnQ,QAAQ,CAAC0K,MAAM,CAACmC,MAAM,CAAC,GAAG9I,eAAe,GAAG,KAAK,GAAGA,eAAe,GAAG2G,MAAM,CAACmC,MAAM;MAEtH,MAAMwD,QAAQ,GAAGH,eAAe,GAAG,OAAO,GAAGxF,MAAM,CAAC4F,SAAS;MAC7D,MAAMC,MAAM,GAAGH,eAAe,GAAG,MAAM,GAAG1F,MAAM,CAAC8F,QAAQ;MAEzD,MAAMC,KAAK,GAAc,IAAI,CAAC5C,QAAQ,CAAC6C,WAAW,CAACL,QAAQ,CAAC;MAC5DI,KAAK,EAAEvG,WAAW,EACdvH,MAAM,CAAEoM,UAAqB,IAAKA,UAAU,CAACM,SAAS,CAAC,CAAC,CAAC,CAACsB,OAAO,EAAE,KAAKJ,MAAM,CAAC,EAC/EN,OAAO,CAAElB,UAAqB,IAAI;QAClC,MAAMQ,KAAK,GAAG,CAAC7E,MAAM,CAACkG,KAAK,GAAGlG,MAAM,CAACmG,KAAK,CAACC,QAAQ,EAAE,GAAG,EAAE;QAC1D,MAAMC,QAAQ,GAAG,sBAAsB,IAAI,CAACrG,MAAM,CAACkG,KAAK,GAAG,EAAE,GAAG,qBAAqB,CAAC;QACtF7B,UAAU,CAACiC,QAAQ,CAAC;UAClBzB,KAAK;UACLwB,QAAQ;UACRE,MAAM,EAAE;YACNC,KAAK,EAAGC,OAAkB,IAAI;cAC5B,IAAI,CAAC,IAAI,CAACzI,aAAa,CAACE,QAAQ,CAACO,SAAS,EAAE;gBAAE;;cAC9C,IAAI,CAACc,aAAa,CAACS,MAAM,CAAC;YAC5B;;SAEH,CAAC;MACJ,CAAC,CAAC;IACN,CAAC,CAAC;EACJ;EAEQ0G,kBAAkBA,CAACC,IAAY;IACrC,OACE,IAAI,CAAC1D,YAAY,CAAC0D,IAAI,CAAC,KACtB,IAAI,CAAC1D,YAAY,CAAC0D,IAAI,CAAC,GAAGC,MAAM,CAACC,MAAM,CAAC,EAAE,EAAE,IAAI,CAACnE,gBAAgB,EAAE;MAAEC,MAAM,EAAE,IAAI,CAACI,UAAU,CAAC,IAAI,CAACN,SAAS,EAAE,GAAG,IAAI,CAACO,OAAO;IAAC,CAAE,CAAC,CAAC;EAEtI;EAEQM,mBAAmBA,CAACwD,SAAsB;IAChD,MAAMC,QAAQ,GAAG;MACfC,SAAS,EAAEF,SAAS;MACpBG,SAAS,EAAE,CAAC,QAAQ,EAAE;QAAEC,SAAS,EAAE;MAAE,CAAE,CAAC;MACxCC,UAAU,EAAE,IAAI,CAACT,kBAAkB,CAAC,OAAO,CAAC;MAC5CU,eAAe,EAAE;QACfzE,MAAM,EAAE,SAAS;QACjBC,WAAW,EAAE,CAAC;QACdC,aAAa,EAAE,OAAO;QACtBC,YAAY,EAAE;;KAEjB;IACD,OAAOiE,QAAQ;EACjB;EAEA;EACQvD,kBAAkBA,CAAA;IACxB,KAAK,MAAM/C,kBAAkB,IAAI,IAAI,CAACzC,aAAa,CAACQ,WAAW,EAAE;MAC/D,MAAM6I,aAAa,GAAG,IAAI,CAAC7E,WAAW,CAAC8E,aAAa,CAAc,GAAG,GAAGjO,eAAe,GAAGoH,kBAAkB,CAACtG,UAAU,CAAC;MACxH,IAAI,CAACkN,aAAa,EAAE;QAAE;;MACtB,MAAMtQ,UAAU,GAAG,IAAI,CAACP,WAAW,CAAC6J,IAAI,CAACC,EAAE,IAAIA,EAAE,CAAClJ,mBAAmB,KAAKqJ,kBAAkB,CAACrJ,mBAAmB,CAAC;MACjH,IAAI,CAACL,UAAU,EAAE;QAAE;;MAEnB,IAAI,IAAI,CAACiH,aAAa,CAACE,QAAQ,CAACO,SAAS,EAAE;QACzC;QACA,IAAI,CAAC0E,QAAQ,CAACoE,SAAS,CAACF,aAAa,EAAE;UACrCG,IAAI,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC;UAAEC,IAAI,EAAGnV,KAAgB,IAAI;YACzC,MAAM4R,OAAO,GAAgB5R,KAAK,CAACoV,EAAE;YACrC,MAAM7H,sBAAsB,GAAWqE,OAAO,CAACyD,EAAE,CAAClD,OAAO,CAACpL,eAAe,EAAE,EAAE,CAAC;YAC9E,MAAMyG,QAAQ,GAAuB;cACnCjE,GAAG,EAAEvJ,KAAK,CAACsV,QAAQ,CAAC,CAAC,CAAC;cACtB9L,IAAI,EAAExJ,KAAK,CAACsV,QAAQ,CAAC,CAAC;aACvB;YACDC,UAAU,CAAC,MAAK;cAAG,IAAI,CAACvI,SAAS,CAACO,sBAAsB,EAAEC,QAAQ,CAAC;YAAE,CAAC,CAAC;UACzE;SACD,CAAC;;MAGJ;MACA/I,UAAU,CAAC2N,GAAG,EAAEa,OAAO,CAAC9K,IAAI,IAAG;QAC7B,IAAI,CAACqN,WAAW,CAACT,aAAa,EAAE5M,IAAI,EAAE,KAAK,EAAEgG,kBAAkB,CAAC;MAClE,CAAC,CAAC;MAEF;MACA1J,UAAU,CAACiO,EAAE,EAAEO,OAAO,CAAC9K,IAAI,IAAG;QAC5B,IAAI,CAACqN,WAAW,CAACT,aAAa,EAAE5M,IAAI,EAAE,IAAI,EAAEgG,kBAAkB,CAAC;MACjE,CAAC,CAAC;MAEF;MACA,IAAI1J,UAAU,CAACiO,EAAE,EAAE;QACjB,MAAM+C,uBAAuB,GAAG,IAAI,CAACC,mBAAmB,CAACvH,kBAAkB,CAACtG,UAAU,CAAC;QACvF4N,uBAAuB,CAACE,cAAc,GAAG,CAAC,CAAC;QAC3C,IAAI,CAAC9E,QAAQ,CAAC+E,UAAU,CAACb,aAAa,EAAEU,uBAAuB,CAAC;;MAGlE,IAAIhR,UAAU,CAACyF,UAAU,EAAE;QACzB,IAAI,CAAC2G,QAAQ,CAACgF,UAAU,CAACd,aAAa,EAAE,IAAI,CAACe,mBAAmB,CAAC3H,kBAAkB,CAACtG,UAAU,CAAC,EAAE;UAAElC,MAAM,EAAE;QAAe,CAAE,CAAC;;;EAGnI;EAEA;EACQwL,WAAWA,CAAA;IACjB,IAAI,CAACzF,aAAa,CAACE,QAAQ,CAACmK,YAAY,EAAE9C,OAAO,CAACjB,IAAI,IAAG;MACvD;MACA,MAAMkB,eAAe,GAAGnM,eAAe,GAAGiL,IAAI,CAACC,IAAI;MACnD,MAAMoB,QAAQ,GAAGH,eAAe,GAAG,OAAO,GAAGlB,IAAI,CAACI,GAAG;MACrD,MAAMgB,eAAe,GAAGrM,eAAe,GAAGiL,IAAI,CAACQ,EAAE;MACjD,MAAMe,MAAM,GAAGH,eAAe,GAAG,MAAM,GAAGpB,IAAI,CAACU,EAAE;MAEjD;MACA,IAAI,CAAC,IAAI,CAAC7B,QAAQ,CAAC6C,WAAW,CAACL,QAAQ,CAAC,EAAE;QACxC,MAAM0B,aAAa,GAAG,IAAI,CAAC7E,WAAW,CAAC8E,aAAa,CAAc,GAAG,GAAG9B,eAAe,CAAC;QACxF,IAAI,CAAC6B,aAAa,EAAE;UAAE;;QAEtB,MAAMiB,IAAI,GAAWjB,aAAa,CAACM,EAAE,CAAClD,OAAO,CAACpL,eAAe,EAAE,EAAE,CAAC;QAClE,MAAMoH,kBAAkB,GAAG,IAAI,CAACzC,aAAa,CAACQ,WAAW,CAAC6B,IAAI,CAACkI,cAAc,IAAIA,cAAc,CAACpO,UAAU,KAAKmO,IAAI,CAAC;QACpH,IAAI,CAACR,WAAW,CAACT,aAAa,EAAE/C,IAAI,CAACI,GAAG,EAAE,KAAK,EAAEjE,kBAAkB,CAAC;;MAGtE;MACA,IAAI,CAAC,IAAI,CAAC0C,QAAQ,CAAC6C,WAAW,CAACH,MAAM,CAAC,EAAE;QACtC,MAAMwB,aAAa,GAAG,IAAI,CAAC7E,WAAW,CAAC8E,aAAa,CAAc,GAAG,GAAG5B,eAAe,CAAC;QACxF,IAAI,CAAC2B,aAAa,EAAE;UAAE;;QAEtB,MAAMiB,IAAI,GAAWjB,aAAa,CAACM,EAAE,CAAClD,OAAO,CAACpL,eAAe,EAAE,EAAE,CAAC;QAClE,MAAMoH,kBAAkB,GAAG,IAAI,CAACzC,aAAa,CAACQ,WAAW,CAAC6B,IAAI,CAACkI,cAAc,IAAIA,cAAc,CAACpO,UAAU,KAAKmO,IAAI,CAAC;QACpH,IAAI,CAACR,WAAW,CAACT,aAAa,EAAE/C,IAAI,CAACU,EAAE,EAAE,IAAI,EAAEvE,kBAAkB,CAAC;;MAGpE,IAAI;QACF,IAAI,CAAC0C,QAAQ,CAACqF,OAAO,CAAC;UACpBC,KAAK,EAAE,CAAC9C,QAAQ,EAAEE,MAAM,CAAC;UACzB6C,UAAU,EAAE,IAAI,CAAChC,kBAAkB,CAACf,QAAQ;SAC7C,CAAC;OACH,CAAC,OAAOgD,CAAC,EAAE;QACVC,OAAO,CAACC,KAAK,CAAC;UAAEC,OAAO,EAAE,mBAAmB;UAAEC,IAAI,EAAEpD,QAAQ;UAAEqD,EAAE,EAAEnD;QAAM,CAAE,CAAC;;IAE/E,CAAC,CAAC;EACJ;EAEQiC,WAAWA,CAACT,aAA0B,EAAE4B,YAAoB,EAAEC,IAAa,EAAEzI,kBAAsC;IACzH,MAAM1J,UAAU,GAAG,IAAI,CAACP,WAAW,CAAC6J,IAAI,CAAC8I,CAAC,IAAIA,CAAC,CAAC/R,mBAAmB,KAAKqJ,kBAAkB,CAACrJ,mBAAmB,CAAC;IAC/G,MAAMgS,SAAS,GAAGF,IAAI,GAClB,CAACnS,UAAU,CAACiO,EAAE,EAAEqE,IAAI,CAAC5O,IAAI,IAAI,IAAI,CAAC6O,eAAe,CAAC7O,IAAI,EAAE,KAAK,CAAC,CAAC,GAC/D,CAAC1D,UAAU,CAAC2N,GAAG,EAAE2E,IAAI,CAAC5O,IAAI,IAAI,IAAI,CAAC6O,eAAe,CAAC7O,IAAI,EAAE,KAAK,CAAC,CAAC;IACpE,MAAM8O,YAAY,GAAG,IAAI,CAACD,eAAe,CAACL,YAAY,EAAEG,SAAS,CAAC;IAElE,IAAII,KAAa;IACjB,IAAIJ,SAAS,EAAE;MACbI,KAAK,GAAG,SAAS;KAClB,MAAM,IAAI,CAACD,YAAY,CAACE,QAAQ,EAAE;MACjCD,KAAK,GAAG,EAAE;KACX,MAAM;MACL,MAAME,UAAU,GAAG,IAAI,CAAC1L,aAAa,CAACE,QAAQ,CAACmK,YAAY,EAAEgB,IAAI,CAAC/E,IAAI,IAAG;QACvE,MAAMoB,eAAe,GAAGrM,eAAe,GAAGiL,IAAI,CAACQ,EAAE;QACjD,MAAM6E,kBAAkB,GAAGrF,IAAI,CAACU,EAAE;QAElC,OAAOU,eAAe,KAAK2B,aAAa,CAACM,EAAE,IAAIgC,kBAAkB,KAAKJ,YAAY,CAAC9O,IAAI;MACzF,CAAC,CAAC;MACF+O,KAAK,GAAGE,UAAU,GAAG,EAAE,GAAG,UAAU;;IAGtC,MAAM/C,IAAI,GAAGU,aAAa,CAACM,EAAE,IAAIuB,IAAI,GAAG,MAAM,GAAG,OAAO,CAAC,GAAGK,YAAY,CAAC9O,IAAI;IAC7E,MAAMmP,KAAK,GAAGV,IAAI,GACd,IAAI,CAAClB,mBAAmB,CAACvH,kBAAkB,CAACtG,UAAU,EAAEqP,KAAK,CAAC,GAC9D,IAAI,CAACpB,mBAAmB,CAAC3H,kBAAkB,CAACtG,UAAU,EAAEqP,KAAK,CAAC;IAClE;IACA,MAAMK,MAAM,GAAG;MACblD,IAAI;MACJmD,OAAO,EAAE,IAAI,CAAC9L,aAAa,CAACE,QAAQ,CAACO,SAAS,IACzCgC,kBAAkB,CAACtG,UAAU,KAAKjH,yEAAY,CAAC8C,gBAAgB,CAACmC,aAAa,CAACgC;KACpF;IAED,MAAMgL,QAAQ,GAAc,IAAI,CAAChC,QAAQ,CAAC2E,WAAW,CAACT,aAAa,EAAEuC,KAAK,EAAEC,MAAM,CAAC;IACnF1E,QAAQ,CAACP,UAAU,CAAC,eAAe,CAAC,CAAC0B,QAAQ,CAACiD,YAAY,CAAC9O,IAAI,CAAC;EAClE;EAEQ2N,mBAAmBA,CAACvI,sBAA8B,EAAE2J,KAAc;IACxE,MAAMO,QAAQ,GAAG,IAAI;IACrB,MAAMC,cAAc,GAAG;MACrBtB,UAAU,EAAE;QAAEuB,IAAI,EAAE,aAAa;QAAEC,MAAM,EAAE;MAAE,CAAE;MAC/C7D,QAAQ,EAAE,iBAAiB,GAAGmD,KAAK,IAAI,EAAE;MACzCvB,cAAc,EAAE,CAAC,CAAC;MAClB8B,QAAQ;MACRI,MAAM,EAAE,CAAC,YAAY,EAAE;QAAEC,KAAK,EAAE,CAAC,KAAK;MAAC,CAAE,CAAC;MAC1CC,QAAQ,EAAE,IAAI,CAACC,mBAAmB,CAACP,QAAQ,CAAC;MAC5CxD,MAAM,EAAE;QACNC,KAAK,EAAG+D,iBAA4B,IAAI;UACtC,IAAI,CAACC,aAAa,CAACD,iBAAiB,EAAER,QAAQ,EAAElK,sBAAsB,CAAC;QACzE;;KAEH;IACD,OAAOmK,cAAc;EACvB;EAEQhC,mBAAmBA,CAACnI,sBAA8B,EAAE2J,KAAc;IACxE,MAAMO,QAAQ,GAAG,KAAK;IACtB,MAAMU,cAAc,GAAG;MACrB/B,UAAU,EAAE;QAAEuB,IAAI,EAAE,aAAa;QAAEC,MAAM,EAAE;MAAE,CAAE;MAC/C7D,QAAQ,EAAE,iBAAiB,GAAGmD,KAAK,IAAI,EAAE;MACzCvB,cAAc,EAAE,CAAC;MACjByC,QAAQ,EAAE,CAACX,QAAQ;MACnBI,MAAM,EAAE,CAAC,YAAY,EAAE;QAAEC,KAAK,EAAE,CAAC,QAAQ;MAAC,CAAE,CAAC;MAC7CC,QAAQ,EAAE,IAAI,CAACC,mBAAmB,CAACP,QAAQ,CAAC;MAC5CY,WAAW,EAAE;QAAEC,UAAU,EAAE,OAAO;QAAEC,WAAW,EAAE;MAAQ,CAAE;MAC3DtE,MAAM,EAAE;QACNC,KAAK,EAAG+D,iBAA4B,IAAI;UACtC,IAAI,CAACC,aAAa,CAACD,iBAAiB,EAAER,QAAQ,EAAElK,sBAAsB,CAAC;QACzE;;KAEH;IACD,OAAO4K,cAAc;EACvB;EAEQH,mBAAmBA,CAACP,QAAiB;IAC3C,OAAO,CACL,CACE,OAAO,EAAE;MACPpC,EAAE,EAAE,eAAe;MACnBmD,QAAQ,EAAE,CAAC,GAAG,EAAEf,QAAQ,GAAG,CAAC,GAAG,CAAC,CAAC;MACjClF,KAAK,EAAE,SAAS;MAChBwB,QAAQ,EAAE0D,QAAQ,GAAG,qBAAqB,GAAG;KAC9C,CACF,CACF;EACH;EAEQS,aAAaA,CAACD,iBAA4B,EAAER,QAAiB,EAAElK,sBAA8B;IACnG,IAAI,CAAC,IAAI,CAAC7B,aAAa,CAACE,QAAQ,CAACO,SAAS,EAAE;MAAE;;IAE9C,MAAMgI,OAAO,GAAc8D,iBAAiB,CAAC3F,UAAU,GAAG2F,iBAAiB,CAAC3F,UAAU,CAAC,eAAe,CAAC,GAAG2F,iBAAiB;IAC3H,MAAMQ,IAAI,GAA2B;MACnClL,sBAAsB;MACtBkK,QAAQ;MACRlF,KAAK,EAAE4B,OAAO,CAAC5B;KAChB;IACD,IAAI,CAACjB,SAAS,GAAG,IAAI,CAAC1G,MAAM,CAAC6D,IAAI,CAACwB,yFAAqB,EAAE;MACvDyI,SAAS,EAAE,KAAK;MAChBD,IAAI;MACJ5N,gBAAgB,EAAE,IAAI,CAACA,gBAAgB;MACvC8N,KAAK,EAAE;KACR,CAAC;IACF,IAAI,CAACrH,SAAS,CAACsH,WAAW,EAAE,CAACxN,SAAS,CAACyN,QAAQ,IAAG;MAChD,IAAI,CAACA,QAAQ,EAAE;QAAE;;MACjB1E,OAAO,CAACH,QAAQ,CAAC6E,QAAQ,CAAC;MAC1BtD,UAAU,CAAC,MAAK;QAAG,IAAI,CAACzI,oBAAoB,EAAE;MAAE,CAAC,CAAC;IACpD,CAAC,CAAC;IACF,IAAI,CAACnC,iBAAiB,CAACmO,YAAY,EAAE;EACvC;EAEQ1H,UAAUA,CAAA;IAChB,IAAI,CAACP,QAAQ,CAAC9D,IAAI,CAAC,oBAAoB,EAAGgM,IAAe,IAAI;MAC3D,IAAI,IAAI,CAACnI,UAAU,EAAE;QAAE;;MACvB,MAAMmE,aAAa,GAAgBgE,IAAI,CAACpG,MAAM;MAC9C,MAAMxE,kBAAkB,GAAG,IAAI,CAACzC,aAAa,CAACQ,WAAW,CAAC6B,IAAI,CAC5DiL,UAAU,IAAIA,UAAU,CAACnR,UAAU,KAAKkN,aAAa,CAACM,EAAE,CAAClD,OAAO,CAACpL,eAAe,EAAE,EAAE,CAAC,CACtF;MACD,MAAMtC,UAAU,GAAG,IAAI,CAACP,WAAW,CAAC6J,IAAI,CAACC,EAAE,IAAIA,EAAE,CAAClJ,mBAAmB,KAAKqJ,kBAAkB,CAACrJ,mBAAmB,CAAC;MACjH,MAAMyN,KAAK,GAAWwG,IAAI,CAACZ,cAAc,CAAC7F,UAAU,CAAC,eAAe,CAAC,CAACC,KAAK;MAC3E,MAAMuE,SAAS,GAAG,CAACrS,UAAU,CAACiO,EAAE,CAACqE,IAAI,CAAC5O,IAAI,IAAI,IAAI,CAAC6O,eAAe,CAAC7O,IAAI,EAAE,KAAK,CAAC,CAACA,IAAI,KAAKoK,KAAK,CAAC;MAC/F,IAAIuE,SAAS,EAAE;QACb,IAAI,CAACjG,QAAQ,CAACoI,cAAc,CAACF,IAAI,CAACZ,cAAc,CAAC;QACjD5C,UAAU,CAAC,MAAK;UAAG,IAAI,CAACzI,oBAAoB,EAAE;QAAE,CAAC,CAAC;OACnD,MAAM;QACLyI,UAAU,CAAC,MAAK;UAAG,IAAI,CAACzI,oBAAoB,EAAE;QAAE,CAAC,CAAC;;IAEtD,CAAC,CAAC;IAEF,IAAI,CAAC+D,QAAQ,CAAC9D,IAAI,CAAC,YAAY,EAAGgM,IAAe,IAAI;MACnD,IAAIA,IAAI,CAAC7G,QAAQ,KAAK6G,IAAI,CAACtG,QAAQ,EAAE;QACnC8C,UAAU,CAAC,MAAK;UACd,IAAI,CAAC1E,QAAQ,CAACqI,gBAAgB,CAACH,IAAI,CAAChH,UAAU,EAAE;YAAEoH,SAAS,EAAE;UAAK,CAAE,CAAC;UACrE5D,UAAU,CAAC,MAAK;YAAG,IAAI,CAACzI,oBAAoB,EAAE;UAAE,CAAC,CAAC;QACpD,CAAC,CAAC;QACF;;MAEF,MAAMsM,aAAa,GAAcL,IAAI,CAACZ,cAAc,CAAC7F,UAAU,CAAC,eAAe,CAAC;MAChF,MAAM+G,WAAW,GAAWD,aAAa,CAACE,QAAQ,EAAE;MACpD,MAAMjH,SAAS,GAAgB,IAAI,CAACxB,QAAQ,CAAC0I,YAAY,CAACR,IAAI,CAACpG,MAAM,CAAC0C,EAAE,CAAC;MACzE,MAAMmE,0BAA0B,GAAGnH,SAAS,CAAC0E,IAAI,CAAClE,QAAQ,IAAG;QAC3D,MAAMN,KAAK,GAAWM,QAAQ,CAACP,UAAU,CAAC,eAAe,CAAC,CAACgH,QAAQ,EAAE;QACrE,OAAO/G,KAAK,KAAK8G,WAAW,IAC1BN,IAAI,CAACZ,cAAc,CAAC9C,EAAE,KAAKxC,QAAQ,CAACwC,EAAE,IACrCxC,QAAQ,CAAC4G,MAA4B,CAACC,SAAS,CAACC,QAAQ,CAAC,gBAAgB,CAAC;MAC/E,CAAC,CAAC;MACF,IAAIH,0BAA0B,EAAE;QAC9BJ,aAAa,CAACpF,QAAQ,CAAC,eAAe4F,IAAI,CAACC,KAAK,CAACD,IAAI,CAACE,MAAM,EAAE,GAAG,KAAK,CAAC,EAAE,CAAC;;MAE5EvE,UAAU,CAAC,MAAK;QAAG,IAAI,CAACzI,oBAAoB,EAAE;MAAE,CAAC,CAAC;IACpD,CAAC,CAAC;EACJ;EAEQkK,eAAeA,CAACL,YAAoB,EAAEG,SAAkB;IAC9D,IAAI3O,IAAY;IAChB,IAAIgP,QAAiB;IAErB,IAAIL,SAAS,EAAE;MACb3O,IAAI,GAAGwO,YAAY;MACnBQ,QAAQ,GAAG,KAAK;KACjB,MAAM;MACL,MAAM4C,OAAO,GAAGpD,YAAY,CAAC/H,IAAI,EAAE;MACnCuI,QAAQ,GAAG4C,OAAO,CAACC,QAAQ,CAAC,GAAG,CAAC;MAChC7R,IAAI,GAAG,CAACgP,QAAQ,GAAG4C,OAAO,GAAGA,OAAO,CAACE,SAAS,CAAC,CAAC,EAAEF,OAAO,CAACnQ,MAAM,GAAG,CAAC,CAAC;;IAGvE,MAAMqN,YAAY,GAAiB;MACjC9O,IAAI;MACJgP;KACD;IACD,OAAOF,YAAY;EACrB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjZmG;AACe;AACzB;AACC;AACvB;AACM;AACD;AACU;AACX;AAE/B;AACe;AACE;AACF;AACS;AACX;AACI;AACqC;AACY;;;;;;;;;;;;;;;;;;ICDlGpa,4DAAA,qBAAgB;IACdA,oDAAA,qEACF;IAAAA,0DAAA,EAAiB;;;;;IAGjBA,4DAAA,yBAAiC;IAC/BA,oDAAA,+BACF;IAAAA,0DAAA,EAAiB;;;IAFDA,wDAAA,iBAAgB;;;;;IAThCA,4DADF,yBAA0D,gBAC7C;IAAAA,oDAAA,YAAK;IAAAA,0DAAA,EAAY;IAC5BA,uDAAA,gBAA6D;IAC/DA,0DAAA,EAAiB;IAMjBA,wDALA,IAAAoe,0DAAA,yBAAyC,IAAAC,0DAAA,6BAKwB;;;;IALjEre,uDAAA,GAIC;IAJDA,2DAAA,IAAAse,MAAA,CAAA1D,QAAA,KAAA0D,MAAA,CAAAC,oBAAA,UAIC;IACDve,uDAAA,EAIC;IAJDA,2DAAA,IAAAse,MAAA,CAAAE,QAAA,CAAA9I,KAAA,CAAA+I,OAAA,KAAAH,MAAA,CAAAE,QAAA,CAAA9I,KAAA,CAAAgJ,MAAA,kBAAAJ,MAAA,CAAAE,QAAA,CAAA9I,KAAA,CAAAgJ,MAAA,CAAApE,QAAA,WAIC;;;;;IAWOta,4DAAA,qBAAwC;IACtCA,oDAAA,GACF;IAAAA,0DAAA,EAAa;;;;IAFDA,wDAAA,UAAA2e,cAAA,CAAAlZ,KAAA,CAA2B;IACrCzF,uDAAA,EACF;IADEA,gEAAA,MAAA2e,cAAA,CAAArT,IAAA,MACF;;;;;IALJtL,4DADF,yBAA0D,gBAC7C;IAAAA,oDAAA,YAAK;IAAAA,0DAAA,EAAY;IAC5BA,4DAAA,qBAAiG;IAC/FA,8DAAA,IAAA4e,iEAAA,0BAAA5e,uEAAA,CAIC;IAELA,0DADE,EAAa,EACE;IACjBA,4DAAA,qBAAgB;IACdA,oDAAA,mDACA;IAAAA,4DAAA,YAAkF;IAAAA,oDAAA,eAAQ;IAC5FA,0DAD4F,EAAI,EAC/E;;;;IAXqBA,uDAAA,GAA4D;IAA5DA,wDAAA,iBAAAse,MAAA,CAAAO,YAAA,CAAA9R,MAAA,yBAA4D;IAC9F/M,uDAAA,EAIC;IAJDA,wDAAA,CAAAse,MAAA,CAAAO,YAAA,CAIC;;;;;IAeC7e,4DAAA,qBAAkC;IAChCA,oDAAA,GACF;IAAAA,0DAAA,EAAa;;;;IAFDA,wDAAA,UAAA8e,cAAA,CAAqB;IAC/B9e,uDAAA,EACF;IADEA,gEAAA,MAAA8e,cAAA,MACF;;;;;IALJ9e,4DAAA,qBAC+D;IAC7DA,8DAAA,IAAA+e,iEAAA,0BAAA/e,uEAAA,CAIC;IACHA,0DAAA,EAAa;;;;IANXA,wDAAA,iBAAAse,MAAA,CAAAU,YAAA,CAAAjS,MAAA,yBAA4D;IAC5D/M,uDAAA,EAIC;IAJDA,wDAAA,CAAAse,MAAA,CAAAU,YAAA,CAIC;;;;;IAIHhf,uDAAA,gBAA6D;;;;;IAc/DA,4DAAA,yBAAiC;IAC/BA,oDAAA,+BACF;IAAAA,0DAAA,EAAiB;;;IAFDA,wDAAA,iBAAgB;;;;;;IA5ClCA,wDAAA,IAAAif,2DAAA,QAAmC;IAkBjCjf,4DADF,yBAA0D,gBAC7C;IAAAA,oDAAA,YAAK;IAAAA,0DAAA,EAAY;IAW5BA,wDAVA,IAAAkf,2DAAA,yBAAmB,IAAAC,2DAAA,oBAUC;IAIlBnf,4DADF,cAAgD,iBAEV;IAAlCA,wDAAA,mBAAAof,sEAAA;MAAApf,2DAAA,CAAAwK,GAAA;MAAA,MAAA8T,MAAA,GAAAte,2DAAA;MAAA,OAAAA,yDAAA,CAASse,MAAA,CAAAe,iBAAA,CAAkB,IAAI,CAAC;IAAA,EAAC;IACjCrf,4DAAA,mBAA2B;IAAAA,oDAAA,aAAM;IACnCA,0DADmC,EAAW,EACrC;IACTA,4DAAA,kBACqC;IAAnCA,wDAAA,mBAAAsf,uEAAA;MAAAtf,2DAAA,CAAAwK,GAAA;MAAA,MAAA8T,MAAA,GAAAte,2DAAA;MAAA,OAAAA,yDAAA,CAASse,MAAA,CAAAe,iBAAA,CAAkB,KAAK,CAAC;IAAA,EAAC;IAClCrf,4DAAA,oBAA2B;IAAAA,oDAAA,mBAAW;IAG5CA,0DAH4C,EAAW,EAC1C,EACL,EACS;IACjBA,wDAAA,KAAAuf,4DAAA,6BAAiE;;;;IA3CjEvf,2DAAA,IAAAse,MAAA,CAAAkB,YAAA,IAAAlB,MAAA,CAAAmB,WAAA,UAeC;IAICzf,uDAAA,GASC;IATDA,2DAAA,IAAAse,MAAA,CAAAmB,WAAA,UASC;IACDzf,uDAAA,EAEC;IAFDA,2DAAA,KAAAse,MAAA,CAAAmB,WAAA,UAEC;IAE2Ezf,uDAAA,GAAqC;IAArCA,wDAAA,YAAAA,6DAAA,IAAAwB,GAAA,EAAA8c,MAAA,CAAAmB,WAAA,EAAqC;IAIrCzf,uDAAA,GAAsC;IAAtCA,wDAAA,YAAAA,6DAAA,IAAAwB,GAAA,GAAA8c,MAAA,CAAAmB,WAAA,EAAsC;IAMpHzf,uDAAA,GAIC;IAJDA,2DAAA,KAAAse,MAAA,CAAAE,QAAA,CAAA9I,KAAA,CAAA+I,OAAA,KAAAH,MAAA,CAAAE,QAAA,CAAA9I,KAAA,CAAAgJ,MAAA,kBAAAJ,MAAA,CAAAE,QAAA,CAAA9I,KAAA,CAAAgJ,MAAA,CAAApE,QAAA,YAIC;;;;;;IAQDta,4DAAA,2BAAgG;IAAtCA,wDAAA,oBAAA0f,iFAAAlc,MAAA;MAAAxD,2DAAA,CAAAwE,GAAA;MAAA,MAAA8Z,MAAA,GAAAte,2DAAA;MAAA,OAAAA,yDAAA,CAAUse,MAAA,CAAAqB,kBAAA,CAAAnc,MAAA,CAA0B;IAAA,EAAC;IAC7FxD,oDAAA,GACF;IAAAA,0DAAA,EAAmB;;;;IAFcA,wDAAA,YAAAse,MAAA,CAAAkB,YAAA,CAAwB;IACvDxf,uDAAA,EACF;IADEA,gEAAA,MAAAse,MAAA,CAAAkB,YAAA,8BACF;;;AD/CF,MAAOpM,qBAAsB,SAAQtJ,4EAAa;EAYtDlJ,YACmCgf,UAAkC,EAC3DnL,SAA8C,EAC9C9N,kBAAsC,EACtCkZ,mBAAwC,EACxC/R,iBAAoC;IAE5C,KAAK,EAAE;IAN0B,KAAA8R,UAAU,GAAVA,UAAU;IACnC,KAAAnL,SAAS,GAATA,SAAS;IACT,KAAA9N,kBAAkB,GAAlBA,kBAAkB;IAClB,KAAAkZ,mBAAmB,GAAnBA,mBAAmB;IACnB,KAAA/R,iBAAiB,GAAjBA,iBAAiB;IAhBD,KAAAgS,SAAS,GAAG,kBAAkB;IAIxD,KAAAlF,QAAQ,GAAG,IAAI,CAACgF,UAAU,CAAChF,QAAQ;IACnC,KAAA2D,oBAAoB,GAAG,IAAI,CAAC5X,kBAAkB,CAACoZ,cAAc,IAAI,IAAI;IACrE,KAAAlB,YAAY,GAAkB,EAAE;IAChC,KAAAG,YAAY,GAAa,EAAE;IAC3B,KAAAS,WAAW,GAAG,IAAI;IAClB,KAAAD,YAAY,GAAG,KAAK;EAUpB;EAEAvY,QAAQA,CAAA;IACN,IAAI,CAAC+Y,SAAS,EAAE;EAClB;EAEAzY,WAAWA,CAAA;IACT,KAAK,CAACA,WAAW,EAAE;EACrB;EAEA0Y,WAAWA,CAACvK,KAAc;IACxB,IAAI,CAACjB,SAAS,CAACC,KAAK,CAACgB,KAAK,CAAC;EAC7B;EAEA2J,iBAAiBA,CAACI,WAAoB;IACpC,IAAI,CAACA,WAAW,GAAGA,WAAW;EAChC;EAEAE,kBAAkBA,CAACxc,KAA2B;IAC5C,IAAI,CAACqc,YAAY,GAAGrc,KAAK,CAACsE,OAAO;EACnC;EAEAyY,MAAMA,CAAA;IACJ,MAAMC,SAAS,GAAgC,IAAI,CAACC,IAAI,CAACC,WAAW,EAAE;IACtE,IAAI,CAACJ,WAAW,CAACE,SAAS,CAACzK,KAAK,CAAC;EACnC;EAEQsK,SAASA,CAAA;IACf,IAAI,CAACI,IAAI,GAAG,IAAI9C,4DAAgB,CAAC;MAC/B5H,KAAK,EAAE,IAAI2H,8DAAkB,CAAC,IAAI,CAACuC,UAAU,CAAClK,KAAK,EAAE6H,sDAAU,CAACjD,QAAQ,CAAC;MACzEgG,KAAK,EAAE,IAAIjD,8DAAkB,CAACtZ,yEAAY,CAACwc,MAAM,CAACvZ,OAAO,CAACvB,KAAK;KAChE,CAAC;IACF,IAAI,CAAC+Y,QAAQ,GAAG,IAAI,CAAC4B,IAAI,CAAC5B,QAAe;IAEzC,IAAI,CAAC,IAAI,CAAC5D,QAAQ,IAAI,CAAC,IAAI,CAAC2D,oBAAoB,EAAE;MAAE;;IAEpD,IAAI,CAACnQ,aAAa,CAACC,GAAG,CACpB,IAAI,CAACmQ,QAAQ,CAAC8B,KAAK,CAACE,YAAY,CAACpZ,IAAI,CACnCyW,+CAAS,CAAS,IAAI,CAACW,QAAQ,CAAC8B,KAAK,CAAC7a,KAAK,CAAC,EAC5CoE,0DAAoB,EAAE,CACvB,CAAC0E,SAAS,CAAC+R,KAAK,IAAG;MAClB,IAAI,CAACtB,YAAY,GAAGvH,MAAM,CAACgJ,MAAM,CAAC,IAAI,CAAC9Z,kBAAkB,CAACoZ,cAAc,CAACW,OAAO,CAAC,CAC9ExP,IAAI,CAACyP,MAAM,IAAIA,MAAM,CAACC,IAAI,KAAK,IAAI,CAAChB,UAAU,CAAClP,sBAAsB,CAAC,CAAC6E,GAAG,CAC1EzM,MAAM,CAAC+X,GAAG,IAAIA,GAAG,CAACC,KAAK,KAAKR,KAAK,CAAC,CAClCxc,GAAG,CAAC+c,GAAG,IAAIA,GAAG,CAAC9b,IAAI,CAAC;MACvB,IAAI,CAAC,IAAI,CAACia,YAAY,CAAC7Y,QAAQ,CAAC,IAAI,CAACqY,QAAQ,CAAC9I,KAAK,CAACjQ,KAAK,CAAC,IAAI,IAAI,CAAC+Y,QAAQ,CAAC9I,KAAK,CAACjQ,KAAK,IAAI,IAAI,EAAE;QAC/F,IAAI,CAAC+Y,QAAQ,CAAC9I,KAAK,CAACqL,UAAU,CAAC,IAAI,CAAC;;IAExC,CAAC,CAAC,CACH;IAED,IAAI,CAAClB,mBAAmB,CAACmB,SAAS,EAAE,CAACzS,SAAS,CAACgS,MAAM,IAAG;MACtD,MAAMU,SAAS,GAAGxJ,MAAM,CAACgJ,MAAM,CAAC,IAAI,CAAC9Z,kBAAkB,CAACoZ,cAAc,CAACW,OAAO,CAAC,CAC5ExP,IAAI,CAACyP,MAAM,IAAIA,MAAM,CAACC,IAAI,KAAK,IAAI,CAAChB,UAAU,CAAClP,sBAAsB,CAAC,CAAC6E,GAAG;MAC7E,MAAM1M,QAAQ,GAAG0X,MAAM,CAACzX,MAAM,CAACoY,CAAC,IAAID,SAAS,CAAC/G,IAAI,CAACiH,CAAC,IAAIA,CAAC,CAACL,KAAK,KAAKI,CAAC,CAACzb,KAAK,CAAC,CAAC;MAC7E,IAAI,CAACoZ,YAAY,GAAGhW,QAAQ;MAC5B,IAAI,CAACiF,iBAAiB,CAACmO,YAAY,EAAE;IACvC,CAAC,CAAC;EACJ;EAAC,QAAAjb,CAAA;qBA9EUoS,qBAAqB,EAAApT,+DAAA,CAatB2d,sEAAe,GAAA3d,+DAAA,CAAA6C,mEAAA,GAAA7C,+DAAA,CAAAsI,8EAAA,GAAAtI,+DAAA,CAAAwI,6EAAA,GAAAxI,+DAAA,CAAAA,4DAAA;EAAA;EAAA,QAAAiB,EAAA;UAbdmS,qBAAqB;IAAAlS,SAAA;IAAAkgB,QAAA;IAAA/d,YAAA,WAAAge,mCAAAvf,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QAArB9B,4DAAA,cAAA+B,GAAA,CAAA+d,SAAA,CAAqB;;;;;;;;;;QCvC9B9f,4DAFJ,aAAwB,aACS,aACS;QAAAA,oDAAA,oBAAa;QAAAA,0DAAA,EAAM;QACzDA,4DAAA,gBAAqE;QAAxBA,wDAAA,mBAAAuhB,uDAAA;UAAA,OAASxf,GAAA,CAAAke,WAAA,EAAa;QAAA,EAAC;QAClEjgB,4DAAA,eAAU;QAAAA,oDAAA,YAAK;QAEnBA,0DAFmB,EAAW,EACnB,EACL;QAEJA,4DADF,aAAgC,cACL;QAqBvBA,wDAnBA,IAAAwhB,4CAAA,OAA0C,KAAAC,6CAAA,SAmBF;QAoD5CzhB,0DADE,EAAO,EACH;QAGJA,4DAFF,6BAA+C,WAExC;QACHA,wDAAA,KAAA0hB,6CAAA,8BAAwC;QAK1C1hB,0DAAA,EAAM;QAEJA,4DADF,WAAK,iBAC6D;QAAxBA,wDAAA,mBAAA2hB,wDAAA;UAAA,OAAS5f,GAAA,CAAAke,WAAA,EAAa;QAAA,EAAC;QAACjgB,oDAAA,cAAM;QAAAA,0DAAA,EAAS;QAC/EA,4DAAA,iBAAmG;QAAnBA,wDAAA,mBAAA4hB,wDAAA;UAAA,OAAS7f,GAAA,CAAAme,MAAA,EAAQ;QAAA,EAAC;QAChGlgB,oDAAA,gBACF;QAGNA,0DAHM,EAAS,EACL,EACa,EACjB;;;QA1FIA,uDAAA,GAAkB;QAAlBA,wDAAA,cAAA+B,GAAA,CAAAqe,IAAA,CAAkB;QAEtBpgB,uDAAA,EAgBC;QAhBDA,2DAAA,KAAA+B,GAAA,CAAA6Y,QAAA,KAAA7Y,GAAA,CAAAwc,oBAAA,UAgBC;QAGDve,uDAAA,EAkDC;QAlDDA,2DAAA,KAAA+B,GAAA,CAAA6Y,QAAA,IAAA7Y,GAAA,CAAAwc,oBAAA,WAkDC;QAMDve,uDAAA,GAIC;QAJDA,2DAAA,KAAA+B,GAAA,CAAA6Y,QAAA,IAAA7Y,GAAA,CAAAwc,oBAAA,WAIC;QAIsDve,uDAAA,GAAwB;QAAxBA,wDAAA,cAAA+B,GAAA,CAAAqe,IAAA,CAAAyB,KAAA,CAAwB;;;mBDnEjF3D,sEAAe,EAAA5L,gEAAA,EAAAA,oEAAA,EACfnO,kEAAa,EAAA6d,4DAAA,EACbxE,uDAAW,EAAAyE,4DAAA,EAAAA,gEAAA,EAAAA,2DAAA,EAAAA,gEAAA,EAAAA,6DAAA,EACXxE,+DAAmB,EAAAwE,8DAAA,EAAAA,2DAAA,EACnBliB,6EAAkB,EAAA0iB,uEAAA,EAAAA,mEAAA,EAAAA,oEAAA,EAClBxE,oEAAc,EAAA4E,8DAAA,EACd7E,sEAAe,EAAA+E,gEAAA,EAAAE,8DAAA,EACflF,oEAAe,EACfle,qDAAO,EACP+d,uEAAgB,EAChBja,iFAAoB,EAAAwf,2EAAA,EACpBxiB,kGAAkB,EAClBwd,8GAA6B;IAAAnb,MAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;AErCwC;AAEH;AAEb;AACF;AACA;AACI;;;;;;;;;ICHnDhD,oDAAA,GACF;;;;IADEA,gEAAA,oBAAAse,MAAA,CAAAxN,WAAA,CAAAxF,IAAA,sBAAAgT,MAAA,CAAAxN,WAAA,CAAAyS,UAAA,QACF;;;;;IAcIvjB,4DADF,cAA4D,WACpD;IAAAA,oDAAA,cAAO;IACfA,0DADe,EAAO,EAChB;;;;;IAIFA,oDAAA,4BACF;;;;;IAEEA,oDAAA,GACF;;;;IADEA,gEAAA,kBAAAse,MAAA,CAAAkF,GAAA,cACF;;;;;IAKMxjB,oDAAA,YACF;;;;;IAEEA,oDAAA,GACF;;;;IADEA,gEAAA,MAAAyjB,SAAA,MACF;;;;;;IAPFzjB,4DAAA,iBAA0C;IAAvBA,wDAAA,mBAAA0jB,6DAAA;MAAA,MAAAD,SAAA,GAAAzjB,2DAAA,CAAAwK,GAAA,EAAA/F,SAAA;MAAA,MAAA6Z,MAAA,GAAAte,2DAAA;MAAA,OAAAA,yDAAA,CAASse,MAAA,CAAAqF,IAAA,CAAAF,SAAA,CAAY;IAAA,EAAC;IACvCzjB,oDAAA,aACA;IAGAA,wDAHA,IAAA4jB,kDAAA,OAAoB,IAAAC,kDAAA,OAGA;IAGtB7jB,0DAAA,EAAS;;;;IANPA,uDAAA,GAEC;IAFDA,2DAAA,IAAAyjB,SAAA,gBAEC;IACDzjB,uDAAA,EAEC;IAFDA,2DAAA,IAAAyjB,SAAA,gBAEC;;;;;IAUHzjB,4DADF,cAA+D,WACvD;IAAAA,oDAAA,iBAAU;IAClBA,0DADkB,EAAO,EACnB;;;;;IAIFA,4DAAA,SAAI;IAAAA,oDAAA,GAAW;IAAAA,0DAAA,EAAK;;;;IAAhBA,uDAAA,EAAW;IAAXA,+DAAA,CAAA8jB,QAAA,CAAW;;;;;IAPrB9jB,4DAAA,cAAS;IACPA,wDAAA,IAAA+jB,kDAAA,kBAA+D;IAG/D/jB,uDAAA,SAAM;IACNA,4DAAA,SAAI;IACFA,8DAAA,IAAAgkB,kDAAA,oBAAAhkB,uEAAA,CAEC;IAELA,0DADE,EAAK,EACG;;;;IAJNA,uDAAA,GAEC;IAFDA,wDAAA,CAAAse,MAAA,CAAA2F,UAAA,CAEC;;;;;IAOHjkB,4DADF,cAA4D,WACpD;IAAAA,oDAAA,cAAO;IACfA,0DADe,EAAO,EAChB;;;;;IAcIA,4DAAA,UAAK;IAAAA,oDAAA,GAAmC;IAAAA,0DAAA,EAAM;;;;IAAzCA,uDAAA,EAAmC;IAAnCA,+DAAA,CAAAkkB,SAAA,CAAAze,KAAA,CAAA0e,UAAA,kBAAAD,SAAA,CAAAze,KAAA,CAAA0e,UAAA,CAAApf,IAAA,CAAmC;;;;;IASpC/E,4DADF,SAAI,QACC;IAAAA,oDAAA,GAAgB;IAAAA,0DAAA,EAAI;IAAAA,oDAAA,QAAC;IAAAA,4DAAA,SAAI;IAAAA,oDAAA,GAAkB;IAChDA,0DADgD,EAAK,EAChD;;;;IADAA,uDAAA,GAAgB;IAAhBA,+DAAA,CAAAokB,SAAA,CAAAve,GAAA,CAAgB;IAAS7F,uDAAA,GAAkB;IAAlBA,+DAAA,CAAAokB,SAAA,CAAA3e,KAAA,CAAkB;;;;;IAXtDzF,4DADF,SAAI,SACE;IACFA,wDAAA,IAAAqkB,kDAAA,cAAqC;IAGrCrkB,4DAAA,UAAK;IAAAA,oDAAA,GAAuB;IAC9BA,0DAD8B,EAAM,EAC/B;IACLA,4DAAA,SAAI;IAAAA,oDAAA,GAAuB;IAAAA,0DAAA,EAAK;IAE9BA,4DADF,SAAI,SACE;IACFA,8DAAA,IAAAskB,2CAAA,oBAAAtkB,uEAAA,CAIC;;IAELA,0DADE,EAAK,EACF;IACLA,4DAAA,UAAI;IAAAA,oDAAA,IAAwB;IAC9BA,0DAD8B,EAAK,EAC9B;;;;IAhBDA,uDAAA,GAEC;IAFDA,2DAAA,KAAAkkB,SAAA,CAAAze,KAAA,CAAA0e,UAAA,kBAAAD,SAAA,CAAAze,KAAA,CAAA0e,UAAA,CAAApf,IAAA,WAEC;IACI/E,uDAAA,GAAuB;IAAvBA,+DAAA,CAAAkkB,SAAA,CAAAze,KAAA,CAAAmb,IAAA,CAAuB;IAE1B5gB,uDAAA,GAAuB;IAAvBA,+DAAA,CAAAkkB,SAAA,CAAAze,KAAA,CAAA8e,IAAA,CAAuB;IAGvBvkB,uDAAA,GAIC;IAJDA,wDAAA,CAAAA,yDAAA,QAAAkkB,SAAA,CAAAze,KAAA,CAAA+e,aAAA,EAIC;IAGDxkB,uDAAA,GAAwB;IAAxBA,+DAAA,CAAAkkB,SAAA,CAAAze,KAAA,CAAAsR,KAAA,CAAwB;;;;;IAQhC/W,4DADF,cAA4D,WACpD;IAAAA,oDAAA,cAAO;IACfA,0DADe,EAAO,EAChB;;;;;IAaEA,4DAFJ,SAAI,SACE,UACG;IAAAA,oDAAA,GAA4C;IACnDA,0DADmD,EAAM,EACpD;IAEHA,4DADF,SAAI,UACG;IAAAA,oDAAA,GAA2C;IAClDA,0DADkD,EAAM,EACnD;IACLA,4DAAA,SAAI;IAAAA,oDAAA,GAAkB;IAAAA,0DAAA,EAAK;IAC3BA,4DAAA,SAAI;IAAAA,oDAAA,IAAkB;IACxBA,0DADwB,EAAK,EACxB;;;;IAPIA,uDAAA,GAA4C;IAA5CA,+DAAA,CAAAykB,SAAA,CAAA1R,MAAA,SAAA0R,SAAA,CAAAhO,SAAA,CAA4C;IAG5CzW,uDAAA,GAA2C;IAA3CA,+DAAA,CAAAykB,SAAA,CAAAzR,MAAA,SAAAyR,SAAA,CAAA9N,QAAA,CAA2C;IAE9C3W,uDAAA,GAAkB;IAAlBA,+DAAA,CAAAykB,SAAA,CAAAzN,KAAA,CAAkB;IAClBhX,uDAAA,GAAkB;IAAlBA,+DAAA,CAAAykB,SAAA,CAAA1N,KAAA,CAAkB;;;AD/F9B,MAAO2N,oBAAoB;EAW/B9jB,YACmCgf,UAAiC,EAC1DnL,SAA6C,EAC7C9N,kBAAsC;IAFb,KAAAiZ,UAAU,GAAVA,UAAU;IACnC,KAAAnL,SAAS,GAATA,SAAS;IACT,KAAA9N,kBAAkB,GAAlBA,kBAAkB;EACxB;EAEJM,QAAQA,CAAA;IACN,MAAM0d,QAAQ,GAAG,IAAI,CAAChe,kBAAkB,CAACiI,cAAc,CAACnJ,KAAK,CAACsJ,QAAQ;IACtE,MAAM2L,MAAM,GAAG,CAACiK,QAAQ,CAACC,MAAM,EAAEC,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE/b,MAAM,CAACyP,EAAE,IAAI,CAAC,CAACA,EAAE,CAAC;IACtE,MAAMuM,UAAU,GAAG,CAACH,QAAQ,CAACI,cAAc,EAAEF,KAAK,CAAC,IAAI,CAAC,IAAI,EAAE,EAAE/b,MAAM,CAACyP,EAAE,IAAI,CAAC,CAACA,EAAE,CAAC;IAClF,IAAI,CAAC0L,UAAU,GAAG,EAAE,CAACe,MAAM,CAACtK,MAAM,EAAEoK,UAAU,CAAC;IAC/C,IAAI,CAACG,QAAQ,GAAG,IAAI,CAACrF,UAAU,CAACpR,MAAM,CAAC0W,UAAU,CAACC,YAAY;IAC9D,IAAI,CAACC,SAAS,GAAG,IAAI,CAACxF,UAAU,CAACpR,MAAM,CAAC0W,UAAU,CAACG,KAAK;IACxD,IAAI,CAAC7B,GAAG,GAAG,IAAI,CAAC5D,UAAU,CAAC4D,GAAG;IAC9B,IAAI,CAAC8B,aAAa,GAAG,CAAC,EAAE,EAAE,GAAG,EAAE,IAAI,EAAE,CAAC,CAAC;IACvC,IAAI,CAAC9W,MAAM,GAAG,IAAI,CAACoR,UAAU,CAACpR,MAAM,CAAC+W,KAAK;IAC1C,IAAI,CAACzU,WAAW,GAAG,IAAI,CAAC8O,UAAU,CAAC9O,WAAW;IAC9C,IAAI,CAAC0U,OAAO,GAAG,IAAI,CAAC5F,UAAU,CAACpR,MAAM,CAACkS,OAAO;IAC7C,IAAI,CAAC+E,OAAO,GAAG,IAAI,CAAC7F,UAAU,CAACpR,MAAM,CAAC2H,OAAO;EAC/C;EAEA8J,WAAWA,CAAA;IACT,IAAI,CAACxL,SAAS,CAACC,KAAK,EAAE;EACxB;EAEAiP,IAAIA,CAACH,GAAW;IACd,IAAIA,GAAG,KAAK,IAAI,CAACA,GAAG,EAAE;MAAE;;IAExB,IAAI,IAAI,CAAC1S,WAAW,EAAE;MACpB,IAAI,CAACnK,kBAAkB,CAACmK,WAAW,CAAC,IAAI,CAACA,WAAW,CAAC4U,QAAQ,EAAElC,GAAG,CAAC;KACpE,MAAM;MACL,IAAI,CAAC7c,kBAAkB,CAACgf,WAAW,CAACnC,GAAG,CAAC;;IAG1C,IAAI,CAACvD,WAAW,EAAE;EACpB;EAAC,QAAAjf,CAAA;qBA9CU0jB,oBAAoB,EAAA1kB,+DAAA,CAYrB2d,qEAAe,GAAA3d,+DAAA,CAAA6C,kEAAA,GAAA7C,+DAAA,CAAAsI,8EAAA;EAAA;EAAA,QAAArH,EAAA;UAZdyjB,oBAAoB;IAAAxjB,SAAA;IAAAE,UAAA;IAAAC,QAAA,GAAArB,iEAAA;IAAAyB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAgkB,8BAAA9jB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCrB7B9B,4DAFJ,aAAwB,aACS,aACS;QACpCA,oDAAA,sBACA;QAAAA,wDAAA,IAAA6lB,2CAAA,OAAmB;QAGrB7lB,0DAAA,EAAM;QACNA,4DAAA,gBAAqE;QAAxBA,wDAAA,mBAAA8lB,sDAAA;UAAA,OAAS/jB,GAAA,CAAAke,WAAA,EAAa;QAAA,EAAC;QAClEjgB,4DAAA,eAAU;QAAAA,oDAAA,YAAK;QAEnBA,0DAFmB,EAAW,EACnB,EACL;QAEJA,4DADF,aAAgC,QAC3B;QACDA,oDAAA,IAEF;QAAAA,0DAAA,EAAI;QAEFA,4DADF,wBAAkE,eACvD;QACPA,wDAAA,KAAA+lB,oCAAA,iBAA4D;QAI5D/lB,4DAAA,YAA+B;QAI7BA,wDAHA,KAAAgmB,4CAAA,OAAiB,KAAAC,4CAAA,OAGA;QAGjBjmB,8DAAA,KAAAkmB,oCAAA,qBAAAlmB,uEAAA,CAUC;QACHA,0DAAA,EAAI;QACJA,4DAAA,WAAK;QAAAA,oDAAA,IAAmB;;QAC1BA,0DAD0B,EAAM,EACtB;QAEVA,wDAAA,KAAAmmB,4CAAA,kBAA0B;QAc1BnmB,4DAAA,eAAS;QACPA,wDAAA,KAAAomB,oCAAA,iBAA4D;QAI5DpmB,uDAAA,UAAM;QAGFA,4DAFJ,aAAO,UACD,UACE;QAAAA,oDAAA,qBAAa;QAAAA,0DAAA,EAAK;QACtBA,4DAAA,UAAI;QAAAA,oDAAA,YAAI;QAAAA,0DAAA,EAAK;QACbA,4DAAA,UAAI;QAAAA,oDAAA,qBAAa;QAAAA,0DAAA,EAAK;QACtBA,4DAAA,UAAI;QAAAA,oDAAA,aAAK;QACXA,0DADW,EAAK,EACX;QACLA,8DAAA,KAAAqmB,oCAAA,qBAAArmB,uEAAA,CAoBC;;QAELA,0DADE,EAAQ,EACA;QAEVA,4DAAA,eAAS;QACPA,wDAAA,KAAAsmB,oCAAA,kBAA4D;QAI5DtmB,uDAAA,UAAM;QAGFA,4DAFJ,aAAO,UACD,UACE;QAAAA,oDAAA,cAAM;QAAAA,0DAAA,EAAK;QACfA,4DAAA,UAAI;QAAAA,oDAAA,cAAM;QAAAA,0DAAA,EAAK;QACfA,4DAAA,UAAI;QAAAA,oDAAA,aAAK;QAAAA,0DAAA,EAAK;QACdA,4DAAA,UAAI;QAAAA,oDAAA,aAAK;QACXA,0DADW,EAAK,EACX;QACLA,8DAAA,KAAAumB,oCAAA,qBAAAvmB,uEAAA,CAWC;QAKXA,0DAJQ,EAAQ,EACA,EACI,EACZ,EACF;;;QAzHAA,uDAAA,GAEC;QAFDA,2DAAA,IAAA+B,GAAA,CAAA+O,WAAA,UAEC;QAQD9Q,uDAAA,GAEF;QAFEA,gEAAA,gHAAA+B,GAAA,CAAAkjB,QAAA,UAAAljB,GAAA,CAAAqjB,SAAA,aAEF;QAQMplB,uDAAA,GAEC;QAFDA,2DAAA,KAAA+B,GAAA,CAAAyhB,GAAA,iBAEC;QACDxjB,uDAAA,EAEC;QAFDA,2DAAA,KAAA+B,GAAA,CAAAyhB,GAAA,iBAEC;QACDxjB,uDAAA,EAUC;QAVDA,wDAAA,CAAA+B,GAAA,CAAAujB,aAAA,CAUC;QAEEtlB,uDAAA,GAAmB;QAAnBA,+DAAA,CAAAA,yDAAA,QAAA+B,GAAA,CAAAyM,MAAA,EAAmB;QAG1BxO,uDAAA,GAYC;QAZDA,2DAAA,MAAA+B,GAAA,CAAAkiB,UAAA,kBAAAliB,GAAA,CAAAkiB,UAAA,CAAAlX,MAAA,YAYC;QAeG/M,uDAAA,IAoBC;QApBDA,wDAAA,CAAAA,yDAAA,QAAA+B,GAAA,CAAAyjB,OAAA,EAoBC;QAiBDxlB,uDAAA,IAWC;QAXDA,wDAAA,CAAA+B,GAAA,CAAA0jB,OAAA,CAWC;;;mBDxGPvH,qEAAe,EAAA1V,+DAAA,EAAAA,mEAAA,EACfrE,iEAAa,EAAAmO,2DAAA,EACb+Q,iEAAa,EAAArB,+DAAA,EAAAA,0DAAA,EAAAA,+DAAA,EACboB,qDAAQ,EACR1f,yDAAY;IAAAV,MAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AEnB4E;AACnC;AAClB;AACM;AACW;AAEc;AACX;AACf;AACW;AACI;AACK;;;;;;;;;;ICiBlDhD,4DAAA,SAAI;IACFA,oDAAA,GACF;IAAAA,0DAAA,EAAK;;;;IADHA,uDAAA,EACF;IADEA,gEAAA,MAAAgnB,QAAA,MACF;;;;;IAJJhnB,4DAAA,YAAmB;IACjBA,8DAAA,IAAAinB,gEAAA,oBAAAjnB,uEAAA,CAIC;IACHA,0DAAA,EAAK;;;;IALHA,uDAAA,EAIC;IAJDA,wDAAA,CAAAknB,gBAAA,CAAAnY,QAAA,CAAA6V,MAAA,kBAAAsC,gBAAA,CAAAnY,QAAA,CAAA6V,MAAA,CAAAC,KAAA,CAAqC,IAAI,EAIxC;;;;;IASC7kB,4DAAA,SAAI;IACFA,oDAAA,GACF;IAAAA,0DAAA,EAAK;;;;IADHA,uDAAA,EACF;IADEA,gEAAA,MAAAmnB,QAAA,MACF;;;;;IAJJnnB,4DAAA,YAAmB;IACjBA,8DAAA,IAAAonB,gEAAA,oBAAApnB,uEAAA,CAIC;IACHA,0DAAA,EAAK;;;;IALHA,uDAAA,EAIC;IAJDA,wDAAA,CAAAknB,gBAAA,CAAAnY,QAAA,CAAAgW,cAAA,kBAAAmC,gBAAA,CAAAnY,QAAA,CAAAgW,cAAA,CAAAF,KAAA,CAA6C,IAAI,EAIhD;;;;;;IAMH7kB,4DADF,aAAwB,eACe;IAAAA,oDAAA,6BAAsB;IAAAA,0DAAA,EAAO;IAClEA,4DAAA,2BAC4C;IAA1CA,wDAAA,oBAAAqnB,8FAAA7jB,MAAA;MAAAxD,2DAAA,CAAAsnB,GAAA;MAAA,MAAA5iB,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAU0E,MAAA,CAAAoI,qBAAA,CAAAtJ,MAAA,CAA6B;IAAA,EAAC;IAC1CxD,0DAFA,EAC4C,EACtC;;;IAF4BA,uDAAA,GAAoD;IAApDA,wDAAA,YAAA+B,GAAA,CAAAwN,qBAAA,CAAoD;;;;;IAahFvP,uDAAA,aACK;;;;IADDA,wDAAA,cAAAunB,UAAA,EAAAvnB,4DAAA,CAAqB;;;;;IAL3BA,4DAFJ,cAAsB,aACD,WACX;IAAAA,oDAAA,eAAQ;IAAAA,0DAAA,EAAO;IACrBA,4DAAA,mBAA6B;IAAAA,oDAAA,cAAO;IACtCA,0DADsC,EAAW,EAC3C;IACNA,4DAAA,YAAmB;IACjBA,8DAAA,IAAAynB,8EAAA,kBAAAznB,uEAAA,CAGC;IAELA,0DADE,EAAK,EACD;;;;IALFA,uDAAA,GAGC;IAHDA,wDAAA,CAAA0nB,WAAA,CAGC;;;;;IAVP1nB,wDAAA,IAAA2nB,wEAAA,kBAAuB;;;IAAvB3nB,2DAAA,IAAA+B,GAAA,CAAAgL,MAAA,UAaC;;;;;IAIC/M,4DADF,cAAyB,aACJ;IAAAA,oDAAA,wBAAiB;IAAAA,0DAAA,EAAM;IAC1CA,4DAAA,UAAK;IAAAA,oDAAA,GAAwC;IAC/CA,0DAD+C,EAAM,EAC/C;;;;IADCA,uDAAA,GAAwC;IAAxCA,+DAAA,CAAAknB,gBAAA,CAAAnY,QAAA,CAAA5B,WAAA,CAAwC;;;;;;IAtE/CnN,4DAHN,aAAyD,aAClC,aACE,gBAC2E;IAAtCA,wDAAA,mBAAA4nB,oEAAA;MAAA5nB,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAmjB,eAAA,CAAgB,IAAI,EAAE,IAAI,CAAC;IAAA,EAAC;IAC3F7nB,oDAAA,qBACF;IAAAA,0DAAA,EAAS;IACTA,4DAAA,gBAAgF;IAAvCA,wDAAA,mBAAA8nB,oEAAA;MAAA9nB,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAmjB,eAAA,CAAgB,KAAK,EAAE,IAAI,CAAC;IAAA,EAAC;IAC7E7nB,oDAAA,YACF;IAAAA,0DAAA,EAAS;IACTA,4DAAA,gBAAgF;IAAvCA,wDAAA,mBAAA+nB,oEAAA;MAAA/nB,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAmjB,eAAA,CAAgB,IAAI,EAAE,KAAK,CAAC;IAAA,EAAC;IAC7E7nB,oDAAA,aACF;IACFA,0DADE,EAAS,EACL;IAGFA,4DAFJ,aAAwB,cACH,WACZ;IAAAA,oDAAA,wBAAgB;IAAAA,0DAAA,EAAM;IAEzBA,4DADF,WAAK,iBACsE;IAAzBA,wDAAA,mBAAAgoB,qEAAA;MAAAhoB,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAujB,YAAA,EAAc;IAAA,EAAC;IACtEjoB,4DAAA,gBAAU;IAAAA,oDAAA,YAAI;IAChBA,0DADgB,EAAW,EAClB;IACTA,4DAAA,iBAA6E;IAA3BA,wDAAA,mBAAAkoB,qEAAA;MAAAloB,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAyjB,cAAA,EAAgB;IAAA,EAAC;IAC1EnoB,4DAAA,gBAAU;IAAAA,oDAAA,YAAI;IAGpBA,0DAHoB,EAAW,EAClB,EACL,EACF;IACNA,wDAAA,KAAAooB,0DAAA,gBAA6C;IAS/CpoB,0DAAA,EAAM;IAEJA,4DADF,cAAwB,cACH;IAAAA,oDAAA,uBAAe;IAAAA,0DAAA,EAAM;IACxCA,wDAAA,KAAAqoB,0DAAA,gBAAqD;IASvDroB,0DAAA,EAAM;IACNA,wDAAA,KAAAsoB,0DAAA,iBAA0D;;IAO1DtoB,wDAAA,KAAAuoB,0DAAA,OAAwC;;IAgBxCvoB,wDAAA,KAAAwoB,0DAAA,kBAA0C;IAOxCxoB,4DADF,eAA4B,iBACuC;IAAxBA,wDAAA,mBAAAyoB,qEAAA;MAAAzoB,2DAAA,CAAAmC,GAAA;MAAA,MAAAuC,MAAA,GAAA1E,2DAAA;MAAA,OAAAA,yDAAA,CAAS0E,MAAA,CAAAgkB,WAAA,EAAa;IAAA,EAAC;IAC9D1oB,4DAAA,YAAM;IAAAA,oDAAA,8BAAsB;IAAAA,0DAAA,EAAO;IACnCA,4DAAA,gBAAU;IAAAA,oDAAA,kBAAU;IAI5BA,0DAJ4B,EAAW,EACxB,EACL,EACF,EACF;;;;;;;IA1DAA,uDAAA,IAQC;IARDA,2DAAA,MAAAknB,gBAAA,CAAAnY,QAAA,CAAA6V,MAAA,kBAAAsC,gBAAA,CAAAnY,QAAA,CAAA6V,MAAA,CAAA7X,MAAA,YAQC;IAID/M,uDAAA,GAQC;IARDA,2DAAA,MAAAknB,gBAAA,CAAAnY,QAAA,CAAAgW,cAAA,kBAAAmC,gBAAA,CAAAnY,QAAA,CAAAgW,cAAA,CAAAhY,MAAA,YAQC;IAEH/M,uDAAA,EAMG;IANHA,2DAAA,MAAA2oB,OAAA,GAAA3oB,yDAAA,QAAA0E,MAAA,CAAAkkB,mBAAA,cAAAD,OAAA,CAMG;IACH3oB,uDAAA,GAeC;IAfDA,2DAAA,MAAA6oB,OAAA,GAAA7oB,yDAAA,QAAA0E,MAAA,CAAAokB,SAAA,cAAAD,OAAA,CAeC;IACD7oB,uDAAA,GAKC;IALDA,2DAAA,KAAAknB,gBAAA,CAAAnY,QAAA,CAAA5B,WAAA,WAKC;;;ADlDD,MAAO4b,oBAAoB;EAK/BnoB,YACUooB,MAAc,EACdC,KAAqB,EACrBC,OAAgB,EAChBviB,kBAAsC;IAHtC,KAAAqiB,MAAM,GAANA,MAAM;IACN,KAAAC,KAAK,GAALA,KAAK;IACL,KAAAC,OAAO,GAAPA,OAAO;IACP,KAAAviB,kBAAkB,GAAlBA,kBAAkB;EACxB;EAEJM,QAAQA,CAAA;IACN,IAAI,CAAC2H,cAAc,GAAG,IAAI,CAACjI,kBAAkB,CAACiI,cAAc,CAACua,YAAY,EAAE;IAC3E,IAAI,CAACL,SAAS,GAAG,IAAI,CAACniB,kBAAkB,CAACiI,cAAc,CAACxH,IAAI,CAC1DtD,yCAAG,CAAC+K,aAAa,IAAIkY,wEAAiB,CAAClY,aAAa,EAAE,IAAI,CAACqa,OAAO,CAAC,CAAC,CACrE;IACD,IAAI,CAACN,mBAAmB,GAAG,IAAI,CAACjiB,kBAAkB,CAACiI,cAAc,CAACxH,IAAI,CACpEtD,yCAAG,CAAC+K,aAAa,IAAIxE,qEAAW,CAACyE,QAAQ,CAACD,aAAa,CAACE,QAAQ,CAACtC,kBAAkB,CAAC,IAAI,EAAE,CAAC,CAC5F;EACH;EAEAwb,YAAYA,CAAA;IACV,IAAI,CAACthB,kBAAkB,CAACyiB,kBAAkB,EAAE;EAC9C;EAEAjB,cAAcA,CAAA;IACZxW,MAAM,CAACC,IAAI,CAAC,iCAAiC,EAAE,QAAQ,CAAC;EAC1D;EAEAiW,eAAeA,CAACwB,IAAa,EAAEC,GAAY;IACzC,IAAI,CAAC3iB,kBAAkB,CAACoK,UAAU,CAACsY,IAAI,EAAEC,GAAG,CAAC;EAC/C;EAEAxc,qBAAqBA,CAAC3J,KAA2B;IAC/C,IAAI,CAACwD,kBAAkB,CAACmG,qBAAqB,CAAC3J,KAAK,CAACsE,OAAO,CAAC;EAC9D;EAEAihB,WAAWA,CAAA;IACT,MAAMa,SAAS,GAAG,IAAI,CAAC5iB,kBAAkB,CAACiI,cAAc,CAACnJ,KAAK,CAACsJ,QAAQ,CAAC/D,UAAU;IAClF,IAAI,CAACge,MAAM,CAACQ,QAAQ,CAAC,CAAC3C,kDAAW,CAAC4C,iBAAiB,CAACF,SAAS,CAAC,CAAC,EAAE;MAAEG,UAAU,EAAE,IAAI,CAACT;IAAK,CAAE,CAAC;EAC9F;EAAC,QAAAjoB,CAAA;qBAzCU+nB,oBAAoB,EAAA/oB,+DAAA,CAAA6C,mDAAA,GAAA7C,+DAAA,CAAA6C,2DAAA,GAAA7C,+DAAA,CAAAsI,6DAAA,GAAAtI,+DAAA,CAAAwI,8EAAA;EAAA;EAAA,QAAAvH,EAAA;UAApB8nB,oBAAoB;IAAA7nB,SAAA;IAAAE,UAAA;IAAAC,QAAA,GAAArB,iEAAA;IAAAyB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAA+nB,8BAAA7nB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QC1BjC9B,wDAAA,IAAA4pB,2CAAA,kBAAkD;;;;;QAAlD5pB,2DAAA,KAAAqI,OAAA,GAAArI,yDAAA,OAAA+B,GAAA,CAAA6M,cAAA,aAAAvG,OAAA,CAqFC;;;mBDjEG6V,qEAAe,EAAA5L,+DAAA,EAAAA,mEAAA,EACfnO,iEAAa,EAAA6d,2DAAA,EACbre,iFAAoB,EAAAse,2EAAA,EACpBxe,uDAAS;IAAAT,MAAA;EAAA;;;;;;;;;;;;;;;AEpBb;;;;AAIM,SAAU+jB,iBAAiBA,CAAClY,aAA4B,EAAEqa,OAAgB;EAC9E,MAAMW,QAAQ,GAAa,EAAE;EAE7B,IAAI;IACF,MAAMC,WAAW,GAAGjb,aAAa,CAACE,QAAQ,CAAC6V,MAAM,EAAEC,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE;IACvE,MAAMC,UAAU,GAAGjW,aAAa,CAACE,QAAQ,CAACgW,cAAc,EAAEF,KAAK,CAAC,OAAO,CAAC,IAAI,EAAE;IAE9EiF,WAAW,CAAC1T,OAAO,CAAC2T,KAAK,IAAG;MAC1BA,KAAK,GAAGA,KAAK,EAAEhY,IAAI,EAAE;MACrB,IAAI,CAACgY,KAAK,EAAE;QAAE;;MAEd;MACA;MACA;MACA,MAAMC,WAAW,GAAG,wBAAwB;MAC5C,MAAMC,OAAO,GAAGD,WAAW,CAAC9b,IAAI,CAAC6b,KAAK,CAAC;MACvC,IAAI,CAACE,OAAO,EAAE;QACZJ,QAAQ,CAACtgB,IAAI,CAAC;;kBAEJwgB,KAAK;;;;;SAKd,CAAC;;IAEN,CAAC,CAAC;IAEFjF,UAAU,CAAC1O,OAAO,CAAC2T,KAAK,IAAG;MACzBA,KAAK,GAAGA,KAAK,EAAEhY,IAAI,EAAE;MACrB,IAAI,CAACgY,KAAK,EAAE;QAAE;;MAEd;MACA;MACA;MACA,MAAMG,eAAe,GAAG,sCAAsC;MAC9D,MAAMD,OAAO,GAAGC,eAAe,CAAChc,IAAI,CAAC6b,KAAK,CAAC;MAC3C,IAAI,CAACE,OAAO,EAAE;QACZJ,QAAQ,CAACtgB,IAAI,CAAC;;kBAEJwgB,KAAK;;;SAGd,CAAC;;MAGJ;MACA;MACA;MACA,MAAMI,QAAQ,GAAG,6BAA6B;MAC9C,MAAMC,QAAQ,GAAGD,QAAQ,CAACE,IAAI,CAACN,KAAK,CAAC;MACrC,IAAIK,QAAQ,EAAE;QACZ,MAAME,OAAO,GAAGF,QAAQ,CAAC,CAAC,CAAC;QAC3B,MAAMG,MAAM,GAAGrB,OAAO,CAACsB,QAAQ,EAAEvT,QAAQ,EAAE;QAC3C,IAAIqT,OAAO,KAAKC,MAAM,EAAE;UACtBV,QAAQ,CAACtgB,IAAI,CAAC;kCACU+gB,OAAO,6CAA6CC,MAAM;;WAEjF,CAAC;;;MAIN,MAAME,WAAW,GAAG,mCAAmC;MACvD,MAAMC,WAAW,GAAGD,WAAW,CAACJ,IAAI,CAACN,KAAK,CAAC;MAC3C,IAAIW,WAAW,EAAE;QACfb,QAAQ,CAACtgB,IAAI,CAAC;;;SAGb,CAAC;;IAEN,CAAC,CAAC;GACH,CAAC,OAAOmQ,KAAK,EAAE;IACdD,OAAO,CAACC,KAAK,CAAC,sDAAsD,EAAEA,KAAK,CAAC;;EAG9E,OAAOmQ,QAAQ;AACjB;;;;;;;;;;;;;;;;;;;;ACnFkD;AAEvB;AACyH;AAChF;AACZ;;;;AAIlD,MAAO7f,sBAAsB;EACjCpJ,YAAoBqqB,IAAgB,EAAU/B,OAAgB;IAA1C,KAAA+B,IAAI,GAAJA,IAAI;IAAsB,KAAA/B,OAAO,GAAPA,OAAO;EAAa;EAElEgC,aAAaA,CAACC,gBAAwB,EAAE9jB,WAAyB;IAC/D,OAAO,IAAI,CAAC4jB,IAAI,CAACG,GAAG,CAAgBN,wEAAc,EAAE;MAClDpQ,MAAM,EAAE;QAAE2Q,KAAK,EAAE,IAAI,CAACnC,OAAO,CAACmC,KAAK,CAACpU,QAAQ,EAAE;QAAEuB,EAAE,EAAE2S,gBAAgB,CAAClU,QAAQ;MAAE;KAChF,CAAC,CAAC7P,IAAI,CACLtD,yCAAG,CAAC+K,aAAa,IAAG;MAClB;MACA,IAAI,CAACA,aAAa,CAACQ,WAAW,CAACtC,MAAM,EAAE;QACrC,IAAI,CAACue,iBAAiB,CAACzc,aAAa,EAAExH,WAAW,CAAC;;MAEpD,IAAI,CAACkkB,sBAAsB,CAAC1c,aAAa,CAACQ,WAAW,CAAC;MACtD,OAAOR,aAAa;IACtB,CAAC,CAAC,CACH;EACH;EAEQyc,iBAAiBA,CAACzc,aAA4B,EAAExH,WAAyB;IAC/E,MAAMmkB,mBAAmB,GAAGznB,yEAAY,CAAC8C,gBAAgB,CAAC4kB,eAAe,CAACpkB,WAAW;IACrF,KAAK,MAAMqkB,UAAU,IAAIF,mBAAmB,EAAE;MAC5C,MAAM5jB,UAAU,GAAGP,WAAW,CAAC6J,IAAI,CAACC,EAAE,IAAIA,EAAE,CAAClJ,mBAAmB,KAAKyjB,UAAU,CAACzjB,mBAAmB,CAAC;MACpG,MAAMqJ,kBAAkB,GAAuB;QAC7CnE,WAAW,EAAE,EAAE;QACfnC,UAAU,EAAE0gB,UAAU,CAAC1gB,UAAU;QACjCW,QAAQ,EAAE1F,SAAS;QACnBlB,IAAI,EAAE6C,UAAU,CAAC7C,IAAI;QACrBkD,mBAAmB,EAAEyjB,UAAU,CAACzjB,mBAAmB;QACnDwE,kBAAkB,EAAEif,UAAU,CAACjf;OAChC;MACDoC,aAAa,CAACQ,WAAW,CAAC9F,IAAI,CAAC+H,kBAAkB,CAAC;;IAGpDzC,aAAa,CAACE,QAAQ,CAACmK,YAAY,GAAGnV,yEAAY,CAAC8C,gBAAgB,CAAC4kB,eAAe,CAACE,YAAY;EAClG;EAEQJ,sBAAsBA,CAAC/d,mBAAyC;IACtE,MAAMoe,mBAAmB,GAAGpe,mBAAmB,CAAC0M,IAAI,CAClDiC,UAAU,IAAIA,UAAU,CAACnR,UAAU,KAAKjH,yEAAY,CAAC8C,gBAAgB,CAACmC,aAAa,CAACgC,UAAU,CAC/F;IACD,IAAI,CAAC4gB,mBAAmB,EAAE;MACxB,MAAMC,KAAK,GAAG9nB,yEAAY,CAAC8C,gBAAgB,CAACmC,aAAa;MACzD,MAAM8iB,UAAU,GAAuB;QACrC3e,WAAW,EAAE0e,KAAK,CAAC1e,WAAW;QAC9BnC,UAAU,EAAE6gB,KAAK,CAAC7gB,UAAU;QAC5BW,QAAQ,EAAE1F,SAAS;QACnBlB,IAAI,EAAE8mB,KAAK,CAAC9mB,IAAI;QAChBkD,mBAAmB,EAAE4jB,KAAK,CAAC5jB,mBAAmB;QAC9CwE,kBAAkB,EAAEof,KAAK,CAACpf;OAC3B;MACDe,mBAAmB,CAACjE,IAAI,CAACuiB,UAAU,CAAC;;IAGtC,KAAK,MAAMxa,kBAAkB,IAAI9D,mBAAmB,EAAE;MACpD8D,kBAAkB,CAAC7E,kBAAkB,KAAK;QAAEC,GAAG,EAAE,EAAE;QAAEC,IAAI,EAAE;MAAE,CAAE;;EAEnE;EAEAof,gBAAgBA,CAAA;IACd,OAAO,IAAI,CAACd,IAAI,CAACG,GAAG,CAAeR,gFAAsB,EAAE;MACzDlQ,MAAM,EAAE;QACNsR,KAAK,EAAE,IAAI,CAAC9C,OAAO,CAACmC,KAAK;QACzBY,MAAM,EAAE,IAAI,CAAC/C,OAAO,CAAC+C;;KAExB,CAAC,CAAC7kB,IAAI,CACLtD,yCAAG,CAACuD,WAAW,IAAG;MAChB,MAAMwkB,KAAK,GAAG9nB,yEAAY,CAAC8C,gBAAgB,CAACmC,aAAa;MACzD,MAAM8iB,UAAU,GAAe;QAC7BI,WAAW,EAAEjmB,SAAS;QACtB8C,UAAU,EAAEhF,yEAAY,CAAC8C,gBAAgB,CAACC,sBAAsB,CAACE,OAAO;QACxEsG,SAAS,EAAE,IAAI;QACfD,UAAU,EAAE,KAAK;QACjBJ,YAAY,EAAEhH,SAAS;QACvBgF,QAAQ,EAAEhF,SAAS;QACnBhB,IAAI,EAAEgB,SAAS;QACf4P,EAAE,EAAEgW,KAAK,CAAChW,EAAE;QACZ9Q,IAAI,EAAE8mB,KAAK,CAAC9mB,IAAI;QAChBwQ,GAAG,EAAEtP,SAAS;QACdgC,mBAAmB,EAAE4jB,KAAK,CAAC5jB,mBAAmB;QAC9CqB,WAAW,EAAEuiB,KAAK,CAACviB,WAAW;QAC9B+H,aAAa,EAAEpL,SAAS;QACxBnB,MAAM,EAAEmB;OACT;MACDoB,WAAW,CAACkC,IAAI,CAACuiB,UAAU,CAAC;MAC5B,OAAOzkB,WAAW;IACpB,CAAC,CAAC,CACH;EACH;EAEA+J,cAAcA,CAAC+a,KAAa,EAAEC,MAAqC;IACjE,MAAMC,WAAW,GAAGF,KAAK,CAACtH,KAAK,CAAC,IAAI,CAAC;IAErC,QAAQuH,MAAM;MACZ,KAAK,eAAe;QAClB,MAAME,aAAa,GAAGD,WAAW,CAAC,CAAC,CAAC;QACpC,OAAOC,aAAa;MACtB,KAAK,WAAW;QACd,MAAMC,kBAAkB,GAAGF,WAAW,CAAC,CAAC,CAAC,CAACxH,KAAK,CAAC,GAAG,CAAC;QACpD,MAAM2H,SAAS,GAAGD,kBAAkB,CAACA,kBAAkB,CAACxf,MAAM,GAAG,CAAC,CAAC;QACnE,OAAOyf,SAAS;MAClB;QACE,OAAOL,KAAK;;EAElB;EAEA;EACAM,YAAYA,CAAC5d,aAA4B;IACvC,MAAM8V,QAAQ,GAAG9V,aAAa,CAACE,QAAQ;IACvC,MAAM1H,WAAW,GAAGwH,aAAa,CAACQ,WAAW;IAE7C,OAAO,IAAI,CAAC4b,IAAI,CAACyB,IAAI,CACnB1B,yEAAe,EACf;MAAErG,QAAQ;MAAEtd;IAAW,CAAE,EACzB;MAAEqT,MAAM,EAAE;QAAE2Q,KAAK,EAAE,IAAI,CAACnC,OAAO,CAACmC,KAAK,CAACpU,QAAQ,EAAE;QAAE0V,EAAE,EAAEhI,QAAQ,CAAChZ,QAAQ,CAACsL,QAAQ;MAAE;IAAE,CAAE,CACvF,CAAC7P,IAAI,CACJtD,yCAAG,CAAC8oB,gBAAgB,IAAG;MACrB,IAAI,CAACrB,sBAAsB,CAACqB,gBAAgB,CAACvd,WAAW,CAAC;MACzD,OAAOud,gBAAgB;IACzB,CAAC,CAAC,CACH;EACH;EAEA;EACAjH,WAAWA,CAACnN,EAAU,EAAEgL,GAAW;IACjC,OAAO,IAAI,CAACyH,IAAI,CAACG,GAAG,CAAiBL,wEAAc,EAAE;MACnDrQ,MAAM,EAAE;QAAE2Q,KAAK,EAAE,IAAI,CAACnC,OAAO,CAACmC,KAAK,CAACpU,QAAQ,EAAE;QAAEuB,EAAE,EAAEA,EAAE,CAACvB,QAAQ,EAAE;QAAEuM,GAAG,EAAEA,GAAG,CAACvM,QAAQ;MAAE;KACvF,CAAC;EACJ;EAEA;EACAnG,WAAWA,CAAC0H,EAAU,EAAEmI,MAAc,EAAEM,SAAiB,EAAEuC,GAAW;IACpE,OAAO,IAAI,CAACyH,IAAI,CAACG,GAAG,CAAiBP,gFAAsB,EAAE;MAC3DnQ,MAAM,EAAE;QAAE2Q,KAAK,EAAE,IAAI,CAACnC,OAAO,CAACmC,KAAK,CAACpU,QAAQ,EAAE;QAAEuB,EAAE,EAAEA,EAAE,CAACvB,QAAQ,EAAE;QAAE2C,IAAI,EAAE+G,MAAM;QAAEE,GAAG,EAAEI,SAAS;QAAEuC,GAAG,EAAEA,GAAG,CAACvM,QAAQ;MAAE;KACrH,CAAC;EACJ;EAAC,QAAAjW,CAAA;qBAtIUgJ,sBAAsB,EAAAhK,sDAAA,CAAA6C,4DAAA,GAAA7C,sDAAA,CAAAsI,6DAAA;EAAA;EAAA,QAAArH,EAAA;WAAtB+I,sBAAsB;IAAA8iB,OAAA,EAAtB9iB,sBAAsB,CAAA+iB;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACRgE;AAC9C;AACK;AACR;AACO;AACb;AACuB;AAC2B;AAChB;AACV;AACoC;AACpC;AACI;AAIM;AAEoB;AAElC;;;;;;;;;AAG1D,MAAO9oB,kBAAmB,SAAQqpB,6GAA4B;EAWlE1sB,YACYooB,MAAc,EACdC,KAAqB,EACvBpb,sBAA8C,EAC9C4f,YAAmB,EACnBC,QAAqB,EACrB3f,MAAiB,EACjBC,gBAAkC,EAClC2f,IAAY,EACZC,eAAgC,EAChC/N,mBAAwC,EACxC/R,iBAAoC;IAE5C,KAAK,CAACkb,MAAM,EAAEC,KAAK,CAAC;IAZV,KAAAD,MAAM,GAANA,MAAM;IACN,KAAAC,KAAK,GAALA,KAAK;IACP,KAAApb,sBAAsB,GAAtBA,sBAAsB;IACtB,KAAA4f,YAAY,GAAZA,YAAY;IACZ,KAAAC,QAAQ,GAARA,QAAQ;IACR,KAAA3f,MAAM,GAANA,MAAM;IACN,KAAAC,gBAAgB,GAAhBA,gBAAgB;IAChB,KAAA2f,IAAI,GAAJA,IAAI;IACJ,KAAAC,eAAe,GAAfA,eAAe;IACf,KAAA/N,mBAAmB,GAAnBA,mBAAmB;IACnB,KAAA/R,iBAAiB,GAAjBA,iBAAiB;IArB3B,KAAAc,cAAc,GAAG,IAAIhL,iDAAe,CAAgB,IAAI,CAAC;IACzD,KAAAuD,YAAY,GAAG,IAAIvD,iDAAe,CAAe,IAAI,CAAC;IACtD,KAAA0K,4BAA4B,GAAG,IAAI8e,0CAAO,EAAkB;IAC5D,KAAAne,kBAAkB,GAAG,IAAIrL,iDAAe,CAAoB,EAAE,CAAC;IAGvD,KAAAiqB,UAAU,GAAGC,QAAQ,CAAC,IAAI,CAAC7E,KAAK,CAAC8E,QAAQ,CAACC,QAAQ,CAAC5C,GAAG,CAAC,YAAY,CAAC,EAAE,EAAE,CAAC;IACzE,KAAA6C,eAAe,GAAG,KAAK;IACvB,KAAAC,wBAAwB,GAAG,KAAK;EAgBxC;EAEA3mB,WAAWA,CAAA;IACT,IAAI,CAACqH,cAAc,CAACpH,QAAQ,EAAE;IAC9B,IAAI,CAACL,YAAY,CAACK,QAAQ,EAAE;IAC5B,IAAI,CAAC8G,4BAA4B,CAAC9G,QAAQ,EAAE;IAC5C,KAAK,CAACD,WAAW,EAAE;EACrB;EAEA4mB,IAAIA,CAAA;IACF,IAAI,CAACpC,gBAAgB,CAAC,MAAM,IAAI,CAACb,aAAa,CAAC,IAAI,EAAE,IAAI,EAAE,KAAK,CAAC,CAAC;IAClE,IAAI,CAACkD,kBAAkB,EAAE;IACzB,IAAI,CAAChgB,aAAa,CAACC,GAAG,CAAC,IAAI,CAACggB,kBAAkB,EAAE,CAAC9f,SAAS,CAAC,MAAK;MAC9D,IAAI,IAAI,CAAC0f,eAAe,IAAI,IAAI,CAACC,wBAAwB,EAAE;QACzD,IAAI,CAAChD,aAAa,CAAC,IAAI,CAAC+C,eAAe,EAAE,IAAI,CAACC,wBAAwB,EAAE,IAAI,CAACD,eAAe,CAAC;;MAE/F,IAAI,CAACA,eAAe,GAAG,KAAK;MAC5B,IAAI,CAACC,wBAAwB,GAAG,KAAK;IACtC,CAAC,CAAC,CAAC;EACN;EAEA9E,kBAAkBA,CAAA;IAChB;IACA,IAAI,CAACqD,YAAY,CAAC,MAAK;MACrB,MAAMrM,IAAI,GAAa;QACrBkO,KAAK,EAAE,CAAC;UAAE3iB,QAAQ,EAAE,IAAI,CAACiD,cAAc,CAACnJ,KAAK,CAACsJ,QAAQ,CAACpD;QAAQ,CAAE;OAClE;MACD,MAAM4iB,OAAO,GAAGhB,iFAAgB,CAACnN,IAAI,CAAC;MACtC,IAAI,CAAC4I,MAAM,CAACQ,QAAQ,CAAC,CAAC,QAAQ+E,OAAO,EAAE,CAAC,EAAE;QAAE7E,UAAU,EAAE,IAAI,CAACT;MAAK,CAAE,CAAC;MACrE,IAAI,CAACgF,eAAe,GAAG,IAAI;IAC7B,CAAC,CAAC;EACJ;EAEAld,UAAUA,CAACsY,IAAa,EAAEC,GAAY;IACpC,IAAID,IAAI,IAAIC,GAAG,EAAE;MACf,IAAI,CAACmD,YAAY,CAAC,MAAK;QAAG,IAAI,CAAC9G,WAAW,EAAE;MAAE,CAAC,CAAC;KACjD,MAAM,IAAI0D,IAAI,EAAE;MACf,IAAI,CAACoD,YAAY,EAAE;KACpB,MAAM,IAAInD,GAAG,EAAE;MACd,IAAI,CAAC3D,WAAW,EAAE;;EAEtB;EAEA7Y,qBAAqBA,CAAC0hB,WAAoB;IACxC,MAAM3f,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1D,MAAMgpB,kBAAkB,GAAwBpkB,qEAAW,CAACyE,QAAQ,CAACD,aAAa,CAACE,QAAQ,CAACtC,kBAAkB,CAAC,IAAI,EAAE;IACrHgiB,kBAAkB,CAAClf,qBAAqB,GAAGif,WAAW;IACtD3f,aAAa,CAACE,QAAQ,CAACtC,kBAAkB,GAAGiiB,IAAI,CAACC,SAAS,CAACF,kBAAkB,CAAC;IAC9E,IAAI,CAAC7f,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;EACzC;EAEAjK,aAAaA,CAACgD,UAAsB;IAClC,MAAMiH,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1D,MAAMmpB,qBAAqB,GAAuB;MAChDzhB,WAAW,EAAE,EAAE;MACfnC,UAAU,EAAE,SAAS,IAAI6D,aAAa,CAACQ,WAAW,CAACtC,MAAM,GAAG,CAAC,CAAC;MAC9DpB,QAAQ,EAAE1F,SAAS;MACnBlB,IAAI,EAAE6C,UAAU,CAAC7C,IAAI;MACrBkD,mBAAmB,EAAEL,UAAU,CAACK,mBAAmB;MACnDwE,kBAAkB,EAAE;QAAEC,GAAG,EAAE,GAAG;QAAEC,IAAI,EAAE;MAAG;KAC1C;IACDkC,aAAa,CAACQ,WAAW,CAAC9F,IAAI,CAACqlB,qBAAqB,CAAC;IACrD,IAAI,CAAChgB,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;IACvC,IAAI,CAAC4d,YAAY,EAAE;EACrB;EAEAhb,gBAAgBA,CAACf,sBAA8B,EAAEL,WAAyB,EAAEE,UAAkB;IAC5F,MAAM1B,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1DoJ,aAAa,CAACQ,WAAW,GAAGR,aAAa,CAACQ,WAAW,CAACvG,MAAM,CAACqT,UAAU,IAAIA,UAAU,CAACnR,UAAU,KAAK0F,sBAAsB,CAAC;IAC5H7B,aAAa,CAACE,QAAQ,CAACmK,YAAY,GAAG7I,WAAW;IACjDxB,aAAa,CAACE,QAAQ,CAAC8f,UAAU,GAAGte,UAAU;IAC9C,IAAI,CAAC3B,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;EACzC;EAEAmD,gBAAgBA,CAACtB,sBAA8B,EAAEpF,IAAY;IAC3D,MAAMuD,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1D,MAAM6L,kBAAkB,GAAGzC,aAAa,CAACQ,WAAW,CAAC6B,IAAI,CAACiL,UAAU,IAAIA,UAAU,CAACnR,UAAU,KAAK0F,sBAAsB,CAAC;IACzHY,kBAAkB,CAACvM,IAAI,GAAGuG,IAAI;IAC9B,IAAI,CAACsD,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;EACzC;EAEAqD,2BAA2BA,CAACxB,sBAA8B,EAAEoe,WAAmB;IAC7E,MAAMjgB,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1D,MAAM6L,kBAAkB,GAAGzC,aAAa,CAACQ,WAAW,CAAC6B,IAAI,CAACiL,UAAU,IAAIA,UAAU,CAACnR,UAAU,KAAK0F,sBAAsB,CAAC;IACzHY,kBAAkB,CAACnE,WAAW,GAAG2hB,WAAW;IAC5C,IAAI,CAAClgB,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;EACzC;EAEA4B,iBAAiBA,CAACJ,WAAyB,EAAEE,UAAkB;IAC7D,MAAM1B,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1DoJ,aAAa,CAACE,QAAQ,CAACmK,YAAY,GAAG7I,WAAW;IACjDxB,aAAa,CAACE,QAAQ,CAAC8f,UAAU,GAAGte,UAAU;IAC9C,IAAI,CAAC3B,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;EACzC;EAEA+B,wBAAwBA,CAACF,sBAA8B,EAAEC,QAA4B;IACnF,MAAM9B,aAAa,GAAGnG,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC;IAC1D,MAAM6L,kBAAkB,GAAGzC,aAAa,CAACQ,WAAW,CAAC6B,IAAI,CAACiL,UAAU,IAAIA,UAAU,CAACnR,UAAU,KAAK0F,sBAAsB,CAAC;IACzH,IAAI,CAACY,kBAAkB,EAAE;MACvB;MACA;MACA;;IAEFA,kBAAkB,CAAC7E,kBAAkB,GAAG;MAAE,GAAG6E,kBAAkB,CAAC7E,kBAAkB;MAAE,GAAGkE;IAAQ,CAAE;IACjG,IAAI,CAAC/B,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;EACzC;EAEQkgB,0BAA0BA,CAAC1nB,WAAiC;IAClE,MAAMqE,iBAAiB,GAAsB,EAAE;IAC/CrE,WAAW,CAAC+O,OAAO,CAACxO,UAAU,IAAG;MAC/B,IAAIA,UAAU,CAAC+D,QAAQ,IAAI,IAAI,EAAE;QAAE;;MACnCD,iBAAiB,CAAC9D,UAAU,CAAC+D,QAAQ,CAAC,GAAG,EAAE;MAC3C/D,UAAU,CAAConB,QAAQ,EAAE5Y,OAAO,CAAC6Y,YAAY,IAAG;QAC1CxX,MAAM,CAACyX,OAAO,CAACD,YAAY,CAAC,CAAC7Y,OAAO,CAAC,CAAC,CAAC+Y,aAAa,EAAEC,cAAc,CAAC,KAAI;UACvE,IAAIA,cAAc,IAAI,IAAI,IAAIA,cAAc,KAAK,EAAE,EAAE;YAAE;;UACvD,IAAI,CAAC,SAAS,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,OAAO,EAAE,OAAO,CAAC,CAACjpB,QAAQ,CAACgpB,aAAa,CAAC,EAAE;YAAE;;UACvF,IAAIE,KAAK,CAACC,OAAO,CAACF,cAAc,CAAC,IAAIA,cAAc,CAAC,CAAC,CAAC,EAAElC,KAAK,IAAI,IAAI,IAAIkC,cAAc,CAAC,CAAC,CAAC,EAAEzC,EAAE,IAAI,IAAI,EAAE;YACtGyC,cAAc,GAAG,GAAGA,cAAc,CAAC,CAAC,CAAC,CAAClC,KAAK,KAAKkC,cAAc,CAAC,CAAC,CAAC,CAACzC,EAAE,GAAG;;UAEzE,MAAM4C,gBAAgB,GAAqB;YACzCjkB,IAAI,EAAE6jB,aAAa;YACnB1pB,KAAK,EAAE2pB;WACR;UACD1jB,iBAAiB,CAAC9D,UAAU,CAAC+D,QAAQ,CAAC,CAACpC,IAAI,CAACgmB,gBAAgB,CAAC;QAC/D,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC,CAAC;IACF,IAAI,CAACtgB,kBAAkB,CAACtH,IAAI,CAAC+D,iBAAiB,CAAC;EACjD;EAEAsF,cAAcA,CAACM,kBAAsC;IACnD,MAAM1J,UAAU,GAAG,IAAI,CAACT,YAAY,CAAC1B,KAAK,CAACyL,IAAI,CAACC,EAAE,IAAIA,EAAE,CAAClJ,mBAAmB,KAAKqJ,kBAAkB,CAACrJ,mBAAmB,CAAC;IACxH,MAAMunB,eAAe,GAAG5nB,UAAU,CAACskB,WAAW;IAC9C,MAAMuD,UAAU,GAAG1rB,yEAAY,CAAC2rB,QAAQ,CAACC,MAAM,CAACF,UAAU;IAC1D,MAAMG,OAAO,GAAG7rB,yEAAY,CAAC2rB,QAAQ,CAACC,MAAM,CAACC,OAAO;IACpD,MAAM/pB,GAAG,GAAGyL,kBAAkB,CAACtG,UAAU;IAEzC;IACA,IAAI,CAAC4iB,eAAe,CAACiC,WAAW,CAACJ,UAAU,EAAEG,OAAO,EAAE/pB,GAAG,EAAE2pB,eAAe,CAAC,CAACjhB,SAAS,CAACmhB,QAAQ,IAAG;MAC/F;MACA,IAAIA,QAAQ,CAACI,KAAK,CAAC/iB,MAAM,EAAE;QACzB,MAAMqT,IAAI,GAAa;UACrBkO,KAAK,EAAE,CAAC;YAAE3iB,QAAQ,EAAE+jB,QAAQ,CAACI,KAAK,CAAC,CAAC,CAAC,CAACnD;UAAE,CAAE;SAC3C;QACD,MAAM4B,OAAO,GAAGhB,iFAAgB,CAACnN,IAAI,CAAC;QACtC,IAAI,CAAC4I,MAAM,CAACQ,QAAQ,CAAC,CAAC,QAAQ+E,OAAO,EAAE,CAAC,EAAE;UAAE7E,UAAU,EAAE,IAAI,CAACT;QAAK,CAAE,CAAC;QACrE,IAAI,CAACiF,wBAAwB,GAAG,IAAI;QACpC;;MAGF;MACA,IAAI,CAACrO,mBAAmB,CAACkQ,mBAAmB,CAACP,eAAe,CAAC,CAACjhB,SAAS,CAAC;QACtE5G,IAAI,EAAEqoB,WAAW,IAAG;UAClB,IAAIA,WAAW,IAAI,IAAI,EAAE;YACvB,IAAI,CAACtC,QAAQ,CAAC9b,IAAI,CAAC,4CAA4C,EAAE3L,SAAS,EAAE;cAAEgqB,QAAQ,EAAE;YAAI,CAAE,CAAC;YAC/F;;UAEF,MAAM7P,IAAI,GAAa;YACrBkO,KAAK,EAAE,CAAC;cACN4B,eAAe,EAAEV,eAAe;cAChCW,GAAG,EAAE;gBACHnd,MAAM,EAAEjP,yEAAY,CAAC2rB,QAAQ,CAACC,MAAM,CAAC7Z,MAAM;gBAC3Csa,UAAU,EAAErsB,yEAAY,CAAC2rB,QAAQ,CAACC,MAAM,CAACF,UAAU;gBACnD7O,IAAI,EAAE/a;;aAET;WACF;UACD,MAAM0oB,OAAO,GAAGhB,iFAAgB,CAACnN,IAAI,CAAC;UACtC,IAAI,CAAC4I,MAAM,CAACQ,QAAQ,CAAC,CAAC,QAAQ+E,OAAO,EAAE,CAAC,EAAE;YAAE7E,UAAU,EAAE,IAAI,CAACT;UAAK,CAAE,CAAC;UACrE,IAAI,CAACiF,wBAAwB,GAAG,IAAI;QACtC,CAAC;QACDxU,KAAK,EAAGA,KAAwB,IAAI;UAClC,MAAMC,OAAO,GAAG,gGAAgG;UAChH,IAAI,CAAC+T,QAAQ,CAAC9b,IAAI,CAAC+H,OAAO,EAAE1T,SAAS,EAAE;YAAEgqB,QAAQ,EAAE;UAAI,CAAE,CAAC;QAC5D;OACD,CAAC;IACJ,CAAC,CAAC;EACJ;EAEQxD,YAAYA,CAAC4D,QAAqB;IACxC,IAAI,CAAC3C,QAAQ,CAAC9b,IAAI,CAAC,WAAW,CAAC;IAC/B,IAAI,CAAC/D,sBAAsB,CAAC4e,YAAY,CAAC,IAAI,CAAC7d,cAAc,CAACnJ,KAAK,CAAC,CAAC8I,SAAS,CAAC;MAC5E5G,IAAI,EAAEkH,aAAa,IAAG;QACpB,IAAI,CAAC6e,QAAQ,CAAC9b,IAAI,CAAC,OAAO,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;QACrD,IAAI,CAACrhB,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;QACvC,IAAIwhB,QAAQ,IAAI,IAAI,EAAE;UAAEA,QAAQ,EAAE;;MACpC,CAAC;MACD3W,KAAK,EAAGA,KAAwB,IAAI;QAClC,IAAI,CAACgU,QAAQ,CAAC9b,IAAI,CAAC,sBAAsB,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;MACtE;KACD,CAAC;EACJ;EAEAtK,WAAWA,CAACnC,GAAG,GAAG,EAAE;IAClB,IAAI,CAACkK,QAAQ,CAAC9b,IAAI,CAAC,kBAAkB,CAAC;IACtC,IAAI,CAAC/D,sBAAsB,CAAC8X,WAAW,CAAC,IAAI,CAAC/W,cAAc,CAACnJ,KAAK,CAACsJ,QAAQ,CAACpD,QAAQ,EAAE6X,GAAG,CAAC,CAACjV,SAAS,CAAC;MAClG5G,IAAI,EAAEoY,cAAc,IAAG;QACrB,IAAI,CAAC2N,QAAQ,CAAC9b,IAAI,CAAC,cAAc,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;QAC5D,IAAI,CAAClQ,cAAc,GAAGA,cAAc;QACpC,IAAI,CAACuQ,eAAe,CAACvQ,cAAc,EAAEyD,GAAG,CAAC;QACzC/J,OAAO,CAAC8W,IAAI,CAACxQ,cAAc,CAAC;QAC5B;QACA,IAAI,CAACnR,cAAc,CAACjH,IAAI,CAACe,gEAAS,CAAC,IAAI,CAACkG,cAAc,CAACnJ,KAAK,CAAC,CAAC;QAC9DiT,UAAU,CAAC,MAAK;UAAG,IAAI,CAACpK,4BAA4B,CAAC3G,IAAI,CAACoY,cAAc,CAAC;QAAE,CAAC,CAAC;MAC/E,CAAC;MACDrG,KAAK,EAAGA,KAAwB,IAAI;QAClC,IAAI,CAACgU,QAAQ,CAAC9b,IAAI,CAAC,cAAc,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;MAC9D;KACD,CAAC;EACJ;EAEAnf,WAAWA,CAACD,MAA4B,EAAE2S,GAAG,GAAG,EAAE;IAChD,IAAI3S,MAAM,CAACkG,KAAK,EAAE;MAChB,IAAI,CAACyZ,qBAAqB,CAAC3f,MAAM,CAAC;MAClC;;IAGF,IAAIA,MAAM,CAACmG,KAAK,KAAK,CAAC,EAAE;MAAE;;IAE1B,IAAI,CAAC0W,QAAQ,CAAC9b,IAAI,CAAC,mBAAmB,CAAC;IACvC,MAAMic,UAAU,GAAG,IAAI,CAACjf,cAAc,CAACnJ,KAAK,CAACsJ,QAAQ,CAACpD,QAAQ;IAC9D,IAAI,CAACkC,sBAAsB,CAACiD,WAAW,CAAC+c,UAAU,EAAEhd,MAAM,CAACkC,MAAM,EAAElC,MAAM,CAAC4F,SAAS,EAAE+M,GAAG,CAAC,CAACjV,SAAS,CAAC;MAClG5G,IAAI,EAAE8oB,YAAY,IAAG;QACnB,IAAI,CAAC/C,QAAQ,CAAC9b,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;QAC7D,MAAM3e,kBAAkB,GAAG,IAAI,CAAC1C,cAAc,CAACnJ,KAAK,CAAC4J,WAAW,CAAC6B,IAAI,CAACC,EAAE,IAAIA,EAAE,CAACnG,UAAU,KAAK6F,MAAM,CAACkC,MAAM,CAAC;QAC5G,MAAMjC,WAAW,GAAoB;UACnCxF,IAAI,EAAEuF,MAAM,CAAC4F,SAAS;UACtBkK,MAAM,EAAE9P,MAAM,CAACkC,MAAM;UACrBwQ,UAAU,EAAEjS,kBAAkB,CAACvM,IAAI;UACnC2gB,QAAQ,EAAE7U;SACX;QACD,IAAI,CAACyf,eAAe,CAACG,YAAY,EAAEjN,GAAG,EAAE1S,WAAW,CAAC;QACpD2I,OAAO,CAAC8W,IAAI,CAACE,YAAY,CAAC;MAC5B,CAAC;MACD/W,KAAK,EAAGA,KAAwB,IAAI;QAClC,IAAI,CAACgU,QAAQ,CAAC9b,IAAI,CAAC,eAAe,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;MAC/D;KACD,CAAC;EACJ;EAEQ/E,aAAaA,CAAC+C,eAAwB,EAAEC,wBAAiC,EAAEwC,YAAqB;IACtG,IAAIA,YAAY,EAAE;MAChB,IAAI,CAAChD,QAAQ,CAAC9b,IAAI,CAAC,iCAAiC,CAAC;;IAEvD,IAAI,CAAC/D,sBAAsB,CAACqd,aAAa,CAAC,IAAI,CAAC2C,UAAU,EAAE,IAAI,CAAC1mB,YAAY,CAAC1B,KAAK,CAAC,CAAC8I,SAAS,CAACM,aAAa,IAAG;MAC5G,IAAI6hB,YAAY,EAAE;QAChB,IAAI,CAAChD,QAAQ,CAAC9b,IAAI,CAAC,gBAAgB,EAAE,IAAI,EAAE;UAAEqe,QAAQ,EAAE;QAAI,CAAE,CAAC;;MAEhE,IAAI,CAACxC,YAAY,CAACkD,QAAQ,CAAC,GAAG9hB,aAAa,CAACE,QAAQ,CAAChK,IAAI,iBAAiB,CAAC;MAC3E,IAAIkpB,eAAe,EAAE;QACnB,IAAI,CAACrf,cAAc,CAACjH,IAAI,CAACkH,aAAa,CAAC;;MAEzC,IAAIqf,wBAAwB,EAAE;QAC5B,IAAI,CAACa,0BAA0B,CAAClgB,aAAa,CAACQ,WAAW,CAAC;;IAE9D,CAAC,CAAC;EACJ;EAEQihB,eAAeA,CAAC9hB,MAAsB,EAAEgV,GAAW,EAAE1S,WAA6B;IACxF,MAAM8O,UAAU,GAA0B;MACxCpR,MAAM;MACNsC,WAAW;MACX0S;KACD;IACD,IAAI,CAACzV,MAAM,CAAC6D,IAAI,CAAC8S,sFAAoB,EAAE;MACrC7I,SAAS,EAAE,KAAK;MAChB+U,aAAa,EAAE,iBAAiB;MAChCC,iBAAiB,EAAE,KAAK;MACxBjV,IAAI,EAAEgE,UAAU;MAChBkR,UAAU,EAAE,CAAC,cAAc,EAAE,qBAAqB,EAAE,cAAc,CAAC;MACnE;MACA;MACAngB,QAAQ,EAAE;QAAE6S,GAAG,EAAE;MAAG,CAAE;MACtBxV,gBAAgB,EAAE,IAAI,CAACA;KACxB,CAAC;IACF,IAAI,CAACF,iBAAiB,CAACmO,YAAY,EAAE;EACvC;EAEQuU,qBAAqBA,CAAC3f,MAA4B;IACxD,MAAM+O,UAAU,GAAgC;MAC9CmR,SAAS,EAAElgB,MAAM,CAACmgB;KACnB;IACD,IAAI,CAACjjB,MAAM,CAAC6D,IAAI,CAAC4b,0GAA0B,EAAE;MAC3C3R,SAAS,EAAE,KAAK;MAChB+U,aAAa,EAAE,iBAAiB;MAChCC,iBAAiB,EAAE,KAAK;MACxBjV,IAAI,EAAEgE,UAAU;MAChBkR,UAAU,EAAE,CAAC,cAAc,EAAE,qBAAqB,EAAE,cAAc,CAAC;MACnE;MACA;MACAngB,QAAQ,EAAE;QAAE6S,GAAG,EAAE;MAAG,CAAE;MACtBxV,gBAAgB,EAAE,IAAI,CAACA;KACxB,CAAC;IACF,IAAI,CAACF,iBAAiB,CAACmO,YAAY,EAAE;EACvC;EAEQ8P,gBAAgBA,CAACsE,QAAqB;IAC5C,IAAI,CAACxiB,sBAAsB,CAACke,gBAAgB,EAAE,CAACxd,SAAS,CAAClH,WAAW,IAAG;MACrE,IAAI,CAACF,YAAY,CAACQ,IAAI,CAACN,WAAW,CAAC;MACnCgpB,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;EAEQjC,kBAAkBA,CAAA;IACxB,IAAI,CAACT,IAAI,CAACsD,iBAAiB,CAAC,MAAK;MAC/B,IAAI,CAAC7iB,aAAa,CAACC,GAAG,CACpB8e,gDAAS,CAAgBxb,MAAM,EAAE,SAAS,CAAC,CAACvK,IAAI,CAC9C0B,6CAAM,CAAC,MAAM,CAAC,IAAI,CAACmgB,KAAK,CAAC8E,QAAQ,CAACmD,UAAU,CAAC,EAC7CpoB,6CAAM,CAAC3F,KAAK,IAAG;QACb,MAAMguB,MAAM,GAAG,CAACC,SAAS,CAACC,QAAQ,CAACC,KAAK,CAAC,KAAK,CAAC,GAAGnuB,KAAK,CAACouB,OAAO,GAAGpuB,KAAK,CAACquB,OAAO,KAAKruB,KAAK,CAACsuB,OAAO,KAAK,EAAE;QACxG,OAAON,MAAM;MACf,CAAC,CAAC,CACH,CAAC5iB,SAAS,CAACpL,KAAK,IAAG;QAClBA,KAAK,CAACuuB,cAAc,EAAE;QACtB,IAAI,CAAC/D,IAAI,CAACrE,GAAG,CAAC,MAAK;UAAG,IAAI,CAACmD,YAAY,EAAE;QAAE,CAAC,CAAC;MAC/C,CAAC,CAAC,CACH;IACH,CAAC,CAAC;EACJ;EAAC,QAAAzrB,CAAA;qBAvVUiD,kBAAkB,EAAAjE,uDAAA,CAAA6C,oDAAA,GAAA7C,uDAAA,CAAA6C,4DAAA,GAAA7C,uDAAA,CAAAsI,6EAAA,GAAAtI,uDAAA,CAAAwI,6DAAA,GAAAxI,uDAAA,CAAAsS,qEAAA,GAAAtS,uDAAA,CAAAgiB,gEAAA,GAAAhiB,uDAAA,CAAAA,4DAAA,GAAAA,uDAAA,CAAAA,kDAAA,GAAAA,uDAAA,CAAAiiB,mFAAA,GAAAjiB,uDAAA,CAAAyiB,mGAAA,GAAAziB,uDAAA,CAAAA,6DAAA;EAAA;EAAA,QAAAiB,EAAA;WAAlBgD,kBAAkB;IAAA6oB,OAAA,EAAlB7oB,kBAAkB,CAAA8oB;EAAA;;;;;;;;;;;;;;;;;;;;ACvB4D;AAIhD;AACY;AACI;;;;;AAgBrD,MAAOS,0BAA0B;EAGrC5sB,YACmCgf,UAAuC,EAChEnL,SAAmD;IAD1B,KAAAmL,UAAU,GAAVA,UAAU;IACnC,KAAAnL,SAAS,GAATA,SAAS;EACf;EAEJxN,QAAQA,CAAA;IACN,IAAI,CAAC8pB,SAAS,GAAG,IAAI,CAACnR,UAAU,CAACmR,SAAS;EAC5C;EAEA9Q,WAAWA,CAAA;IACT,IAAI,CAACxL,SAAS,CAACC,KAAK,EAAE;EACxB;EAEAid,YAAYA,CAAA;IACVhgB,MAAM,CAACC,IAAI,CAACD,MAAM,CAACigB,KAAK,CAAC3G,IAAI,CAAC4G,MAAM,CAAC,qCAAqC,CAAC,EAAE,QAAQ,CAAC;EACxF;EAAC,QAAA7wB,CAAA;qBAlBUwsB,0BAA0B,EAAAxtB,+DAAA,CAI3B2d,qEAAe,GAAA3d,+DAAA,CAAA6C,kEAAA;EAAA;EAAA,QAAA5B,EAAA;UAJdusB,0BAA0B;IAAAtsB,SAAA;IAAAE,UAAA;IAAAC,QAAA,GAAArB,iEAAA;IAAAyB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAkwB,oCAAAhwB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QCrBnC9B,4DAFJ,aAAwB,aACS,aACS;QAAAA,oDAAA,2BAAoB;QAAAA,0DAAA,EAAM;QAChEA,4DAAA,gBAAqE;QAAxBA,wDAAA,mBAAA+xB,4DAAA;UAAA,OAAShwB,GAAA,CAAAke,WAAA,EAAa;QAAA,EAAC;QAClEjgB,4DAAA,eAAU;QAAAA,oDAAA,YAAK;QAEnBA,0DAFmB,EAAW,EACnB,EACL;QAEJA,4DADF,aAAgC,UACzB;QAAAA,oDAAA,GAAsB;;QAC7BA,0DAD6B,EAAM,EAC7B;QAEJA,4DADF,6BAAgC,iBACuE;QAAzBA,wDAAA,mBAAAgyB,6DAAA;UAAA,OAASjwB,GAAA,CAAA4vB,YAAA,EAAc;QAAA,EAAC;QAClG3xB,4DAAA,mBAA2B;QAAAA,oDAAA,aAAK;QAAAA,0DAAA,EAAW;QAC3CA,4DAAA,YAAM;QAAAA,oDAAA,gBAAQ;QAGpBA,0DAHoB,EAAO,EACd,EACU,EACjB;;;QARGA,uDAAA,GAAsB;QAAtBA,+DAAA,CAAAA,yDAAA,QAAA+B,GAAA,CAAAgvB,SAAA,EAAsB;;;mBDS3B7S,qEAAe,EAAA5V,+DAAA,EAAAA,mEAAA,EACfnE,iEAAa,EAAAqE,2DAAA,EACboV,sEAAgB,EAChBwF,qDAAQ;IAAApgB,MAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;AEnBmD;AACV;AACwB;AACR;AACQ;AACA;AACtB;AACb;AACmC;AAC5B;AACoB;;;;;;;;;AAuB/D,MAAOkvB,oBAAoB;EAS/BtxB,YAAoBsoB,OAAgB,EAAUD,KAAqB,EAAUtiB,kBAAsC;IAA/F,KAAAuiB,OAAO,GAAPA,OAAO;IAAmB,KAAAD,KAAK,GAALA,KAAK;IAA0B,KAAAtiB,kBAAkB,GAAlBA,kBAAkB;IAN/F,KAAAwrB,QAAQ,GAAG;MACT7I,GAAG,EAAE,KAAK;MACVjb,GAAG,EAAE;KACN;IACD,KAAA+jB,cAAc,GAAG,IAAI,CAACD,QAAQ,CAAC7I,GAAG;IAGhC,IAAI,CAACJ,OAAO,CAACiF,IAAI,CAAC,IAAI,CAAClF,KAAK,CAAC;EAC/B;EAEAhiB,QAAQA,CAAA;IACN,IAAI,CAACN,kBAAkB,CAACwnB,IAAI,EAAE;EAChC;EAEAkE,cAAcA,CAACF,QAAgB;IAC7B,IAAI,CAACC,cAAc,GAAI,IAAI,CAACA,cAAc,KAAKD,QAAQ,GAAI,IAAI,GAAGA,QAAQ;EAC5E;EAEArnB,QAAQA,CAAA;IACN6G,MAAM,CAACC,IAAI,CAAC,kCAAkC,EAAE,QAAQ,CAAC;EAC3D;EAAC,QAAA5Q,CAAA;qBAvBUkxB,oBAAoB,EAAAlyB,+DAAA,CAAA6C,6DAAA,GAAA7C,+DAAA,CAAAsI,2DAAA,GAAAtI,+DAAA,CAAAwI,8EAAA;EAAA;EAAA,QAAAvH,EAAA;UAApBixB,oBAAoB;IAAAhxB,SAAA;IAAAiR,SAAA,WAAAmgB,2BAAAxwB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;kEACpB8L,sFAAoB;;;;;;;;gFATpB,CACT3J,8EAAkB,EAClB+F,sFAAsB,EAEtBqjB,yDAAe,EACfvP,6EAAmB,CACpB,GAAA9d,iEAAA;IAAAyB,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAA2wB,8BAAAzwB,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QChCH9B,uDAAA,oBAA+B;QAI3BA,4DAFJ,aAAyB,aACU,aAEU;QAAvCA,wDAAA,mBAAAwyB,mDAAA;UAAA,OAASzwB,GAAA,CAAAswB,cAAA,CAAAtwB,GAAA,CAAAowB,QAAA,CAAA7I,GAAA,CAA4B;QAAA,EAAC;QACtCtpB,4DAAA,eAAU;QAAAA,oDAAA,iBAAU;QACtBA,0DADsB,EAAW,EAC3B;QACNA,4DAAA,aACyC;QAAvCA,wDAAA,mBAAAyyB,mDAAA;UAAA,OAAS1wB,GAAA,CAAAswB,cAAA,CAAAtwB,GAAA,CAAAowB,QAAA,CAAA9jB,GAAA,CAA4B;QAAA,EAAC;QACtCrO,4DAAA,eAAU;QAAAA,oDAAA,UAAG;QACfA,0DADe,EAAW,EACpB;QACNA,uDAAA,aAA0B;QAC1BA,4DAAA,cAAsD;QAArBA,wDAAA,mBAAA0yB,oDAAA;UAAA,OAAS3wB,GAAA,CAAA+I,QAAA,EAAU;QAAA,EAAC;QACnD9K,4DAAA,gBAAU;QAAAA,oDAAA,oBAAY;QAE1BA,0DAF0B,EAAW,EAC7B,EACF;QAMNA,uDAJA,2BAAgF,2BAEA,wBAE3C;QACvCA,0DAAA,EAAM;;;QAnB8BA,uDAAA,GAAyD;QAAzDA,wDAAA,YAAAA,6DAAA,IAAAwB,GAAA,EAAAO,GAAA,CAAAqwB,cAAA,KAAArwB,GAAA,CAAAowB,QAAA,CAAA7I,GAAA,EAAyD;QAIzDtpB,uDAAA,GAAyD;QAAzDA,wDAAA,YAAAA,6DAAA,IAAAwB,GAAA,EAAAO,GAAA,CAAAqwB,cAAA,KAAArwB,GAAA,CAAAowB,QAAA,CAAA9jB,GAAA,EAAyD;QAUzErO,uDAAA,GAA0C;QAA1CA,wDAAA,WAAA+B,GAAA,CAAAqwB,cAAA,KAAArwB,GAAA,CAAAowB,QAAA,CAAA7I,GAAA,CAA0C;QAE1CtpB,uDAAA,EAA0C;QAA1CA,wDAAA,WAAA+B,GAAA,CAAAqwB,cAAA,KAAArwB,GAAA,CAAAowB,QAAA,CAAA9jB,GAAA,CAA0C;;;mBDD1D4jB,yDAAY,EACZpyB,qDAAO,EACPsE,kEAAa,EAAAmO,4DAAA,EACbyW,sFAAoB,EACpBriB,sFAAoB,EACpBkH,sFAAoB;IAAA5K,MAAA;EAAA","sources":["./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/directives/mousedown-stop-propagation.directive.ts","./projects/eav-ui/src/app/visual-query/add-explorer/add-explorer.component.ts","./projects/eav-ui/src/app/visual-query/add-explorer/add-explorer.component.html","./projects/eav-ui/src/app/visual-query/add-explorer/add-explorer.helpers.ts","./projects/eav-ui/src/app/visual-query/plumb-editor/plumb-editor.component.ts","./projects/eav-ui/src/app/visual-query/plumb-editor/plumb-editor.component.html","./projects/eav-ui/src/app/visual-query/plumb-editor/plumb-editor.helpers.ts","./projects/eav-ui/src/app/visual-query/plumb-editor/plumber.helper.ts","./projects/eav-ui/src/app/visual-query/plumb-editor/rename-stream/rename-stream.component.ts","./projects/eav-ui/src/app/visual-query/plumb-editor/rename-stream/rename-stream.component.html","./projects/eav-ui/src/app/visual-query/query-result/query-result.component.ts","./projects/eav-ui/src/app/visual-query/query-result/query-result.component.html","./projects/eav-ui/src/app/visual-query/run-explorer/run-explorer.component.ts","./projects/eav-ui/src/app/visual-query/run-explorer/run-explorer.component.html","./projects/eav-ui/src/app/visual-query/run-explorer/run-explorer.helpers.ts","./projects/eav-ui/src/app/visual-query/services/query-definition.service.ts","./projects/eav-ui/src/app/visual-query/services/visual-query.service.ts","./projects/eav-ui/src/app/visual-query/stream-error-result/stream-error-result.component.ts","./projects/eav-ui/src/app/visual-query/stream-error-result/stream-error-result.component.html","./projects/eav-ui/src/app/visual-query/visual-query.component.ts","./projects/eav-ui/src/app/visual-query/visual-query.component.html"],"sourcesContent":["import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule, NgClass, NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { Directive, HostListener } from '@angular/core';\r\n\r\n@Directive({ selector: '[appMousedownStopPropagation]', standalone: true})\r\nexport class MousedownStopPropagationDirective {\r\n  @HostListener('mousedown', ['$event'])\r\n  onMousedown(event: MouseEvent): void {\r\n    event.stopPropagation();\r\n  }\r\n}\r\n","import { KeyValue, AsyncPipe, KeyValuePipe } from '@angular/common';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { BehaviorSubject, combineLatest, map, Observable } from 'rxjs';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { DataSource, SortedDataSources } from '../models';\r\nimport { guiTypes } from '../plumb-editor/plumb-editor.helpers';\r\nimport { VisualQueryService } from '../services/visual-query.service';\r\nimport { filterAndSortDataSources } from './add-explorer.helpers';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-add-explorer',\r\n  templateUrl: './add-explorer.component.html',\r\n  styleUrls: ['./add-explorer.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatSlideToggleModule,\r\n    MatIconModule,\r\n    AsyncPipe,\r\n    KeyValuePipe,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class AddExplorerComponent implements OnInit, OnDestroy {\r\n  toggledItems: string[] = [];\r\n  guiTypes = guiTypes;\r\n\r\n  private difficulties = eavConstants.pipelineDesigner.dataSourceDifficulties;\r\n  private difficulty$ = new BehaviorSubject(this.difficulties.default);\r\n\r\n  viewModel$: Observable<AddExplorerViewModel>;\r\n\r\n  constructor(private visualQueryService: VisualQueryService) { }\r\n\r\n  ngOnInit() {\r\n    this.viewModel$ = combineLatest([\r\n      combineLatest([this.visualQueryService.dataSources$, this.difficulty$]).pipe(\r\n        map(([dataSources, difficulty]) => filterAndSortDataSources(dataSources, difficulty)),\r\n      )\r\n    ]).pipe(map(([sorted]) => ({ sorted })));\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.difficulty$.complete();\r\n  }\r\n\r\n  toggleDifficulty(event: MatSlideToggleChange) {\r\n    const difficulty = event.checked ? this.difficulties.advanced : this.difficulties.default;\r\n    this.difficulty$.next(difficulty);\r\n  }\r\n\r\n  addDataSource(dataSource: DataSource) {\r\n    this.visualQueryService.addDataSource(dataSource);\r\n  }\r\n\r\n  toggleItem(item: string) {\r\n    ArrayHelpers.toggleInArray(item, this.toggledItems);\r\n  }\r\n\r\n  trackGroups(index: number, type: KeyValue<string, DataSource[]>) {\r\n    return type.key;\r\n  }\r\n\r\n  trackDataSources(index: number, dataSource: DataSource) {\r\n    return dataSource.PartAssemblyAndType;\r\n  }\r\n}\r\n\r\ninterface AddExplorerViewModel {\r\n  sorted: SortedDataSources;\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"editor-active-explorer fancy-scrollbar-dark\">\r\n    <div class=\"eav-show-advanced\">\r\n      <span class=\"eav-slide-toggle-label\">Show Advanced</span>\r\n      <mat-slide-toggle color=\"primary\" (change)=\"toggleDifficulty($event)\" />\r\n    </div>\r\n    @for (group of vm.sorted | keyvalue; track trackGroups($index, group)) {\r\n      <div class=\"collapsible\" [tippy]=\"guiTypes[group.key].UiHint || group.key\" tippyShowDelay=\"750\"\r\n        (click)=\"toggleItem(group.key)\">\r\n        <mat-icon>{{ guiTypes[group.key].Icon || guiTypes.Unknown.Icon }}</mat-icon>\r\n        <span>{{ guiTypes[group.key].Label ?? guiTypes[group.key].Name ?? group.key }}</span>\r\n      </div>\r\n      @if (toggledItems.includes(group.key)) {\r\n        <div class=\"list\">\r\n          @for (dataSource of group.value; track trackDataSources($index, dataSource)) {\r\n            <div class=\"list-item\"\r\n              [tippy]=\"dataSource.UiHint || dataSource.Name\" tippyShowDelay=\"750\" (click)=\"addDataSource(dataSource)\">\r\n              <mat-icon>{{ dataSource.Icon || guiTypes.Unknown.Icon }}</mat-icon>\r\n              <span>{{ dataSource.Name }}</span>\r\n            </div>\r\n          }\r\n        </div>\r\n      }\r\n    }\r\n  </div>\r\n}\r\n","import cloneDeep from 'lodash-es/cloneDeep';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { DataSource, SortedDataSources } from '../models';\r\n\r\nexport function filterAndSortDataSources(dataSources: DataSource[], maxDifficulty: number) {\r\n  if (!dataSources) { return; }\r\n\r\n  const cloned = cloneDeep(dataSources);\r\n\r\n  const filtered = cloned.filter(dataSource =>\r\n    dataSource.Difficulty <= maxDifficulty\r\n    && dataSource.PartAssemblyAndType !== eavConstants.pipelineDesigner.outDataSource.PartAssemblyAndType\r\n  );\r\n\r\n  filtered.sort((a, b) => a.Name.toLocaleLowerCase().localeCompare(b.Name.toLocaleLowerCase()));\r\n\r\n  const sorted: SortedDataSources = {};\r\n  for (const dataSource of filtered) {\r\n    const type = dataSource.PrimaryType;\r\n    if (sorted[type]) {\r\n      sorted[type].push(dataSource);\r\n    } else {\r\n      sorted[type] = [dataSource];\r\n    }\r\n  }\r\n\r\n  return sorted;\r\n}\r\n","// tslint:disable-next-line:max-line-length\r\nimport { AfterViewInit, ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit, QueryList, ViewChild, ViewChildren, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { BehaviorSubject, combineLatest, distinctUntilChanged, map, Observable } from 'rxjs';\r\nimport { BaseComponent } from '../../shared/components/base.component';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { loadScripts } from '../../shared/helpers/load-scripts.helper';\r\nimport { PipelineDataSource, PipelineResultStream, VisualDesignerData } from '../models';\r\nimport { QueryDefinitionService } from '../services/query-definition.service';\r\nimport { VisualQueryService } from '../services/visual-query.service';\r\nimport { calculateTypeInfos } from './plumb-editor.helpers';\r\nimport { PlumbEditorViewModel } from './plumb-editor.models';\r\nimport { dataSrcIdPrefix, Plumber } from './plumber.helper';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgStyle, NgClass, AsyncPipe } from '@angular/common';\r\nimport { JsonHelpers } from '../../shared/helpers/json.helpers';\r\nimport { RxHelpers } from '../../shared/rxJs/rx.helpers';\r\nimport { MousedownStopPropagationDirective } from '../../shared/directives/mousedown-stop-propagation.directive';\r\n\r\nconst jsPlumbUrl = 'https://cdnjs.cloudflare.com/ajax/libs/jsPlumb/2.14.5/js/jsplumb.min.js';\r\n\r\n@Component({\r\n  selector: 'app-plumb-editor',\r\n  templateUrl: './plumb-editor.component.html',\r\n  styles: [':host { display: block; width: 100%; height: 100%; }'],\r\n  styleUrls: ['./plumb-editor.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgStyle,\r\n    NgClass,\r\n    MatIconModule,\r\n    AsyncPipe,\r\n    MousedownStopPropagationDirective,\r\n  ],\r\n})\r\nexport class PlumbEditorComponent extends BaseComponent implements OnInit, AfterViewInit, OnDestroy {\r\n  @ViewChild('domRoot') private domRootRef: ElementRef<HTMLDivElement>;\r\n  @ViewChildren('domDataSource') private domDataSourcesRef: QueryList<ElementRef<HTMLDivElement>>;\r\n\r\n  dataSrcIdPrefix = dataSrcIdPrefix;\r\n  hardReset = false;\r\n\r\n  private plumber: Plumber;\r\n  private scriptLoaded$ = new BehaviorSubject(false);\r\n\r\n  viewModel$: Observable<PlumbEditorViewModel>;\r\n\r\n  constructor(\r\n    private visualQueryService: VisualQueryService,\r\n    private queryDefinitionService: QueryDefinitionService,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit() {\r\n    loadScripts([{ test: 'jsPlumb', src: jsPlumbUrl }], () => {\r\n      this.scriptLoaded$.next(true);\r\n    });\r\n\r\n    this.subscriptions.add(\r\n      this.visualQueryService.putEntityCountOnConnections$.subscribe(result => {\r\n        this.plumber.putEntityCountOnConnections(result);\r\n      })\r\n    );\r\n\r\n    const pipelineDesignerData$ = this.visualQueryService.pipelineModel$.pipe(\r\n      map(pipelineModel => JsonHelpers.tryParse(pipelineModel?.Pipeline.VisualDesignerData) ?? {}),\r\n      distinctUntilChanged(RxHelpers.objectsEqual),\r\n    );\r\n\r\n    this.viewModel$ = combineLatest([\r\n      this.visualQueryService.pipelineModel$,\r\n      this.visualQueryService.dataSources$,\r\n      pipelineDesignerData$,\r\n      this.visualQueryService.dataSourceConfigs$,\r\n    ]).pipe(\r\n      map(([pipelineModel, dataSources, pipelineDesignerData, dataSourceConfigs]) => {\r\n        if (pipelineModel == null || dataSources == null) { return; }\r\n\r\n        // workaround for jsPlumb not working with dom elements which it initialized on previously.\r\n        // This wipes dom entirely and gives us new elements\r\n        this.hardReset = true;\r\n        this.changeDetectorRef.detectChanges();\r\n        this.hardReset = false;\r\n        const viewModel: PlumbEditorViewModel = {\r\n          pipelineDataSources: pipelineModel.DataSources,\r\n          typeInfos: calculateTypeInfos(pipelineModel.DataSources, dataSources),\r\n          allowEdit: pipelineModel.Pipeline.AllowEdit,\r\n          showDataSourceDetails: pipelineDesignerData.ShowDataSourceDetails ?? false,\r\n          dataSourceConfigs,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngAfterViewInit() {\r\n    // https://stackoverflow.com/questions/37087864/execute-a-function-when-ngfor-finished-in-angular-2/37088348#37088348\r\n    const domDataSourcesLoaded$ = this.domDataSourcesRef.changes.pipe(map(() => true));\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([this.scriptLoaded$, domDataSourcesLoaded$]).subscribe(([scriptLoaded, domDataSourcesLoaded]) => {\r\n        if (!scriptLoaded || !domDataSourcesLoaded) { return; }\r\n\r\n        this.plumber?.destroy();\r\n        this.plumber = new Plumber(\r\n          this.domRootRef.nativeElement,\r\n          this.visualQueryService.pipelineModel$.value,\r\n          this.visualQueryService.dataSources$.value,\r\n          this.onConnectionsChanged.bind(this),\r\n          this.onDragend.bind(this),\r\n          this.onDebugStream.bind(this),\r\n          this.dialog,\r\n          this.viewContainerRef,\r\n          this.changeDetectorRef,\r\n        );\r\n      })\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.plumber?.destroy();\r\n    this.scriptLoaded$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  onConnectionsChanged() {\r\n    const connections = this.plumber.getAllConnections();\r\n    const streamsOut = this.plumber.getStreamsOut();\r\n    this.visualQueryService.changeConnections(connections, streamsOut);\r\n  }\r\n\r\n  onDragend(pipelineDataSourceGuid: string, position: VisualDesignerData) {\r\n    this.visualQueryService.changeDataSourcePosition(pipelineDataSourceGuid, position);\r\n  }\r\n\r\n  onDebugStream(stream: PipelineResultStream) {\r\n    this.visualQueryService.debugStream(stream);\r\n  }\r\n\r\n  configureDataSource(dataSource: PipelineDataSource) {\r\n    // ensure dataSource entity is saved\r\n    if (dataSource.EntityGuid.includes('unsaved')) {\r\n      this.visualQueryService.saveAndRun(true, false);\r\n    } else {\r\n      this.visualQueryService.editDataSource(dataSource);\r\n    }\r\n  }\r\n\r\n  getTypeName(partAssemblyAndType: string) {\r\n    const dataSource = this.visualQueryService.dataSources$.value.find(ds => ds.PartAssemblyAndType === partAssemblyAndType);\r\n    return this.queryDefinitionService.typeNameFilter(dataSource?.TypeNameForUi || partAssemblyAndType, 'className');\r\n  }\r\n\r\n  isOutDataSource(pipelineDataSource: PipelineDataSource) {\r\n    return pipelineDataSource.PartAssemblyAndType === eavConstants.pipelineDesigner.outDataSource.PartAssemblyAndType;\r\n  }\r\n\r\n  remove(pipelineDataSource: PipelineDataSource) {\r\n    if (!confirm(`Delete ${pipelineDataSource.Name} data source?`)) { return; }\r\n\r\n    this.plumber.removeEndpointsOnDataSource(pipelineDataSource.EntityGuid);\r\n    const connections = this.plumber.getAllConnections();\r\n    const streamsOut = this.plumber.getStreamsOut();\r\n    this.visualQueryService.removeDataSource(pipelineDataSource.EntityGuid, connections, streamsOut);\r\n  }\r\n\r\n  openHelp(url: string) {\r\n    window.open(url, '_blank');\r\n  }\r\n\r\n  editName(dataSource: PipelineDataSource) {\r\n    const newName = prompt('Rename data source', dataSource.Name)?.trim();\r\n    if (newName == null || newName === '') { return; }\r\n\r\n    this.visualQueryService.renameDataSource(dataSource.EntityGuid, newName);\r\n  }\r\n\r\n  editDescription(dataSource: PipelineDataSource) {\r\n    const newDescription = prompt('Edit description', dataSource.Description)?.trim();\r\n    if (newDescription == null) { return; }\r\n\r\n    this.visualQueryService.changeDataSourceDescription(dataSource.EntityGuid, newDescription);\r\n  }\r\n\r\n}\r\n","@if ((viewModel$ | async); as vm) {\r\n<div #domRoot id=\"pipeline-root\">\r\n  <!-- do not use trackBy, jsPlumb drag stops working properly after delete -->\r\n  @if (!hardReset) {\r\n  @for (dataSource of vm.pipelineDataSources; track dataSource) {\r\n  <div #domDataSource [id]=\"dataSrcIdPrefix + dataSource.EntityGuid\" class=\"dataSource\" [ngStyle]=\"{\r\n          'top': dataSource.VisualDesignerData.Top + 'px',\r\n          'left': dataSource.VisualDesignerData.Left + 'px',\r\n          'min-width': dataSource.VisualDesignerData.Width ? dataSource.VisualDesignerData.Width + 'px' : null\r\n          }\" [ngClass]=\"{\r\n          'show-details': vm.showDataSourceDetails && vm.dataSourceConfigs[dataSource.EntityId]?.length\r\n          }\">\r\n    <div class=\"actions left\">\r\n      <mat-icon class=\"type-info\" [title]=\"vm.typeInfos[dataSource.EntityGuid].UiHint\">\r\n        {{ vm.typeInfos[dataSource.EntityGuid].Icon }}\r\n      </mat-icon>\r\n      @if (vm.allowEdit && vm.typeInfos[dataSource.EntityGuid].EnableConfig) {\r\n      <mat-icon class=\"configure\" title=\"Configure data source\" appMousedownStopPropagation\r\n        (click)=\"configureDataSource(dataSource)\">\r\n        settings\r\n      </mat-icon>\r\n      }\r\n      @if (vm.typeInfos[dataSource.EntityGuid].HelpLink) {\r\n      <mat-icon class=\"help\" title=\"Help for this data source\" appMousedownStopPropagation\r\n        (click)=\"openHelp(vm.typeInfos[dataSource.EntityGuid].HelpLink)\">\r\n        help_outline\r\n      </mat-icon>\r\n      }\r\n    </div>\r\n    <div class=\"actions right\">\r\n      @if (vm.allowEdit && !isOutDataSource(dataSource)) {\r\n      <mat-icon class=\"delete\" title=\"Delete\" appMousedownStopPropagation (click)=\"remove(dataSource)\">\r\n        delete\r\n      </mat-icon>\r\n      }\r\n    </div>\r\n    <div class=\"name\" title=\"Click to edit name\" appMousedownStopPropagation\r\n      (click)=\"vm.allowEdit && editName(dataSource)\">\r\n      <span>{{ dataSource.Name || '(no name)' }}</span>\r\n      <mat-icon class=\"show-hover-inline\">edit</mat-icon>\r\n    </div>\r\n    <br>\r\n    <div class=\"description\" title=\"Click to edit description\" appMousedownStopPropagation\r\n      (click)=\"vm.allowEdit && editDescription(dataSource)\">\r\n      <span>{{ dataSource.Description }}</span>\r\n      <mat-icon class=\"show-hover-inline\">edit</mat-icon>\r\n    </div>\r\n    <br>\r\n    @if (vm.showDataSourceDetails && vm.dataSourceConfigs[dataSource.EntityId]?.length) {\r\n    <hr style=\"margin: 0\">\r\n    <table class=\"configs\">\r\n      @for (config of vm.dataSourceConfigs[dataSource.EntityId]; track config) {\r\n      <tr class=\"config\">\r\n        <td class=\"config-name\" [title]=\"config.name\">{{ config.name }}</td>\r\n        <td class=\"config-value\" [title]=\"config.value\">{{ config.value }}</td>\r\n      </tr>\r\n      }\r\n    </table>\r\n    }\r\n    <div class=\"typename\" [title]=\"dataSource.PartAssemblyAndType\">\r\n      Type: {{ getTypeName(dataSource.PartAssemblyAndType) }}\r\n    </div>\r\n    @if (vm.allowEdit && vm.typeInfos[dataSource.EntityGuid].DynamicOut) {\r\n    <div class=\"add-endpoint sourceEndpoint dynamic\" title=\"Drag a new Out-Connection\">\r\n    </div>\r\n    }\r\n    @if (vm.allowEdit && vm.typeInfos[dataSource.EntityGuid].DynamicIn) {\r\n    <div class=\"many-in targetEndpoint dynamic\" title=\"This data source supports multiple In-Connections\">\r\n    </div>\r\n    }\r\n  </div>\r\n  }\r\n  }\r\n</div>\r\n}","import { DataSource, PipelineDataSource } from '../models';\r\nimport { GuiTypes, TypeInfo, TypeInfos } from './plumb-editor.models';\r\n\r\nexport const guiTypes: GuiTypes = {\r\n  App: { Name: 'App', Label: 'App DataSources', Icon: 'star', UiHint: 'DataSources from the current App' },\r\n  Cache: { Name: 'Cache', Icon: 'history', UiHint: 'Caching of data' },\r\n  Filter: { Name: 'Filter', Icon: 'filter_list', UiHint: 'Filter data - usually returning less items than came in' },\r\n  Logic: { Name: 'Logic', Icon: 'share', UiHint: 'Logic operations - usually choosing between different streams' },\r\n  Lookup: { Name: 'Lookup', Icon: 'search', UiHint: 'Lookup operation - usually looking for other data based on a criteria' },\r\n  Modify: { Name: 'Modify', Icon: 'edit_attributes', UiHint: 'Modify data - usually changing, adding or removing values' },\r\n  Security: { Name: 'Security', Icon: 'account_circle', UiHint: 'Security - usually limit what the user sees based on his identity' },\r\n  Sort: { Name: 'Sort', Icon: 'sort', UiHint: 'Sort the items' },\r\n  Source: { Name: 'Source', Icon: 'cloud_upload', UiHint: 'Source of new data - usually SQL, CSV or similar' },\r\n  Target: { Name: 'Target', Icon: 'adjust', UiHint: 'Target - usually just a destination of data' },\r\n  Unknown: { Name: 'Unknown', Icon: 'fiber_manual_record', UiHint: 'Unknown type' },\r\n  Debug: { Name: 'Debug', Icon: 'bug_report', UiHint: 'Debugging Tools'},\r\n  System: { Name: 'System', Icon: 'military_tech', UiHint: 'System Data' },\r\n};\r\n\r\nexport function calculateTypeInfos(pipelineDataSources: PipelineDataSource[], dataSources: DataSource[]) {\r\n  const typeInfos: TypeInfos = {};\r\n\r\n  for (const pipelineDataSource of pipelineDataSources) {\r\n    let typeInfo: TypeInfo;\r\n    const dataSource = dataSources.find(ds => ds.PartAssemblyAndType === pipelineDataSource.PartAssemblyAndType);\r\n    if (dataSource) {\r\n      typeInfo = { ...(dataSource.PrimaryType ? guiTypes[dataSource.PrimaryType] : guiTypes.Unknown) };\r\n      if (dataSource.Icon != null) { typeInfo.Icon = dataSource.Icon; }\r\n      if (dataSource.DynamicIn != null) { typeInfo.DynamicIn = dataSource.DynamicIn; }\r\n      if (dataSource.DynamicOut != null) { typeInfo.DynamicOut = dataSource.DynamicOut; }\r\n      if (dataSource.HelpLink != null) { typeInfo.HelpLink = dataSource.HelpLink; }\r\n      if (dataSource.EnableConfig != null) { typeInfo.EnableConfig = dataSource.EnableConfig; }\r\n      if (dataSource.UiHint != null) { typeInfo.UiHint = dataSource.UiHint; }\r\n    }\r\n    if (!typeInfo) { typeInfo = { ...guiTypes.Unknown }; }\r\n    typeInfos[pipelineDataSource.EntityGuid] = typeInfo;\r\n  }\r\n\r\n  return typeInfos;\r\n}\r\n","import { ChangeDetectorRef, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog, MatDialogRef } from '@angular/material/dialog';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { EavWindow } from '../../shared/models/eav-window.model';\r\nimport { DataSource, PipelineDataSource, PipelineModel, PipelineResult, PipelineResultStream, StreamWire, VisualDesignerData } from '../models';\r\nimport { EndpointInfo, PlumbType } from './plumb-editor.models';\r\nimport { RenameStreamComponent } from './rename-stream/rename-stream.component';\r\nimport { RenameStreamDialogData } from './rename-stream/rename-stream.models';\r\n\r\ndeclare const window: EavWindow;\r\n\r\nexport const dataSrcIdPrefix = 'dataSource_';\r\n\r\nexport class Plumber {\r\n  private instance: PlumbType;\r\n  private lineCount = 0;\r\n  private linePaintDefault = {\r\n    stroke: '#61B7CF',\r\n    strokeWidth: 4,\r\n    outlineStroke: 'white',\r\n    outlineWidth: 2,\r\n  };\r\n  private lineColors = [\r\n    '#009688', '#00bcd4', '#3f51b5', '#9c27b0', '#e91e63',\r\n    '#db4437', '#ff9800', '#60a917', '#60a917', '#008a00',\r\n    '#00aba9', '#1ba1e2', '#0050ef', '#6a00ff', '#aa00ff',\r\n    '#f472d0', '#d80073', '#a20025', '#e51400', '#fa6800',\r\n    '#f0a30a', '#e3c800', '#825a2c', '#6d8764', '#647687',\r\n    '#76608a', '#a0522d',\r\n  ];\r\n  private maxCols = this.lineColors.length - 1;\r\n  private uuidColorMap: Record<string, any> = {};\r\n  private bulkDelete = false;\r\n  private dialogRef: MatDialogRef<RenameStreamComponent>;\r\n\r\n  constructor(\r\n    private jsPlumbRoot: HTMLElement,\r\n    private pipelineModel: PipelineModel,\r\n    private dataSources: DataSource[],\r\n    private onConnectionsChanged: () => void,\r\n    private onDragend: (pipelineDataSourceGuid: string, position: VisualDesignerData) => void,\r\n    private onDebugStream: (stream: PipelineResultStream) => void,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    this.instance = window.jsPlumb.getInstance(this.getInstanceDefaults(this.jsPlumbRoot));\r\n    this.instance.batch(() => {\r\n      this.initDomDataSources();\r\n      this.initWirings();\r\n      this.bindEvents();\r\n    });\r\n    // spm NOTE: repaint after initial paint fixes:\r\n    // Error: <svg> attribute width: Expected length, \"-Infinity\".\r\n    this.instance.repaintEverything();\r\n  }\r\n\r\n  destroy() {\r\n    this.dialogRef?.close();\r\n    this.instance.reset();\r\n    this.instance.unbindContainer();\r\n  }\r\n\r\n  removeEndpointsOnDataSource(pipelineDataSourceGuid: string) {\r\n    const elementId = dataSrcIdPrefix + pipelineDataSourceGuid;\r\n    this.bulkDelete = true;\r\n    this.instance.batch(() => {\r\n      this.instance.selectEndpoints({ element: elementId }).delete();\r\n    });\r\n    this.bulkDelete = false;\r\n  }\r\n\r\n  getAllConnections() {\r\n    const connectionInfos: StreamWire[] = this.instance.getAllConnections().map((connection: PlumbType) => {\r\n      const wire: StreamWire = {\r\n        From: connection.sourceId.replace(dataSrcIdPrefix, ''),\r\n        Out: connection.endpoints[0].getOverlay('endpointLabel').label,\r\n        To: connection.targetId.replace(dataSrcIdPrefix, ''),\r\n        In: connection.endpoints[1].getOverlay('endpointLabel').label,\r\n      };\r\n      return wire;\r\n    });\r\n    return connectionInfos;\r\n  }\r\n\r\n  getStreamsOut() {\r\n    const streamsOut: string[] = [];\r\n    this.instance.selectEndpoints({ target: dataSrcIdPrefix + 'Out' }).each((endpoint: PlumbType) => {\r\n      streamsOut.push(endpoint.getOverlay('endpointLabel').label);\r\n    });\r\n    const streamsOutStr = streamsOut.join(',');\r\n    return streamsOutStr;\r\n  }\r\n\r\n  putEntityCountOnConnections(result: PipelineResult) {\r\n    result.Streams?.forEach(stream => {\r\n      const sourceElementId = dataSrcIdPrefix + stream.Source;\r\n      const outTargets = ['00000000-0000-0000-0000-000000000000', this.pipelineModel.Pipeline.EntityGuid];\r\n      const targetElementId = outTargets.includes(stream.Target) ? dataSrcIdPrefix + 'Out' : dataSrcIdPrefix + stream.Target;\r\n\r\n      const fromUuid = sourceElementId + '_out_' + stream.SourceOut;\r\n      const toUuid = targetElementId + '_in_' + stream.TargetIn;\r\n\r\n      const sEndp: PlumbType = this.instance.getEndpoint(fromUuid);\r\n      sEndp?.connections\r\n        ?.filter((connection: PlumbType) => connection.endpoints[1].getUuid() === toUuid)\r\n        ?.forEach((connection: PlumbType) => {\r\n          const label = !stream.Error ? stream.Count.toString() : '';\r\n          const cssClass = 'streamEntitiesCount ' + (!stream.Error ? '' : 'streamEntitiesError');\r\n          connection.setLabel({\r\n            label,\r\n            cssClass,\r\n            events: {\r\n              click: (overlay: PlumbType) => {\r\n                if (!this.pipelineModel.Pipeline.AllowEdit) { return; }\r\n                this.onDebugStream(stream);\r\n              },\r\n            },\r\n          });\r\n        });\r\n    });\r\n  }\r\n\r\n  private nextLinePaintStyle(uuid: string) {\r\n    return (\r\n      this.uuidColorMap[uuid] ||\r\n      (this.uuidColorMap[uuid] = Object.assign({}, this.linePaintDefault, { stroke: this.lineColors[this.lineCount++ % this.maxCols] }))\r\n    );\r\n  }\r\n\r\n  private getInstanceDefaults(container: HTMLElement) {\r\n    const defaults = {\r\n      Container: container,\r\n      Connector: ['Bezier', { curviness: 70 }],\r\n      PaintStyle: this.nextLinePaintStyle('dummy'),\r\n      HoverPaintStyle: {\r\n        stroke: '#216477',\r\n        strokeWidth: 4,\r\n        outlineStroke: 'white',\r\n        outlineWidth: 2,\r\n      },\r\n    };\r\n    return defaults;\r\n  }\r\n\r\n  /** Create sources, targets and endpoints */\r\n  private initDomDataSources() {\r\n    for (const pipelineDataSource of this.pipelineModel.DataSources) {\r\n      const domDataSource = this.jsPlumbRoot.querySelector<HTMLElement>('#' + dataSrcIdPrefix + pipelineDataSource.EntityGuid);\r\n      if (!domDataSource) { continue; }\r\n      const dataSource = this.dataSources.find(ds => ds.PartAssemblyAndType === pipelineDataSource.PartAssemblyAndType);\r\n      if (!dataSource) { continue; }\r\n\r\n      if (this.pipelineModel.Pipeline.AllowEdit) {\r\n        // WARNING! Must happen before instance.makeSource()\r\n        this.instance.draggable(domDataSource, {\r\n          grid: [20, 20], stop: (event: PlumbType) => {\r\n            const element: HTMLElement = event.el;\r\n            const pipelineDataSourceGuid: string = element.id.replace(dataSrcIdPrefix, '');\r\n            const position: VisualDesignerData = {\r\n              Top: event.finalPos[1],\r\n              Left: event.finalPos[0],\r\n            };\r\n            setTimeout(() => { this.onDragend(pipelineDataSourceGuid, position); });\r\n          }\r\n        });\r\n      }\r\n\r\n      // Add Out-Endpoints from Definition\r\n      dataSource.Out?.forEach(name => {\r\n        this.addEndpoint(domDataSource, name, false, pipelineDataSource);\r\n      });\r\n\r\n      // Add In-Endpoints from Definition\r\n      dataSource.In?.forEach(name => {\r\n        this.addEndpoint(domDataSource, name, true, pipelineDataSource);\r\n      });\r\n\r\n      // Make DataSource a Target for new Endpoints (if .In is an Array)\r\n      if (dataSource.In) {\r\n        const targetEndpointUnlimited = this.buildTargetEndpoint(pipelineDataSource.EntityGuid);\r\n        targetEndpointUnlimited.maxConnections = -1;\r\n        this.instance.makeTarget(domDataSource, targetEndpointUnlimited);\r\n      }\r\n\r\n      if (dataSource.DynamicOut) {\r\n        this.instance.makeSource(domDataSource, this.buildSourceEndpoint(pipelineDataSource.EntityGuid), { filter: '.add-endpoint' });\r\n      }\r\n    }\r\n  }\r\n\r\n  /** Create wires */\r\n  private initWirings() {\r\n    this.pipelineModel.Pipeline.StreamWiring?.forEach(wire => {\r\n      // read connections from Pipeline\r\n      const sourceElementId = dataSrcIdPrefix + wire.From;\r\n      const fromUuid = sourceElementId + '_out_' + wire.Out;\r\n      const targetElementId = dataSrcIdPrefix + wire.To;\r\n      const toUuid = targetElementId + '_in_' + wire.In;\r\n\r\n      // Ensure In-Endpoint exist\r\n      if (!this.instance.getEndpoint(fromUuid)) {\r\n        const domDataSource = this.jsPlumbRoot.querySelector<HTMLElement>('#' + sourceElementId);\r\n        if (!domDataSource) { return; }\r\n\r\n        const guid: string = domDataSource.id.replace(dataSrcIdPrefix, '');\r\n        const pipelineDataSource = this.pipelineModel.DataSources.find(pipeDataSource => pipeDataSource.EntityGuid === guid);\r\n        this.addEndpoint(domDataSource, wire.Out, false, pipelineDataSource);\r\n      }\r\n\r\n      // Ensure Out-Endpoint exist\r\n      if (!this.instance.getEndpoint(toUuid)) {\r\n        const domDataSource = this.jsPlumbRoot.querySelector<HTMLElement>('#' + targetElementId);\r\n        if (!domDataSource) { return; }\r\n\r\n        const guid: string = domDataSource.id.replace(dataSrcIdPrefix, '');\r\n        const pipelineDataSource = this.pipelineModel.DataSources.find(pipeDataSource => pipeDataSource.EntityGuid === guid);\r\n        this.addEndpoint(domDataSource, wire.In, true, pipelineDataSource);\r\n      }\r\n\r\n      try {\r\n        this.instance.connect({\r\n          uuids: [fromUuid, toUuid],\r\n          paintStyle: this.nextLinePaintStyle(fromUuid),\r\n        });\r\n      } catch (e) {\r\n        console.error({ message: 'Connection failed', from: fromUuid, to: toUuid });\r\n      }\r\n    });\r\n  }\r\n\r\n  private addEndpoint(domDataSource: HTMLElement, endpointName: string, isIn: boolean, pipelineDataSource: PipelineDataSource) {\r\n    const dataSource = this.dataSources.find(d => d.PartAssemblyAndType === pipelineDataSource.PartAssemblyAndType);\r\n    const isDynamic = isIn\r\n      ? !dataSource.In?.some(name => this.getEndpointInfo(name, false))\r\n      : !dataSource.Out?.some(name => this.getEndpointInfo(name, false));\r\n    const endpointInfo = this.getEndpointInfo(endpointName, isDynamic);\r\n\r\n    let style: string;\r\n    if (isDynamic) {\r\n      style = 'dynamic';\r\n    } else if (!endpointInfo.required) {\r\n      style = '';\r\n    } else {\r\n      const wireExists = this.pipelineModel.Pipeline.StreamWiring?.some(wire => {\r\n        const targetElementId = dataSrcIdPrefix + wire.To;\r\n        const targetEndpointName = wire.In;\r\n\r\n        return targetElementId === domDataSource.id && targetEndpointName === endpointInfo.name;\r\n      });\r\n      style = wireExists ? '' : 'required';\r\n    }\r\n\r\n    const uuid = domDataSource.id + (isIn ? '_in_' : '_out_') + endpointInfo.name;\r\n    const model = isIn\r\n      ? this.buildTargetEndpoint(pipelineDataSource.EntityGuid, style)\r\n      : this.buildSourceEndpoint(pipelineDataSource.EntityGuid, style);\r\n    // Endpoints on Out-DataSource must be always enabled\r\n    const params = {\r\n      uuid,\r\n      enabled: this.pipelineModel.Pipeline.AllowEdit\r\n        || pipelineDataSource.EntityGuid === eavConstants.pipelineDesigner.outDataSource.EntityGuid\r\n    };\r\n\r\n    const endpoint: PlumbType = this.instance.addEndpoint(domDataSource, model, params);\r\n    endpoint.getOverlay('endpointLabel').setLabel(endpointInfo.name);\r\n  }\r\n\r\n  private buildSourceEndpoint(pipelineDataSourceGuid: string, style?: string) {\r\n    const isSource = true;\r\n    const sourceEndpoint = {\r\n      paintStyle: { fill: 'transparent', radius: 10 },\r\n      cssClass: 'sourceEndpoint ' + style ?? '',\r\n      maxConnections: -1,\r\n      isSource,\r\n      anchor: ['Continuous', { faces: ['top'] }],\r\n      overlays: this.getEndpointOverlays(isSource),\r\n      events: {\r\n        click: (endpointOrOverlay: PlumbType) => {\r\n          this.onChangeLabel(endpointOrOverlay, isSource, pipelineDataSourceGuid);\r\n        },\r\n      },\r\n    };\r\n    return sourceEndpoint;\r\n  }\r\n\r\n  private buildTargetEndpoint(pipelineDataSourceGuid: string, style?: string) {\r\n    const isSource = false;\r\n    const targetEndpoint = {\r\n      paintStyle: { fill: 'transparent', radius: 10 },\r\n      cssClass: 'targetEndpoint ' + style ?? '',\r\n      maxConnections: 1,\r\n      isTarget: !isSource,\r\n      anchor: ['Continuous', { faces: ['bottom'] }],\r\n      overlays: this.getEndpointOverlays(isSource),\r\n      dropOptions: { hoverClass: 'hover', activeClass: 'active' },\r\n      events: {\r\n        click: (endpointOrOverlay: PlumbType) => {\r\n          this.onChangeLabel(endpointOrOverlay, isSource, pipelineDataSourceGuid);\r\n        },\r\n      },\r\n    };\r\n    return targetEndpoint;\r\n  }\r\n\r\n  private getEndpointOverlays(isSource: boolean) {\r\n    return [\r\n      [\r\n        'Label', {\r\n          id: 'endpointLabel',\r\n          location: [0.5, isSource ? 0 : 1],\r\n          label: 'Default',\r\n          cssClass: isSource ? 'endpointSourceLabel' : 'endpointTargetLabel',\r\n        },\r\n      ],\r\n    ];\r\n  }\r\n\r\n  private onChangeLabel(endpointOrOverlay: PlumbType, isSource: boolean, pipelineDataSourceGuid: string) {\r\n    if (!this.pipelineModel.Pipeline.AllowEdit) { return; }\r\n\r\n    const overlay: PlumbType = endpointOrOverlay.getOverlay ? endpointOrOverlay.getOverlay('endpointLabel') : endpointOrOverlay;\r\n    const data: RenameStreamDialogData = {\r\n      pipelineDataSourceGuid,\r\n      isSource,\r\n      label: overlay.label,\r\n    };\r\n    this.dialogRef = this.dialog.open(RenameStreamComponent, {\r\n      autoFocus: false,\r\n      data,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    this.dialogRef.afterClosed().subscribe(newLabel => {\r\n      if (!newLabel) { return; }\r\n      overlay.setLabel(newLabel);\r\n      setTimeout(() => { this.onConnectionsChanged(); });\r\n    });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private bindEvents() {\r\n    this.instance.bind('connectionDetached', (info: PlumbType) => {\r\n      if (this.bulkDelete) { return; }\r\n      const domDataSource: HTMLElement = info.target;\r\n      const pipelineDataSource = this.pipelineModel.DataSources.find(\r\n        pipelineDS => pipelineDS.EntityGuid === domDataSource.id.replace(dataSrcIdPrefix, '')\r\n      );\r\n      const dataSource = this.dataSources.find(ds => ds.PartAssemblyAndType === pipelineDataSource.PartAssemblyAndType);\r\n      const label: string = info.targetEndpoint.getOverlay('endpointLabel').label;\r\n      const isDynamic = !dataSource.In.some(name => this.getEndpointInfo(name, false).name === label);\r\n      if (isDynamic) {\r\n        this.instance.deleteEndpoint(info.targetEndpoint);\r\n        setTimeout(() => { this.onConnectionsChanged(); });\r\n      } else {\r\n        setTimeout(() => { this.onConnectionsChanged(); });\r\n      }\r\n    });\r\n\r\n    this.instance.bind('connection', (info: PlumbType) => {\r\n      if (info.sourceId === info.targetId) {\r\n        setTimeout(() => {\r\n          this.instance.deleteConnection(info.connection, { fireEvent: false });\r\n          setTimeout(() => { this.onConnectionsChanged(); });\r\n        });\r\n        return;\r\n      }\r\n      const endpointLabel: PlumbType = info.targetEndpoint.getOverlay('endpointLabel');\r\n      const labelPrompt: string = endpointLabel.getLabel();\r\n      const endpoints: PlumbType[] = this.instance.getEndpoints(info.target.id);\r\n      const targetEndpointHasSameLabel = endpoints.some(endpoint => {\r\n        const label: string = endpoint.getOverlay('endpointLabel').getLabel();\r\n        return label === labelPrompt &&\r\n          info.targetEndpoint.id !== endpoint.id &&\r\n          (endpoint.canvas as HTMLCanvasElement).classList.contains('targetEndpoint');\r\n      });\r\n      if (targetEndpointHasSameLabel) {\r\n        endpointLabel.setLabel(`PleaseRename${Math.floor(Math.random() * 99999)}`);\r\n      }\r\n      setTimeout(() => { this.onConnectionsChanged(); });\r\n    });\r\n  }\r\n\r\n  private getEndpointInfo(endpointName: string, isDynamic: boolean): EndpointInfo {\r\n    let name: string;\r\n    let required: boolean;\r\n\r\n    if (isDynamic) {\r\n      name = endpointName;\r\n      required = false;\r\n    } else {\r\n      const trimmed = endpointName.trim();\r\n      required = trimmed.endsWith('*');\r\n      name = !required ? trimmed : trimmed.substring(0, trimmed.length - 1);\r\n    }\r\n\r\n    const endpointInfo: EndpointInfo = {\r\n      name,\r\n      required,\r\n    };\r\n    return endpointInfo;\r\n  }\r\n}\r\n","import { ChangeDetectorRef, Component, HostBinding, Inject, OnDestroy, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith, Subscription } from 'rxjs';\r\nimport { ContentTypesService } from '../../../app-administration/services';\r\nimport { BaseComponent } from '../../../shared/components/base.component';\r\nimport { eavConstants, ScopeOption } from '../../../shared/constants/eav.constants';\r\nimport { VisualQueryService } from '../../services/visual-query.service';\r\nimport { RenameStreamDialogControls, RenameStreamDialogData, RenameStreamDialogFormValue } from './rename-stream.models';\r\nimport { NgClass } from '@angular/common';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { FieldHintComponent } from '../../../shared/components/field-hint/field-hint.component';\r\nimport { ClickStopPropagationDirective } from '../../../shared/directives/click-stop-propagation.directive';\r\n\r\n@Component({\r\n  selector: 'app-rename-stream',\r\n  templateUrl: './rename-stream.component.html',\r\n  styleUrls: ['./rename-stream.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    NgClass,\r\n    MatDialogActions,\r\n    MatSlideToggleModule,\r\n    FieldHintComponent,\r\n    ClickStopPropagationDirective,\r\n  ]\r\n})\r\nexport class RenameStreamComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  controls: RenameStreamDialogControls;\r\n  isSource = this.dialogData.isSource;\r\n  pipelineResultExists = this.visualQueryService.pipelineResult != null;\r\n  scopeOptions: ScopeOption[] = [];\r\n  labelOptions: string[] = [];\r\n  guidedLabel = true;\r\n  advancedMode = false;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: RenameStreamDialogData,\r\n    private dialogRef: MatDialogRef<RenameStreamComponent>,\r\n    private visualQueryService: VisualQueryService,\r\n    private contentTypesService: ContentTypesService,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(label?: string): void {\r\n    this.dialogRef.close(label);\r\n  }\r\n\r\n  toggleGuidedLabel(guidedLabel: boolean): void {\r\n    this.guidedLabel = guidedLabel;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  rename(): void {\r\n    const formValue: RenameStreamDialogFormValue = this.form.getRawValue();\r\n    this.closeDialog(formValue.label);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({\r\n      label: new UntypedFormControl(this.dialogData.label, Validators.required),\r\n      scope: new UntypedFormControl(eavConstants.scopes.default.value),\r\n    });\r\n    this.controls = this.form.controls as any;\r\n\r\n    if (!this.isSource || !this.pipelineResultExists) { return; }\r\n\r\n    this.subscriptions.add(\r\n      this.controls.scope.valueChanges.pipe(\r\n        startWith<string>(this.controls.scope.value),\r\n        distinctUntilChanged(),\r\n      ).subscribe(scope => {\r\n        this.labelOptions = Object.values(this.visualQueryService.pipelineResult.Sources)\r\n          .find(source => source.Guid === this.dialogData.pipelineDataSourceGuid).Out\r\n          .filter(out => out.Scope === scope)\r\n          .map(out => out.Name);\r\n        if (!this.labelOptions.includes(this.controls.label.value) && this.controls.label.value != null) {\r\n          this.controls.label.patchValue(null);\r\n        }\r\n      })\r\n    );\r\n\r\n    this.contentTypesService.getScopes().subscribe(scopes => {\r\n      const sourceOut = Object.values(this.visualQueryService.pipelineResult.Sources)\r\n        .find(source => source.Guid === this.dialogData.pipelineDataSourceGuid).Out;\r\n      const filtered = scopes.filter(s => sourceOut.some(o => o.Scope === s.value));\r\n      this.scopeOptions = filtered;\r\n      this.changeDetectorRef.markForCheck();\r\n    });\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Rename stream</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <form [formGroup]=\"form\">\r\n      <!-- Simple form -->\r\n      @if (!isSource || !pipelineResultExists) {\r\n        <!-- Label -->\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Label</mat-label>\r\n          <input matInput type=\"text\" formControlName=\"label\" required>\r\n        </mat-form-field>\r\n        @if (isSource && !pipelineResultExists) {\r\n          <app-field-hint>\r\n            You will get suggestions for out-streams after you run query\r\n          </app-field-hint>\r\n        }\r\n        @if (controls.label.touched && controls.label.errors?.required) {\r\n          <app-field-hint [isError]=\"true\">\r\n            This field is required\r\n          </app-field-hint>\r\n        }\r\n      }\r\n\r\n      <!-- Rich form -->\r\n      @if (isSource && pipelineResultExists) {\r\n        <!-- Scope -->\r\n        @if (advancedMode && guidedLabel) {\r\n          <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n            <mat-label>Scope</mat-label>\r\n            <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions.length ? 'No items found' : ''\">\r\n              @for (scopeOption of scopeOptions; track scopeOption) {\r\n                <mat-option [value]=\"scopeOption.value\">\r\n                  {{ scopeOption.name }}\r\n                </mat-option>\r\n              }\r\n            </mat-select>\r\n          </mat-form-field>\r\n          <app-field-hint>\r\n            The scope should almost never be changed -\r\n            <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n          </app-field-hint>\r\n        }\r\n        <!-- Label -->\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Label</mat-label>\r\n          @if (guidedLabel) {\r\n            <mat-select formControlName=\"label\" required\r\n              [placeholder]=\"!labelOptions.length ? 'No items found' : ''\">\r\n              @for (labelOption of labelOptions; track labelOption) {\r\n                <mat-option [value]=\"labelOption\">\r\n                  {{ labelOption }}\r\n                </mat-option>\r\n              }\r\n            </mat-select>\r\n          }\r\n          @if (!guidedLabel) {\r\n            <input matInput type=\"text\" formControlName=\"label\" required>\r\n          }\r\n          <div matTextSuffix class=\"eav-selection-suffix\">\r\n            <button mat-icon-button class=\"eav-selection-suffix-button\" type=\"button\" [ngClass]=\"{ 'active': guidedLabel }\" tippy=\"Pick existing value\"\r\n              (click)=\"toggleGuidedLabel(true)\">\r\n              <mat-icon class=\"eav-icon\">search</mat-icon>\r\n            </button>\r\n            <button mat-icon-button class=\"eav-selection-suffix-button\" type=\"button\" [ngClass]=\"{ 'active': !guidedLabel }\" tippy=\"Manual entry\"\r\n              (click)=\"toggleGuidedLabel(false)\">\r\n              <mat-icon class=\"eav-icon\">text_fields</mat-icon>\r\n            </button>\r\n          </div>\r\n        </mat-form-field>\r\n        @if (controls.label.touched && controls.label.errors?.required) {\r\n          <app-field-hint [isError]=\"true\">\r\n            This field is required\r\n          </app-field-hint>\r\n        }\r\n      }\r\n    </form>\r\n  </div>\r\n  <mat-dialog-actions class=\"eav-dialog-actions\">\r\n    <!-- Extra button for rich form -->\r\n    <div>\r\n      @if (isSource && pipelineResultExists) {\r\n        <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n          {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n        </mat-slide-toggle>\r\n      }\r\n    </div>\r\n    <div>\r\n      <button mat-raised-button type=\"button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button type=\"button\" color=\"accent\" [disabled]=\"!form.valid\" (click)=\"rename()\">\r\n        Rename\r\n      </button>\r\n    </div>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\r\nimport { DebugStreamInfo, PipelineResultQuery, PipelineResultSources, PipelineResultStream } from '../models';\r\nimport { VisualQueryService } from '../services/visual-query.service';\r\nimport { QueryResultDialogData } from './query-result.models';\r\nimport { JsonPipe, KeyValuePipe } from '@angular/common';\r\nimport { MatTabsModule } from '@angular/material/tabs';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\n@Component({\r\n  selector: 'app-query-result',\r\n  templateUrl: './query-result.component.html',\r\n  styleUrls: ['./query-result.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatTabsModule,\r\n    JsonPipe,\r\n    KeyValuePipe,\r\n  ],\r\n})\r\nexport class QueryResultComponent implements OnInit {\r\n  parameters: string[];\r\n  timeUsed: number;\r\n  ticksUsed: number;\r\n  top: number;\r\n  optionsForTop: number[];\r\n  result: PipelineResultQuery;\r\n  debugStream: DebugStreamInfo;\r\n  sources: PipelineResultSources;\r\n  streams: PipelineResultStream[];\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: QueryResultDialogData,\r\n    private dialogRef: MatDialogRef<QueryResultComponent>,\r\n    private visualQueryService: VisualQueryService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    const pipeline = this.visualQueryService.pipelineModel$.value.Pipeline;\r\n    const params = (pipeline.Params?.split('\\n') ?? []).filter(el => !!el);\r\n    const testParams = (pipeline.TestParameters?.split('\\n') ?? []).filter(el => !!el);\r\n    this.parameters = [].concat(params, testParams);\r\n    this.timeUsed = this.dialogData.result.QueryTimer.Milliseconds;\r\n    this.ticksUsed = this.dialogData.result.QueryTimer.Ticks;\r\n    this.top = this.dialogData.top;\r\n    this.optionsForTop = [25, 100, 1000, 0];\r\n    this.result = this.dialogData.result.Query;\r\n    this.debugStream = this.dialogData.debugStream;\r\n    this.sources = this.dialogData.result.Sources;\r\n    this.streams = this.dialogData.result.Streams;\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  show(top: number) {\r\n    if (top === this.top) { return; }\r\n\r\n    if (this.debugStream) {\r\n      this.visualQueryService.debugStream(this.debugStream.original, top);\r\n    } else {\r\n      this.visualQueryService.runPipeline(top);\r\n    }\r\n\r\n    this.closeDialog();\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      Query Results\r\n      @if (debugStream) {\r\n        for Stream: \"{{ debugStream.name }}\" on Source: \"{{ debugStream.sourceName }}\"\r\n      }\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <p>\r\n      The Full result was logged to the Browser Console. Further down you'll find more debug-infos.\r\n      Executed in {{ timeUsed }}ms ({{ ticksUsed }} ticks)\r\n    </p>\r\n    <mat-tab-group dynamicHeight color=\"accent\" class=\"eav-tab-group\">\r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Results\">\r\n          <span>Results</span>\r\n        </div>\r\n\r\n        <p class=\"eav-tab-description\">\r\n          @if (top === 0) {\r\n            Showing All results\r\n          }\r\n          @if (top !== 0) {\r\n            Showing top {{ top }} results\r\n          }\r\n          @for (option of optionsForTop; track option) {\r\n            <button mat-button (click)=\"show(option)\">\r\n              Show\r\n              @if (option === 0) {\r\n                All\r\n              }\r\n              @if (option !== 0) {\r\n                {{ option }}\r\n              }\r\n            </button>\r\n          }\r\n        </p>\r\n        <pre>{{ result | json }}</pre>\r\n      </mat-tab>\r\n\r\n      @if (parameters?.length) {\r\n        <mat-tab>\r\n          <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Parameters\">\r\n            <span>Parameters</span>\r\n          </div>\r\n          <br />\r\n          <ul>\r\n            @for (param of parameters; track param) {\r\n              <li>{{ param }}</li>\r\n            }\r\n          </ul>\r\n        </mat-tab>\r\n      }\r\n\r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Sources\">\r\n          <span>Sources</span>\r\n        </div>\r\n\r\n        <br />\r\n        <table>\r\n          <tr>\r\n            <th>Name and Guid</th>\r\n            <th>Type</th>\r\n            <th>Configuration</th>\r\n            <th>Error</th>\r\n          </tr>\r\n          @for (source of sources | keyvalue; track source) {\r\n            <tr>\r\n              <td>\r\n                @if (source.value.Definition?.Name) {\r\n                  <div>{{ source.value.Definition?.Name }}</div>\r\n                }\r\n                <pre>{{ source.value.Guid }}</pre>\r\n              </td>\r\n              <td>{{ source.value.Type }}</td>\r\n              <td>\r\n                <ol>\r\n                  @for (config of source.value.Configuration | keyvalue; track config) {\r\n                    <li>\r\n                      <b>{{ config.key }}</b>=<em>{{ config.value }}</em>\r\n                    </li>\r\n                  }\r\n                </ol>\r\n              </td>\r\n              <td>{{ source.value.Error }}</td>\r\n            </tr>\r\n          }\r\n        </table>\r\n      </mat-tab>\r\n\r\n      <mat-tab>\r\n        <div *matTabLabel class=\"mat-tab-label-box\" tippy=\"Streams\">\r\n          <span>Streams</span>\r\n        </div>\r\n\r\n        <br />\r\n        <table>\r\n          <tr>\r\n            <th>Source</th>\r\n            <th>Target</th>\r\n            <th>Items</th>\r\n            <th>Error</th>\r\n          </tr>\r\n          @for (stream of streams; track stream) {\r\n            <tr>\r\n              <td>\r\n                <pre>{{ stream.Source + \":\" + stream.SourceOut }}</pre>\r\n              </td>\r\n              <td>\r\n                <pre>{{ stream.Target + \":\" + stream.TargetIn }}</pre>\r\n              </td>\r\n              <td>{{ stream.Count }}</td>\r\n              <td>{{ stream.Error }}</td>\r\n            </tr>\r\n          }\r\n        </table>\r\n      </mat-tab>\r\n    </mat-tab-group>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { map, Observable } from 'rxjs';\r\nimport { GoToDevRest } from '../../dev-rest';\r\nimport { Context } from '../../shared/services/context';\r\nimport { PipelineModel } from '../models';\r\nimport { VisualQueryService } from '../services/visual-query.service';\r\nimport { calculateWarnings } from './run-explorer.helpers';\r\nimport { AsyncPipe } from '@angular/common';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { JsonHelpers } from '../../shared/helpers/json.helpers';\r\n\r\n@Component({\r\n  selector: 'app-run-explorer',\r\n  templateUrl: './run-explorer.component.html',\r\n  styleUrls: ['./run-explorer.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    AsyncPipe,\r\n  ],\r\n})\r\nexport class RunExplorerComponent implements OnInit {\r\n  pipelineModel$: Observable<PipelineModel>;\r\n  warnings$: Observable<string[]>;\r\n  visualDesignerData$: Observable<Record<string, any>>;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private visualQueryService: VisualQueryService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.pipelineModel$ = this.visualQueryService.pipelineModel$.asObservable();\r\n    this.warnings$ = this.visualQueryService.pipelineModel$.pipe(\r\n      map(pipelineModel => calculateWarnings(pipelineModel, this.context)),\r\n    );\r\n    this.visualDesignerData$ = this.visualQueryService.pipelineModel$.pipe(\r\n      map(pipelineModel => JsonHelpers.tryParse(pipelineModel.Pipeline.VisualDesignerData) ?? {}),\r\n    );\r\n  }\r\n\r\n  editPipeline() {\r\n    this.visualQueryService.editPipelineEntity();\r\n  }\r\n\r\n  openParamsHelp() {\r\n    window.open('https://go.2sxc.org/QueryParams', '_blank');\r\n  }\r\n\r\n  saveAndRunQuery(save: boolean, run: boolean) {\r\n    this.visualQueryService.saveAndRun(save, run);\r\n  }\r\n\r\n  showDataSourceDetails(event: MatSlideToggleChange): void {\r\n    this.visualQueryService.showDataSourceDetails(event.checked);\r\n  }\r\n\r\n  openRestApi() {\r\n    const queryGuid = this.visualQueryService.pipelineModel$.value.Pipeline.EntityGuid;\r\n    this.router.navigate([GoToDevRest.getUrlQueryDialog(queryGuid)], { relativeTo: this.route });\r\n  }\r\n}\r\n","@if ((pipelineModel$ | async); as pipelineModel) {\r\n  <div class=\"editor-active-explorer fancy-scrollbar-dark\">\r\n    <div class=\"wrapper\">\r\n      <div class=\"actions\">\r\n        <button mat-raised-button class=\"action\" color=\"accent\" (click)=\"saveAndRunQuery(true, true)\">\r\n          Save and run\r\n        </button>\r\n        <button mat-raised-button class=\"action\" (click)=\"saveAndRunQuery(false, true)\">\r\n          Run\r\n        </button>\r\n        <button mat-raised-button class=\"action\" (click)=\"saveAndRunQuery(true, false)\">\r\n          Save\r\n        </button>\r\n      </div>\r\n      <div class=\"parameters\">\r\n        <div class=\"title\">\r\n          <div>Query Parameters</div>\r\n          <div>\r\n            <button mat-icon-button tippy=\"Edit parameters\" (click)=\"editPipeline()\">\r\n              <mat-icon>edit</mat-icon>\r\n            </button>\r\n            <button mat-icon-button tippy=\"Query Params Docs\" (click)=\"openParamsHelp()\">\r\n              <mat-icon>info</mat-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n        @if (pipelineModel.Pipeline.Params?.length) {\r\n          <ul class=\"values\">\r\n            @for (param of pipelineModel.Pipeline.Params?.split('\\n'); track param) {\r\n              <li>\r\n                {{ param }}\r\n              </li>\r\n            }\r\n          </ul>\r\n        }\r\n      </div>\r\n      <div class=\"parameters\">\r\n        <div class=\"title\">Test Parameters</div>\r\n        @if (pipelineModel.Pipeline.TestParameters?.length) {\r\n          <ul class=\"values\">\r\n            @for (param of pipelineModel.Pipeline.TestParameters?.split('\\n'); track param) {\r\n              <li>\r\n                {{ param }}\r\n              </li>\r\n            }\r\n          </ul>\r\n        }\r\n      </div>\r\n      @if (visualDesignerData$ | async; as visualDesignerData) {\r\n        <div class=\"parameters\">\r\n          <span class=\"eav-slide-toggle-label\">Show DataSource Params</span>\r\n          <mat-slide-toggle color=\"primary\" [checked]=\"visualDesignerData.ShowDataSourceDetails\"\r\n            (change)=\"showDataSourceDetails($event)\"/>\r\n          </div>\r\n        }\r\n      @if ((warnings$ | async); as warnings) {\r\n        @if (warnings.length) {\r\n          <div class=\"warnings\">\r\n            <div class=\"title\">\r\n              <span>Warnings</span>\r\n              <mat-icon style=\"color: red\">warning</mat-icon>\r\n            </div>\r\n            <ol class=\"values\">\r\n              @for (warning of warnings; track warning) {\r\n                <li [innerHTML]=\"warning\">\r\n                </li>\r\n              }\r\n            </ol>\r\n          </div>\r\n        }\r\n      }\r\n      @if (pipelineModel.Pipeline.Description) {\r\n        <div class=\"description\">\r\n          <div class=\"title\">Query Description</div>\r\n          <div>{{ pipelineModel.Pipeline.Description }}</div>\r\n        </div>\r\n      }\r\n      <div class=\"footer-actions\">\r\n        <button mat-raised-button class=\"action\" (click)=\"openRestApi()\">\r\n          <span>Use in JSON / REST API</span>\r\n          <mat-icon>code_curly</mat-icon>\r\n        </button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n}\r\n","import { Context } from '../../shared/services/context';\r\nimport { PipelineModel } from '../models';\r\n\r\n/**\r\n * Check if there are special warnings the developer should know.\r\n * Typically when the test ModuleId is different from the one we're currently working on\r\n */\r\nexport function calculateWarnings(pipelineModel: PipelineModel, context: Context) {\r\n  const warnings: string[] = [];\r\n\r\n  try {\r\n    const queryParams = pipelineModel.Pipeline.Params?.split(/\\r?\\n/) || [];\r\n    const testParams = pipelineModel.Pipeline.TestParameters?.split(/\\r?\\n/) || [];\r\n\r\n    queryParams.forEach(param => {\r\n      param = param?.trim();\r\n      if (!param) { return; }\r\n\r\n      // Check if the syntax on Query Parameters is off.\r\n      // It should contain [...]=...\r\n      // But it's easy to forget the [ and ] brackets\r\n      const paramSyntax = /^[a-zA-Z0-9]+=(.*)$/gmi;\r\n      const matched = paramSyntax.test(param);\r\n      if (!matched) {\r\n        warnings.push(`\r\n          A <em>Query Parameter</em> seems wrong: <br>\r\n          <code>${param}</code> <br>\r\n          It should use the syntax: <br>\r\n          <code>key=value</code> <br>\r\n          or resolve to a token like: <br>\r\n          <code>key=[source:key]</code>\r\n        `);\r\n      }\r\n    });\r\n\r\n    testParams.forEach(param => {\r\n      param = param?.trim();\r\n      if (!param) { return; }\r\n\r\n      // Check if the syntax on Test Parameters is off.\r\n      // It should contain [...]=...\r\n      // But it's easy to forget the [ and ] brackets\r\n      const testParamSyntax = /^\\[[a-zA-Z]+:[a-zA-Z0-9]+\\]=(.*)$/gmi;\r\n      const matched = testParamSyntax.test(param);\r\n      if (!matched) {\r\n        warnings.push(`\r\n          A <em>Test Parameter</em> seems wrong: <br>\r\n          <code>${param}</code> <br>\r\n          It should use the syntax: <br>\r\n          <code>[source:key]=value</code>\r\n        `);\r\n      }\r\n\r\n      // Check if we should show the warning about the test ModuleId.\r\n      // This is because in the old days, the ModuleId wasn't auto-filled, so people had to add it as a test value.\r\n      // Now it's not necessary any more\r\n      const midRegex = /^\\[module:id\\]=([0-9]*)$/gmi;\r\n      const midMatch = midRegex.exec(param);\r\n      if (midMatch) {\r\n        const testMid = midMatch[1];\r\n        const urlMid = context.moduleId?.toString();\r\n        if (testMid !== urlMid) {\r\n          warnings.push(`\r\n            Your test ModuleId (${testMid}) is different from the current ModuleId (${urlMid}).<br>\r\n            Note that 2sxc automatically provides the ModuleId - so you usually do not need to set it\r\n          `);\r\n        }\r\n      }\r\n\r\n      const oldMidRegex = /^\\[module:moduleid\\]=([0-9]*)$/gmi;\r\n      const oldMidMatch = oldMidRegex.exec(param);\r\n      if (oldMidMatch) {\r\n        warnings.push(`\r\n          You are using deprecated [Module:ModuleId] test parameter.<br>\r\n          Please use [Module:Id]\r\n        `);\r\n      }\r\n    });\r\n  } catch (error) {\r\n    console.error('Something went wrong in calculateWarnings for params', error);\r\n  }\r\n\r\n  return warnings;\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { webApiQueryDataSources, webApiQueryDebugStream, webApiQueryGet, webApiQueryRun, webApiQuerySave } from '../../app-administration/services';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { Context } from '../../shared/services/context';\r\nimport { DataSource, PipelineDataSource, PipelineModel, PipelineResult } from '../models';\r\n\r\n@Injectable()\r\nexport class QueryDefinitionService {\r\n  constructor(private http: HttpClient, private context: Context) { }\r\n\r\n  fetchPipeline(pipelineEntityId: number, dataSources: DataSource[]) {\r\n    return this.http.get<PipelineModel>(webApiQueryGet, {\r\n      params: { appId: this.context.appId.toString(), id: pipelineEntityId.toString() }\r\n    }).pipe(\r\n      map(pipelineModel => {\r\n        // if pipeline is new, populate it with default model\r\n        if (!pipelineModel.DataSources.length) {\r\n          this.buildDefaultModel(pipelineModel, dataSources);\r\n        }\r\n        this.fixPipelineDataSources(pipelineModel.DataSources);\r\n        return pipelineModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  private buildDefaultModel(pipelineModel: PipelineModel, dataSources: DataSource[]) {\r\n    const templateDataSources = eavConstants.pipelineDesigner.defaultPipeline.dataSources;\r\n    for (const templateDS of templateDataSources) {\r\n      const dataSource = dataSources.find(ds => ds.PartAssemblyAndType === templateDS.PartAssemblyAndType);\r\n      const pipelineDataSource: PipelineDataSource = {\r\n        Description: '',\r\n        EntityGuid: templateDS.EntityGuid,\r\n        EntityId: undefined,\r\n        Name: dataSource.Name,\r\n        PartAssemblyAndType: templateDS.PartAssemblyAndType,\r\n        VisualDesignerData: templateDS.VisualDesignerData,\r\n      };\r\n      pipelineModel.DataSources.push(pipelineDataSource);\r\n    }\r\n\r\n    pipelineModel.Pipeline.StreamWiring = eavConstants.pipelineDesigner.defaultPipeline.streamWiring;\r\n  }\r\n\r\n  private fixPipelineDataSources(pipelineDataSources: PipelineDataSource[]) {\r\n    const outDataSourceExists = pipelineDataSources.some(\r\n      pipelineDS => pipelineDS.EntityGuid === eavConstants.pipelineDesigner.outDataSource.EntityGuid\r\n    );\r\n    if (!outDataSourceExists) {\r\n      const outDs = eavConstants.pipelineDesigner.outDataSource;\r\n      const outDsConst: PipelineDataSource = {\r\n        Description: outDs.Description,\r\n        EntityGuid: outDs.EntityGuid,\r\n        EntityId: undefined,\r\n        Name: outDs.Name,\r\n        PartAssemblyAndType: outDs.PartAssemblyAndType,\r\n        VisualDesignerData: outDs.VisualDesignerData,\r\n      };\r\n      pipelineDataSources.push(outDsConst);\r\n    }\r\n\r\n    for (const pipelineDataSource of pipelineDataSources) {\r\n      pipelineDataSource.VisualDesignerData ??= { Top: 50, Left: 50 };\r\n    }\r\n  }\r\n\r\n  fetchDataSources() {\r\n    return this.http.get<DataSource[]>(webApiQueryDataSources, {\r\n      params: {\r\n        appid: this.context.appId,\r\n        zoneId: this.context.zoneId,\r\n      },\r\n    }).pipe(\r\n      map(dataSources => {\r\n        const outDs = eavConstants.pipelineDesigner.outDataSource;\r\n        const outDsConst: DataSource = {\r\n          ContentType: undefined,\r\n          Difficulty: eavConstants.pipelineDesigner.dataSourceDifficulties.default,\r\n          DynamicIn: true,\r\n          DynamicOut: false,\r\n          EnableConfig: undefined,\r\n          HelpLink: undefined,\r\n          Icon: undefined,\r\n          In: outDs.In,\r\n          Name: outDs.Name,\r\n          Out: undefined,\r\n          PartAssemblyAndType: outDs.PartAssemblyAndType,\r\n          PrimaryType: outDs.PrimaryType,\r\n          TypeNameForUi: undefined,\r\n          UiHint: undefined,\r\n        };\r\n        dataSources.push(outDsConst);\r\n        return dataSources;\r\n      }),\r\n    );\r\n  }\r\n\r\n  typeNameFilter(input: string, format: 'className' | 'classFullName') {\r\n    const globalParts = input.split(', ');\r\n\r\n    switch (format) {\r\n      case 'classFullName':\r\n        const classFullName = globalParts[0];\r\n        return classFullName;\r\n      case 'className':\r\n        const classFullNameParts = globalParts[0].split('.');\r\n        const className = classFullNameParts[classFullNameParts.length - 1];\r\n        return className;\r\n      default:\r\n        return input;\r\n    }\r\n  }\r\n\r\n  /** Save the current query and reload entire definition as returned from server */\r\n  savePipeline(pipelineModel: PipelineModel) {\r\n    const pipeline = pipelineModel.Pipeline;\r\n    const dataSources = pipelineModel.DataSources;\r\n\r\n    return this.http.post<PipelineModel>(\r\n      webApiQuerySave,\r\n      { pipeline, dataSources },\r\n      { params: { appId: this.context.appId.toString(), Id: pipeline.EntityId.toString() } }\r\n    ).pipe(\r\n      map(newPipelineModel => {\r\n        this.fixPipelineDataSources(newPipelineModel.DataSources);\r\n        return newPipelineModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  /** `top` - fetch first X items */\r\n  runPipeline(id: number, top: number) {\r\n    return this.http.get<PipelineResult>(webApiQueryRun, {\r\n      params: { appId: this.context.appId.toString(), id: id.toString(), top: top.toString() }\r\n    });\r\n  }\r\n\r\n  /** `top` - fetch first X items */\r\n  debugStream(id: number, source: string, sourceOut: string, top: number) {\r\n    return this.http.get<PipelineResult>(webApiQueryDebugStream, {\r\n      params: { appId: this.context.appId.toString(), id: id.toString(), from: source, out: sourceOut, top: top.toString() }\r\n    });\r\n  }\r\n}\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { ChangeDetectorRef, Injectable, NgZone, OnDestroy, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\nimport { BehaviorSubject, filter, fromEvent, Subject } from 'rxjs';\r\nimport { ContentTypesService } from '../../app-administration/services/content-types.service';\r\nimport { MetadataService } from '../../permissions/services/metadata.service';\r\nimport { QueryDefinitionService } from './query-definition.service';\r\nimport { BaseWithChildDialogComponent } from '../../shared/components/base-with-child-dialog.component';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\n// tslint:disable-next-line:max-line-length\r\nimport { DataSource, DataSourceConfig, DataSourceConfigs, DebugStreamInfo, PipelineDataSource, PipelineModel, PipelineResult, PipelineResultStream, StreamWire, VisualDesignerData } from '../models';\r\nimport { QueryResultComponent } from '../query-result/query-result.component';\r\nimport { QueryResultDialogData } from '../query-result/query-result.models';\r\nimport { StreamErrorResultComponent } from '../stream-error-result/stream-error-result.component';\r\nimport { StreamErrorResultDialogData } from '../stream-error-result/stream-error-result.models';\r\nimport { JsonHelpers } from '../../shared/helpers/json.helpers';\r\n\r\n@Injectable()\r\nexport class VisualQueryService extends BaseWithChildDialogComponent implements OnDestroy {\r\n  pipelineModel$ = new BehaviorSubject<PipelineModel>(null);\r\n  dataSources$ = new BehaviorSubject<DataSource[]>(null);\r\n  putEntityCountOnConnections$ = new Subject<PipelineResult>();\r\n  dataSourceConfigs$ = new BehaviorSubject<DataSourceConfigs>({});\r\n  pipelineResult?: PipelineResult;\r\n\r\n  private pipelineId = parseInt(this.route.snapshot.paramMap.get('pipelineId'), 10);\r\n  private refreshPipeline = false;\r\n  private refreshDataSourceConfigs = false;\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private queryDefinitionService: QueryDefinitionService,\r\n    private titleService: Title,\r\n    private snackBar: MatSnackBar,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private zone: NgZone,\r\n    private metadataService: MetadataService,\r\n    private contentTypesService: ContentTypesService,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super(router, route);\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.pipelineModel$.complete();\r\n    this.dataSources$.complete();\r\n    this.putEntityCountOnConnections$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  init() {\r\n    this.fetchDataSources(() => this.fetchPipeline(true, true, false));\r\n    this.attachKeyboardSave();\r\n    this.subscriptions.add(this.childDialogClosed$().subscribe(() => {\r\n      if (this.refreshPipeline || this.refreshDataSourceConfigs) {\r\n        this.fetchPipeline(this.refreshPipeline, this.refreshDataSourceConfigs, this.refreshPipeline);\r\n      }\r\n      this.refreshPipeline = false;\r\n      this.refreshDataSourceConfigs = false;\r\n     }));\r\n  }\r\n\r\n  editPipelineEntity() {\r\n    // save Pipeline, then open Edit Dialog\r\n    this.savePipeline(() => {\r\n      const form: EditForm = {\r\n        items: [{ EntityId: this.pipelineModel$.value.Pipeline.EntityId }],\r\n      };\r\n      const formUrl = convertFormToUrl(form);\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n      this.refreshPipeline = true;\r\n    });\r\n  }\r\n\r\n  saveAndRun(save: boolean, run: boolean) {\r\n    if (save && run) {\r\n      this.savePipeline(() => { this.runPipeline(); });\r\n    } else if (save) {\r\n      this.savePipeline();\r\n    } else if (run) {\r\n      this.runPipeline();\r\n    }\r\n  }\r\n\r\n  showDataSourceDetails(showDetails: boolean) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    const visualDesignerData: Record<string, any> = JsonHelpers.tryParse(pipelineModel.Pipeline.VisualDesignerData) ?? {};\r\n    visualDesignerData.ShowDataSourceDetails = showDetails;\r\n    pipelineModel.Pipeline.VisualDesignerData = JSON.stringify(visualDesignerData);\r\n    this.pipelineModel$.next(pipelineModel);\r\n  }\r\n\r\n  addDataSource(dataSource: DataSource) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    const newPipelineDataSource: PipelineDataSource = {\r\n      Description: '',\r\n      EntityGuid: 'unsaved' + (pipelineModel.DataSources.length + 1),\r\n      EntityId: undefined,\r\n      Name: dataSource.Name,\r\n      PartAssemblyAndType: dataSource.PartAssemblyAndType,\r\n      VisualDesignerData: { Top: 100, Left: 100 },\r\n    };\r\n    pipelineModel.DataSources.push(newPipelineDataSource);\r\n    this.pipelineModel$.next(pipelineModel);\r\n    this.savePipeline();\r\n  }\r\n\r\n  removeDataSource(pipelineDataSourceGuid: string, connections: StreamWire[], streamsOut: string) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    pipelineModel.DataSources = pipelineModel.DataSources.filter(pipelineDS => pipelineDS.EntityGuid !== pipelineDataSourceGuid);\r\n    pipelineModel.Pipeline.StreamWiring = connections;\r\n    pipelineModel.Pipeline.StreamsOut = streamsOut;\r\n    this.pipelineModel$.next(pipelineModel);\r\n  }\r\n\r\n  renameDataSource(pipelineDataSourceGuid: string, name: string) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    const pipelineDataSource = pipelineModel.DataSources.find(pipelineDS => pipelineDS.EntityGuid === pipelineDataSourceGuid);\r\n    pipelineDataSource.Name = name;\r\n    this.pipelineModel$.next(pipelineModel);\r\n  }\r\n\r\n  changeDataSourceDescription(pipelineDataSourceGuid: string, description: string) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    const pipelineDataSource = pipelineModel.DataSources.find(pipelineDS => pipelineDS.EntityGuid === pipelineDataSourceGuid);\r\n    pipelineDataSource.Description = description;\r\n    this.pipelineModel$.next(pipelineModel);\r\n  }\r\n\r\n  changeConnections(connections: StreamWire[], streamsOut: string) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    pipelineModel.Pipeline.StreamWiring = connections;\r\n    pipelineModel.Pipeline.StreamsOut = streamsOut;\r\n    this.pipelineModel$.next(pipelineModel);\r\n  }\r\n\r\n  changeDataSourcePosition(pipelineDataSourceGuid: string, position: VisualDesignerData) {\r\n    const pipelineModel = cloneDeep(this.pipelineModel$.value);\r\n    const pipelineDataSource = pipelineModel.DataSources.find(pipelineDS => pipelineDS.EntityGuid === pipelineDataSourceGuid);\r\n    if (!pipelineDataSource) {\r\n      // spm NOTE: fixes problem where dataSource position can't be updated if dataSource with guid unsavedXX gets saved while dragging.\r\n      // Can happen if dataSource is just added and user drags it and save happens.\r\n      return;\r\n    }\r\n    pipelineDataSource.VisualDesignerData = { ...pipelineDataSource.VisualDesignerData, ...position };\r\n    this.pipelineModel$.next(pipelineModel);\r\n  }\r\n\r\n  private calculateDataSourceConfigs(dataSources: PipelineDataSource[]) {\r\n    const dataSourceConfigs: DataSourceConfigs = {};\r\n    dataSources.forEach(dataSource => {\r\n      if (dataSource.EntityId == null) { return; }\r\n      dataSourceConfigs[dataSource.EntityId] = [];\r\n      dataSource.Metadata?.forEach(metadataItem => {\r\n        Object.entries(metadataItem).forEach(([attributeName, attributeValue]) => {\r\n          if (attributeValue == null || attributeValue === '') { return; }\r\n          if (['Created', 'Guid', 'Id', 'Modified', 'Title', '_Type'].includes(attributeName)) { return; }\r\n          if (Array.isArray(attributeValue) && attributeValue[0]?.Title != null && attributeValue[0]?.Id != null) {\r\n            attributeValue = `${attributeValue[0].Title} (${attributeValue[0].Id})`;\r\n          }\r\n          const dataSourceConfig: DataSourceConfig = {\r\n            name: attributeName,\r\n            value: attributeValue,\r\n          };\r\n          dataSourceConfigs[dataSource.EntityId].push(dataSourceConfig);\r\n        });\r\n      });\r\n    });\r\n    this.dataSourceConfigs$.next(dataSourceConfigs);\r\n  }\r\n\r\n  editDataSource(pipelineDataSource: PipelineDataSource) {\r\n    const dataSource = this.dataSources$.value.find(ds => ds.PartAssemblyAndType === pipelineDataSource.PartAssemblyAndType);\r\n    const contentTypeName = dataSource.ContentType;\r\n    const targetType = eavConstants.metadata.entity.targetType;\r\n    const keyType = eavConstants.metadata.entity.keyType;\r\n    const key = pipelineDataSource.EntityGuid;\r\n\r\n    // query for existing Entity\r\n    this.metadataService.getMetadata(targetType, keyType, key, contentTypeName).subscribe(metadata => {\r\n      // edit existing Entity\r\n      if (metadata.Items.length) {\r\n        const form: EditForm = {\r\n          items: [{ EntityId: metadata.Items[0].Id }],\r\n        };\r\n        const formUrl = convertFormToUrl(form);\r\n        this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n        this.refreshDataSourceConfigs = true;\r\n        return;\r\n      }\r\n\r\n      // Check if the type exists, and if yes, create new Entity\r\n      this.contentTypesService.retrieveContentType(contentTypeName).subscribe({\r\n        next: contentType => {\r\n          if (contentType == null) {\r\n            this.snackBar.open('DataSource doesn\\'t have any configuration', undefined, { duration: 3000 });\r\n            return;\r\n          }\r\n          const form: EditForm = {\r\n            items: [{\r\n              ContentTypeName: contentTypeName,\r\n              For: {\r\n                Target: eavConstants.metadata.entity.target,\r\n                TargetType: eavConstants.metadata.entity.targetType,\r\n                Guid: key,\r\n              },\r\n            }],\r\n          };\r\n          const formUrl = convertFormToUrl(form);\r\n          this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n          this.refreshDataSourceConfigs = true;\r\n        },\r\n        error: (error: HttpErrorResponse) => {\r\n          const message = 'Server reports error - this usually means that this DataSource doesn\\'t have any configuration';\r\n          this.snackBar.open(message, undefined, { duration: 3000 });\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  private savePipeline(callback?: () => void) {\r\n    this.snackBar.open('Saving...');\r\n    this.queryDefinitionService.savePipeline(this.pipelineModel$.value).subscribe({\r\n      next: pipelineModel => {\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.pipelineModel$.next(pipelineModel);\r\n        if (callback != null) { callback(); }\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Save Pipeline failed', null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  runPipeline(top = 25) {\r\n    this.snackBar.open('Running query...');\r\n    this.queryDefinitionService.runPipeline(this.pipelineModel$.value.Pipeline.EntityId, top).subscribe({\r\n      next: pipelineResult => {\r\n        this.snackBar.open('Query worked', null, { duration: 2000 });\r\n        this.pipelineResult = pipelineResult;\r\n        this.showQueryResult(pipelineResult, top);\r\n        console.warn(pipelineResult);\r\n        // push cloned pipelineModel to reset jsPlumb\r\n        this.pipelineModel$.next(cloneDeep(this.pipelineModel$.value));\r\n        setTimeout(() => { this.putEntityCountOnConnections$.next(pipelineResult); });\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Query failed', null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  debugStream(stream: PipelineResultStream, top = 25) {\r\n    if (stream.Error) {\r\n      this.showStreamErrorResult(stream);\r\n      return;\r\n    }\r\n\r\n    if (stream.Count === 0) { return; }\r\n\r\n    this.snackBar.open('Running stream...');\r\n    const pipelineId = this.pipelineModel$.value.Pipeline.EntityId;\r\n    this.queryDefinitionService.debugStream(pipelineId, stream.Source, stream.SourceOut, top).subscribe({\r\n      next: streamResult => {\r\n        this.snackBar.open('Stream worked', null, { duration: 2000 });\r\n        const pipelineDataSource = this.pipelineModel$.value.DataSources.find(ds => ds.EntityGuid === stream.Source);\r\n        const debugStream: DebugStreamInfo = {\r\n          name: stream.SourceOut,\r\n          source: stream.Source,\r\n          sourceName: pipelineDataSource.Name,\r\n          original: stream,\r\n        };\r\n        this.showQueryResult(streamResult, top, debugStream);\r\n        console.warn(streamResult);\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Stream failed', null, { duration: 2000 });\r\n      },\r\n    });\r\n  }\r\n\r\n  private fetchPipeline(refreshPipeline: boolean, refreshDataSourceConfigs: boolean, showSnackBar: boolean) {\r\n    if (showSnackBar) {\r\n      this.snackBar.open('Reloading query, please wait...');\r\n    }\r\n    this.queryDefinitionService.fetchPipeline(this.pipelineId, this.dataSources$.value).subscribe(pipelineModel => {\r\n      if (showSnackBar) {\r\n        this.snackBar.open('Query reloaded', null, { duration: 2000 });\r\n      }\r\n      this.titleService.setTitle(`${pipelineModel.Pipeline.Name} - Visual Query`);\r\n      if (refreshPipeline) {\r\n        this.pipelineModel$.next(pipelineModel);\r\n      }\r\n      if (refreshDataSourceConfigs) {\r\n        this.calculateDataSourceConfigs(pipelineModel.DataSources);\r\n      }\r\n    });\r\n  }\r\n\r\n  private showQueryResult(result: PipelineResult, top: number, debugStream?: DebugStreamInfo) {\r\n    const dialogData: QueryResultDialogData = {\r\n      result,\r\n      debugStream,\r\n      top,\r\n    };\r\n    this.dialog.open(QueryResultComponent, {\r\n      autoFocus: false,\r\n      backdropClass: 'dialog-backdrop',\r\n      closeOnNavigation: false,\r\n      data: dialogData,\r\n      panelClass: ['dialog-panel', `dialog-panel-medium`, 'no-scrollbar'],\r\n      // spm NOTE: position used to force align-items: flex-start; on cdk-global-overlay-wrapper.\r\n      // Real top margin is overwritten in css e.g. dialog-panel-large\r\n      position: { top: '0' },\r\n      viewContainerRef: this.viewContainerRef,\r\n    });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private showStreamErrorResult(stream: PipelineResultStream) {\r\n    const dialogData: StreamErrorResultDialogData = {\r\n      errorData: stream.ErrorData,\r\n    };\r\n    this.dialog.open(StreamErrorResultComponent, {\r\n      autoFocus: false,\r\n      backdropClass: 'dialog-backdrop',\r\n      closeOnNavigation: false,\r\n      data: dialogData,\r\n      panelClass: ['dialog-panel', `dialog-panel-medium`, 'no-scrollbar'],\r\n      // spm NOTE: position used to force align-items: flex-start; on cdk-global-overlay-wrapper.\r\n      // Real top margin is overwritten in css e.g. dialog-panel-large\r\n      position: { top: '0' },\r\n      viewContainerRef: this.viewContainerRef,\r\n    });\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private fetchDataSources(callback?: () => void) {\r\n    this.queryDefinitionService.fetchDataSources().subscribe(dataSources => {\r\n      this.dataSources$.next(dataSources);\r\n      callback();\r\n    });\r\n  }\r\n\r\n  private attachKeyboardSave() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<KeyboardEvent>(window, 'keydown').pipe(\r\n          filter(() => !this.route.snapshot.firstChild),\r\n          filter(event => {\r\n            const CTRL_S = (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey) && event.keyCode === 83;\r\n            return CTRL_S;\r\n          }),\r\n        ).subscribe(event => {\r\n          event.preventDefault();\r\n          this.zone.run(() => { this.savePipeline(); });\r\n        })\r\n      );\r\n    });\r\n  }\r\n}\r\n","import { Component, Inject, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MAT_DIALOG_DATA, MatDialogActions } from '@angular/material/dialog';\r\nimport { EavWindow } from '../../shared/models/eav-window.model';\r\nimport { StreamErrorData } from '../models';\r\nimport { StreamErrorResultDialogData } from './stream-error-result.models';\r\nimport { JsonPipe } from '@angular/common';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n  selector: 'app-stream-error-result',\r\n  templateUrl: './stream-error-result.component.html',\r\n  styleUrls: ['./stream-error-result.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatDialogActions,\r\n    JsonPipe,\r\n  ],\r\n})\r\nexport class StreamErrorResultComponent implements OnInit {\r\n  errorData: StreamErrorData;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) private dialogData: StreamErrorResultDialogData,\r\n    private dialogRef: MatDialogRef<StreamErrorResultComponent>,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.errorData = this.dialogData.errorData;\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openInsights() {\r\n    window.open(window.$2sxc.http.apiUrl('sys/insights/logs?key=web-api-query'), '_blank');\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Stream Error Results</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <pre>{{ errorData | json }}</pre>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    <button mat-button class=\"eav-button__with-icon\" tippy=\"Open 2sxc Insights\" (click)=\"openInsights()\">\r\n      <mat-icon class=\"eav-icon\">speed</mat-icon>\r\n      <span>Insights</span>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>","import { Component, OnInit, ViewChild } from '@angular/core';\r\nimport { ActivatedRoute, RouterOutlet } from '@angular/router';\r\nimport { Context } from '../shared/services/context';\r\nimport { PlumbEditorComponent } from './plumb-editor/plumb-editor.component';\r\nimport { VisualQueryService } from './services/visual-query.service';\r\nimport { AddExplorerComponent } from './add-explorer/add-explorer.component';\r\nimport { RunExplorerComponent } from './run-explorer/run-explorer.component';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgClass } from '@angular/common';\r\nimport { QueryDefinitionService } from './services/query-definition.service';\r\nimport { MetadataService } from '../permissions';\r\nimport { ContentTypesService } from '../app-administration/services';\r\n\r\n@Component({\r\n  selector: 'app-visual-query',\r\n  templateUrl: './visual-query.component.html',\r\n  styleUrls: ['./visual-query.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    RouterOutlet,\r\n    NgClass,\r\n    MatIconModule,\r\n    RunExplorerComponent,\r\n    AddExplorerComponent,\r\n    PlumbEditorComponent,\r\n  ],\r\n  providers: [\r\n    VisualQueryService,\r\n    QueryDefinitionService,\r\n\r\n    MetadataService,\r\n    ContentTypesService,\r\n  ],\r\n})\r\nexport class VisualQueryComponent implements OnInit {\r\n  @ViewChild(PlumbEditorComponent) plumbEditor: PlumbEditorComponent;\r\n\r\n  explorer = {\r\n    run: 'run',\r\n    add: 'add'\r\n  };\r\n  activeExplorer = this.explorer.run;\r\n\r\n  constructor(private context: Context, private route: ActivatedRoute, private visualQueryService: VisualQueryService) {\r\n    this.context.init(this.route);\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.visualQueryService.init();\r\n  }\r\n\r\n  toggleExplorer(explorer: string) {\r\n    this.activeExplorer = (this.activeExplorer === explorer) ? null : explorer;\r\n  }\r\n\r\n  openHelp() {\r\n    window.open('https://go.2sxc.org/visual-query', '_blank');\r\n  }\r\n\r\n}\r\n","<router-outlet></router-outlet>\r\n\r\n<div class=\"editor-root\">\r\n  <div class=\"editor-side-toolbar\">\r\n    <div class=\"button\" tippy=\"Run\" [ngClass]=\"{ 'active': activeExplorer === explorer.run }\"\r\n      (click)=\"toggleExplorer(explorer.run)\">\r\n      <mat-icon>play_arrow</mat-icon>\r\n    </div>\r\n    <div class=\"button\" tippy=\"Add\" [ngClass]=\"{ 'active': activeExplorer === explorer.add }\"\r\n      (click)=\"toggleExplorer(explorer.add)\">\r\n      <mat-icon>add</mat-icon>\r\n    </div>\r\n    <div class=\"spacer\"></div>\r\n    <div class=\"button\" tippy=\"Help\" (click)=\"openHelp()\">\r\n      <mat-icon>help_outline</mat-icon>\r\n    </div>\r\n  </div>\r\n\r\n  <app-run-explorer [hidden]=\"activeExplorer !== explorer.run\"></app-run-explorer>\r\n\r\n  <app-add-explorer [hidden]=\"activeExplorer !== explorer.add\"></app-add-explorer>\r\n\r\n  <app-plumb-editor></app-plumb-editor>\r\n</div>\r\n"],"names":["NgClass","NgTemplateOutlet","MatFormFieldModule","i0","ɵɵelementContainer","ɵɵelementStart","ɵɵtemplate","FieldHintComponent_Case_1_ng_container_1_Template","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","ɵɵprojection","FieldHintComponent","constructor","isError","isShort","toggleIsShort","_","_2","selectors","inputs","standalone","features","ɵɵStandaloneFeature","ngContentSelectors","_c0","decls","vars","consts","template","FieldHintComponent_Template","rf","ctx","ɵɵlistener","FieldHintComponent_Template_div_click_0_listener","ɵɵrestoreView","_r1","ɵɵresetView","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c1","ɵɵconditional","tmp_2_0","i1","MatHint","MatError","styles","MousedownStopPropagationDirective","onMousedown","event","stopPropagation","hostBindings","MousedownStopPropagationDirective_HostBindings","MousedownStopPropagationDirective_mousedown_HostBindingHandler","$event","AsyncPipe","KeyValuePipe","MatSlideToggleModule","BehaviorSubject","combineLatest","map","eavConstants","guiTypes","VisualQueryService","filterAndSortDataSources","MatIconModule","ArrayHelpers","TippyDirective","AddExplorerComponent_Conditional_0_For_6_Conditional_5_For_2_Template_div_click_0_listener","dataSource_r6","_r5","$implicit","ctx_r1","ɵɵnextContext","addDataSource","ɵɵtext","UiHint","Name","ɵɵtextInterpolate","Icon","Unknown","ɵɵrepeaterCreate","AddExplorerComponent_Conditional_0_For_6_Conditional_5_For_2_Template","ɵɵcomponentInstance","trackDataSources","ɵɵrepeater","group_r4","value","AddExplorerComponent_Conditional_0_For_6_Template_div_click_0_listener","_r3","toggleItem","key","AddExplorerComponent_Conditional_0_For_6_Conditional_5_Template","tmp_14_0","Label","undefined","toggledItems","includes","AddExplorerComponent_Conditional_0_Template_mat_slide_toggle_change_4_listener","toggleDifficulty","AddExplorerComponent_Conditional_0_For_6_Template","trackGroups","ɵɵpipeBind1","sorted","AddExplorerComponent","visualQueryService","difficulties","pipelineDesigner","dataSourceDifficulties","difficulty$","default","ngOnInit","viewModel$","dataSources$","pipe","dataSources","difficulty","ngOnDestroy","complete","checked","advanced","next","dataSource","item","toggleInArray","index","type","PartAssemblyAndType","ɵɵdirectiveInject","AddExplorerComponent_Template","AddExplorerComponent_Conditional_0_Template","tmp_0_0","i2","MatSlideToggle","i3","MatIcon","cloneDeep","maxDifficulty","cloned","filtered","filter","Difficulty","outDataSource","sort","a","b","toLocaleLowerCase","localeCompare","PrimaryType","push","ChangeDetectorRef","ElementRef","QueryList","ViewContainerRef","MatDialog","distinctUntilChanged","BaseComponent","loadScripts","QueryDefinitionService","calculateTypeInfos","dataSrcIdPrefix","Plumber","NgStyle","JsonHelpers","RxHelpers","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_5_Template_mat_icon_click_0_listener","_r2","dataSource_r3","ctx_r3","configureDataSource","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_6_Template_mat_icon_click_0_listener","vm_r6","openHelp","typeInfos","EntityGuid","HelpLink","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_8_Template_mat_icon_click_0_listener","_r7","remove","config_r8","name","ɵɵelement","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_21_For_3_Template","ɵɵrepeaterTrackByIdentity","dataSourceConfigs","EntityId","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_5_Template","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_6_Template","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_8_Template","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Template_div_click_9_listener","allowEdit","editName","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Template_div_click_15_listener","editDescription","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_21_Template","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_24_Template","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Conditional_25_Template","ɵɵpureFunction3","_c2","VisualDesignerData","Top","Left","Width","_c3","showDataSourceDetails","length","ɵɵtextInterpolate1","EnableConfig","isOutDataSource","Description","getTypeName","DynamicOut","DynamicIn","PlumbEditorComponent_Conditional_0_Conditional_2_For_1_Template","pipelineDataSources","PlumbEditorComponent_Conditional_0_Conditional_2_Template","hardReset","jsPlumbUrl","PlumbEditorComponent","queryDefinitionService","changeDetectorRef","dialog","viewContainerRef","scriptLoaded$","test","src","subscriptions","add","putEntityCountOnConnections$","subscribe","result","plumber","putEntityCountOnConnections","pipelineDesignerData$","pipelineModel$","pipelineModel","tryParse","Pipeline","objectsEqual","dataSourceConfigs$","pipelineDesignerData","detectChanges","viewModel","DataSources","AllowEdit","ShowDataSourceDetails","ngAfterViewInit","domDataSourcesLoaded$","domDataSourcesRef","changes","scriptLoaded","domDataSourcesLoaded","destroy","domRootRef","nativeElement","onConnectionsChanged","bind","onDragend","onDebugStream","connections","getAllConnections","streamsOut","getStreamsOut","changeConnections","pipelineDataSourceGuid","position","changeDataSourcePosition","stream","debugStream","saveAndRun","editDataSource","partAssemblyAndType","find","ds","typeNameFilter","TypeNameForUi","pipelineDataSource","confirm","removeEndpointsOnDataSource","removeDataSource","url","window","open","newName","prompt","trim","renameDataSource","newDescription","changeDataSourceDescription","viewQuery","PlumbEditorComponent_Query","PlumbEditorComponent_Conditional_0_Template","i4","App","Cache","Filter","Logic","Lookup","Modify","Security","Sort","Source","Target","Debug","System","typeInfo","RenameStreamComponent","jsPlumbRoot","lineCount","linePaintDefault","stroke","strokeWidth","outlineStroke","outlineWidth","lineColors","maxCols","uuidColorMap","bulkDelete","instance","jsPlumb","getInstance","getInstanceDefaults","batch","initDomDataSources","initWirings","bindEvents","repaintEverything","dialogRef","close","reset","unbindContainer","elementId","selectEndpoints","element","delete","connectionInfos","connection","wire","From","sourceId","replace","Out","endpoints","getOverlay","label","To","targetId","In","target","each","endpoint","streamsOutStr","join","Streams","forEach","sourceElementId","outTargets","targetElementId","fromUuid","SourceOut","toUuid","TargetIn","sEndp","getEndpoint","getUuid","Error","Count","toString","cssClass","setLabel","events","click","overlay","nextLinePaintStyle","uuid","Object","assign","container","defaults","Container","Connector","curviness","PaintStyle","HoverPaintStyle","domDataSource","querySelector","draggable","grid","stop","el","id","finalPos","setTimeout","addEndpoint","targetEndpointUnlimited","buildTargetEndpoint","maxConnections","makeTarget","makeSource","buildSourceEndpoint","StreamWiring","guid","pipeDataSource","connect","uuids","paintStyle","e","console","error","message","from","to","endpointName","isIn","d","isDynamic","some","getEndpointInfo","endpointInfo","style","required","wireExists","targetEndpointName","model","params","enabled","isSource","sourceEndpoint","fill","radius","anchor","faces","overlays","getEndpointOverlays","endpointOrOverlay","onChangeLabel","targetEndpoint","isTarget","dropOptions","hoverClass","activeClass","location","data","autoFocus","width","afterClosed","newLabel","markForCheck","info","pipelineDS","deleteEndpoint","deleteConnection","fireEvent","endpointLabel","labelPrompt","getLabel","getEndpoints","targetEndpointHasSameLabel","canvas","classList","contains","Math","floor","random","trimmed","endsWith","substring","UntypedFormControl","UntypedFormGroup","Validators","FormsModule","ReactiveFormsModule","MatDialogRef","MAT_DIALOG_DATA","MatDialogActions","startWith","ContentTypesService","MatOptionModule","MatSelectModule","MatInputModule","MatButtonModule","ClickStopPropagationDirective","RenameStreamComponent_Conditional_9_Conditional_4_Template","RenameStreamComponent_Conditional_9_Conditional_5_Template","ctx_r0","pipelineResultExists","controls","touched","errors","scopeOption_r3","RenameStreamComponent_Conditional_10_Conditional_0_For_5_Template","scopeOptions","labelOption_r4","RenameStreamComponent_Conditional_10_Conditional_4_For_2_Template","labelOptions","RenameStreamComponent_Conditional_10_Conditional_0_Template","RenameStreamComponent_Conditional_10_Conditional_4_Template","RenameStreamComponent_Conditional_10_Conditional_5_Template","RenameStreamComponent_Conditional_10_Template_button_click_7_listener","toggleGuidedLabel","RenameStreamComponent_Conditional_10_Template_button_click_10_listener","RenameStreamComponent_Conditional_10_Conditional_13_Template","advancedMode","guidedLabel","RenameStreamComponent_Conditional_13_Template_mat_slide_toggle_change_0_listener","toggleAdvancedMode","dialogData","contentTypesService","hostClass","pipelineResult","buildForm","closeDialog","rename","formValue","form","getRawValue","scope","scopes","valueChanges","values","Sources","source","Guid","out","Scope","patchValue","getScopes","sourceOut","s","o","hostVars","RenameStreamComponent_HostBindings","ɵɵhostProperty","RenameStreamComponent_Template_button_click_4_listener","RenameStreamComponent_Conditional_9_Template","RenameStreamComponent_Conditional_10_Template","RenameStreamComponent_Conditional_13_Template","RenameStreamComponent_Template_button_click_15_listener","RenameStreamComponent_Template_button_click_17_listener","valid","MatButton","MatIconButton","i5","i6","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","FormGroupDirective","FormControlName","i7","MatFormField","MatLabel","MatSuffix","i8","MatInput","i9","MatSelect","i10","MatOption","i11","JsonPipe","MatTabsModule","ɵɵtextInterpolate2","sourceName","top","option_r3","QueryResultComponent_For_18_Template_button_click_0_listener","show","QueryResultComponent_For_18_Conditional_2_Template","QueryResultComponent_For_18_Conditional_3_Template","param_r4","QueryResultComponent_Conditional_22_div_1_Template","QueryResultComponent_Conditional_22_For_5_Template","parameters","source_r5","Definition","config_r6","QueryResultComponent_For_37_Conditional_2_Template","QueryResultComponent_For_37_For_10_Template","Type","Configuration","stream_r7","QueryResultComponent","pipeline","Params","split","testParams","TestParameters","concat","timeUsed","QueryTimer","Milliseconds","ticksUsed","Ticks","optionsForTop","Query","sources","streams","original","runPipeline","QueryResultComponent_Template","QueryResultComponent_Conditional_4_Template","QueryResultComponent_Template_button_click_5_listener","QueryResultComponent_div_13_Template","QueryResultComponent_Conditional_15_Template","QueryResultComponent_Conditional_16_Template","QueryResultComponent_For_18_Template","QueryResultComponent_Conditional_22_Template","QueryResultComponent_div_24_Template","QueryResultComponent_For_37_Template","QueryResultComponent_div_40_Template","QueryResultComponent_For_53_Template","MatTabLabel","MatTab","MatTabGroup","ActivatedRoute","Router","GoToDevRest","Context","calculateWarnings","param_r3","RunExplorerComponent_Conditional_0_Conditional_20_For_2_Template","pipelineModel_r4","param_r5","RunExplorerComponent_Conditional_0_Conditional_24_For_2_Template","RunExplorerComponent_Conditional_0_Conditional_25_Template_mat_slide_toggle_change_3_listener","_r6","warning_r7","ɵɵsanitizeHtml","RunExplorerComponent_Conditional_0_Conditional_27_Conditional_0_For_8_Template","warnings_r8","RunExplorerComponent_Conditional_0_Conditional_27_Conditional_0_Template","RunExplorerComponent_Conditional_0_Template_button_click_3_listener","saveAndRunQuery","RunExplorerComponent_Conditional_0_Template_button_click_5_listener","RunExplorerComponent_Conditional_0_Template_button_click_7_listener","RunExplorerComponent_Conditional_0_Template_button_click_14_listener","editPipeline","RunExplorerComponent_Conditional_0_Template_button_click_17_listener","openParamsHelp","RunExplorerComponent_Conditional_0_Conditional_20_Template","RunExplorerComponent_Conditional_0_Conditional_24_Template","RunExplorerComponent_Conditional_0_Conditional_25_Template","RunExplorerComponent_Conditional_0_Conditional_27_Template","RunExplorerComponent_Conditional_0_Conditional_29_Template","RunExplorerComponent_Conditional_0_Template_button_click_31_listener","openRestApi","tmp_4_0","visualDesignerData$","tmp_5_0","warnings$","RunExplorerComponent","router","route","context","asObservable","editPipelineEntity","save","run","queryGuid","navigate","getUrlQueryDialog","relativeTo","RunExplorerComponent_Template","RunExplorerComponent_Conditional_0_Template","warnings","queryParams","param","paramSyntax","matched","testParamSyntax","midRegex","midMatch","exec","testMid","urlMid","moduleId","oldMidRegex","oldMidMatch","HttpClient","webApiQueryDataSources","webApiQueryDebugStream","webApiQueryGet","webApiQueryRun","webApiQuerySave","http","fetchPipeline","pipelineEntityId","get","appId","buildDefaultModel","fixPipelineDataSources","templateDataSources","defaultPipeline","templateDS","streamWiring","outDataSourceExists","outDs","outDsConst","fetchDataSources","appid","zoneId","ContentType","input","format","globalParts","classFullName","classFullNameParts","className","savePipeline","post","Id","newPipelineModel","ɵɵinject","factory","ɵfac","NgZone","MatSnackBar","Title","fromEvent","Subject","MetadataService","BaseWithChildDialogComponent","convertFormToUrl","StreamErrorResultComponent","titleService","snackBar","zone","metadataService","pipelineId","parseInt","snapshot","paramMap","refreshPipeline","refreshDataSourceConfigs","init","attachKeyboardSave","childDialogClosed$","items","formUrl","showDetails","visualDesignerData","JSON","stringify","newPipelineDataSource","StreamsOut","description","calculateDataSourceConfigs","Metadata","metadataItem","entries","attributeName","attributeValue","Array","isArray","dataSourceConfig","contentTypeName","targetType","metadata","entity","keyType","getMetadata","Items","retrieveContentType","contentType","duration","ContentTypeName","For","TargetType","callback","showQueryResult","warn","showStreamErrorResult","streamResult","showSnackBar","setTitle","backdropClass","closeOnNavigation","panelClass","errorData","ErrorData","runOutsideAngular","firstChild","CTRL_S","navigator","platform","match","metaKey","ctrlKey","keyCode","preventDefault","openInsights","$2sxc","apiUrl","StreamErrorResultComponent_Template","StreamErrorResultComponent_Template_button_click_4_listener","StreamErrorResultComponent_Template_button_click_12_listener","RouterOutlet","VisualQueryComponent","explorer","activeExplorer","toggleExplorer","VisualQueryComponent_Query","VisualQueryComponent_Template","VisualQueryComponent_Template_div_click_3_listener","VisualQueryComponent_Template_div_click_6_listener","VisualQueryComponent_Template_div_click_10_listener"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}