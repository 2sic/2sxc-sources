{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_service-802177.1d3240bc8c70d655.js","mappings":"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","names":["logSpecs","getAll","getAllLive","getAllOnce","ContentItemsService","HttpServiceBaseSignal","constructor","this","log","classLog","getAllPromise","contentTypeStaticName","fnIf","fetchPromise","webApiEntityList","params","appId","contentType","httpResource","url","apiUrl","refresh","getColumnsPromise","webApiFieldsAll","staticName","importItem","file","from","toBase64","pipe","switchMap","fileBase64","http","post","webApiEntityRoot","AppId","ContentBase64","map","success","Success","Messages","static","__ngFactoryType__","_angular_core__WEBPACK_IMPORTED_MODULE_10__","jDH","factory","ɵfac","ServiceBase","subscriptions","Subscription","ngOnDestroy","destroy","unsubscribe","_angular_core__WEBPACK_IMPORTED_MODULE_1__","MetadataActionsComponent","agInit","deleteMetadata","onDelete","data","debug_node_JnOYh9kg","VBU","selectors","decls","vars","consts","template","rf","ctx","i0","MatRippleModule","i1","MatIconModule","i2","TippyDirective","encapsulation","MetadataContentTypeComponent","value","metadata","_Type","Description","styles","scopeOption_r1","name","MetadataSaveDialogComponent_Conditional_11_For_5_Template","ctx_r1","scopeOptions","length","dropdownInsertValue","contentType_r3","NameId","Label","MetadataSaveDialogComponent_Conditional_15_For_2_Template","tmp_1_0","contentTypes","MetadataSaveDialogComponent","#contentTypesService","dialog","hostClass","guidedContentType","advancedMode","transient","ContentTypesService","scope","signal","eavConstants","scopes","default","getScopesSig","getTypes","ngOnInit","buildForm","closeDialog","close","toggleGuidedContentType","toggleAdvancedMode","event","checked","confirm","formValues","form","getRawValue","UntypedFormGroup","addControl","UntypedFormControl","Validators","required","controls","valueChanges","startWith","distinctUntilChanged","subscribe","newScope","patchValue","prompt","some","option","set","hostVars","hostBindings","MetadataSaveDialogComponent_Conditional_11_Template","MetadataSaveDialogComponent_Conditional_15_Template","MetadataSaveDialogComponent_Conditional_16_Template","MetadataSaveDialogComponent_Conditional_24_Template","$event","_c0","touched","errors","valid","MatCardModule","FormsModule","i3","ReactiveFormsModule","MatFormFieldModule","i4","MatSelectModule","i5","MatOptionModule","MatInputModule","i6","MatButtonModule","i7","NgClass","i8","MatSlideToggleModule","i9","FieldHintComponent","ClickStopPropagationDirective","ctx_r0","itemFor","KeyNumber","KeyGuid","KeyString","Title","MetadataComponent_Conditional_11_Conditional_5_Template","MetadataComponent_Conditional_11_Conditional_6_Template","MetadataComponent_Conditional_11_Conditional_7_Template","MetadataComponent_Conditional_11_Conditional_8_Template","Target","TargetType","metadataSet","Items","gridOptions","_r2","createMetadata","recommendation_r5","Icon","Enabled","_r4","$implicit","MetadataComponent_Conditional_15_For_10_Conditional_1_Template","MetadataComponent_Conditional_15_For_10_Conditional_2_Template","fabOpen","_r3","openChange","MetadataComponent_Conditional_15_For_10_Template","recommendations","MetadataComponent","#entitiesSvc","#metadataSvc","#contentItemSvc","#dialogRoutes","snackBar","matDialog","viewContainerRef","changeDetectorRef","EntityEditService","MetadataService","DialogRoutingService","#buildGridOptions","#params","convert","getParams","p","targetType","parseInt","keyType","key","#itemsFromHttp","computed","item","find","i","Guid","For","undefined","#metadataResource","getMetadataLive","#helpTextConst","empty","description","hint","content","uxHelpText","clone","structuredClone","Recommendations","forEach","r","startsWith","icon","replace","window","atob","filter","Id","Count","title","decodeURIComponent","getParam","console","error","doOnDialogClosed","update","pre","open","recommendation","CreateEmpty","Name","create","calculateItemFor","duration","next","createMetadataForm","openFeatureDialog","MissingFeature","autoFocus","width","afterClosed","items","formUrl","convertFormToUrl","navRelative","markForCheck","temp","EditPrep","constructMetadataInfo","newMetadataFromInfo","#editMetadata","editId","#deleteMetadata","confirmed","delete","entityId","entityTitle","message","DeleteWarning","ConfirmDeleteDialogComponent","isConfirmed","defaultGridOptions","columnDefs","ColumnDefinitions","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWide","field","onCellClicked","headerName","valueGetter","cellRenderer","ActionsPinnedRight1","MetadataComponent_Conditional_10_Template","MetadataComponent_Conditional_11_Template","MetadataComponent_Conditional_12_Template","MetadataComponent_Conditional_14_Template","MetadataComponent_Conditional_15_Template","tmp_2_0","tmp_5_0","tmp_6_0","tmp_7_0","RouterOutlet","SxcGridModule","MatDialogActions","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","EcoFabSpeedDialActionsComponent","MatBadgeModule","MatBadgeIconDirective","SafeHtmlPipe","GridWithHelpComponent","a","onClick","stopPropagation","FsC","permissionsDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","Promise","all","__webpack_require__","e","then","bind","permissionRoutes","path","component","DialogEntryComponent","children","EditRoutes","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","isError","input","isShort","toggleIsShort","_angular_core__WEBPACK_IMPORTED_MODULE_0__","inputs","ngContentSelectors","_r1","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","_c1","NgTemplateOutlet","gridWrapper","viewChild","read","ElementRef","agGrid","contentChild","AgGridAngular","dialogAction","helpText","rowLength","DEFAULT_ROW_HEIGHT","GRID_HEADER_HEIGHT","HELP_CARD_BUFFER","effect","gridWrapperEl","nativeElement","untracked","#updateLayout","agGridEl","dialogActionEl","helpCard","querySelector","classList","toggle","style","flex","dimensions","#calculateDimensions","rowHeight","agGridHeight","maxHeight","document","clientHeight","dialogHeaderHeight","dialogActionHeight","shouldHideHelp","helpCardHeight","wrapperHeight","offsetHeight","contentQueries","dirIndex","GoToPermissions","route","loadChildren","m","getUrl","getUrlApp","app","toString","getUrlAttribute","id","attribute","getUrlContentType","guid","getUrlEntity","entity","getUrlLanguage","language"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/content-items/services/content-items.service.ts","./projects/eav-ui/src/app/shared/services/service-base.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/shared/constants/dropdown-insert-value.constant.ts","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions.routing.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.component.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.component.html","./projects/eav-ui/src/app/permissions/go-to-permissions.ts"],"sourcesContent":["import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { webApiEntityList, webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { ContentItem } from '../models/content-item.model';\r\n\r\nconst logSpecs = {\r\n  getAll: true,\r\n  getAllLive: true,\r\n  getAllOnce: true,\r\n\r\n}\r\n@Injectable()\r\nexport class ContentItemsService extends HttpServiceBaseSignal {\r\n\r\n  log = classLog({ ContentItemsService }, logSpecs);\r\n  \r\n  getAllPromise(contentTypeStaticName: string): Promise<ContentItem[]> {\r\n    this.log.fnIf('getAll', { contentTypeStaticName });\r\n    return this.fetchPromise<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  getAllOnce(contentTypeStaticName: string) {\r\n    this.log.fnIf('getAllOnce', { contentTypeStaticName });\r\n    return httpResource<ContentItem[]>(() => {\r\n      return ({\r\n        url: this.apiUrl(webApiEntityList),\r\n        params: { appId: this.appId, contentType: contentTypeStaticName }\r\n      });\r\n    });\r\n  }\r\n\r\n  getAllLive(contentTypeStaticName: string, refresh: Signal<unknown>) {\r\n    this.log.fnIf('getAllLive', { contentTypeStaticName, refresh });\r\n    return httpResource<ContentItem[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiEntityList),\r\n        params: { appId: this.appId, contentType: contentTypeStaticName }\r\n      });\r\n    });\r\n  }\r\n\r\n  getColumnsPromise(contentTypeStaticName: string): Promise<Field[]> {\r\n    return this.fetchPromise<Field[]>(webApiFieldsAll, {\r\n      params: { appId: this.appId, staticName: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  importItem(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.apiUrl(webApiEntityRoot + 'upload'), {\r\n          AppId: this.appId,\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * Base class for services - just to standardize use of subscriptions.\r\n * Has @Injectable() just to allow it ot use the standard OnDestroy interface.\r\n */\r\n@Injectable()\r\nexport abstract class ServiceBase implements OnDestroy {\r\n\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  // TODO: TRY TO GET RID OF THIS. AFAIK it's just used in the mask, which should switch over to signals.\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-actions',\r\n    templateUrl: './metadata-actions.component.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-metadata-content-type',\r\n    templateUrl: './metadata-content-type.component.html',\r\n    styleUrls: ['./metadata-content-type.component.scss'],\r\n    imports: [TippyDirective,]\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Create Metadata</mat-card-title>\r\n    <mat-card-subtitle>\r\n      This is a special operation to add an item which is metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      @if (advancedMode && guidedContentType) {\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Scope</mat-label>\r\n        <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions().length ? 'No items found' : ''\">\r\n          @for (scopeOption of scopeOptions(); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.value\">\r\n            {{ scopeOption.name }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <app-field-hint>\r\n        The scope should almost never be changed -\r\n        <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n      </app-field-hint>\r\n      }\r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        @if (guidedContentType) {\r\n        <mat-select formControlName=\"contentType\" required\r\n          [placeholder]=\"!contentTypes()?.length ? 'No items found' : ''\">\r\n          @for (contentType of contentTypes(); track contentType) {\r\n          <mat-option [value]=\"contentType.NameId\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n        }\r\n        @if (!guidedContentType) {\r\n        <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n        }\r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"eav-card-actions\">\r\n    <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n      {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n    </mat-slide-toggle>\r\n    <div>\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\"\r\n        (click)=\"confirm()\">\r\n        Confirm\r\n      </button>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, HostBinding, OnInit, signal, WritableSignal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { MetadataSaveFormValues } from './metadata-save-dialog.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-save-dialog',\r\n    templateUrl: './metadata-save-dialog.component.html',\r\n    styleUrls: ['./metadata-save-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatFormFieldModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        MatSlideToggleModule,\r\n        FieldHintComponent,\r\n        ClickStopPropagationDirective,\r\n    ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  #contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  scope = signal(eavConstants.scopes.default.value);\r\n  scopeOptions = this.#contentTypesService.getScopesSig() as WritableSignal<ScopeOption[]>;\r\n\r\n  contentTypes = this.#contentTypesService.getTypes(this.scope).value;\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialog.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions().some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions.set([newScopeOption, ...this.scopeOptions()]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.scope.set(newScope);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <app-grid-with-help style=\"height: 100%\" [helpText]=\"uxHelpText()\" [refresh]=\"refresh()\" [rowLength]=\"metadataSet()?.Items.length\">\r\n    <div class=\"eav-dialog-header\" eav-dialog-header>\r\n      <div class=\"eav-dialog-header__title\">\r\n        {{ title || 'Metadata' }}\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"eav-dialog-content\" eav-dialog-content>\r\n      <p>\r\n        @if (!itemFor()) {\r\n          This item is not metadata for anything else.\r\n        } @else {\r\n          This item is metadata for:\r\n          <br />Target: {{ itemFor().Target }} <br />TargetType: {{ itemFor().TargetType }}\r\n          @if (itemFor().KeyNumber) {\r\n            <br />Key Number: {{ itemFor().KeyNumber }}\r\n          }\r\n          @if (itemFor().KeyGuid) {\r\n            <br />Key Guid: {{ itemFor().KeyGuid }}\r\n          }\r\n          @if (itemFor().KeyString) {\r\n            <br />Key String: {{ itemFor().KeyString }}\r\n          }\r\n          @if (itemFor().Title) {\r\n            <br />Title: {{ itemFor().Title }}\r\n          }\r\n        }\r\n      </p>\r\n    </div>\r\n\r\n    @if (metadataSet()?.Items.length > 0) {\r\n      <ag-grid-angular class=\"ag-theme-material eav-dialog-content\" [rowData]=\"metadataSet()?.Items\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    }\r\n\r\n    <mat-dialog-actions align=\"end\">\r\n      @if (recommendations()?.length === 0) {\r\n        <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\" (click)=\"createMetadata()\">\r\n          <mat-icon>add</mat-icon>\r\n        </button>\r\n      }\r\n      @if (recommendations()?.length > 0) {\r\n        <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': fabOpen() }\" (openChange)=\"openChange($event)\">\r\n          <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n            <button mat-fab class=\"grid-fab\">\r\n              <mat-icon class=\"spin180\">{{ fabOpen() ? 'close' : 'add' }}</mat-icon>\r\n            </button>\r\n          </eco-fab-speed-dial-trigger>\r\n          <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n            <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\" (click)=\"createMetadata()\">\r\n              <mat-icon>search</mat-icon>\r\n            </button>\r\n            @for (recommendation of recommendations(); track recommendation) {\r\n              <button\r\n                mat-mini-fab\r\n                class=\"eav-eco-fab-speed-dial-action-button\"\r\n                [attr.label]=\"recommendation.Title\"\r\n                (click)=\"createMetadata(recommendation)\"\r\n              >\r\n                @if (recommendation.Icon && fabOpen()) {\r\n                  <div\r\n                    style=\"color: white; fill: white\"\r\n                    [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n                    matBadgeColor=\"accent\"\r\n                    matBadgeSize=\"small\"\r\n                    [matBadgeIcon]=\"!recommendation.Enabled ? 'diamond' : null\"\r\n                    matBadgePosition=\"below after\"\r\n                    aria-hidden=\"false\"\r\n                  ></div>\r\n                } @else {\r\n                  <mat-icon>add</mat-icon>\r\n                }\r\n              </button>\r\n            }\r\n          </eco-fab-speed-dial-actions>\r\n        </eco-fab-speed-dial>\r\n      }\r\n    </mat-dialog-actions>\r\n  </app-grid-with-help>\r\n</div>\r\n\r\n<router-outlet></router-outlet>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { EcoFabSpeedDialActionsComponent, EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent } from '@ecodev/fab-speed-dial';\r\nimport { convert, Of, transient } from '../../../../core';\r\nimport { ConfirmDeleteDialogComponent } from '../app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from '../app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EavForInAdminUi } from '../edit/shared/models/eav';\r\nimport { openFeatureDialog } from '../features/shared/base-feature.component';\r\nimport { MetadataService } from '../permissions';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { GridWithHelpComponent, HelpTextConst } from '../shared/ag-grid/grid-with-help/grid-with-help.component';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { MetadataKeyTypes } from '../shared/constants/eav.constants';\r\nimport { MatBadgeIconDirective } from '../shared/directives/mat-badge-icon.directive';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../shared/logging';\r\nimport { EditForm, EditPrep, ItemAddIdentifier } from '../shared/models/edit-form.model';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataItem, MetadataRecommendation } from './models/metadata.model';\r\n\r\n@Component({\r\n  selector: 'app-metadata',\r\n  templateUrl: './metadata.component.html',\r\n  styleUrls: ['./metadata.component.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    EcoFabSpeedDialComponent,\r\n    NgClass,\r\n    EcoFabSpeedDialTriggerComponent,\r\n    EcoFabSpeedDialActionsComponent,\r\n    MatBadgeModule,\r\n    MatBadgeIconDirective,\r\n    SafeHtmlPipe,\r\n    GridWithHelpComponent,\r\n  ]\r\n})\r\nexport class MetadataComponent implements OnInit {\r\n\r\n  log = classLog({ MetadataComponent });\r\n\r\n  #entitiesSvc = transient(EntityEditService);\r\n  #metadataSvc = transient(MetadataService);\r\n  #contentItemSvc = transient(ContentItemsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) { }\r\n\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  fabOpen = signal(false);\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key', 'title', 'contentTypeStaticName']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as Of<typeof MetadataKeyTypes>,\r\n    key: p.key,\r\n    contentTypeStaticName: p.contentTypeStaticName,\r\n  }));\r\n\r\n\r\n  // Signal to get itemFor - must be _outside_ the computed property, otherwise it regenerates infinitely\r\n  #itemsFromHttp = this.#contentItemSvc.getAllOnce(this.#params.contentTypeStaticName).value;\r\n\r\n  itemFor = computed<EavForInAdminUi | undefined>(() => {\r\n    const item = this.#itemsFromHttp()?.find(i => i.Guid === this.#params.key);\r\n    return (item?.For)\r\n      ? item.For\r\n      : undefined;\r\n  });\r\n\r\n  refresh = signal<number>(0);\r\n  #metadataResource = this.#metadataSvc.getMetadataLive(this.refresh, this.#params.targetType, this.#params.keyType, this.#params.key).value\r\n\r\n\r\n  // UI Help Text for the UX Help Info Card\r\n  #helpTextConst: HelpTextConst = {\r\n    empty: {\r\n      description: '<p><b>This is where you manage Metadata</b></p>',\r\n      hint: \"<p>Click the (+) in the bottom right corner to create your first Metadata for the current item.</p>\"\r\n    },\r\n    content: {\r\n      description: '<p><b>Each row shows Metadata for the current item</b> <br>Metadata describes/configures something, similar to labels you could attach to clothes.</p>',\r\n      hint: '<p>Click on the row to edit the Metadata. <br>You can also create new Metadata.</p>'\r\n    }\r\n  };\r\n\r\n  uxHelpText = computed(() => {\r\n    const data = this.metadataSet()?.Items;\r\n    return data?.length === 0 ? this.#helpTextConst.empty : this.#helpTextConst.content;\r\n  })\r\n\r\n\r\n  metadataSet = computed(() => {\r\n    const metadata = this.#metadataResource();\r\n    if (!metadata) return undefined;\r\n\r\n    const clone = structuredClone(metadata);\r\n\r\n    clone.Recommendations.forEach(r => {\r\n      if (r.Icon?.startsWith('base64:')) {\r\n        let icon = r.Icon.replace('base64:', '');\r\n        icon = window.atob(icon);\r\n        icon = icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n        r.Icon = icon;\r\n      }\r\n    });\r\n    return clone;\r\n  });\r\n\r\n\r\n  recommendations = computed(() => {\r\n    const metadata = this.metadataSet();\r\n    return metadata?.Recommendations.filter(r =>\r\n      metadata?.Items.filter(i => i._Type.Id === r.Id).length < r.Count\r\n    );\r\n  });\r\n\r\n  protected title = (() => {\r\n    try {\r\n      return decodeURIComponent(this.#dialogRoutes.getParam('title') ?? '');\r\n    } catch (e) {\r\n      console.error('Couldn\\'t properly decode title');\r\n      return this.#dialogRoutes.getParam('title') ?? '';\r\n    }\r\n  })();\r\n\r\n  ngOnInit() {\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.refresh.update(pre => pre + 1));\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen.set(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.matDialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.#entitiesSvc.create(recommendation.Id, { For: this.calculateItemFor('dummy').For }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.refresh.update(pre => pre + 1)\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.refresh.update(pre => pre + 1)\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.matDialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [this.calculateItemFor(contentType)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(contentType: string): ItemAddIdentifier {\r\n    const temp = EditPrep.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key);\r\n    return EditPrep.newMetadataFromInfo(contentType, temp);\r\n  }\r\n\r\n\r\n  #editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.metadataSet().Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.matDialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.#deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.#entitiesSvc.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.refresh.update(pre => pre + 1);\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<MetadataItem>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          onCellClicked: (p: { data: MetadataItem }) => this.#editMetadata(p.data),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (p: { data: MetadataItem }) => `${p.data._Type.Name}${p.data._Type.Title !== p.data._Type.Name ? ` (${p.data._Type.Title})` : ''}`,\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            onDelete: (metadata) => this.#deleteMetadata(metadata),\r\n          } satisfies MetadataActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","export const dropdownInsertValue = 'DROPDOWN_INSERT_VALUE' as const;\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { classLog } from '../logging';\r\n\r\n@Directive({\r\n  selector: '[appClickStopPropagation]',\r\n})\r\nexport class ClickStopPropagationDirective {\r\n\r\n  log = classLog({ClickStopPropagationDirective});\r\n\r\n  // Log constructor to detect that it was really attached/created\r\n  constructor() {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    this.log.a('onClick', { event });\r\n    event.stopPropagation();\r\n\r\n    // This should never be added here, as it's often on a link, and the default behavior (link open) should happen\r\n    // event.preventDefault();\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutes\r\n  },\r\n];\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError()) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n    selector: 'app-field-hint',\r\n    templateUrl: './field-hint.component.html',\r\n    styleUrls: ['./field-hint.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        NgClass,\r\n        NgTemplateOutlet\r\n    ]\r\n})\r\nexport class FieldHintComponent {\r\n  isError = input<boolean>(false);\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { Component, contentChild, effect, ElementRef, input, untracked, viewChild } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\n\r\nexport interface HelpTextConst {\r\n  empty: GridWithHelpInput;\r\n  content: GridWithHelpInput;\r\n}\r\n\r\nexport interface GridWithHelpInput {\r\n  description: string;\r\n  hint: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-grid-with-help',\r\n  imports: [],\r\n  templateUrl: './grid-with-help.component.html',\r\n  styleUrl: './grid-with-help.component.scss'\r\n})\r\n\r\nexport class GridWithHelpComponent {\r\n  // ViewChild and ContentChild references - Access to DOM elements\r\n  gridWrapper = viewChild(\"gridWrapper\", { read: ElementRef });\r\n  agGrid = contentChild(AgGridAngular, { read: ElementRef });\r\n  dialogAction = contentChild(MatDialogActions, { read: ElementRef });\r\n\r\n  // Input properties - Required data from parent component\r\n  readonly helpText = input.required<GridWithHelpInput>({});\r\n  readonly refresh = input.required<number>();\r\n  readonly rowLength = input.required<number>();\r\n\r\n  // Constants - Fixed values for layout calculations\r\n  readonly DEFAULT_ROW_HEIGHT = 47; // Default height for AG Grid rows in pixels\r\n  readonly GRID_HEADER_HEIGHT = 64; // Height of AG Grid header in pixels\r\n  readonly HELP_CARD_BUFFER = 12;   // Additional buffer space for help card in pixels\r\n\r\n  constructor() {\r\n    // Effect that reacts to changes in refresh and rowLength signals\r\n    effect(() => {\r\n      const refresh = this.refresh();\r\n      const rowLength = this.rowLength();\r\n      const gridWrapperEl = this.gridWrapper()?.nativeElement;\r\n\r\n      // Early return if grid wrapper element is not available\r\n      if (!gridWrapperEl) return;\r\n\r\n      // Untracked execution to prevent unnecessary effect re-runs during layout updates\r\n      untracked(() => this.#updateLayout(gridWrapperEl, rowLength));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main layout update method - Handles the dynamic sizing and positioning of grid and help card\r\n   * @param gridWrapperEl - The main container element\r\n   * @param rowLength - Number of rows in the grid\r\n   */\r\n  #updateLayout(gridWrapperEl: HTMLElement, rowLength: number): void {\r\n    // Get references to essential DOM elements\r\n    const agGridEl = this.agGrid()?.nativeElement;\r\n    const dialogActionEl = this.dialogAction()?.nativeElement;\r\n    const helpCard = gridWrapperEl.querySelector('.help-info-card') as HTMLElement;\r\n\r\n    helpCard.classList.toggle('center-center', rowLength === 0);\r\n\r\n    // Early return if critical elements are missing\r\n    if (!agGridEl || !dialogActionEl) return;\r\n\r\n    helpCard.style.flex = \"\";\r\n\r\n    // Calculate all necessary dimensions for layout\r\n    const dimensions = this.#calculateDimensions(gridWrapperEl, agGridEl, dialogActionEl, helpCard, rowLength);\r\n\r\n    // Set AG Grid height based on row count and maximum height to prevent overflow\r\n    agGridEl.style.flex = dimensions.rowHeight ? `0 0 ${dimensions.agGridHeight}px` : '0px';\r\n    // TODO: 2dg, discus with 2ro, style not have a calc () fn\r\n    const maxHeight = document.querySelector('.mat-sidenav-content').clientHeight - dimensions.dialogHeaderHeight - dimensions.dialogActionHeight;\r\n    agGridEl.style.maxHeight = `${maxHeight}px`;\r\n\r\n    // Determine if help card should be hidden when content exceeds available space\r\n    const shouldHideHelp = dimensions.helpCardHeight + dimensions.agGridHeight + dimensions.dialogActionHeight + dimensions.dialogHeaderHeight > dimensions.wrapperHeight;\r\n\r\n    helpCard.style.flex = \"1 1 auto\";\r\n    // Remove Help card from layout if it should be hidden\r\n    helpCard?.classList.toggle('hidden-help-info-card', shouldHideHelp);\r\n  }\r\n\r\n  // Calculate dimensions for AG Grid and help card based on current layout\r\n  #calculateDimensions(gridWrapperEl: HTMLElement, agGridEl: HTMLElement, dialogActionEl: HTMLElement, helpCard: HTMLElement, rowLength: number) {\r\n    const rowHeight = agGridEl.querySelector('.ag-row')?.clientHeight ?? this.DEFAULT_ROW_HEIGHT;\r\n    const agGridHeight = this.GRID_HEADER_HEIGHT + (rowLength * rowHeight);\r\n    const helpCardHeight = helpCard.clientHeight + this.HELP_CARD_BUFFER;\r\n    const dialogActionHeight = dialogActionEl.offsetHeight;\r\n    const dialogHeaderHeight = gridWrapperEl.querySelector('.eav-dialog-header')?.clientHeight ?? 0;\r\n    // Get total available wrapper height\r\n    const wrapperHeight = gridWrapperEl.offsetHeight;\r\n    return {\r\n      rowHeight,\r\n      agGridHeight,\r\n      helpCardHeight,\r\n      dialogActionHeight,\r\n      dialogHeaderHeight,\r\n      wrapperHeight\r\n    };\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"grid-wrapper-dynamic\" #gridWrapper>\r\n  <ng-content select=\"[eav-dialog-header]\"></ng-content>\r\n  <ng-content select=\"[eav-dialog-content]\"> </ng-content>\r\n  <ng-content select=\"ag-grid-angular\"></ng-content>\r\n  <div class=\"help-info-card\">\r\n    <div class=\"help-info-card-text\">\r\n      <span [innerHTML]=\"helpText().description\"></span>\r\n      <span [innerHTML]=\"helpText().hint\"></span>\r\n    </div>\r\n  </div>\r\n  <ng-content select=\"mat-dialog-actions\"></ng-content>\r\n</div>\r\n","import { Route } from '@angular/router';\r\nimport { Of } from '../../../../core';\r\nimport { eavConstants, MetadataKeyTypes } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n"],"x_google_ignoreList":[]}