"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_import-content-type_import-content-03de5f"],{6142:function(L,g,s){s.r(g),s.d(g,{ImportContentTypeComponent:function(){return J}});var u=s(2090),d=s(8069),f=s(8047),a=s(5758),c=s(6317),v=s(6562),C=s(635),T=s(5005),t=s(7133),I=s(2528),_=s(6362),x=s(1529),y=s(7317),h=s(785),D=s(4742);function E(n,i){1&n&&t._UZ(0,"mat-spinner",12)}function O(n,i){1&n&&(t.TgZ(0,"div"),t._uU(1,"Select or drop files"),t.qZA())}function M(n,i){if(1&n&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&n){var e=i.$implicit;t.xp6(1),t.Oqu(e.name)}}function Z(n,i){if(1&n&&(t.ynx(0),t.YNc(1,M,2,1,"div",13),t.BQk()),2&n){var e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngForOf",e.importFiles)}}function A(n,i){1&n&&(t.TgZ(0,"div",18),t._uU(1," The import has been done. See the messages below for more information. "),t.qZA())}function P(n,i){1&n&&(t.TgZ(0,"div",19),t._uU(1," The import failed. See the messages below for more information. "),t.qZA())}var R=function(i,e,o){return{"sxc-message-warning":i,"sxc-message-success":e,"sxc-message-error":o}};function U(n,i){if(1&n&&(t.TgZ(0,"div",20),t._uU(1),t.qZA()),2&n){var e=i.$implicit;t.Q6J("ngClass",t.kEZ(2,R,0===e.MessageType,1===e.MessageType,2===e.MessageType)),t.xp6(1),t.hij(" ",e.Text," ")}}function F(n,i){if(1&n&&(t.TgZ(0,"div",14),t.YNc(1,A,2,0,"div",15),t.YNc(2,P,2,0,"div",16),t.YNc(3,U,2,6,"div",17),t.qZA()),2&n){var e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",e.importResult.Success),t.xp6(1),t.Q6J("ngIf",!e.importResult.Success),t.xp6(1),t.Q6J("ngForOf",e.importResult.Messages)}}function $(n,i){if(1&n){var e=t.EpF();t.ynx(0),t.TgZ(1,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeDialog()}),t._uU(2,"Cancel"),t.qZA(),t.TgZ(3,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).importContentType()}),t._uU(4," Import "),t.qZA(),t.BQk()}if(2&n){var o=t.oxw().ngIf;t.xp6(3),t.Q6J("disabled",!o.importFiles||o.isImporting||!!o.importResult)}}function b(n,i){if(1&n){var e=t.EpF();t.ynx(0),t.TgZ(1,"button",23),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeDialog()}),t._uU(2,"Close"),t.qZA(),t.BQk()}}function B(n,i){if(1&n){var e=t.EpF();t.TgZ(0,"div",1),t.NdJ("filesDropped",function(r){return t.CHM(e),t.oxw().filesDropped(r)}),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t._uU(3,"Import Content Types"),t.qZA(),t.qZA(),t.YNc(4,E,1,0,"mat-spinner",4),t.TgZ(5,"p",5),t._uU(6,"Select Content Type definition files (json) from your computer to import."),t.qZA(),t.TgZ(7,"div"),t.TgZ(8,"button",6),t.NdJ("click",function(){return t.CHM(e),t.MAs(12).click()}),t.YNc(9,O,2,0,"div",7),t.YNc(10,Z,2,1,"ng-container",7),t.qZA(),t.TgZ(11,"input",8,9),t.NdJ("change",function(r){return t.CHM(e),t.oxw().filesChange(r)}),t.qZA(),t.qZA(),t.YNc(13,F,4,3,"div",10),t.TgZ(14,"div",11),t.YNc(15,$,5,1,"ng-container",7),t.YNc(16,b,3,0,"ng-container",7),t.qZA(),t.qZA()}if(2&n){var o=i.ngIf;t.Q6J("allowedFileTypes","json"),t.xp6(4),t.Q6J("ngIf",o.isImporting),t.xp6(4),t.Q6J("disabled",o.isImporting),t.xp6(1),t.Q6J("ngIf",!o.importFiles),t.xp6(1),t.Q6J("ngIf",o.importFiles),t.xp6(3),t.Q6J("ngIf",o.importResult),t.xp6(2),t.Q6J("ngIf",!(null!=o.importResult&&o.importResult.Success)),t.xp6(1),t.Q6J("ngIf",null==o.importResult?null:o.importResult.Success)}}var J=function(){var n=function(){function i(e,o,p,r){(0,d.Z)(this,i),this.dialogData=e,this.dialogRef=o,this.contentTypesService=p,this.snackBar=r,this.hostClass="dialog-component",this.isImporting$=new c.X(!1),this.importFiles$=new c.X(null),this.importResult$=new c.X(null),this.templateVars$=(0,v.a)([this.isImporting$,this.importFiles$,this.importResult$]).pipe((0,C.U)(function(l){var m=(0,u.Z)(l,3);return{isImporting:m[0],importFiles:m[1],importResult:m[2]}}))}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){null!=this.dialogData.files&&(this.importFiles$.next(this.dialogData.files),this.importContentType())}},{key:"ngOnDestroy",value:function(){this.isImporting$.complete(),this.importFiles$.complete(),this.importResult$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"filesDropped",value:function(o){this.importFiles$.next(o),this.importResult$.next(null),this.importContentType()}},{key:"filesChange",value:function(o){var p=o.target.files,r=p.length>0?Array.from(p):null;this.importFiles$.next(r),this.importResult$.next(null)}},{key:"importContentType",value:function(){var o=this;this.isImporting$.next(!0),this.contentTypesService.import(this.importFiles$.value).subscribe({next:function(r){o.isImporting$.next(!1),o.importResult$.next(r)},error:function(r){o.isImporting$.next(!1),o.importResult$.next(null),o.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})}}]),i}();return n.\u0275fac=function(e){return new(e||n)(t.Y36(a.WI),t.Y36(a.so),t.Y36(T.s),t.Y36(I.ux))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-import-content-type"]],hostVars:1,hostBindings:function(e,o){2&e&&t.Ikx("className",o.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","tippy","Open file browser",3,"disabled","click"],[4,"ngIf"],["type","file","multiple","",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],["mode","indeterminate","diameter","20","color","accent"],[4,"ngFor","ngForOf"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,o){1&e&&(t.YNc(0,B,17,8,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,o.templateVars$))},directives:[_.O5,x.z,a.uh,y.lW,h.$,D.$g,_.sg,_.mk],pipes:[_.Ov],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"]}),n}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_import-content-type_import-content-03de5f.abad30ac2505fc71.js.map