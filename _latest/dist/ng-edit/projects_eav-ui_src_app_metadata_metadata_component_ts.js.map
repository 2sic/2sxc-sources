{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.ts","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/permissions/go-to-permissions.ts","./projects/eav-ui/src/app/permissions/index.ts","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions.routing.ts"],"sourcesContent":["import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-confirm-delete-dialog',\r\n  templateUrl: './confirm-delete-dialog.component.html',\r\n  styleUrls: ['./confirm-delete-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    MatButtonModule,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class ConfirmDeleteDialogComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    private dialog: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.dialog.close(confirm);\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Delete {{ dialogData.entityTitle }} ({{ dialogData.entityId }})?</mat-card-title>\r\n    @if (dialogData.message) {\r\n      <mat-card-subtitle [innerHtml]=\"dialogData.message | safeHtml\"></mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog(true)\">Delete</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-metadata-actions',\r\n  templateUrl: './metadata-actions.component.html',\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n  ],\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-metadata-content-type',\r\n  templateUrl: './metadata-content-type.component.html',\r\n  styleUrls: ['./metadata-content-type.component.scss'],\r\n  standalone: true,\r\n  imports: [TippyDirective,],\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, HostBinding, OnInit, signal, WritableSignal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { MetadataSaveFormValues } from './metadata-save-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-metadata-save-dialog',\r\n  templateUrl: './metadata-save-dialog.component.html',\r\n  styleUrls: ['./metadata-save-dialog.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatCardModule,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatInputModule,\r\n    MatButtonModule,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatSlideToggleModule,\r\n    FieldHintComponent,\r\n    ClickStopPropagationDirective,\r\n  ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  #contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  scope = signal(eavConstants.scopes.default.value);\r\n  scopeOptions = this.#contentTypesService.getScopesSig(undefined) as WritableSignal<ScopeOption[]>;\r\n\r\n  contentTypes = computed(() => {\r\n    const scope = this.scope();\r\n    return this.#contentTypesService.retrieveContentTypesSig(scope, undefined);\r\n  });\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialog.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions().some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions.set([newScopeOption, ...this.scopeOptions()]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.scope.set(newScope);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Create Metadata</mat-card-title>\r\n    <mat-card-subtitle>\r\n      This is a special operation to add an item which is metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      @if (advancedMode && guidedContentType) {\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Scope</mat-label>\r\n        <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions().length ? 'No items found' : ''\">\r\n          @for (scopeOption of scopeOptions(); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.value\">\r\n            {{ scopeOption.name }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <app-field-hint>\r\n        The scope should almost never be changed -\r\n        <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n      </app-field-hint>\r\n      }\r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        @if (guidedContentType) {\r\n        <mat-select formControlName=\"contentType\" required\r\n          [placeholder]=\"!contentTypes()()?.length ? 'No items found' : ''\">\r\n          @for (contentType of contentTypes()(); track contentType) {\r\n          <mat-option [value]=\"contentType.StaticName\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n        }\r\n        @if (!guidedContentType) {\r\n        <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n        }\r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"eav-card-actions\">\r\n    <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n      {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n    </mat-slide-toggle>\r\n    <div>\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\"\r\n        (click)=\"confirm()\">\r\n        Confirm\r\n      </button>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { EcoFabSpeedDialActionsComponent, EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent } from '@ecodev/fab-speed-dial';\r\nimport { map, take } from 'rxjs';\r\nimport { convert, Of, transient } from '../../../../core';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EavForInAdminUi } from '../edit/shared/models/eav';\r\nimport { openFeatureDialog } from '../features/shared/base-feature.component';\r\nimport { MetadataService } from '../permissions';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { MetadataKeyTypes } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../shared/logging';\r\nimport { EditForm, EditPrep, ItemAddIdentifier } from '../shared/models/edit-form.model';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataDto, MetadataItem, MetadataRecommendation } from './models/metadata.model';\r\n\r\n@Component({\r\n  selector: 'app-metadata',\r\n  templateUrl: './metadata.component.html',\r\n  styleUrls: ['./metadata.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    EcoFabSpeedDialComponent,\r\n    NgClass,\r\n    EcoFabSpeedDialTriggerComponent,\r\n    EcoFabSpeedDialActionsComponent,\r\n    MatBadgeModule,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class MetadataComponent implements OnInit {\r\n\r\n  log = classLog({MetadataComponent});\r\n\r\n  #entitiesSvc = transient(EntityEditService);\r\n  #metadataSvc = transient(MetadataService);\r\n  #contentItemSvc = transient(ContentItemsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) { }\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  fabOpen = signal(false);\r\n  itemFor = signal<EavForInAdminUi | undefined>(undefined);\r\n\r\n  metadataSet = signal<MetadataDto>({ Items: [], Recommendations: [] } as MetadataDto);\r\n\r\n  recommendations = computed(() => {\r\n    const metadata = this.metadataSet();\r\n    return metadata.Recommendations.filter(r =>\r\n      metadata.Items.filter(i => i._Type.Id === r.Id).length < r.Count\r\n    );\r\n  });\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key', 'title', 'contentTypeStaticName']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as Of<typeof MetadataKeyTypes>,\r\n    key: p.key,\r\n    contentTypeStaticName: p.contentTypeStaticName,\r\n  }));\r\n  protected title = decodeURIComponent(this.#dialogRoutes.getParam('title') ?? '');\r\n\r\n  ngOnInit() {\r\n    this.#fetchFor();\r\n    this.#fetchMetadata();\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.#fetchMetadata());\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen.set(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.matDialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.#entitiesSvc.create(recommendation.Id, { For: this.calculateItemFor('dummy').For }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.matDialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [this.calculateItemFor(contentType)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(contentType: string): ItemAddIdentifier {\r\n    const x = EditPrep.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key);\r\n    return EditPrep.newMetadataFromInfo(contentType, x);\r\n  }\r\n\r\n  #fetchFor() {\r\n    if (!this.#params.contentTypeStaticName) return;\r\n\r\n    this.#contentItemSvc.getAll(this.#params.contentTypeStaticName).subscribe(items => {\r\n      const item = items.find(i => i.Guid === this.#params.key);\r\n      if (item?.For)\r\n        this.itemFor.set(item.For);\r\n    });\r\n  }\r\n\r\n  #fetchMetadata() {\r\n    const logGetMetadata = this.log.rxTap('getMetadata');\r\n    this.#metadataSvc.getMetadata(this.#params.targetType, this.#params.keyType, this.#params.key)\r\n      .pipe(\r\n        logGetMetadata.pipe(),\r\n        take(1),\r\n        map(metadata => {\r\n          metadata.Recommendations.forEach(r => {\r\n            if (r.Icon?.startsWith('base64:')) {\r\n              r.Icon = r.Icon.replace('base64:', '');\r\n              r.Icon = window.atob(r.Icon);\r\n              // used for coloring black icons to white\r\n              r.Icon = r.Icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n            }\r\n          });\r\n          return metadata;\r\n        }),\r\n        logGetMetadata.map(),\r\n      )\r\n      // 2024-05-30 2dm - this standard shorthand seems to fail\r\n      // for reasons unknown to me. I've replaced it with the longhand\r\n      // The problem occurs when the metadataSet$ is updated after the initial load.\r\n      // .subscribe(this.metadataSet$);\r\n      .subscribe(data => {\r\n        this.metadataSet.set(data);\r\n      }\r\n      );\r\n  }\r\n\r\n  #editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.metadataSet().Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.matDialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.#deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.#entitiesSvc.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.#fetchMetadata();\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<MetadataItem>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          onCellClicked: (p: { data: MetadataItem }) => this.#editMetadata(p.data),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (p: { data: MetadataItem }) => `${p.data._Type.Name}${p.data._Type.Title !== p.data._Type.Name ? ` (${p.data._Type.Title})` : ''}`,\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            onDelete: (metadata) => this.#deleteMetadata(metadata),\r\n          } satisfies MetadataActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ title || 'Metadata' }}\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <p>\r\n      @if (!itemFor()) {\r\n      This item is not metadata for anything else.\r\n      }\r\n      @else {\r\n      This item is metadata for:\r\n      <br>Target: {{ itemFor().Target }}\r\n      <br>TargetType: {{ itemFor().TargetType }}\r\n      @if (itemFor().KeyNumber) {\r\n      <br>Key Number: {{ itemFor().KeyNumber }}\r\n      }\r\n      @if (itemFor().KeyGuid) {\r\n      <br>Key Guid: {{ itemFor().KeyGuid }}\r\n      }\r\n      @if (itemFor().KeyString) {\r\n      <br>Key String: {{ itemFor().KeyString }}\r\n      }\r\n      @if (itemFor().Title) {\r\n      <br>Title: {{ itemFor().Title }}\r\n      }\r\n      }\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"metadataSet().Items\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    @if (recommendations().length === 0) {\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\"\r\n      (click)=\"createMetadata()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    }\r\n    @if (recommendations().length > 0) {\r\n    <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': fabOpen() }\"\r\n      (openChange)=\"openChange($event)\">\r\n      <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n        <button mat-fab>\r\n          <mat-icon class=\"spin180\">{{ fabOpen() ? 'close' : 'add' }}</mat-icon>\r\n        </button>\r\n      </eco-fab-speed-dial-trigger>\r\n      <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\"\r\n          (click)=\"createMetadata()\">\r\n          <mat-icon>search</mat-icon>\r\n        </button>\r\n        @for (recommendation of recommendations(); track recommendation) {\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" [attr.label]=\"recommendation.Title\"\r\n          (click)=\"createMetadata(recommendation)\">\r\n          @if (recommendation.Icon) {\r\n          <div style=\"color: white; fill: white;\" [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n            [matBadgeHidden]=\"recommendation.Enabled\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"💎\"\r\n            matBadgePosition=\"below after\" aria-hidden=\"false\"></div>\r\n          } @else {\r\n          <mat-icon>add</mat-icon>\r\n          }\r\n        </button>\r\n        }\r\n      </eco-fab-speed-dial-actions>\r\n    </eco-fab-speed-dial>\r\n    }\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { Route } from '@angular/router';\r\nimport { Of } from '../../../../core';\r\nimport { eavConstants, MetadataKeyTypes } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n","\r\nexport * from './go-to-permissions';\r\nexport * from './models/permission.model';\r\nexport * from './permissions-dialog.config';\r\nexport * from './permissions.routing';\r\nexport * from './permissions.component';\r\n// export * from './permissions.module'; // TOOD:: für was wird der index verwendet?\r\nexport * from './services/metadata.service';\r\nexport * from './services/permissions.service';\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutes\r\n  },\r\n];\r\n"],"names":["MatButtonModule","MatCardModule","MAT_DIALOG_DATA","MatDialogRef","SafeHtmlPipe","i0","ɵɵelement","ɵɵproperty","ɵɵpipeBind1","ctx_r0","dialogData","message","ɵɵsanitizeHtml","ConfirmDeleteDialogComponent","constructor","dialog","hostClass","closeDialog","confirm","close","ɵɵdirectiveInject","i1","selectors","hostVars","hostBindings","ConfirmDeleteDialogComponent_HostBindings","rf","ctx","ɵɵhostProperty","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","ConfirmDeleteDialogComponent_Conditional_4_Template","ɵɵlistener","ConfirmDeleteDialogComponent_Template_button_click_6_listener","ConfirmDeleteDialogComponent_Template_button_click_8_listener","ɵɵadvance","ɵɵtextInterpolate2","entityTitle","entityId","ɵɵconditional","i2","MatCard","MatCardActions","MatCardHeader","MatCardSubtitle","MatCardTitle","i3","MatButton","styles","MatRippleModule","MatIconModule","MetadataActionsComponent","agInit","params","refresh","deleteMetadata","metadata","data","onDelete","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","MetadataActionsComponent_Template","MetadataActionsComponent_Template_div_click_1_listener","MatRipple","MatIcon","encapsulation","TippyDirective","MetadataContentTypeComponent","value","MetadataContentTypeComponent_Template","_Type","Description","ɵɵtextInterpolate1","NgClass","computed","signal","WritableSignal","FormsModule","ReactiveFormsModule","UntypedFormControl","UntypedFormGroup","Validators","MatOptionModule","MatFormFieldModule","MatInputModule","MatSelectModule","MatSlideToggleModule","distinctUntilChanged","startWith","transient","ContentTypesService","FieldHintComponent","dropdownInsertValue","eavConstants","ClickStopPropagationDirective","scopeOption_r1","name","ɵɵrepeaterCreate","MetadataSaveDialogComponent_Conditional_11_For_5_Template","ɵɵrepeaterTrackByIdentity","ctx_r1","scopeOptions","length","ɵɵrepeater","contentType_r3","StaticName","Label","MetadataSaveDialogComponent_Conditional_15_For_2_Template","tmp_1_0","contentTypes","MetadataSaveDialogComponent","contentTypesService","guidedContentType","advancedMode","scope","scopes","default","getScopesSig","undefined","retrieveContentTypesSig","ngOnInit","buildForm","contentType","toggleGuidedContentType","toggleAdvancedMode","event","checked","formValues","form","getRawValue","addControl","required","controls","valueChanges","pipe","subscribe","newScope","patchValue","prompt","some","option","newScopeOption","set","MetadataSaveDialogComponent_HostBindings","MetadataSaveDialogComponent_Conditional_11_Template","MetadataSaveDialogComponent_Conditional_15_Template","MetadataSaveDialogComponent_Conditional_16_Template","MetadataSaveDialogComponent_Template_button_click_18_listener","MetadataSaveDialogComponent_Template_button_click_21_listener","MetadataSaveDialogComponent_Conditional_24_Template","MetadataSaveDialogComponent_Template_mat_slide_toggle_change_26_listener","$event","MetadataSaveDialogComponent_Template_button_click_29_listener","MetadataSaveDialogComponent_Template_button_click_31_listener","ɵɵpureFunction1","_c0","touched","errors","valid","MatCardContent","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","MatSuffix","i5","MatSelect","i6","MatOption","i7","MatInput","i8","MatIconButton","i9","i10","MatSlideToggle","ChangeDetectorRef","ViewContainerRef","MatBadgeModule","MatDialog","MatDialogActions","MatSnackBar","RouterOutlet","EcoFabSpeedDialActionsComponent","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","map","take","convert","ContentItemsService","openFeatureDialog","MetadataService","ColumnDefinitions","defaultGridOptions","convertFormToUrl","classLog","EditPrep","SxcGridModule","DialogRoutingService","EntityEditService","itemFor","KeyNumber","KeyGuid","KeyString","Title","MetadataComponent_Conditional_10_Conditional_5_Template","MetadataComponent_Conditional_10_Conditional_6_Template","MetadataComponent_Conditional_10_Conditional_7_Template","MetadataComponent_Conditional_10_Conditional_8_Template","Target","TargetType","MetadataComponent_Conditional_15_Template_button_click_0_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","createMetadata","recommendation_r5","Icon","Enabled","MetadataComponent_Conditional_16_For_10_Template_button_click_0_listener","_r4","$implicit","MetadataComponent_Conditional_16_For_10_Conditional_1_Template","MetadataComponent_Conditional_16_For_10_Conditional_2_Template","MetadataComponent_Conditional_16_Template_eco_fab_speed_dial_openChange_0_listener","_r3","openChange","MetadataComponent_Conditional_16_Template_button_click_6_listener","MetadataComponent_Conditional_16_For_10_Template","fabOpen","ɵɵtextInterpolate","recommendations","MetadataComponent","entitiesSvc","metadataSvc","contentItemSvc","dialogRoutes","snackBar","matDialog","viewContainerRef","changeDetectorRef","log","gridOptions","buildGridOptions","metadataSet","Items","Recommendations","filter","r","i","Id","Count","getParams","p","targetType","parseInt","keyType","key","contentTypeStaticName","title","decodeURIComponent","getParam","fetchFor","fetchMetadata","doOnDialogClosed","open","recommendation","MissingFeature","CreateEmpty","Name","create","For","calculateItemFor","error","duration","next","createMetadataForm","metadataDialogRef","autoFocus","width","afterClosed","items","formUrl","navRelative","markForCheck","x","constructMetadataInfo","newMetadataFromInfo","#fetchFor","getAll","item","find","Guid","#fetchMetadata","logGetMetadata","rxTap","getMetadata","forEach","startsWith","replace","window","atob","editMetadata","#editMetadata","editId","#deleteMetadata","confirmed","DeleteWarning","confirmationDialogRef","isConfirmed","delete","#buildGridOptions","columnDefs","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWide","field","onCellClicked","headerName","valueGetter","cellRenderer","ActionsPinnedRight1","MetadataComponent_Template","MetadataComponent_Template_button_click_4_listener","MetadataComponent_Conditional_9_Template","MetadataComponent_Conditional_10_Template","MetadataComponent_Conditional_15_Template","MetadataComponent_Conditional_16_Template","MatMiniFabButton","MatFabButton","AgGridAngular","MatBadge","GoToPermissions","route","path","loadChildren","then","m","permissionRoutes","getUrl","getUrlApp","appId","app","toString","getUrlAttribute","id","attribute","getUrlContentType","guid","getUrlEntity","entity","getUrlLanguage","language","permissionsDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","DialogEntryComponent","EditRoutes","component","children"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}