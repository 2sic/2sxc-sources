{"version":3,"file":"projects_eav-ui_src_app_apps-management_site-languages_site-languages_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.component.ts","./projects/eav-ui/src/app/apps-management/site-languages/site-languages-status/site-languages-status.component.html","./projects/eav-ui/src/app/apps-management/site-languages/site-languages.component.ts","./projects/eav-ui/src/app/apps-management/site-languages/site-languages.component.html"],"sourcesContent":["import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { SiteLanguage } from '../../models/site-language.model';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status.models';\r\n\r\n@Component({\r\n    selector: 'app-site-languages-status',\r\n    templateUrl: './site-languages-status.component.html',\r\n    styleUrls: ['./site-languages-status.component.scss'],\r\n    imports: [MatSlideToggleModule]\r\n})\r\nexport class SiteLanguagesStatusComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  private params: ICellRendererParams & SiteLanguagesStatusParams;\r\n\r\n  agInit(params: ICellRendererParams & SiteLanguagesStatusParams): void {\r\n    this.params = params;\r\n    this.value = this.params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  toggleLanguage(event: MatSlideToggleChange): void {\r\n    const language: SiteLanguage = this.params.data;\r\n    this.params.onToggleLanguage(language, event.checked);\r\n  }\r\n}\r\n","<mat-slide-toggle [checked]=\"value\" (change)=\"toggleLanguage($event)\"></mat-slide-toggle>\r\n","import { ClientSideRowModelModule } from '@ag-grid-community/client-side-row-model';\r\nimport { GridOptions, ModuleRegistry } from '@ag-grid-community/core';\r\nimport { Component, computed, signal } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\nimport { transient } from '../../../../../core';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SiteLanguage } from '../models/site-language.model';\r\nimport { ZoneService } from '../services/zone.service';\r\nimport { SiteLanguagesStatusComponent } from './site-languages-status/site-languages-status.component';\r\nimport { SiteLanguagesStatusParams } from './site-languages-status/site-languages-status.models';\r\n\r\n@Component({\r\n    selector: 'app-site-languages',\r\n    templateUrl: './site-languages.component.html',\r\n    imports: [\r\n        MatDialogActions,\r\n        SxcGridModule,\r\n    ]\r\n})\r\nexport class SiteLanguagesComponent {\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  #zoneSvc = transient(ZoneService);\r\n  constructor() {\r\n    ModuleRegistry.registerModules([ClientSideRowModelModule]);\r\n  }\r\n\r\n  #refreshLanguagesSig = signal(0);\r\n\r\n  languages = computed(() => {\r\n    const r = this.#refreshLanguagesSig();\r\n    return this.#zoneSvc.getLanguage(undefined);\r\n  })\r\n\r\n\r\n  #toggleLanguage(language: SiteLanguage, enable: boolean): void {\r\n    this.#zoneSvc.toggleLanguage(language.Code, enable).subscribe(d => { // wait until the language change\r\n      this.#refreshLanguagesSig.set(this.#refreshLanguagesSig() + 1);\r\n    })\r\n\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          field: 'Code',\r\n          filter: 'agTextColumnFilter',\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguage> = {\r\n              tooltipGetter: (language: SiteLanguage) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Name',\r\n          field: 'Culture',\r\n          sort: 'asc',\r\n          onCellClicked: (params) => {\r\n            const language: SiteLanguage = params.data;\r\n            this.#toggleLanguage(language, !language.IsEnabled);\r\n          },\r\n        },\r\n        {\r\n          field: 'Status',\r\n          width: 72,\r\n          headerClass: 'dense',\r\n          cellClass: 'no-padding no-outline'.split(' '),\r\n          sortable: true,\r\n          filter: BooleanFilterComponent,\r\n          valueGetter: (p: { data: SiteLanguage }) => p.data.IsEnabled,\r\n          cellRenderer: SiteLanguagesStatusComponent,\r\n          cellRendererParams: (() => {\r\n            const params: SiteLanguagesStatusParams = {\r\n              onToggleLanguage: (language, enable) => this.#toggleLanguage(language, enable),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","@if (languages()(); as languages) {\r\n  <div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"languages\" [gridOptions]=\"gridOptions\"> </ag-grid-angular>\r\n    <mat-dialog-actions align=\"end\"></mat-dialog-actions>\r\n  </div>\r\n}\r\n"],"names":["MatSlideToggleModule","SiteLanguagesStatusComponent","agInit","params","value","refresh","toggleLanguage","event","language","data","onToggleLanguage","checked","selectors","decls","vars","consts","template","SiteLanguagesStatusComponent_Template","rf","ctx","i0","ɵɵelementStart","ɵɵlistener","SiteLanguagesStatusComponent_Template_mat_slide_toggle_change_0_listener","$event","ɵɵelementEnd","ɵɵproperty","i1","MatSlideToggle","styles","ClientSideRowModelModule","ModuleRegistry","computed","signal","MatDialogActions","transient","ColumnDefinitions","BooleanFilterComponent","defaultGridOptions","SxcGridModule","ZoneService","ɵɵelement","ɵɵadvance","ctx_r0","gridOptions","SiteLanguagesComponent","zoneSvc","constructor","buildGridOptions","refreshLanguagesSig","languages","r","getLanguage","undefined","registerModules","#toggleLanguage","enable","Code","subscribe","d","set","#buildGridOptions","columnDefs","IdWithDefaultRenderer","field","filter","cellRendererParams","tooltipGetter","TextWide","headerName","sort","onCellClicked","IsEnabled","width","headerClass","cellClass","split","sortable","valueGetter","p","cellRenderer","SiteLanguagesComponent_Template","ɵɵtemplate","SiteLanguagesComponent_Conditional_0_Template","ɵɵconditional","tmp_0_0","AgGridAngular","encapsulation"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}