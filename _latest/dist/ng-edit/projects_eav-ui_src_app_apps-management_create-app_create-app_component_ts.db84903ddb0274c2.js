"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts"],{3758:(j,h,n)=>{n.d(h,{F:()=>T});var t=n(316),e=n(1659),p=n(4950);const C=["*"],g=o=>({"hint-box__short":o});function f(o,m){1&o&&e.eu8(0)}function _(o,m){if(1&o&&(e.j41(0,"mat-hint"),e.DNE(1,f,1,0,"ng-container",2),e.k0s()),2&o){e.XpG();const l=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",l)}}function v(o,m){1&o&&e.eu8(0)}function E(o,m){if(1&o&&(e.j41(0,"mat-error"),e.DNE(1,v,1,0,"ng-container",2),e.k0s()),2&o){e.XpG();const l=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",l)}}function F(o,m){1&o&&e.SdG(0)}let T=(()=>{class o{constructor(){this.isError=(0,e.hFB)(!1),this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static{this.\u0275fac=function(c){return new(c||o)}}static{this.\u0275cmp=e.VBU({type:o,selectors:[["app-field-hint"]],inputs:{isError:[1,"isError"]},ngContentSelectors:C,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(c,u){if(1&c){const d=e.RV6();e.NAR(),e.j41(0,"div",1),e.bIt("click",function(){return e.eBV(d),e.Njj(u.toggleIsShort())}),e.DNE(1,_,2,1,"mat-hint")(2,E,2,1,"mat-error"),e.k0s(),e.DNE(3,F,1,0,"ng-template",null,0,e.C5r)}if(2&c){let d;e.Y8G("ngClass",e.eq3(2,g,u.isShort)),e.R7$(),e.vxM(!1===(d=u.isError())?1:!0===d?2:-1)}},dependencies:[p.RG,p.MV,p.TL,t.YU,t.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return o})()},7001:(j,h,n)=>{n.r(h),n.d(h,{CreateAppComponent:()=>R});var t=n(1659),e=n(4456),p=n(4175),C=n(4646),g=n(7941),f=n(4950),_=n(7984),v=n(5175),E=n(2159),F=n(2938),T=n(3758);const o=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var l=n(3583),c=n(3347);function u(i,A){1&i&&(t.j41(0,"app-field-hint",14),t.EFF(1," Required "),t.k0s()),2&i&&t.Y8G("isError",!0)}function d(i,A){if(1&i&&(t.j41(0,"app-field-hint",14),t.EFF(1),t.k0s()),2&i){const a=t.XpG(2);t.Y8G("isError",!0),t.R7$(),t.SpI(" ",a.appNameError," ")}}function k(i,A){if(1&i&&t.DNE(0,u,2,1,"app-field-hint",14)(1,d,2,2,"app-field-hint",14),2&i){const a=t.XpG();t.vxM(null!=a.form.controls.name.errors&&a.form.controls.name.errors.required?0:-1),t.R7$(),t.vxM(null!=a.form.controls.name.errors&&a.form.controls.name.errors.pattern?1:-1)}}let R=(()=>{class i{constructor(a,s){this.dialog=a,this.snackBar=s,this.hostClass="dialog-component",this.loading=(0,t.vPA)(!1),this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.appTemplateId="1",this.appsListService=(0,F.d)(l.U),this.form=this.buildForm()}closeDialog(){this.dialog.close()}create(){this.form.disable(),this.loading.set(!0);const a=this.form.controls.name.value?.trim().replace(/\s\s+/g," "),s=Number(this.appTemplateId);this.snackBar.open("Creating app..."),this.appsListService.create(a,null,s).subscribe({error:()=>{this.form.enable(),this.loading.set(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new e.J3({name:new e.hs(null,[e.k0.required,e.k0.pattern(o)])})}static{this.\u0275fac=function(s){return new(s||i)(t.rXU(g.CP),t.rXU(c.UG))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(s,r){2&s&&t.Mr5("className",r.hostClass)},decls:30,vars:5,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text","formControlName","name"],["required","true",3,"valueChange","value"],["value","0"],["value","1"],["value","2"],["align","end"],["type","button","mat-raised-button","",3,"click","disabled"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[3,"isError"]],template:function(s,r){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Create App"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"router-outlet"),t.j41(6,"form",4)(7,"mat-form-field",5)(8,"mat-label"),t.EFF(9,"Name"),t.k0s(),t.nrm(10,"input",6),t.k0s(),t.j41(11,"app-field-hint"),t.EFF(12," App name will also be used for the folder "),t.k0s(),t.DNE(13,k,2,2),t.nrm(14,"br"),t.j41(15,"mat-form-field",5)(16,"mat-label"),t.EFF(17,"Template"),t.k0s(),t.j41(18,"mat-select",7),t.mxI("valueChange",function(b){return t.DH7(r.appTemplateId,b)||(r.appTemplateId=b),b}),t.j41(19,"mat-option",8),t.EFF(20," Completely Naked / Raw App "),t.k0s(),t.j41(21,"mat-option",9),t.EFF(22," App Template Empty with some instructions "),t.k0s(),t.j41(23,"mat-option",10),t.EFF(24," App Template Basic with instructions and some data "),t.k0s()()()()(),t.j41(25,"mat-dialog-actions",11)(26,"button",12),t.bIt("click",function(){return r.closeDialog()}),t.EFF(27,"Cancel"),t.k0s(),t.j41(28,"button",13),t.bIt("click",function(){return r.create()}),t.EFF(29,"Create"),t.k0s()()()),2&s&&(t.R7$(6),t.Y8G("formGroup",r.form),t.R7$(7),t.vxM(r.form.controls.name.touched?13:-1),t.R7$(5),t.R50("value",r.appTemplateId),t.R7$(8),t.Y8G("disabled",r.loading()),t.R7$(2),t.Y8G("disabled",r.loading()||!r.form.valid))},dependencies:[E.n3,e.YN,e.qT,e.me,e.BC,e.cb,e.X1,e.j4,e.JD,f.RG,f.rl,f.nJ,_.fS,_.fg,v.Ve,v.VO,C.wT,C.Sy,g.E7,p.Hl,p.$z,T.F],encapsulation:2})}}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.03/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.db84903ddb0274c2.js.map