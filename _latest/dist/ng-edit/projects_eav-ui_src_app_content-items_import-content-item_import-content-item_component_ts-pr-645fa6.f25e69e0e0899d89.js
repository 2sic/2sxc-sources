"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6"],{7693:(D,I,t)=>{t.d(I,{X:()=>_,g:()=>a});var d=t(271),m=t(6474),h=t(7580);const _="admin/type/",o="admin/type/scopes";let a=(()=>{class s extends m.D{retrieveContentType(p){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.appId,contentTypeId:p}})}retrieveContentTypes(p){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.appId,scope:p}})}getScopes(){return this.http.get(this.apiUrl(o),{params:{appId:this.appId}}).pipe((0,d.T)(p=>{const T=p.old;return Object.keys(T).map(u=>({name:T[u],value:u}))}))}getScopesV2(){return this.http.get(this.apiUrl(o),{params:{appId:this.appId}}).pipe((0,d.T)(p=>p.scopes))}save(p){return this.http.post(this.apiUrl("admin/type/save"),p,{params:{appid:this.appId}})}delete(p){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:p.StaticName}})}import(p){const T=new FormData;for(const c of p)T.append("File",c);return this.http.post(this.apiUrl("admin/type/import"),T,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(p){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:p}})}static#t=this.\u0275fac=(()=>{let p;return function(c){return(p||(p=h.xGo(s)))(c||s)}})();static#e=this.\u0275prov=h.jDH({token:s,factory:s.\u0275fac})}return s})()},6754:(D,I,t)=>{t.r(I),t.d(I,{ImportContentItemComponent:()=>r});var d=t(7941),m=t(3550),h=t(336),_=t(5437),i=t(7580);let r=(()=>{class o{constructor(n){this.uploadType=m.HL.ContentItem,this.contentItemsService=(0,_.d)(h.F),n.title??="Import Single Item",n.description??="Select an item file (json) from your computer to import.",n.allowedFileTypes??="json",n.upload$??=l=>this.contentItemsService.importItem(l[0])}static#t=this.\u0275fac=function(l){return new(l||o)(i.rXU(d.Vh))};static#e=this.\u0275cmp=i.VBU({type:o,selectors:[["app-import-content-item"]],standalone:!0,features:[i.aNF],decls:1,vars:1,consts:[[3,"uploadType"]],template:function(l,e){1&l&&i.nrm(0,"app-file-upload-dialog",0),2&l&&i.Y8G("uploadType",e.uploadType)},dependencies:[m.jj]})}return o})()},5959:(D,I,t)=>{t.d(I,{h6:()=>g,zZ:()=>r});var d=t(271),m=t(7693),h=t(6474),_=t(7580);const i="admin/field/",r="admin/field/all",o="admin/field/GetSharedFields";let g=(()=>{class n extends h.D{typeListRetrieve(){return this.http.get(this.apiUrl(i+"DataTypes"),{params:{appid:this.appId}})}getInputTypesList(){return this.http.get(this.apiUrl(i+"InputTypes"),{params:{appid:this.appId}}).pipe((0,d.T)(e=>e.map(s=>({dataType:s.Type.substring(0,s.Type.indexOf("-")),inputType:s.Type,label:s.Label,description:s.Description,isDefault:s.IsDefault,isObsolete:s.IsObsolete,isRecommended:s.IsRecommended,obsoleteMessage:s.ObsoleteMessage,icon:s.IsDefault?"star":s.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(i+"ReservedNames"))}getFields(e){return this.http.get(this.apiUrl(r),{params:{appid:this.appId,staticName:e}}).pipe((0,d.T)(a=>{if(a)for(const s of a){if(!s.Metadata)continue;const E=s.Metadata;E.merged={...E.All,...E[s.Type],...E[s.InputType]}}return a}))}getShareableFields(){return this.http.get(this.apiUrl(o),{params:{appid:this.appId}})}getShareableFieldsFor(e){return this.http.get(this.apiUrl(o),{params:{appid:this.appId,attributeId:e.toString()}})}addInheritedField(e,a,s,E){return this.http.post(this.apiUrl(i+"AddInheritedField"),null,{params:{AppId:this.appId,ContentTypeId:e.toString(),SourceType:a,SourceField:s,name:E}})}share(e,a=!0){return this.http.post(this.apiUrl(i+"Share"),null,{params:{appid:this.appId,attributeId:e.toString(),share:a}})}inherit(e,a){return this.http.post(this.apiUrl(i+"Inherit"),null,{params:{appid:this.appId,attributeId:e.toString(),inheritMetadataOf:a}})}reOrder(e,a){return this.http.post(this.apiUrl(i+"Sort"),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,a){return this.http.post(this.apiUrl(m.X+"SetTitle"),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:e.Id.toString()}})}rename(e,a,s){return this.http.post(this.apiUrl(i+"Rename"),null,{params:{appid:this.appId,contentTypeId:a.toString(),attributeId:e.toString(),newName:s}})}delete(e,a){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(i+"Delete"),{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:e.Id.toString()}})}add(e,a){return this.http.post(this.apiUrl(i+"Add"),null,{params:{AppId:this.appId,ContentTypeId:a.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,a,s){return this.http.post(this.apiUrl(i+"InputType"),null,{params:{appId:this.appId,attributeId:e.toString(),field:a,inputType:s}})}static#t=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=_.xGo(n)))(s||n)}})();static#e=this.\u0275prov=_.jDH({token:n,factory:n.\u0275fac})}return n})()},693:(D,I,t)=>{function d(h){return new Promise((_,i)=>{const r=new FileReader;r.readAsDataURL(h),r.onload=()=>{_(r.result.split(",")[1])},r.onerror=o=>{i(o)}})}function m(h){return new Promise((_,i)=>{const r=new FileReader;r.readAsText(h),r.onload=()=>{_(r.result)},r.onerror=o=>{i(o)}})}t.d(I,{d:()=>m,n:()=>d})},9234:(D,I,t)=>{t.d(I,{Gg:()=>s,Tr:()=>E,gb:()=>a});var d=t(1567),m=t(6647),h=t(6301),_=t(271),i=t(4435),r=t(4839),o=t(5437),g=t(7580),n=t(6443),l=t(4821);const e={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},a="admin/entity/",s="admin/entity/list";let E=(()=>{class p{constructor(c,u){this.http=c,this.dnnContext=u,this.log=(0,i.T)({EntityService:p},e),this.queryService=(0,o.d)(r.c)}getEntities$(c){return this.log.fnIf("getEntities"),c.pipe((0,d.p)(u=>null!=u),(0,m.n)(u=>this.getAvailableEntities(u.contentTypeName).pipe((0,h.t)(1))))}getAvailableEntities(c,u){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[c],itemIds:u,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,_.T)(O=>O.Default))}delete(c,u,P,O,y,v){return this.log.fnIf("delete",{appId:c,contentType:u,entityId:P,force:O,parentId:y,parent}),this.http.delete(this.dnnContext.$2sxc.http.apiUrl(a+"delete"),{params:{contentType:u,id:P.toString(),appId:c,force:O.toString(),...y&&{parentId:y.toString()},...y&&v&&{parentField:v}}})}static#t=this.\u0275fac=function(u){return new(u||p)(g.KVO(n.Qq),g.KVO(l.ob))};static#e=this.\u0275prov=g.jDH({token:p,factory:p.\u0275fac})}return p})()},6474:(D,I,t)=>{t.d(I,{D:()=>i});var d=t(7580),m=t(4821),h=t(8873),_=t(6443);let i=(()=>{class r{constructor(){this.dnnContext=(0,d.WQX)(m.ob),this.http=(0,d.WQX)(_.Qq),this.context=(0,d.WQX)(h.o)}apiUrl(g){return this.dnnContext.$2sxc.http.apiUrl(g)}get appId(){return this.context.appId.toString()}get zoneId(){return this.context.zoneId.toString()}static#t=this.\u0275fac=function(n){return new(n||r)};static#e=this.\u0275prov=d.jDH({token:r,factory:r.\u0275fac})}return r})()},4839:(D,I,t)=>{t.d(I,{c:()=>r});var d=t(8873),m=t(4435),h=t(7580),_=t(6443);const i={all:!1,getAvailableEntities:!1,getEntities:!1};let r=(()=>{class o{constructor(n,l){this.http=n,this.context=l,this.log=(0,m.T)({QueryService:o},i)}getAvailableEntities(n,l,e,a){this.log.fnIf("getAvailableEntities",{queryUrl:n,params:l,fields:e,entitiesFilter:a});const s=!!l,c=(((l?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(s?`&${l}`:"")+"&$select="+(e??"")).substring(1);return this.http.post(`app/auto/query/${n}?${c}`,{Guids:a})}getEntities({contentTypes:n,itemIds:l,fields:e,log:a}){this.log.fnIf("getEntities",{log:a,contentTypes:n,itemIds:l,fields:e});const E=("&typeNames="+(n?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(l?.join(",")??"")+"&$select="+(e??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${E}`,{})}static#t=this.\u0275fac=function(l){return new(l||o)(h.KVO(_.Qq),h.KVO(d.o))};static#e=this.\u0275prov=h.jDH({token:o,factory:o.\u0275fac})}return o})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6.f25e69e0e0899d89.js.map