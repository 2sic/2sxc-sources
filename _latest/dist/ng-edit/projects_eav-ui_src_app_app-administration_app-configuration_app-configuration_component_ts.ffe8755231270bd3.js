"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_app-configuration_app-configuration_component_ts"],{708:(I,A,s)=>{s.r(A),s.d(A,{AppConfigurationComponent:()=>_t});var c=s(316),t=s(7580),C=s(6256),y=s(4175),f=s(3777),E=s(3840),T=s(2159),k=s(4205),_=s(2938),h=s(6545),x=s(336),l=s(8136),m=s(5469),b=s(9001),D=s(2437),r=s(52),j=s(4601),R=s(3216),B=s(6666),F=s(334),$=s(8471),Y=s(8873),z=s(2785),U=s(8713),X=s(6474);let M=(()=>{class i extends X.D{getAppInternals(e){return this.getSignal("admin/appinternals/get",{params:{appid:this.appId}},e)}static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=t.xGo(i)))(a||i)}})()}static{this.\u0275prov=t.jDH({token:i,factory:i.\u0275fac})}}return i})();var L=s(4699);const w={Settings:"Settings",Resources:"Resources"};var N=s(3454),V=s(5081),P=s(3347),W=s(852);function H(i,g){if(1&i){const e=t.RV6();t.j41(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),t.EFF(3,"Configuration"),t.k0s(),t.j41(4,"mat-icon"),t.EFF(5,"redeem"),t.k0s()(),t.j41(6,"mat-card-content"),t.nrm(7,"p"),t.j41(8,"div",2)(9,"div",3),t.EFF(10,"Name:"),t.k0s(),t.j41(11,"div",4)(12,"span",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.clipboard.copyToClipboard(a.contentItem()[0].DisplayName))}),t.EFF(13),t.k0s()()(),t.j41(14,"div",2)(15,"div",3),t.EFF(16,"Folder:"),t.k0s(),t.j41(17,"div",4)(18,"span",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.clipboard.copyToClipboard(a.contentItem()[0].Folder))}),t.EFF(19),t.k0s()()(),t.j41(20,"div",2)(21,"div",3),t.EFF(22,"Version:"),t.k0s(),t.j41(23,"div",4)(24,"span",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.clipboard.copyToClipboard(a.contentItem()[0].Version))}),t.EFF(25),t.k0s()()(),t.j41(26,"div",2)(27,"div",3),t.EFF(28,"For"),t.k0s(),t.j41(29,"div",4)(30,"b"),t.EFF(31,"2sxc: "),t.k0s(),t.j41(32,"span",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.clipboard.copyToClipboard(a.contentItem()[0].RequiredVersion))}),t.EFF(33),t.k0s(),t.j41(34,"b"),t.EFF(35," DNN: "),t.k0s(),t.j41(36,"span",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.clipboard.copyToClipboard(a.contentItem()[0].RequiredDnnVersion))}),t.EFF(37),t.k0s(),t.j41(38,"b"),t.EFF(39," Oqt: "),t.k0s(),t.j41(40,"span",5),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.clipboard.copyToClipboard(a.contentItem()[0].RequiredOqtaneVersion))}),t.EFF(41),t.k0s()()()(),t.nrm(42,"div",6),t.j41(43,"mat-card-actions",7),t.nrm(44,"app-docs-link-helper",8),t.j41(45,"a",9)(46,"mat-icon",10),t.EFF(47,"edit"),t.k0s(),t.j41(48,"span"),t.EFF(49,"Edit"),t.k0s()(),t.j41(50,"a",11)(51,"mat-icon",10),t.EFF(52,"local_offer"),t.k0s(),t.j41(53,"span"),t.EFF(54,"Metadata"),t.k0s()()()()}if(2&i){let e,n,a,o,p,d,v,G;const u=t.XpG();t.R7$(12),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(u.formatValue(null==(e=u.contentItem()[0])?null:e.DisplayName)),t.R7$(5),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(u.formatValue(null==(n=u.contentItem()[0])?null:n.Folder)),t.R7$(5),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(u.formatValue(null==(a=u.contentItem()[0])?null:a.Version)),t.R7$(7),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",u.formatValue(null==(o=u.contentItem()[0])?null:o.RequiredVersion)," "),t.R7$(3),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",u.formatValue(null==(p=u.contentItem()[0])?null:p.RequiredDnnVersion)," "),t.R7$(3),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",u.formatValue(null==(d=u.contentItem()[0])?null:d.RequiredOqtaneVersion)," "),t.R7$(3),t.Y8G("link","https://docs.2sxc.org/basics/app/configuration.html"),t.R7$(),t.Y8G("href",u.appConfigurationUrl(),t.B4B)("disabled",!u.appConfigAvailable()),t.R7$(),t.Y8G("matBadge",(null==(v=u.appSettingsInternal()())||null==v.EntityLists?null:v.EntityLists.ToSxcContentApp.length)||null),t.R7$(4),t.Y8G("href",u.urlToOpenMetadata(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(G=u.appSettingsInternal()())?null:G.MetadataList.Items.length)||null)}}let Q=(()=>{class i{#n;#i;#e;constructor(e,n,a){this.context=e,this.snackBar=n,this.translate=a,this.dialogSettings=t.hFB.required(),this.#n=(0,_.d)(M),this.#i=(0,_.d)(x.F),this.#e=(0,_.d)($.c),this.appConfigurationUrl=(0,t.vPA)(""),this.appConfigAvailable=(0,t.vPA)(!1),this.contentItem=this.#i.getAllSig(r.YX.contentTypes.customSettings,void 0),this.#a=(0,t.vPA)(0),this.appSettingsInternal=(0,t.EWP)(()=>(this.#a(),this.#n.getAppInternals(void 0))),this.clipboard=(0,_.d)(V.W),this.appConfigurationUrl=this.urlToEdit()}#a;ngOnInit(){this.#e.doOnDialogClosed(()=>{this.#a.update(e=>e+1)})}ngOnDestroy(){this.snackBar.dismiss()}#o(e){return"#"+this.#e.urlSubRoute(e)}urlToEdit(){let e=(0,t.vPA)("");return this.#i.getAll(r.YX.contentTypes.appConfiguration).subscribe(n=>{if(1!==n.length)return"";this.appConfigAvailable.set(!0),e.set(this.#o(`edit/${(0,R.s)({items:[F.c.editId(n[0].Id)]})}`))}),e}urlToOpenMetadata(){return this.#o(N.H.getUrlApp(this.context.appId,`Metadata for App: ${this.dialogSettings().Context.App.Name} (${this.context.appId})`))}formatValue(e){return""===e?"-":e??"-"}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(Y.o),t.rXU(P.UG),t.rXU(W.c$))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-app-configuration-card"]],inputs:{dialogSettings:[1,"dialogSettings"]},decls:1,vars:1,consts:[[1,"eav-card"],[1,"eav-card-header"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"click","tippy"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],["mat-button","","tippy","Edit app system resources",1,"eav-button__with-icon",3,"href","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","",1,"eav-button__with-icon",3,"href"]],template:function(n,a){1&n&&t.DNE(0,H,55,18,"mat-card",0),2&n&&t.vxM(a.contentItem()?0:-1)},dependencies:[f.Hu,f.RN,f.YY,f.m2,f.MM,f.dh,E.m_,E.An,y.Hl,y.It,C.Y,C.k,j.e,h.d],styles:[".eav-card-space-div[_ngcontent-%COMP%]{min-height:30px}"]})}}return i})();var K=s(7941);function Z(i,g){1&i&&t.EFF(0," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. ")}function J(i,g){1&i&&t.EFF(0," This is the Primary App of this Site. You can also configure sitewide settings and resources here. ")}function q(i,g){if(1&i&&(t.j41(0,"div",2),t.DNE(1,Z,1,0)(2,J,1,0),t.EFF(3," See "),t.j41(4,"a",6),t.EFF(5,"docs"),t.k0s(),t.EFF(6,". "),t.k0s()),2&i){const e=t.XpG(2);t.R7$(),t.vxM(e.isGlobal?1:-1),t.R7$(),t.vxM(e.isPrimary?2:-1)}}function tt(i,g){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"a",20)(5,"mat-icon",21),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"a",22)(9,"mat-icon",21),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",23)(12,"mat-icon",21),t.EFF(13,"dns"),t.k0s()()()()),2&i){let e,n,a;const o=t.XpG(2);t.R7$(4),t.Y8G("href",o.appGlobalSystemSettingsUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=o.viewModelSig())?null:e.systemSettingsCount)||null),t.R7$(3),t.Y8G("href",o.appGlobalCustomSettingsUrl(),t.B4B)("disabled",!o.customGlobalSettingsAvailable()),t.R7$(),t.Y8G("matBadge",(null==(n=o.viewModelSig())?null:n.customSettingsCount)||null),t.R7$(2),t.Y8G("href",o.urlToConfig(o.eavConstants.contentTypes.customSettings),t.B4B)("disabled",!o.customGlobalSettingsAvailable()),t.R7$(),t.Y8G("matBadge",(null==(a=o.viewModelSig())?null:a.customSettingsFieldsCount)||null)}}function et(i,g){1&i&&t.eu8(0)}function nt(i,g){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"a",24)(5,"mat-icon",21),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"a",25)(9,"mat-icon",21),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",26)(12,"mat-icon",21),t.EFF(13,"dns"),t.k0s()()()(),t.DNE(14,et,1,0,"ng-container",27)),2&i){let e,n,a;t.XpG();const o=t.sdS(65),p=t.XpG();t.R7$(4),t.Y8G("href",p.appSiteSystemSettingsUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=p.viewModelSig())?null:e.systemSettingsCount)||null),t.R7$(3),t.Y8G("href",p.appSiteCustomSettingsUrl(),t.B4B)("disabled",!p.customSiteSettingsAvailable()),t.R7$(),t.Y8G("matBadge",(null==(n=p.viewModelSig())?null:n.customSettingsCount)||null),t.R7$(2),t.Y8G("href",p.urlToConfig(p.eavConstants.contentTypes.customSettings),t.B4B)("disabled",!p.customSiteSettingsAvailable()),t.R7$(),t.Y8G("matBadge",(null==(a=p.viewModelSig())?null:a.customSettingsFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",o)}}function it(i,g){1&i&&t.eu8(0)}function at(i,g){1&i&&t.eu8(0)}function ot(i,g){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"a",28)(5,"mat-icon",21),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"a",29)(9,"mat-icon",21),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",30)(12,"mat-icon",21),t.EFF(13,"dns"),t.k0s()()()(),t.DNE(14,it,1,0,"ng-container",27)(15,at,1,0,"ng-container",27)),2&i){let e,n,a;t.XpG();const o=t.sdS(65),p=t.sdS(67),d=t.XpG();t.R7$(2),t.JRh(d.dialogSettings.Context.App.Name),t.R7$(2),t.Y8G("href",d.appContentSystemSettingsUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=d.viewModelSig())?null:e.systemSettingsCount)||null),t.R7$(3),t.Y8G("href",d.appContentCustomSettingsUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(n=d.viewModelSig())?null:n.customSettingsCount)||null),t.R7$(2),t.Y8G("href",d.urlToConfig(d.eavConstants.contentTypes.settings),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(a=d.viewModelSig())?null:a.customSettingsFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",p),t.R7$(),t.Y8G("ngTemplateOutlet",o)}}function st(i,g){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"a",31)(5,"mat-icon",21),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"a",32)(9,"mat-icon",21),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",33)(12,"mat-icon",21),t.EFF(13,"dns"),t.k0s()()()()),2&i){let e,n,a;const o=t.XpG(2);t.R7$(4),t.Y8G("href",o.appGlobalSystemResourcesUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=o.viewModelSig())?null:e.systemResourcesCount)||null),t.R7$(3),t.Y8G("href",o.appGlobalCustomResourcesUrl(),t.B4B)("disabled",!o.customGlobalResourcesAvailable()),t.R7$(),t.Y8G("matBadge",(null==(n=o.viewModelSig())?null:n.customResourcesCount)||null),t.R7$(2),t.Y8G("href",o.urlToConfig(o.eavConstants.contentTypes.customResources),t.B4B)("disabled",!o.customGlobalResourcesAvailable()),t.R7$(),t.Y8G("matBadge",(null==(a=o.viewModelSig())?null:a.customResourcesFieldsCount)||null)}}function lt(i,g){1&i&&t.eu8(0)}function rt(i,g){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"a",34)(5,"mat-icon",21),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"a",35)(9,"mat-icon",21),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",36)(12,"mat-icon",21),t.EFF(13,"dns"),t.k0s()()()(),t.DNE(14,lt,1,0,"ng-container",27)),2&i){let e,n,a;t.XpG();const o=t.sdS(65),p=t.XpG();t.R7$(4),t.Y8G("href",p.appSiteSystemResourcesUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=p.viewModelSig())?null:e.systemResourcesCount)||null),t.R7$(3),t.Y8G("href",p.appSiteCustomResourcesUrl(),t.B4B)("disabled",!p.customSiteResourcesAvailable()),t.R7$(),t.Y8G("matBadge",(null==(n=p.viewModelSig())?null:n.customResourcesCount)||null),t.R7$(2),t.Y8G("href",p.urlToConfig(p.eavConstants.contentTypes.customResources),t.B4B)("disabled",!p.customSiteResourcesAvailable()),t.R7$(),t.Y8G("matBadge",(null==(a=p.viewModelSig())?null:a.customResourcesFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",o)}}function dt(i,g){1&i&&t.eu8(0)}function pt(i,g){1&i&&t.eu8(0)}function ct(i,g){if(1&i&&(t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"a",37)(5,"mat-icon",21),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"a",38)(9,"mat-icon",21),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",39)(12,"mat-icon",21),t.EFF(13,"dns"),t.k0s()()()(),t.DNE(14,dt,1,0,"ng-container",27)(15,pt,1,0,"ng-container",27)),2&i){let e,n,a;t.XpG();const o=t.sdS(65),p=t.sdS(67),d=t.XpG();t.R7$(2),t.JRh(d.dialogSettings.Context.App.Name),t.R7$(2),t.Y8G("href",d.appContentSystemResourcesUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=d.viewModelSig())?null:e.systemResourcesCount)||null),t.R7$(3),t.Y8G("href",d.appContentCustomResourcesUrl(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(n=d.viewModelSig())?null:n.customResourcesCount)||null),t.R7$(2),t.Y8G("href",d.urlToConfig(d.eavConstants.contentTypes.resources),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(a=d.viewModelSig())?null:a.customResourcesFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",p),t.R7$(),t.Y8G("ngTemplateOutlet",o)}}function mt(i,g){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"button",40),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.openGlobalSettings())}),t.j41(5,"mat-icon"),t.EFF(6,"open_in_new"),t.k0s()()()()}}function gt(i,g){if(1&i){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"button",41),t.bIt("click",function(){t.eBV(e);const a=t.XpG(2);return t.Njj(a.openSiteSettings())}),t.j41(5,"mat-icon"),t.EFF(6,"open_in_new"),t.k0s()()()()}}function ut(i,g){1&i&&t.EFF(0," (not on Global App) ")}function ht(i,g){1&i&&t.EFF(0," (not on Content) ")}function ft(i,g){if(1&i&&t.DNE(0,ut,1,0)(1,ht,1,0),2&i){const e=t.XpG(2);t.vxM(e.isGlobal?0:-1),t.R7$(),t.vxM(e.isApp?1:-1)}}function bt(i,g){if(1&i&&(t.DNE(0,q,7,2,"div",2),t.j41(1,"div",3)(2,"mat-card",4)(3,"mat-card-header",5)(4,"mat-card-title"),t.EFF(5,"Settings"),t.k0s(),t.j41(6,"mat-icon"),t.EFF(7,"settings"),t.k0s()(),t.j41(8,"mat-card-content")(9,"p"),t.EFF(10,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),t.j41(11,"a",6),t.EFF(12,"docs"),t.k0s()(),t.j41(13,"table",7)(14,"thead")(15,"tr"),t.nrm(16,"th"),t.j41(17,"th"),t.EFF(18,"System Settings"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Custom Settings"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,tt,14,8,"tr")(23,nt,15,9)(24,ot,16,9),t.k0s()()(),t.nrm(25,"div",8),t.j41(26,"mat-card-actions",9),t.nrm(27,"app-docs-link-helper",10),t.j41(28,"a",11)(29,"mat-icon",12),t.EFF(30,"manage_search"),t.k0s(),t.j41(31,"span"),t.EFF(32,"Analyze Combined Settings"),t.k0s()()()(),t.j41(33,"mat-card",4)(34,"mat-card-header",5)(35,"mat-card-title"),t.EFF(36,"Language Resources (i18n)"),t.k0s(),t.j41(37,"mat-icon"),t.EFF(38,"translate"),t.k0s()(),t.j41(39,"mat-card-content")(40,"p"),t.EFF(41," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),t.j41(42,"a",6),t.EFF(43,"docs"),t.k0s()(),t.j41(44,"table",7)(45,"thead")(46,"tr"),t.nrm(47,"th"),t.j41(48,"th"),t.EFF(49,"System Resources"),t.k0s(),t.j41(50,"th"),t.EFF(51,"Custom Resources"),t.k0s()()(),t.j41(52,"tbody"),t.DNE(53,st,14,8,"tr")(54,rt,15,9)(55,ct,16,9),t.k0s()()(),t.nrm(56,"div",8),t.j41(57,"mat-card-actions",9),t.nrm(58,"app-docs-link-helper",10),t.j41(59,"a",13)(60,"mat-icon",12),t.EFF(61,"manage_search"),t.k0s(),t.j41(62,"span"),t.EFF(63,"Analyze Combined Resources"),t.k0s()()()(),t.DNE(64,mt,7,0,"ng-template",null,0,t.C5r)(66,gt,7,0,"ng-template",null,1,t.C5r),t.k0s(),t.j41(68,"div",3),t.nrm(69,"app-app-configuration-card",14),t.j41(70,"mat-card",4)(71,"mat-card-header",5)(72,"mat-card-title"),t.EFF(73,"Performance"),t.k0s(),t.j41(74,"mat-icon"),t.EFF(75,"bolt"),t.k0s()(),t.j41(76,"mat-card-content")(77,"p"),t.EFF(78,"LightSpeed Output Cache to speed up page by 50-90%"),t.k0s(),t.nrm(79,"app-feature-text-info",15),t.k0s(),t.nrm(80,"div",8),t.j41(81,"mat-card-actions",9),t.nrm(82,"app-docs-link-helper",10),t.j41(83,"a",16)(84,"mat-icon",17),t.EFF(85,"bolt"),t.k0s(),t.j41(86,"span"),t.EFF(87,"Edit LightSpeed"),t.k0s()()()(),t.j41(88,"mat-card",4)(89,"mat-card-header",5)(90,"mat-card-title"),t.EFF(91,"Security"),t.k0s(),t.j41(92,"mat-icon"),t.EFF(93,"local_police"),t.k0s()(),t.j41(94,"mat-card-content")(95,"p"),t.EFF(96,"ContentSecurityPolicy (CSP) features in this App - for maximum control."),t.k0s(),t.nrm(97,"app-feature-text-info",15),t.k0s(),t.nrm(98,"div",8),t.j41(99,"mat-card-actions",9),t.nrm(100,"app-docs-link-helper",10),t.k0s()(),t.j41(101,"mat-card",4)(102,"mat-card-header",5)(103,"mat-card-title"),t.EFF(104,"Permissions"),t.k0s(),t.j41(105,"mat-icon"),t.EFF(106,"person"),t.k0s()(),t.j41(107,"mat-card-content")(108,"p"),t.EFF(109,"Give access to the entire app (all data). Use with care."),t.k0s()(),t.nrm(110,"div",8),t.j41(111,"mat-card-actions",9),t.nrm(112,"app-docs-link-helper",10),t.j41(113,"a",16)(114,"mat-icon",17),t.EFF(115,"person"),t.k0s(),t.j41(116,"span"),t.EFF(117," Edit Permissions "),t.DNE(118,ft,2,2),t.k0s()(),t.nrm(119,"app-docs-link-helper",10),t.j41(120,"a",18)(121,"mat-icon",19),t.EFF(122," person "),t.k0s(),t.j41(123,"span"),t.EFF(124,"Language Permissions"),t.k0s()()()()()),2&i){let e;const n=t.XpG();t.vxM(n.isGlobal||n.isPrimary?0:-1),t.R7$(22),t.vxM(n.isGlobal?22:-1),t.R7$(),t.vxM(n.isPrimary?23:-1),t.R7$(),t.vxM(n.isApp?24:-1),t.R7$(3),t.Y8G("link","https://go.2sxc.org/settings"),t.R7$(),t.Y8G("href",n.urlToAnalyze(n.AnalyzeParts.Settings),t.B4B),t.R7$(25),t.vxM(n.isGlobal?53:-1),t.R7$(),t.vxM(n.isPrimary?54:-1),t.R7$(),t.vxM(n.isApp?55:-1),t.R7$(3),t.Y8G("link","https://go.2sxc.org/settings"),t.R7$(),t.Y8G("href",n.urlToAnalyze(n.AnalyzeParts.Resources),t.B4B),t.R7$(10),t.Y8G("dialogSettings",n.dialogSettings),t.R7$(10),t.Y8G("featureNameId","LightSpeedOutputCache")("asInfo",!0),t.R7$(3),t.Y8G("link","https://go.2sxc.org/lightspeed"),t.R7$(),t.FS9("disabled",!n.lightSpeedEnabled()),t.Y8G("href",n.urlToGetLightSpeedLink(),t.B4B),t.R7$(),t.Y8G("matBadge",(null==(e=n.viewModelSig())?null:e.appLightSpeedCount)||null),t.R7$(13),t.Y8G("featureNameId","ContentSecurityPolicy")("asInfo",!0),t.R7$(3),t.Y8G("link","https://go.2sxc.org/csp"),t.R7$(12),t.Y8G("link","https://docs.2sxc.org/basics/app/permissions.html"),t.R7$(),t.Y8G("href",n.urlToOpenPermissions(),t.B4B)("disabled",!n.dialogSettings.Context.Enable.AppPermissions),t.R7$(),t.Y8G("matBadge",n.dialogSettings.Context.App.Permissions.Count||null),t.R7$(4),t.vxM(n.dialogSettings.Context.Enable.AppPermissions?-1:118),t.R7$(),t.Y8G("link","https://patrons.2sxc.org/features/feat/PermissionsByLanguage"),t.R7$(),t.Y8G("href",n.urlToOpenLanguagePermissions(n.langPermsEnabled()),t.B4B),t.R7$(),t.Y8G("matBadgeHidden",n.langPermsEnabled())}}let _t=(()=>{class i{#n;#i;#e;#a;#o;#s;constructor(e,n,a,o,p){this.context=e,this.snackBar=n,this.matDialog=a,this.viewContainerRef=o,this.changeDetectorRef=p,this.#n=(0,_.d)(z.o),this.eavConstants=r.YX,this.AnalyzeParts=w,this.SystemSettingsScopes=r.Sq,this.AppScopes=B.F,this.appContentSystemSettingsUrl=(0,t.vPA)(""),this.appContentCustomSettingsUrl=(0,t.vPA)(""),this.appGlobalSystemSettingsUrl=(0,t.vPA)(""),this.appSiteSystemSettingsUrl=(0,t.vPA)(""),this.appGlobalSystemResourcesUrl=(0,t.vPA)(""),this.appContentSystemResourcesUrl=(0,t.vPA)(""),this.appSiteSystemResourcesUrl=(0,t.vPA)(""),this.appContentCustomResourcesUrl=(0,t.vPA)(""),this.appGlobalCustomResourcesUrl=(0,t.vPA)(""),this.appGlobalCustomSettingsUrl=(0,t.vPA)(""),this.appSiteCustomSettingsUrl=(0,t.vPA)(""),this.appSiteCustomResourcesUrl=(0,t.vPA)(""),this.customGlobalSettingsAvailable=(0,t.vPA)(!1),this.customGlobalResourcesAvailable=(0,t.vPA)(!1),this.customSiteSettingsAvailable=(0,t.vPA)(!1),this.customSiteResourcesAvailable=(0,t.vPA)(!1),this.appSettingsInternal$=new k.B,this.appStateAdvanced=!1,this.features=(0,t.WQX)(b.D),this.lightSpeedEnabled=this.features.isEnabled[l.T.LightSpeed],this.cspEnabled=this.features.isEnabled[l.T.ContentSecurityPolicy],this.langPermsEnabled=this.features.isEnabled[l.T.PermissionsByLanguage],this.#i=(0,_.d)(M),this.#e=(0,_.d)(x.F),this.#a=(0,_.d)(L.L),this.#o=(0,_.d)($.c),this.#s=(0,t.vPA)(0),this.appIn=(0,t.EWP)(()=>(this.#s(),this.#i.getAppInternals(void 0))),this.viewModelSig=(0,t.EWP)(()=>{const d=this.appIn()();if(!d)return null;const v=d?.EntityLists,G=r.YX.appMetadata.LightSpeed.ContentTypeName;return{appLightSpeedCount:d.MetadataList.Items.filter(S=>S._Type.Name===G).length,systemSettingsCount:this.isPrimary?v.SettingsSystem.filter(S=>S.SettingsEntityScope===r.Sq.Site).length:v.SettingsSystem.filter(S=>!S.SettingsEntityScope).length,customSettingsCount:v.AppSettings?.length,customSettingsFieldsCount:d.FieldAll.AppSettings?.length,systemResourcesCount:this.isPrimary?v.ResourcesSystem.filter(S=>S.SettingsEntityScope===r.Sq.Site).length:v.ResourcesSystem.filter(S=>!S.SettingsEntityScope).length,customResourcesCount:v.AppResources?.length,customResourcesFieldsCount:d?.FieldAll.AppResources?.length}})}ngOnInit(){this.#o.doOnDialogClosed(()=>{this.#s.update(e=>e+1)}),this.#a.getCurrent$().subscribe(e=>{this.dialogSettings=e;const n=e.Context.App.SettingsScope;this.isGlobal=n===B.F.Global,this.isPrimary=n===B.F.Site,this.isApp=n===B.F.App})}ngAfterViewInit(){this.loadData()}ngOnDestroy(){this.snackBar.dismiss()}loadData(){this.appGlobalSystemSettingsUrl=this.urlToEditSystem(r.YX.contentTypes.systemSettings,r.Sq.App),this.appContentSystemSettingsUrl=this.urlToEditSystem(r.YX.contentTypes.systemSettings,r.Sq.App),this.appSiteSystemSettingsUrl=this.urlToEditSystem(r.YX.contentTypes.systemSettings,r.Sq.Site),this.appGlobalSystemResourcesUrl=this.urlToEditSystem(r.YX.contentTypes.systemResources,r.Sq.App),this.appContentSystemResourcesUrl=this.urlToEditSystem(r.YX.contentTypes.systemResources,r.Sq.App),this.appSiteSystemResourcesUrl=this.urlToEditSystem(r.YX.contentTypes.systemResources,r.Sq.Site),this.appContentCustomSettingsUrl=this.urlToEditDefault(r.YX.contentTypes.settings),this.appContentCustomResourcesUrl=this.urlToEditDefault(r.YX.contentTypes.resources),this.appGlobalCustomResourcesUrl=this.urlToEditCustom(r.YX.contentTypes.customResources),this.appSiteCustomResourcesUrl=this.urlToEditCustom(r.YX.contentTypes.customResources),this.appGlobalCustomSettingsUrl=this.urlToEditCustom(r.YX.contentTypes.customSettings),this.appSiteCustomSettingsUrl=this.urlToEditCustom(r.YX.contentTypes.customSettings),this.customGlobalSettingsAvailable.set(1===this.#e.getAllSig(r.YX.contentTypes.customSettings,void 0).length),this.customGlobalResourcesAvailable.set(1===this.#e.getAllSig(r.YX.contentTypes.customResources,void 0).length),this.customSiteSettingsAvailable.set(1===this.#e.getAllSig(r.YX.contentTypes.customSettings,void 0).length),this.customSiteResourcesAvailable.set(1===this.#e.getAllSig(r.YX.contentTypes.customResources,void 0).length)}#t(e,n,a){let o="#"+this.#o.urlSubRoute(e);return n&&(o+=`?${new URLSearchParams(n).toString()}`),a&&(o+=`&errComponent=${a}`),o}urlToEditSystem(e,n){const a=(0,t.vPA)("");return this.#e.getAll(e).subscribe(o=>{const p=o.filter(d=>n===r.Sq.App?!d.SettingsEntityScope:d.SettingsEntityScope===r.Sq.Site);if(p.length>1)a.set(this.#t("message/e",{error:"AppAdmin.ErrorTooManyAppSettings"},e));else{const d=p[0];a.set(this.#t(`edit/${(0,R.s)({items:[null==d?F.c.newFromType(e,{...n===r.Sq.Site&&{SettingsEntityScope:r.Sq.Site}}):F.c.editId(d.Id)]})}`))}}),a}urlToEditCustom(e){const n=(0,t.vPA)("");return this.#e.getAll(e).subscribe(a=>{if(a.length>1)n.set(this.#t("message/e",{error:"AppAdmin.ErrorTooManyAppSettings"},e));else{const o=a[0];n.set(this.#t(`edit/${(0,R.s)({items:[null==o?F.c.newFromType(e):F.c.editId(o.Id)]})}`))}}),n}urlToEditDefault(e){const n=(0,t.vPA)("");return this.#e.getAll(e).subscribe(a=>{n.set(a.length<1?this.#t("message/e",{error:"AppAdmin.ErrorNoAppSettings"},e):a.length>1?this.#t("message/e",{error:"AppAdmin.ErrorTooManyAppSettings"},e):this.#t(`edit/${(0,R.s)({items:[F.c.editId(a[0].Id)]})}`))}),n}urlToGetLightSpeedLink(){return this.#t(`edit/${(0,R.s)(U.g.getLightSpeedEditParams(this.context.appId))}`)}openSiteSettings(){const e=this.dialogSettings.Context.Site.PrimaryApp;this.#n.openAppAdministration(e.ZoneId,e.AppId,"app")}openGlobalSettings(){const e=this.dialogSettings.Context.System.PrimaryApp;this.#n.openAppAdministration(e.ZoneId,e.AppId,"app")}urlToConfig(e){return this.#t(`fields/${e}`)}urlToOpenPermissions(){return this.#t(D.k.getUrlApp(this.context.appId))}urlToOpenLanguagePermissions(e){return e?this.#t("language-permissions"):this.#t("edit-language-permissions")}urlToAnalyze(e){return this.#t(`analyze/${e}`)}static{this.\u0275fac=function(n){return new(n||i)(t.rXU(Y.o),t.rXU(P.UG),t.rXU(K.bZ),t.rXU(t.c1b),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-app-configuration"]],decls:2,vars:1,consts:[["goToGlobal",""],["goToSite",""],[1,"alert","alert-info","scope-info"],[1,"eav-cards-box"],[1,"eav-card"],[1,"eav-card-header"],["href","https://go.2sxc.org/settings","target","_blank"],[1,"eav-settings-and-resources-table"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],["mat-button","","tippy","See the result of combining all settings",1,"eav-button__with-icon",3,"href"],[1,"eav-icon"],["mat-button","","tippy","See the result of combining all resources",1,"eav-button__with-icon",3,"href"],[3,"dialogSettings"],[3,"featureNameId","asInfo"],["mat-button","",1,"eav-button__with-icon",3,"href","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","",1,"eav-button__with-icon",3,"href"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadgeHidden"],["mat-icon-button","","tippy","Edit global system settings",3,"href"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge"],["mat-icon-button","","tippy","Edit custom global settings",3,"href","disabled"],["mat-icon-button","","tippy","Configure fields of the custom global settings",3,"href","disabled"],["mat-icon-button","","tippy","Edit site system settings",3,"href"],["mat-icon-button","","tippy","Edit site system settings",3,"href","disabled"],["mat-icon-button","","tippy","Configure fields of the custom site settings",3,"href","disabled"],[4,"ngTemplateOutlet"],["mat-icon-button","","tippy","Edit app system settings",3,"href"],["mat-icon-button","","tippy","Edit custom app settings",3,"href"],["mat-icon-button","","tippy","Configure fields of the custom app settings",3,"href"],["mat-icon-button","","tippy","Edit global system resources",3,"href"],["mat-icon-button","","tippy","Edit custom global resources",3,"href","disabled"],["mat-icon-button","","tippy","Configure fields of the custom global resources",3,"href","disabled"],["mat-icon-button","","tippy","Edit site system resources",3,"href"],["mat-icon-button","","tippy","Edit custom site resources",3,"href","disabled"],["mat-icon-button","","tippy","Configure fields of the custom site resources",3,"href","disabled"],["mat-icon-button","","tippy","Edit app system resources",3,"href"],["mat-icon-button","","tippy","Edit custom app resources",3,"href"],["mat-icon-button","","tippy","Configure fields of the custom app resources",3,"href"],["mat-icon-button","","tippy","Go to global",3,"click"],["mat-icon-button","","tippy","Go to site",3,"click"]],template:function(n,a){1&n&&(t.DNE(0,bt,125,29),t.nrm(1,"router-outlet")),2&n&&t.vxM(a.viewModelSig()?0:-1)},dependencies:[f.Hu,f.RN,f.YY,f.m2,f.MM,f.dh,E.m_,E.An,y.Hl,y.It,y.pQ,y.iY,C.Y,C.k,c.T3,Q,m.L,T.n3,j.e,h.d],styles:[".eav-settings-and-resources-table[_ngcontent-%COMP%]{width:100%}.eav-settings-and-resources-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.eav-settings-and-resources-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]})}}return i})()},6256:(I,A,s)=>{s.d(A,{Y:()=>_,k:()=>k});var c=s(7580),t=s(4646),C=s(2102),y=s(316),f=s(9227);const E="mat-badge-content";let T=(()=>{class h{static \u0275fac=function(m){return new(m||h)};static \u0275cmp=c.VBU({type:h,selectors:[["ng-component"]],decls:0,vars:0,template:function(m,b){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}"],encapsulation:2,changeDetection:0})}return h})(),k=(()=>{class h{_ngZone=(0,c.WQX)(c.SKi);_elementRef=(0,c.WQX)(c.aKT);_ariaDescriber=(0,c.WQX)(C.vr);_renderer=(0,c.WQX)(c.sFG);_animationMode=(0,c.WQX)(c.bc$,{optional:!0});_idGenerator=(0,c.WQX)(C.g7);get color(){return this._color}set color(l){this._setColor(l),this._color=l}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(l){this._updateRenderedContent(l)}_content;get description(){return this._description}set description(l){this._updateDescription(l)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=(0,c.WQX)(C.Z7);_document=(0,c.WQX)(y.qQ);constructor(){(0,c.WQX)(f.l).load(T),(0,c.WQX)(f.l).load(f.Y)}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const l=this._renderer.createElement("span"),m="mat-badge-active";return l.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),l.setAttribute("aria-hidden","true"),l.classList.add(E),"NoopAnimations"===this._animationMode&&l.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(l),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{l.classList.add(m)})}):l.classList.add(m),l}_updateRenderedContent(l){const m=`${l??""}`.trim();this._isInitialized&&m&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=m),this._content=m}_updateDescription(l){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!l||this._isHostInteractive())&&this._removeInlineDescription(),this._description=l,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,l):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(l){const m=this._elementRef.nativeElement.classList;m.remove(`mat-badge-${this._color}`),l&&m.add(`mat-badge-${l}`)}_clearExistingBadges(){const l=this._elementRef.nativeElement.querySelectorAll(`:scope > .${E}`);for(const m of Array.from(l))m!==this._badgeElement&&m.remove()}static \u0275fac=function(m){return new(m||h)};static \u0275dir=c.FsC({type:h,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(m,b){2&m&&c.AVh("mat-badge-overlap",b.overlap)("mat-badge-above",b.isAbove())("mat-badge-below",!b.isAbove())("mat-badge-before",!b.isAfter())("mat-badge-after",b.isAfter())("mat-badge-small","small"===b.size)("mat-badge-medium","medium"===b.size)("mat-badge-large","large"===b.size)("mat-badge-hidden",b.hidden||!b.content)("mat-badge-disabled",b.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",c.L39],disabled:[2,"matBadgeDisabled","disabled",c.L39],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",c.L39]},features:[c.GFd]})}return h})(),_=(()=>{class h{static \u0275fac=function(m){return new(m||h)};static \u0275mod=c.$C({type:h});static \u0275inj=c.G2t({imports:[C.Pd,t.yE,t.yE]})}return h})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.01.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_app-configuration_app-configuration_component_ts.ffe8755231270bd3.js.map