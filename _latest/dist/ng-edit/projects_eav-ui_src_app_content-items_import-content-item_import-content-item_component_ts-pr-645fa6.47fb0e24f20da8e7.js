"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6"],{7693:(g,m,e)=>{e.d(m,{X:()=>_,g:()=>a});var I=e(271),E=e(6474),u=e(7580);const _="admin/type/",n="admin/type/scopes";let a=(()=>{class s extends E.D{retrieveContentType(o){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.appId,contentTypeId:o}})}retrieveContentTypes(o){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.appId,scope:o}})}getScopes(){return this.http.get(this.apiUrl(n),{params:{appId:this.appId}}).pipe((0,I.T)(o=>{const d=o.old;return Object.keys(d).map(T=>({name:d[T],value:T}))}))}getScopesV2(){return this.http.get(this.apiUrl(n),{params:{appId:this.appId}}).pipe((0,I.T)(o=>o.scopes))}save(o){return this.http.post(this.apiUrl("admin/type/save"),o,{params:{appid:this.appId}})}delete(o){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:o.StaticName}})}import(o){const d=new FormData;for(const c of o)d.append("File",c);return this.http.post(this.apiUrl("admin/type/import"),d,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(o){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:o}})}static#t=this.\u0275fac=(()=>{let o;return function(c){return(o||(o=u.xGo(s)))(c||s)}})();static#e=this.\u0275prov=u.jDH({token:s,factory:s.\u0275fac})}return s})()},6754:(g,m,e)=>{e.r(m),e.d(m,{ImportContentItemComponent:()=>l});var I=e(7941),E=e(3550),u=e(336),_=e(5437),i=e(7580);let l=(()=>{class n{constructor(p){this.uploadType=E.HL.ContentItem,this.contentItemsService=(0,_.d)(u.F),p.title??="Import Single Item",p.description??="Select an item file (json) from your computer to import.",p.allowedFileTypes??="json",p.upload$??=r=>this.contentItemsService.importItem(r[0])}static#t=this.\u0275fac=function(r){return new(r||n)(i.rXU(I.Vh))};static#e=this.\u0275cmp=i.VBU({type:n,selectors:[["app-import-content-item"]],standalone:!0,features:[i.aNF],decls:1,vars:1,consts:[[3,"uploadType"]],template:function(r,t){1&r&&i.nrm(0,"app-file-upload-dialog",0),2&r&&i.Y8G("uploadType",t.uploadType)},dependencies:[E.jj]})}return n})()},5959:(g,m,e)=>{e.d(m,{h6:()=>y,zZ:()=>l});var I=e(271),E=e(7693),u=e(6474),_=e(7580);const i="admin/field/",l="admin/field/all",n="admin/field/GetSharedFields";let y=(()=>{class p extends u.D{typeListRetrieve(){return this.http.get(this.apiUrl(i+"DataTypes"),{params:{appid:this.appId}})}getInputTypesList(){return this.http.get(this.apiUrl(i+"InputTypes"),{params:{appid:this.appId}}).pipe((0,I.T)(t=>t.map(s=>({dataType:s.Type.substring(0,s.Type.indexOf("-")),inputType:s.Type,label:s.Label,description:s.Description,isDefault:s.IsDefault,isObsolete:s.IsObsolete,isRecommended:s.IsRecommended,obsoleteMessage:s.ObsoleteMessage,icon:s.IsDefault?"star":s.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(i+"ReservedNames"))}getFields(t){return this.http.get(this.apiUrl(l),{params:{appid:this.appId,staticName:t}}).pipe((0,I.T)(a=>{if(a)for(const s of a){if(!s.Metadata)continue;const h=s.Metadata;h.merged={...h.All,...h[s.Type],...h[s.InputType]}}return a}))}getShareableFields(){return this.http.get(this.apiUrl(n),{params:{appid:this.appId}})}getShareableFieldsFor(t){return this.http.get(this.apiUrl(n),{params:{appid:this.appId,attributeId:t.toString()}})}addInheritedField(t,a,s,h){return this.http.post(this.apiUrl(i+"AddInheritedField"),null,{params:{AppId:this.appId,ContentTypeId:t.toString(),SourceType:a,SourceField:s,name:h}})}share(t,a=!0){return this.http.post(this.apiUrl(i+"Share"),null,{params:{appid:this.appId,attributeId:t.toString(),share:a}})}inherit(t,a){return this.http.post(this.apiUrl(i+"Inherit"),null,{params:{appid:this.appId,attributeId:t.toString(),inheritMetadataOf:a}})}reOrder(t,a){return this.http.post(this.apiUrl(i+"Sort"),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),order:JSON.stringify(t)}})}setTitle(t,a){return this.http.post(this.apiUrl(E.X+"SetTitle"),null,{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:t.Id.toString()}})}rename(t,a,s){return this.http.post(this.apiUrl(i+"Rename"),null,{params:{appid:this.appId,contentTypeId:a.toString(),attributeId:t.toString(),newName:s}})}delete(t,a){if(t.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(i+"Delete"),{params:{appid:this.appId,contentTypeId:a.Id.toString(),attributeId:t.Id.toString()}})}add(t,a){return this.http.post(this.apiUrl(i+"Add"),null,{params:{AppId:this.appId,ContentTypeId:a.toString(),Id:t.Id.toString(),Type:t.Type,InputType:t.InputType,StaticName:t.StaticName,IsTitle:t.IsTitle.toString(),Index:t.SortOrder.toString()}})}updateInputType(t,a,s){return this.http.post(this.apiUrl(i+"InputType"),null,{params:{appId:this.appId,attributeId:t.toString(),field:a,inputType:s}})}static#t=this.\u0275fac=(()=>{let t;return function(s){return(t||(t=_.xGo(p)))(s||p)}})();static#e=this.\u0275prov=_.jDH({token:p,factory:p.\u0275fac})}return p})()},693:(g,m,e)=>{function I(u){return new Promise((_,i)=>{const l=new FileReader;l.readAsDataURL(u),l.onload=()=>{_(l.result.split(",")[1])},l.onerror=n=>{i(n)}})}function E(u){return new Promise((_,i)=>{const l=new FileReader;l.readAsText(u),l.onload=()=>{_(l.result)},l.onerror=n=>{i(n)}})}e.d(m,{d:()=>E,n:()=>I})},9234:(g,m,e)=>{e.d(m,{Gg:()=>a,Tr:()=>s,gb:()=>t});var I=e(1567),E=e(6647),u=e(6301),_=e(271),i=e(4435),l=e(4839),n=e(5437),y=e(6474),p=e(7580);const r={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},t="admin/entity/",a="admin/entity/list";let s=(()=>{class h extends y.D{constructor(){super(...arguments),this.log=(0,i.T)({EntityService:h},r),this.queryService=(0,n.d)(l.c)}getEntities$(d){return this.log.fnIf("getEntities"),d.pipe((0,I.p)(c=>null!=c),(0,E.n)(c=>this.getAvailableEntities(c.contentTypeName).pipe((0,u.t)(1))))}getAvailableEntities(d,c){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[d],itemIds:c,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,_.T)(D=>D.Default))}delete(d,c,T,D,O,v){return this.log.fnIf("delete",{appId:d,contentType:c,entityId:T,force:D,parentId:O,parent}),this.http.delete(this.apiUrl(t+"delete"),{params:{contentType:c,id:T.toString(),appId:d,force:D.toString(),...O&&{parentId:O.toString()},...O&&v&&{parentField:v}}})}static#t=this.\u0275fac=(()=>{let d;return function(T){return(d||(d=p.xGo(h)))(T||h)}})();static#e=this.\u0275prov=p.jDH({token:h,factory:h.\u0275fac})}return h})()},4839:(g,m,e)=>{e.d(m,{c:()=>l});var I=e(8873),E=e(4435),u=e(7580),_=e(6443);const i={all:!1,getAvailableEntities:!1,getEntities:!1};let l=(()=>{class n{constructor(p,r){this.http=p,this.context=r,this.log=(0,E.T)({QueryService:n},i)}getAvailableEntities(p,r,t,a){this.log.fnIf("getAvailableEntities",{queryUrl:p,params:r,fields:t,entitiesFilter:a});const s=!!r,c=(((r?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(s?`&${r}`:"")+"&$select="+(t??"")).substring(1);return this.http.post(`app/auto/query/${p}?${c}`,{Guids:a})}getEntities({contentTypes:p,itemIds:r,fields:t,log:a}){this.log.fnIf("getEntities",{log:a,contentTypes:p,itemIds:r,fields:t});const h=("&typeNames="+(p?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(r?.join(",")??"")+"&$select="+(t??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${h}`,{})}static#t=this.\u0275fac=function(r){return new(r||n)(u.KVO(_.Qq),u.KVO(I.o))};static#e=this.\u0275prov=u.jDH({token:n,factory:n.\u0275fac})}return n})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.01.00/dist/ng-edit/projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6.47fb0e24f20da8e7.js.map