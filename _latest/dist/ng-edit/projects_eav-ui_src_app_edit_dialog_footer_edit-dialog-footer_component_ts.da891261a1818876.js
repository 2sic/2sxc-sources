"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_edit_dialog_footer_edit-dialog-footer_component_ts"],{5955:(R,C,s)=>{s.r(C),s.d(C,{EditDialogFooterComponent:()=>xt});var t=s(8559);const O={Data:"data",Formulas:"formulas",Logs:"logs"};var c=s(2913),m=s(316),g=s(7149);const y=(n,l)=>({"log-error":n,"log-warn":l});function f(n,l){1&n&&(t.j41(0,"div"),t.EFF(1,"Logs are empty"),t.k0s())}function $(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"span",2),t.EFF(2),t.nI1(3,"date"),t.k0s(),t.j41(4,"span",3),t.EFF(5),t.k0s(),t.j41(6,"span",4),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG();return t.Njj(r.logToConsole(i))}),t.EFF(7," console "),t.k0s()()}if(2&n){const e=l.$implicit,o=t.XpG();t.Y8G("ngClass",t.l_i(6,y,e.severity===o.LogSeverities.Error,e.severity===o.LogSeverities.Warn)),t.R7$(2),t.SpI("",t.i5U(3,3,e.time,"HH:mm:ss"),":"),t.R7$(3),t.JRh(e.label)}}let u=(()=>{class n{constructor(e){this.loggingService=e,this.LogSeverities=g.E,this.logs=this.loggingService.getLogsSignal()}logToConsole(e){switch(e.severity){case g.E.Log:console.log(e.label,e.error);break;case g.E.Warn:console.warn(e.label,e.error);break;case g.E.Error:console.error(e.label,e.error)}}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(g.J))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-logs-dump"]],standalone:!0,features:[t.aNF],decls:4,vars:1,consts:[[1,"logs-box","fancy-scrollbar-light"],[1,"log-entry",3,"ngClass"],[1,"log-entry-part","log-entry-time"],[1,"log-entry-part","log-entry-label"],["tippy","Log to console",1,"log-entry-part","log-entry-show",3,"click"]],template:function(o,i){1&o&&(t.j41(0,"div",0),t.DNE(1,f,2,0,"div"),t.Z7z(2,$,8,9,"div",1,t.fX1),t.k0s()),2&o&&(t.R7$(),t.vxM(1,0===i.logs().length?1:-1),t.R7$(),t.Dyx(i.logs()))},dependencies:[m.YU,c.Cc,c.PW,m.vh],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}.logs-box[_ngcontent-%COMP%]{flex:1 1 auto;overflow:auto;font-size:14px}.log-entry[_ngcontent-%COMP%]{display:flex;align-items:center;box-sizing:border-box;border-bottom:1px solid rgb(240,240,240);padding-top:2px;padding-bottom:2px}.log-entry[_ngcontent-%COMP%]   .log-entry-part[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.log-error[_ngcontent-%COMP%]{color:red;border-color:#ffd6d6;background-color:#fff0f0}.log-warn[_ngcontent-%COMP%]{color:#5c3c00;border-color:#fff5c2;background-color:#fffbe5}.log-entry-time[_ngcontent-%COMP%]{flex:0 0 auto}.log-entry-label[_ngcontent-%COMP%]{flex:1 1 auto}.log-entry-show[_ngcontent-%COMP%]{flex:0 0 auto;color:#06599a;font-size:12px;text-decoration:underline;cursor:pointer}"]})}return n})();var d=s(6817),p=s(52),N=s(519),B=s(886),b=s(59),T=s(6231);const x={Entity:"entityGuid",Field:"fieldValue",Target:"formulaTarget"};let X=(()=>{class n{constructor(){this.maxLength=24}transform(e){return e.length<=this.maxLength?e:`\u2026${e.substring(e.length-this.maxLength)}`}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275pipe=t.EJ8({name:"snippetLabelSize",type:n,pure:!0,standalone:!0})}return n})();var v=s(1034),V=s(8801),F=s(3840),h=s(4175),E=s(7984),j=s(5060),M=s(4456),k=s(5175),D=s(5944),z=s(7896),L=s(5437),Y=s(8147),S=s(1736),G=s(6110),U=s(6645),w=s(3347),A=s(852);const W=(n,l)=>({disabled:n,focused:l}),J=n=>({disabled:n}),P=n=>({"has-formula":n});function K(n,l){if(1&n&&(t.j41(0,"mat-option",4)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=l.$implicit;t.Y8G("value",e.entityGuid),t.R7$(),t.Y8G("ngClass",t.eq3(3,P,e.hasFormula)),t.R7$(),t.SpI(" ",e.label," ")}}function H(n,l){if(1&n&&(t.j41(0,"mat-option",4)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=l.$implicit;t.Y8G("value",e.fieldName),t.R7$(),t.Y8G("ngClass",t.eq3(3,P,e.hasFormula)),t.R7$(),t.SpI(" ",e.fieldName," ")}}function Z(n,l){if(1&n&&(t.j41(0,"mat-option",4)(1,"span",27),t.EFF(2),t.k0s()()),2&n){const e=l.$implicit;t.Y8G("value",e.target),t.R7$(),t.Y8G("ngClass",t.eq3(3,P,e.hasFormula)),t.R7$(),t.SpI(" ",e.label," ")}}function Q(n,l){if(1&n){const e=t.RV6();t.j41(0,"mat-select",5),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.selectedChanged(r.SelectTargets.Target,i))}),t.Z7z(1,Z,3,5,"mat-option",4,t.fX1),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("ngModel",e.state().target)("disabled",null==e.state().entityGuid||null==e.state().fieldName),t.R7$(),t.Dyx(e.targetOptions())}}function q(n,l){if(1&n){const e=t.RV6();t.j41(0,"input",28),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG(2);return t.Njj(r.selectedChanged(r.SelectTargets.Target,i))}),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("ngModel",e.state().target)("disabled",null==e.state().entityGuid||null==e.state().fieldName)}}function tt(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",29),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.copyToClipboard(i.code))}),t.EFF(1),t.nI1(2,"snippetLabelSize"),t.k0s()}if(2&n){const e=l.$implicit;t.Y8G("title",e.code),t.R7$(),t.SpI(" ",t.bMT(2,2,e.label)," ")}}function et(n,l){1&n&&t.nrm(0,"div",17)}function nt(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",29),t.bIt("click",function(){const i=t.eBV(e).$implicit,r=t.XpG(2);return t.Njj(r.copyToClipboard(i.code))}),t.EFF(1),t.nI1(2,"snippetLabelSize"),t.k0s()}if(2&n){const e=l.$implicit;t.Y8G("title",e.code),t.R7$(),t.SpI(" ",t.bMT(2,2,e.label)," ")}}function ot(n,l){if(1&n&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"json"),t.k0s()),2&n){const e=t.XpG(4);t.R7$(),t.JRh(t.bMT(2,1,e.result().value))}}function it(n,l){1&n&&(t.j41(0,"span",30),t.EFF(1,"undefined"),t.k0s())}function at(n,l){1&n&&(t.j41(0,"span"),t.EFF(1,"promise(\u{1f91e}\u{1f3fd})"),t.k0s())}function st(n,l){if(1&n&&t.DNE(0,ot,3,3,"span")(1,it,2,0)(2,at,2,0),2&n){const e=t.XpG(3);t.vxM(0,void 0!==e.result().value?0:e.result().isOnlyPromise?2:1)}}function rt(n,l){1&n&&(t.j41(0,"span",31),t.EFF(1," Calculation failed. Please check logs for more info "),t.k0s())}function lt(n,l){if(1&n&&t.DNE(0,st,3,1)(1,rt,2,0),2&n){const e=t.XpG(2);t.vxM(0,e.result().isError?1:0)}}function ct(n,l){if(1&n){const e=t.RV6();t.j41(0,"button",32),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.save())}),t.j41(1,"mat-icon"),t.EFF(2,"save"),t.k0s()()}if(2&n){let e,o;const i=t.XpG(2);t.Y8G("tippyDisabled",!i.state().editMode||!(null!=(e=i.currentFormula())&&e.source))("disabled",!i.state().editMode||!(null!=(o=i.currentFormula())&&o.source)||i.saving())}}function dt(n,l){if(1&n){const e=t.RV6();t.j41(0,"div",1)(1,"mat-form-field",2)(2,"mat-label"),t.EFF(3,"Entity"),t.k0s(),t.j41(4,"mat-select",3),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.selectedChanged(r.SelectTargets.Entity,i))}),t.Z7z(5,K,3,5,"mat-option",4,t.BUC().trackEntityOptions,!0),t.k0s()(),t.j41(7,"mat-form-field",2)(8,"mat-label"),t.EFF(9,"Attribute"),t.k0s(),t.j41(10,"mat-select",5),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.selectedChanged(r.SelectTargets.Field,i))}),t.Z7z(11,H,3,5,"mat-option",4,t.BUC().trackFieldOptions,!0),t.k0s()(),t.j41(13,"mat-form-field",2)(14,"mat-label"),t.EFF(15,"Target"),t.k0s(),t.DNE(16,Q,3,2,"mat-select",6)(17,q,1,2,"input",7),t.k0s(),t.j41(18,"button",8),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleFreeText())}),t.j41(19,"mat-icon"),t.EFF(20,"text_fields"),t.k0s()(),t.nrm(21,"div",9),t.j41(22,"a",10)(23,"mat-icon"),t.EFF(24,"help"),t.k0s()()(),t.j41(25,"div",11)(26,"div",12)(27,"mat-label",13),t.EFF(28,"Function"),t.k0s(),t.j41(29,"app-monaco-editor",14),t.bIt("valueChanged",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.formulaChanged(i))})("focused",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onFocused())})("blurred",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.onBlurred())}),t.k0s()(),t.j41(30,"div",15),t.Z7z(31,tt,3,4,"div",16,t.BUC().trackSnippets,!0),t.DNE(33,et,1,0,"div",17),t.Z7z(34,nt,3,4,"div",16,t.BUC().trackSnippets,!0),t.k0s()(),t.j41(36,"div",18)(37,"div",19)(38,"span",13),t.EFF(39,"Result:\xa0"),t.k0s(),t.DNE(40,lt,2,1),t.k0s(),t.j41(41,"div",20)(42,"button",21),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleEdit())}),t.j41(43,"mat-icon"),t.EFF(44,"edit"),t.k0s()(),t.j41(45,"button",22)(46,"mat-icon"),t.EFF(47,"more_vert"),t.k0s()(),t.j41(48,"mat-menu",null,0)(50,"button",23),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.deleteFormula())}),t.j41(51,"mat-icon"),t.EFF(52,"delete"),t.k0s(),t.j41(53,"span"),t.EFF(54,"Delete"),t.k0s()(),t.j41(55,"button",24),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.reset())}),t.j41(56,"mat-icon"),t.EFF(57,"history"),t.k0s(),t.j41(58,"span"),t.EFF(59,"Reset"),t.k0s()()(),t.DNE(60,ct,3,2,"button",25),t.j41(61,"button",26),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.run())}),t.j41(62,"mat-icon"),t.EFF(63,"play_arrow"),t.k0s()()()()}if(2&n){let e,o,i,r;const _=t.sdS(49),a=t.XpG();t.R7$(4),t.Y8G("ngModel",a.state().entityGuid),t.R7$(),t.Dyx(a.entityOptions()),t.R7$(5),t.Y8G("ngModel",a.state().fieldName)("disabled",null==a.state().entityGuid),t.R7$(),t.Dyx(a.fieldsOptions()),t.R7$(5),t.vxM(16,a.freeTextTarget?-1:16),t.R7$(),t.vxM(17,a.freeTextTarget?17:-1),t.R7$(),t.Y8G("disabled",null==a.state().entityGuid||null==a.state().fieldName),t.R7$(8),t.Y8G("ngClass",t.l_i(18,W,!a.state().editMode||null==a.state().entityGuid||null==a.state().fieldName||null==a.state().target,a.focused)),t.R7$(3),t.Y8G("filename",a.filename)("value",null!==(e=null==(e=a.currentFormula())?null:e.source)&&void 0!==e?e:a.template())("jsTypings",a.v2JsTypings())("options",a.monacoOptions),t.R7$(),t.Y8G("ngClass",t.eq3(21,J,!a.state().editMode)),t.R7$(),t.Dyx(a.v1DataSnippets()),t.R7$(2),t.vxM(33,null!=(o=a.v1DataSnippets())&&o.length&&a.v1ContextSnippets().length?33:-1),t.R7$(),t.Dyx(a.v1ContextSnippets()),t.R7$(6),t.vxM(40,null==a.result()||a.isDeleted()?-1:40),t.R7$(5),t.Y8G("matMenuTriggerFor",_),t.R7$(5),t.Y8G("disabled",!(null!=(i=a.currentFormula())&&i.sourceId)),t.R7$(10),t.vxM(60,a.allowSaveFormula?60:-1),t.R7$(),t.Y8G("disabled",!a.state().editMode||!(null!=(r=a.currentFormula())&&r.source))}}let mt=(()=>{class n{#t;constructor(e,o,i,r,_){this.snackBar=e,this.formConfig=o,this.itemService=i,this.contentTypeService=r,this.translate=_,this.SelectTargets=x,this.loadError=!1,this.freeTextTarget=!1,this.allowSaveFormula=this.formConfig.config.enableFormulaSave,this.isDeleted=(0,t.vPA)(!1),this.saving=(0,t.vPA)(!1),this.monacoOptions={minimap:{enabled:!1},lineHeight:19,lineNumbers:"off",lineDecorationsWidth:0,folding:!1,scrollBeyondLastLine:!1,tabSize:2,fixedOverflowWidgets:!0},this.filename=`formula${this.formConfig.config.formId}.js`,this.focused=!1,this.entitiesService=(0,L.d)(d.R),this.#t=(0,t.WQX)(B.f),this.state=this.#t.designerState,this.result=this.#t.formulaResult,this.targetOptions=this.#t.currentTargetOptions,this.entityOptions=this.#t.entityOptions,this.fieldsOptions=this.#t.fieldsOptions,this.currentFormula=this.#t.currentFormula,this.v2JsTypings=this.#t.v2JsTypings,this.v1ContextSnippets=this.#t.v1ContextSnippets,this.v1DataSnippets=this.#t.v1DataSnippets,this.template=(0,t.EWP)(()=>Object.values(T.UZ).includes(this.state().target)?b.Ix:b.Gm),this.log=new Y.B("FormulaDesignerComponent",!1)}ngOnInit(){this.loadError=!1,Object.keys(this.#t.itemSettingsServices).length<1?this.loadError=!0:(this.#t.setDesignerOpen(!0),this.#t.initAfterItemSettingsAreReady())}ngOnDestroy(){this.#t.setDesignerOpen(!1)}trackEntityOptions(e,o){return o.entityGuid}trackFieldOptions(e,o){return o.fieldName}trackSnippets(e,o){return o.code}selectedChanged(e,o){const i={...this.#t.designerState(),editMode:!1};switch(e){case x.Entity:i.entityGuid=o;const r=this.#t.itemSettingsServices[i.entityGuid];i.fieldName=Object.keys(r.getFieldsProps())[0];break;case x.Field:i.fieldName=o;break;case x.Target:i.target=o}this.#t.designerState.set(i)}toggleFreeText(){this.freeTextTarget=!this.freeTextTarget}formulaChanged(e){const o=this.#t.designerState();this.#t.cache.updateFormulaFromEditor(o,e,!1)}onFocused(){this.focused=!0}onBlurred(){this.focused=!1}copyToClipboard(e){(0,N.l)(e),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}toggleEdit(){const e=this.#t.designerState(),o={...e,editMode:!e.editMode};this.#t.designerState.set(o),o.editMode&&null==this.#t.currentFormula()&&this.#t.cache.updateFormulaFromEditor(o,Object.values(T.UZ).includes(o.target)?b.Ix:b.Gm,!1)}reset(){const e={...this.#t.designerState(),editMode:!1};this.#t.designerState.set(e),this.#t.cache.resetFormula(e),this.#t.itemSettingsServices[e.entityGuid].retriggerFormulas()}run(){const e=this.#t.designerState(),o=this.#t.currentFormula();this.#t.cache.updateFormulaFromEditor(e,o.source,!0),this.#t.itemSettingsServices[e.entityGuid].retriggerFormulas(),this.isDeleted.set(!1)}save(){this.saving.set(!0);const e=this.#t.currentFormula();if(null==e.sourceId){const o=this.itemService.get(e.entityGuid),_=this.contentTypeService.getContentTypeOfItem(o).Attributes.find(a=>a.Name===e.fieldName).Metadata.find(a=>"@All"===a.Type.Id);return _?void this.entitiesService.create(p.YX.contentTypes.formulas,{Title:e.target,Target:e.target,Formula:e.source,Enabled:!0,ParentRelationship:{Add:null,EntityId:null,Field:"Formulas",Index:0,Parent:_.Guid}}).subscribe(a=>{this.#t.cache.updateSaved(e,a.Guid,a.Id),this.snackBar.open("Formula saved",null,{duration:2e3}),this.saving.set(!1)}):(this.snackBar.open("Field configuration is missing. Please create formula in Administration",void 0,{duration:3e3}),void this.saving.set(!1))}this.entitiesService.update(p.YX.contentTypes.formulas,e.sourceId,{Formula:e.source}).subscribe(()=>{this.#t.cache.updateSaved(e,e.sourceGuid,e.sourceId),this.snackBar.open("Formula saved",null,{duration:2e3}),this.saving.set(!1)})}deleteFormula(){const e=this.#t.designerState(),o=this.#t.currentFormula();confirm(this.translate.instant("Data.Delete.Question",{title:o.fieldName+" - "+o.target,id:o.sourceId}))&&this.entitiesService.delete(p.YX.contentTypes.formulas,o.sourceId,!0).subscribe({next:()=>{this.#t.cache.delete(o),this.snackBar.open(this.translate.instant("Message.Deleted"),null,{duration:2e3}),this.isDeleted.set(!0),e.editMode&&this.toggleEdit()},error:a=>{this.snackBar.open(this.translate.instant("Message.DeleteError"),null,{duration:2e3})}})}static#e=this.\u0275fac=function(o){return new(o||n)(t.rXU(w.UG),t.rXU(S.S),t.rXU(G.b),t.rXU(U.n),t.rXU(A.c$))};static#n=this.\u0275cmp=t.VBU({type:n,selectors:[["app-formula-designer"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[["menu","matMenu"],[1,"formula-context-box"],["color","accent",1,"eav-mat-form-field"],[3,"ngModelChange","ngModel"],[3,"value"],[3,"ngModelChange","ngModel","disabled"],[3,"ngModel","disabled"],["matInput","",3,"ngModel","disabled"],["mat-icon-button","","tippy","FreeText Target",1,"eav-formula-button",3,"click","disabled"],[1,"spacer"],["mat-icon-button","","tippy","Help","href","https://go.2sxc.org/formulas","target","_blank",1,"eav-formula-button"],[1,"formula-box"],[1,"formula-field",3,"ngClass"],[1,"label"],[1,"editor",3,"valueChanged","focused","blurred","filename","value","jsTypings","options"],[1,"formula-snippets","fancy-scrollbar-light",3,"ngClass"],[1,"snippet",3,"title"],[1,"separator"],[1,"formula-footer-box"],[1,"formula-result-box","hide-scrollbar"],[1,"formula-actions-box"],["mat-icon-button","","tippy","Edit",1,"eav-formula-action-button",3,"click"],["mat-icon-button","","tippy","Menu",1,"eav-formula-action-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",3,"click"],["mat-icon-button","","tippy","Save",1,"eav-formula-action-button",3,"tippyDisabled","disabled"],["mat-icon-button","","tippy","Run",1,"eav-formula-action-button",3,"click","disabled"],[3,"ngClass"],["matInput","",3,"ngModelChange","ngModel","disabled"],[1,"snippet",3,"click","title"],[1,"result-undefined"],[1,"result-error"],["mat-icon-button","","tippy","Save",1,"eav-formula-action-button",3,"click","tippyDisabled","disabled"]],template:function(o,i){1&o&&t.DNE(0,dt,64,23),2&o&&t.vxM(0,i.loadError?-1:0)},dependencies:[D.RG,D.rl,D.nJ,k.Ve,k.VO,j.wT,M.YN,M.me,M.BC,M.vS,j.Sy,m.YU,c.Cc,c.PW,E.fS,E.fg,h.Hl,h.pQ,h.iY,F.m_,F.An,V.K,v.Cn,v.kk,v.fb,v.Cp,m.TG,X,z.e],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%;box-sizing:border-box;overflow:hidden;border-top:1px solid lightgray;padding-top:8px}.formula-context-box[_ngcontent-%COMP%]{display:flex;align-items:center}.formula-context-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{font-size:14px}.formula-context-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]:not(:first-of-type){margin-left:8px}.has-formula[_ngcontent-%COMP%]{font-weight:700}.formula-box[_ngcontent-%COMP%]{flex:1 1 auto;display:flex;overflow:hidden}.formula-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]{flex:0 1 auto;font-size:14px;width:100%}.formula-box[_ngcontent-%COMP%]   .mat-mdc-form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-family:monospace}.formula-box[_ngcontent-%COMP%]   .formula-field[_ngcontent-%COMP%]{flex:0 1 auto;width:100%;overflow:hidden;margin-bottom:6px}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]{flex:0 0 auto;max-width:200px;max-height:194px;overflow:hidden auto;padding-left:2px}.formula-box[_ngcontent-%COMP%]   .formula-snippets.disabled[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]{pointer-events:none;color:#1d273d70}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]{font-size:14px;cursor:pointer;white-space:nowrap;padding-top:1px;padding-bottom:1px}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]:first-of-type{padding-top:0}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .snippet[_ngcontent-%COMP%]:last-of-type{padding-bottom:0}.formula-box[_ngcontent-%COMP%]   .formula-snippets[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{margin-top:.5em;margin-bottom:.5em;border-bottom:1px solid rgba(29,39,61,.44)}.formula-footer-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;overflow:hidden;height:min-content}.formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;height:-moz-fit-content;height:fit-content}.formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-weight:500}.formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]   .result-undefined[_ngcontent-%COMP%], .formula-footer-box[_ngcontent-%COMP%]   .formula-result-box[_ngcontent-%COMP%]   .result-error[_ngcontent-%COMP%]{color:red}.formula-footer-box[_ngcontent-%COMP%]   .formula-actions-box[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end;height:-moz-fit-content;height:fit-content}.formula-footer-box[_ngcontent-%COMP%]   .formula-actions-box[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]{margin-left:0;width:30px;height:30px;line-height:30px;padding:0;flex-shrink:0}.formula-footer-box[_ngcontent-%COMP%]   .formula-actions-box[_ngcontent-%COMP%]   .mdc-icon-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-top:5px;font-size:20px;width:20px;height:20px;line-height:20px!important}.formula-field[_ngcontent-%COMP%]{padding-top:28px;border-bottom:1px solid rgba(0,0,0,.2);padding-bottom:12px;position:relative}.formula-field[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{display:block;color:#0009;cursor:default;font-size:12px;transition:none;position:absolute;left:0;top:0;-webkit-user-select:none;user-select:none}.formula-field[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]     .monaco-editor .scroll-decoration{display:none}.formula-field[_ngcontent-%COMP%]:hover{border-bottom:2px solid rgba(0,0,0,.4);padding-bottom:11px}.formula-field.focused[_ngcontent-%COMP%]{border-bottom:2px solid #002753;padding-bottom:11px}.formula-field.focused[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#002753}.formula-field.error[_ngcontent-%COMP%]{border-bottom:2px solid #b00030;padding-bottom:11px}.formula-field.error[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#b00030}.formula-field.disabled[_ngcontent-%COMP%]{border-bottom:none;padding-bottom:13px;background-image:linear-gradient(to right,rgba(0,0,0,.2) 0%,rgba(0,0,0,.2) 33%,transparent 0%);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.formula-field.disabled[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]{pointer-events:none}.formula-field.disabled[_ngcontent-%COMP%]   .editor[_ngcontent-%COMP%]     *{color:#00000061}"]})}return n})(),gt=(()=>{class n{constructor(e,o){this.itemService=e,this.formConfig=o,this.items=this.itemService.getManySignal(this.formConfig.config.itemGuids)}static#t=this.\u0275fac=function(o){return new(o||n)(t.rXU(G.b),t.rXU(S.S))};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-data-dump"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[["readonly","",1,"fancy-scrollbar-light"]],template:function(o,i){1&o&&(t.j41(0,"textarea",0),t.EFF(1),t.nI1(2,"json"),t.k0s()),2&o&&(t.R7$(),t.JRh(t.bMT(2,1,i.items())))},dependencies:[m.TG],styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex}textarea[_ngcontent-%COMP%]{flex:1 1 auto;margin:0;padding:10px 0 10px 10px;border:0px;box-sizing:border-box;resize:none;outline:none;background-color:#1d273d0a}"]})}return n})();var I=s(3777);const ft=n=>({"debug-enabled":n});function _t(n,l){1&n&&t.nrm(0,"app-data-dump")}function ht(n,l){1&n&&t.nrm(0,"app-formula-designer")}function Ct(n,l){1&n&&t.nrm(0,"app-logs-dump")}function bt(n,l){if(1&n&&(t.j41(0,"div",7),t.DNE(1,_t,1,0,"app-data-dump")(2,ht,1,0,"app-formula-designer")(3,Ct,1,0,"app-logs-dump"),t.k0s()),2&n){const e=t.XpG();t.R7$(),t.vxM(1,e.activeDebug===e.DebugTypes.Data?1:-1),t.R7$(),t.vxM(2,e.activeDebug===e.DebugTypes.Formulas?2:-1),t.R7$(),t.vxM(3,e.activeDebug===e.DebugTypes.Logs?3:-1)}}let xt=(()=>{class n{constructor(){this.debugInfoOpened=new t.bkB,this.DebugTypes=O,this.sxcVer=window.sxcVersion.substring(0,window.sxcVersion.lastIndexOf("."))}toggleDialog(e){this.activeDebug=e!==this.activeDebug?e:null,this.debugInfoOpened.emit(null!=this.activeDebug)}static#t=this.\u0275fac=function(o){return new(o||n)};static#e=this.\u0275cmp=t.VBU({type:n,selectors:[["app-edit-dialog-footer"]],outputs:{debugInfoOpened:"debugInfoOpened"},standalone:!0,features:[t.aNF],decls:21,vars:5,consts:[["appearance","raised",1,"mat-elevation-z4",3,"ngClass"],[1,"debug-buttons-container"],["mat-button","","tippy","Show Data JSON",3,"click"],["mat-button","","tippy","Show Formula Designer",3,"click"],["mat-button","","tippy","Show Logs",3,"click"],[1,"spacer"],[1,"sxc-version"],[1,"debug-info-container"]],template:function(o,i){1&o&&(t.j41(0,"mat-card",0)(1,"div",1)(2,"button",2),t.bIt("click",function(){return i.toggleDialog(i.DebugTypes.Data)}),t.j41(3,"mat-icon"),t.EFF(4,"offline_bolt"),t.k0s(),t.j41(5,"span"),t.EFF(6,"Data"),t.k0s()(),t.j41(7,"button",3),t.bIt("click",function(){return i.toggleDialog(i.DebugTypes.Formulas)}),t.j41(8,"mat-icon"),t.EFF(9,"functions"),t.k0s(),t.j41(10,"span"),t.EFF(11,"Formulas"),t.k0s()(),t.j41(12,"button",4),t.bIt("click",function(){return i.toggleDialog(i.DebugTypes.Logs)}),t.j41(13,"mat-icon"),t.EFF(14,"speed"),t.k0s(),t.j41(15,"span"),t.EFF(16,"Logs"),t.k0s()(),t.nrm(17,"div",5),t.j41(18,"div",6),t.EFF(19),t.k0s()(),t.DNE(20,bt,4,3,"div",7),t.k0s()),2&o&&(t.Y8G("ngClass",t.eq3(3,ft,null!=i.activeDebug)),t.R7$(19),t.SpI("2sxc ",i.sxcVer,""),t.R7$(),t.vxM(20,null!=i.activeDebug?20:-1))},dependencies:[I.Hu,I.RN,m.YU,c.Cc,c.PW,h.Hl,h.$z,F.m_,F.An,gt,mt,u],styles:[".mat-mdc-card[_ngcontent-%COMP%]{padding:0;margin:0;border-top-left-radius:0;border-top-right-radius:0;height:52px;z-index:1;width:100%;display:flex;flex-direction:column;box-sizing:border-box}@media (max-width: 600px){.mat-mdc-card[_ngcontent-%COMP%]{border-radius:0}}.mat-mdc-card.debug-enabled[_ngcontent-%COMP%]{height:auto}.debug-buttons-container[_ngcontent-%COMP%]{padding:17px 16px 15px;height:52px;width:100%;display:flex;box-sizing:border-box;align-items:center}.debug-buttons-container[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]{margin-left:0}.debug-buttons-container[_ngcontent-%COMP%]   .mat-mdc-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:4px}.debug-buttons-container[_ngcontent-%COMP%]   .sxc-version[_ngcontent-%COMP%]{cursor:default}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important}.debug-info-container[_ngcontent-%COMP%]{margin:0 16px 16px!important;width:calc(100% - 32px);height:300px;box-sizing:border-box;position:relative;overflow:auto}"]})}return n})()},6817:(R,C,s)=>{s.d(C,{R:()=>y});var t=s(8873),O=s(9234),c=s(8559),m=s(6443),g=s(4821);let y=(()=>{class f{constructor(u,d,p){this.http=u,this.context=d,this.dnnContext=p}create(u,d){return this.http.post(`app/auto/data/${u}`,d,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(u,d,p){return this.http.post(`app/auto/data/${u}/${d}`,p,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(u,d,p){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(O.gb+"delete"),{params:{contentType:u,id:d.toString(),appId:this.context.appId.toString(),force:p.toString()}})}static#t=this.\u0275fac=function(d){return new(d||f)(c.KVO(m.Qq),c.KVO(t.o),c.KVO(g.ob))};static#e=this.\u0275prov=c.jDH({token:f,factory:f.\u0275fac})}return f})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_edit_dialog_footer_edit-dialog-footer_component_ts.da891261a1818876.js.map