"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_content-items_component_ts","projects_eav-ui_src_app_shared_directives_click-stop-propagation_directive_ts"],{3935:(D,h,l)=>{l.r(h),l.d(h,{ContentItemsComponent:()=>Ce});var g=l(1616),u=l(4844),f=l(5876),y=l(604),v=l(6560),C=l(7496),_=l(692),Y=l(1292),T=l(9427),P=l(6698),J=l(7028),W=l(2816),Q=l(5960),t=l(4896),I=l(244),c=l(1904),V=l(2536);const X=["valueInput"];let j=(()=>{class a{constructor(){this.filter="",this.idFilterString="",this.idFilter=[]}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.filter||this.idFilter.length>0}doesFilterPass(e){if(""!==this.filter){const o=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:i=>e.node.data[i],node:e.node});if(null==o||!o.some(i=>!!i&&i.includes(this.filter)))return!1}if(this.idFilter.length>0){const n=e.data[this.filterParams.colDef.headerName];if(null==n||!this.idFilter.some(o=>n.some(i=>i.Id===o)))return!1}return!0}getModel(){return this.isFilterActive()?{filterType:"entity",filter:this.filter,idFilter:this.idFilter}:void 0}setModel(e){this.filter=e?.filter??"",this.idFilter=e?.idFilter??[],this.idFilterString=e?.idFilter?.join(",")??""}afterGuiAttached(e){this.valueInputRef.nativeElement.focus()}updateIdFilter(){this.idFilter=this.idFilterString.split(",").map(e=>parseInt(e,10)).filter(e=>!isNaN(e))}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-entity-filter"]],viewQuery:function(n,o){if(1&n&&t.CC$(X,5),2&n){let i;t.wto(i=t.Gqi())&&(o.valueInputRef=i.first)}},decls:9,vars:2,consts:[["color","accent",1,"eav-form-field"],["matInput","","type","text",3,"ngModel","ngModelChange"],["valueInput",""]],template:function(n,o){1&n&&(t.I0R(0,"mat-form-field",0)(1,"mat-label"),t.OEk(2,"Value"),t.C$Y(),t.I0R(3,"input",1,2),t.qCj("ngModelChange",function(r){return o.filter=r})("ngModelChange",function(){return o.filterChanged()}),t.C$Y()(),t.I0R(5,"mat-form-field",0)(6,"mat-label"),t.OEk(7,"IDs (comma separated)"),t.C$Y(),t.I0R(8,"input",1),t.qCj("ngModelChange",function(r){return o.idFilterString=r})("ngModelChange",function(){return o.updateIdFilter(),o.filterChanged()}),t.C$Y()()),2&n&&(t.yG2(3),t.E7m("ngModel",o.filter),t.yG2(5),t.E7m("ngModel",o.idFilterString))},dependencies:[I.Up,I.w5,c.ot,c.ue,c._G,V.yi],styles:["[_nghost-%COMP%]{display:block;padding:16px 12px 2px}.mat-mdc-form-field[_ngcontent-%COMP%]{display:block;width:175px}"]})}return a})();var z=l(5760),Z=l(1743),p=l(9224),q=l(664),tt=l(624),w=l(5396),b=l(8200),x=l(2328),K=l(6176),S=l(7848);function et(a,s){if(1&a){const e=t.KQA();t.I0R(0,"button",7),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.deleteItem())}),t.I0R(1,"mat-icon"),t.OEk(2,"delete"),t.C$Y(),t.I0R(3,"span"),t.OEk(4,"Delete"),t.C$Y()()}if(2&a){const e=t.GaO();t.E7m("disabled",e.item._EditInfo.DisableDelete)}}let nt=(()=>{class a{agInit(e){this.params=e,this.item=e.data}refresh(e){return!0}clone(){this.params.onClone(this.item)}export(){this.params.onExport(this.item)}deleteItem(){this.params.onDelete(this.item)}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-content-items-actions"]],decls:13,vars:1,consts:[[1,"actions-component"],["matRipple","","tippy","Copy",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","Export",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"disabled","click"]],template:function(n,o){if(1&n&&(t.I0R(0,"div",0)(1,"div",1),t.qCj("click",function(){return o.clone()}),t.I0R(2,"mat-icon"),t.OEk(3,"file_copy"),t.C$Y()(),t.I0R(4,"div",2),t.qCj("click",function(){return o.export()}),t.I0R(5,"mat-icon"),t.OEk(6,"cloud_download"),t.C$Y()(),t.I0R(7,"div",3)(8,"mat-icon"),t.OEk(9,"more_horiz"),t.C$Y()()(),t.I0R(10,"mat-menu",4,5),t.yuY(12,et,5,1,"ng-template",6),t.C$Y()),2&n){const i=t.Gew(11);t.yG2(7),t.E7m("matMenuTriggerFor",i)}},dependencies:[b.Y,x.qL,K.UZ,S.aM,S.OQ,S.M5,S.yG]})}return a})();function at(a,s){if(1&a&&(t.I0R(0,"span",2),t.OEk(1),t.C$Y()),2&a){const e=t.GaO();t.yG2(1),t.cNF(e.entities)}}let ot=(()=>{class a{agInit(e){Array.isArray(e.value)&&(this.encodedValue=this.htmlEncode(e.value.join(", ")),e.colDef.allowMultiValue&&(this.entities=e.value.length))}refresh(e){return!0}htmlEncode(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-content-items-entity"]],decls:3,vars:3,consts:[[3,"tippy"],["class","more-entities"],[1,"more-entities"]],template:function(n,o){1&n&&(t.I0R(0,"div",0),t.yuY(1,at,2,1,"span",1),t.OEk(2),t.C$Y()),2&n&&(t.E7m("tippy",o.encodedValue),t.yG2(1),t.C0Y(1,o.entities?1:-1),t.yG2(1),t.oRS(" ",o.encodedValue,"\n"))},dependencies:[b.Y],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]})}return a})();var k=l(5056),it=l(32);const st=a=>({"hide-until-row-hover":a});function lt(a,s){if(1&a){const e=t.KQA();t.I0R(0,"div",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.openMetadata())}),t.I0R(1,"mat-icon",5),t.OEk(2),t.C$Y()()}if(2&a){const e=t.GaO();t.E7m("ngClass",t.S45(5,st,!e.metadataCount&&!e.value.metadata))("tippy",e.metadataTooltip),t.yG2(1),t.E7m("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.yG2(1),t.oRS("",e.value.metadata?"loyalty":"local_offer"," ")}}function rt(a,s){if(1&a&&(t.I0R(0,"div",6)(1,"mat-icon",7),t.OEk(2),t.C$Y()()),2&a){const e=t.GaO();t.yG2(1),t.E7m("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.yG2(1),t.oRS("",e.value.metadata?"loyalty":"local_offer"," ")}}let dt=(()=>{class a{agInit(e){this.value=e.value,this.params=e,this.item=e.data,this.disableMetadata=this.item._EditInfo.DisableMetadata,this.metadataCount=this.item.Metadata?.length??0;const n=this.item.For;this.metadataTooltip=n?`This item is metadata for:\nTarget: ${n.Target}\nTargetType: ${n.TargetType}`+(n.KeyNumber?`\nNumber: ${n.KeyNumber}`:"")+(n.KeyString?`\nString: ${n.KeyString}`:"")+(n.KeyGuid?`\nGuid: ${n.KeyGuid}`:"")+(n.Title?`\nTitle: ${n.Title}`:""):"This item is not metadata.",this.metadataTooltip+=`\n\nThis item has ${this.metadataCount>0?this.metadataCount:"no"} other metadata ${1===this.metadataCount?"item":"items"} attached to it.`}refresh(e){return!0}openMetadata(){this.params.onOpenMetadata(this.item)}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-content-items-status"]],decls:6,vars:4,consts:[[1,"actions-component"],[1,"eav-grid-action-button","icon",3,"tippy"],["class","eav-grid-action-button highlight","matRipple","",3,"ngClass","tippy"],["class","eav-grid-action-button disabled"],["matRipple","",1,"eav-grid-action-button","highlight",3,"ngClass","tippy","click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],[1,"eav-grid-action-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"]],template:function(n,o){1&n&&(t.I0R(0,"div",0)(1,"div",1)(2,"mat-icon"),t.OEk(3),t.C$Y()(),t.yuY(4,lt,3,7,"div",2)(5,rt,3,3,"div",3),t.C$Y()),2&n&&(t.yG2(1),t.E7m("tippy",o.value.published?"Published":"Not published"),t.yG2(2),t.cNF(o.value.published?"visibility":"visibility_off"),t.yG2(1),t.C0Y(4,o.disableMetadata?-1:4),t.yG2(1),t.C0Y(5,o.disableMetadata&&(o.metadataCount||o.value.metadata)?5:-1))},dependencies:[k.QF,b.Y,x.qL,K.UZ,it.S],styles:[".hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]})}return a})();var M=l(8928),N=l(1792),G=l(1484),pt=l(728),mt=l(8112),ut=l(6884),B=l(420),Ct=l(6028),U=l(6036),ft=l(2260);function ht(a){return s=>{if(!s.value)return null;const e=a.controls.keyType.value,n=s.value.toString();switch(e){case p._K.keyTypes.number:return/^[0-9]+$/.test(n)?null:{patternWholeNumber:!0};case p._K.keyTypes.guid:const i=["{","}"].some(m=>n.includes(m)),r=n.substring(i?1:0,i?n.length-1:n.length);return(0,ft.y)().test(r)?null:{patternGuid:!0};default:return null}}}var E=l(600),gt=l(9084),yt=l(504),O=l(4672),_t=l(7872),Tt=l(3424);function vt(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=s.$implicit;t.E7m("value",e.targetType),t.yG2(1),t.oRS(" ",e.label," ")}}function It(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=t.GaO(2);t.E7m("value",e.formValues.targetType),t.yG2(1),t.oRS(" ",e.formValues.targetType," ")}}function bt(a,s){if(1&a&&(t.I0R(0,"mat-select",8),t.c53(1,vt,2,2,"mat-option",20,t.oxv),t.yuY(3,It,2,2,"mat-option",20),t.C$Y()),2&a){const e=t.GaO(),n=t.GaO();t.yG2(1),t.oho(n.targetTypeOptions),t.yG2(2),t.C0Y(3,e.unknownTargetType?3:-1)}}function kt(a,s){1&a&&t.wR5(0,"input",9)}function Mt(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),t.C$Y()),2&a&&t.E7m("isError",!1)}function Gt(a,s){if(1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1),t.C$Y()),2&a){const e=t.GaO();t.E7m("isError",!1),t.yG2(1),t.cNF(e.targetTypeHint)}}function Et(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," This field is required "),t.C$Y()),2&a&&t.E7m("isError",!0)}function Ot(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," Must be a whole number "),t.C$Y()),2&a&&t.E7m("isError",!0)}function $t(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=s.$implicit;t.E7m("value",e),t.yG2(1),t.oRS(" ",e," ")}}function Rt(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," This field is required "),t.C$Y()),2&a&&t.E7m("isError",!0)}function Dt(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=s.$implicit;t.E7m("value",e.StaticName),t.yG2(1),t.oRS(" ",e.Label," ")}}function Yt(a,s){if(1&a&&(t.I0R(0,"mat-form-field",7)(1,"mat-label"),t.OEk(2,"Content Type"),t.C$Y(),t.I0R(3,"mat-select",21),t.c53(4,Dt,2,2,"mat-option",20,t.oxv),t.C$Y()()),2&a){const e=t.GaO();t.yG2(3),t.E7m("placeholder",e.contentTypes.length?"":"No items found"),t.yG2(1),t.oho(e.contentTypes)}}function xt(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=s.$implicit;t.E7m("value",e.value),t.yG2(1),t.oRS(" ",e.name," ")}}function St(a,s){if(1&a&&(t.I0R(0,"mat-form-field",7)(1,"mat-label"),t.OEk(2,"Scope"),t.C$Y(),t.I0R(3,"mat-select",22),t.c53(4,xt,2,2,"mat-option",20,t.oxv),t.I0R(6,"mat-option",20),t.OEk(7,"Other..."),t.C$Y()()()),2&a){const e=t.GaO(),n=t.GaO();t.yG2(3),t.E7m("placeholder",e.scopeOptions.length?"":"No items found"),t.yG2(1),t.oho(e.scopeOptions),t.yG2(2),t.E7m("value",n.dropdownInsertValue)}}function Ft(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=s.$implicit;t.E7m("value",e.Guid),t.yG2(1),t.CAO(" ",e.Title," (",e.Id,") ")}}function Pt(a,s){if(1&a&&(t.I0R(0,"mat-select",23),t.c53(1,Ft,2,3,"mat-option",20,t.oxv),t.C$Y()),2&a){const e=t.GaO(3);t.E7m("placeholder",e.contentItems.length?"":"No items found"),t.yG2(1),t.oho(e.contentItems)}}function wt(a,s){1&a&&t.wR5(0,"input",24)}function Kt(a,s){if(1&a&&t.yuY(0,Pt,3,1,"mat-select",23)(1,wt,1,0,"input",24),2&a){const e=t.GaO(2);t.C0Y(0,e.guidedKey?0:-1),t.yG2(1),t.C0Y(1,e.guidedKey?-1:1)}}function Nt(a,s){if(1&a&&(t.I0R(0,"mat-option",20),t.OEk(1),t.C$Y()),2&a){const e=s.$implicit;t.E7m("value",e.StaticName),t.yG2(1),t.oRS(" ",e.Label," ")}}function At(a,s){if(1&a&&(t.I0R(0,"mat-select",23),t.c53(1,Nt,2,2,"mat-option",20,t.oxv),t.C$Y()),2&a){const e=t.GaO(3);t.E7m("placeholder",e.contentTypes.length?"":"No items found"),t.yG2(1),t.oho(e.contentTypes)}}function Vt(a,s){1&a&&t.wR5(0,"input",24)}function jt(a,s){if(1&a&&t.yuY(0,At,3,1,"mat-select",23)(1,Vt,1,0,"input",24),2&a){const e=t.GaO(2);t.C0Y(0,e.guidedKey?0:-1),t.yG2(1),t.C0Y(1,e.guidedKey?-1:1)}}function Bt(a,s){1&a&&t.C_f(0)}function Ut(a,s){if(1&a&&t.yuY(0,Bt,1,0,"ng-container",25),2&a){t.GaO(2);const e=t.Gew(39);t.E7m("ngTemplateOutlet",e)}}function Lt(a,s){if(1&a&&t.yuY(0,Kt,2,2)(1,jt,2,2)(2,Ut,1,1),2&a){const e=t.GaO(),n=t.GaO();let o;t.C0Y(0,(o=e.formValues.targetType)===n.eavConstants.metadata.entity.targetType?0:o===n.eavConstants.metadata.contentType.targetType?1:2)}}function Ht(a,s){1&a&&t.wR5(0,"input",24)}function Jt(a,s){1&a&&t.wR5(0,"input",26)}function Wt(a,s){if(1&a&&t.yuY(0,Ht,1,0,"input",24)(1,Jt,1,0,"input",26),2&a){const e=t.GaO(),n=t.GaO();t.C0Y(0,e.formValues.keyType!==n.eavConstants.keyTypes.number?0:-1),t.yG2(1),t.C0Y(1,e.formValues.keyType===n.eavConstants.keyTypes.number?1:-1)}}function Qt(a,s){1&a&&t.wR5(0,"input",24)}function Xt(a,s){1&a&&t.wR5(0,"input",26)}function zt(a,s){if(1&a&&t.yuY(0,Qt,1,0,"input",24)(1,Xt,1,0,"input",26),2&a){const e=t.GaO(),n=t.GaO();t.C0Y(0,e.formValues.keyType!==n.eavConstants.keyTypes.number?0:-1),t.yG2(1),t.C0Y(1,e.formValues.keyType===n.eavConstants.keyTypes.number?1:-1)}}const L=a=>({active:a});function Zt(a,s){if(1&a){const e=t.KQA();t.I0R(0,"div",27)(1,"button",28),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.toggleGuidedKey(!0))}),t.I0R(2,"mat-icon",29),t.OEk(3,"search"),t.C$Y()(),t.I0R(4,"button",30),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.toggleGuidedKey(!1))}),t.I0R(5,"mat-icon",29),t.OEk(6,"text_fields"),t.C$Y()()()}if(2&a){const e=t.GaO();t.yG2(1),t.E7m("ngClass",t.S45(2,L,e.guidedKey)),t.yG2(3),t.E7m("ngClass",t.S45(4,L,!e.guidedKey))}}function qt(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," This field is required "),t.C$Y()),2&a&&t.E7m("isError",!0)}function te(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," Must be a whole number "),t.C$Y()),2&a&&t.E7m("isError",!0)}function ee(a,s){1&a&&(t.I0R(0,"app-field-hint",10),t.OEk(1," Must be a valid GUID "),t.C$Y()),2&a&&t.E7m("isError",!0)}function ne(a,s){if(1&a){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"div",3),t.OEk(3,"Create Metadata"),t.C$Y()(),t.I0R(4,"div",4)(5,"p"),t.OEk(6," This is a special operation to add an item which is metadata for another item, see "),t.I0R(7,"a",5),t.OEk(8,"docs"),t.C$Y(),t.OEk(9,". "),t.C$Y(),t.I0R(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),t.OEk(13,"Target"),t.C$Y(),t.yuY(14,bt,4,1,"mat-select",8)(15,kt,1,0,"input",9),t.C$Y(),t.yuY(16,Mt,2,1,"app-field-hint",10)(17,Gt,2,2,"app-field-hint",10)(18,Et,2,1,"app-field-hint",10)(19,Ot,2,1,"app-field-hint",10),t.I0R(20,"mat-form-field",7)(21,"mat-label"),t.OEk(22,"Key type"),t.C$Y(),t.I0R(23,"mat-select",11),t.c53(24,$t,2,2,"mat-option",20,t.oxv),t.C$Y()(),t.yuY(26,Rt,2,1,"app-field-hint",10)(27,Yt,6,1,"mat-form-field",12)(28,St,8,2,"mat-form-field",12),t.I0R(29,"app-field-hint"),t.OEk(30," The scope should almost never be changed - "),t.I0R(31,"a",13),t.OEk(32,"see help"),t.C$Y()(),t.I0R(33,"mat-form-field",7)(34,"mat-label"),t.OEk(35,"Key"),t.C$Y(),t.yuY(36,Lt,3,1)(37,Wt,2,2)(38,zt,2,2,"ng-template",null,14,t.gJz)(40,Zt,7,6,"div",15),t.C$Y(),t.yuY(41,qt,2,1,"app-field-hint",10)(42,te,2,1,"app-field-hint",10)(43,ee,2,1,"app-field-hint",10),t.C$Y()(),t.I0R(44,"mat-dialog-actions",16)(45,"mat-slide-toggle",17),t.qCj("change",function(o){t.usT(e);const i=t.GaO();return t.CGJ(i.toggleGuidedMode(o))}),t.OEk(46),t.C$Y(),t.I0R(47,"div")(48,"button",18),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.closeDialog())}),t.OEk(49,"Cancel"),t.C$Y(),t.I0R(50,"button",19),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.confirm())}),t.OEk(51," Confirm "),t.C$Y()()()()}if(2&a){const e=t.GaO();t.yG2(10),t.E7m("formGroup",e.form),t.yG2(4),t.C0Y(14,s.guidedMode?14:-1),t.yG2(1),t.C0Y(15,s.guidedMode?-1:15),t.yG2(1),t.C0Y(16,e.form.controls.targetType.touched&&!e.form.controls.targetType.invalid&&s.unknownTargetType?16:-1),t.yG2(1),t.C0Y(17,s.targetTypeHint?17:-1),t.yG2(1),t.C0Y(18,e.form.controls.targetType.touched&&null!=e.form.controls.targetType.errors&&e.form.controls.targetType.errors.required?18:-1),t.yG2(1),t.C0Y(19,e.form.controls.targetType.touched&&null!=e.form.controls.targetType.errors&&e.form.controls.targetType.errors.pattern?19:-1),t.yG2(5),t.oho(s.keyTypeOptions),t.yG2(2),t.C0Y(26,e.form.controls.keyType.touched&&null!=e.form.controls.keyType.errors&&e.form.controls.keyType.errors.required?26:-1),t.yG2(1),t.C0Y(27,s.guidedMode&&s.formValues.targetType===e.eavConstants.metadata.entity.targetType?27:-1),t.yG2(1),t.C0Y(28,!s.guidedMode||s.formValues.targetType!==e.eavConstants.metadata.entity.targetType&&s.formValues.targetType!==e.eavConstants.metadata.contentType.targetType?-1:28),t.yG2(8),t.C0Y(36,s.guidedMode?36:37),t.yG2(4),t.C0Y(40,s.guidedMode&&s.guidedKeyExists?40:-1),t.yG2(1),t.C0Y(41,e.form.controls.key.touched&&null!=e.form.controls.key.errors&&e.form.controls.key.errors.required?41:-1),t.yG2(1),t.C0Y(42,e.form.controls.key.touched&&null!=e.form.controls.key.errors&&e.form.controls.key.errors.patternWholeNumber?42:-1),t.yG2(1),t.C0Y(43,e.form.controls.key.touched&&null!=e.form.controls.key.errors&&e.form.controls.key.errors.patternGuid?43:-1),t.yG2(2),t.E7m("tippy",s.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",s.guidedMode),t.yG2(1),t.oRS(" ",s.guidedMode?"Guided":"Manual"," "),t.yG2(4),t.E7m("disabled",!e.form.valid)}}let ae=(()=>{class a extends ut.C{constructor(e,n,o,i){super(),this.dialogRef=e,this.context=n,this.contentItemsService=o,this.contentTypesService=i,this.hostClass="dialog-component",this.eavConstants=p._K,this.dropdownInsertValue=B.M}ngOnInit(){this.targetTypeOptions=Object.values(p._K.metadata).map(n=>({...n})),this.keyTypeOptions=Object.values(p._K.keyTypes),this.keyTypeOptions$=new u.g([]),this.scopeOptions$=new u.g([]),this.guidedMode$=new u.g(!0),this.contentItems$=new u.g([]),this.contentTypes$=new u.g([]),this.guidedKey$=new u.g(!0),this.fetchScopes(),this.form=new c.k1({}),this.form.addControl("targetType",new c.yM(p._K.metadata.entity.targetType,[c.AQ.required,c.AQ.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new c.yM(p._K.metadata.entity.keyType,[c.AQ.required])),this.form.addControl("contentTypeForContentItems",new c.yM(null)),this.form.addControl("scopeForContentTypes",new c.yM(p._K.scopes.default.value)),this.form.addControl("key",new c.yM(null,[c.AQ.required,ht(this.form)])),this.subscription.add(this.form.controls.scopeForContentTypes.valueChanges.pipe((0,N.W)(this.form.controls.scopeForContentTypes.value),(0,G.a)()).subscribe(n=>{null!=this.form.controls.contentTypeForContentItems.value&&this.form.controls.contentTypeForContentItems.patchValue(null),n===B.M?(n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||p._K.scopes.default.value,this.scopeOptions$.value.some(o=>o.value===n)||this.scopeOptions$.next([{name:n,value:n},...this.scopeOptions$.value]),this.form.controls.scopeForContentTypes.patchValue(n)):this.fetchContentTypes(n)})),this.subscription.add((0,pt.U)(this.form.controls.targetType.valueChanges.pipe((0,G.a)()),this.form.controls.keyType.valueChanges.pipe((0,G.a)())).subscribe(()=>{this.guidedKey$.next(!0),null!=this.form.getRawValue().key&&this.form.patchValue({key:null})})),this.subscription.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,N.W)(this.form.controls.contentTypeForContentItems.value),(0,G.a)()).subscribe(n=>{const o=this.form.getRawValue();o.targetType===p._K.metadata.entity.targetType&&null!=o.key&&this.form.patchValue({key:null}),this.contentItemsService.getAll(n).subscribe(i=>{this.contentItems$.next(i)})}));const e=this.form.valueChanges.pipe((0,N.W)(this.form.getRawValue()),(0,y.k)(()=>this.form.getRawValue()),(0,G.a)(M.Co.objectsEqual));this.subscription.add((0,f.E)([e,this.guidedMode$]).subscribe(([n,o])=>{const i=this.targetTypeOptions.find(F=>F.targetType===n.targetType),r=o&&i?[i.keyType]:[...this.keyTypeOptions];M.Co.arraysEqual(r,this.keyTypeOptions$.value)||this.keyTypeOptions$.next(r);const d={};this.keyTypeOptions$.value.includes(n.keyType)||(d.keyType=this.keyTypeOptions$.value[0]);const m=o&&n.targetType===p._K.metadata.app.targetType;m&&n.key!==this.context.appId&&(d.key=this.context.appId),Object.keys(d).length&&this.form.patchValue(d),M.Co.disableControl(this.form.controls.keyType,o&&this.keyTypeOptions$.value.length<=1),M.Co.disableControl(this.form.controls.key,m)})),this.viewModel$=(0,f.E)([(0,f.E)([this.guidedMode$,this.keyTypeOptions$,this.scopeOptions$,this.contentItems$,this.contentTypes$]),(0,f.E)([e,this.guidedKey$])]).pipe((0,y.k)(([[n,o,i,r,d],[m,$]])=>({guidedMode:n,unknownTargetType:!this.targetTypeOptions.some(R=>R.targetType===m.targetType),targetTypeHint:n&&this.targetTypeOptions.find(R=>R.targetType===m.targetType)?.hint,keyTypeOptions:o,scopeOptions:i,guidedKey:$,guidedKeyExists:[p._K.metadata.entity.targetType,p._K.metadata.contentType.targetType].includes(m.targetType),formValues:m,contentItems:r,contentTypes:d})))}ngOnDestroy(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),super.ngOnDestroy()}closeDialog(e){this.dialogRef.close(e)}toggleGuidedKey(e){this.guidedKey$.next(e)}toggleGuidedMode(e){this.guidedMode$.next(e.checked)}confirm(){const e=this.form.getRawValue(),n={target:this.targetTypeOptions.find(o=>o.targetType===e.targetType)?.target,targetType:e.targetType,keyType:e.keyType,key:e.keyType===p._K.keyTypes.guid?e.key.replace(/{|}/g,""):e.key.toString()};this.closeDialog(n)}fetchContentTypes(e){this.contentTypesService.retrieveContentTypes(e).subscribe(n=>{this.contentTypes$.next(n)})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{this.scopeOptions$.next(e)})}static#t=this.\u0275fac=function(n){return new(n||a)(t.GI1(E.yI),t.GI1(Ct.e),t.GI1(U.q),t.GI1(mt.Xi))};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(n,o){2&n&&t.SoX("className",o.hostClass)},features:[t.eg9],decls:2,vars:3,consts:[["class","eav-dialog"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://go.2sxc.org/metadata","target","_blank"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["formControlName","targetType","required",""],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","keyType","required",""],["color","accent","class","eav-form-field"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["defaultKeyInput",""],["matTextSuffix","","class","eav-selection-suffix"],[1,"eav-dialog-actions"],["color","accent",3,"tippy","checked","change"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],[3,"value"],["formControlName","contentTypeForContentItems",3,"placeholder"],["formControlName","scopeForContentTypes",3,"placeholder"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required",""],["matTextSuffix","",1,"eav-selection-suffix"],["mat-icon-button","","type","button","tippy","Pick existing value",1,"eav-selection-suffix-button",3,"ngClass","click"],[1,"eav-icon"],["mat-icon-button","","type","button","tippy","Manual entry",1,"eav-selection-suffix-button",3,"ngClass","click"]],template:function(n,o){if(1&n&&(t.yuY(0,ne,52,19,"div",0),t.wVc(1,"async")),2&n){let i;t.C0Y(0,(i=t.kDX(1,1,o.viewModel$))?0:-1,i)}},dependencies:[k.QF,k.XV,gt.o,yt.c,b.Y,E.Yp,O.Gw,O.um,x.qL,c.sz,c.ot,c.O4,c.ue,c.u,c.eJ,c.Gu,V.yi,I.Up,I.w5,I.Gm,_t.kX,K.I5,c.uW,c.Wo,Tt.cP,k.a]})}return a})();var H=l(1232);let oe=(()=>{class a{constructor(){this.published="",this.metadata="",this.hasMetadata=""}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata}doesFilterPass(e){let n=!1,o=!1,i=!1;const d=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:m=>e.node.data[m],node:e.node});return n=""===this.published||null!=d.published&&d.published.toString()===this.published,o=""===this.metadata||null!=d.metadata&&d.metadata.toString()===this.metadata,i=""===this.hasMetadata||null!=d.hasMetadata&&d.hasMetadata.toString()===this.hasMetadata,n&&o&&i}getModel(){return this.isFilterActive()?{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}:void 0}setModel(e){this.published=e?e.published:"",this.metadata=e?e.metadata:"",this.hasMetadata=e?e.hasMetadata:""}afterGuiAttached(e){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(n){return new(n||a)};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-pub-meta-filter"]],decls:27,vars:3,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(n,o){1&n&&(t.I0R(0,"div",0),t.OEk(1,"Published"),t.C$Y(),t.I0R(2,"mat-radio-group",1),t.qCj("ngModelChange",function(r){return o.published=r})("ngModelChange",function(){return o.filterChanged()}),t.I0R(3,"mat-radio-button",2),t.OEk(4,"All"),t.C$Y(),t.I0R(5,"mat-radio-button",3),t.OEk(6,"Published"),t.C$Y(),t.I0R(7,"mat-radio-button",4),t.OEk(8,"Not published"),t.C$Y()(),t.I0R(9,"div",0),t.OEk(10,"Is Metadata"),t.C$Y(),t.I0R(11,"mat-radio-group",1),t.qCj("ngModelChange",function(r){return o.metadata=r})("ngModelChange",function(){return o.filterChanged()}),t.I0R(12,"mat-radio-button",2),t.OEk(13,"All"),t.C$Y(),t.I0R(14,"mat-radio-button",3),t.OEk(15,"Is metadata"),t.C$Y(),t.I0R(16,"mat-radio-button",4),t.OEk(17,"Is not metadata"),t.C$Y()(),t.I0R(18,"div",0),t.OEk(19,"Has Metadata"),t.C$Y(),t.I0R(20,"mat-radio-group",1),t.qCj("ngModelChange",function(r){return o.hasMetadata=r})("ngModelChange",function(){return o.filterChanged()}),t.I0R(21,"mat-radio-button",2),t.OEk(22,"All"),t.C$Y(),t.I0R(23,"mat-radio-button",3),t.OEk(24,"Has metadata"),t.C$Y(),t.I0R(25,"mat-radio-button",4),t.OEk(26,"Has no metadata"),t.C$Y()()),2&n&&(t.yG2(2),t.E7m("ngModel",o.published),t.yG2(9),t.E7m("ngModel",o.metadata),t.yG2(9),t.E7m("ngModel",o.hasMetadata))},dependencies:[c.ue,c._G,H.cv,H.cT],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return a})();var ie=l(4328),A=l(5204),se=l(4648),le=l(3884),re=l(2564),de=l(4072),ce=l(48);function pe(a,s){1&a&&(t.wR5(0,"div",6),t.wVc(1,"safeHtml")),2&a&&t.E7m("innerHTML",t.kDX(1,1,s),t.E3n)}function me(a,s){if(1&a){const e=t.KQA();t.I0R(0,"button",18),t.qCj("click",function(){t.usT(e);const o=t.GaO(2);return t.CGJ(o.debugFilter())}),t.I0R(1,"mat-icon",12),t.OEk(2,"filter_list"),t.C$Y(),t.I0R(3,"span"),t.OEk(4,"Filter"),t.C$Y()()}}function ue(a,s){if(1&a){const e=t.KQA();t.I0R(0,"div",1)(1,"div",2)(2,"div",3),t.OEk(3),t.C$Y(),t.I0R(4,"button",4),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.closeDialog())}),t.I0R(5,"mat-icon"),t.OEk(6,"close"),t.C$Y()()(),t.I0R(7,"div",5),t.wR5(8,"router-outlet"),t.yuY(9,pe,2,3,"div",6),t.I0R(10,"div",7)(11,"ag-grid-angular",8),t.qCj("gridReady",function(o){t.usT(e);const i=t.GaO();return t.CGJ(i.onGridReady(o))})("filesDropped",function(o){t.usT(e);const i=t.GaO();return t.CGJ(i.filesDropped(o))}),t.C$Y()()(),t.I0R(12,"mat-dialog-actions",9)(13,"div",10)(14,"button",11),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.exportContent())}),t.I0R(15,"mat-icon",12),t.OEk(16,"cloud_download"),t.C$Y(),t.I0R(17,"span"),t.OEk(18,"Data"),t.C$Y()(),t.I0R(19,"button",13),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.importContent())}),t.I0R(20,"mat-icon",12),t.OEk(21,"cloud_upload"),t.C$Y(),t.I0R(22,"span"),t.OEk(23,"Data"),t.C$Y()(),t.I0R(24,"button",14),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.importItem())}),t.I0R(25,"mat-icon",12),t.OEk(26,"cloud_upload"),t.C$Y(),t.I0R(27,"span"),t.OEk(28,"Item"),t.C$Y()(),t.I0R(29,"button",15),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.createMetadata())}),t.I0R(30,"mat-icon",12),t.OEk(31,"local_offer"),t.C$Y(),t.I0R(32,"span"),t.OEk(33,"Create Metadata"),t.C$Y()(),t.yuY(34,me,5,0,"button",16),t.C$Y(),t.I0R(35,"button",17),t.qCj("click",function(){t.usT(e);const o=t.GaO();return t.CGJ(o.editItem(null))}),t.I0R(36,"mat-icon"),t.OEk(37,"add"),t.C$Y()()()()}if(2&a){const e=t.GaO();let n;t.yG2(3),t.oRS(" ",s.contentType.Label||s.contentType.Name," Data "),t.yG2(6),t.C0Y(9,(n=null==s.contentType||null==s.contentType.Properties?null:s.contentType.Properties.ListInstructions)?9:-1,n),t.yG2(2),t.E7m("rowData",s.items)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),t.yG2(23),t.C0Y(34,s.debugEnabled?34:-1)}}let Ce=(()=>{class a extends W.K{constructor(e,n,o,i,r,d,m,$,F,R,fe,he){super(e,n),this.router=e,this.route=n,this.dialogRef=o,this.contentTypesService=i,this.contentItemsService=r,this.entitiesService=d,this.contentExportService=m,this.snackBar=$,this.globalConfigService=F,this.dialog=R,this.viewContainerRef=fe,this.changeDetectorRef=he,this.contentType$=new g.E,this.items$=new u.g(void 0),this.gridOptions={...Z.A},this.gridApi$=new u.g(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName")}ngOnInit(){this.fetchContentType(),this.fetchItems(),this.fetchColumns(),this.subscription.add(this.refreshOnChildClosedShallow().subscribe(()=>{this.fetchItems()})),this.viewModel$=(0,f.E)([this.contentType$,this.items$,this.globalConfigService.getDebugEnabled$()]).pipe((0,y.k)(([e,n,o])=>({contentType:e,items:n,debugEnabled:o})))}ngOnDestroy(){this.contentType$.complete(),this.items$.complete(),this.gridApi$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}onGridReady(e){this.gridApi$.next(e.api)}fetchContentType(){this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(e=>{this.contentType$.next(e)})}fetchItems(){this.contentItemsService.getAll(this.contentTypeStaticName).subscribe(e=>{this.items$.next(e)})}fetchColumns(){this.contentItemsService.getColumns(this.contentTypeStaticName).subscribe(e=>{const n=e.filter(r=>!r.IsEphemeral),o=this.buildColumnDefs(n),i=function ct(a,s){if(!a)return;let e;"="===a.charAt(a.length-1)&&(a=atob(a));try{e=JSON.parse(a)}catch{console.error("Can't parse JSON with filters from url:",a)}if(!e)return;const n={};return(e.IsPublished||e.IsMetadata)&&(n.Status={filterType:"pub-meta",published:e.IsPublished??"",metadata:e.IsMetadata??"",hasMetadata:""}),Object.entries(e).filter(([o,i])=>"IsPublished"!==o&&"IsMetadata"!==o).forEach(([o,i])=>{if(s.find(d=>d.headerName===o)?.filter!==j){if("string"==typeof i)n[o]={filterType:"text",type:"equals",filter:i};else if("number"==typeof i)n[o]={filterType:"number",type:"equals",filter:i,filterTo:null};else if("boolean"==typeof i){const d={filterType:"boolean",filter:i.toString()};n[o]=d}}else{const d={filterType:"entity",filter:"string"==typeof(i=M.Co.tryParse(i)??i)?i:void 0,idFilter:"number"==typeof i?[i]:Array.isArray(i)?i.filter(m=>"number"==typeof m):void 0};n[o]=d}}),n}(sessionStorage.getItem(q.cX),o);this.gridApi$.value?this.setColumnDefs(o,i):this.gridApi$.pipe((0,v.I)(r=>null!=r),(0,C.U)(1)).subscribe(r=>{this.setColumnDefs(o,i)})})}setColumnDefs(e,n){this.gridApi$.value.setColumnDefs(e),n&&((0,tt.y)("Will try to apply filter:",n),this.gridApi$.value.setFilterModel(n))}openMetadata(e){const n=J.K.getUrlEntity(e.Guid,`Metadata for Entity: ${e._Title} (${e.Id})`,this.contentTypeStaticName);this.router.navigate([n],{relativeTo:this.route})}editItem(e){const o=(0,w.K)({items:[null==e?{ContentTypeName:this.contentTypeStaticName}:{EntityId:e.Id}]});this.router.navigate([`edit/${o}`],{relativeTo:this.route})}exportContent(){const e=this.gridApi$.value.getFilterModel(),n=Object.keys(e).length>0,o=[];n&&this.gridApi$.value.forEachNodeAfterFilterAndSort(i=>{o.push(i.data.Id)}),this.router.navigate([`export/${this.contentTypeStaticName}${o.length>0?`/${o}`:""}`],{relativeTo:this.route})}filesDropped(e){const n=e[0];switch(n.name.substring(n.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.importContent(e);break;case"json":this.importItem(e)}}importContent(e){this.router.navigate([`${this.contentTypeStaticName}/import`],{relativeTo:this.route,state:{files:e}})}importItem(e){this.router.navigate(["import"],{relativeTo:this.route,state:{files:e}})}createMetadata(){this.dialog.open(ae,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(n=>{if(null==n)return;const o={items:[{ContentTypeName:this.contentTypeStaticName,For:{Target:n.target??n.targetType.toString(),TargetType:n.targetType,...n.keyType===p._K.keyTypes.guid&&{Guid:n.key},...n.keyType===p._K.keyTypes.number&&{Number:parseInt(n.key,10)},...n.keyType===p._K.keyTypes.string&&{String:n.key}}}]},i=(0,w.K)(o);this.router.navigate([`edit/${i}`],{relativeTo:this.route}),this.changeDetectorRef.markForCheck()})}debugFilter(){console.warn("Current filter:",this.gridApi$.value.getFilterModel()),this.snackBar.open("Check console for filter information",void 0,{duration:3e3})}buildColumnDefs(e){const n=[{headerName:"ID",field:"Id",width:70,headerClass:"dense",sortable:!0,filter:"agNumberColumnFilter",cellClass:o=>("id-action no-padding no-outline "+(o.data._EditInfo.ReadOnly?"disabled":"")).split(" "),valueGetter:o=>o.data.Id,cellRenderer:z.q,cellRendererParams:{tooltipGetter:i=>`ID: ${i.Id}\nRepoID: ${i._RepositoryId}\nGUID: ${i.Guid}`}},{field:"Status",width:82,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),filter:oe,valueGetter:o=>{const i=o.data;return{published:i.IsPublished,metadata:!!i.For,hasMetadata:!!i.Metadata&&i.Metadata.length>0}},cellRenderer:dt,cellRendererParams:{onOpenMetadata:i=>this.openMetadata(i)}},{headerName:"Item (Entity)",field:"_Title",flex:2,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter",onCellClicked:o=>{this.editItem(o.data)},valueGetter:o=>o.data._Title},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:o=>{const i=o.data;return`${i._Used} / ${i._Uses}`}},{cellClass:"secondary-action no-padding".split(" "),width:122,pinned:"right",cellRenderer:nt,cellRendererParams:{onClone:i=>this.clone(i),onExport:i=>this.export(i),onDelete:i=>this.delete(i)}}];for(const o of e){const i={headerName:o.StaticName,field:o.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(o.Type){case T.m.Entity:i.allowMultiValue=o.Metadata?.Entity?.AllowMultiValue??!0,i.cellRenderer=ot,i.valueGetter=this.valueGetterEntityField,i.filter=j;break;case T.m.DateTime:i.useTimePicker=o.Metadata?.DateTime?.UseTimePicker??!1,i.valueGetter=this.valueGetterDateTime,i.filter="agTextColumnFilter";break;case T.m.Boolean:i.valueGetter=this.valueGetterBoolean,i.filter=Q.s;break;case T.m.Number:i.filter="agNumberColumnFilter";break;default:i.filter="agTextColumnFilter"}n.push(i)}return n}clone(e){const o=(0,w.K)({items:[{ContentTypeName:this.contentTypeStaticName,DuplicateEntity:e.Id}]});this.router.navigate([`edit/${o}`],{relativeTo:this.route})}export(e){this.contentExportService.exportEntity(e.Id,this.contentTypeStaticName,!0)}delete(e){confirm(`Delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.contentTypeStaticName,e._RepositoryId,!1).subscribe({next:()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()},error:n=>{this.snackBar.dismiss(),confirm(`${n.error.ExceptionMessage}\n\nDo you want to force delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.contentTypeStaticName,e._RepositoryId,!0).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()}))}}))}valueGetterEntityField(e){const n=e.data[e.colDef.field];return 0===n.length?null:n.map(o=>o.Title)}valueGetterDateTime(e){const n=e.data[e.colDef.field];return n?e.colDef.useTimePicker?n.replace("T"," ").replace("Z",""):n.split("T")[0]:null}valueGetterBoolean(e){const n=e.data[e.colDef.field];return"boolean"!=typeof n?null:n.toString()}static#t=this.\u0275fac=function(n){return new(n||a)(t.GI1(A.E5),t.GI1(A.gV),t.GI1(E.yI),t.GI1(_.X),t.GI1(U.q),t.GI1(ie.q),t.GI1(Y.M),t.GI1(se.yS),t.GI1(P.Sq),t.GI1(E.qW),t.GI1(t.y8U),t.GI1(t.kD9))};static#e=this.\u0275cmp=t.In1({type:a,selectors:[["app-content-items"]],features:[t.eg9],decls:2,vars:3,consts:[["appToggleDebug","","class","eav-dialog nav-component-wrapper"],["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[3,"innerHTML"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","gridOptions","allowedFileTypes","gridReady","filesDropped"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["mat-button","","tippy","Export xml list",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["mat-button","","tippy","Import xml list",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Import single json item",1,"eav-button__with-icon",3,"click"],["mat-button","","tippy","Create metadata",1,"eav-button__with-icon",3,"click"],["mat-button","","class","eav-button__with-icon","color","accent","tippy","Print filter to console"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",1,"eav-button__with-icon",3,"click"]],template:function(n,o){if(1&n&&(t.yuY(0,ue,38,6,"div",0),t.wVc(1,"async")),2&n){let i;t.C0Y(0,(i=t.kDX(1,1,o.viewModel$))?0:-1,i)}},dependencies:[A.cP,le.Q,re.U,b.Y,E.Yp,O.Gw,O.um,O.uw,x.qL,de.U5,k.a,ce.K]})}return a})()},420:(D,h,l)=>{l.d(h,{M:()=>g});const g="DROPDOWN_INSERT_VALUE"},2260:(D,h,l)=>{function g(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}l.d(h,{y:()=>g})},504:(D,h,l)=>{l.d(h,{c:()=>u});var g=l(4896);let u=(()=>{class f{onClick(v){v.stopPropagation()}static#t=this.\u0275fac=function(C){return new(C||f)};static#e=this.\u0275dir=g.Sc5({type:f,selectors:[["","appClickStopPropagation",""]],hostBindings:function(C,_){1&C&&g.qCj("click",function(T){return _.onClick(T)})}})}return f})()},2564:(D,h,l)=>{l.d(h,{U:()=>f});var g=l(6698),u=l(4896);let f=(()=>{class y{constructor(C){this.globalConfigService=C}onClick(C){(navigator.platform.match("Mac")?C.metaKey:C.ctrlKey)&&C.shiftKey&&C.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static#t=this.\u0275fac=function(_){return new(_||y)(u.GI1(g.Sq))};static#e=this.\u0275dir=u.Sc5({type:y,selectors:[["","appToggleDebug",""]],hostBindings:function(_,Y){1&_&&u.qCj("click",function(P){return Y.onClick(P)})}})}return y})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.06.00/dist/ng-edit/projects_eav-ui_src_app_content-items_content-items_component_ts.deab7512e99e9d32.js.map