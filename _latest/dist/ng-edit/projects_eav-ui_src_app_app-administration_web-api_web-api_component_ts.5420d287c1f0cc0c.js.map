{"version":3,"file":"projects_eav-ui_src_app_app-administration_web-api_web-api_component_ts.5420d287c1f0cc0c.js","mappings":"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","names":["i0","_r1","ctx_r1","openCode","_r3","openRestApi","WebApiActionsComponent","constructor","router","route","this","agInit","params","enableCode","enableCodeGetter","refresh","onOpenCode","data","api","urlSegments","url","split","length","GoToDevRest","routeWebApi","push","encodeURIComponent","path","apiUrl","join","navigate","static","__ngFactoryType__","i1","debug_node_JnOYh9kg","VBU","selectors","decls","vars","consts","template","rf","ctx","WebApiActionsComponent_Conditional_1_Template","WebApiActionsComponent_Conditional_2_Template","WebApiActionsComponent_ng_template_8_Template","menu_r4","MatRippleModule","i2","MatIconModule","i3","MatMenuModule","i4","TippyDirective","encapsulation","webApis","gridOptions","WebApiComponent","#dialogInNewWindowSvc","#sourceSvc","#helpTextConst","snackBar","matDialog","viewContainerRef","transient","DialogInNewWindowService","SourceService","signal","getWebApisLive","buildGridOptions","dialogConfigSvc","DialogConfigAppService","empty","description","hint","content","uxHelpText","computed","ngOnInit","getCurrent$","subscribe","settings","Context","Enable","CodeEditor","createController","global","open","CreateFileDialogComponent","autoFocus","folder","purpose","width","afterClosed","result","name","endsWith","fileName","substring","lastIndexOf","test","duration","create","templateKey","update","v","openCodeFile","isShared","defaultGridOptions","columnDefs","ColumnDefinitions","ItemsText","headerName","field","flex","minWidth","TextWideMin100","sort","TextWide","Boolean2","cellRenderer","TrueFalseComponent","ActionsPinnedRight6","cellRendererParams","WebApiComponent_Conditional_1_Template","tmp_3_0","tmp_4_0","menu_r3","SxcGridModule","MatDialogActions","MatButtonModule","i5","i6","RouterOutlet","GridWithHelpComponent","gridWrapper","viewChild","read","ElementRef","agGrid","contentChild","AgGridAngular","dialogAction","helpText","input","required","rowLength","DEFAULT_ROW_HEIGHT","GRID_HEADER_HEIGHT","HELP_CARD_BUFFER","effect","gridWrapperEl","nativeElement","untracked","#updateLayout","agGridEl","dialogActionEl","helpCard","querySelector","classList","toggle","style","dimensions","#calculateDimensions","rowHeight","agGridHeight","maxHeight","document","clientHeight","dialogHeaderHeight","dialogActionHeight","shouldHideHelp","helpCardHeight","wrapperHeight","offsetHeight","_angular_core__WEBPACK_IMPORTED_MODULE_1__","contentQueries","dirIndex"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api-actions/web-api-actions.component.ts","./projects/eav-ui/src/app/app-administration/web-api/web-api.component.html","./projects/eav-ui/src/app/app-administration/web-api/web-api.component.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.component.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.component.html"],"sourcesContent":["<div class=\"actions-component\">\r\n  @if (enableCode) {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Code\" (click)=\"openCode()\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n  @if (!enableCode) {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>code</mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item (click)=\"openRestApi()\">\r\n      <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n      <span>REST API</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { GoToDevRest } from '../../../dev-rest/go-to-dev-rest';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { WebApi } from '../../models/web-api.model';\r\nimport { WebApiActionsParams } from './web-api-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-web-api-actions',\r\n    templateUrl: './web-api-actions.component.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        MatMenuModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class WebApiActionsComponent implements ICellRendererAngularComp {\r\n  enableCode: boolean;\r\n  private params: ICellRendererParams & WebApiActionsParams;\r\n\r\n  constructor(private router: Router, private route: ActivatedRoute) { }\r\n\r\n\r\n  agInit(params: ICellRendererParams & WebApiActionsParams): void {\r\n    this.params = params;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode(): void {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenCode(api);\r\n  }\r\n\r\n  openRestApi(): void {\r\n    const api: WebApi = this.params.data;\r\n    // Get the current URL and split it into segments\r\n    const urlSegments = this.router.url.split('/');\r\n    // Replace the last segment with the GoToDevRest.routeWebApi (restapiwebapi)\r\n    urlSegments[urlSegments.length - 1] = GoToDevRest.routeWebApi;\r\n    // Add the path of the api to the url segments\r\n    urlSegments.push(encodeURIComponent(api.path));\r\n    // Join the segments back together to form the new URL\r\n    const apiUrl = urlSegments.join('/');\r\n\r\n    this.router.navigate([apiUrl]);\r\n\r\n    // this.params.onOpenRestApi(api);\r\n  }\r\n}\r\n","<app-grid-with-help [helpText]=\"uxHelpText()\" [refresh]=\"refresh()\" [rowLength]=\"webApis()?.length\">\r\n  @if (webApis()?.length) {\r\n    <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"webApis()\" [gridOptions]=\"gridOptions\"> </ag-grid-angular>\r\n  }\r\n  <mat-dialog-actions align=\"end\">\r\n    <button mat-fab mat-elevation-z24 [matMenuTriggerFor]=\"menu\" class=\"grid-fab\" tippy=\"Create a new controller\" tippyPlacement=\"left\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item (click)=\"createController(false)\">\r\n        <span>App</span>\r\n      </button>\r\n      <button mat-menu-item (click)=\"createController(true)\">\r\n        <span>Shared (global)</span>\r\n      </button>\r\n    </mat-menu>\r\n  </mat-dialog-actions>\r\n</app-grid-with-help>\r\n<router-outlet></router-outlet>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../core';\r\nimport { SourceService } from '../../code-editor/services/source.service';\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult } from '../../create-file-dialog';\r\nimport { TrueFalseComponent } from '../../dev-rest/api/true-false/true-false.component';\r\nimport { ColumnDefinitions } from '../../shared/ag-grid/column-definitions';\r\nimport { GridWithHelpComponent, HelpTextConst } from '../../shared/ag-grid/grid-with-help/grid-with-help.component';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogInNewWindowService } from '../../shared/routing/dialog-in-new-window.service';\r\nimport { WebApi } from '../models/web-api.model';\r\nimport { DialogConfigAppService } from '../services/dialog-config-app.service';\r\nimport { WebApiActionsComponent } from './web-api-actions/web-api-actions.component';\r\nimport { WebApiActionsParams } from './web-api-actions/web-api-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-web-api',\r\n  templateUrl: './web-api.component.html',\r\n  imports: [\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    GridWithHelpComponent,\r\n  ]\r\n})\r\nexport class WebApiComponent implements OnInit {\r\n\r\n  #dialogInNewWindowSvc = transient(DialogInNewWindowService);\r\n  #sourceSvc = transient(SourceService);\r\n\r\n  enableCode!: boolean;\r\n  refresh = signal(0);\r\n  webApis = this.#sourceSvc.getWebApisLive(this.refresh)\r\n\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private dialogConfigSvc = transient(DialogConfigAppService);\r\n\r\n  // UI Help Text for the UX Help Info Card\r\n  #helpTextConst: HelpTextConst = {\r\n    empty: {\r\n      description: '<p><b>This is where you manage Web APIs</b><br>They are custom C# code which do anything you want.</p>',\r\n      hint: \"<p>WebApi Controllers are listed automatically. <br>Click the (+) in the bottom right corner to create your first Web API from a template file.</p>\"\r\n    },\r\n    content: {\r\n      description: '<p><b>This is where you manage Web APIs</b><br>They are custom C# code which do anything you want.</p>',\r\n      hint: ''\r\n    }\r\n  };\r\n\r\n  uxHelpText = computed(() => {\r\n    const data = this.webApis();\r\n    return data?.length === 0 ? this.#helpTextConst.empty : this.#helpTextConst.content;\r\n  })\r\n\r\n  constructor(\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.dialogConfigSvc.getCurrent$().subscribe(settings => {\r\n      this.enableCode = settings.Context.Enable.CodeEditor;\r\n    });\r\n\r\n  }\r\n\r\n  createController(global?: boolean): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the web-api.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if\r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (global == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) return;\r\n    //     this.createController(isShared);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: 'api',\r\n      global,\r\n      purpose: 'Api',\r\n    };\r\n    const createFileDialogRef = this.matDialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) return;\r\n\r\n      if (result.name.endsWith('Controller.cs')) {\r\n        const fileName = result.name.substring(result.name.lastIndexOf('/') + 1);\r\n        if (!/^[A-Z][a-zA-Z0-9]*Controller\\.cs$/g.test(fileName)) {\r\n          const message = `\"${fileName}\" is invalid controller name. Should be something like \"MyController.cs\"`;\r\n          this.snackBar.open(message, null, { duration: 5000 });\r\n          return;\r\n        }\r\n      }\r\n\r\n      this.snackBar.open('Saving...');\r\n      this.#sourceSvc.create(result.name, global, result.templateKey).subscribe(() => {\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.refresh.update(v => ++v);\r\n      });\r\n    });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private openCode(api: WebApi) {\r\n    this.#dialogInNewWindowSvc.openCodeFile(api.path, api.isShared);\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.ItemsText,\r\n          headerName: 'Endpoint',\r\n          field: 'endpointPath',\r\n          flex: 2,\r\n          minWidth: 250,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWideMin100,\r\n          headerName: 'Edition',\r\n          field: 'edition',\r\n          sort: 'asc',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWideMin100,\r\n          headerName: 'Forder2',\r\n          field: 'folder',\r\n          sort: 'asc',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Name',\r\n          field: 'name',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Boolean2,\r\n          headerName: 'Compiled',\r\n          field: 'isCompiled',\r\n          cellRenderer: TrueFalseComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight6,\r\n          cellRenderer: WebApiActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: WebApiActionsParams = {\r\n              enableCodeGetter: () => this.enableCodeGetter(),\r\n              onOpenCode: (api) => this.openCode(api),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { Component, contentChild, effect, ElementRef, input, untracked, viewChild } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\n\r\nexport interface HelpTextConst {\r\n  empty: GridWithHelpInput;\r\n  content: GridWithHelpInput;\r\n}\r\n\r\nexport interface GridWithHelpInput {\r\n  description: string;\r\n  hint: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-grid-with-help',\r\n  imports: [],\r\n  templateUrl: './grid-with-help.component.html',\r\n  styleUrl: './grid-with-help.component.scss'\r\n})\r\n\r\nexport class GridWithHelpComponent {\r\n  // ViewChild and ContentChild references - Access to DOM elements\r\n  gridWrapper = viewChild(\"gridWrapper\", { read: ElementRef });\r\n  agGrid = contentChild(AgGridAngular, { read: ElementRef });\r\n  dialogAction = contentChild(MatDialogActions, { read: ElementRef });\r\n\r\n  // Input properties - Required data from parent component\r\n  readonly helpText = input.required<GridWithHelpInput>({});\r\n  readonly refresh = input.required<number>();\r\n  readonly rowLength = input.required<number>();\r\n\r\n  // Constants - Fixed values for layout calculations\r\n  readonly DEFAULT_ROW_HEIGHT = 47; // Default height for AG Grid rows in pixels\r\n  readonly GRID_HEADER_HEIGHT = 64; // Height of AG Grid header in pixels\r\n  readonly HELP_CARD_BUFFER = 12;   // Additional buffer space for help card in pixels\r\n\r\n  constructor() {\r\n    // Effect that reacts to changes in refresh and rowLength signals\r\n    effect(() => {\r\n      const refresh = this.refresh();\r\n      const rowLength = this.rowLength();\r\n      const gridWrapperEl = this.gridWrapper()?.nativeElement;\r\n\r\n      // Early return if grid wrapper element is not available\r\n      if (!gridWrapperEl) return;\r\n\r\n      // Untracked execution to prevent unnecessary effect re-runs during layout updates\r\n      untracked(() => this.#updateLayout(gridWrapperEl, rowLength));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main layout update method - Handles the dynamic sizing and positioning of grid and help card\r\n   * @param gridWrapperEl - The main container element\r\n   * @param rowLength - Number of rows in the grid\r\n   */\r\n  #updateLayout(gridWrapperEl: HTMLElement, rowLength: number): void {\r\n    // Get references to essential DOM elements\r\n    const agGridEl = this.agGrid()?.nativeElement;\r\n    const dialogActionEl = this.dialogAction()?.nativeElement;\r\n    const helpCard = gridWrapperEl.querySelector('.help-info-card') as HTMLElement;\r\n\r\n    helpCard.classList.toggle('center-center', rowLength === 0);\r\n\r\n    // Early return if critical elements are missing\r\n    if (!agGridEl || !dialogActionEl) return;\r\n\r\n    helpCard.style.flex = \"\";\r\n\r\n    // Calculate all necessary dimensions for layout\r\n    const dimensions = this.#calculateDimensions(gridWrapperEl, agGridEl, dialogActionEl, helpCard, rowLength);\r\n\r\n    // Set AG Grid height based on row count and maximum height to prevent overflow\r\n    agGridEl.style.flex = dimensions.rowHeight ? `0 0 ${dimensions.agGridHeight}px` : '0px';\r\n    // TODO: 2dg, discus with 2ro, style not have a calc () fn\r\n    const maxHeight = document.querySelector('.mat-sidenav-content').clientHeight - dimensions.dialogHeaderHeight - dimensions.dialogActionHeight;\r\n    agGridEl.style.maxHeight = `${maxHeight}px`;\r\n\r\n    // Determine if help card should be hidden when content exceeds available space\r\n    const shouldHideHelp = dimensions.helpCardHeight + dimensions.agGridHeight + dimensions.dialogActionHeight + dimensions.dialogHeaderHeight > dimensions.wrapperHeight;\r\n\r\n    helpCard.style.flex = \"1 1 auto\";\r\n    // Remove Help card from layout if it should be hidden\r\n    helpCard?.classList.toggle('hidden-help-info-card', shouldHideHelp);\r\n  }\r\n\r\n  // Calculate dimensions for AG Grid and help card based on current layout\r\n  #calculateDimensions(gridWrapperEl: HTMLElement, agGridEl: HTMLElement, dialogActionEl: HTMLElement, helpCard: HTMLElement, rowLength: number) {\r\n    const rowHeight = agGridEl.querySelector('.ag-row')?.clientHeight ?? this.DEFAULT_ROW_HEIGHT;\r\n    const agGridHeight = this.GRID_HEADER_HEIGHT + (rowLength * rowHeight);\r\n    const helpCardHeight = helpCard.clientHeight + this.HELP_CARD_BUFFER;\r\n    const dialogActionHeight = dialogActionEl.offsetHeight;\r\n    const dialogHeaderHeight = gridWrapperEl.querySelector('.eav-dialog-header')?.clientHeight ?? 0;\r\n    // Get total available wrapper height\r\n    const wrapperHeight = gridWrapperEl.offsetHeight;\r\n    return {\r\n      rowHeight,\r\n      agGridHeight,\r\n      helpCardHeight,\r\n      dialogActionHeight,\r\n      dialogHeaderHeight,\r\n      wrapperHeight\r\n    };\r\n  }\r\n\r\n\r\n}\r\n","<div class=\"grid-wrapper-dynamic\" #gridWrapper>\r\n  <ng-content select=\"[eav-dialog-header]\"></ng-content>\r\n  <ng-content select=\"[eav-dialog-content]\"> </ng-content>\r\n  <ng-content select=\"ag-grid-angular\"></ng-content>\r\n  <div class=\"help-info-card\">\r\n    <div class=\"help-info-card-text\">\r\n      <span [innerHTML]=\"helpText().description\"></span>\r\n      <span [innerHTML]=\"helpText().hint\"></span>\r\n    </div>\r\n  </div>\r\n  <ng-content select=\"mat-dialog-actions\"></ng-content>\r\n</div>\r\n"],"x_google_ignoreList":[]}