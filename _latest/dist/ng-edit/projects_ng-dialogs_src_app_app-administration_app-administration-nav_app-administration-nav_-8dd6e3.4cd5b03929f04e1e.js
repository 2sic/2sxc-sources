"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_app-administration_app-administration-nav_app-administration-nav_-8dd6e3"],{6999:function(ot,J,l){l.r(J),l.d(J,{AppAdministrationNavComponent:function(){return dn}});var A=l(2090),h=l(8069),v=l(8047),g=l(2977),D=l(6317),q=l(6562),x=l(7714),f=l(116),C=l(635),I=l(4874),w=l(679),u=l(1825),dt=l(9760),O={App:"App",Site:"Site",Global:"Global"},mt=l(6886),t=l(7133),tt=l(5758),Z=l(6362),gt=l(5469),P=l(7317),_=l(785),T=l(5590),W=l(2379),ft=l(1239),ht=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-getting-started"]],inputs:{gettingStartedUrl:"gettingStartedUrl"},decls:2,vars:3,consts:[[1,"iframe",3,"src"]],template:function(n,e){1&n&&(t._UZ(0,"iframe",0),t.ALo(1,"safeResourceUrl")),2&n&&t.Q6J("src",t.lcZ(1,1,e.gettingStartedUrl),t.uOi)},pipes:[ft.t],styles:[".iframe[_ngcontent-%COMP%]{border:none;width:100%;height:calc(100vh - 209px)}@media (max-width: 600px){.iframe[_ngcontent-%COMP%]{height:calc(100vh - 161px)}}"]}),i}(),at=l(6170),vt=l(5106),Y=l(1276),Ct=l(7400),Zt=l(9295),At=l(8977),st=l(7338),rt=l(6488),et=l(3659),H=l(9230),L=l(7297),nt=l(5578),K=l(9119),lt=l(9670),Tt=l(7396),E=l(5137),_t=l(8398),U=l(1130),y=l(2796),Q=l(178);function yt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().createOrEditMetadata()}),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA()}}function bt(i,a){1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"mat-icon"),t._uU(2,"edit"),t.qZA(),t.qZA())}function kt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",13),t.NdJ("click",function(){return t.CHM(n),t.oxw().openMetadata()}),t.TgZ(1,"mat-icon",14),t._uU(2," local_offer "),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Metadata.length)("matBadgeHidden",!e.contentType.Metadata.length)}}function Dt(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"mat-icon",15),t._uU(2," local_offer "),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",n.contentType.Metadata.length)("matBadgeHidden",!n.contentType.Metadata.length)}}function xt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",16),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPermissions()}),t.TgZ(1,"mat-icon",14),t._uU(2," person "),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.contentType.Permissions.Count)("matBadgeHidden",!e.contentType.Permissions.Count)}}function St(i,a){if(1&i&&(t.TgZ(0,"div",12),t.TgZ(1,"mat-icon",15),t._uU(2," person "),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",n.contentType.Permissions.Count)("matBadgeHidden",!n.contentType.Permissions.Count)}}var It=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.params=e,this.contentType=this.params.data;var o=this.params.enablePermissionsGetter();this.enablePermissions=o&&(0,_t.M)().test(this.contentType.StaticName)}},{key:"refresh",value:function(e){return!0}},{key:"createOrEditMetadata",value:function(){this.params.onCreateOrEditMetadata(this.contentType)}},{key:"openPermissions",value:function(){this.params.onOpenPermissions(this.contentType)}},{key:"editContentType",value:function(){this.params.onEdit(this.contentType)}},{key:"openMetadata",value:function(){this.params.onOpenMetadata(this.contentType)}},{key:"openRestApi",value:function(){this.params.onOpenRestApi(this.contentType)}},{key:"exportType",value:function(){this.params.onTypeExport(this.contentType)}},{key:"openDataExport",value:function(){this.params.onOpenDataExport(this.contentType)}},{key:"openDataImport",value:function(){this.params.onOpenDataImport(this.contentType)}},{key:"deleteContentType",value:function(){this.params.onDelete(this.contentType)}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-data-actions"]],decls:41,vars:9,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Description and more",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["matRipple","","tippy","Description and more",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,yt,3,0,"div",1),t.YNc(2,bt,3,0,"div",2),t.YNc(3,kt,3,2,"div",3),t.YNc(4,Dt,3,2,"div",2),t.YNc(5,xt,3,2,"div",4),t.YNc(6,St,3,2,"div",2),t.TgZ(7,"div",5),t.TgZ(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-menu",6,7),t.TgZ(12,"button",8),t.NdJ("click",function(){return e.editContentType()}),t.TgZ(13,"mat-icon"),t._uU(14,"settings"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Rename"),t.qZA(),t.qZA(),t.TgZ(17,"button",9),t.NdJ("click",function(){return e.openRestApi()}),t._UZ(18,"mat-icon",10),t.TgZ(19,"span"),t._uU(20,"REST API"),t.qZA(),t.qZA(),t.TgZ(21,"button",9),t.NdJ("click",function(){return e.exportType()}),t.TgZ(22,"mat-icon"),t._uU(23,"cloud_download"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Export content type"),t.qZA(),t.qZA(),t.TgZ(26,"button",9),t.NdJ("click",function(){return e.openDataExport()}),t.TgZ(27,"mat-icon"),t._uU(28,"cloud_download"),t.qZA(),t.TgZ(29,"span"),t._uU(30,"Export data"),t.qZA(),t.qZA(),t.TgZ(31,"button",9),t.NdJ("click",function(){return e.openDataImport()}),t.TgZ(32,"mat-icon"),t._uU(33,"cloud_upload"),t.qZA(),t.TgZ(34,"span"),t._uU(35,"Import data"),t.qZA(),t.qZA(),t.TgZ(36,"button",8),t.NdJ("click",function(){return e.deleteContentType()}),t.TgZ(37,"mat-icon"),t._uU(38,"delete"),t.qZA(),t.TgZ(39,"span"),t._uU(40,"Delete"),t.qZA(),t.qZA(),t.qZA()),2&n){var o=t.MAs(11);t.xp6(1),t.Q6J("ngIf",!e.contentType.EditInfo.ReadOnly||e.contentType.Properties),t.xp6(1),t.Q6J("ngIf",e.contentType.EditInfo.ReadOnly&&!e.contentType.Properties),t.xp6(1),t.Q6J("ngIf",!e.contentType.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",e.contentType.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",!e.contentType.EditInfo.ReadOnly&&e.enablePermissions),t.xp6(1),t.Q6J("ngIf",e.contentType.EditInfo.ReadOnly||!e.enablePermissions),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(5),t.Q6J("disabled",e.contentType.EditInfo.ReadOnly),t.xp6(24),t.Q6J("disabled",e.contentType.EditInfo.ReadOnly)}},directives:[Z.O5,U.wG,_.$,y.p6,T.Hw,y.VK,y.OP,Q.k],styles:[""]}),i}(),qt=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.params=e,this.contentType=e.data,this.value=e.value,this.tooltip=this.contentType.EditInfo.ReadOnly?"".concat(this.contentType.EditInfo.ReadOnlyMessage?"".concat(this.contentType.EditInfo.ReadOnlyMessage,"\n\n"):"","This ContentType shares the definition of #").concat(this.contentType.SharedDefId," so you can't edit it here. Read 2sxc.org/help?tag=shared-types"):"Edit fields",this.icon=this.contentType.EditInfo.ReadOnly?"share":"dns"}},{key:"refresh",value:function(e){return!0}},{key:"editFields",value:function(){this.params.onEditFields(this.contentType)}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-data-fields"]],decls:4,vars:4,consts:[[1,"actions-component"],["matRipple","",1,"like-button","highlight",3,"tippy","click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return e.editFields()}),t.TgZ(2,"mat-icon",2),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tippy",e.tooltip),t.xp6(1),t.Q6J("matBadge",e.value)("matBadgeHidden",!e.value),t.xp6(1),t.hij(" ",e.icon," "))},directives:[U.wG,_.$,T.Hw,Q.k],styles:[""]}),i}(),wt=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.params=e,this.contentType=e.data,this.value=e.value}},{key:"refresh",value:function(e){return!0}},{key:"showItems",value:function(){this.params.onShowItems(this.contentType)}},{key:"addItem",value:function(){this.params.onAddItem(this.contentType)}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-data-items"]],decls:7,vars:2,consts:[[1,"actions-component"],["matRipple","",1,"like-button","highlight",3,"tippy","click"],[1,"text-icon"],["matRipple","","tippy","Add item",1,"like-button","highlight",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return e.showItems()}),t.TgZ(2,"div",2),t._uU(3),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.NdJ("click",function(){return e.addItem()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.MGl("tippy","",e.value," items"),t.xp6(2),t.Oqu(e.value))},directives:[U.wG,_.$,T.Hw],styles:[".text-icon[_ngcontent-%COMP%]{width:24px;height:24px;font-size:12px;line-height:22px;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;border:1px solid rgba(29,39,61,.44);border-radius:12px;box-sizing:border-box;background-color:#002753;color:#fff;-webkit-user-select:none;user-select:none}.text-icon[_ngcontent-%COMP%]{min-width:24px;width:initial}"]}),i}(),Et=l(5005),B=l(2528),z=l(1350),it=l(1529),Ut=l(4770),Ft=l(1434),pt=l(587);function Nt(i,a){if(1&i&&(t.TgZ(0,"mat-option",6),t._uU(1),t.qZA()),2&i){var n=a.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ","Scope: "+n.name," ")}}function Jt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){return t.CHM(n),t.oxw().createGhost()}),t.TgZ(1,"mat-icon"),t._uU(2,"share"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Ghost"),t.qZA(),t.qZA()}}var Pt=function(){var i=function(){function a(n,e,o,s,r,p){var m=this;(0,h.Z)(this,a),this.router=n,this.route=e,this.contentTypesService=o,this.globalConfigService=s,this.snackBar=r,this.contentExportService=p,this.contentTypes$=new D.X(null),this.scope$=new D.X(null),this.scopeOptions$=new D.X([]),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.modules=Y.F$,this.gridOptions=Object.assign(Object.assign({},K.f),{frameworkComponents:{idFieldComponent:nt.m,dataItemsComponent:wt,dataFieldsComponent:qt,dataActionsComponent:It},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(d){return"".concat(d.data.EditInfo.ReadOnly?"disabled":""," id-action no-padding no-outline")},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(d){return"ID: ".concat(d.Id,"\nGUID: ").concat(d.StaticName)}}},{headerName:"Content Type",field:"Label",flex:3,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(d){return m.showContentItems(d.data)},comparator:function(d,b,k,F,M){return k.data._compareLabel.localeCompare(F.data._compareLabel)}},{headerName:"Items",field:"Items",width:102,headerClass:"dense",cellClass:"secondary-action no-padding",sortable:!0,filter:"agNumberColumnFilter",cellRenderer:"dataItemsComponent",cellRendererParams:{onShowItems:function(d){return m.showContentItems(d)},onAddItem:function(d){return m.addItem(d)}}},{headerName:"Fields",field:"Fields",width:94,headerClass:"dense",cellClass:"secondary-action no-padding",sortable:!0,filter:"agNumberColumnFilter",cellRenderer:"dataFieldsComponent",cellRendererParams:{onEditFields:function(d){return m.editFields(d)}}},{headerName:"Name",field:"Name",flex:1,minWidth:100,cellClass:function(d){return d.data.EditInfo.ReadOnly?"no-outline":"primary-action highlight"},sortable:!0,filter:"agTextColumnFilter",onCellClicked:function(d){return m.editContentType(d.data)}},{headerName:"Description",field:"Properties.Description",flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:162,cellClass:"secondary-action no-padding",cellRenderer:"dataActionsComponent",pinned:"right",cellRendererParams:{enablePermissionsGetter:this.enablePermissionsGetter.bind(this),onCreateOrEditMetadata:this.createOrEditMetadata.bind(this),onOpenPermissions:this.openPermissions.bind(this),onEdit:this.editContentType.bind(this),onOpenRestApi:this.openRestApi.bind(this),onOpenMetadata:this.openMetadata.bind(this),onTypeExport:this.exportType.bind(this),onOpenDataExport:this.openDataExport.bind(this),onOpenDataImport:this.openDataImport.bind(this),onDelete:this.deleteContentType.bind(this)}}]}),this.dropdownInsertValue=lt.G,this.subscription=new x.w0}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.fetchScopes(),this.refreshScopeOnRouteChange(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.contentTypes$.complete(),this.scope$.complete(),this.scopeOptions$.complete(),this.subscription.unsubscribe()}},{key:"filesDropped",value:function(e){var o=this,s=e[0];switch(s.name.substring(s.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":(0,Ct.D)((0,Tt.B)(e[0])).pipe((0,Zt.q)(1)).subscribe(function(p){var m,c=null===(m=p.split('<Entity Type="')[1])||void 0===m?void 0:m.split('"')[0],d=o.contentTypes$.value.find(function(k){return k.Name===c});if(null!=d)o.openDataImport(d,e);else{var b="Cannot find Content Type named '".concat(c,"'. Please open Content Type Import dialog manually.");o.snackBar.open(b,null,{duration:5e3})}});break;case"json":this.importType(e)}}},{key:"importType",value:function(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}},{key:"showContentItems",value:function(e){this.router.navigate(["items/".concat(e.StaticName)],{relativeTo:this.route.firstChild})}},{key:"editContentType",value:function(e){if(e){if(e.EditInfo.ReadOnly)return;this.router.navigate(["".concat(e.StaticName,"/edit")],{relativeTo:this.route.firstChild})}else this.router.navigate(["add"],{relativeTo:this.route.firstChild})}},{key:"fetchContentTypes",value:function(){var e=this;this.contentTypesService.retrieveContentTypes(this.scope$.value).subscribe(function(o){var r,s=(0,vt.Z)(o);try{for(s.s();!(r=s.n()).done;){var p=r.value;p._compareLabel=p.Label.replace(/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDD-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE74\uDE78-\uDE7C\uDE80-\uDE86\uDE90-\uDEAC\uDEB0-\uDEBA\uDEC0-\uDEC5\uDED0-\uDED9\uDEE0-\uDEE7\uDEF0-\uDEF6])/g,"\u017e")}}catch(c){s.e(c)}finally{s.f()}e.contentTypes$.next(o),e.scope$.value!==u.Z.scopes.default.value&&e.snackBar.open("Warning! You are in a special scope. Changing things here could easily break functionality",null,{duration:2e3})})}},{key:"fetchScopes",value:function(){var e=this;this.contentTypesService.getScopes().subscribe(function(o){var s=(0,at.Z)(e.scopeOptions$.value);o.forEach(function(r){var p=s.find(function(m){return m.value===r.value});p?p.name=r.name:s.push(r)}),e.scopeOptions$.next(s)})}},{key:"createGhost",value:function(){var e=this,o=window.prompt("To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost");!o||(this.snackBar.open("Saving..."),this.contentTypesService.createGhost(o).subscribe(function(s){e.snackBar.open("Saved",null,{duration:2e3}),e.fetchContentTypes()}))}},{key:"changeScope",value:function(e){e===lt.G&&(e=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||u.Z.scopes.default.value),this.router.navigate(["data/".concat(e)],{relativeTo:this.route})}},{key:"enablePermissionsGetter",value:function(){return this.enablePermissions}},{key:"addItem",value:function(e){var s=(0,E.f)({items:[{ContentTypeName:e.StaticName}]});this.router.navigate(["edit/".concat(s)],{relativeTo:this.route.firstChild})}},{key:"editFields",value:function(e){this.router.navigate(["fields/".concat(e.StaticName)],{relativeTo:this.route.firstChild})}},{key:"createOrEditMetadata",value:function(e){var s=(0,E.f)({items:[e.Properties?{EntityId:e.Properties.Id}:{ContentTypeName:u.Z.contentTypes.contentType,For:{Target:u.Z.metadata.contentType.target,TargetType:u.Z.metadata.contentType.targetType,String:e.StaticName},Prefill:{Label:e.Name,Description:e.Description}}]});this.router.navigate(["edit/".concat(s)],{relativeTo:this.route.firstChild})}},{key:"openMetadata",value:function(e){var o=H.U.getUrlContentType(e.StaticName,"Metadata for Content Type: ".concat(e.Name," (").concat(e.Id,")"));this.router.navigate([o],{relativeTo:this.route.firstChild})}},{key:"openRestApi",value:function(e){this.router.navigate([et.i.getUrlData(e)],{relativeTo:this.route.firstChild})}},{key:"exportType",value:function(e){this.contentExportService.exportJson(e.StaticName)}},{key:"openDataExport",value:function(e){this.router.navigate(["export/".concat(e.StaticName)],{relativeTo:this.route.firstChild})}},{key:"openDataImport",value:function(e,o){var s={files:o};this.router.navigate(["".concat(e.StaticName,"/import")],{relativeTo:this.route.firstChild,state:s})}},{key:"openPermissions",value:function(e){this.router.navigate([L.i.getUrlContentType(e.StaticName)],{relativeTo:this.route.firstChild})}},{key:"deleteContentType",value:function(e){var o=this;!confirm("Are you sure you want to delete '".concat(e.Name,"' (").concat(e.Id,")?"))||(this.snackBar.open("Deleting..."),this.contentTypesService.delete(e).subscribe(function(s){o.snackBar.open("Deleted",null,{duration:2e3}),o.fetchContentTypes()}))}},{key:"refreshScopeOnRouteChange",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,f.h)(function(o){return o instanceof g.m2}),(0,C.U)(function(){return e.route.snapshot.firstChild.paramMap.get("scope")}),(0,I.O)(this.route.snapshot.firstChild.paramMap.get("scope")),(0,f.h)(function(o){return!!o}),(0,At.x)()).subscribe(function(o){if(e.scope$.next(o),!e.scopeOptions$.value.map(function(r){return r.value}).includes(o)){var s={name:o,value:o};e.scopeOptions$.next([].concat((0,at.Z)(e.scopeOptions$.value),[s]))}e.fetchContentTypes()}))}},{key:"refreshOnChildClosed",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,f.h)(function(o){return o instanceof g.m2}),(0,I.O)(!!this.route.snapshot.firstChild.firstChild),(0,C.U)(function(){return!!e.route.snapshot.firstChild.firstChild}),(0,w.G)(),(0,f.h)(function(o){var s=(0,A.Z)(o,2);return s[0]&&!s[1]})).subscribe(function(){e.fetchContentTypes()}))}}]),a}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(Et.s),t.Y36(st.bE),t.Y36(B.ux),t.Y36(rt.i))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-data"]],inputs:{enablePermissions:"enablePermissions"},decls:21,vars:16,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["appearance","standard","color","accent",1,"scope-dropdown"],["name","Scope",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-button","","tippy","Import content type",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Create a new content type",1,"grid-fab",3,"click"],["mat-button","","color","accent","tippy","Create a ghost content type",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"ag-grid-angular",1),t.NdJ("filesDropped",function(s){return e.filesDropped(s)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"mat-form-field",3),t.TgZ(5,"mat-select",4),t.NdJ("ngModelChange",function(s){return e.changeScope(s)}),t.ALo(6,"async"),t.YNc(7,Nt,2,2,"mat-option",5),t.ALo(8,"async"),t.TgZ(9,"mat-option",6),t._uU(10,"Scope: Other..."),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return e.importType()}),t.TgZ(12,"mat-icon"),t._uU(13,"cloud_upload"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Content Type"),t.qZA(),t.qZA(),t.YNc(16,Jt,5,0,"button",8),t.ALo(17,"async"),t.qZA(),t.TgZ(18,"button",9),t.NdJ("click",function(){return e.editContentType(null)}),t.TgZ(19,"mat-icon"),t._uU(20,"add"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,8,e.contentTypes$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),t.xp6(4),t.Q6J("ngModel",t.lcZ(6,10,e.scope$)),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,12,e.scopeOptions$)),t.xp6(2),t.Q6J("value",e.dropdownInsertValue),t.xp6(7),t.Q6J("ngIf",t.lcZ(17,14,e.debugEnabled$)))},directives:[z.N8,it.z,Ut.KE,Ft.gD,pt.JJ,pt.On,Z.sg,U.ey,P.lW,_.$,T.Hw,Z.O5],pipes:[Z.Ov],styles:[".scope-dropdown[_ngcontent-%COMP%]{width:200px;margin-top:-14px;font-size:14px;height:auto}"]}),i}(),X=l(7858),S=function(){return(i=S||(S={}))[i.Edit=0]="Edit",i[i.Metadata=1]="Metadata",i[i.Rest=2]="Rest",i[i.Clone=3]="Clone",i[i.Permissions=4]="Permissions",i[i.Export=5]="Export",i[i.Delete=6]="Delete",S;var i}(),Ot=l(4089),Qt=l(265),Bt=l(4582),Rt=l(7318),Mt=function(){function i(){(0,h.Z)(this,i)}return(0,v.Z)(i,[{key:"agInit",value:function(n){this.params=n,this.item=this.params.data}},{key:"refresh",value:function(n){return!0}}]),i}();function Vt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",11),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.params.do(s.actions.Metadata,s.item)}),t.TgZ(1,"mat-icon",12),t._uU(2," local_offer "),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.xp6(1),t.Q6J("matBadge",null==e.item.Metadata?null:e.item.Metadata.length)("matBadgeHidden",!(null!=e.item.Metadata&&e.item.Metadata.length))}}function Gt(i,a){if(1&i&&(t.TgZ(0,"div",13),t.TgZ(1,"mat-icon",14),t._uU(2," local_offer "),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",null==n.item.Metadata?null:n.item.Metadata.length)("matBadgeHidden",!(null!=n.item.Metadata&&n.item.Metadata.length))}}function Wt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.params.do(s.actions.Permissions,s.item)}),t.TgZ(1,"mat-icon",12),t._uU(2," person "),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.item._Permissions.Count)("matBadgeHidden",!e.item._Permissions.Count)}}function Yt(i,a){if(1&i&&(t.TgZ(0,"div",13),t.TgZ(1,"mat-icon",14),t._uU(2," person "),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",n.item._Permissions.Count)("matBadgeHidden",!n.item._Permissions.Count)}}var Ht=function(){var i=function(a){(0,Bt.Z)(e,a);var n=(0,Rt.Z)(e);function e(){var o;return(0,h.Z)(this,e),(o=n.apply(this,arguments)).actions=S,o}return(0,v.Z)(e,[{key:"agInit",value:function(s){(0,Ot.Z)((0,Qt.Z)(e.prototype),"agInit",this).call(this,s),this.enablePermissions=this.params.getEnablePermissions()}}]),e}(Mt);return i.\u0275fac=function(){var a;return function(e){return(a||(a=t.n5z(i)))(e||i)}}(),i.\u0275cmp=t.Xpm({type:i,selectors:[["app-queries-actions"]],features:[t.qOj],decls:32,vars:6,consts:[[1,"actions-component"],["matRipple","","tippy","Edit",1,"like-button","highlight",3,"click"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["mat-menu-item","",3,"disabled","click"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],[1,"like-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return e.params.do(e.actions.Edit,e.item)}),t.TgZ(2,"mat-icon"),t._uU(3,"edit"),t.qZA(),t.qZA(),t.YNc(4,Vt,3,2,"div",2),t.YNc(5,Gt,3,2,"div",3),t.YNc(6,Wt,3,2,"div",4),t.YNc(7,Yt,3,2,"div",3),t.TgZ(8,"div",5),t.TgZ(9,"mat-icon"),t._uU(10,"more_horiz"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"mat-menu",6,7),t.TgZ(13,"button",8),t.NdJ("click",function(){return e.params.do(e.actions.Rest,e.item)}),t._UZ(14,"mat-icon",9),t.TgZ(15,"span"),t._uU(16,"REST API"),t.qZA(),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return e.params.do(e.actions.Clone,e.item)}),t.TgZ(18,"mat-icon"),t._uU(19,"file_copy"),t.qZA(),t.TgZ(20,"span"),t._uU(21,"Copy"),t.qZA(),t.qZA(),t.TgZ(22,"button",8),t.NdJ("click",function(){return e.params.do(e.actions.Export,e.item)}),t.TgZ(23,"mat-icon"),t._uU(24,"cloud_download"),t.qZA(),t.TgZ(25,"span"),t._uU(26,"Export"),t.qZA(),t.qZA(),t.TgZ(27,"button",10),t.NdJ("click",function(){return e.params.do(e.actions.Delete,e.item)}),t.TgZ(28,"mat-icon"),t._uU(29,"delete"),t.qZA(),t.TgZ(30,"span"),t._uU(31,"Delete"),t.qZA(),t.qZA(),t.qZA()),2&n){var o=t.MAs(12);t.xp6(4),t.Q6J("ngIf",!e.item._EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",e.item._EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",!e.item._EditInfo.ReadOnly&&e.enablePermissions),t.xp6(1),t.Q6J("ngIf",e.item._EditInfo.ReadOnly||!e.enablePermissions),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(19),t.Q6J("disabled",e.item._EditInfo.ReadOnly)}},directives:[U.wG,_.$,T.Hw,Z.O5,y.p6,y.VK,y.OP,Q.k],encapsulation:2}),i}(),Lt=l(6805),Kt=function(){var i=function(){function a(n,e,o,s,r,p){var m=this;(0,h.Z)(this,a),this.router=n,this.route=e,this.pipelinesService=o,this.contentExportService=s,this.snackBar=r,this.dialogService=p,this.queries$=new D.X(null),this.modules=Y.F$,this.gridOptions=Object.assign(Object.assign({},K.f),{frameworkComponents:{idFieldComponent:nt.m,queriesActionsComponent:Ht},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(d){return"".concat(d.data._EditInfo.ReadOnly?"disabled":""," id-action no-padding no-outline")},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(d){return"ID: ".concat(d.Id,"\nGUID: ").concat(d.Guid)}}},{headerName:"Name",field:"Name",flex:2,minWidth:250,sortable:!0,cellClass:function(d){return d.data._EditInfo.ReadOnly?"no-outline":"primary-action highlight"},sort:"asc",filter:"agTextColumnFilter",onCellClicked:function(d){return m.openVisualQueryDesigner(d.data)}},{headerName:"Description",field:"Description",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:162,cellClass:"secondary-action no-padding",pinned:"right",cellRenderer:"queriesActionsComponent",cellRendererParams:{getEnablePermissions:this.enablePermissionsGetter.bind(this),do:this.doMenuAction.bind(this)}}]}),this.subscription=new x.w0}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.fetchQueries(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.queries$.complete(),this.subscription.unsubscribe()}},{key:"fetchQueries",value:function(){var e=this;this.pipelinesService.getAll(u.Z.contentTypes.query).subscribe(function(o){e.queries$.next(o)})}},{key:"importQuery",value:function(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}},{key:"doMenuAction",value:function(e,o){switch(e){case S.Edit:return this.editQuery(o);case S.Metadata:return this.openMetadata(o);case S.Rest:return this.router.navigate([et.i.getUrlQuery(o.Guid)],{relativeTo:this.route.firstChild});case S.Clone:return this.cloneQuery(o);case S.Permissions:return this.openPermissions(o);case S.Export:return this.exportQuery(o);case S.Delete:return this.deleteQuery(o)}}},{key:"editQuery",value:function(e){var s=(0,E.f)({items:[null==e?{ContentTypeName:u.Z.contentTypes.query,Prefill:{TestParameters:u.Z.pipelineDesigner.testParameters}}:{EntityId:e.Id}]});this.router.navigate(["edit/".concat(s)],{relativeTo:this.route.firstChild})}},{key:"enablePermissionsGetter",value:function(){return this.enablePermissions}},{key:"openVisualQueryDesigner",value:function(e){e._EditInfo.ReadOnly||this.dialogService.openQueryDesigner(e.Id)}},{key:"openMetadata",value:function(e){var o=H.U.getUrlEntity(e.Guid,"Metadata for Query: ".concat(e.Name," (").concat(e.Id,")"));this.router.navigate([o],{relativeTo:this.route.firstChild})}},{key:"cloneQuery",value:function(e){var o=this;this.snackBar.open("Copying..."),this.pipelinesService.clonePipeline(e.Id).subscribe(function(){o.snackBar.open("Copied",null,{duration:2e3}),o.fetchQueries()})}},{key:"openPermissions",value:function(e){this.router.navigate([L.i.getUrlEntity(e.Guid)],{relativeTo:this.route.firstChild})}},{key:"exportQuery",value:function(e){this.contentExportService.exportEntity(e.Id,"Query",!0)}},{key:"deleteQuery",value:function(e){var o=this;!confirm("Delete Pipeline '".concat(e.Name,"' (").concat(e.Id,")?"))||(this.snackBar.open("Deleting..."),this.pipelinesService.delete(e.Id).subscribe(function(s){o.snackBar.open("Deleted",null,{duration:2e3}),o.fetchQueries()}))}},{key:"refreshOnChildClosed",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,f.h)(function(o){return o instanceof g.m2}),(0,I.O)(!!this.route.snapshot.firstChild.firstChild),(0,C.U)(function(){return!!e.route.snapshot.firstChild.firstChild}),(0,w.G)(),(0,f.h)(function(o){var s=(0,A.Z)(o,2);return s[0]&&!s[1]})).subscribe(function(){e.fetchQueries()}))}}]),a}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(g.F0),t.Y36(g.gz),t.Y36(Lt.vG),t.Y36(rt.i),t.Y36(B.ux),t.Y36(X.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-queries"]],inputs:{enablePermissions:"enablePermissions"},decls:12,vars:6,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Import query",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Create a new query",1,"grid-fab",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"ag-grid-angular",1),t.NdJ("filesDropped",function(s){return e.importQuery(s)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return e.importQuery()}),t.TgZ(5,"mat-icon"),t._uU(6,"cloud_upload"),t.qZA(),t.TgZ(7,"span"),t._uU(8,"Query"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"button",4),t.NdJ("click",function(){return e.editQuery(null)}),t.TgZ(10,"mat-icon"),t._uU(11,"add"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,4,e.queries$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","json"))},directives:[z.N8,it.z,P.lW,_.$,T.Hw],pipes:[Z.Ov],styles:[""]}),i}(),Xt=l(1361);function jt(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){return t.CHM(n),t.oxw().openCode()}),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA(),t.qZA()}}function $t(i,a){1&i&&(t.TgZ(0,"div",11),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA(),t.qZA())}function te(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openMetadata()}),t.TgZ(1,"mat-icon",13),t._uU(2," local_offer "),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Metadata.length)("matBadgeHidden",!e.view.Metadata.length)}}function ee(i,a){if(1&i&&(t.TgZ(0,"div",11),t.TgZ(1,"mat-icon",14),t._uU(2," local_offer "),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",n.view.Metadata.length)("matBadgeHidden",!n.view.Metadata.length)}}function ne(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPermissions()}),t.TgZ(1,"mat-icon",13),t._uU(2," person "),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.xp6(1),t.Q6J("matBadge",e.view.Permissions.Count)("matBadgeHidden",!e.view.Permissions.Count)}}function ie(i,a){if(1&i&&(t.TgZ(0,"div",11),t.TgZ(1,"mat-icon",14),t._uU(2," person "),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",n.view.Permissions.Count)("matBadgeHidden",!n.view.Permissions.Count)}}var oe=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.params=e,this.view=this.params.data,this.enableCode=this.params.enableCodeGetter(),this.enablePermissions=this.params.enablePermissionsGetter()}},{key:"refresh",value:function(e){return!0}},{key:"openCode",value:function(){this.params.onOpenCode(this.view)}},{key:"openPermissions",value:function(){this.params.onOpenPermissions(this.view)}},{key:"openMetadata",value:function(){this.params.onOpenMetadata(this.view)}},{key:"cloneView",value:function(){this.params.onClone(this.view)}},{key:"exportView",value:function(){this.params.onExport(this.view)}},{key:"deleteView",value:function(){this.params.onDelete(this.view)}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-views-actions"]],decls:27,vars:8,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Metadata",3,"click",4,"ngIf"],["class","like-button highlight","matRipple","","tippy","Permissions",3,"click",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"],["matRipple","","tippy","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"],["matRipple","","tippy","Metadata",1,"like-button","highlight",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"],["matRipple","","tippy","Permissions",1,"like-button","highlight",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,jt,3,0,"div",1),t.YNc(2,$t,3,0,"div",2),t.YNc(3,te,3,2,"div",3),t.YNc(4,ee,3,2,"div",2),t.YNc(5,ne,3,2,"div",4),t.YNc(6,ie,3,2,"div",2),t.TgZ(7,"div",5),t.TgZ(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-menu",6,7),t.TgZ(12,"button",8),t.NdJ("click",function(){return e.cloneView()}),t.TgZ(13,"mat-icon"),t._uU(14,"file_copy"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Copy"),t.qZA(),t.qZA(),t.TgZ(17,"button",8),t.NdJ("click",function(){return e.exportView()}),t.TgZ(18,"mat-icon"),t._uU(19,"cloud_download"),t.qZA(),t.TgZ(20,"span"),t._uU(21,"Export"),t.qZA(),t.qZA(),t.TgZ(22,"button",9),t.NdJ("click",function(){return e.deleteView()}),t.TgZ(23,"mat-icon"),t._uU(24,"delete"),t.qZA(),t.TgZ(25,"span"),t._uU(26,"Delete"),t.qZA(),t.qZA(),t.qZA()),2&n){var o=t.MAs(11);t.xp6(1),t.Q6J("ngIf",!e.view.EditInfo.ReadOnly&&e.enableCode),t.xp6(1),t.Q6J("ngIf",e.view.EditInfo.ReadOnly||!e.enableCode),t.xp6(1),t.Q6J("ngIf",!e.view.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",e.view.EditInfo.ReadOnly),t.xp6(1),t.Q6J("ngIf",!e.view.EditInfo.ReadOnly&&e.enablePermissions),t.xp6(1),t.Q6J("ngIf",e.view.EditInfo.ReadOnly||!e.enablePermissions),t.xp6(1),t.Q6J("matMenuTriggerFor",o),t.xp6(15),t.Q6J("disabled",e.view.EditInfo.ReadOnly)}},directives:[Z.O5,U.wG,_.$,y.p6,T.Hw,y.VK,y.OP,Q.k],styles:[""]}),i}();function ae(i,a){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"visibility"),t.qZA())}function se(i,a){1&i&&(t.TgZ(0,"mat-icon"),t._uU(1,"visibility_off"),t.qZA())}var re=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.value=e.value}},{key:"refresh",value:function(e){return!0}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-views-show"]],decls:3,vars:2,consts:[[1,"icon-container"],[4,"ngIf"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,ae,2,0,"mat-icon",1),t.YNc(2,se,2,0,"mat-icon",1),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.value),t.xp6(1),t.Q6J("ngIf",!e.value))},directives:[Z.O5,T.Hw],styles:[""]}),i}();function ct(i){var a="",n="";return i.HasQuery?(a="Data (from query)",n="filter_list"):i.List?(a="Items (list)",n="format_list_numbered"):i.ContentType||i.HasQuery?i.List||(a="Item (one)",n="looks_one"):(a="Code",n="check_box_outline_blank"),{value:a,icon:n}}var le=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.value=e.value;var s=ct(e.data);this.icon=s.icon}},{key:"refresh",value:function(e){return!0}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-views-type"]],decls:3,vars:2,consts:[[1,"icon-container",3,"tippy"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-icon"),t._uU(2),t.qZA(),t.qZA()),2&n&&(t.Q6J("tippy",e.value),t.xp6(2),t.Oqu(e.icon))},directives:[_.$,T.Hw],styles:[""]}),i}(),pe=l(6559),ce=function(){var i=function(){function a(n,e,o,s,r){var p=this;(0,h.Z)(this,a),this.viewsService=n,this.router=e,this.route=o,this.snackBar=s,this.dialogService=r,this.views$=new D.X(null),this.polymorphStatus$=new D.X(""),this.polymorphLogo="data:image/png;base64,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",this.modules=Y.F$,this.gridOptions=Object.assign(Object.assign({},K.f),{frameworkComponents:{idFieldComponent:nt.m,booleanFilterComponent:Xt.U,viewsTypeComponent:le,viewsShowComponent:re,viewsActionsComponent:oe},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(c){return"".concat(c.data.EditInfo.ReadOnly?"disabled":""," id-action no-padding no-outline")},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(c){return"ID: ".concat(c.Id,"\nGUID: ").concat(c.Guid)}}},{headerName:"Show",field:"IsHidden",width:70,headerClass:"dense",cellClass:"no-outline",cellRenderer:"viewsShowComponent",sortable:!0,filter:"booleanFilterComponent",valueGetter:this.showValueGetter},{headerName:"Name",field:"Name",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editView.bind(this)},{headerName:"Type",field:"Type",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"viewsTypeComponent",valueGetter:this.typeValueGetter},{headerName:"Used",field:"Used",width:70,headerClass:"dense",cellClass:"primary-action highlight",sortable:!0,filter:"agNumberColumnFilter",onCellClicked:function(c){p.openUsage(c)}},{headerName:"Url Key",field:"ViewNameInUrl",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Path",field:"TemplatePath",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Content",field:"ContentType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ContentType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.contentDemoValueGetter},{headerName:"Presentation",field:"PresentationType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"PresentationType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.presentationDemoValueGetter},{headerName:"Header",field:"ListContentType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ListContentType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.headerDemoValueGetter},{headerName:"Header Presentation",field:"ListPresentationType.Name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Default",field:"ListPresentationType.DemoId",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.headerPresDemoValueGetter},{width:162,cellClass:"secondary-action no-padding",cellRenderer:"viewsActionsComponent",pinned:"right",cellRendererParams:{enableCodeGetter:this.enableCodeGetter.bind(this),enablePermissionsGetter:this.enablePermissionsGetter.bind(this),onOpenCode:this.openCode.bind(this),onOpenPermissions:this.openPermissions.bind(this),onOpenMetadata:this.openMetadata.bind(this),onClone:this.cloneView.bind(this),onExport:this.exportView.bind(this),onDelete:this.deleteView.bind(this)}}]}),this.subscription=new x.w0}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.fetchTemplates(),this.fetchPolymorphism(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.views$.complete(),this.polymorphStatus$.complete(),this.subscription.unsubscribe()}},{key:"importView",value:function(e){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:e}})}},{key:"fetchTemplates",value:function(){var e=this;this.viewsService.getAll().subscribe(function(o){e.views$.next(o)})}},{key:"fetchPolymorphism",value:function(){var e=this;this.viewsService.getPolymorphism().subscribe(function(o){e.polymorphism=o,e.polymorphStatus$.next(null===o.Id?"not configured":null===o.Resolver?"disabled":"using "+o.Resolver)})}},{key:"editView",value:function(e){var o=null==e?void 0:e.data,s={items:[null==o?{ContentTypeName:u.Z.contentTypes.template,Prefill:Object.assign({},this.appIsGlobal&&{Location:"Global"})}:{EntityId:o.Id}]},r=(0,E.f)(s);this.router.navigate(["edit/".concat(r)],{relativeTo:this.route.firstChild})}},{key:"editPolymorphisms",value:function(){if(this.polymorphism){var o=(0,E.f)({items:[this.polymorphism.Id?{EntityId:this.polymorphism.Id}:{ContentTypeName:this.polymorphism.TypeName}]});this.router.navigate(["edit/".concat(o)],{relativeTo:this.route.firstChild})}}},{key:"showValueGetter",value:function(e){return!e.data.IsHidden}},{key:"typeValueGetter",value:function(e){return ct(e.data).value}},{key:"enableCodeGetter",value:function(){return this.enableCode}},{key:"enablePermissionsGetter",value:function(){return this.enablePermissions}},{key:"contentDemoValueGetter",value:function(e){var o=e.data;return"".concat(o.ContentType.DemoId," ").concat(o.ContentType.DemoTitle)}},{key:"presentationDemoValueGetter",value:function(e){var o=e.data;return"".concat(o.PresentationType.DemoId," ").concat(o.PresentationType.DemoTitle)}},{key:"headerDemoValueGetter",value:function(e){var o=e.data;return"".concat(o.ListContentType.DemoId," ").concat(o.ListContentType.DemoTitle)}},{key:"headerPresDemoValueGetter",value:function(e){var o=e.data;return"".concat(o.ListPresentationType.DemoId," ").concat(o.ListPresentationType.DemoTitle)}},{key:"openUsage",value:function(e){this.router.navigate(["usage/".concat(e.data.Guid)],{relativeTo:this.route.firstChild})}},{key:"openCode",value:function(e){this.dialogService.openCodeFile(e.TemplatePath,e.Id,e.IsShared)}},{key:"openPermissions",value:function(e){this.router.navigate([L.i.getUrlEntity(e.Guid)],{relativeTo:this.route.firstChild})}},{key:"openMetadata",value:function(e){var o=H.U.getUrlEntity(e.Guid,"Metadata for View: ".concat(e.Name," (").concat(e.Id,")"));this.router.navigate([o],{relativeTo:this.route.firstChild})}},{key:"cloneView",value:function(e){var s=(0,E.f)({items:[{ContentTypeName:u.Z.contentTypes.template,DuplicateEntity:e.Id}]});this.router.navigate(["edit/".concat(s)],{relativeTo:this.route.firstChild})}},{key:"exportView",value:function(e){this.viewsService.export(e.Id)}},{key:"deleteView",value:function(e){var o=this;!confirm("Delete '".concat(e.Name,"' (").concat(e.Id,")?"))||(this.snackBar.open("Deleting..."),this.viewsService.delete(e.Id).subscribe(function(s){o.snackBar.open("Deleted",null,{duration:2e3}),o.fetchTemplates()}))}},{key:"refreshOnChildClosed",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,f.h)(function(o){return o instanceof g.m2}),(0,I.O)(!!this.route.snapshot.firstChild.firstChild),(0,C.U)(function(){return!!e.route.snapshot.firstChild.firstChild}),(0,w.G)(),(0,f.h)(function(o){var s=(0,A.Z)(o,2);return s[0]&&!s[1]})).subscribe(function(){e.fetchTemplates(),e.fetchPolymorphism()}))}}]),a}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(pe.h),t.Y36(g.F0),t.Y36(g.gz),t.Y36(B.ux),t.Y36(X.x))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-views"]],inputs:{enableCode:"enableCode",enablePermissions:"enablePermissions",appIsGlobal:"appIsGlobal",appIsInherited:"appIsInherited"},decls:17,vars:11,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Configure polymorphism",1,"polymorph-button",3,"disabled","click"],[1,"polymorph-logo",3,"src"],["mat-button","","tippy","Import view",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Create a new view",1,"grid-fab",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"ag-grid-angular",1),t.NdJ("filesDropped",function(s){return e.importView(s)}),t.ALo(2,"async"),t.qZA(),t.TgZ(3,"div",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return e.editPolymorphisms()}),t._UZ(5,"img",4),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"async"),t.qZA(),t.qZA(),t.TgZ(9,"button",5),t.NdJ("click",function(){return e.importView()}),t.TgZ(10,"mat-icon"),t._uU(11,"cloud_upload"),t.qZA(),t.TgZ(12,"span"),t._uU(13,"View"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(14,"button",6),t.NdJ("click",function(){return e.editView(null)}),t.TgZ(15,"mat-icon"),t._uU(16,"add"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,7,e.views$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","json"),t.xp6(3),t.Q6J("disabled",e.appIsInherited),t.xp6(1),t.Q6J("src",e.polymorphLogo,t.LSH),t.xp6(2),t.hij("Polymorphism ",t.lcZ(8,9,e.polymorphStatus$),""))},directives:[z.N8,it.z,P.lW,_.$,T.Hw],pipes:[Z.Ov],styles:[".polymorph-logo[_ngcontent-%COMP%]{width:24px;height:24px;margin-right:4px}.polymorph-button[disabled][_ngcontent-%COMP%]   .polymorph-logo[_ngcontent-%COMP%]{opacity:33%;filter:grayscale(1)}"]}),i}(),ue=l(4909);function de(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",8),t.NdJ("click",function(){return t.CHM(n),t.oxw().openCode()}),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA(),t.qZA()}}function me(i,a){1&i&&(t.TgZ(0,"div",9),t.TgZ(1,"mat-icon"),t._uU(2,"code"),t.qZA(),t.qZA())}var ge=function(){var i=function(){function a(){(0,h.Z)(this,a)}return(0,v.Z)(a,[{key:"agInit",value:function(e){this.params=e,this.enableCode=this.params.enableCodeGetter()}},{key:"refresh",value:function(e){return!0}},{key:"openCode",value:function(){this.params.onOpenCode(this.params.data)}},{key:"openRestApi",value:function(){this.params.onOpenRestApi(this.params.data)}}]),a}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-web-api-actions"]],decls:12,vars:3,consts:[[1,"actions-component"],["class","like-button highlight","matRipple","","tippy","Code",3,"click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["svgIcon","code-curly"],["matRipple","","tippy","Code",1,"like-button","highlight",3,"click"],[1,"like-button","disabled"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.YNc(1,de,3,0,"div",1),t.YNc(2,me,3,0,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"mat-icon"),t._uU(5,"more_horiz"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"mat-menu",4,5),t.TgZ(8,"button",6),t.NdJ("click",function(){return e.openRestApi()}),t._UZ(9,"mat-icon",7),t.TgZ(10,"span"),t._uU(11,"REST API"),t.qZA(),t.qZA(),t.qZA()),2&n){var o=t.MAs(7);t.xp6(1),t.Q6J("ngIf",e.enableCode),t.xp6(1),t.Q6J("ngIf",!e.enableCode),t.xp6(1),t.Q6J("matMenuTriggerFor",o)}},directives:[Z.O5,U.wG,_.$,y.p6,T.Hw,y.VK,y.OP],styles:[""]}),i}(),fe=l(8494),he=function(){var i=function(){function a(n,e,o,s,r,p,m){(0,h.Z)(this,a),this.webApisService=n,this.snackBar=e,this.dialogService=o,this.router=s,this.route=r,this.dialog=p,this.viewContainerRef=m,this.webApis$=new D.X(null),this.modules=Y.F$,this.gridOptions=Object.assign(Object.assign({},K.f),{frameworkComponents:{webApiActions:ge},columnDefs:[{headerName:"Folder",field:"folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter"},{headerName:"Name",field:"name",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:82,cellClass:"secondary-action no-padding",cellRenderer:"webApiActions",pinned:"right",cellRendererParams:{enableCodeGetter:this.enableCodeGetter.bind(this),onOpenCode:this.openCode.bind(this),onOpenRestApi:this.openRestApi.bind(this)}}]})}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.fetchWebApis()}},{key:"ngOnDestroy",value:function(){this.webApis$.complete()}},{key:"createController",value:function(){var e=this;this.dialog.open(ue.U,{autoFocus:!1,data:{folder:"api",purpose:"Api"},viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(r){if(r){if(r.name.endsWith("Controller.cs")){var p=r.name.substring(r.name.lastIndexOf("/")+1);if(!/^[A-Z][a-zA-Z0-9]*Controller\.cs$/g.test(p)){var m='"'.concat(p,'" is invalid controller name. Should be something like "MyController.cs"');return void e.snackBar.open(m,null,{duration:5e3})}}e.snackBar.open("Saving..."),e.webApisService.create(r.name,r.templateKey).subscribe(function(){e.snackBar.open("Saved",null,{duration:2e3}),e.fetchWebApis()})}})}},{key:"fetchWebApis",value:function(){var e=this;this.webApisService.getAll().subscribe(function(o){e.webApis$.next(o)})}},{key:"enableCodeGetter",value:function(){return this.enableCode}},{key:"openCode",value:function(e){this.dialogService.openCodeFile(e.path)}},{key:"openRestApi",value:function(e){this.router.navigate([et.i.getUrlWebApi(e)],{relativeTo:this.route.firstChild})}}]),a}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(fe.n),t.Y36(B.ux),t.Y36(X.x),t.Y36(g.F0),t.Y36(g.gz),t.Y36(tt.uw),t.Y36(t.s_b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-web-api"]],inputs:{enableCode:"enableCode"},decls:7,vars:5,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new controller",1,"grid-fab",3,"click"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._UZ(1,"ag-grid-angular",1),t.ALo(2,"async"),t._UZ(3,"div",2),t.TgZ(4,"button",3),t.NdJ("click",function(){return e.createController()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("rowData",t.lcZ(2,3,e.webApis$))("modules",e.modules)("gridOptions",e.gridOptions))},directives:[z.N8,P.lW,_.$,T.Hw],pipes:[Z.Ov],styles:[""]}),i}(),j=l(1640),$=l(745),ve=l(803),Ce=l(4722),Ze=l(6307),Ae=l(8598),Te=l(7854),_e=l(2372),ye=l(7003),be={Settings:"Settings",Resources:"Resources"},R=l(1961);function ke(i,a){1&i&&(t.ynx(0),t._uU(1," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. "),t.BQk())}function De(i,a){1&i&&(t.ynx(0),t._uU(1," This is the Primary App of this Site. You can also configure sitewide settings and resources here. "),t.BQk())}function xe(i,a){if(1&i&&(t.TgZ(0,"div",16),t.YNc(1,ke,2,0,"ng-container",6),t.YNc(2,De,2,0,"ng-container",6),t._uU(3," See "),t.TgZ(4,"a",4),t._uU(5,"docs"),t.qZA(),t._uU(6,".\n"),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isGlobal),t.xp6(1),t.Q6J("ngIf",n.isPrimary)}}function Se(i,a){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Global"),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"button",17),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.edit(s.eavConstants.contentTypes.systemSettings,s.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7," edit "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",18),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.fixContentType(s.eavConstants.contentTypes.customSettings,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11," edit "),t.qZA(),t.qZA(),t.TgZ(12,"button",19),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.fixContentType(s.eavConstants.contentTypes.customSettings,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14," dns "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){var e=t.oxw();t.xp6(6),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null)}}function Ie(i,a){1&i&&t.GkF(0)}function qe(i,a){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Site"),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"button",20),t.NdJ("click",function(){t.CHM(n);var r=t.oxw();return r.edit(r.eavConstants.contentTypes.systemSettings,r.SystemSettingsScopes.Site)}),t.TgZ(6,"mat-icon",13),t._uU(7," edit "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",21),t.NdJ("click",function(){t.CHM(n);var r=t.oxw();return r.fixContentType(r.eavConstants.contentTypes.customSettings,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11," edit "),t.qZA(),t.qZA(),t.TgZ(12,"button",22),t.NdJ("click",function(){t.CHM(n);var r=t.oxw();return r.fixContentType(r.eavConstants.contentTypes.customSettings,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14," dns "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,Ie,1,0,"ng-container",23),t.BQk()}if(2&i){var e=t.oxw(),o=t.MAs(65);t.xp6(6),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",o)}}function we(i,a){1&i&&t.GkF(0)}function Ee(i,a){1&i&&t.GkF(0)}function Ue(i,a){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"button",24),t.NdJ("click",function(){t.CHM(n);var p=t.oxw();return p.edit(p.eavConstants.contentTypes.systemSettings,p.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7," edit "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",25),t.NdJ("click",function(){t.CHM(n);var p=t.oxw();return p.edit(p.eavConstants.contentTypes.settings)}),t.TgZ(10,"mat-icon",13),t._uU(11," edit "),t.qZA(),t.qZA(),t.TgZ(12,"button",26),t.NdJ("click",function(){t.CHM(n);var p=t.oxw();return p.config(p.eavConstants.contentTypes.settings)}),t.TgZ(13,"mat-icon",13),t._uU(14," dns "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,we,1,0,"ng-container",23),t.YNc(16,Ee,1,0,"ng-container",23),t.BQk()}if(2&i){var e=t.oxw(),o=t.MAs(67),s=t.MAs(65);t.xp6(3),t.Oqu(e.dialogSettings.Context.App.Name),t.xp6(3),t.Q6J("matBadge",e.systemSettingsCount||null),t.xp6(4),t.Q6J("matBadge",e.customSettingsCount||null),t.xp6(3),t.Q6J("matBadge",e.customSettingsFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Fe(i,a){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Global"),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"button",27),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.edit(s.eavConstants.contentTypes.systemResources,s.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7," edit "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",28),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.fixContentType(s.eavConstants.contentTypes.customResources,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11," edit "),t.qZA(),t.qZA(),t.TgZ(12,"button",29),t.NdJ("click",function(){t.CHM(n);var s=t.oxw();return s.fixContentType(s.eavConstants.contentTypes.customResources,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14," dns "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){var e=t.oxw();t.xp6(6),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null)}}function Ne(i,a){1&i&&t.GkF(0)}function Je(i,a){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3,"Site"),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"button",30),t.NdJ("click",function(){t.CHM(n);var r=t.oxw();return r.edit(r.eavConstants.contentTypes.systemResources,r.SystemSettingsScopes.Site)}),t.TgZ(6,"mat-icon",13),t._uU(7," edit "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",31),t.NdJ("click",function(){t.CHM(n);var r=t.oxw();return r.fixContentType(r.eavConstants.contentTypes.customResources,"edit")}),t.TgZ(10,"mat-icon",13),t._uU(11," edit "),t.qZA(),t.qZA(),t.TgZ(12,"button",32),t.NdJ("click",function(){t.CHM(n);var r=t.oxw();return r.fixContentType(r.eavConstants.contentTypes.customResources,"config")}),t.TgZ(13,"mat-icon",13),t._uU(14," dns "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,Ne,1,0,"ng-container",23),t.BQk()}if(2&i){var e=t.oxw(),o=t.MAs(65);t.xp6(6),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",o)}}function Pe(i,a){1&i&&t.GkF(0)}function Oe(i,a){1&i&&t.GkF(0)}function Qe(i,a){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"tr"),t.TgZ(2,"th"),t._uU(3),t.qZA(),t.TgZ(4,"td"),t.TgZ(5,"button",33),t.NdJ("click",function(){t.CHM(n);var p=t.oxw();return p.edit(p.eavConstants.contentTypes.systemResources,p.SystemSettingsScopes.App)}),t.TgZ(6,"mat-icon",13),t._uU(7," edit "),t.qZA(),t.qZA(),t.qZA(),t.TgZ(8,"td"),t.TgZ(9,"button",34),t.NdJ("click",function(){t.CHM(n);var p=t.oxw();return p.edit(p.eavConstants.contentTypes.resources)}),t.TgZ(10,"mat-icon",13),t._uU(11," edit "),t.qZA(),t.qZA(),t.TgZ(12,"button",35),t.NdJ("click",function(){t.CHM(n);var p=t.oxw();return p.config(p.eavConstants.contentTypes.resources)}),t.TgZ(13,"mat-icon",13),t._uU(14," dns "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(15,Pe,1,0,"ng-container",23),t.YNc(16,Oe,1,0,"ng-container",23),t.BQk()}if(2&i){var e=t.oxw(),o=t.MAs(67),s=t.MAs(65);t.xp6(3),t.Oqu(e.dialogSettings.Context.App.Name),t.xp6(3),t.Q6J("matBadge",e.systemResourcesCount||null),t.xp6(4),t.Q6J("matBadge",e.customResourcesCount||null),t.xp6(3),t.Q6J("matBadge",e.customResourcesFieldsCount||null),t.xp6(2),t.Q6J("ngTemplateOutlet",o),t.xp6(1),t.Q6J("ngTemplateOutlet",s)}}function Be(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Global"),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"button",36),t.NdJ("click",function(){return t.CHM(n),t.oxw().openGlobalSettings()}),t.TgZ(5,"mat-icon"),t._uU(6,"open_in_new"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Re(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"th"),t._uU(2,"Site"),t.qZA(),t.TgZ(3,"td"),t.TgZ(4,"button",37),t.NdJ("click",function(){return t.CHM(n),t.oxw().openSiteSettings()}),t.TgZ(5,"mat-icon"),t._uU(6,"open_in_new"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}}function Me(i,a){1&i&&(t.ynx(0),t._uU(1," (not available on Global App) "),t.BQk())}function Ve(i,a){1&i&&(t.ynx(0),t._uU(1," (not available on Content App) "),t.BQk())}function Ge(i,a){if(1&i&&(t.ynx(0),t.YNc(1,Me,2,0,"ng-container",6),t.YNc(2,Ve,2,0,"ng-container",6),t.BQk()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("ngIf",n.isGlobal),t.xp6(1),t.Q6J("ngIf",n.isApp)}}function We(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openLanguagePermissions()}),t.TgZ(1,"mat-icon"),t._uU(2,"person"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Language Permissions"),t.qZA(),t.qZA()}}var Ye=function(){var i=function(){function a(n,e,o,s,r,p,m,c,d,b,k,F,M){(0,h.Z)(this,a),this.contentItemsService=n,this.router=e,this.route=o,this.context=s,this.exportAppService=r,this.importAppPartsService=p,this.snackBar=m,this.dialogService=c,this.changeDetectorRef=d,this.contentTypesFieldsService=b,this.metadataService=k,this.contentTypesService=F,this.globalConfigService=M,this.eavConstants=u.Z,this.AnalyzeParts=be,this.SystemSettingsScopes=u.x,this.AppScopes=O,this.debugEnabled$=this.globalConfigService.getDebugEnabled$()}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.subscription=new x.w0,this.fetchSettings(),this.refreshOnChildClosed()}},{key:"ngOnChanges",value:function(e){null!=e.dialogSettings&&(this.isGlobal=this.dialogSettings.Context.App.SettingsScope===O.Global,this.isPrimary=this.dialogSettings.Context.App.SettingsScope===O.Site,this.isApp=this.dialogSettings.Context.App.SettingsScope===O.App)}},{key:"ngOnDestroy",value:function(){this.snackBar.dismiss(),this.subscription.unsubscribe()}},{key:"edit",value:function(e,o){var s=this;this.contentItemsService.getAll(e).subscribe(function(r){var p;switch(e){case u.Z.contentTypes.systemSettings:case u.Z.contentTypes.systemResources:var m=r.filter(function(k){return o===u.x.App?!k.SettingsEntityScope:k.SettingsEntityScope===u.x.Site});if(m.length>1)throw new Error("Found too many settings for type ".concat(e));var c=m[0];p={items:[null==c?{ContentTypeName:e,Prefill:Object.assign({},o===u.x.Site&&{SettingsEntityScope:u.x.Site})}:{EntityId:c.Id}]};break;case u.Z.contentTypes.customSettings:case u.Z.contentTypes.customResources:if(r.length>1)throw new Error("Found too many settings for type ".concat(e));var d=r[0];p={items:[null==d?{ContentTypeName:e}:{EntityId:d.Id}]};break;default:if(r.length<1)throw new Error("Found no settings for type ".concat(e));if(r.length>1)throw new Error("Found too many settings for type ".concat(e));p={items:[{EntityId:r[0].Id}]}}var b=(0,E.f)(p);s.router.navigate(["edit/".concat(b)],{relativeTo:s.route.firstChild})})}},{key:"openMetadata",value:function(){var e=H.U.getUrlApp(this.context.appId,"Metadata for App: ".concat(this.dialogSettings.Context.App.Name," (").concat(this.context.appId,")"));this.router.navigate([e],{relativeTo:this.route.firstChild})}},{key:"openSiteSettings",value:function(){var e=this.dialogSettings.Context.Site.PrimaryApp;this.dialogService.openAppAdministration(e.ZoneId,e.AppId,"app")}},{key:"openGlobalSettings",value:function(){var e=this.dialogSettings.Context.System.PrimaryApp;this.dialogService.openAppAdministration(e.ZoneId,e.AppId,"app")}},{key:"config",value:function(e){this.router.navigate(["fields/".concat(e)],{relativeTo:this.route.firstChild})}},{key:"openPermissions",value:function(){this.router.navigate([L.i.getUrlApp(this.context.appId)],{relativeTo:this.route.firstChild})}},{key:"openLanguagePermissions",value:function(){this.router.navigate(["language-permissions"],{relativeTo:this.route.firstChild})}},{key:"exportApp",value:function(){this.router.navigate(["export"],{relativeTo:this.route.firstChild})}},{key:"exportParts",value:function(){this.router.navigate(["export/parts"],{relativeTo:this.route.firstChild})}},{key:"importParts",value:function(){this.router.navigate(["import/parts"],{relativeTo:this.route.firstChild})}},{key:"exportAppXml",value:function(){var e=this;this.snackBar.open("Exporting..."),this.exportAppService.exportForVersionControl(!0,!1).subscribe({next:function(s){e.snackBar.open("Export done. Please check your '.data' folder",null,{duration:3e3})},error:function(s){e.snackBar.open("Export failed. Please check console for more information",null,{duration:3e3})}})}},{key:"resetApp",value:function(){var e=this;!confirm("Are you sure? All changes since last xml export will be lost")||(this.snackBar.open("Resetting..."),this.importAppPartsService.resetApp().subscribe({next:function(s){e.snackBar.open("Reset worked! Since this is a complex operation, please restart the Website to ensure all caches are correct",null,{duration:3e4})},error:function(s){e.snackBar.open("Reset failed. Please check console for more information",null,{duration:3e3})}}))}},{key:"analyze",value:function(e){this.router.navigate(["analyze/".concat(e)],{relativeTo:this.route.firstChild})}},{key:"fetchSettings",value:function(){var e=this;this.contentTypesService.retrieveContentTypes(u.Z.scopes.configuration.value).subscribe(function(o){var s=o.some(function(p){return p.Name===u.Z.contentTypes.customSettings}),r=o.some(function(p){return p.Name===u.Z.contentTypes.customResources});(0,j.D)([(0,j.D)([e.contentItemsService.getAll(u.Z.contentTypes.systemSettings),e.isGlobal||e.isPrimary?s?e.contentItemsService.getAll(u.Z.contentTypes.customSettings):(0,$.of)(void 0):e.contentItemsService.getAll(u.Z.contentTypes.settings),e.isGlobal||e.isPrimary?s?e.contentTypesFieldsService.getFields(u.Z.contentTypes.customSettings):(0,$.of)(void 0):e.contentTypesFieldsService.getFields(u.Z.contentTypes.settings)]),(0,j.D)([e.contentItemsService.getAll(u.Z.contentTypes.systemResources),e.isGlobal||e.isPrimary?r?e.contentItemsService.getAll(u.Z.contentTypes.customResources):(0,$.of)(void 0):e.contentItemsService.getAll(u.Z.contentTypes.resources),e.isGlobal||e.isPrimary?r?e.contentTypesFieldsService.getFields(u.Z.contentTypes.customResources):(0,$.of)(void 0):e.contentTypesFieldsService.getFields(u.Z.contentTypes.resources)]),(0,j.D)([e.contentItemsService.getAll(u.Z.contentTypes.appConfiguration),e.metadataService.getMetadata(u.Z.metadata.app.targetType,u.Z.metadata.app.keyType,e.context.appId)])]).subscribe(function(p){var m=(0,A.Z)(p,3),c=(0,A.Z)(m[0],3),d=c[0],b=c[1],k=c[2],F=(0,A.Z)(m[1],3),M=F[0],V=F[1],G=F[2],ut=(0,A.Z)(m[2],2),mn=ut[0],gn=ut[1];e.systemSettingsCount=e.isPrimary?d.filter(function(N){return N.SettingsEntityScope===u.x.Site}).length:d.filter(function(N){return!N.SettingsEntityScope}).length,e.customSettingsCount=null==b?void 0:b.length,e.customSettingsFieldsCount=null==k?void 0:k.length,e.systemResourcesCount=e.isPrimary?M.filter(function(N){return N.SettingsEntityScope===u.x.Site}).length:M.filter(function(N){return!N.SettingsEntityScope}).length,e.customResourcesCount=null==V?void 0:V.length,e.customResourcesFieldsCount=null==G?void 0:G.length,e.appConfigurationsCount=mn.length,e.appMetadataCount=gn.Items.length,e.changeDetectorRef.markForCheck()})})}},{key:"refreshOnChildClosed",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,f.h)(function(o){return o instanceof g.m2}),(0,I.O)(!!this.route.snapshot.firstChild.firstChild),(0,C.U)(function(){return!!e.route.snapshot.firstChild.firstChild}),(0,w.G)(),(0,f.h)(function(o){var s=(0,A.Z)(o,2);return s[0]&&!s[1]})).subscribe(function(){e.fetchSettings()}))}},{key:"fixContentType",value:function(e,o){var s=this;this.contentTypesService.retrieveContentTypes(u.Z.scopes.configuration.value).subscribe(function(r){r.some(function(c){return c.Name===e})?"edit"===o?s.edit(e):"config"===o&&s.config(e):s.contentTypesService.save({StaticName:"",Name:e,Description:"",Scope:u.Z.scopes.configuration.value,ChangeStaticName:!1,NewStaticName:""}).subscribe(function(c){!c||("edit"===o?s.edit(e):"config"===o&&s.config(e))})})}}]),a}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(ve.l),t.Y36(g.F0),t.Y36(g.gz),t.Y36(Ae._),t.Y36(_e.v),t.Y36(ye.z),t.Y36(B.ux),t.Y36(X.x),t.Y36(t.sBO),t.Y36(Ce.Mr),t.Y36(Ze.Do),t.Y36(Te.sF),t.Y36(st.bE))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-app-configuration"]],inputs:{dialogSettings:"dialogSettings"},features:[t.TTD],decls:167,vars:15,consts:[["class","alert alert-info scope-info",4,"ngIf"],[1,"cards-box"],[1,"mat-elevation-z2"],[1,"mat-card-header-icon"],["href","http://r.2sxc.org/settings","target","_blank"],[1,"settings"],[4,"ngIf"],[1,"actions-row"],["mat-button","","tippy","See the result of combining all settings",3,"click"],["mat-button","","tippy","See the result of combining all resources",3,"click"],["goToGlobal",""],["goToSite",""],["mat-button","",3,"click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge"],["mat-button","",3,"disabled","click"],["mat-button","",3,"click",4,"ngIf"],[1,"alert","alert-info","scope-info"],["mat-button","","tippy","Edit global system settings",3,"click"],["mat-button","","tippy","Edit custom global settings",3,"click"],["mat-button","","tippy","Configure fields of the custom global settings",3,"click"],["mat-button","","tippy","Edit site system settings",3,"click"],["mat-button","","tippy","Edit custom site settings",3,"click"],["mat-button","","tippy","Configure fields of the custom site settings",3,"click"],[4,"ngTemplateOutlet"],["mat-button","","tippy","Edit app system settings",3,"click"],["mat-button","","tippy","Edit custom app settings",3,"click"],["mat-button","","tippy","Configure fields of the custom app settings",3,"click"],["mat-button","","tippy","Edit global system resources",3,"click"],["mat-button","","tippy","Edit custom global resources",3,"click"],["mat-button","","tippy","Configure fields of the custom global resources",3,"click"],["mat-button","","tippy","Edit site system resources",3,"click"],["mat-button","","tippy","Edit custom site resources",3,"click"],["mat-button","","tippy","Configure fields of the custom site resources",3,"click"],["mat-button","","tippy","Edit app system resources",3,"click"],["mat-button","","tippy","Edit custom app resources",3,"click"],["mat-button","","tippy","Configure fields of the custom app resources",3,"click"],["mat-button","","tippy","Go to global",3,"click"],["mat-button","","tippy","Go to site",3,"click"]],template:function(n,e){1&n&&(t.YNc(0,xe,7,2,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-card",2),t.TgZ(3,"mat-card-header"),t.TgZ(4,"mat-card-title"),t._uU(5,"Settings"),t.qZA(),t.TgZ(6,"div",3),t.TgZ(7,"mat-icon"),t._uU(8,"settings"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(9,"mat-card-content"),t.TgZ(10,"p"),t._uU(11,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),t.TgZ(12,"a",4),t._uU(13,"docs"),t.qZA(),t.qZA(),t.TgZ(14,"table",5),t.TgZ(15,"thead"),t.TgZ(16,"tr"),t._UZ(17,"th"),t.TgZ(18,"th"),t._uU(19,"System Settings"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"Custom Settings"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(22,"tbody"),t.YNc(23,Se,15,3,"ng-container",6),t.YNc(24,qe,16,4,"ng-container",6),t.YNc(25,Ue,17,6,"ng-container",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"mat-card-actions"),t.TgZ(27,"div",7),t.TgZ(28,"button",8),t.NdJ("click",function(){return e.analyze(e.AnalyzeParts.Settings)}),t.TgZ(29,"mat-icon"),t._uU(30,"manage_search"),t.qZA(),t.TgZ(31,"span"),t._uU(32,"Analyze Combined Settings"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(33,"mat-card",2),t.TgZ(34,"mat-card-header"),t.TgZ(35,"mat-card-title"),t._uU(36,"Language Resources (i18n)"),t.qZA(),t.TgZ(37,"div",3),t.TgZ(38,"mat-icon"),t._uU(39,"translate"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(40,"mat-card-content"),t.TgZ(41,"p"),t._uU(42," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),t.TgZ(43,"a",4),t._uU(44,"docs"),t.qZA(),t.qZA(),t.TgZ(45,"table",5),t.TgZ(46,"thead"),t.TgZ(47,"tr"),t._UZ(48,"th"),t.TgZ(49,"th"),t._uU(50,"System Resources"),t.qZA(),t.TgZ(51,"th"),t._uU(52,"Custom Resources"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(53,"tbody"),t.YNc(54,Fe,15,3,"ng-container",6),t.YNc(55,Je,16,4,"ng-container",6),t.YNc(56,Qe,17,6,"ng-container",6),t.qZA(),t.qZA(),t.qZA(),t.TgZ(57,"mat-card-actions"),t.TgZ(58,"div",7),t.TgZ(59,"button",9),t.NdJ("click",function(){return e.analyze(e.AnalyzeParts.Resources)}),t.TgZ(60,"mat-icon"),t._uU(61,"manage_search"),t.qZA(),t.TgZ(62,"span"),t._uU(63,"Analyze Combined Resources"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.YNc(64,Be,7,0,"ng-template",null,10,t.W1O),t.YNc(66,Re,7,0,"ng-template",null,11,t.W1O),t.qZA(),t.TgZ(68,"div",1),t.TgZ(69,"mat-card",2),t.TgZ(70,"mat-card-header"),t.TgZ(71,"mat-card-title"),t._uU(72,"App Configuration"),t.qZA(),t.TgZ(73,"div",3),t.TgZ(74,"mat-icon"),t._uU(75,"redeem"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(76,"mat-card-content"),t._uU(77," App name, folder, version and more. "),t.qZA(),t.TgZ(78,"mat-card-actions"),t.TgZ(79,"button",12),t.NdJ("click",function(){return e.edit(e.eavConstants.contentTypes.appConfiguration)}),t.TgZ(80,"mat-icon",13),t._uU(81," edit "),t.qZA(),t.TgZ(82,"span"),t._uU(83,"Edit Configuration"),t.qZA(),t.qZA(),t.TgZ(84,"button",12),t.NdJ("click",function(){return e.openMetadata()}),t.TgZ(85,"mat-icon",13),t._uU(86," local_offer "),t.qZA(),t.TgZ(87,"span"),t._uU(88,"Metadata"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(89,"mat-card",2),t.TgZ(90,"mat-card-header"),t.TgZ(91,"mat-card-title"),t._uU(92,"App Permissions"),t.qZA(),t.TgZ(93,"div",3),t.TgZ(94,"mat-icon"),t._uU(95,"person"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(96,"mat-card-content"),t._uU(97," Give access to the entire app (all data). Use with care. "),t.qZA(),t.TgZ(98,"mat-card-actions"),t.TgZ(99,"button",14),t.NdJ("click",function(){return e.openPermissions()}),t.TgZ(100,"mat-icon",13),t._uU(101," person "),t.qZA(),t.TgZ(102,"span"),t._uU(103," Edit Permissions "),t.YNc(104,Ge,3,2,"ng-container",6),t.qZA(),t.qZA(),t.YNc(105,We,5,0,"button",15),t.ALo(106,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(107,"div",1),t.TgZ(108,"mat-card",2),t.TgZ(109,"mat-card-header"),t.TgZ(110,"mat-card-title"),t._uU(111,"Export this entire App"),t.qZA(),t.TgZ(112,"div",3),t.TgZ(113,"mat-icon"),t._uU(114,"cloud_download"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(115,"mat-card-content"),t._uU(116," Create an package (zip) which can be installed in another site. "),t.qZA(),t.TgZ(117,"mat-card-actions"),t.TgZ(118,"button",12),t.NdJ("click",function(){return e.exportApp()}),t.TgZ(119,"mat-icon"),t._uU(120,"cloud_download"),t.qZA(),t.TgZ(121,"span"),t._uU(122,"Export App"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(123,"mat-card",2),t.TgZ(124,"mat-card-header"),t.TgZ(125,"mat-card-title"),t._uU(126,"Export or Import parts of this App"),t.qZA(),t.TgZ(127,"div",3),t.TgZ(128,"mat-icon"),t._uU(129,"import_export"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(130,"mat-card-content"),t._uU(131," Create an xml containing parts of the app, e.g. content and templates. Import parts from such an xml into this app. "),t.qZA(),t.TgZ(132,"mat-card-actions"),t.TgZ(133,"button",12),t.NdJ("click",function(){return e.exportParts()}),t.TgZ(134,"mat-icon"),t._uU(135,"cloud_download"),t.qZA(),t.TgZ(136,"span"),t._uU(137,"Export Parts"),t.qZA(),t.qZA(),t.TgZ(138,"button",12),t.NdJ("click",function(){return e.importParts()}),t.TgZ(139,"mat-icon"),t._uU(140,"cloud_upload"),t.qZA(),t.TgZ(141,"span"),t._uU(142,"Import Parts"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(143,"div",1),t.TgZ(144,"mat-card",2),t.TgZ(145,"mat-card-header"),t.TgZ(146,"mat-card-title"),t._uU(147,"App-State Versioning"),t.qZA(),t.TgZ(148,"div",3),t.TgZ(149,"mat-icon"),t._uU(150,"history_toggle_off"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(151,"mat-card-content"),t._uU(152," You can save / restore the app with data and configuration in "),t.TgZ(153,"code"),t._uU(154,".data/app.xml"),t.qZA(),t._uU(155,". This file can then also be versioned using git. "),t.qZA(),t.TgZ(156,"mat-card-actions"),t.TgZ(157,"button",12),t.NdJ("click",function(){return e.exportAppXml()}),t.TgZ(158,"mat-icon"),t._uU(159,"more_time"),t.qZA(),t.TgZ(160,"span"),t._uU(161,"Save state"),t.qZA(),t.qZA(),t.TgZ(162,"button",12),t.NdJ("click",function(){return e.resetApp()}),t.TgZ(163,"mat-icon"),t._uU(164,"restore"),t.qZA(),t.TgZ(165,"span"),t._uU(166,"Restore state"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.Q6J("ngIf",e.isGlobal||e.isPrimary),t.xp6(23),t.Q6J("ngIf",e.isGlobal),t.xp6(1),t.Q6J("ngIf",e.isPrimary),t.xp6(1),t.Q6J("ngIf",e.isApp),t.xp6(29),t.Q6J("ngIf",e.isGlobal),t.xp6(1),t.Q6J("ngIf",e.isPrimary),t.xp6(1),t.Q6J("ngIf",e.isApp),t.xp6(24),t.Q6J("matBadge",e.appConfigurationsCount||null),t.xp6(5),t.Q6J("matBadge",e.appMetadataCount||null),t.xp6(14),t.Q6J("disabled",!e.dialogSettings.Context.Enable.AppPermissions),t.xp6(1),t.Q6J("matBadge",e.dialogSettings.Context.App.Permissions.Count||null),t.xp6(4),t.Q6J("ngIf",!e.dialogSettings.Context.Enable.AppPermissions),t.xp6(1),t.Q6J("ngIf",t.lcZ(106,13,e.debugEnabled$)))},directives:[Z.O5,R.a8,R.dk,R.n5,T.Hw,R.dn,R.hq,P.lW,_.$,Q.k,Z.tP],pipes:[Z.Ov],styles:[".scope-info[_ngcontent-%COMP%]{width:888px;margin:16px 8px 0}table.settings[_ngcontent-%COMP%]{width:100%}table.settings[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}table.settings[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]}),i}();function He(i,a){1&i&&(t.ynx(0),t._uU(1," Global "),t.BQk())}function Le(i,a){if(1&i&&(t.ynx(0),t._uU(1),t.BQk()),2&i){var n=t.oxw().ngIf;t.xp6(1),t.hij(" ",null==n.dialogSettings?null:n.dialogSettings.Context.App.Name," ")}}function Ke(i,a){1&i&&(t.TgZ(0,"div",16),t.TgZ(1,"mat-icon"),t._uU(2,"info"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Info"),t.qZA(),t.qZA())}function ze(i,a){if(1&i&&t._UZ(0,"app-getting-started",17),2&i){var n=t.oxw(2).ngIf;t.Q6J("gettingStartedUrl",n.dialogSettings.Context.App.GettingStartedUrl)}}function Xe(i,a){1&i&&(t.TgZ(0,"div",18),t.TgZ(1,"mat-icon"),t._uU(2,"menu"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Data"),t.qZA(),t.qZA())}function je(i,a){if(1&i&&t._UZ(0,"app-data",19),2&i){var n=t.oxw(2).ngIf;t.Q6J("enablePermissions",n.dialogSettings.Context.Enable.AppPermissions)}}function $e(i,a){1&i&&(t.TgZ(0,"div",21),t.TgZ(1,"mat-icon"),t._uU(2,"filter_list"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Queries"),t.qZA(),t.qZA())}function tn(i,a){if(1&i&&t._UZ(0,"app-queries",19),2&i){var n=t.oxw(3).ngIf;t.Q6J("enablePermissions",n.dialogSettings.Context.Enable.AppPermissions)}}function en(i,a){1&i&&(t.TgZ(0,"mat-tab"),t.YNc(1,$e,5,0,"div",20),t.YNc(2,tn,1,1,"app-queries",11),t.qZA())}function nn(i,a){1&i&&(t.TgZ(0,"div",22),t.TgZ(1,"mat-icon"),t._uU(2,"layers"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Views"),t.qZA(),t.qZA())}function on(i,a){if(1&i&&t._UZ(0,"app-views",23),2&i){var n=t.oxw(2).ngIf;t.Q6J("enableCode",n.dialogSettings.Context.Enable.CodeEditor)("enablePermissions",n.dialogSettings.Context.Enable.AppPermissions)("appIsGlobal",n.dialogSettings.Context.App.IsGlobal)("appIsInherited",n.dialogSettings.Context.App.IsInherited)}}function an(i,a){1&i&&(t.TgZ(0,"div",26),t.TgZ(1,"mat-icon"),t._uU(2,"offline_bolt"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"WebApi"),t.qZA(),t.qZA())}function sn(i,a){if(1&i&&t._UZ(0,"app-web-api",27),2&i){var n=t.oxw(3).ngIf;t.Q6J("enableCode",n.dialogSettings.Context.Enable.CodeEditor)}}function rn(i,a){1&i&&(t.TgZ(0,"mat-tab"),t.YNc(1,an,5,0,"div",24),t.YNc(2,sn,1,1,"app-web-api",25),t.qZA())}function ln(i,a){1&i&&(t.TgZ(0,"div",28),t.TgZ(1,"mat-icon"),t._uU(2,"settings_applications"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"App"),t.qZA(),t.qZA())}function pn(i,a){if(1&i&&t._UZ(0,"app-app-configuration",29),2&i){var n=t.oxw(2).ngIf;t.Q6J("dialogSettings",n.dialogSettings)}}function cn(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"mat-tab-group",7),t.NdJ("selectedTabChange",function(s){return t.CHM(n),t.oxw(2).changeTab(s)}),t.TgZ(1,"mat-tab"),t.YNc(2,Ke,5,0,"div",8),t.YNc(3,ze,1,1,"app-getting-started",9),t.qZA(),t.TgZ(4,"mat-tab"),t.YNc(5,Xe,5,0,"div",10),t.YNc(6,je,1,1,"app-data",11),t.qZA(),t.YNc(7,en,3,0,"mat-tab",4),t.TgZ(8,"mat-tab"),t.YNc(9,nn,5,0,"div",12),t.YNc(10,on,1,4,"app-views",13),t.qZA(),t.YNc(11,rn,3,0,"mat-tab",4),t.TgZ(12,"mat-tab"),t.YNc(13,ln,5,0,"div",14),t.YNc(14,pn,1,1,"app-app-configuration",15),t.qZA(),t.qZA()}if(2&i){var e=t.oxw().ngIf;t.Q6J("selectedIndex",e.tabIndex),t.xp6(7),t.Q6J("ngIf",e.dialogSettings.Context.Enable.Query),t.xp6(4),t.Q6J("ngIf",e.dialogSettings.Context.Enable.Query)}}function un(i,a){if(1&i){var n=t.EpF();t.TgZ(0,"div",1),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t.TgZ(3,"div"),t.YNc(4,He,2,0,"ng-container",4),t.YNc(5,Le,2,1,"ng-container",4),t._uU(6," Admin "),t.qZA(),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeDialog()}),t.TgZ(8,"mat-icon"),t._uU(9,"close"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(10,"router-outlet"),t.YNc(11,cn,15,3,"mat-tab-group",6),t.qZA()}if(2&i){var e=a.ngIf,o=t.oxw();t.xp6(4),t.Q6J("ngIf",(null==e.dialogSettings?null:e.dialogSettings.Context.App.SettingsScope)===o.AppScopes.Global),t.xp6(1),t.Q6J("ngIf",(null==e.dialogSettings?null:e.dialogSettings.Context.App.SettingsScope)!==o.AppScopes.Global),t.xp6(6),t.Q6J("ngIf",e.dialogSettings&&null!=e.tabIndex)}}var dn=function(){var i=function(){function a(n,e,o,s){var r=this;(0,h.Z)(this,a),this.dialogRef=n,this.appDialogConfigService=e,this.router=o,this.route=s,this.AppScopes=O,this.dialogSettings$=new D.X(null),this.tabs$=new D.X(null),this.tabIndex$=(0,q.a)([this.tabs$,this.router.events.pipe((0,f.h)(function(p){return p instanceof g.m2}),(0,C.U)(function(){return r.route.snapshot.firstChild.url[0].path}),(0,I.O)(this.route.snapshot.firstChild.url[0].path))]).pipe((0,C.U)(function(p){var m=(0,A.Z)(p,2),c=m[0];if(null!=c)return c.indexOf(m[1])}),(0,f.h)(function(p){return p>=0})),this.templateVars$=(0,q.a)([this.dialogSettings$,this.tabIndex$]).pipe((0,C.U)(function(p){var m=(0,A.Z)(p,2);return{dialogSettings:m[0],tabIndex:m[1]}})),this.subscription=new x.w0}return(0,v.Z)(a,[{key:"ngOnInit",value:function(){this.fetchDialogSettings(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.dialogSettings$.complete(),this.tabs$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"changeTab",value:function(e){var o=this.tabs$.value[e.index];"data"===o&&(o="data/".concat(u.Z.scopes.default.value)),this.router.navigate([o],{relativeTo:this.route})}},{key:"fetchDialogSettings",value:function(){var e=this;this.appDialogConfigService.getDialogSettings().subscribe(function(o){(0,dt.X)(o.Context.App),e.dialogSettings$.next(o);var s=["home","data","queries","views","web-api","app"];o.Context.Enable.Query||(s=s.filter(function(r){return"queries"!==r&&"web-api"!==r})),e.tabs$.next(s)})}},{key:"refreshOnChildClosed",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,f.h)(function(o){return o instanceof g.m2}),(0,I.O)(!!this.route.snapshot.firstChild.firstChild),(0,C.U)(function(){return!!e.route.snapshot.firstChild.firstChild}),(0,w.G)(),(0,f.h)(function(o){var s=(0,A.Z)(o,2);return s[0]&&!s[1]})).subscribe(function(){e.fetchDialogSettings()}))}}]),a}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(tt.so),t.Y36(mt.K),t.Y36(g.F0),t.Y36(g.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-app-administration-nav"]],decls:2,vars:3,consts:[["class","nav-component-wrapper","appToggleDebug","",4,"ngIf"],["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],["mat-icon-button","","tippy","Close dialog",3,"click"],["class","mat-tab-group-max-height","dynamicHeight","","color","accent",3,"selectedIndex","selectedTabChange",4,"ngIf"],["dynamicHeight","","color","accent",1,"mat-tab-group-max-height",3,"selectedIndex","selectedTabChange"],["class","mat-tab-label-box","tippy","App Info",4,"matTabLabel"],[3,"gettingStartedUrl",4,"matTabContent"],["class","mat-tab-label-box","tippy","Data / Content",4,"matTabLabel"],[3,"enablePermissions",4,"matTabContent"],["class","mat-tab-label-box","tippy","Views / Templates",4,"matTabLabel"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited",4,"matTabContent"],["class","mat-tab-label-box","tippy","App Settings",4,"matTabLabel"],[3,"dialogSettings",4,"matTabContent"],["tippy","App Info",1,"mat-tab-label-box"],[3,"gettingStartedUrl"],["tippy","Data / Content",1,"mat-tab-label-box"],[3,"enablePermissions"],["class","mat-tab-label-box","tippy","Queries / Visual Query Designer",4,"matTabLabel"],["tippy","Queries / Visual Query Designer",1,"mat-tab-label-box"],["tippy","Views / Templates",1,"mat-tab-label-box"],[3,"enableCode","enablePermissions","appIsGlobal","appIsInherited"],["class","mat-tab-label-box","tippy","WebApi",4,"matTabLabel"],[3,"enableCode",4,"matTabContent"],["tippy","WebApi",1,"mat-tab-label-box"],[3,"enableCode"],["tippy","App Settings",1,"mat-tab-label-box"],[3,"dialogSettings"]],template:function(n,e){1&n&&(t.YNc(0,un,12,3,"div",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.templateVars$))},directives:[Z.O5,gt.D,tt.uh,P.lW,_.$,T.Hw,g.lC,W.SP,W.uX,W.uD,W.Vc,ht,Pt,Kt,ce,he,Ye],pipes:[Z.Ov],styles:[""]}),i}()},8398:function(ot,J,l){function A(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}l.d(J,{M:function(){return A}})},5469:function(ot,J,l){l.d(J,{D:function(){return D}});var A=l(8069),h=l(8047),v=l(7338),g=l(7133),D=function(){var q=function(){function x(f){(0,A.Z)(this,x),this.globalConfigService=f}return(0,h.Z)(x,[{key:"onClick",value:function(C){(navigator.platform.match("Mac")?C.metaKey:C.ctrlKey)&&C.shiftKey&&C.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}]),x}();return q.\u0275fac=function(f){return new(f||q)(g.Y36(v.bE))},q.\u0275dir=g.lG2({type:q,selectors:[["","appToggleDebug",""]],hostBindings:function(f,C){1&f&&g.NdJ("click",function(w){return C.onClick(w)})}}),q}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_app-administration_app-administration-nav_app-administration-nav_-8dd6e3.4cd5b03929f04e1e.js.map