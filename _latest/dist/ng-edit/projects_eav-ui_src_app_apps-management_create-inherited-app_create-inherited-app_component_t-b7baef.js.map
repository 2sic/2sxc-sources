{"version":3,"file":"projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-b7baef.js","mappings":"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","sources":["./projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app.component.ts","./projects/eav-ui/src/app/apps-management/create-inherited-app/create-inherited-app.component.html","./projects/eav-ui/src/app/core/transient.ts","./projects/eav-ui/src/app/import-app/services/import-app.service.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html"],"sourcesContent":["import { Component, HostBinding, OnDestroy, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDialogRef, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { App } from '../models/app.model';\r\nimport { AppsListService } from '../services/apps-list.service';\r\nimport { AsyncPipe } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { transient } from '../../core';\r\n\r\n@Component({\r\n  selector: 'app-create-inherited-app',\r\n  templateUrl: './create-inherited-app.component.html',\r\n  styleUrls: ['./create-inherited-app.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    RouterOutlet,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    AsyncPipe,\r\n    FieldHintComponent\r\n  ],\r\n})\r\nexport class CreateInheritedAppComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  loading$: BehaviorSubject<boolean>;\r\n  inheritableApps$: BehaviorSubject<App[] | undefined | null>;\r\n\r\n  viewModel$: Observable<CreateInheritedAppViewModel>;\r\n\r\n  private appsListService = transient(AppsListService);\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateInheritedAppComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n    this.loading$ = new BehaviorSubject(false);\r\n    this.inheritableApps$ = new BehaviorSubject<App[]>(undefined);\r\n    this.viewModel$ = combineLatest([this.loading$, this.inheritableApps$]).pipe(\r\n      map(([loading, inheritableApps]) => {\r\n        return { loading, inheritableApps };\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.fetchInheritedApps();\r\n\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading$.complete();\r\n    this.inheritableApps$.complete();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading$.next(true);\r\n    const inheritId = this.form.controls.inheritId.value;\r\n    const name = this.inheritableApps$.value.find(app => app.Id === inheritId).Name;\r\n    this.snackBar.open('Creating inherited app...');\r\n    this.appsListService.create(name, inheritId).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n        this.loading$.next(false);\r\n        this.snackBar.open('Failed to create inherited app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created inherited app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private fetchInheritedApps(): void {\r\n    this.appsListService.getInheritable().subscribe({\r\n      error: () => {\r\n        this.inheritableApps$.next(null);\r\n      },\r\n      next: (inheritableApps) => {\r\n        this.inheritableApps$.next(inheritableApps);\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): UntypedFormGroup {\r\n    const form = new UntypedFormGroup({\r\n      inheritId: new UntypedFormControl(null, [Validators.required]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n\r\ninterface CreateInheritedAppViewModel {\r\n  loading: boolean;\r\n  inheritableApps: App[] | undefined | null;\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">Create inherited App</div>\r\n    </div>\r\n    <div class=\"eav-dialog-content\">\r\n      <router-outlet></router-outlet>\r\n      <p>\r\n        Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically\r\n        marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the\r\n        App you expect, make sure that has happened.\r\n      </p>\r\n      <form [formGroup]=\"form\">\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Inherit App</mat-label>\r\n          <mat-select formControlName=\"inheritId\"\r\n            [placeholder]=\"vm.inheritableApps === undefined ? 'Loading...' : vm.inheritableApps === null || vm.inheritableApps.length === 0 ? 'No inheritable apps found' : ''\">\r\n            @for (app of vm.inheritableApps; track app) {\r\n              <mat-option [value]=\"app.Id\">\r\n                {{ app.Name }}\r\n              </mat-option>\r\n            }\r\n          </mat-select>\r\n        </mat-form-field>\r\n        @if (form.controls.inheritId.touched && form.controls.inheritId.errors?.required) {\r\n          <app-field-hint [isError]=\"true\">\r\n            Required\r\n          </app-field-hint>\r\n        }\r\n      </form>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      <button type=\"button\" mat-raised-button [disabled]=\"vm.loading\" (click)=\"closeDialog()\">\r\n        Cancel\r\n      </button>\r\n      <button type=\"button\" mat-raised-button color=\"accent\" [disabled]=\"vm.loading || !form.valid\" (click)=\"create()\">\r\n        Create\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { Injector, ProviderToken, TypeProvider, inject } from '@angular/core';\r\n\r\n/**\r\n * Transient dependency injection provider.\r\n * This will create a new instance of the provided token,\r\n * without making it available in sub-components\r\n * as would happen with providers in a component.\r\n * \r\n * @param token the class which is injectable\r\n * @param injector the injector to use, if not provided, the current injector will be used.\r\n *     Not not necessary when using transient in the class properties construction or in the constructor,\r\n *     as the injector will be available in the constructor.\r\n *     But necessary when using transient inside anything else.\r\n * @returns \r\n */\r\nexport function transient<T>(token: ProviderToken<T>, injector?: Injector): T {\r\n  // make sure we have an injector\r\n  // this will throw an error, if transient is used outside of construction and without providing an injector\r\n  injector ??= inject(Injector);\r\n\r\n  // create a new injector which is only meant to be used for this transient instance\r\n  const subInjector = Injector.create({\r\n    providers: [\r\n      token as TypeProvider\r\n    ],\r\n    parent: injector\r\n  });\r\n\r\n  // return the instance\r\n  return subInjector.get(token, undefined, { self: true });\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\n\r\nexport const webApiAppRoot = 'admin/app/';\r\n\r\n@Injectable()\r\nexport class ImportAppService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  importApp(file: File, changedName: string, retryOnDuplicate = false): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    formData.append('Name', changedName ?? '');\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Import'), formData, {\r\n      params: { zoneId: this.context.zoneId.toString() }\r\n    }).pipe(\r\n      switchMap(result => {\r\n        if (retryOnDuplicate && result.Messages[0]?.MessageType === FileUploadMessageTypes.Warning) {\r\n          const folderName = prompt(result.Messages[0].Text + ' Would you like to install it using another folder name?');\r\n          if (folderName) {\r\n            return this.importApp(file, folderName, true);\r\n          }\r\n        }\r\n        return of(result);\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule, NgClass, NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n"],"names":["UntypedFormControl","UntypedFormGroup","Validators","FormsModule","ReactiveFormsModule","MatDialogRef","MatDialogActions","MatSnackBar","BehaviorSubject","combineLatest","map","AppsListService","AsyncPipe","MatButtonModule","MatOptionModule","MatSelectModule","MatFormFieldModule","RouterOutlet","FieldHintComponent","transient","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","app_r2","Id","ɵɵadvance","ɵɵtextInterpolate1","Name","ɵɵelement","ɵɵrepeaterCreate","CreateInheritedAppComponent_Conditional_0_For_14_Template","ɵɵrepeaterTrackByIdentity","ɵɵtemplate","CreateInheritedAppComponent_Conditional_0_Conditional_15_Template","ɵɵlistener","CreateInheritedAppComponent_Conditional_0_Template_button_click_17_listener","ɵɵrestoreView","_r1","ctx_r2","ɵɵnextContext","ɵɵresetView","closeDialog","CreateInheritedAppComponent_Conditional_0_Template_button_click_19_listener","create","form","vm_r4","inheritableApps","undefined","length","ɵɵrepeater","ɵɵconditional","controls","inheritId","touched","errors","required","loading","valid","CreateInheritedAppComponent","constructor","dialogRef","snackBar","hostClass","appsListService","buildForm","loading$","inheritableApps$","viewModel$","pipe","ngOnInit","fetchInheritedApps","ngOnDestroy","complete","close","disable","next","value","name","find","app","open","subscribe","error","enable","duration","getInheritable","_","ɵɵdirectiveInject","i1","i2","_2","selectors","hostVars","hostBindings","CreateInheritedAppComponent_HostBindings","rf","ctx","ɵɵhostProperty","CreateInheritedAppComponent_Conditional_0_Template","tmp_0_0","ɵɵpipeBind1","i3","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","i5","MatSelect","i6","MatOption","i7","MatButton","styles","Injector","inject","token","injector","subInjector","providers","parent","get","self","Context","DnnContext","HttpClient","of","switchMap","FileUploadMessageTypes","webApiAppRoot","ImportAppService","http","context","dnnContext","importApp","file","changedName","retryOnDuplicate","formData","FormData","append","post","$2sxc","apiUrl","params","zoneId","toString","result","Messages","MessageType","Warning","folderName","prompt","Text","ɵɵinject","factory","ɵfac","NgClass","NgTemplateOutlet","ɵɵelementContainer","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","ɵɵprojection","isError","isShort","toggleIsShort","inputs","standalone","features","ɵɵStandaloneFeature","ngContentSelectors","_c0","decls","vars","consts","template","FieldHintComponent_Template","FieldHintComponent_Template_div_click_0_listener","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c1","tmp_2_0","MatHint","MatError"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}