"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_content-items_content-item-import_content-item-import_component_ts"],{7824:function(S,d,i){i.r(d),i.d(d,{ContentItemImportComponent:function(){return N}});var I=i(2090),f=i(8069),v=i(8047),u=i(5758),a=i(6317),C=i(6562),h=i(635),x=i(5005),T=i(803),t=i(7133),E=i(2977),D=i(2528),p=i(6362),M=i(1529),O=i(7317),y=i(785),A=i(4742);function P(o,s){1&o&&t._UZ(0,"mat-spinner",12)}function Z(o,s){1&o&&(t.TgZ(0,"div",17),t._uU(1," The import has been done. See the messages below for more information. "),t.qZA())}function R(o,s){1&o&&(t.TgZ(0,"div",18),t._uU(1," The import failed. See the messages below for more information. "),t.qZA())}var $=function(s,e,n){return{"sxc-message-warning":s,"sxc-message-success":e,"sxc-message-error":n}};function U(o,s){if(1&o&&(t.TgZ(0,"div",19),t._uU(1),t.qZA()),2&o){var e=s.$implicit;t.Q6J("ngClass",t.kEZ(2,$,0===e.MessageType,1===e.MessageType,2===e.MessageType)),t.xp6(1),t.hij(" ",e.Text," ")}}function F(o,s){if(1&o&&(t.TgZ(0,"div",13),t.YNc(1,Z,2,0,"div",14),t.YNc(2,R,2,0,"div",15),t.YNc(3,U,2,6,"div",16),t.qZA()),2&o){var e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngIf",e.importResult.Success),t.xp6(1),t.Q6J("ngIf",!e.importResult.Success),t.xp6(1),t.Q6J("ngForOf",e.importResult.Messages)}}function B(o,s){if(1&o){var e=t.EpF();t.ynx(0),t.TgZ(1,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeDialog()}),t._uU(2,"Cancel"),t.qZA(),t.TgZ(3,"button",21),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).importContentItem()}),t._uU(4," Import "),t.qZA(),t.BQk()}if(2&o){var n=t.oxw().ngIf;t.xp6(3),t.Q6J("disabled",!n.importFile||n.isImporting||!!n.importResult)}}function b(o,s){if(1&o){var e=t.EpF();t.ynx(0),t.TgZ(1,"button",22),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).closeDialog()}),t._uU(2,"Close"),t.qZA(),t.BQk()}}function L(o,s){if(1&o){var e=t.EpF();t.TgZ(0,"div",1),t.NdJ("filesDropped",function(m){return t.CHM(e),t.oxw().filesDropped(m)}),t.TgZ(1,"div",2),t.TgZ(2,"div",3),t._uU(3),t.ALo(4,"async"),t.qZA(),t.qZA(),t.YNc(5,P,1,0,"mat-spinner",4),t.TgZ(6,"p",5),t._uU(7,"Select an item file (json) from your computer to import."),t.qZA(),t.TgZ(8,"div"),t.TgZ(9,"button",6),t.NdJ("click",function(){return t.CHM(e),t.MAs(13).click()}),t.TgZ(10,"span"),t._uU(11),t.qZA(),t.qZA(),t.TgZ(12,"input",7,8),t.NdJ("change",function(m){return t.CHM(e),t.oxw().fileChange(m)}),t.qZA(),t.qZA(),t.YNc(14,F,4,3,"div",9),t.TgZ(15,"div",10),t.YNc(16,B,5,1,"ng-container",11),t.YNc(17,b,3,0,"ng-container",11),t.qZA(),t.qZA()}if(2&o){var l,n=s.ngIf,r=t.oxw();t.Q6J("allowedFileTypes","json"),t.xp6(3),t.hij("",null==(l=t.lcZ(4,8,r.contentType$))?null:l.Name," Import Single Item"),t.xp6(2),t.Q6J("ngIf",n.isImporting),t.xp6(4),t.Q6J("disabled",n.isImporting),t.xp6(2),t.Oqu(n.importFile?n.importFile.name:"Select or drop file"),t.xp6(3),t.Q6J("ngIf",n.importResult),t.xp6(2),t.Q6J("ngIf",!(null!=n.importResult&&n.importResult.Success)),t.xp6(1),t.Q6J("ngIf",null==n.importResult?null:n.importResult.Success)}}var N=function(){var o=function(){function s(e,n,r,l,c,m){(0,f.Z)(this,s),this.dialogData=e,this.dialogRef=n,this.route=r,this.contentTypesService=l,this.contentItemsService=c,this.snackBar=m,this.hostClass="dialog-component",this.contentType$=new a.X(null),this.isImporting$=new a.X(!1),this.importFile$=new a.X(null),this.importResult$=new a.X(null),this.templateVars$=(0,C.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe((0,h.U)(function(_){var g=(0,I.Z)(_,3);return{isImporting:g[0],importFile:g[1],importResult:g[2]}})),this.contentTypeStaticName=this.route.snapshot.parent.paramMap.get("contentTypeStaticName")}return(0,v.Z)(s,[{key:"ngOnInit",value:function(){var n=this;this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(function(r){n.contentType$.next(r)}),null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importContentItem())}},{key:"ngOnDestroy",value:function(){this.contentType$.complete(),this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"filesDropped",value:function(n){this.importFile$.next(n[0]),this.importResult$.next(null),this.importContentItem()}},{key:"fileChange",value:function(n){this.importFile$.next(n.target.files[0]),this.importResult$.next(null)}},{key:"importContentItem",value:function(){var n=this;this.isImporting$.next(!0),this.contentItemsService.importItem(this.importFile$.value).subscribe({next:function(l){n.isImporting$.next(!1),n.importResult$.next({Success:!0,Messages:[]})},error:function(l){n.isImporting$.next(!1),n.importResult$.next(null),n.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})}}]),s}();return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.WI),t.Y36(u.so),t.Y36(E.gz),t.Y36(x.s),t.Y36(T.l),t.Y36(D.ux))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-content-item-import"]],hostVars:1,hostBindings:function(e,n){2&e&&t.Ikx("className",n.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","tippy","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,n){1&e&&(t.YNc(0,L,18,10,"div",0),t.ALo(1,"async")),2&e&&t.Q6J("ngIf",t.lcZ(1,1,n.templateVars$))},directives:[p.O5,M.z,u.uh,O.lW,y.$,A.$g,p.sg,p.mk],pipes:[p.Ov],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"]}),o}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_content-items_content-item-import_content-item-import_component_ts.ed4ddef4c73e0e3d.js.map