"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-import_content-import_component_ts"],{2743:(y,E,n)=>{n.d(E,{b:()=>t});var i=n(271),g=n(6301),h=n(8764),C=n(8873),D=n(4858),c=n(4979),T=n(3472),s=n(9431),a=n(8559),u=n(6443);let t=(()=>{class x extends c.V{constructor(m,_,d,v){super(new T.B("AppDialogConfigService",!1)),this.http=m,this.context=_,this.globalConfigService=d,this.dialogSettings$={},this.log.a(`using context #${this.context.log.svcId}`),v.loadFromService(this)}ngOnDestroy(){super.destroy()}getCurrent$(){const m=this.context.appId;return this.log.a(`getCurrent$ - appId:${m}`),this.getShared$(m)}getSitePrimaryApp$(){return this.getCurrent$().pipe((0,i.T)(m=>m?.Context.Site.PrimaryApp))}getGlobalPrimaryApp$(){return this.getCurrent$().pipe((0,i.T)(m=>m?.Context.System.PrimaryApp))}getShared$(m){return this.log.a("getShared$ appId: "+m),this.dialogSettings$[m]??=this.getDialogSettings(m,"getShared$").pipe((0,g.t)({refCount:!1})),this.dialogSettings$[m]}getDialogSettings(m,_){return this.log.a("getDialogSettings",{appId:m,reqBy:_}),this.http.get("admin/dialog/settings",{params:{appId:m??this.context.appId.toString()}}).pipe((0,i.T)(d=>(d.Context.Language.List=d.Context.Language.List.filter(v=>v.IsEnabled),d)),(0,h.M)(d=>{this.globalConfigService.allowDebug(d.Context.Enable.DebugMode)}))}static#t=this.\u0275fac=function(_){return new(_||x)(a.KVO(u.Qq),a.KVO(C.o),a.KVO(s.B),a.KVO(D.D))};static#e=this.\u0275prov=a.jDH({token:x,factory:x.\u0275fac})}return x})()},7693:(y,E,n)=>{n.d(E,{X:()=>c,g:()=>x});var i=n(271),g=n(8873),h=n(8559),C=n(6443),D=n(4821);const c="admin/type/",a="admin/type/scopes";let x=(()=>{class R{constructor(_,d,v){this.http=_,this.context=d,this.dnnContext=v}apiUrl(_){return this.dnnContext.$2sxc.http.apiUrl(_)}retrieveContentType(_){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:_}})}retrieveContentTypes(_){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:_}})}getScopes(){return this.http.get(this.apiUrl(a),{params:{appId:this.context.appId.toString()}}).pipe((0,i.T)(_=>{const d=_.old;return Object.keys(d).map(M=>({name:d[M],value:M}))}))}getScopesV2(){return this.http.get(this.apiUrl(a),{params:{appId:this.context.appId.toString()}}).pipe((0,i.T)(_=>_.scopes))}save(_){return this.http.post(this.apiUrl("admin/type/save"),_,{params:{appid:this.context.appId.toString()}})}delete(_){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:_.StaticName}})}import(_){const d=new FormData;for(const v of _)d.append("File",v);return this.http.post(this.apiUrl("admin/type/import"),d,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(_){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:_}})}static#t=this.\u0275fac=function(d){return new(d||R)(h.KVO(C.Qq),h.KVO(g.o),h.KVO(D.ob))};static#e=this.\u0275prov=h.jDH({token:R,factory:R.\u0275fac})}return R})()},2795:(y,E,n)=>{n.r(E),n.d(E,{ContentImportComponent:()=>z});var i=n(7941),g=n(5797),h=n(9999),C=n(271),D=n(1873),c=n(2743),T=n(7693),s=n(9835),a=n(6647),u=n(693),S=n(8873),p=n(9234),t=n(8559),x=n(6443),R=n(4821);let m=(()=>{class o{constructor(e,l,r){this.http=e,this.context=l,this.dnnContext=r}evaluateContent(e){return(0,s.H)((0,u.n)(e.file)).pipe((0,a.n)(l=>{const r={AppId:this.context.appId.toString(),DefaultLanguage:e.defaultLanguage,ContentType:e.contentType,ContentBase64:l,ResourcesReferences:e.resourcesReferences,ClearEntities:e.clearEntities};return this.http.post(this.dnnContext.$2sxc.http.apiUrl(p.gb+"XmlPreview"),r).pipe((0,C.T)(f=>(f.Success||(f.Errors=f.Detail,delete f.Detail),f)))}))}importContent(e){return(0,s.H)((0,u.n)(e.file)).pipe((0,a.n)(l=>{const r={AppId:this.context.appId.toString(),DefaultLanguage:e.defaultLanguage,ContentType:e.contentType,ContentBase64:l,ResourcesReferences:e.resourcesReferences,ClearEntities:e.clearEntities};return this.http.post(this.dnnContext.$2sxc.http.apiUrl(p.gb+"XmlUpload"),r)}))}static#t=this.\u0275fac=function(l){return new(l||o)(t.KVO(x.Qq),t.KVO(S.o),t.KVO(R.ob))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}return o})();var _=n(316),d=n(3804),v=n(4175),M=n(4456),O=n(4575),P=n(5437),F=n(9184);function b(o,I){if(1&o){const e=t.RV6();t.j41(0,"form",null,0)(2,"div",8)(3,"div")(4,"button",9),t.bIt("click",function(){t.eBV(e);const r=t.sdS(8);return t.Njj(r.click())}),t.j41(5,"span"),t.EFF(6),t.k0s()(),t.j41(7,"input",10,1),t.bIt("change",function(r){t.eBV(e);const f=t.XpG(3);return t.Njj(f.fileChange(r))}),t.k0s()(),t.j41(9,"div")(10,"p",11),t.EFF(11,"References to pages / files"),t.k0s(),t.j41(12,"mat-radio-group",12),t.mxI("ngModelChange",function(r){t.eBV(e);const f=t.XpG(3);return t.DH7(f.formValues.resourcesReferences,r)||(f.formValues.resourcesReferences=r),t.Njj(r)}),t.j41(13,"mat-radio-button",13),t.EFF(14," Import links as written in the file (for example /Portals/...) "),t.k0s(),t.j41(15,"mat-radio-button",14),t.EFF(16," Try to resolve paths to references "),t.k0s()()(),t.j41(17,"div")(18,"p",11),t.EFF(19,"Clear all other entities"),t.k0s(),t.j41(20,"mat-radio-group",15),t.mxI("ngModelChange",function(r){t.eBV(e);const f=t.XpG(3);return t.DH7(f.formValues.clearEntities,r)||(f.formValues.clearEntities=r),t.Njj(r)}),t.j41(21,"mat-radio-button",16),t.EFF(22," Keep all entities not found in import "),t.k0s(),t.j41(23,"mat-radio-button",17),t.EFF(24," Remove all entities not found in import "),t.k0s()()(),t.j41(25,"p",18),t.EFF(26,"Remember to backup your DNN first!"),t.k0s()(),t.j41(27,"mat-dialog-actions",19)(28,"button",20),t.bIt("click",function(){t.eBV(e);const r=t.XpG(3);return t.Njj(r.closeDialog())}),t.EFF(29,"Cancel"),t.k0s(),t.j41(30,"button",21),t.bIt("click",function(){t.eBV(e);const r=t.XpG(3);return t.Njj(r.evaluateContent())}),t.EFF(31," Preview Import "),t.k0s()()()}if(2&o){const e=t.XpG(3);t.R7$(6),t.JRh(e.formValues.file?e.formValues.file.name:"Select or drop file"),t.R7$(6),t.R50("ngModel",e.formValues.resourcesReferences),t.R7$(8),t.R50("ngModel",e.formValues.clearEntities),t.R7$(10),t.Y8G("disabled",!e.formValues.file||!e.formValues.file.name)}}function j(o,I){1&o&&(t.j41(0,"div",8)(1,"p"),t.EFF(2,"Please wait while processing..."),t.k0s()())}function A(o,I){if(1&o&&(t.j41(0,"div",8)(1,"p",22),t.EFF(2),t.k0s(),t.j41(3,"p",22),t.EFF(4,"File contains:"),t.k0s(),t.j41(5,"ul",23)(6,"li"),t.EFF(7),t.k0s(),t.j41(8,"li"),t.EFF(9),t.k0s(),t.j41(10,"li"),t.EFF(11),t.k0s()(),t.j41(12,"p",22),t.EFF(13,"If you press Import, it will:"),t.k0s(),t.j41(14,"ul",23)(15,"li"),t.EFF(16),t.k0s(),t.j41(17,"li"),t.EFF(18),t.k0s(),t.j41(19,"li"),t.EFF(20),t.k0s(),t.j41(21,"li"),t.EFF(22),t.k0s()(),t.j41(23,"p",18),t.EFF(24,"Note: The import validates much data and may take several minutes."),t.k0s()()),2&o){const e=t.XpG(4),l=t.XpG();t.R7$(2),t.SpI("Try to import file '",l.formValues.file.name,"'"),t.R7$(5),t.SpI("",e.evaluationResult.Detail.DocumentElementsCount," content-items (records/entities)"),t.R7$(2),t.SpI("",e.evaluationResult.Detail.LanguagesInDocumentCount," languages"),t.R7$(2),t.Lme("",e.evaluationResult.Detail.AttributeNamesInDocument.length," columns: ",e.evaluationResult.Detail.AttributeNamesInDocument.join(", "),""),t.R7$(5),t.SpI("Create ",e.evaluationResult.Detail.AmountOfEntitiesCreated," content-items"),t.R7$(2),t.SpI("Update ",e.evaluationResult.Detail.AmountOfEntitiesUpdated," content-items"),t.R7$(2),t.SpI("Delete ",e.evaluationResult.Detail.AmountOfEntitiesDeleted," content-items"),t.R7$(2),t.Lme("Ignore ",e.evaluationResult.Detail.AttributeNamesNotImported.length," columns: ",e.evaluationResult.Detail.AttributeNamesNotImported.join(", "),"")}}function $(o,I){if(1&o&&(t.j41(0,"div")(1,"i"),t.EFF(2),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(2),t.SpI("Details: ",e.ErrorDetail,"")}}function L(o,I){if(1&o&&(t.j41(0,"div")(1,"i"),t.EFF(2),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(2),t.SpI("Line-no: ",e.LineNumber,"")}}function B(o,I){if(1&o&&(t.j41(0,"div")(1,"i"),t.EFF(2),t.k0s()()),2&o){const e=t.XpG().$implicit;t.R7$(2),t.SpI("Line-details: ",e.LineDetail,"")}}function U(o,I){if(1&o&&(t.j41(0,"li")(1,"div"),t.EFF(2),t.k0s(),t.DNE(3,$,3,1,"div")(4,L,3,1,"div")(5,B,3,1,"div"),t.k0s()),2&o){const e=I.$implicit,l=t.XpG(6);t.R7$(2),t.JRh(l.errors[e.ErrorCode]),t.R7$(),t.vxM(3,e.ErrorDetail?3:-1),t.R7$(),t.vxM(4,e.LineNumber?4:-1),t.R7$(),t.vxM(5,e.LineDetail?5:-1)}}function K(o,I){if(1&o&&(t.j41(0,"div",8)(1,"p",22),t.EFF(2),t.k0s(),t.j41(3,"ul",23),t.Z7z(4,U,6,4,"li",null,t.fX1),t.k0s()()),2&o){const e=t.XpG(4),l=t.XpG();t.R7$(2),t.SpI("Try to import file '",l.formValues.file.name,"'"),t.R7$(2),t.Dyx(e.evaluationResult.Errors)}}function W(o,I){if(1&o){const e=t.RV6();t.DNE(0,A,25,10,"div",8)(1,K,6,1,"div",8),t.j41(2,"mat-dialog-actions",19)(3,"button",20),t.bIt("click",function(){t.eBV(e);const r=t.XpG(4);return t.Njj(r.back())}),t.EFF(4,"Back"),t.k0s(),t.j41(5,"button",21),t.bIt("click",function(){t.eBV(e);const r=t.XpG(4);return t.Njj(r.importContent())}),t.EFF(6," Import "),t.k0s()()}if(2&o){const e=t.XpG(3);t.vxM(0,e.evaluationResult.Success?0:-1),t.R7$(),t.vxM(1,e.evaluationResult.Success?-1:1),t.R7$(4),t.Y8G("disabled",!e.evaluationResult.Success)}}function V(o,I){if(1&o&&t.DNE(0,W,7,3,"mat-dialog-actions",19),2&o){const e=t.XpG(2);t.vxM(0,e.evaluationResult?0:-1)}}function N(o,I){1&o&&(t.j41(0,"p"),t.EFF(1,"Import done."),t.k0s())}function w(o,I){1&o&&(t.j41(0,"p"),t.EFF(1,"Import failed."),t.k0s())}function X(o,I){if(1&o&&(t.j41(0,"div",8),t.DNE(1,N,2,0,"p")(2,w,2,0,"p"),t.k0s()),2&o){const e=t.XpG(3);t.R7$(),t.vxM(1,e.importResult.Success?1:-1),t.R7$(),t.vxM(2,e.importResult.Success?-1:2)}}function G(o,I){if(1&o){const e=t.RV6();t.DNE(0,X,3,2,"div",8),t.j41(1,"mat-dialog-actions",19)(2,"button",24),t.bIt("click",function(){t.eBV(e);const r=t.XpG(3);return t.Njj(r.closeDialog())}),t.EFF(3,"Close"),t.k0s()()}if(2&o){const e=t.XpG(2);t.vxM(0,e.importResult?0:-1)}}function k(o,I){if(1&o&&t.DNE(0,b,32,4)(1,j,3,0)(2,V,1,1)(3,G,4,1),2&o){let e;const l=t.XpG();t.vxM(0,1===(e=l.viewStateSelected)?0:0===e?1:2===e?2:3===e?3:-1)}}function H(o,I){if(1&o){const e=t.RV6();t.j41(0,"div",3),t.bIt("filesDropped",function(r){t.eBV(e);const f=t.XpG();return t.Njj(f.filesDropped(r))}),t.j41(1,"div",4)(2,"div",5),t.EFF(3),t.k0s()(),t.j41(4,"div",6)(5,"p"),t.EFF(6," This will import content-items into 2sxc. It requires that you already defined the content-type before you try importing, and that you created the import-file using the template provided by the Export. Please visit "),t.j41(7,"a",7),t.EFF(8,"https://2sxc.org/help"),t.k0s(),t.EFF(9," for more instructions. "),t.k0s()(),t.DNE(10,k,4,1),t.k0s()}if(2&o){const e=I,l=t.XpG();t.Y8G("allowedFileTypes","xml"),t.R7$(3),t.SpI("",null==e.contentType?null:e.contentType.Name," Import Data"),t.R7$(7),t.vxM(10,null!=l.formValues?10:-1)}}let z=(()=>{class o{constructor(e,l,r){this.dialogData=e,this.dialogRef=l,this.route=r,this.hostClass="dialog-component",this.contentImportService=(0,P.d)(m),this.contentTypesService=(0,P.d)(T.g),this.appDialogConfigService=(0,P.d)(c.b),this.contentType$=new g.t(null),this.loading$=new g.t(!1),this.viewStates={waiting:0,default:1,evaluated:2,imported:3},this.viewStateSelected$=new g.t(this.viewStates.default),this.evaluationResult$=new g.t(null),this.importResult$=new g.t(null),this.viewModel$=(0,h.z)([this.contentType$,this.loading$,this.viewStateSelected$,this.evaluationResult$,this.importResult$]).pipe((0,C.T)(([f,J,Y,Q,Z])=>({contentType:f,loading:J,viewStateSelected:Y,evaluationResult:Q,importResult:Z}))),this.errors={0:"Unknown error occured.",1:"Selected content-type does not exist.",2:"Document is not a valid XML file.",3:"Selected content-type does not match the content-type in the XML file.",4:"The language is not supported.",5:"The document does not specify all languages for all entities.",6:"Language reference cannot be parsed, the language is not supported.",7:"Language reference cannot be parsed, the read-write protection is not supported.",8:"Value cannot be read, because of it has an invalid format."},this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName")}ngOnInit(){this.loading$.next(!0);const e=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),l=this.appDialogConfigService.getCurrent$();(0,D.p)([e,l]).subscribe(([r,f])=>{this.contentType$.next(r),this.formValues={defaultLanguage:f.Context.Language.Primary,contentType:this.contentTypeStaticName,file:null!=this.dialogData.files?this.dialogData.files[0]:null,resourcesReferences:"Keep",clearEntities:"None"},this.loading$.next(!1)})}ngOnDestroy(){this.contentType$.complete(),this.loading$.complete(),this.viewStateSelected$.complete(),this.evaluationResult$.complete(),this.importResult$.complete()}closeDialog(){this.dialogRef.close()}evaluateContent(){this.viewStateSelected$.next(this.viewStates.waiting),this.contentImportService.evaluateContent(this.formValues).subscribe(e=>{this.evaluationResult$.next(e),this.viewStateSelected$.next(this.viewStates.evaluated)})}importContent(){this.viewStateSelected$.next(this.viewStates.waiting),this.contentImportService.importContent(this.formValues).subscribe(e=>{this.importResult$.next(e),this.viewStateSelected$.next(this.viewStates.imported)})}back(){this.viewStateSelected$.next(this.viewStates.default),this.evaluationResult$.next(null)}fileChange(e){this.formValues.file=e.target.files[0]}filesDropped(e){this.formValues.file=e[0]}static#t=this.\u0275fac=function(l){return new(l||o)(t.rXU(i.Vh),t.rXU(i.CP),t.rXU(F.nX))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-content-import"]],hostVars:1,hostBindings:function(l,r){2&l&&t.Mr5("className",r.hostClass)},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[["ngForm","ngForm"],["fileInput",""],["appDragAndDrop","",1,"eav-dialog",3,"allowedFileTypes"],["appDragAndDrop","",1,"eav-dialog",3,"filesDropped","allowedFileTypes"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-description"],["href","https://2sxc.org/help","target","_blank"],[1,"eav-dialog-content"],["mat-raised-button","","tippy","Open file browser",3,"click"],["type","file",1,"hide",3,"change"],[1,"eav-radio-group-label"],["name","ResourcesReferences",1,"eav-radio-group",3,"ngModelChange","ngModel"],["value","Keep"],["value","Resolve"],["name","ClearEntities",1,"eav-radio-group",3,"ngModelChange","ngModel"],["value","None"],["value","All"],[1,"eav-hint"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],[1,"eav-evaluation__title"],[1,"eav-evaluation__content"],["mat-raised-button","","color","accent",3,"click"]],template:function(l,r){if(1&l&&(t.DNE(0,H,11,3,"div",2),t.nI1(1,"async")),2&l){let f;t.vxM(0,(f=t.bMT(1,1,r.viewModel$))?0:-1,f)}},dependencies:[M.YN,M.qT,M.BC,M.cb,M.vS,M.cV,v.Hl,v.$z,d.Wk,d.VT,d._g,i.E7,_.Jj,O.S],styles:[".eav-radio-group-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.eav-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}.eav-hint[_ngcontent-%COMP%]{font-size:18px;margin-top:24px;margin-bottom:16px}.eav-evaluation__title[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0;font-weight:700}.eav-evaluation__content[_ngcontent-%COMP%]{font-size:14px}.eav-evaluation__content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2px 0}"]})}return o})()},3140:(y,E,n)=>{n.d(E,{J:()=>h});var i=n(7092),g=n(8559);let h=(()=>{class C{constructor(){this.subscriptions=new i.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(T){return new(T||C)};static#e=this.\u0275dir=g.FsC({type:C})}return C})()},4575:(y,E,n)=>{n.d(E,{S:()=>D});var i=n(8559),g=n(8537),h=n(3140),C=n(3347);let D=(()=>{class c extends h.J{constructor(s,a,u){super(),this.zone=a,this.snackBar=u,this.markStyle="outline",this.allowedFileTypes="",this.filesDropped=new i.bkB,this.dropAreaClass="eav-droparea",this.dragClass="eav-dragover",this.timeouts=[],this.element=s.nativeElement}ngOnInit(){this.markStyleClass=`eav-droparea-${this.markStyle}`,this.element.classList.add(this.dropAreaClass,this.markStyleClass),this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,g.R)(this.element,"dragover").subscribe(s=>{s.preventDefault(),s.stopPropagation(),this.clearTimeouts(),this.element.classList.add(this.dragClass)})),this.subscriptions.add((0,g.R)(this.element,"dragleave").subscribe(s=>{s.preventDefault(),s.stopPropagation(),this.timeouts.push(window.setTimeout(()=>{this.element.classList.remove(this.dragClass)},50))}))})}ngOnDestroy(){this.clearTimeouts(),this.element.classList.remove(this.dropAreaClass,this.markStyleClass,this.dragClass),super.ngOnDestroy()}onDrop(s){s.preventDefault(),s.stopPropagation(),this.clearTimeouts(),this.element.classList.remove(this.dragClass);let u=Array.from(s.dataTransfer.files);u=this.filterTypes(u,this.allowedFileTypes),u.length>0&&this.filesDropped.emit(u)}clearTimeouts(){for(const s of this.timeouts)clearTimeout(s);this.timeouts=[]}filterTypes(s,a){if(""===a)return s;const u=a.split(",").map(p=>p.toLocaleLowerCase()),S=s.filter(p=>{const t=p.name.lastIndexOf(".");if(t<=0)return!1;const x=p.name.substring(t+1).toLocaleLowerCase();return u.includes(x)});if(s.length!==S.length){const p=this.allowedFileTypes.replace(/\,/g,", ");this.snackBar.open(S.length?"Some files were filtered out. This drop location only accepts file types: "+p:"This drop location only accepts file types: "+p,null,{duration:5e3})}return S}static#t=this.\u0275fac=function(a){return new(a||c)(i.rXU(i.aKT),i.rXU(i.SKi),i.rXU(C.UG))};static#e=this.\u0275dir=i.FsC({type:c,selectors:[["","appDragAndDrop",""]],hostBindings:function(a,u){1&a&&i.bIt("drop",function(p){return u.onDrop(p)})},inputs:{markStyle:"markStyle",allowedFileTypes:"allowedFileTypes"},outputs:{filesDropped:"filesDropped"},standalone:!0,features:[i.Vt3]})}return c})()},693:(y,E,n)=>{function i(h){return new Promise((C,D)=>{const c=new FileReader;c.readAsDataURL(h),c.onload=()=>{C(c.result.split(",")[1])},c.onerror=T=>{D(T)}})}function g(h){return new Promise((C,D)=>{const c=new FileReader;c.readAsText(h),c.onload=()=>{C(c.result)},c.onerror=T=>{D(T)}})}n.d(E,{d:()=>g,n:()=>i})},1576:(y,E,n)=>{n.d(E,{W:()=>g});var i=n(3826);class g{static#t=this.boolEquals={equal:i.a.valueEquals};static#e=this.numberEquals={equal:i.a.valueEquals};static#n=this.stringEquals={equal:i.a.valueEquals};static#o=this.objectEquals={equal:i.a.objectsEqual}}},9234:(y,E,n)=>{n.d(E,{Gg:()=>x,Tr:()=>R,gb:()=>t});var i=n(1567),g=n(6647),h=n(6301),C=n(271),D=n(4979),c=n(3472),T=n(4839),s=n(1736),a=n(8559),u=n(6443),S=n(4821);const t="admin/entity/",x="admin/entity/list";let R=(()=>{class m extends D.V{constructor(d,v,M,O){super(new c.B("EntityService",!1)),this.http=d,this.formConfig=v,this.dnnContext=M,this.queryService=O}getEntities$(d){return d.pipe((0,i.p)(v=>null!=v),(0,g.n)(v=>this.getAvailableEntities(v.contentTypeName).pipe((0,h.t)(1))))}getAvailableEntities(d,v){var M=this.log.rxTap("getEntities",{enabled:!0});return this.queryService.getEntities({contentTypes:[d],itemIds:v,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe(M.pipe(),(0,C.T)(O=>O.Default))}delete(d,v,M,O,P){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(t+"delete"),{params:{contentType:d,id:v.toString(),appId:this.formConfig.config.appId,force:M.toString(),...O&&{parentId:O.toString()},...O&&P&&{parentField:P}}})}static#t=this.\u0275fac=function(v){return new(v||m)(a.KVO(u.Qq),a.KVO(s.S),a.KVO(S.ob),a.KVO(T.c))};static#e=this.\u0275prov=a.jDH({token:m,factory:m.\u0275fac})}return m})()},4858:(y,E,n)=>{n.d(E,{D:()=>a});var i=n(8559),g=n(6042),h=n(271),C=n(4979),D=n(3472),c=n(1576),T=n(3826);let a=(()=>{class u extends C.V{constructor(){super(new D.B("FeaturesService",!1)),this.dialogContext$=new g.m(1),this.dialogContextSignal=(0,i.vPA)(null)}loadFromService(p){p.getCurrent$().subscribe(t=>this.load(t.Context))}load(p){this.dialogContext$.next(p),this.dialogContextSignal.set(p)}getAll(){return(0,i.EWP)(()=>this.dialogContextSignal()?.Features??[],{equal:T.a.arraysEqual})}get$(p){return this.dialogContext$.pipe((0,h.T)(t=>t?.Features.find(x=>x.nameId===p)))}getSignal(p){return(0,i.EWP)(()=>this.dialogContextSignal()?.Features.find(t=>t.nameId===p),{equal:T.a.objectsEqual})}isEnabled$(p){return this.get$(p).pipe((0,h.T)(t=>t?.isEnabled??!1))}isEnabled(p){return(0,i.EWP)(()=>this.dialogContextSignal()?.Features.find(t=>t.nameId===p)?.isEnabled??!1,c.W.boolEquals)}static#t=this.\u0275fac=function(t){return new(t||u)};static#e=this.\u0275prov=i.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}return u})()},9431:(y,E,n)=>{n.d(E,{B:()=>D});var i=n(8559),g=n(9074),h=n(8172),C=n(3347);let D=(()=>{class c{constructor(s){this.snackBar=s,this.debugState=(0,i.vPA)(null),this.isDebug=(0,i.EWP)(()=>!!this.debugState()?.allowDebugMode&&!!this.debugState()?.debugEnabled),this.debugEnabled$=(0,g.br)(this.isDebug);const a={id:0,debugEnabled:"true"===sessionStorage.getItem(h.tn),allowDebugMode:!1};this.debugState.set(a)}allowDebug(s){const a=this.debugState();if(a.allowDebugMode===s)return;const u={...a,allowDebugMode:s};this.debugState.set(u)}toggleDebugEnabled(){const s=this.debugState();if(!s.allowDebugMode)return void this.snackBar.open("You do not have permissions to enter developer mode",null,{duration:3e3});const a={...s,debugEnabled:!s.debugEnabled};this.debugState.set(a),this.snackBar.open(a.debugEnabled?"developer mode on":"developer mode off",null,{duration:3e3})}static#t=this.\u0275fac=function(a){return new(a||c)(i.KVO(C.UG))};static#e=this.\u0275prov=i.jDH({token:c,factory:c.\u0275fac,providedIn:"root"})}return c})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.01/dist/ng-edit/projects_eav-ui_src_app_content-import_content-import_component_ts.b3cbd4cf8d798f7c.js.map