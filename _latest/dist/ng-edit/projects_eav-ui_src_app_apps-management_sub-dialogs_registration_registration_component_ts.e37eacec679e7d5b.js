"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_sub-dialogs_registration_registration_component_ts"],{1038:(v,l,e)=>{e.r(l),e.d(l,{RegistrationComponent:()=>O});var d=e(3158),p=e(745),s=e(1203),g=e(5348),C=e(3889),h=e(9673),y=e(1528),T=e(3231),t=e(3184),u=e(5758),E=e(2528),m=e(6362),Z=e(6190),r=e(1961),x=e(5590),M=e(7317);function U(i,c){if(1&i){const n=t.EpF();t.TgZ(0,"button",16),t.NdJ("click",function(){t.CHM(n);const a=t.oxw().ngIf;return t.oxw().openLicenseRegistration(a.systemInfoSet)}),t._UZ(1,"mat-icon",17),t.TgZ(2,"span"),t._uU(3,"Register"),t.qZA()()}}function R(i,c){if(1&i){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2),t._uU(3,"2sxc Registration"),t.qZA()(),t.TgZ(4,"p",3),t._uU(5," Here you can register your system (registration is free). This happens through our "),t.TgZ(6,"a",4),t._uU(7,"Patrons"),t.qZA(),t._uU(8," platform. "),t.qZA(),t.TgZ(9,"p",3)(10,"b"),t._uU(11,"Status:"),t.qZA(),t._uU(12),t._UZ(13,"br"),t.TgZ(14,"b"),t._uU(15,"Fingerprint:"),t.qZA(),t.TgZ(16,"span",5),t.NdJ("click",function(){const _=t.CHM(n).ngIf;return t.oxw().copyToClipboard(_.systemInfoSet.System.Fingerprint)}),t._uU(17),t.qZA(),t._UZ(18,"br")(19,"br"),t.qZA(),t.TgZ(20,"div",6)(21,"mat-card",7)(22,"mat-card-header")(23,"div",8),t._UZ(24,"mat-icon",9),t.qZA(),t.TgZ(25,"mat-card-title"),t._uU(26,"Automatic Registration"),t.qZA(),t.TgZ(27,"mat-card-subtitle"),t._uU(28,"The simple way"),t.qZA()(),t.TgZ(29,"mat-card-content")(30,"p"),t._uU(31," This will open 2sxc Patrons and give it the system fingerprint, so you can then log in and assign it a name and features you want to activate. "),t.qZA(),t.TgZ(32,"div",10),t.YNc(33,U,4,0,"button",11),t.TgZ(34,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().retrieveLicense()}),t._UZ(35,"mat-icon",13),t.TgZ(36,"span"),t._uU(37,"Retrieve license"),t.qZA()()()()(),t.TgZ(38,"mat-card",14)(39,"mat-card-header")(40,"div",8),t._UZ(41,"mat-icon",15),t.qZA(),t.TgZ(42,"mat-card-title"),t._uU(43,"Manual Registration"),t.qZA(),t.TgZ(44,"mat-card-subtitle"),t._uU(45,"Offline or special scenarios"),t.qZA()(),t.TgZ(46,"mat-card-content")(47,"p"),t._uU(48," For offline or special scenarios you can just go to 2sxc Patrons and copy/paste the fingerprint yourself. "),t._UZ(49,"br"),t._uU(50," Click on the fingerprint above to copy it to your clipboard. "),t.qZA(),t.TgZ(51,"div",10)(52,"button",16),t.NdJ("click",function(){return t.CHM(n),t.oxw().registerManually()}),t._UZ(53,"mat-icon",17),t.TgZ(54,"span"),t._uU(55,"Register Manually"),t.qZA()(),t.TgZ(56,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().openLicenseUpload()}),t._UZ(57,"mat-icon",19),t.TgZ(58,"span"),t._uU(59,"Upload license"),t.qZA()()()()()(),t.TgZ(60,"div",20)(61,"button",21),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeDialog()}),t._uU(62," Close "),t.qZA()(),t.BQk()}if(2&i){const n=c.ngIf;t.xp6(12),t.hij(" ",n.systemInfoSet?"this system is registered to "+n.systemInfoSet.License.Owner:"this system is not yet registered"," "),t.xp6(4),t.Q6J("tippy","Click to copy to clipboard"),t.xp6(1),t.hij(" ",n.systemInfoSet.System.Fingerprint,""),t.xp6(16),t.Q6J("ngIf",n.systemInfoSet)}}const b=function(i){return{systemInfoSet:i}};let O=(()=>{class i{constructor(n,o,a,_,f,P,A){this.dialogRef=n,this.globalConfigService=o,this.zoneService=a,this.featuresConfigService=_,this.snackBar=f,this.dialog=P,this.viewContainerRef=A,this.hostClass="dialog-component",this.debugEnabled$=this.globalConfigService.getDebugEnabled$()}ngOnInit(){this.systemInfoSet$=this.zoneService.getSystemInfo().pipe((0,d.K)(()=>(0,p.of)(void 0)),(0,s.B)())}closeDialog(){this.dialogRef.close()}copyToClipboard(n){(0,h.v)(n),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}openLicenseRegistration(n){window.open(`https://patrons.2sxc.org/register?fingerprint=${n.System.Fingerprint}`,"_blank")}retrieveLicense(){this.featuresConfigService.retrieveLicense().subscribe({error:()=>{this.snackBar.open("Failed to retrieve license. Please check console for more information",void 0,{duration:3e3})},next:n=>{this.snackBar.open(`License ${n.Success?"Info":"Error"}: ${n.Message}`,void 0,{duration:n.Success?3e3:1e5,panelClass:n.Success?void 0:"snackbar-error"})}})}registerManually(){window.open("https://patrons.2sxc.org/","_blank")}openLicenseUpload(){this.dialog.open(C.U,{data:{title:"Upload license",description:"",allowedFileTypes:"json",upload$:o=>this.featuresConfigService.uploadLicense(o[0])},autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"})}}return i.\u0275fac=function(n){return new(n||i)(t.Y36(u.so),t.Y36(g.b),t.Y36(T.b),t.Y36(y.G),t.Y36(E.ux),t.Y36(u.uw),t.Y36(t.s_b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-registration"]],hostVars:1,hostBindings:function(n,o){2&n&&t.Ikx("className",o.hostClass)},decls:2,vars:5,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://patrons.2sxc.org/","target","_blank"],[3,"tippy","click"],[1,"mat-cards-div"],[1,"mat-card-left"],["mat-card-avatar",""],["svgIcon","settings-applications"],[1,"card-actions"],["mat-button","","mat-button","","tippy","Register",3,"click",4,"ngIf"],["mat-button","","tippy","Retrieve license",3,"click"],["svgIcon","download-for-offline"],[1,"mat-card-right"],["svgIcon","waving-hand"],["mat-button","","mat-button","","tippy","Register",3,"click"],["svgIcon","app-registration"],["mat-button","","tippy","Upload license",3,"click"],["svgIcon","cloud-upload"],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"]],template:function(n,o){1&n&&(t.YNc(0,R,63,4,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.VKq(3,b,t.lcZ(1,1,o.systemInfoSet$)))},directives:[m.O5,u.uh,Z.$,r.a8,r.dk,r.kc,x.Hw,r.n5,r.$j,r.dn,M.lW],pipes:[m.Ov],styles:[".mat-cards-div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-evenly}.mat-card-left[_ngcontent-%COMP%]{width:50%;margin-right:4px}.mat-card-right[_ngcontent-%COMP%]{width:50%;margin-left:4px}.mat-card-title[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.mat-card-subtitle[_ngcontent-%COMP%]{font-size:14px}.mat-card-content[_ngcontent-%COMP%]{font-size:14px;margin-top:12px}button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:4px}"]}),i})()},9673:(v,l,e)=>{function d(p){const s=document.createElement("textarea");s.value=p,s.setAttribute("readonly",""),s.style.position="absolute",s.style.left="-9999px",document.body.appendChild(s);const g=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);s.select(),document.execCommand("copy"),document.body.removeChild(s),g&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(g))}e.d(l,{v:()=>d})}}]);
//# sourceMappingURL=https://sources.2sxc.org/14.09.00/ng-edit/projects_eav-ui_src_app_apps-management_sub-dialogs_registration_registration_component_ts.e37eacec679e7d5b.js.map