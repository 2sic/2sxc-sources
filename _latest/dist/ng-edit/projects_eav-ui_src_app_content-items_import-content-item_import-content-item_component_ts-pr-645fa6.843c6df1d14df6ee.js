"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6"],{7693:(D,m,t)=>{t.d(m,{X:()=>l,g:()=>i});var u=t(271),I=t(8873),d=t(7580),_=t(6443),c=t(4821);const l="admin/type/",o="admin/type/scopes";let i=(()=>{class s{constructor(n,r,g){this.http=n,this.context=r,this.dnnContext=g}apiUrl(n){return this.dnnContext.$2sxc.http.apiUrl(n)}retrieveContentType(n){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:n}})}retrieveContentTypes(n){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:n}})}getScopes(){return this.http.get(this.apiUrl(o),{params:{appId:this.context.appId.toString()}}).pipe((0,u.T)(n=>{const r=n.old;return Object.keys(r).map(y=>({name:r[y],value:y}))}))}getScopesV2(){return this.http.get(this.apiUrl(o),{params:{appId:this.context.appId.toString()}}).pipe((0,u.T)(n=>n.scopes))}save(n){return this.http.post(this.apiUrl("admin/type/save"),n,{params:{appid:this.context.appId.toString()}})}delete(n){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:n.StaticName}})}import(n){const r=new FormData;for(const g of n)r.append("File",g);return this.http.post(this.apiUrl("admin/type/import"),r,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(n){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:n}})}static#t=this.\u0275fac=function(r){return new(r||s)(d.KVO(_.Qq),d.KVO(I.o),d.KVO(c.ob))};static#e=this.\u0275prov=d.jDH({token:s,factory:s.\u0275fac})}return s})()},6754:(D,m,t)=>{t.r(m),t.d(m,{ImportContentItemComponent:()=>l});var u=t(7941),I=t(3550),d=t(336),_=t(5437),c=t(7580);let l=(()=>{class a{constructor(o){this.uploadType=I.HL.ContentItem,this.contentItemsService=(0,_.d)(d.F),o.title??="Import Single Item",o.description??="Select an item file (json) from your computer to import.",o.allowedFileTypes??="json",o.upload$??=p=>this.contentItemsService.importItem(p[0])}static#t=this.\u0275fac=function(p){return new(p||a)(c.rXU(u.Vh))};static#e=this.\u0275cmp=c.VBU({type:a,selectors:[["app-import-content-item"]],standalone:!0,features:[c.aNF],decls:1,vars:1,consts:[[3,"uploadType"]],template:function(p,h){1&p&&c.nrm(0,"app-file-upload-dialog",0),2&p&&c.Y8G("uploadType",h.uploadType)},dependencies:[I.jj]})}return a})()},5959:(D,m,t)=>{t.d(m,{h6:()=>p,zZ:()=>T});var u=t(271),I=t(7693),d=t(8873),_=t(7580),c=t(6443),l=t(4821);const a="admin/field/",T="admin/field/all",o="admin/field/GetSharedFields";let p=(()=>{class h{constructor(e,i,s){this.http=e,this.context=i,this.dnnContext=s}apiUrl(e){return this.dnnContext.$2sxc.http.apiUrl(e)}typeListRetrieve(){return this.http.get(this.apiUrl(a+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(a+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,u.T)(e=>e.map(s=>({dataType:s.Type.substring(0,s.Type.indexOf("-")),inputType:s.Type,label:s.Label,description:s.Description,isDefault:s.IsDefault,isObsolete:s.IsObsolete,isRecommended:s.IsRecommended,obsoleteMessage:s.ObsoleteMessage,icon:s.IsDefault?"star":s.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(a+"ReservedNames"))}getFields(e){return this.http.get(this.apiUrl(T),{params:{appid:this.context.appId.toString(),staticName:e}}).pipe((0,u.T)(i=>{if(i)for(const s of i){if(!s.Metadata)continue;const O=s.Metadata;O.merged={...O.All,...O[s.Type],...O[s.InputType]}}return i}))}getShareableFields(){return this.http.get(this.apiUrl(o),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(e){return this.http.get(this.apiUrl(o),{params:{appid:this.context.appId.toString(),attributeId:e.toString()}})}addInheritedField(e,i,s,O){return this.http.post(this.apiUrl(a+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:e.toString(),SourceType:i,SourceField:s,name:O}})}share(e,i=!0){return this.http.post(this.apiUrl(a+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:e.toString(),share:i}})}inherit(e,i){return this.http.post(this.apiUrl(a+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:e.toString(),inheritMetadataOf:i}})}reOrder(e,i){return this.http.post(this.apiUrl(a+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:i.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,i){return this.http.post(this.apiUrl(I.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:i.Id.toString(),attributeId:e.Id.toString()}})}rename(e,i,s){return this.http.post(this.apiUrl(a+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:i.toString(),attributeId:e.toString(),newName:s}})}delete(e,i){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(a+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:i.Id.toString(),attributeId:e.Id.toString()}})}add(e,i){return this.http.post(this.apiUrl(a+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:i.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,i,s){return this.http.post(this.apiUrl(a+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:e.toString(),field:i,inputType:s}})}static#t=this.\u0275fac=function(i){return new(i||h)(_.KVO(c.Qq),_.KVO(d.o),_.KVO(l.ob))};static#e=this.\u0275prov=_.jDH({token:h,factory:h.\u0275fac})}return h})()},693:(D,m,t)=>{function u(d){return new Promise((_,c)=>{const l=new FileReader;l.readAsDataURL(d),l.onload=()=>{_(l.result.split(",")[1])},l.onerror=a=>{c(a)}})}function I(d){return new Promise((_,c)=>{const l=new FileReader;l.readAsText(d),l.onload=()=>{_(l.result)},l.onerror=a=>{c(a)}})}t.d(m,{d:()=>I,n:()=>u})},9234:(D,m,t)=>{t.d(m,{Gg:()=>e,Tr:()=>i,gb:()=>E});var u=t(1567),I=t(6647),d=t(6301),_=t(271),c=t(5506),l=t(4839),a=t(5437),T=t(7580),o=t(6443),p=t(4821);const h={enabled:!1,name:"EntityService",specs:{all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1}},E="admin/entity/",e="admin/entity/list";let i=(()=>{class s{constructor(n,r){this.http=n,this.dnnContext=r,this.queryService=(0,a.d)(l.c),this.log=new c.B(h)}getEntities$(n){return this.log.fnIf("getEntities"),n.pipe((0,u.p)(r=>null!=r),(0,I.n)(r=>this.getAvailableEntities(r.contentTypeName).pipe((0,d.t)(1))))}getAvailableEntities(n,r){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[n],itemIds:r,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,_.T)(y=>y.Default))}delete(n,r,g,y,S,v){return this.log.fnIf("delete",{appId:n,contentType:r,entityId:g,force:y,parentId:S,parent}),this.http.delete(this.dnnContext.$2sxc.http.apiUrl(E+"delete"),{params:{contentType:r,id:g.toString(),appId:n,force:y.toString(),...S&&{parentId:S.toString()},...S&&v&&{parentField:v}}})}static#t=this.\u0275fac=function(r){return new(r||s)(T.KVO(o.Qq),T.KVO(p.ob))};static#e=this.\u0275prov=T.jDH({token:s,factory:s.\u0275fac})}return s})()},4839:(D,m,t)=>{t.d(m,{c:()=>l});var u=t(5506),I=t(8873),d=t(7580),_=t(6443);const c={enabled:!1,name:"QueryService",specs:{all:!1,getAvailableEntities:!1,getEntities:!1}};let l=(()=>{class a{constructor(o,p){this.http=o,this.context=p,this.log=new u.B(c)}getAvailableEntities(o,p,h,E){this.log.fnIf("getAvailableEntities",{queryUrl:o,params:p,fields:h,entitiesFilter:E});const e=!!p,n=(((p?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(e?`&${p}`:"")+"&$select="+(h??"")).substring(1);return this.http.post(`app/auto/query/${o}?${n}`,{Guids:E})}getEntities({contentTypes:o,itemIds:p,fields:h,log:E}){this.log.fnIf("getEntities",{log:E,contentTypes:o,itemIds:p,fields:h});const i=("&typeNames="+(o?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(p?.join(",")??"")+"&$select="+(h??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${i}`,{})}static#t=this.\u0275fac=function(p){return new(p||a)(d.KVO(_.Qq),d.KVO(I.o))};static#e=this.\u0275prov=d.jDH({token:a,factory:a.\u0275fac})}return a})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.02/dist/ng-edit/projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-645fa6.843c6df1d14df6ee.js.map