"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts"],{43758:(D,c,n)=>{n.d(c,{F:()=>O});var h=n(87945),o=n(37580),m=n(31016),a=n(99293),d=n(44444),u=n(87698);const f=["*"],E=e=>({"hint-box__short":e});function g(e,r){1&e&&a.eu8(0)}function M(e,r){if(1&e&&(a.j41(0,"mat-hint"),a.DNE(1,g,1,0,"ng-container",2),a.k0s()),2&e){a.XpG();const s=a.sdS(4);a.R7$(),a.Y8G("ngTemplateOutlet",s)}}function A(e,r){1&e&&a.eu8(0)}function I(e,r){if(1&e&&(a.j41(0,"mat-error"),a.DNE(1,A,1,0,"ng-container",2),a.k0s()),2&e){a.XpG();const s=a.sdS(4);a.R7$(),a.Y8G("ngTemplateOutlet",s)}}function t(e,r){1&e&&a.SdG(0)}let O=(()=>{class e{constructor(){this.isError=(0,o.hFB)(!1),this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(C){return new(C||e)};static#e=this.\u0275cmp=a.VBU({type:e,selectors:[["app-field-hint"]],inputs:{isError:[1,"isError"]},ngContentSelectors:f,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(C,v){if(1&C){const P=a.RV6();a.NAR(),a.j41(0,"div",1),a.bIt("click",function(){return d.eBV(P),d.Njj(v.toggleIsShort())}),a.nVh(1,M,2,1,"mat-hint")(2,I,2,1,"mat-error"),a.k0s(),a.DNE(3,t,1,0,"ng-template",null,0,a.C5r)}if(2&C){let P;a.Y8G("ngClass",a.eq3(2,E,v.isShort)),a.R7$(),a.vxM(!1===(P=v.isError())?1:!0===P?2:-1)}},dependencies:[m.M,u.c,u.b,h.YU,h.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return e})()},47574:(D,c,n)=>{n.r(c),n.d(c,{CreateInheritedAppComponent:()=>P});var h=n(44444),o=n(34456),m=n(84175),a=n(31403),d=n(81863),u=n(31016),f=n(93840),E=n(64043),g=n(29658),M=n(12938),A=n(43758),I=n(83583),t=n(99293),O=n(3347),e=n(87698),r=n(23731),s=n(88622);function C(l,R){if(1&l&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&l){const _=R.$implicit;t.Y8G("value",_.Id),t.R7$(),t.SpI(" ",_.Name," ")}}function v(l,R){1&l&&(t.j41(0,"app-field-hint",9),t.EFF(1," Required "),t.k0s()),2&l&&t.Y8G("isError",!0)}let P=(()=>{class l{constructor(_,p){this.dialog=_,this.snackBar=p,this.hostClass="dialog-component",this.appsListService=(0,M.d)(I.U),this.loading=(0,h.vPA)(!1),this.inheritableApps=this.appsListService.getInheritable().value,this.form=this.buildForm()}closeDialog(){this.dialog.close()}create(){this.form.disable(),this.loading.set(!0);const _=this.form.controls.inheritId.value,p=this.inheritableApps().find(i=>i.Id===_).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(p,_).subscribe({error:()=>{this.form.enable(),this.loading.set(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new o.J3({inheritId:new o.hs(null,[o.k0.required])})}static#t=this.\u0275fac=function(p){return new(p||l)(t.rXU(d.k),t.rXU(O.UG))};static#e=this.\u0275cmp=t.VBU({type:l,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(p,i){2&p&&t.Avn("className",i.hostClass)},decls:22,vars:5,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click","disabled"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"value"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",1,"eav-action-button",3,"click","disabled"]],template:function(p,i){1&p&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Create inherited App"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return i.closeDialog()}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4),t.nrm(8,"router-outlet"),t.j41(9,"p"),t.EFF(10," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),t.k0s(),t.j41(11,"form",5)(12,"mat-form-field",6)(13,"mat-label"),t.EFF(14,"Inherit App"),t.k0s(),t.j41(15,"mat-select",7),t.Z7z(16,C,2,2,"mat-option",8,t.fX1),t.k0s()(),t.nVh(18,v,2,1,"app-field-hint",9),t.k0s()(),t.j41(19,"mat-dialog-actions",10)(20,"button",11),t.bIt("click",function(){return i.create()}),t.EFF(21," Create "),t.k0s()()()),2&p&&(t.R7$(4),t.Y8G("disabled",i.loading()),t.R7$(7),t.Y8G("formGroup",i.form),t.R7$(4),t.Y8G("placeholder",void 0===i.inheritableApps()?"Loading...":null===i.inheritableApps()||0===i.inheritableApps().length?"No inheritable apps found":""),t.R7$(),t.Dyx(i.inheritableApps()),t.R7$(2),t.vxM(i.form.controls.inheritId.touched&&null!=i.form.controls.inheritId.errors&&i.form.controls.inheritId.errors.required?18:-1),t.R7$(2),t.Y8G("disabled",i.loading()||!i.form.valid))},dependencies:[g.n3,o.YN,o.qT,o.BC,o.cb,o.X1,o.j4,o.JD,u.M,e.j,e.M,E.M,E.g,r.M,a.M,d.M,m.Hl,m.$z,s.M,f.m_,f.An,A.F],encapsulation:2})}return l})()},83583:(D,c,n)=>{n.d(c,{U:()=>I});var h=n(89204),o=n(46443),m=n(24467),a=n(99293),d=n(44444);const g="admin/app/app";let I=(()=>{class t extends m.B{getAllLive(e){return(0,o.fx)(()=>(e(),{url:this.apiUrl("admin/app/list"),params:{zoneId:this.zoneId}}))}getInheritable(){return(0,o.fx)(()=>({url:this.apiUrl("admin/app/InheritableApps"),params:{zoneId:this.zoneId}}))}getPendingApps(){return(0,o.fx)(()=>({url:this.apiUrl("admin/app/GetPendingApps"),params:{zoneId:this.zoneId}}))}create(e,r,s){return this.http.post(this.apiUrl(g),{},{params:{zoneId:this.zoneId,name:e,...null!=r&&{inheritAppId:r},...null!=s&&{templateId:s}}})}createTemplate(e,r){const s=encodeURIComponent(r);return this.http.post(`sys/install/RemotePackage?packageUrl=${e}&newName=${s}`,{})}installPendingApps(e){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),e,{params:{zoneId:this.zoneId}})}delete(e){return this.http.delete(this.apiUrl(g),{params:{zoneId:this.zoneId,appId:e.toString()}})}flushCache(e){var r=this;return(0,h.A)(function*(){return r.getStatusPromise("admin/app/flushcache",{params:{zoneId:r.zoneId,appId:e.toString()}})})()}static#t=this.\u0275fac=(()=>{let e;return function(s){return(e||(e=a.xGo(t)))(s||t)}})();static#e=this.\u0275prov=d.jDH({token:t,factory:t.\u0275fac})}return t})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.05/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts.17b56d664315a7bf.js.map