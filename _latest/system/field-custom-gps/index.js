(()=>{"use strict";var t={941:(t,e,n)=>{n.d(e,{Tq:()=>He});const r={production:!1};function i(t){return"function"==typeof t}var o=function(t,e){return o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},o(t,e)};function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;var u,p=((u=function(t){var e;e=this,Error.call(e),e.stack=(new Error).stack,this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}).prototype=Object.create(Error.prototype),u.prototype.constructor=u,u);function h(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var d=function(){function t(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}var e;return t.prototype.unsubscribe=function(){var t,e,n,r,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=a(s),h=u.next();!h.done;h=u.next())h.value.remove(this)}catch(e){t={error:e}}finally{try{h&&!h.done&&(e=u.return)&&e.call(u)}finally{if(t)throw t.error}}else s.remove(this);var d=this.initialTeardown;if(i(d))try{d()}catch(t){o=t instanceof p?t.errors:[t]}var g=this._finalizers;if(g){this._finalizers=null;try{for(var v=a(g),m=v.next();!m.done;m=v.next()){var y=m.value;try{f(y)}catch(t){o=null!=o?o:[],t instanceof p?o=l(l([],c(o)),c(t.errors)):o.push(t)}}}catch(t){n={error:t}}finally{try{m&&!m.done&&(r=v.return)&&r.call(v)}finally{if(n)throw n.error}}}if(o)throw new p(o)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)f(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}},t.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},t.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},t.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&h(e,t)},t.prototype.remove=function(e){var n=this._finalizers;n&&h(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=((e=new t).closed=!0,e),t}();function f(t){i(t)?t():t.unsubscribe()}d.EMPTY;var g={setTimeout:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=g.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,l([t,e],c(n))):setTimeout.apply(void 0,l([t,e],c(n)))},clearTimeout:function(t){var e=g.delegate;return((null==e?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function v(){}var m=y("C",void 0,void 0);function y(t,e,n){return{kind:t,value:e,error:n}}var b=function(t){function e(e){var n,r=t.call(this)||this;return r.isStopped=!1,e?(r.destination=e,((n=e)instanceof d||n&&"closed"in n&&i(n.remove)&&i(n.add)&&i(n.unsubscribe))&&e.add(r)):r.destination=S,r}return s(e,t),e.create=function(t,e,n){return new w(t,e,n)},e.prototype.next=function(t){this.isStopped?j(function(t){return y("N",t,void 0)}(t),this):this._next(t)},e.prototype.error=function(t){this.isStopped?j(y("E",void 0,t),this):(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped?j(m,this):(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(d);Function.prototype.bind;var _=function(){function t(t){this.partialObserver=t}return t.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(t){x(t)}},t.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(t){x(t)}else x(t)},t.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(t){x(t)}},t}(),w=function(t){function e(e,n,r){var o,s=t.call(this)||this;return o=i(e)||!e?{next:null!=e?e:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:e,s.destination=new _(o),s}return s(e,t),e}(b);function x(t){!function(t){g.setTimeout((function(){throw t}))}(t)}function j(t,e){var n=null;n&&g.setTimeout((function(){return n(t,e)}))}var S={closed:!0,next:v,error:function(t){throw t},complete:v},O=function(t){function e(e,n,r,i,o,s){var a=t.call(this,e)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(t){try{n(t)}catch(t){e.error(t)}}:t.prototype._next,a._error=i?function(t){try{i(t)}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._error,a._complete=r?function(){try{r()}catch(t){e.error(t)}finally{this.unsubscribe()}}:t.prototype._complete,a}return s(e,t),e.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;t.prototype.unsubscribe.call(this),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}},e}(b);function k(t){return t}function I(t,e,n){var r,o=i(t)||e||n?{next:t,error:e,complete:n}:t;return o?(r=function(t,e){var n;null===(n=o.subscribe)||void 0===n||n.call(o);var r,i,s,a,c=!0;t.subscribe((r=function(t){var n;null===(n=o.next)||void 0===n||n.call(o,t),e.next(t)},i=function(){var t;c=!1,null===(t=o.complete)||void 0===t||t.call(o),e.complete()},s=function(t){var n;c=!1,null===(n=o.error)||void 0===n||n.call(o,t),e.error(t)},a=function(){var t,e;c&&(null===(t=o.unsubscribe)||void 0===t||t.call(o)),null===(e=o.finalize)||void 0===e||e.call(o)},new O(e,r,i,s,a)))},function(t){if(function(t){return i(null==t?void 0:t.lift)}(t))return t.lift((function(t){try{return r(t,this)}catch(t){this.error(t)}}));throw new TypeError("Unable to lift unknown Observable type")}):k}class L{constructor(t,e,n=!0,r=!0){this.logger=t,this.name=e,this.enabled=n,this.jsonify=r}generateFn(t,e,n){if(!this.enabled||!this.logger.enabled)return t=>t;const r=`${this.name}/${t}${e?`-${e}`:""}`;let i=0;return t=>t.pipe(I((t=>{const e=null==t?t:this.jsonify?JSON.parse(JSON.stringify(t)):t;return this.logger.a(r+" #"+i++,{showData:e})})))}rxTap(t,{enabled:e=!0,jsonify:n=!0}={enabled:!0,jsonify:!0}){return new L(this.logger,`${this.name}-${t}`,e,n)}pipe(t){return this.generateFn("pipe",t)}map(t){return this.generateFn("map",t)}filter(t){return this.generateFn("filter",t)}shareReplay(t){return this.generateFn("shareReplay",t)}distinctUntilChanged(t){return this.generateFn("distinctUntilChanged",t)}start(){return this.generateFn("start")}end(){return this.generateFn("end")}step(t){return this.generateFn("step"+t)}part(t){return this.generateFn("part",t)}read(t){return this.generateFn("read",t)}}class E{constructor(){this.enabled=!1}values(t,e){}a(t,e){}r(t,e,n){return t}rSilent(t,e){return t}rNull(t){return null}rTrue(t){throw!0}rFalse(t){throw!1}end(t,e){}}class ${constructor(t){this.svcId="noop",this.name="noop",this.enableChildren=!1,this.specs=t??{}}get enabled(){return!1}extendName(t){return this}inherit(t){}forceEnable(t){}a(t,e){}aIfInList(t,e,n,r){}aIf(t,e,n){}rxTap(t,e){return new L(this,"noop")}fn(t,e,n){return new E}fnCond(t,e,n,r){return new E}fnIf(t,e,n){return new E}fnIfInList(t,e,n,r,i){return new E}}function C({message:t,callStack:e=!1,data:n=null}){if(t="ðŸªµ "+t,1==e)console.groupCollapsed(`${t}`,n),console.trace(),console.groupEnd();else{if(!n)return console.log(`${t}`);const e=Object.keys(n);if(0===e.length)return console.log(`${t}`);if(1===e.length){const r=e[0],i=n[r];return"string"==typeof i?console.log(`${t} [string:${i.length}] '${r}'='${i}'`):console.log(`${t} [${typeof i}] '${r}'=`,i)}console.log(`${t} [${e.length} data-items]`,n)}}class F{constructor(t,e,n,r){this.parent=t,this.fnName=e,this.#t(n,r)}get enabled(){return this.parent.enabled}#t(t,e,n=!0){this.parent.enabled&&(t??="",t&&n&&(t=` ${t}`),e="function"==typeof e?e():e,C({message:`${this.parent.nameWithSvcId}.${this.fnName}()${t}`,data:e}))}a(t,e){this.#t("/"+t,e,!1)}values(t,e){t&&this.parent.enabled&&(e=e?` ${e} `:"",this.#t("/values"+e,t,!1))}r(t,e){return this.#t("/return"+(e?" "+e:""),{result:t},!1),t}rSilent(t,e){return this.#t("/return"+(e?" "+e:""),null,!1),t}rNull(t){return this.#t("/return NULL"+(t?" "+t:""),null,!1),null}rTrue(t){return this.#t("/return TRUE"+(t?" "+t:""),null,!1),!0}rFalse(t){return this.#t("/return FALSE"+(t?" "+t:""),null,!1),!1}end(t,e){this.#t("/end"+(t?" "+t:""),e,!1)}}class A{get enabled(){return this.#e}#e;#n(t){this.#e=t&&!r.production}constructor(t){this.svcId=Math.random().toString(36).substring(2,5),this.#r(t.name),this.#e=t.enabled,this.enableChildren=t.enableChildren??!1,this.specs=t.specs}#r(t){this.name=t,this.nameWithSvcId=`${t}-${this.svcId}`}extendName(t){return this.#r(`${this.name}${t}`),this}inherit(t){this.enabled||(this.#n(t.enabled),t.enabled&&this.a(`Enabled: Inheriting log settings from parent ${t.nameWithSvcId}`))}forceEnable(t){null==t||this.enabled||(t&&this.a("Enabled: Forced to enable log"),this.#n(t))}#t(t,e,n=!0){this.enabled&&(t??="",t&&n&&(t=` ${t}`),e="function"==typeof e?e():e,C({message:`${this.nameWithSvcId}${t}`,data:e}))}a(t,e){this.#t(t,e)}aIf(t,e,n){this.enabled&&this.#i(t)&&this.#t(n,e)}aIfInList(t,e,n,r){this.enabled&&this.#o(t,e)&&this.#t(r,n)}rxTap(t,{enabled:e=!0,jsonify:n=!0}={enabled:!0,jsonify:!0}){return new L(this,t,e,n)}fn(t,e,n){return new F(this,t,n,e)}fnCond(t,e,n,r){return t||!this.enabled?this.fn(e,n,r):new E}fnIf(t,e,n){return this.enabled&&this.#i(t)?this.fn(t,e,n):new E}fnIfInList(t,e,n,r,i){return this.enabled&&this.#i(t)&&this.#o(e,n)?this.fn(`${t}[${n}]`,r,i):new E}#i(t){return this.specs&&!(!this.specs[t]&&!this.specs.all)}#o(t,e){const n=this.specs?.[t];return n&&(n.includes(e)||n.includes("*"))}}class z{constructor(t,e,n){this.storage=t,this.prefix=e,this.configName=n,this.#s=this.prefix+(this.configName?`:${this.configName}`:"")}#s;get cache(){return this.#a??=this.#c()??{}}#a;get(t){return this.cache[t]}add(t,e){this.cache[t]=e,this.#l(this.cache)}remove(t){delete this.cache[t],this.#l(this.cache)}reset(){this.#l(this.#a={})}getNamesInStoreWithPrefix(){return Array.from(this.storage).filter((([t])=>t===this.prefix||t.startsWith(this.prefix+":"))).map((([t])=>t))}#l(t){this.storage.setItem(this.#s,JSON.stringify(t))}#c(){const t=this.storage.getItem(this.#s);return t?JSON.parse(t):{}}}class T extends z{constructor(t,e){super(window.sessionStorage,t,e)}}const M=function(t,e){return t===e||t!=t&&e!=e},P=function(t,e){for(var n=t.length;n--;)if(M(t[n][0],e))return n;return-1};var N=Array.prototype.splice;function H(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}H.prototype.clear=function(){this.__data__=[],this.size=0},H.prototype.delete=function(t){var e=this.__data__,n=P(e,t);return!(n<0||(n==e.length-1?e.pop():N.call(e,n,1),--this.size,0))},H.prototype.get=function(t){var e=this.__data__,n=P(e,t);return n<0?void 0:e[n][1]},H.prototype.has=function(t){return P(this.__data__,t)>-1},H.prototype.set=function(t,e){var n=this.__data__,r=P(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const U=H,q="object"==typeof global&&global&&global.Object===Object&&global;var G="object"==typeof self&&self&&self.Object===Object&&self;const D=q||G||Function("return this")(),R=D.Symbol;var W=Object.prototype,B=W.hasOwnProperty,K=W.toString,J=R?R.toStringTag:void 0;var V=Object.prototype.toString;var Z=R?R.toStringTag:void 0;const Y=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":Z&&Z in Object(t)?function(t){var e=B.call(t,J),n=t[J];try{t[J]=void 0;var r=!0}catch(t){}var i=K.call(t);return r&&(e?t[J]=n:delete t[J]),i}(t):function(t){return V.call(t)}(t)},Q=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},X=function(t){if(!Q(t))return!1;var e=Y(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},tt=D["__core-js_shared__"];var et,nt=(et=/[^.]+$/.exec(tt&&tt.keys&&tt.keys.IE_PROTO||""))?"Symbol(src)_1."+et:"";var rt=Function.prototype.toString;const it=function(t){if(null!=t){try{return rt.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var ot=/^\[object .+?Constructor\]$/,st=Function.prototype,at=Object.prototype,ct=st.toString,lt=at.hasOwnProperty,ut=RegExp("^"+ct.call(lt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const pt=function(t){return!(!Q(t)||(e=t,nt&&nt in e))&&(X(t)?ut:ot).test(it(t));var e},ht=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return pt(n)?n:void 0},dt=ht(D,"Map"),ft=ht(Object,"create");var gt=Object.prototype.hasOwnProperty;var vt=Object.prototype.hasOwnProperty;function mt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}mt.prototype.clear=function(){this.__data__=ft?ft(null):{},this.size=0},mt.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},mt.prototype.get=function(t){var e=this.__data__;if(ft){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return gt.call(e,t)?e[t]:void 0},mt.prototype.has=function(t){var e=this.__data__;return ft?void 0!==e[t]:vt.call(e,t)},mt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=ft&&void 0===e?"__lodash_hash_undefined__":e,this};const yt=mt,bt=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function _t(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_t.prototype.clear=function(){this.size=0,this.__data__={hash:new yt,map:new(dt||U),string:new yt}},_t.prototype.delete=function(t){var e=bt(this,t).delete(t);return this.size-=e?1:0,e},_t.prototype.get=function(t){return bt(this,t).get(t)},_t.prototype.has=function(t){return bt(this,t).has(t)},_t.prototype.set=function(t,e){var n=bt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const wt=_t;function xt(t){var e=this.__data__=new U(t);this.size=e.size}xt.prototype.clear=function(){this.__data__=new U,this.size=0},xt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},xt.prototype.get=function(t){return this.__data__.get(t)},xt.prototype.has=function(t){return this.__data__.has(t)},xt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof U){var r=n.__data__;if(!dt||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new wt(r)}return n.set(t,e),this.size=n.size,this};const jt=xt;function St(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new wt;++e<n;)this.add(t[e])}St.prototype.add=St.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},St.prototype.has=function(t){return this.__data__.has(t)};const Ot=St,kt=function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1},It=function(t,e,n,r,i,o){var s=1&n,a=t.length,c=e.length;if(a!=c&&!(s&&c>a))return!1;var l=o.get(t),u=o.get(e);if(l&&u)return l==e&&u==t;var p=-1,h=!0,d=2&n?new Ot:void 0;for(o.set(t,e),o.set(e,t);++p<a;){var f=t[p],g=e[p];if(r)var v=s?r(g,f,p,e,t,o):r(f,g,p,t,e,o);if(void 0!==v){if(v)continue;h=!1;break}if(d){if(!kt(e,(function(t,e){if(s=e,!d.has(s)&&(f===t||i(f,t,n,r,o)))return d.push(e);var s}))){h=!1;break}}else if(f!==g&&!i(f,g,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h},Lt=D.Uint8Array,Et=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t,r){n[++e]=[r,t]})),n},$t=function(t){var e=-1,n=Array(t.size);return t.forEach((function(t){n[++e]=t})),n};var Ct=R?R.prototype:void 0,Ft=Ct?Ct.valueOf:void 0;const At=Array.isArray;var zt=Object.prototype.propertyIsEnumerable,Tt=Object.getOwnPropertySymbols;const Mt=Tt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}(Tt(t),(function(e){return zt.call(t,e)})))}:function(){return[]},Pt=function(t){return null!=t&&"object"==typeof t},Nt=function(t){return Pt(t)&&"[object Arguments]"==Y(t)};var Ht=Object.prototype,Ut=Ht.hasOwnProperty,qt=Ht.propertyIsEnumerable;const Gt=Nt(function(){return arguments}())?Nt:function(t){return Pt(t)&&Ut.call(t,"callee")&&!qt.call(t,"callee")};var Dt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rt=Dt&&"object"==typeof module&&module&&!module.nodeType&&module,Wt=Rt&&Rt.exports===Dt?D.Buffer:void 0;const Bt=(Wt?Wt.isBuffer:void 0)||function(){return!1};var Kt=/^(?:0|[1-9]\d*)$/;const Jt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&Kt.test(t))&&t>-1&&t%1==0&&t<e},Vt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Zt={};Zt["[object Float32Array]"]=Zt["[object Float64Array]"]=Zt["[object Int8Array]"]=Zt["[object Int16Array]"]=Zt["[object Int32Array]"]=Zt["[object Uint8Array]"]=Zt["[object Uint8ClampedArray]"]=Zt["[object Uint16Array]"]=Zt["[object Uint32Array]"]=!0,Zt["[object Arguments]"]=Zt["[object Array]"]=Zt["[object ArrayBuffer]"]=Zt["[object Boolean]"]=Zt["[object DataView]"]=Zt["[object Date]"]=Zt["[object Error]"]=Zt["[object Function]"]=Zt["[object Map]"]=Zt["[object Number]"]=Zt["[object Object]"]=Zt["[object RegExp]"]=Zt["[object Set]"]=Zt["[object String]"]=Zt["[object WeakMap]"]=!1;var Yt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Qt=Yt&&"object"==typeof module&&module&&!module.nodeType&&module,Xt=Qt&&Qt.exports===Yt&&q.process,te=function(){try{return Qt&&Qt.require&&Qt.require("util").types||Xt&&Xt.binding&&Xt.binding("util")}catch(t){}}(),ee=te&&te.isTypedArray;const ne=ee?(re=ee,function(t){return re(t)}):function(t){return Pt(t)&&Vt(t.length)&&!!Zt[Y(t)]};var re,ie=Object.prototype.hasOwnProperty;const oe=function(t,e){var n=At(t),r=!n&&Gt(t),i=!n&&!r&&Bt(t),o=!n&&!r&&!i&&ne(t),s=n||r||i||o,a=s?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],c=a.length;for(var l in t)!e&&!ie.call(t,l)||s&&("length"==l||i&&("offset"==l||"parent"==l)||o&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||Jt(l,c))||a.push(l);return a};var se=Object.prototype;const ae=function(t,e){return function(n){return t(e(n))}}(Object.keys,Object);var ce=Object.prototype.hasOwnProperty;const le=function(t){if(n=(e=t)&&e.constructor,e!==("function"==typeof n&&n.prototype||se))return ae(t);var e,n,r=[];for(var i in Object(t))ce.call(t,i)&&"constructor"!=i&&r.push(i);return r},ue=function(t){return null!=(e=t)&&Vt(e.length)&&!X(e)?oe(t):le(t);var e},pe=function(t){return function(t,e,n){var r=e(t);return At(t)?r:function(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}(r,n(t))}(t,ue,Mt)};var he=Object.prototype.hasOwnProperty;const de=ht(D,"DataView"),fe=ht(D,"Promise"),ge=ht(D,"Set"),ve=ht(D,"WeakMap");var me="[object Map]",ye="[object Promise]",be="[object Set]",_e="[object WeakMap]",we="[object DataView]",xe=it(de),je=it(dt),Se=it(fe),Oe=it(ge),ke=it(ve),Ie=Y;(de&&Ie(new de(new ArrayBuffer(1)))!=we||dt&&Ie(new dt)!=me||fe&&Ie(fe.resolve())!=ye||ge&&Ie(new ge)!=be||ve&&Ie(new ve)!=_e)&&(Ie=function(t){var e=Y(t),n="[object Object]"==e?t.constructor:void 0,r=n?it(n):"";if(r)switch(r){case xe:return we;case je:return me;case Se:return ye;case Oe:return be;case ke:return _e}return e});const Le=Ie;var Ee="[object Arguments]",$e="[object Array]",Ce="[object Object]",Fe=Object.prototype.hasOwnProperty;const Ae=function(t,e,n,r,i,o){var s=At(t),a=At(e),c=s?$e:Le(t),l=a?$e:Le(e),u=(c=c==Ee?Ce:c)==Ce,p=(l=l==Ee?Ce:l)==Ce,h=c==l;if(h&&Bt(t)){if(!Bt(e))return!1;s=!0,u=!1}if(h&&!u)return o||(o=new jt),s||ne(t)?It(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!o(new Lt(t),new Lt(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return M(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=Et;case"[object Set]":var c=1&r;if(a||(a=$t),t.size!=e.size&&!c)return!1;var l=s.get(t);if(l)return l==e;r|=2,s.set(t,e);var u=It(a(t),a(e),r,i,o,s);return s.delete(t),u;case"[object Symbol]":if(Ft)return Ft.call(t)==Ft.call(e)}return!1}(t,e,c,n,r,i,o);if(!(1&n)){var d=u&&Fe.call(t,"__wrapped__"),f=p&&Fe.call(e,"__wrapped__");if(d||f){var g=d?t.value():t,v=f?e.value():e;return o||(o=new jt),i(g,v,n,r,o)}}return!!h&&(o||(o=new jt),function(t,e,n,r,i,o){var s=1&n,a=pe(t),c=a.length;if(c!=pe(e).length&&!s)return!1;for(var l=c;l--;){var u=a[l];if(!(s?u in e:he.call(e,u)))return!1}var p=o.get(t),h=o.get(e);if(p&&h)return p==e&&h==t;var d=!0;o.set(t,e),o.set(e,t);for(var f=s;++l<c;){var g=t[u=a[l]],v=e[u];if(r)var m=s?r(v,g,u,e,t,o):r(g,v,u,t,e,o);if(!(void 0===m?g===v||i(g,v,n,r,o):m)){d=!1;break}f||(f="constructor"==u)}if(d&&!f){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(d=!1)}return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))},ze=function t(e,n,r,i,o){return e===n||(null==e||null==n||!Pt(e)&&!Pt(n)?e!=e&&n!=n:Ae(e,n,r,i,t,o))},Te=function(t,e){return ze(t,e)};let Me;const Pe="logSpecs";class Ne{static getSpecs(t){const e=Ne.singleton();e.debug;const n=e.cache[t.name];if(n)return n;const r=e.state.cache[t.name],i={enabled:!1,...t,...r};return e.cache[t.name]=i,i}static singleton(){if(Me)return Me;const t=window;return t.logManager?Me=t.logManager:(t.logManager=Me=new Ne,Me)}constructor(){this.cache={},this.state=new T(Pe)}updateSpecs(t){Object.keys(t).forEach((e=>{const n=this.cache[e];Te(n?.specs,t[e].specs)||(this.cache[e]=t[e],this.state.add(e,t[e]))}))}get allSpecs(){return this.cache}get allConfigured(){return this.state.cache}get mergeAllSpecs(){const t={...this.cache};return Object.keys(this.state.cache).forEach((e=>{t[e]={...t[e],...this.state.cache[e]}})),Object.keys(t).forEach((e=>{e.startsWith(Pe)&&delete t[e]})),t}get specsOfConfigured(){const t=this.state.cache;return Object.keys(t).map((e=>this.cache[e]||t[e]))}configure(t){delete this.cache[t.name],this.state.add(t.name,t)}toggle(t,e){const n=this.cache[t],r=this.state.cache[t],i={name:t,enabled:e??!r?.enabled,specs:r?.specs||n?.specs||{}};return this.configure(i),e}}function He(t,e,n,i=!1){const o=t?"string"==typeof t?t:(t?Object.keys(t)[0]:null)??"unknown":"unknown",s={enabled:i&&!r.production,name:o,specs:e??{}},a=Ne.getSpecs(s);return a.enabled?new A(a):new $(e)}},721:(t,e,n)=>{n.d(e,{Z:()=>i,Ul:()=>r,Af:()=>o,m5:()=>s});const r={mapMarker:'<svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="map-marker-alt" class="svg-inline--fa fa-map-marker-alt fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"></path></svg>'};function i(t,e){return`${t}<style>\n${e}\n</style>`}function o(t){if(t&&t.trim().startsWith("{")&&t.trim().endsWith("}"))return JSON.parse(t.replace("latitude","lat").replace("longitude","lng"));throw new Error("Invalid JSON string")}function s(t){return JSON.stringify(t).replace("lat","latitude").replace("lng","longitude")}}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t=n(941),e=n(721);const r="field-custom-gps-dialog";class i extends HTMLElement{constructor(){super(),this.log=(0,t.Tq)({FieldCustomGpsDialog:i}),this.log.a(`${r} constructor called`),this.fieldInitialized=!1}connectedCallback(){if(this.fieldInitialized)return;this.fieldInitialized=!0,this.log.a(`${r} connectedCallback called`),this.eventListeners=[],this.innerHTML=(0,e.Z)('\x3c!-- Search Icon --\x3e\r\n<link\r\n  rel="stylesheet"\r\n  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=search"\r\n/>\r\n\x3c!-- Pin Icon --\x3e\r\n<link\r\n  rel="stylesheet"\r\n  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=person_pin_circle"\r\n/>\r\n\r\n<div class="custom-gps-container">\r\n  <div class="map-info">\r\n    <div class="input-component">\r\n      <label for="lat">Lat:</label>\r\n      <input id="lat" type="number" step="0.001" />\r\n    </div>\r\n    &nbsp;\r\n    <div class="input-component">\r\n      <label for="lng">Lng:</label>\r\n      <input id="lng" type="number" step="0.001" />\r\n    </div>\r\n    <a id="icon-pin" class="btn"><i class="material-symbols-outlined"> person_pin_circle </i></a>\r\n  </div>\r\n\r\n  <div id="address-mask-container" class="map-info address-mask-container hidden">\r\n    <a id="icon-search" class="btn">\r\n      <i class="material-symbols-outlined"> search </i>\r\n    </a>\r\n    <input id="formatted-address-container" type="text" />\r\n  </div>\r\n\r\n  <div id="map" class="map-info__map" />\r\n</div>\r\n',".custom-gps-container{display:flex;flex-direction:column;height:100%}.map-info{flex:0 0 32px;display:flex;flex-wrap:wrap;align-items:center;padding:4px;padding-left:14px;border-bottom:1px solid #e1e1e1;background:#fff}.map-info #icon-pin{margin-left:1rem;padding:.5rem}.map-info label,.map-info #icon-search{margin-right:8px;display:flex;justify-content:center;align-items:center;font-size:12px;text-transform:uppercase;padding:4px}.map-info #icon-search i{font-size:14px;width:14px;height:14px;font-weight:bold}.map-info input{margin-right:8px;padding:4px 16px;border:none;background:rgba(0,0,0,0);outline:none !important}.address-mask-container{flex-wrap:nowrap}.map-info__map{flex:1 1 auto;width:100%;display:block}.hidden{display:none}.btn{border:1px solid silver;border-radius:4px}.btn:hover{background-color:rgba(69,79,99,.08);cursor:pointer}.input-component{display:flex;background-color:rgba(69,79,99,.08);padding:4px;border-radius:4px 4px 0 0;border-bottom:1px solid silver;margin:8px 0}.input-component:hover{border-bottom:1px solid #002753}"),this.latInput=this.querySelector("#lat"),this.lngInput=this.querySelector("#lng");const t=this.querySelector("#address-mask-container");this.iconSearch=this.querySelector("#icon-search"),this.iconPin=this.querySelector("#icon-pin");const n=this.querySelector("#formatted-address-container");this.mapContainer=this.querySelector("#map");const i=this.connector._experimental,o=i.allInputTypeNames.map((t=>t.name)),s=this.connector.field.settings;o.includes(s.LatField)&&(this.latFieldName=s.LatField),o.includes(s.LongField)&&(this.lngFieldName=s.LongField);const a=s.AddressMask||s["Address Mask"];this.addressMask=i.getFieldMask(a,"Gps"),this.log.a(`${r} addressMask:`,{addressMaskSetting:a}),a&&(t.classList.remove("hidden"),n.value=this.addressMask.result());const c=i.getSettings("Settings.GoogleMaps.DefaultCoordinates");this.defaultCoordinates={lat:c.Latitude,lng:c.Longitude};const l=i.getSettings("Settings.GoogleMaps.ApiKey").ApiKey;this.connector.loadScript("google",`https://maps.googleapis.com/maps/api/js?key=${l}&callback=Function.prototype`,(()=>{this.mapScriptLoaded()}))}mapScriptLoaded(){if(this.log.a(`${r} mapScriptLoaded called`),this.map=new google.maps.Map(this.mapContainer,{zoom:15,center:this.defaultCoordinates,gestureHandling:"greedy",streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER}}),this.marker=new google.maps.Marker({position:this.defaultCoordinates,map:this.map,draggable:!0}),this.geocoder=new google.maps.Geocoder,this.connector.data.value)try{this.updateHtml((0,e.Af)(this.connector.data.value))}catch(t){console.error("Invalid data.value:",this.connector.data.value),this.updateHtml(this.defaultCoordinates)}else this.updateHtml(this.defaultCoordinates);const t=()=>{this.onLatLngInputChange()};this.latInput.addEventListener("change",t),this.lngInput.addEventListener("change",t);const n=()=>{this.autoSelect()};this.iconSearch.addEventListener("click",n),this.iconPin.addEventListener("click",(()=>{this.setLocation()})),this.eventListeners.push({element:this.latInput,type:"change",listener:t},{element:this.lngInput,type:"change",listener:t},{element:this.iconSearch,type:"click",listener:n}),this.marker.addListener("dragend",(t=>{this.onMarkerDragend(t)}))}setLocation(){if(navigator.geolocation){const t=this.querySelector("#formatted-address-container");t.value="Locating...",navigator.geolocation.getCurrentPosition((e=>{const n={lat:e.coords.latitude,lng:e.coords.longitude};this.updateHtml(n),this.updateForm(n),this.geocoder.geocode({location:n},((e,n)=>{n===google.maps.GeocoderStatus.OK&&e[0]?t.value=e[0].formatted_address:t.value="Unable to retrieve address"}))}),(t=>{console.error("Error getting location:",t)}))}else console.error("Geolocation is not supported by this browser.")}updateHtml(t){this.latInput.value=t.lat?.toString()??"",this.lngInput.value=t.lng?.toString()??"",this.map.setCenter(t),this.marker.setPosition(t)}updateForm(t){this.connector.data.update((0,e.m5)(t)),this.latFieldName&&this.connector._experimental.updateField(this.latFieldName,t.lat),this.lngFieldName&&this.connector._experimental.updateField(this.lngFieldName,t.lng)}onLatLngInputChange(){this.log.a(`${r} input changed`);const t={lat:this.latInput.value.length>0?parseFloat(this.latInput.value):null,lng:this.lngInput.value.length>0?parseFloat(this.lngInput.value):null};this.updateHtml(t),this.updateForm(t)}autoSelect(){this.log.a(`${r} geocoder called`);const t=this.querySelector("#formatted-address-container").value;this.geocoder.geocode({address:t},((e,n)=>{if(n===google.maps.GeocoderStatus.OK){const t=e[0].geometry.location,n={lat:t.lat(),lng:t.lng()};this.updateHtml(n),this.updateForm(n)}else alert(`Could not locate address: ${t}`)}))}onMarkerDragend(t){this.log.a(`${r} marker changed`);const e={lat:t.latLng.lat(),lng:t.latLng.lng()};this.updateHtml(e),this.updateForm(e)}disconnectedCallback(){this.log.a(`${r} disconnectedCallback called`),google?.maps.event.clearInstanceListeners(this.marker),google?.maps.event.clearInstanceListeners(this.map),this.eventListeners.forEach((({element:t,type:e,listener:n})=>{t.removeEventListener(e,n)})),this.addressMask.destroy()}}customElements.get(r)||customElements.define(r,i)})(),(()=>{var t=n(941),e=n(721);const r="field-custom-gps";class i extends HTMLElement{constructor(){super(),this.log=(0,t.Tq)({FieldCustomGps:i}),this.log.a(`${r} constructor called`),this.fieldInitialized=!1}connectedCallback(){if(this.fieldInitialized)return;this.fieldInitialized=!0,this.log.a(`${r} connectedCallback called`),this.innerHTML=(0,e.Z)('<div class="custom-gps-preview">\r\n  <div class="custom-gps-preview__text">\r\n    Lat: <span id="lat-container"></span>, Lng: <span id="lng-container"></span>\r\n  </div>\r\n  <div class="custom-gps-preview__spacer"></div>\r\n  <div id="map-icon-container" class="custom-gps-preview__map-icon"></div>\r\n</div>\r\n',".custom-gps-preview{width:100%;display:flex;align-items:center;position:absolute;top:0;bottom:0;font-size:16px;line-height:20px;margin-bottom:-2px;cursor:pointer}.custom-gps-preview__text{flex-shrink:0;max-width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.custom-gps-preview__spacer{flex-grow:1}.custom-gps-preview__map-icon{flex-shrink:0;margin-right:4px;display:flex;align-items:center;justify-content:center}.custom-gps-preview__map-icon svg{width:20px;height:20px;line-height:20px}"),this.querySelector("#map-icon-container").innerHTML=e.Ul.mapMarker,this.latContainer=this.querySelector("#lat-container"),this.lngContainer=this.querySelector("#lng-container"),this.eventListeners=[];const t=()=>{this.expand()};this.addEventListener("click",t),this.eventListeners.push({element:this,type:"click",listener:t});const n=this.connector._experimental.getSettings("Settings.GoogleMaps.DefaultCoordinates");this.defaultCoordinates={lat:n.Latitude,lng:n.Longitude},this.connector.data.value?this.updateHtml((0,e.Af)(this.connector.data.value)):this.updateHtml(this.defaultCoordinates),this.connector.data.onValueChange((t=>{if(t){const n=(0,e.Af)(t);this.updateHtml(n)}else this.updateHtml(this.defaultCoordinates)}))}updateHtml(t){this.latContainer.innerText=t.lat?.toString()??"",this.lngContainer.innerText=t.lng?.toString()??""}expand(){this.connector.dialog.open()}disconnectedCallback(){this.log.a(`${r} disconnectedCallback called`),this.eventListeners.forEach((({element:t,type:e,listener:n})=>{t.removeEventListener(e,n)}))}}customElements.get(r)||customElements.define(r,i)})()})();
//# sourceMappingURL=https://sources.2sxc.org/18.06.01/system/field-custom-gps/index.js.map