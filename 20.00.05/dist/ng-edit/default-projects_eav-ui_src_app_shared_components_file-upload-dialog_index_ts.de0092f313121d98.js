"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"],{3140:(I,A,i)=>{i.d(A,{J:()=>l});var f=i(27092),o=i(99293);let l=(()=>{class m{constructor(){this.subscriptions=new f.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(T){return new(T||m)};static#e=this.\u0275dir=o.FsC({type:m})}return m})()},8112:(I,A,i)=>{i.d(A,{jj:()=>fe,G1:()=>S,HL:()=>w});var f=i(87945),o=i(37580),l=i(44444),m=i(34456),g=i(84175),F=i(81863),T=i(93840),O=i(59791),U=i(41134),p=i(53804),C=i(18537),_=i(51567),y=i(70271),E=i(98764),a=i(36647),d=i(61318),v=i(59452),c=i(64334),D=i(12938),h=i(83583),P=i(34575),x=i(69914),j=i(68873),W=i(12987),G=i(47215);let L=(()=>{class r{constructor(t){this.http=t}installPackages(t,n){return t.reduce((s,M)=>s.pipe((0,a.n)(()=>M.url?(n(M),this.http.post(`sys/install/RemotePackage?packageUrl=${M.url}`,{})):(0,v.of)(!0))),(0,v.of)(!0))}static#t=this.\u0275fac=function(n){return new(n||r)(l.KVO(G.Qq))};static#e=this.\u0275prov=l.jDH({token:r,factory:r.\u0275fac})}return r})();var V=i(43176),B=function(r){return r.importOriginal="importOriginal",r.importAsTemplate="importAsTemplate",r}(B||{});const S={Warning:0,Success:1,Error:2},w={App:0,AppPart:1,ContentType:2,ContentItem:3,Query:4,View:5,ImportParts:6};var e=i(99293),K=i(3347),X=i(80436),z=i(88622),$=i(87698);const N=["installerWindow"],H=(r,u)=>({"outer-container-app":r,"eav-dialog-content":u}),Y=(r,u,t)=>({"sxc-message-warning":r,"sxc-message-success":u,"sxc-message-error":t});function Q(r,u){if(1&r){const t=e.RV6();e.j41(0,"div",3),e.nrm(1,"div",12),e.nI1(2,"safeHtml"),e.j41(3,"button",13),e.bIt("click",function(){l.eBV(t);const s=e.XpG();return l.Njj(s.closeDialog())}),e.j41(4,"mat-icon"),e.EFF(5,"close"),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(),e.Y8G("innerHtml",e.bMT(2,1,t.dialogData.title),e.npT)}}function J(r,u){if(1&r&&(e.nrm(0,"h3",5),e.nI1(1,"safeHtml")),2&r){const t=e.XpG();e.Y8G("innerHtml",e.bMT(1,1,t.dialogData.title),e.npT)}}function Z(r,u){1&r&&e.nrm(0,"mat-spinner",6)}function q(r,u){1&r&&(e.j41(0,"span"),e.EFF(1,"The app will be imported as is, using the original name and folder."),e.k0s(),e.j41(2,"span"),e.EFF(3,"If you already have the same app installed, it will prevent you from overwriting it."),e.k0s())}function ee(r,u){1&r&&(e.j41(0,"span"),e.EFF(1,"The app will be imported using a new name / folder."),e.k0s(),e.j41(2,"span"),e.EFF(3," This allows you to create multiple isolated copies of the same app or to create something very different using this app as a template. "),e.k0s(),e.nrm(4,"br"),e.j41(5,"mat-form-field",17)(6,"mat-label"),e.EFF(7,"Name"),e.k0s(),e.nrm(8,"input",18),e.k0s())}function te(r,u){if(1&r&&(e.j41(0,"form",14)(1,"mat-radio-group",15)(2,"mat-radio-button",16),e.EFF(3,"Import App(s)"),e.k0s(),e.j41(4,"mat-radio-button",16),e.EFF(5,"Import and Rename / Reset"),e.k0s()(),e.nrm(6,"br"),e.nVh(7,q,4,0)(8,ee,9,0),e.k0s(),e.nrm(9,"br")),2&r){let t;const n=e.XpG();e.Y8G("formGroup",n.importForm),e.R7$(2),e.Y8G("value",n.importModeValues.importOriginal),e.R7$(2),e.Y8G("value",n.importModeValues.importAsTemplate),e.R7$(3),e.vxM((null==(t=n.importForm.get("importMode"))?null:t.value)===n.importModeValues.importOriginal?7:(null==(t=n.importForm.get("importMode"))?null:t.value)===n.importModeValues.importAsTemplate?8:-1)}}function ie(r,u){1&r&&(e.j41(0,"div"),e.EFF(1,"Select or drop file"),e.k0s())}function re(r,u){if(1&r&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&r){const t=u.$implicit;e.R7$(),e.JRh(t.name)}}function se(r,u){if(1&r){const t=e.RV6();e.j41(0,"button",19),e.bIt("click",function(){l.eBV(t);const s=e.XpG();return l.Njj(s.toggleShowAppCatalog())}),e.EFF(1," Get recommended Apps from Catalog "),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("disabled",t.uploading()||t.importForm.invalid)}}function oe(r,u){if(1&r){const t=e.RV6();e.j41(0,"button",20),e.bIt("click",function(){l.eBV(t);const s=e.XpG();return l.Njj(s.upload())}),e.EFF(1," Upload "),e.k0s()}if(2&r){const t=e.XpG();e.Y8G("disabled",!t.files().length||t.uploading()||!!t.result()||t.importForm.invalid)}}function ne(r,u){if(1&r){const t=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){l.eBV(t);const s=e.XpG(3);return l.Njj(s.closeDialog(!0))}),e.EFF(1,"Close"),e.k0s()}}function ae(r,u){if(1&r){const t=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){l.eBV(t);const s=e.XpG(3);return l.Njj(s.cleanUpload())}),e.EFF(1,"Clean"),e.k0s()}}function le(r,u){if(1&r&&(e.j41(0,"div",21),e.EFF(1," Upload succeeded. See the messages below for more information. "),e.nVh(2,ne,2,0,"a",24)(3,ae,2,0,"a",24),e.k0s()),2&r){const t=e.XpG(2);e.R7$(2),e.vxM(t.uploadType()!=t.UploadTypes.ImportParts?2:3)}}function ce(r,u){if(1&r){const t=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){l.eBV(t);const s=e.XpG(3);return l.Njj(s.closeDialog(!0))}),e.EFF(1,"Close"),e.k0s()}}function pe(r,u){if(1&r){const t=e.RV6();e.j41(0,"a",25),e.bIt("click",function(){l.eBV(t);const s=e.XpG(3);return l.Njj(s.cleanUpload())}),e.EFF(1,"Clean"),e.k0s()}}function de(r,u){if(1&r&&(e.j41(0,"div",22),e.EFF(1," Upload failed. See the messages below for more information. "),e.nVh(2,ce,2,0,"a",24)(3,pe,2,0,"a",24),e.k0s()),2&r){const t=e.XpG(2);e.R7$(2),e.vxM(t.uploadType()!=t.UploadTypes.ImportParts?2:3)}}function me(r,u){if(1&r&&(e.j41(0,"div",23),e.EFF(1),e.k0s()),2&r){const t=u.$implicit,n=e.XpG(2);e.Y8G("ngClass",e.sMw(2,Y,t.MessageType===n.FileUploadMessageTypes.Warning,t.MessageType===n.FileUploadMessageTypes.Success,t.MessageType===n.FileUploadMessageTypes.Error)),e.R7$(),e.SpI(" ",t.Text," ")}}function ue(r,u){if(1&r&&(e.j41(0,"div",11),e.nVh(1,le,4,1,"div",21),e.nVh(2,de,4,1,"div",22),e.Z7z(3,me,2,6,"div",23,e.fX1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.vxM(t.result().Success?1:-1),e.R7$(),e.vxM(t.result().Success?-1:2),e.R7$(),e.Dyx(t.result().Messages)}}function ge(r,u){if(1&r&&e.nrm(0,"iframe",26,1),2&r){const t=e.XpG(2);e.Y8G("src",t.remoteInstallerUrl,e.f$h)}}function _e(r,u){if(1&r&&(e.j41(0,"div",27),e.nrm(1,"mat-progress-spinner",28),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&r){const t=e.XpG(2);e.R7$(),e.Y8G("mode","indeterminate"),e.R7$(2),e.SpI("Installing ",null==t.currentPackage?null:t.currentPackage.displayName,"..")}}function he(r,u){if(1&r&&(e.nVh(0,ge,2,1,"iframe",26),e.nVh(1,_e,4,2,"div",27)),2&r){const t=e.XpG();e.vxM(t.ready?0:-1),e.R7$(),e.vxM(t.showProgress?1:-1)}}let fe=(()=>{class r extends V.${#t;#e;#s;#o;constructor(t,n,s,M,k,R){super(),this.dialogData=t,this.dialog=n,this.snackBar=s,this.sanitizer=M,this.context=k,this.changeDetectorRef=R,this.hostClass="dialog-component",this.uploadType=(0,o.hFB)(),this.uploading=(0,l.vPA)(!1),this.showAppCatalog=(0,l.vPA)(!1),this.result=(0,l.vPA)(void 0),this.files=(0,l.vPA)([]),this.FileUploadMessageTypes=S,this.UploadTypes=w,this.importModeValues=B,this.showProgress=!1,this.remoteInstallerUrl="",this.urlChangeImportMode="",this.ready=!1,this.#t=(0,D.d)(L),this.#e=(0,D.d)(W.n),this.#s=(0,D.d)(h.U),this.#o=(0,l.WQX)(m.ok),this.importForm=this.#o.group({importMode:[this.importModeValues.importOriginal,m.k0.required],name:[""]}),this.#i=!1,this.#r=(0,C.R)(window,"message").pipe((0,_.p)(()=>!this.#i),(0,_.p)(b=>"https://2sxc.org"===b.origin),(0,y.T)(b=>{try{return JSON.parse(b.data)}catch(ve){return void console.error("error procesing message. Message was "+b.data,ve)}}),(0,_.p)(b=>b&&Number(b.moduleId)===this.context.moduleId)),this.subscriptions.add(this.#e.settings$.subscribe(b=>{this.settings=b,this.urlChangeImportMode=b.remoteUrl,this.remoteInstallerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(b.remoteUrl),this.ready=!0})),this.#a()}#i;#r;ngOnInit(){this.importForm.get("importMode")?.valueChanges.subscribe(t=>{const n=t===this.importModeValues.importAsTemplate,s=this.urlChangeImportMode+(this.urlChangeImportMode.includes("?")?"&":"?")+`selectOnlyMode=${n}`;this.remoteInstallerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(s)}),null!=this.dialogData.files&&this.filesDropped(this.dialogData.files),this.#e.loadGettingStarted(!1),this.subscriptions.add(this.#r.pipe((0,_.p)(t=>"specs"===t.action),(0,E.M)(()=>{const t=this.installerWindow.nativeElement,n={action:"specs",data:{installedApps:this.settings.installedApps,rules:this.settings.installedApps.map(M=>({target:"guid",appGuid:M.guid,mode:"f",url:""}))}},s=JSON.stringify(n);t.contentWindow.postMessage(s,"*"),console.log("debug: just sent specs message:"+s,n,t)})).subscribe()),this.subscriptions.add(this.#r.pipe((0,_.p)(t=>"install"===t.action),(0,y.T)(t=>Object.values(t.packages)),(0,_.p)(t=>{const s=`Do you want to install these packages?\n\n${t.reduce((M,k)=>`${M} - ${k.displayName}\n`,"")}\nThis takes about 10 seconds per package. Don't reload the page while it's installing.`;return confirm(s)}),(0,a.n)(t=>(this.#i=!0,this.showProgress=!0,this.changeDetectorRef.detectChanges(),this.importForm.get("importMode")?.value===this.importModeValues.importAsTemplate?this.#s.createTemplate(t[0].url,this.importForm.get("name")?.value):this.#t.installPackages(t,n=>this.currentPackage=n))),(0,E.M)(()=>{this.showProgress=!1,this.changeDetectorRef.detectChanges(),alert("Installation complete \u{1f44d}"),window.top.location.reload(),this.closeDialog(!0)}),(0,d.W)(t=>(console.error("Error: ",t),this.showProgress=!1,this.#i=!1,this.changeDetectorRef.detectChanges(),alert(`An error occurred: Package ${this.currentPackage.displayName}\n\n${t.error?.Message??t.error?.message??""}\n\n${t.message}\n\nPlease try again later or check how to manually install content-templates: https://azing.org/2sxc/r/0O4OymoA`),(0,v.of)(t)))).subscribe())}ngOnDestroy(){super.ngOnDestroy()}closeDialog(t){this.dialog.close(t)}cleanUpload(){this.result.set(void 0),this.files.set([]),this.uploading.set(!1)}#a(){const t=this.importForm.get("name");this.importForm.get("importMode")?.valueChanges.subscribe(n=>{const s=n===this.importModeValues.importAsTemplate;t?.setValidators(s?[m.k0.required]:null),t?.updateValueAndValidity()})}filesDropped(t){this.#n(t)}filesChanged(t){const s=Array.from(t.target.files);this.#n(s)}upload(){this.uploading.set(!0);const t=this.importForm.get("name")?.value;this.subscriptions.add(this.dialogData.upload$(this.files(),t).pipe((0,c.s)(1)).subscribe({next:n=>{this.uploading.set(!1),this.result.set(n)},error:()=>{this.uploading.set(!1),this.result.set(void 0),this.snackBar.open("Upload failed. Please check console for more information",void 0,{duration:3e3})}}))}toggleShowAppCatalog(){this.showAppCatalog.set(!this.showAppCatalog())}#n(t){this.dialogData.multiple||(t=t.slice(0,1)),this.files.set(t)}static#l=this.\u0275fac=function(n){return new(n||r)(e.rXU(F.e),e.rXU(F.k),e.rXU(K.UG),e.rXU(X.up),e.rXU(j.o),e.rXU(o.gRc))};static#c=this.\u0275cmp=e.VBU({type:r,selectors:[["app-file-upload-dialog"]],viewQuery:function(n,s){if(1&n&&e.GBs(N,5),2&n){let M;e.mGM(M=e.lsd())&&(s.installerWindow=M.first)}},hostVars:1,hostBindings:function(n,s){2&n&&e.Avn("className",s.hostClass)},inputs:{uploadType:[1,"uploadType"]},features:[e.Vt3],decls:19,vars:18,consts:[["fileInput",""],["installerWindow",""],["appDragAndDrop","",1,"eav-dialog",2,"margin-bottom","12px",3,"filesDropped","allowedFileTypes"],[1,"eav-dialog-header"],[3,"ngClass"],[3,"innerHtml"],["mode","indeterminate","diameter","20"],["mat-raised-button","","tippy","Open file browser",3,"click","disabled"],["type","file","multiple","",1,"hide",3,"change"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button","eav-action-button",3,"disabled"],["mat-raised-button","",1,"eav-action-button",2,"margin-left","12px",3,"disabled"],[1,"eav-result-container"],[1,"eav-dialog-header__title",3,"innerHtml"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"formGroup"],["formControlName","importMode","aria-label","Select import mode"],[3,"value"],["color","accent",1,"eav-mat-form-field",2,"max-width","300px"],["matInput","","type","text","formControlName","name"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button","eav-action-button",3,"click","disabled"],["mat-raised-button","",1,"eav-action-button",2,"margin-left","12px",3,"click","disabled"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["href","javascript:void(0)"],["href","javascript:void(0)",3,"click"],[1,"eav-app-catalog-iframe",3,"src"],[1,"eav-progress"],[3,"mode"]],template:function(n,s){if(1&n){const M=e.RV6();e.j41(0,"div",2),e.bIt("filesDropped",function(R){return l.eBV(M),l.Njj(s.filesDropped(R))}),e.nVh(1,Q,6,3,"div",3),e.j41(2,"div",4),e.nVh(3,J,2,3,"h3",5),e.nVh(4,Z,1,0,"mat-spinner",6),e.nrm(5,"p",5),e.nI1(6,"safeHtml"),e.nVh(7,te,10,4),e.j41(8,"div")(9,"button",7),e.bIt("click",function(){l.eBV(M);const R=e.sdS(14);return l.Njj(R.click())}),e.nVh(10,ie,2,0,"div"),e.Z7z(11,re,2,1,"div",null,e.fX1),e.k0s(),e.j41(13,"input",8,0),e.bIt("change",function(R){return l.eBV(M),l.Njj(s.filesChanged(R))}),e.k0s(),e.nVh(15,se,2,1,"button",9),e.nVh(16,oe,2,1,"button",10),e.k0s(),e.nVh(17,ue,5,2,"div",11),e.nVh(18,he,2,2),e.k0s()()}2&n&&(e.Y8G("allowedFileTypes",s.dialogData.allowedFileTypes),e.R7$(),e.vxM(s.uploadType()!=s.UploadTypes.ImportParts?1:-1),e.R7$(),e.Y8G("ngClass",e.l_i(15,H,s.uploadType()===s.UploadTypes.ImportParts,s.uploadType()!==s.UploadTypes.ImportParts)),e.R7$(),e.vxM(s.uploadType()==s.UploadTypes.ImportParts?3:-1),e.R7$(),e.vxM(s.uploading()?4:-1),e.R7$(),e.Y8G("innerHtml",e.bMT(6,13,s.dialogData.description),e.npT),e.R7$(2),e.vxM(s.uploadType()==s.UploadTypes.App?7:-1),e.R7$(2),e.Y8G("disabled",s.uploading()||s.importForm.invalid),e.R7$(),e.vxM(s.files().length?-1:10),e.R7$(),e.Dyx(s.files()),e.R7$(4),e.vxM(s.uploadType()!=s.UploadTypes.App||s.files().length?-1:15),e.R7$(),e.vxM(s.files().length?16:-1),e.R7$(),e.vxM(s.result()?17:-1),e.R7$(),e.vxM(s.uploadType()==s.UploadTypes.App&&s.showAppCatalog()&&!s.files().length&&s.importForm.valid?18:-1))},dependencies:[f.YU,F.l,U.D6,U.LG,x.$,P.S,g.Hl,g.$z,z.M,T.m_,T.An,p.Wk,p.VT,p._g,O.fS,O.fg,$.j,$.M,m.X1,m.qT,m.me,m.BC,m.cb,m.j4,m.JD],styles:[".eav-result-container[_ngcontent-%COMP%]{margin-top:16px}.eav-app-catalog-button[_ngcontent-%COMP%]{margin-left:12px}.eav-app-catalog-iframe[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:500px;border:none}.eav-progress[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;background:#fffc;display:flex;justify-content:center;flex-direction:column;text-align:center}.eav-progress[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto}.eav-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:48px}.outer-container-app[_ngcontent-%COMP%]{padding:12px 24px}"]})}return r})()},12987:(I,A,i)=>{i.d(A,{n:()=>F});var f=i(70271),o=i(63037),l=i(84205),m=i(44444),g=i(47215);let F=(()=>{class T{constructor(U){this.http=U,this.installSettingsSubject=new l.B,this.settings$=this.installSettingsSubject.asObservable(),this.settings$.pipe((0,f.T)(()=>!0),(0,o.Z)(!1)).subscribe()}loadGettingStarted(U){this.http.get(`sys/install/InstallSettings?isContentApp=${U}`).subscribe(p=>this.installSettingsSubject.next(p))}static#t=this.\u0275fac=function(p){return new(p||T)(m.KVO(g.Qq))};static#e=this.\u0275prov=m.jDH({token:T,factory:T.\u0275fac})}return T})()},18537:(I,A,i)=>{i.d(A,{R:()=>p});var f=i(82645),o=i(43942),l=i(1365),m=i(88830),g=i(81530),F=i(38067);const T=["addListener","removeListener"],O=["addEventListener","removeEventListener"],U=["on","off"];function p(a,d,v,c){if((0,g.T)(v)&&(c=v,v=void 0),c)return p(a,d,v).pipe((0,F.I)(c));const[D,h]=function E(a){return(0,g.T)(a.addEventListener)&&(0,g.T)(a.removeEventListener)}(a)?O.map(P=>x=>a[P](d,x,v)):function _(a){return(0,g.T)(a.addListener)&&(0,g.T)(a.removeListener)}(a)?T.map(C(a,d)):function y(a){return(0,g.T)(a.on)&&(0,g.T)(a.off)}(a)?U.map(C(a,d)):[];if(!D&&(0,m.X)(a))return(0,l.Z)(P=>p(P,d,v))((0,f.Tg)(a));if(!D)throw new TypeError("Invalid event target");return new o.c(P=>{const x=(...j)=>P.next(1<j.length?j:j[0]);return D(x),()=>h(x)})}function C(a,d){return v=>c=>a[v](d,c)}},34575:(I,A,i)=>{i.d(A,{S:()=>T});var f=i(37580),o=i(44444),l=i(18537),m=i(3140),g=i(99293),F=i(3347);let T=(()=>{class O extends m.J{constructor(p,C,_){super(),this.zone=C,this.snackBar=_,this.markStyle=(0,f.hFB)("outline"),this.allowedFileTypes=(0,f.hFB)(""),this.filesDropped=(0,f.CGW)(),this.dropAreaClass="eav-droparea",this.markStyleClass=(0,o.vPA)(""),this.dragClass="eav-dragover",this.timeouts=[],this.element=p.nativeElement}ngOnInit(){this.markStyleClass.set(`eav-droparea-${this.markStyle()}`),this.element.classList.add(this.dropAreaClass,this.markStyleClass()),this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,l.R)(this.element,"dragover").subscribe(p=>{p.preventDefault(),p.stopPropagation(),this.clearTimeouts(),this.element.classList.add(this.dragClass)})),this.subscriptions.add((0,l.R)(this.element,"dragleave").subscribe(p=>{p.preventDefault(),p.stopPropagation(),this.timeouts.push(window.setTimeout(()=>{this.element.classList.remove(this.dragClass)},50))}))})}ngOnDestroy(){this.clearTimeouts(),this.element.classList.remove(this.dropAreaClass,this.markStyleClass(),this.dragClass),super.ngOnDestroy()}onDrop(p){p.preventDefault(),p.stopPropagation(),this.clearTimeouts(),this.element.classList.remove(this.dragClass);let _=Array.from(p.dataTransfer.files);_=this.filterTypes(_,this.allowedFileTypes()),_.length>0&&this.filesDropped.emit(_)}clearTimeouts(){for(const p of this.timeouts)clearTimeout(p);this.timeouts=[]}filterTypes(p,C){if(""===C)return p;const _=C.split(",").map(E=>E.toLocaleLowerCase()),y=p.filter(E=>{const a=E.name.lastIndexOf(".");if(a<=0)return!1;const d=E.name.substring(a+1).toLocaleLowerCase();return _.includes(d)});if(p.length!==y.length){const E=this.allowedFileTypes().replace(/\,/g,", ");this.snackBar.open(y.length?"Some files were filtered out. This drop location only accepts file types: "+E:"This drop location only accepts file types: "+E,null,{duration:5e3})}return y}static#t=this.\u0275fac=function(C){return new(C||O)(g.rXU(g.aKT),g.rXU(g.SKi),g.rXU(F.UG))};static#e=this.\u0275dir=g.FsC({type:O,selectors:[["","appDragAndDrop",""]],hostBindings:function(C,_){1&C&&g.bIt("drop",function(E){return _.onDrop(E)})},inputs:{markStyle:[1,"markStyle"],allowedFileTypes:[1,"allowedFileTypes"]},outputs:{filesDropped:"filesDropped"},features:[g.Vt3]})}return O})()},41134:(I,A,i)=>{i.d(A,{D6:()=>a,LG:()=>y});var f=i(44444),o=i(99293),l=i(37580),m=i(87945),g=i(73388),F=i(8126);const T=["determinateSpinner"];function O(d,v){if(1&d&&(f.qSk(),o.j41(0,"svg",11),o.nrm(1,"circle",12),o.k0s()),2&d){const c=o.XpG();o.BMQ("viewBox",c._viewBox()),o.R7$(),o.xc7("stroke-dasharray",c._strokeCircumference(),"px")("stroke-dashoffset",c._strokeCircumference()/2,"px")("stroke-width",c._circleStrokeWidth(),"%"),o.BMQ("r",c._circleRadius())}}const U=new f.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function p(){return{diameter:C}}}),C=100;let y=(()=>{class d{_elementRef=(0,f.WQX)(o.aKT);_noopAnimations;get color(){return this._color||this._defaultColor}set color(c){this._color=c}_color;_defaultColor="primary";_determinateCircle;constructor(){const c=(0,f.WQX)(U);this._noopAnimations=(0,g._)()&&!!c&&!c._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",c&&(c.color&&(this.color=this._defaultColor=c.color),c.diameter&&(this.diameter=c.diameter),c.strokeWidth&&(this.strokeWidth=c.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(c){this._value=Math.max(0,Math.min(100,c||0))}_value=0;get diameter(){return this._diameter}set diameter(c){this._diameter=c||0}_diameter=C;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(c){this._strokeWidth=c||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const c=2*this._circleRadius()+this.strokeWidth;return`0 0 ${c} ${c}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(D){return new(D||d)};static \u0275cmp=o.VBU({type:d,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(D,h){if(1&D&&o.GBs(T,5),2&D){let P;o.mGM(P=o.lsd())&&(h._determinateCircle=P.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(D,h){2&D&&(o.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===h.mode?h.value:null)("mode",h.mode),o.HbH("mat-"+h.color),o.xc7("width",h.diameter,"px")("height",h.diameter,"px")("--mat-progress-spinner-size",h.diameter+"px")("--mat-progress-spinner-active-indicator-width",h.diameter+"px"),o.AVh("_mat-animation-noopable",h._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===h.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",l.Udg],diameter:[2,"diameter","diameter",l.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",l.Udg]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(D,h){if(1&D&&(o.DNE(0,O,2,8,"ng-template",null,0,o.C5r),o.j41(2,"div",2,1),f.qSk(),o.j41(4,"svg",3),o.nrm(5,"circle",4),o.k0s()(),f.joV(),o.j41(6,"div",5)(7,"div",6)(8,"div",7),o.eu8(9,8),o.k0s(),o.j41(10,"div",9),o.eu8(11,8),o.k0s(),o.j41(12,"div",10),o.eu8(13,8),o.k0s()()()),2&D){const P=o.sdS(1);o.R7$(4),o.BMQ("viewBox",h._viewBox()),o.R7$(),o.xc7("stroke-dasharray",h._strokeCircumference(),"px")("stroke-dashoffset",h._strokeDashOffset(),"px")("stroke-width",h._circleStrokeWidth(),"%"),o.BMQ("r",h._circleRadius()),o.R7$(4),o.Y8G("ngTemplateOutlet",P),o.R7$(2),o.Y8G("ngTemplateOutlet",P),o.R7$(2),o.Y8G("ngTemplateOutlet",P)}},dependencies:[m.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mat-progress-spinner-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mat-progress-spinner-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}\n"],encapsulation:2,changeDetection:0})}return d})(),a=(()=>{class d{static \u0275fac=function(D){return new(D||d)};static \u0275mod=o.$C({type:d});static \u0275inj=f.G2t({imports:[F.M]})}return d})()},83583:(I,A,i)=>{i.d(A,{U:()=>_});var f=i(89204),o=i(46443),l=i(24467),m=i(99293),g=i(44444);const U="admin/app/app";let _=(()=>{class y extends l.B{getAllLive(a){return(0,o.fx)(()=>(a(),{url:this.apiUrl("admin/app/list"),params:{zoneId:this.zoneId}}))}getInheritable(){return(0,o.fx)(()=>({url:this.apiUrl("admin/app/InheritableApps"),params:{zoneId:this.zoneId}}))}getPendingApps(){return(0,o.fx)(()=>({url:this.apiUrl("admin/app/GetPendingApps"),params:{zoneId:this.zoneId}}))}create(a,d,v){return this.http.post(this.apiUrl(U),{},{params:{zoneId:this.zoneId,name:a,...null!=d&&{inheritAppId:d},...null!=v&&{templateId:v}}})}createTemplate(a,d){const v=encodeURIComponent(d);return this.http.post(`sys/install/RemotePackage?packageUrl=${a}&newName=${v}`,{})}installPendingApps(a){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),a,{params:{zoneId:this.zoneId}})}delete(a){return this.http.delete(this.apiUrl(U),{params:{zoneId:this.zoneId,appId:a.toString()}})}flushCache(a){var d=this;return(0,f.A)(function*(){return d.getStatusPromise("admin/app/flushcache",{params:{zoneId:d.zoneId,appId:a.toString()}})})()}static#t=this.\u0275fac=(()=>{let a;return function(v){return(a||(a=m.xGo(y)))(v||y)}})();static#e=this.\u0275prov=g.jDH({token:y,factory:y.\u0275fac})}return y})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.05/dist/ng-edit/default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts.de0092f313121d98.js.map