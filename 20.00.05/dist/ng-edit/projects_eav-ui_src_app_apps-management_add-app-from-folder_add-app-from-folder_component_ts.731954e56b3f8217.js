"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{9006:(A,g,e)=>{e.d(g,{j:()=>C,x:()=>E});var d=e(37580),r=e(44444),p=e(99293),h=e(81863),f=e(67993),_=e(96133),a=e(9001);let E=(()=>{class t{#t;#e;#n;#a;constructor(){this.featureNameId=d.hFB.required(),this.showIf=(0,d.hFB)(!1),this.#t=(0,r.WQX)(h.h),this.#e=(0,r.WQX)(p.c1b),this.#n=(0,r.WQX)(d.gRc),this.#a=(0,r.WQX)(a.D),this.feature=(0,f.bo)("feature",()=>this.#a.getCurrent(this.featureNameId())),this.show=(0,f.bo)("show",()=>{const i=this.feature();return null!=i&&this.showIf()==(i?.isEnabled??!1)})}openDialog(){C(this.#t,this.featureNameId(),this.#e,this.#n)}static#i=this.\u0275fac=function(F){return new(F||t)};static#o=this.\u0275dir=p.FsC({type:t,inputs:{featureNameId:[1,"featureNameId"],showIf:[1,"showIf"]}})}return t})();function C(t,P,i,F){t.open(_.FeatureInfoDialogComponent,{autoFocus:!1,data:P,viewContainerRef:i,width:"400px"}),F?.markForCheck()}},25081:(A,g,e)=>{e.d(g,{W:()=>h});var d=e(70519),r=e(44444),p=e(3347);let h=(()=>{class f{constructor(a){this.snackBar=a}copyToClipboard(a){(0,d.l)(a),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(E){return new(E||f)(r.KVO(p.UG))};static#e=this.\u0275prov=r.jDH({token:f,factory:f.\u0275fac,providedIn:"root"})}return f})()},28136:(A,g,e)=>{e.d(g,{T:()=>d});const d={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",ContentTypeFieldsReuseDefinitions:"ContentTypeFieldsReuseDefinitions",AppExportAssetsAdvanced:"AppExportAssetsAdvanced",DataExportImportBundles:"DataExportImportBundles",PickerUiCheckbox:"PickerUiCheckbox",PickerUiRadio:"PickerUiRadio",PickerSourceCsv:"PickerSourceCsv",PickerSourceAppAssets:"PickerSourceAppAssets",PickerFormulas:"PickerFormulas",PickerUiMoreInfo:"PickerUiMoreInfo"}},28242:(A,g,e)=>{e.r(g),e.d(g,{AddAppFromFolderComponent:()=>M});var d=e(44444),r=e(84175),p=e(81863),h=e(12938),f=e(28136),_=e(95469),a=e(9001),E=e(11828),C=e(60251),t=e(67037),P=e(83583),i=e(93840),F=e(34601),n=e(99293);let o=(()=>{class D{agInit(c){this.name=c.value,this.tooltip=c.tooltipGetter(c.data)}refresh(c){return!0}static#t=this.\u0275fac=function(m){return new(m||D)};static#e=this.\u0275cmp=n.VBU({type:D,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(m,s){1&m&&(n.j41(0,"div",0)(1,"span"),n.EFF(2),n.k0s(),n.j41(3,"mat-icon",1),n.EFF(4,"info"),n.k0s()()),2&m&&(n.R7$(2),n.JRh(s.name),n.R7$(),n.Y8G("tippy",s.tooltip))},dependencies:[i.m_,i.An,F.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}return D})(),v=(()=>{class D{agInit(c){this.params=c}refresh(c){return!0}onChange(c){this.params.onChange(this.params.data,c.currentTarget.checked)}static#t=this.\u0275fac=function(m){return new(m||D)};static#e=this.\u0275cmp=n.VBU({type:D,selectors:[["app-checkbox-cell"]],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(m,s){1&m&&(n.j41(0,"div",0)(1,"input",1),n.bIt("change",function(T){return s.onChange(T)}),n.k0s()()),2&m&&(n.R7$(),n.Y8G("disabled",s.params.isDisabled)("checked",s.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}return D})();var l=e(3347),R=e(29841);function u(D,x){1&D&&(n.j41(0,"p"),n.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),n.k0s())}function I(D,x){if(1&D&&(n.j41(0,"div"),n.nrm(1,"ag-grid-angular",8),n.k0s()),2&D){const c=n.XpG();n.R7$(),n.Y8G("rowData",c.pendingApps())("gridOptions",c.gridOptions)}}let M=(()=>{class D{#t;#e;constructor(c,m){this.dialog=c,this.snackBar=m,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.installing=!1,this.features=(0,d.WQX)(a.D),this.#t=this.features.isEnabled[f.T.AppSyncWithSiteFiles],this.#e=(0,h.d)(P.U),this.AppSyncWithSiteFiles=f.T.AppSyncWithSiteFiles,this.pendingApps=this.#e.getPendingApps().value}closeDialog(){this.dialog.close()}onChange(c,m){const s=this.pendingApps();m?s.push(c):s.splice(s.indexOf(c),1),this.pendingApps.set(s)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.#e.installPendingApps(this.pendingApps()).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...C.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:v,cellRendererParams:()=>({isDisabled:!this.#t(),onChange:(s,O)=>this.onChange(s,O)})},{...E.r.ItemsText,field:"Name",flex:1,sort:"asc",cellRenderer:o,cellRendererParams:{tooltipGetter:s=>`Server folder: ${s.ServerFolder}\nFolder: ${s.Folder}\nVersion: ${s.Version}\nDescription: ${s.Description}`}}]}}static#n=this.\u0275fac=function(m){return new(m||D)(n.rXU(p.k),n.rXU(l.UG))};static#a=this.\u0275cmp=n.VBU({type:D,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(m,s){2&m&&n.Avn("className",s.hostClass)},decls:15,vars:4,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","",1,"eav-action-button",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(m,s){if(1&m&&(n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.EFF(3,"Add App from Folder"),n.k0s()(),n.j41(4,"div",3),n.nrm(5,"app-feature-text-info",4),n.j41(6,"p"),n.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),n.k0s(),n.nVh(8,u,2,0,"p"),n.nVh(9,I,2,2,"div"),n.k0s(),n.j41(10,"mat-dialog-actions",5)(11,"button",6),n.bIt("click",function(){return s.closeDialog()}),n.EFF(12," Cancel "),n.k0s(),n.j41(13,"button",7),n.bIt("click",function(){return s.install()}),n.EFF(14," Install "),n.k0s()()()),2&m){let O,T;n.R7$(5),n.Y8G("featureNameId",s.AppSyncWithSiteFiles),n.R7$(3),n.vxM(0==(null==(O=s.pendingApps())?null:O.length)?8:-1),n.R7$(),n.vxM((null==(T=s.pendingApps())?null:T.length)>0?9:-1),n.R7$(4),n.Y8G("disabled",0===s.pendingApps().length||s.installing)}},dependencies:[p.M,r.Hl,r.$z,_.L,t.p,R.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}return D})()},45943:(A,g,e)=>{e.d(g,{N:()=>f});var d=e(44444),r=e(24467),p=e(99293);const h="admin/feature/details";let f=(()=>{class _ extends r.B{getFeatureDetail(E){return this.newHttpResource(()=>({url:this.apiUrl(h),params:{nameId:E()}}))}getFeatureDetails(E){const C=(0,d.vPA)([]);for(const t of E)this.fetchPromise(h,{params:{nameId:t}}).then(P=>{C.update(i=>[...i,P])});return C}static#t=this.\u0275fac=(()=>{let E;return function(t){return(E||(E=p.xGo(_)))(t||_)}})();static#e=this.\u0275prov=d.jDH({token:_,factory:_.\u0275fac})}return _})()},51191:(A,g,e)=>{e.d(g,{O:()=>v});var d=e(37580),r=e(84175),p=e(81863),h=e(93840),f=e(90852),_=e(12938),a=e(69914),E=e(25081),C=e(67993),t=e(99293),P=e(44444),i=e(88622);function F(l,R){if(1&l&&(t.j41(0,"div",6)(1,"div",7),t.EFF(2),t.nI1(3,"translate"),t.k0s(),t.j41(4,"div",8)(5,"span"),t.EFF(6),t.nI1(7,"translate"),t.k0s()()()),2&l){const u=t.XpG(2);t.R7$(2),t.SpI("",t.bMT(3,2,"Features.Status"),":"),t.R7$(4),t.JRh(t.bMT(7,4,u.feature().isEnabled?"Features.Active":"Features.NotActive"))}}function n(l,R){if(1&l){const u=t.RV6();t.j41(0,"div",6)(1,"div",7),t.EFF(2,"GUID:"),t.k0s(),t.j41(3,"div",12)(4,"span",9),t.bIt("click",function(){P.eBV(u);const M=t.XpG(2);return P.Njj(M.clipboard.copyToClipboard(M.feature().guid))}),t.EFF(5),t.k0s()()()}if(2&l){const u=t.XpG(2);t.R7$(5),t.JRh(u.feature().guid)}}function o(l,R){if(1&l){const u=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){P.eBV(u);const M=t.XpG();return P.Njj(M.closeDialog())}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4),t.nrm(8,"p",5),t.nI1(9,"safeHtml"),t.j41(10,"div",6)(11,"div",7),t.EFF(12,"ID:"),t.k0s(),t.j41(13,"div",8)(14,"span",9),t.bIt("click",function(){P.eBV(u);const M=t.XpG();return P.Njj(M.clipboard.copyToClipboard(M.feature().nameId))}),t.EFF(15),t.k0s()()(),t.nVh(16,F,8,6,"div",6),t.nVh(17,n,6,1,"div",6),t.j41(18,"div",6)(19,"div",7),t.EFF(20,"Security Rating:"),t.k0s(),t.j41(21,"div",8)(22,"span"),t.EFF(23),t.k0s()()()(),t.j41(24,"mat-dialog-actions",10)(25,"a",11)(26,"mat-icon"),t.EFF(27,"open_in_new"),t.k0s(),t.EFF(28," Find out more "),t.k0s()()()}if(2&l){const u=t.XpG();t.R7$(3),t.SpI(" ",u.feature().name," "),t.R7$(5),t.Y8G("innerHtml",t.bMT(9,7,u.feature().description),t.npT),t.R7$(7),t.JRh(u.feature().nameId),t.R7$(),t.vxM(u.mySpecs().showStatus?16:-1),t.R7$(),t.vxM(u.mySpecs().showGuid?17:-1),t.R7$(6),t.JRh(u.feature().security.Impact+": "+u.feature().security.Message),t.R7$(2),t.Y8G("href",u.feature().link,t.B4B)}}let v=(()=>{class l{constructor(u,I){this.dialogSpecs=u,this.dialog=I,this.specs=(0,d.hFB)(),this.mySpecs=(0,C.bo)("mySpecs",()=>this.specs()??this.dialogSpecs),this.feature=(0,C.bo)("feature",()=>this.mySpecs()?.feature),this.clipboard=(0,_.d)(E.W)}closeDialog(){this.dialog.close()}static#t=this.\u0275fac=function(I){return new(I||l)(t.rXU(p.e,8),t.rXU(p.k))};static#e=this.\u0275cmp=t.VBU({type:l,selectors:[["app-feature-details-dialog"]],inputs:{specs:[1,"specs"]},decls:1,vars:1,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content"],[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"click"],["align","end"],["target","_blank","mat-raised-button","",3,"href"],[1,"eav-info-row__value","eav_click"]],template:function(I,M){1&I&&t.nVh(0,o,29,9,"div",0),2&I&&t.vxM(M.feature()?0:-1)},dependencies:[r.Hl,r.$z,i.M,h.m_,h.An,a.$,f.h,f.D9,p.M],encapsulation:2})}return l})()},69914:(A,g,e)=>{e.d(g,{$:()=>p});var d=e(99293),r=e(80436);let p=(()=>{class h{constructor(_){this.sanitizer=_}transform(_){return this.sanitizer.bypassSecurityTrustHtml(_)}static#t=this.\u0275fac=function(a){return new(a||h)(d.rXU(r.up,16))};static#e=this.\u0275pipe=d.EJ8({name:"safeHtml",type:h,pure:!0})}return h})()},83583:(A,g,e)=>{e.d(g,{U:()=>i});var d=e(89204),r=e(46443),p=e(24467),h=e(99293),f=e(44444);const C="admin/app/app";let i=(()=>{class F extends p.B{getAllLive(o){return(0,r.fx)(()=>(o(),{url:this.apiUrl("admin/app/list"),params:{zoneId:this.zoneId}}))}getInheritable(){return(0,r.fx)(()=>({url:this.apiUrl("admin/app/InheritableApps"),params:{zoneId:this.zoneId}}))}getPendingApps(){return(0,r.fx)(()=>({url:this.apiUrl("admin/app/GetPendingApps"),params:{zoneId:this.zoneId}}))}create(o,v,l){return this.http.post(this.apiUrl(C),{},{params:{zoneId:this.zoneId,name:o,...null!=v&&{inheritAppId:v},...null!=l&&{templateId:l}}})}createTemplate(o,v){const l=encodeURIComponent(v);return this.http.post(`sys/install/RemotePackage?packageUrl=${o}&newName=${l}`,{})}installPendingApps(o){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),o,{params:{zoneId:this.zoneId}})}delete(o){return this.http.delete(this.apiUrl(C),{params:{zoneId:this.zoneId,appId:o.toString()}})}flushCache(o){var v=this;return(0,d.A)(function*(){return v.getStatusPromise("admin/app/flushcache",{params:{zoneId:v.zoneId,appId:o.toString()}})})()}static#t=this.\u0275fac=(()=>{let o;return function(l){return(o||(o=h.xGo(F)))(l||F)}})();static#e=this.\u0275prov=f.jDH({token:F,factory:F.\u0275fac})}return F})()},95469:(A,g,e)=>{e.d(g,{L:()=>P});var d=e(37580),r=e(93840),p=e(90852),h=e(34601),f=e(67993),_=e(9006),a=e(99293),E=e(44444);const C=["*"];function t(i,F){if(1&i){const n=a.RV6();a.j41(0,"div",1),a.nI1(1,"translate"),a.bIt("click",function(){E.eBV(n);const v=a.XpG();return E.Njj(v.openDialog())}),a.j41(2,"mat-icon"),a.EFF(3),a.k0s(),a.j41(4,"div",2)(5,"div",3),a.EFF(6),a.nI1(7,"translate"),a.k0s(),a.j41(8,"div",4),a.EFF(9),a.nI1(10,"translate"),a.k0s(),a.SdG(11),a.k0s()()}if(2&i){const n=a.XpG();a.Y8G("tippy",a.i5U(1,7,"Features.Tooltip",n.feature())),a.R7$(2),a.HbH(a.VkB("icon icon-",n.icon())),a.R7$(),a.JRh(n.icon()),a.R7$(3),a.JRh(a.bMT(7,10,"Features.FeatureNotActivated")),a.R7$(3),a.JRh(a.bMT(10,12,"Features.ClickToFindOutMore"))}}let P=(()=>{class i extends _.x{constructor(){super(),this.asInfo=(0,d.hFB)(!1),this.icon=(0,f.bo)("icon",()=>this.asInfo()?"info":"warning")}static#t=this.\u0275fac=function(o){return new(o||i)};static#e=this.\u0275cmp=a.VBU({type:i,selectors:[["app-feature-text-info"]],inputs:{asInfo:[1,"asInfo"]},features:[a.Vt3],ngContentSelectors:C,decls:1,vars:1,consts:[[1,"feature-text-info",3,"tippy"],[1,"feature-text-info",3,"click","tippy"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(o,v){1&o&&(a.NAR(),a.nVh(0,t,12,14,"div",0)),2&o&&a.vxM(v.show()?0:-1)},dependencies:[r.m_,r.An,p.h,p.D9,h.e],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}return i})()},96133:(A,g,e)=>{e.r(g),e.d(g,{FeatureInfoDialogComponent:()=>P});var d=e(44444),r=e(81863),p=e(12938),h=e(51191),f=e(25081),_=e(45943),a=e(99293),E=e(29658);const C=i=>({feature:i,showGuid:!1,showStatus:!0,showClose:!0});function t(i,F){1&i&&a.nrm(0,"app-feature-details-dialog",0),2&i&&a.Y8G("specs",a.eq3(1,C,F))}let P=(()=>{class i{#t;constructor(n,o,v){this.dialogData=n,this.dialog=o,this.route=v,this.#t=(0,p.d)(_.N),this.featureId=(0,d.vPA)(""),this.clipboard=(0,p.d)(f.W)}ngOnInit(){this.featureId.set(this.route.snapshot.data.featureId||this.dialogData||""),this.featureDetails=this.#t.getFeatureDetail(this.featureId).value}static#e=this.\u0275fac=function(o){return new(o||i)(a.rXU(r.e),a.rXU(r.k),a.rXU(E.nX))};static#n=this.\u0275cmp=a.VBU({type:i,selectors:[["app-feature-info-dialog"]],decls:1,vars:1,consts:[[3,"specs"]],template:function(o,v){if(1&o&&a.nVh(0,t,1,3,"app-feature-details-dialog",0),2&o){let l;a.vxM((l=v.featureDetails())?0:-1,l)}},dependencies:[h.O],encapsulation:2})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.05/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.731954e56b3f8217.js.map