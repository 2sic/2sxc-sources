"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts"],{1205:(g,p,i)=>{i.r(p),i.d(p,{AddAppFromFolderComponent:()=>S});var l=i(253),m=i(4874),h=i(2673),u=i(3158),f=i(745),A=i(1203),C=i(4153),x=i(5446),n=i(3184),v=i(5590),F=i(6190);let b=(()=>{class t{agInit(e){this.name=e.value,this.tooltip=e.tooltipGetter(e.data)}refresh(e){return!0}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-app-name-show"]],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0)(1,"span"),n._uU(2),n.qZA(),n.TgZ(3,"mat-icon",1),n._uU(4,"info"),n.qZA()()),2&e&&(n.xp6(2),n.Oqu(o.name),n.xp6(1),n.Q6J("tippy",o.tooltip))},directives:[v.Hw,F.$],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]}),t})(),y=(()=>{class t{agInit(e){this.params=e}refresh(e){return!0}onChange(e){this.params.onChange(this.params.data,e.currentTarget.checked)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-checkbox-cell"]],decls:2,vars:1,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"checked","change"]],template:function(e,o){1&e&&(n.TgZ(0,"div",0)(1,"input",1),n.NdJ("change",function(r){return o.onChange(r)}),n.qZA()()),2&e&&(n.xp6(1),n.Q6J("checked",o.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]}),t})();var c=i(5758),O=i(2528),d=i(6362),T=i(1350),Z=i(7317);function k(t,s){1&t&&(n.TgZ(0,"p",3),n._uU(1," No apps found which are not already installed. "),n.qZA())}function w(t,s){if(1&t&&(n.TgZ(0,"div",9),n._UZ(1,"ag-grid-angular",10),n.qZA()),2&t){const e=n.oxw().ngIf,o=n.oxw();n.xp6(1),n.Q6J("rowData",e.pendingApps)("gridOptions",o.gridOptions)}}function I(t,s){if(1&t){const e=n.EpF();n.ynx(0),n.TgZ(1,"div",1)(2,"div",2),n._uU(3,"Add App from Folder BETA"),n.qZA()(),n.TgZ(4,"p",3),n._uU(5," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),n.qZA(),n.YNc(6,k,2,0,"p",4),n.YNc(7,w,2,2,"div",5),n.TgZ(8,"div",6)(9,"button",7),n.NdJ("click",function(){return n.CHM(e),n.oxw().closeDialog()}),n._uU(10," Cancel "),n.qZA(),n.TgZ(11,"button",8),n.NdJ("click",function(){return n.CHM(e),n.oxw().install()}),n._uU(12," Install "),n.qZA()(),n.BQk()}if(2&t){const e=s.ngIf,o=n.oxw();n.xp6(6),n.Q6J("ngIf",0==(null==e.pendingApps?null:e.pendingApps.length)),n.xp6(1),n.Q6J("ngIf",(null==e.pendingApps?null:e.pendingApps.length)>0),n.xp6(4),n.Q6J("disabled",0===o.pendingApps.length||o.installing)}}const N=function(t){return{pendingApps:t}};let S=(()=>{class t{constructor(e,o,a){this.dialogRef=e,this.appsListService=o,this.snackBar=a,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.refreshApps$=new l.x,this.pendingApps=[],this.installing=!1}ngOnInit(){this.pendingApps$=this.refreshApps$.pipe((0,m.O)(void 0),(0,h.w)(()=>this.appsListService.getPendingApps().pipe((0,u.K)(()=>(0,f.of)(void 0)))),(0,A.B)())}ngOnDestroy(){this.refreshApps$.complete()}closeDialog(){this.dialogRef.close()}onChange(e,o){o?this.pendingApps.push(e):this.pendingApps.splice(this.pendingApps.indexOf(e),1)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return Object.assign(Object.assign({},C.f),{columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:y,cellRendererParams:()=>({onChange:(a,r)=>this.onChange(a,r)})},{field:"Name",flex:1,cellClass:"no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellRenderer:b,cellRendererParams:{tooltipGetter:a=>`Server folder: ${a.ServerFolder}\nFolder: ${a.Folder}\nVersion: ${a.Version}\nDescription: ${a.Description}`}}]})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(c.so),n.Y36(x.A),n.Y36(O.ux))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(e,o){2&e&&n.Ikx("className",o.hostClass)},decls:2,vars:5,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["class","dialog-description",4,"ngIf"],["class","grid-wrapper",4,"ngIf"],[1,"dialog-component-actions"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[1,"grid-wrapper"],[1,"ag-theme-material",2,"height","200px","width","auto",3,"rowData","gridOptions"]],template:function(e,o){1&e&&(n.YNc(0,I,13,3,"ng-container",0),n.ALo(1,"async")),2&e&&n.Q6J("ngIf",n.VKq(3,N,n.lcZ(1,1,o.pendingApps$)))},directives:[d.O5,c.uh,T.N8,Z.lW],pipes:[d.Ov],styles:[""]}),t})()},4153:(g,p,i)=>{i.d(p,{f:()=>l});const l={accentedSort:!0,animateRows:!0,enableCellTextSelection:!0,headerHeight:32,suppressScrollOnNewData:!0,valueCache:!0,defaultColDef:{filterParams:{newRowsAction:"keep"}},tooltipShowDelay:0,tooltipHideDelay:1e5,suppressMovableColumns:!0}}}]);
//# sourceMappingURL=https://sources.2sxc.org/15.00.00/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts.c44f3e2a0659eaa0.js.map