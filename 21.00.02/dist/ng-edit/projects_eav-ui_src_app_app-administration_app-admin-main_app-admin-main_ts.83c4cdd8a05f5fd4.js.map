{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-admin-main_app-admin-main_ts.83c4cdd8a05f5fd4.js","mappings":"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","names":["AppAdminMenu","name","path","icon","tippy","eavConstants","scopes","default","value","child","GoToCopilot","routeDefinition","GoToDevRest","routeDataDefinition","GoToRecycleBin","routeQueryDefinition","CopilotSpecs","webApi","teaser","routeWebApiDefinition","i0","_r2","sidenav_r3","opened","tmp_3_0","ctx_r3","dialogSettings","Context","App","Icon","_r5","Name","breadcrumb_r6","AppAdminMain_ng_container_13_Conditional_1_Template","last_r7","AppAdminMain","#dialogConfigSvc","#dialogRouter","constructor","dialog","media","this","log","classLog","isLoading","signal","transient","DialogConfigAppService","DialogRoutingService","AppScopes","undefined","smallScreen","matchMedia","sideNavOpened","matches","navItems","a","ngOnInit","fetchDialogSettings","doOnDialogClosed","addEventListener","c","sidenav","mode","closeDialog","close","set","getCurrent$","subscribe","next","Update$2sxcEnvFromContext","Enable","Query","filter","item","error","err","console","i1","i2","selectors","viewQuery","rf","ctx","AppAdminMain_Conditional_2_Template","AppAdminMain_Conditional_3_Template","AppAdminMain_Conditional_5_Template","AppAdminMain_Conditional_6_Template","AppAdminMain_ng_container_13_Template","AppAdminMain_ng_template_14_Template","_r1","AppAdminMain_For_24_Template","_forTrack0","AppAdminMain_Conditional_29_Template","AppAdminMain_Conditional_30_Template","tmp_2_0","SettingsScope","Global","tmp_4_0","emptyTemplate_r9","MatToolbarModule","i3","MatIconModule","i4","BreadcrumbComponent","BreadcrumbItemDirective","MatButtonModule","i5","MatSidenavModule","i6","RouterOutlet","NavItemListComponent","ToggleDebugDirective","MatProgressSpinnerModule","i7","styles"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-menu.ts","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.html","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.ts"],"sourcesContent":["import { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { NavItem } from \"../../shared/models/nav-item.model\";\r\nimport { CopilotSpecs } from '../copilot/copilot-specs';\r\nimport { GoToCopilot } from '../copilot/go-to-copilot';\r\nimport { GoToRecycleBin } from '../recycle-bin/go-to-recycle-bin';\r\n\r\nexport const AppAdminMenu: NavItem[] = [\r\n  { name: 'App Info', path: 'home', icon: 'info', tippy: 'App Info' },\r\n  {\r\n    name: 'Data', path: `data/${eavConstants.scopes.default.value}`, icon: 'menu', tippy: 'Data / Content',\r\n    child: [\r\n      { ...GoToCopilot.routeDefinition('data'), tippy: 'Autogenerate content types ' },\r\n      { ...GoToDevRest.routeDataDefinition, tippy: 'Rest-Api Data ' },\r\n      { ...GoToRecycleBin.routeDefinition('data'), tippy: 'Recycle Bin (beta)' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Queries',\r\n    path: 'queries',\r\n    icon: 'filter_list',\r\n    tippy: 'Queries / Visual Query Designer',\r\n    child: [\r\n      { ...GoToDevRest.routeQueryDefinition, tippy: 'Rest-Api Queries' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Views',\r\n    path: 'views',\r\n    icon: 'layers',\r\n    tippy: 'Views / Templates',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('views'),\r\n        tippy: 'Autogenerate Razor Views'\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    name: 'App Extensions',\r\n    path: 'extensions',\r\n    icon: 'extension',\r\n    tippy: 'App Extensions',\r\n  },\r\n  {\r\n    name: 'Web API', path: 'web-api', icon: 'offline_bolt', tippy: 'WebApi',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('web-api'),\r\n        tippy: CopilotSpecs.webApi.teaser,\r\n      },\r\n      {\r\n        ...GoToDevRest.routeWebApiDefinition,\r\n        tippy: 'Rest-Api Queries'\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    name: 'App',\r\n    path: 'app',\r\n    icon: 'settings_applications',\r\n    tippy: 'App Settings',\r\n  },\r\n  {\r\n    name: 'Import/Export',\r\n    path: 'import-export',\r\n    icon: 'cloud_sync',\r\n    tippy: 'Import Export',\r\n    child: [\r\n      {\r\n        name: 'Export App',\r\n        path: 'export-app',\r\n        icon: 'deployed_code_update',\r\n        tippy: 'Export this entire App'\r\n      },\r\n      {\r\n        name: 'Data Bundles (beta)',\r\n        path: 'data-bundles',\r\n        icon: 'dataset',\r\n        tippy: 'Data Bundles'\r\n      },\r\n      {\r\n        name: 'Export Parts',\r\n        path: 'export-parts',\r\n        icon: 'cloud_download',\r\n        tippy: 'Export parts of this App'\r\n      },\r\n      {\r\n        name: 'Import Parts',\r\n        path: 'import-parts',\r\n        icon: 'cloud_upload',\r\n        tippy: 'Import parts of this App'\r\n      },\r\n      {\r\n        name: 'App-State Git Sync',\r\n        path: 'app-state',\r\n        icon: 'sync',\r\n        tippy: 'App-State Versioning'\r\n      },\r\n    ]\r\n  },\r\n];\r\n","<mat-toolbar appToggleDebug>\r\n  <div class=\"toolbar-container\">\r\n    <!-- App Logo -->\r\n    @if (dialogSettings()?.Context.App.Icon) {\r\n      <img (click)=\"sidenav.opened = !sidenav.opened\" [src]=\"dialogSettings()?.Context.App.Icon + '?w=40&h=40&mode=crop'\" />\r\n    } @else {\r\n      <mat-icon class=\"menu-container\" (click)=\"sidenav.opened = !sidenav.opened\">menu</mat-icon>\r\n    }\r\n    <!-- App Name -->\r\n    <div class=\"d-flex\">\r\n      @if (dialogSettings()?.Context.App.SettingsScope === AppScopes.Global) {\r\n        Global\r\n      }\r\n      @if (dialogSettings()?.Context.App.SettingsScope !== AppScopes.Global) {\r\n        {{ dialogSettings()?.Context.App.Name }}\r\n      }\r\n      <span>\r\n        <span class=\"mat-icon-admin\">\r\n          <mat-icon>settings</mat-icon>\r\n        </span>\r\n        Admin\r\n      </span>\r\n    </div>\r\n    <!-- Breadcrumb in the Toolbar after show Img and Aoo Name -->\r\n    <xng-breadcrumb [separator]=\"emptyTemplate\">\r\n      <ng-container *xngBreadcrumbItem=\"let breadcrumb; let info = info; let last = last\">\r\n        @if (last) {\r\n          <mat-icon class=\"breadcrumb-icon\">chevron_right</mat-icon>\r\n          {{ breadcrumb }}\r\n        }\r\n      </ng-container>\r\n    </xng-breadcrumb>\r\n    <ng-template #emptyTemplate></ng-template>\r\n  </div>\r\n  <span class=\"toolbar-spacer\"></span>\r\n  <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n</mat-toolbar>\r\n<mat-sidenav-container appToggleDebug>\r\n  <mat-sidenav #sidenav [mode]=\"smallScreen.matches ? 'over' : 'side'\" [opened]=\"sideNavOpened\">\r\n    @for (navItem of navItems; track navItem.path) {\r\n      <app-nav-item-list [navItem]=\"navItem\"></app-nav-item-list>\r\n    }\r\n    <div class=\"sideNav-bottom-info\">\r\n      <p>use App logo to show/hide menu</p>\r\n    </div>\r\n  </mat-sidenav>\r\n\r\n  <mat-sidenav-content>\r\n    @if (isLoading()) {\r\n      <div class=\"lading-indicator\">\r\n        <mat-spinner></mat-spinner>\r\n      </div>\r\n    } @else {\r\n      <router-outlet></router-outlet>\r\n    }\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n","import { MediaMatcher } from '@angular/cdk/layout';\r\nimport { Component, OnInit, signal, ViewChild } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { MatSidenav, MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { BreadcrumbComponent, BreadcrumbItemDirective } from 'xng-breadcrumb';\r\nimport { transient } from '../../../../../core';\r\nimport { NavItemListComponent } from '../../shared/components/nav-item-list/nav-item-list';\r\nimport { ToggleDebugDirective } from '../../shared/directives/toggle-debug.directive';\r\nimport { Update$2sxcEnvFromContext } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { DialogConfigAppService } from '../services/dialog-config-app.service';\r\nimport { AppAdminMenu } from './app-admin-menu';\r\n\r\n@Component({\r\n  selector: 'app-app-admin-main',\r\n  templateUrl: './app-admin-main.html',\r\n  styleUrls: ['./app-admin-main.scss'],\r\n  imports: [\r\n    MatToolbarModule,\r\n    MatIconModule,\r\n    BreadcrumbComponent,\r\n    BreadcrumbItemDirective,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    RouterOutlet,\r\n    NavItemListComponent,\r\n    ToggleDebugDirective,\r\n    MatProgressSpinnerModule\r\n  ]\r\n})\r\nexport class AppAdminMain implements OnInit {\r\n\r\n  log = classLog({ AppAdminMain: AppAdminMain });\r\n\r\n  isLoading = signal(true);\r\n\r\n  #dialogConfigSvc = transient(DialogConfigAppService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<AppAdminMain>,\r\n    private media: MediaMatcher\r\n  ) {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  AppScopes = AppScopes;\r\n\r\n  dialogSettings = signal<DialogSettings>(undefined);\r\n\r\n  smallScreen: MediaQueryList = this.media.matchMedia('(max-width: 1000px)');\r\n  @ViewChild('sidenav') sidenav!: MatSidenav;\r\n  sideNavOpened = !this.smallScreen.matches;\r\n\r\n  /** Navigation menu buttons - prefilled; may be modified after settings are loaded */\r\n  navItems = AppAdminMenu;\r\n  matcher!: MediaQueryList;\r\n\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.#dialogRouter.doOnDialogClosed(() => this.fetchDialogSettings());\r\n\r\n    this.smallScreen.addEventListener(\r\n      'change',\r\n      (c) => (\r\n        this.sidenav.opened = !c.matches,\r\n        this.sidenav.mode = c.matches ? 'over' : 'side'\r\n      )\r\n    );\r\n  }\r\n\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.isLoading.set(true);\r\n    this.#dialogConfigSvc.getCurrent$().subscribe({\r\n      next: dialogSettings => {\r\n        Update$2sxcEnvFromContext(dialogSettings.Context.App);\r\n        this.dialogSettings.set(dialogSettings);\r\n\r\n        if (!dialogSettings.Context.Enable.Query)\r\n          this.navItems = this.navItems.filter(\r\n            (item) => item.name !== 'Queries' && item.name !== 'Web API'\r\n          );\r\n\r\n        this.isLoading.set(false);\r\n      },\r\n      error: (err) => {\r\n        console.error('fetchDialogSettings error', err);\r\n        this.isLoading.set(false);\r\n      }\r\n    });\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}