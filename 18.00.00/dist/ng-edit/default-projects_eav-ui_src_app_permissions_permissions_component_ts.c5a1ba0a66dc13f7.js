"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_permissions_permissions_component_ts"],{7319:(T,_,t)=>{t.d(_,{T:()=>h});var p=t(4522),r=t(8873),i=t(8559),u=t(6443),e=t(4821);let h=(()=>{class s{constructor(a,l,o){this.http=a,this.context=l,this.dnnContext=o}create(a,l){return this.http.post(`app/auto/data/${a}`,l,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}update(a,l,o){return this.http.post(`app/auto/data/${a}/${l}`,o,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}delete(a,l,o){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(p.gb+"delete"),{params:{contentType:a,id:l.toString(),appId:this.context.appId.toString(),force:o.toString()}})}static#t=this.\u0275fac=function(l){return new(l||s)(i.KVO(u.Qq),i.KVO(r.o),i.KVO(e.ob))};static#e=this.\u0275prov=i.jDH({token:s,factory:s.\u0275fac})}return s})()},5437:(T,_,t)=>{t.d(_,{d:()=>r});var p=t(8559);function r(i,u){return u??=(0,p.WQX)(p.zZn),p.zZn.create({providers:[i],parent:u}).get(i,void 0,{self:!0})}},2871:(T,_,t)=>{t.d(_,{J:()=>i});var p=t(3840),r=t(8559);let i=(()=>{class u{constructor(){this.trueIcon="check_circle",this.falseIcon="circle"}agInit(h){let s=h.value;h.reverse&&(s=!s),h.trueIcon&&(this.trueIcon=h.trueIcon),h.falseIcon&&(this.falseIcon=h.falseIcon),this.icon=s?this.trueIcon:this.falseIcon}refresh(h){return!0}static#t=this.\u0275fac=function(s){return new(s||u)};static#e=this.\u0275cmp=r.VBU({type:u,selectors:[["app-rest-api-true-false"]],standalone:!0,features:[r.aNF],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(s,g){1&s&&(r.j41(0,"div",0)(1,"mat-icon"),r.EFF(2),r.k0s()()),2&s&&(r.R7$(2),r.JRh(g.icon))},dependencies:[p.m_,p.An],encapsulation:2})}return u})()},2458:(T,_,t)=>{t.r(_),t.d(_,{PermissionsComponent:()=>B});var p=t(7941),r=t(9184),i=t(5797),u=t(9999),e=t(271),h=t(1735),s=t(6378),g=t(251),a=t(52),l=t(3216),o=t(3840),c=t(5060),n=t(8559);let f=(()=>{class P{agInit(d){this.params=d}refresh(d){return!0}deletePermission(){this.params.onDelete(this.params.data)}static#t=this.\u0275fac=function(m){return new(m||P)};static#e=this.\u0275cmp=n.VBU({type:P,selectors:[["app-permissions-actions"]],standalone:!0,features:[n.aNF],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"eav-grid-action-button","highlight",3,"click"]],template:function(m,v){1&m&&(n.j41(0,"div",0)(1,"div",1),n.bIt("click",function(){return v.deletePermission()}),n.j41(2,"mat-icon"),n.EFF(3,"delete"),n.k0s()()())},dependencies:[c.pZ,c.r6,o.m_,o.An]})}return P})();var C=t(4900),E=t(1828),O=t(316),I=t(4175),M=t(401),D=t(7319),x=t(7037),R=t(3347),F=t(9841);function A(P,U){if(1&P){const d=n.RV6();n.j41(0,"div",0)(1,"div",1)(2,"div",2),n.EFF(3,"Permissions"),n.k0s(),n.j41(4,"button",3),n.bIt("click",function(){n.eBV(d);const v=n.XpG();return n.Njj(v.closeDialog())}),n.j41(5,"mat-icon"),n.EFF(6,"close"),n.k0s()()(),n.j41(7,"div",4),n.nrm(8,"router-outlet"),n.j41(9,"div",5),n.nrm(10,"ag-grid-angular",6),n.k0s(),n.j41(11,"mat-dialog-actions",7)(12,"button",8),n.bIt("click",function(){n.eBV(d);const v=n.XpG();return n.Njj(v.editPermission(null))}),n.j41(13,"mat-icon"),n.EFF(14,"add"),n.k0s()()()()()}if(2&P){const d=n.XpG();n.R7$(10),n.Y8G("rowData",U.permissions)("gridOptions",d.gridOptions)}}let B=(()=>{class P extends h.V{constructor(d,m,v,y,W){super(d,m),this.router=d,this.route=m,this.dialogRef=v,this.permissionsService=y,this.snackBar=W,this.permissions$=new i.t(void 0),this.gridOptions=this.buildGridOptions(),this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills={[a.YX.metadata.language.targetType]:{PermissionType:"language"}}}ngOnInit(){this.fetchPermissions(),this.subscriptions.add(this.childDialogClosed$().subscribe(()=>{this.fetchPermissions()})),this.viewModel$=(0,u.z)([this.permissions$]).pipe((0,e.T)(([d])=>({permissions:d})))}ngOnDestroy(){this.permissions$.complete(),super.ngOnDestroy()}closeDialog(){this.dialogRef.close()}fetchPermissions(){this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(d=>{this.permissions$.next(d)})}editPermission(d){let m;m=null==d?{items:[{ContentTypeName:a.YX.contentTypes.permissions,For:{Target:Object.values(a.YX.metadata).find(y=>y.targetType===this.targetType)?.target??this.targetType.toString(),TargetType:this.targetType,...this.keyType===a.YX.keyTypes.guid&&{Guid:this.key},...this.keyType===a.YX.keyTypes.number&&{Number:parseInt(this.key,10)},...this.keyType===a.YX.keyTypes.string&&{String:this.key}},...this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]}}]}:{items:[{EntityId:d.Id}]};const v=(0,l.s)(m);this.router.navigate([`edit/${v}`],{relativeTo:this.route})}deletePermission(d){confirm(`Delete '${d.Title}' (${d.Id})?`)&&(this.snackBar.open("Deleting..."),this.permissionsService.delete(d.Id).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchPermissions()}))}buildGridOptions(){return{...g.C,columnDefs:[{...E.r.Id,cellRenderer:s.L,cellRendererParams:{tooltipGetter:v=>`ID: ${v.Id}\nGUID: ${v.Guid}`}},{...E.r.TextWide,headerName:"Name",field:"Title",sort:"asc",onCellClicked:m=>{this.editPermission(m.data)}},{...E.r.TextWide,field:"Identity"},{...E.r.TextWide,field:"Condition"},{...E.r.Character,field:"Grant"},{...E.r.ActionsPinnedRight1,cellRenderer:f,cellRendererParams:{onDelete:v=>this.deletePermission(v)}}]}}static#t=this.\u0275fac=function(m){return new(m||P)(n.rXU(r.Ix),n.rXU(r.nX),n.rXU(p.CP),n.rXU(C.K),n.rXU(R.UG))};static#e=this.\u0275cmp=n.VBU({type:P,selectors:[["app-permissions"]],standalone:!0,features:[n.Jv_([C.K,M.T,D.T]),n.Vt3,n.aNF],decls:2,vars:3,consts:[[1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],["align","end"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(m,v){if(1&m&&(n.DNE(0,A,15,2,"div",0),n.nI1(1,"async")),2&m){let y;n.vxM(0,(y=n.bMT(1,1,v.viewModel$))?0:-1,y)}},dependencies:[I.Hl,I.iY,I.Sr,o.m_,o.An,r.n3,p.E7,O.Jj,x.p,F.xs]})}return P})()},401:(T,_,t)=>{t.d(_,{T:()=>h});var p=t(8873),r=t(8559),i=t(6443),u=t(4821);let h=(()=>{class s{constructor(a,l,o){this.http=a,this.context=l,this.dnnContext=o}getMetadata(a,l,o,c){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:{appId:this.context.appId.toString(),targetType:a.toString(),keyType:l,key:o.toString(),...c&&{contentType:c}}})}static#t=this.\u0275fac=function(l){return new(l||s)(r.KVO(i.Qq),r.KVO(p.o),r.KVO(u.ob))};static#e=this.\u0275prov=r.jDH({token:s,factory:s.\u0275fac})}return s})()},4900:(T,_,t)=>{t.d(_,{K:()=>s});var p=t(271),r=t(7319),i=t(52),u=t(401),e=t(5437),h=t(8559);let s=(()=>{class g{constructor(l){this.entitiesService=l,this.metadataService=(0,e.d)(u.T)}getAll(l,o,c){return this.metadataService.getMetadata(l,o,c,i.YX.contentTypes.permissions).pipe((0,p.T)(n=>n.Items))}delete(l){return this.entitiesService.delete(i.YX.contentTypes.permissions,l,!1)}static#t=this.\u0275fac=function(o){return new(o||g)(h.KVO(r.T))};static#e=this.\u0275prov=h.jDH({token:g,factory:g.\u0275fac})}return g})()},8991:(T,_,t)=>{t.d(_,{N:()=>o});const p={states:{true:{tooltip:"true/on",icon:"radio_button_checked"},false:{tooltip:"false/off",icon:"radio_button_unchecked"}}};var r=t(4601),i=t(3840),u=t(316),e=t(8559);const h=c=>({clickable:c});function s(c,n){1&c&&e.eu8(0)}function g(c,n){if(1&c&&(e.j41(0,"a",2),e.DNE(1,s,1,0,"ng-container",3),e.k0s()),2&c){const f=e.XpG(),C=e.sdS(4);e.Y8G("href",f.data.url,e.B4B),e.R7$(),e.Y8G("ngTemplateOutlet",C)}}function a(c,n){if(1&c&&(e.j41(0,"div",4)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&c){const f=e.XpG();e.Y8G("ngClass",e.eq3(3,h,f.data.clickable))("tippy",f.data.tooltip),e.R7$(2),e.JRh(f.data.icon)}}function l(c,n){if(1&c&&(e.j41(0,"div",4)(1,"mat-icon"),e.EFF(2),e.k0s()()),2&c){const f=e.XpG();e.Y8G("ngClass",e.eq3(3,h,f.data.clickable))("tippy",f.data.tooltip),e.R7$(2),e.JRh(f.data.icon)}}let o=(()=>{class c{agInit(f){this.value=f.value,this.allSettings=f.settings?.(f.data)??p;const C=this.allSettings.states[this.value?"true":"false"];this.data={...C,url:C.url??C.getUrl?.(f.data)}}refresh(f){return!0}static#t=this.\u0275fac=function(C){return new(C||c)};static#e=this.\u0275cmp=e.VBU({type:c,selectors:[["app-ag-bool-icon-renderer"]],standalone:!0,features:[e.aNF],decls:5,vars:1,consts:[["showIcon",""],[1,"icon-container"],["target","_blank",3,"href"],[4,"ngTemplateOutlet"],[1,"icon-cell","icon",3,"ngClass","tippy"]],template:function(C,E){1&C&&(e.j41(0,"div",1),e.DNE(1,g,2,2,"a",2)(2,a,3,5),e.k0s(),e.DNE(3,l,3,5,"ng-template",null,0,e.C5r)),2&C&&(e.R7$(),e.vxM(1,E.data.url?1:2))},dependencies:[r.e,i.m_,i.An,u.YU],encapsulation:2})}return c})()},1828:(T,_,t)=>{t.d(_,{r:()=>u});var p=t(1960),r=t(8991),i=t(2871);class u{static#t=this.ActionsPinnedRight1={width:42,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#e=this.ActionsPinnedRight3={width:122,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#n=this.ActionsPinnedRight4={width:162,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#i=this.ActionsPinnedRight5={width:202,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#s=this.ActionsPinnedRight6={width:82,cellClass:"secondary-action no-padding".split(" "),pinned:"right"};static#a=this.ActionsPinnedRight7={width:62,cellClass:"secondary-action no-outline no-padding".split(" "),pinned:"right"};static#o=this.IconShow={headerName:"Show",width:70,headerClass:"dense",cellClass:"icons no-outline".split(" "),sortable:!0,filter:p.y,valueGetter:h=>!h.data.IsHidden,cellRenderer:r.N};static#r=this.Items={width:102,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#l=this.Fields={width:94,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#c=this.Character={width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#d=this.Id={headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#p=this.Boolean={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0};static#h=this.Boolean2={width:100,sortable:!0,cellClass:"no-outline",filter:p.y};static#u=this.Boolean3={headerClass:"dense",width:80,cellClass:"no-outline",cellRenderer:i.J,cellRendererParams:{reverse:!1}};static#m=this.Number={width:70,headerClass:"dense",cellClass:"number-cell no-outline".split(" "),sortable:!0,filter:"agNumberColumnFilter"};static#_=this.TextWideType={flex:3,minWidth:250,cellClass:"primary-action highlight".split(" "),sortable:!0,filter:"agTextColumnFilter"};static#g=this.TextWide={flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#f=this.TextWideMin100={flex:1,minWidth:100,sortable:!0,filter:"agTextColumnFilter"};static#v=this.TextWideFlex3={flex:3,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#C=this.TextNarrow={flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"};static#P=this.TextWideActionClass={flex:2,minWidth:250,cellClass:"primary-action no-padding no-outline".split(" "),sortable:!0,filter:"agTextColumnFilter"}}},1960:(T,_,t)=>{t.d(_,{y:()=>u});var p=t(4456),r=t(3804),i=t(8559);let u=(()=>{class e{constructor(){this.filter=""}agInit(s){this.filterParams=s}isFilterActive(){return""!==this.filter}doesFilterPass(s){const a=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:s.node.data,getValue:l=>s.node.data[l],node:s.node});return null!=a&&a.toString()===this.filter}getModel(){if(this.isFilterActive())return{filterType:"boolean",filter:this.filter}}setModel(s){this.filter=s?s.filter:""}afterGuiAttached(s){}filterChanged(){this.filterParams.filterChangedCallback()}static#t=this.\u0275fac=function(g){return new(g||e)};static#e=this.\u0275cmp=i.VBU({type:e,selectors:[["app-boolean-filter"]],standalone:!0,features:[i.aNF],decls:7,vars:1,consts:[[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(g,a){1&g&&(i.j41(0,"mat-radio-group",0),i.mxI("ngModelChange",function(o){return i.DH7(a.filter,o)||(a.filter=o),o}),i.bIt("ngModelChange",function(){return a.filterChanged()}),i.j41(1,"mat-radio-button",1),i.EFF(2,"All"),i.k0s(),i.j41(3,"mat-radio-button",2),i.EFF(4,"True"),i.k0s(),i.j41(5,"mat-radio-button",3),i.EFF(6,"False"),i.k0s()()),2&g&&i.R50("ngModel",a.filter)},dependencies:[p.YN,p.BC,p.vS,r.Wk,r.VT,r._g],styles:[".mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}return e})()},6378:(T,_,t)=>{t.d(_,{L:()=>g});var p=t(519),r=t(316),i=t(3840),u=t(4601),e=t(8559),h=t(3347);const s=(a,l)=>({"align-start":a,"align-end":l});let g=(()=>{class a{constructor(o){this.snackBar=o}agInit(o){this.id=o.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=o.tooltipGetter(o.data)}refresh(o){return!0}copy(){(0,p.l)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}static#t=this.\u0275fac=function(c){return new(c||a)(e.rXU(h.UG))};static#e=this.\u0275cmp=e.VBU({type:a,selectors:[["app-id-field"]],standalone:!0,features:[e.aNF],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"click","tippy","ngClass"],[1,"id"],[1,"icon"]],template:function(c,n){1&c&&(e.j41(0,"div",0),e.bIt("click",function(){return n.copy()}),e.j41(1,"span",1),e.EFF(2),e.k0s(),e.j41(3,"mat-icon",2),e.EFF(4,"file_copy"),e.k0s()()),2&c&&(e.Y8G("tippy",n.tooltip)("ngClass",e.l_i(3,s,"start"===n.align,"end"===n.align)),e.R7$(2),e.JRh(n.id))},dependencies:[r.YU,i.m_,i.An,u.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}return a})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.00.00/dist/ng-edit/default-projects_eav-ui_src_app_permissions_permissions_component_ts.c5a1ba0a66dc13f7.js.map