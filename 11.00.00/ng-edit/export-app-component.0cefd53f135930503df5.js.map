{"version":3,"sources":["./src/app/app-administration/shared/modals/export-app/export-app.component.html","./src/app/app-administration/shared/modals/export-app/export-app.component.ts"],"names":["Name","Guid","Version","dialogRef","exportAppService","includeContentGroups","resetAppGuid","isExporting","ngOnInit","this","getAppInfo","subscribe","appInfo","exportApp","exportGit","exportForVersionControl","next","res","alert","error","closeDialog","close","ExportAppComponent"],"mappings":"mRASA,cACE,cAA2B,gBAAK,OAChC,eACE,aAAI,QAAsB,OAC1B,aAAI,QAAsB,OAC1B,aAAI,QAA4B,OAClC,OAEA,eAA2B,oBAAQ,OACnC,gBACE,cAAI,SAAkC,OACtC,cAAI,SAAoC,OACxC,cACE,SACF,OACA,cAAI,SAAkD,OACtD,cAAI,SAAsD,OAC5D,OAEA,iBACE,iBACE,0BAAc,kFACZ,mBACE,sJAEF,OACF,OACF,OACA,iBACE,0BAAc,0EACZ,mBACE,8HAEF,OACF,OACF,OACF,OAEA,kBACE,qBAAmD,gEAAwB,kBAAM,OACjF,qBAAmD,8DAAsB,6CAAiC,OAC1G,qBAAkE,8DAAsB,sBAAU,OACpG,OACF,O,qBAxCQ,gCAAAA,KAAA,IACA,gCAAAC,KAAA,IACA,mCAAAC,QAAA,IAKA,qDACA,uDAEF,0IAEE,qEACA,yEAKY,+CAAkC,2BAQlC,uCAA0B,mCAUhB,uCACA,uCACe,wCC3C7C,iBAWE,WAAoBC,EAAqDC,GAArD,KAAAD,YAAqD,KAAAC,mBAJzE,KAAAC,sBAAuB,EACvB,KAAAC,cAAe,EACf,KAAAC,aAAc,E,OAId,YAAAC,SAAA,sBACEC,KAAKL,iBAAiBM,aAAaC,WAAU,SAAAC,GAC3C,EAAKA,QAAUA,MAInB,YAAAC,UAAA,WAEEJ,KAAKF,aAAc,EACnBE,KAAKL,iBAAiBS,UAAUJ,KAAKJ,qBAAsBI,KAAKH,cAChEG,KAAKF,aAAc,GAGrB,YAAAO,UAAA,sBACEL,KAAKF,aAAc,EACnBE,KAAKL,iBAAiBW,wBAAwBN,KAAKJ,qBAAsBI,KAAKH,cAAcK,UAAU,CACpGK,KAAM,SAAAC,GACJ,EAAKV,aAAc,EACnBW,MAAM,4CAERC,MAAO,SAACA,GACN,EAAKZ,aAAc,MAKzB,YAAAa,YAAA,WACEX,KAAKN,UAAUkB,S,sCAnCNC,GAAkB,sB,uBAAlBA,EAAkB,ugBDZ/B,gBACE,gBAA8B,qBAAU,OAC1C,OAEA,cACE,qCAAyB,aAAI,cAAG,OAAM,uFACf,cAAiE,oBAAS,OAAI,eACvG,OAEA,0B,MAAK,kC,8aCFL","file":"export-app-component.0cefd53f135930503df5.js","sourcesContent":["<div mat-dialog-title>\r\n  <div class=\"dialog-title-box\">Export app</div>\r\n</div>\r\n\r\n<p class=\"dialog-description\">\r\n  Pack the entire app to a <em>zip</em> folder which can be imported again to another site.\r\n  For further help visit <a href=\"http://2sxc.org/en/help?tag=export-app\" target=\"_blank\">2sxc Help</a>.\r\n</p>\r\n\r\n<div *ngIf=\"appInfo\">\r\n  <p class=\"app-info__title\">Specs</p>\r\n  <ul class=\"app-info__content\">\r\n    <li>Name: {{appInfo.Name}}</li>\r\n    <li>Guid: {{appInfo.Guid}}</li>\r\n    <li>Version: {{appInfo.Version}}</li>\r\n  </ul>\r\n\r\n  <p class=\"app-info__title\">Contains</p>\r\n  <ul class=\"app-info__content\">\r\n    <li>{{appInfo.EntitiesCount}} entities</li>\r\n    <li>{{appInfo.LanguagesCount}} languages</li>\r\n    <li>\r\n      {{appInfo.TemplatesCount}} templates (Token: {{appInfo.HasTokenTemplates}}, Razor: {{appInfo.HasRazorTemplates}})\r\n    </li>\r\n    <li>{{appInfo.TransferableFilesCount}} files to export</li>\r\n    <li>{{appInfo.FilesCount}} files in the app folder totally</li>\r\n  </ul>\r\n\r\n  <div class=\"options-wrapper\">\r\n    <div class=\"option-box\">\r\n      <mat-checkbox [(ngModel)]=\"includeContentGroups\" [disabled]=\"resetAppGuid\">\r\n        <span class=\"option-box__text\">\r\n          Include all content-groups to re-import the app in an exact copy of this site.\r\n          Only select this option when you copy an entire DNN site.\r\n        </span>\r\n      </mat-checkbox>\r\n    </div>\r\n    <div class=\"option-box\">\r\n      <mat-checkbox [(ngModel)]=\"resetAppGuid\" [disabled]=\"includeContentGroups\">\r\n        <span class=\"option-box__text\">\r\n          Reset the app GUID to zero. You only need this option for special tutorial apps, and usually must not select\r\n          it.\r\n        </span>\r\n      </mat-checkbox>\r\n    </div>\r\n  </div>\r\n\r\n  <div class=\"dialog-actions-box\">\r\n    <button mat-raised-button [disabled]=\"isExporting\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button [disabled]=\"isExporting\" (click)=\"exportGit()\">Export Data for Github versioning</button>\r\n    <button mat-raised-button color=\"accent\" [disabled]=\"isExporting\" (click)=\"exportApp()\">Export App</button>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\n\r\nimport { AppInfo } from '../../models/app-info.model';\r\nimport { ExportAppService } from '../../services/export-app.service';\r\n\r\n@Component({\r\n  selector: 'app-export-app',\r\n  templateUrl: './export-app.component.html',\r\n  styleUrls: ['./export-app.component.scss']\r\n})\r\nexport class ExportAppComponent implements OnInit {\r\n  appInfo: AppInfo;\r\n  includeContentGroups = false;\r\n  resetAppGuid = false;\r\n  isExporting = false;\r\n\r\n  constructor(private dialogRef: MatDialogRef<ExportAppComponent>, private exportAppService: ExportAppService) { }\r\n\r\n  ngOnInit() {\r\n    this.exportAppService.getAppInfo().subscribe(appInfo => {\r\n      this.appInfo = appInfo;\r\n    });\r\n  }\r\n\r\n  exportApp() {\r\n    // spm TODO: figure out how to capture window loading to disable export button\r\n    this.isExporting = true;\r\n    this.exportAppService.exportApp(this.includeContentGroups, this.resetAppGuid);\r\n    this.isExporting = false;\r\n  }\r\n\r\n  exportGit() {\r\n    this.isExporting = true;\r\n    this.exportAppService.exportForVersionControl(this.includeContentGroups, this.resetAppGuid).subscribe({\r\n      next: res => {\r\n        this.isExporting = false;\r\n        alert('Done - please check your \\'.data\\' folder');\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.isExporting = false;\r\n      },\r\n    });\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}