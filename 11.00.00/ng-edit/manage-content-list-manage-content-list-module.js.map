{"version":3,"sources":["./src/app/manage-content-list/manage-content-list.component.html","./src/app/manage-content-list/manage-content-list-dialog.config.ts","./src/app/manage-content-list/manage-content-list-routing.module.ts","./src/app/manage-content-list/manage-content-list.component.scss","./src/app/manage-content-list/manage-content-list.component.ts","./src/app/manage-content-list/manage-content-list.module.ts"],"names":[],"mappings":"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","file":"manage-content-list-manage-content-list-module.js","sourcesContent":["export default \"<div mat-dialog-title>\\r\\n  <div class=\\\"dialog-title-box\\\">Manage content-item lists</div>\\r\\n</div>\\r\\n\\r\\n<router-outlet></router-outlet>\\r\\n\\r\\n<p class=\\\"dialog-description\\\">You can manage the list header here (if it is defined):</p>\\r\\n\\r\\n<p class=\\\"dialog-description\\\" *ngIf=\\\"header\\\">\\r\\n  <ng-container *ngIf=\\\"header.Type\\\">\\r\\n    <span>{{ header.Title }}</span>\\r\\n    <button mat-icon-button matTooltip=\\\"Edit header\\\" (click)=\\\"editHeader()\\\">\\r\\n      <mat-icon>edit</mat-icon>\\r\\n    </button>\\r\\n  </ng-container>\\r\\n  <ng-container *ngIf=\\\"!header.Type\\\">(this list has no header)</ng-container>\\r\\n</p>\\r\\n\\r\\n<p class=\\\"dialog-description sort-title\\\">Sort the items by dragging as you need, then save:</p>\\r\\n\\r\\n<div class=\\\"dnd-list\\\" cdkDropList (cdkDropListDropped)=\\\"drop($event)\\\">\\r\\n  <div *ngFor=\\\"let item of items\\\" class=\\\"dnd-item\\\" cdkDrag>\\r\\n    <div class=\\\"dnd-item__title\\\">\\r\\n      <mat-icon class=\\\"dnd-item__title-icon\\\" matTooltip=\\\"Drag to reorder the list\\\">drag_handle</mat-icon>\\r\\n      <span class=\\\"dnd-item__title-text\\\">{{ item.Title }} ({{ item.Id }})</span>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"item.Id !== 0\\\">\\r\\n      <button mat-icon-button matTooltip=\\\"Edit item\\\" (mousedown)=\\\"stopDnD($event)\\\" (click)=\\\"editItem(item.Id)\\\">\\r\\n        <mat-icon>edit</mat-icon>\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"dialog-actions-box\\\">\\r\\n  <button mat-raised-button (click)=\\\"closeDialog()\\\">Cancel</button>\\r\\n  <button mat-raised-button color=\\\"accent\\\" (click)=\\\"saveList()\\\">Save</button>\\r\\n</div>\\r\\n\";","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const manageContentListDialog: DialogConfig = {\r\n  name: 'MANAGE_CONTENT_LIST_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'small',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ManageContentListComponent } = await import('./manage-content-list.component');\r\n    return ManageContentListComponent;\r\n  }\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { manageContentListDialog } from './manage-content-list-dialog.config';\r\nimport { edit } from '../../../../edit/edit.matcher';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', component: DialogEntryComponent, data: { dialog: manageContentListDialog }, children: [\r\n      {\r\n        matcher: edit,\r\n        loadChildren: () => import('../../../../edit/edit.module').then(m => m.EditModule)\r\n      },\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ManageContentListRoutingModule { }\r\n","export default \".sort-title {\\n  padding-top: 16px;\\n}\\n\\n.dnd-list {\\n  margin: 16px 0;\\n  border: 1px solid #ccc;\\n  border-radius: 4px;\\n  overflow: hidden;\\n}\\n\\n.dnd-item {\\n  cursor: move;\\n  height: 40px;\\n  border-bottom: 1px solid #ccc;\\n  padding: 0 8px;\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n  background: white;\\n  box-sizing: border-box;\\n  font-size: 14px;\\n}\\n\\n.dnd-item:last-child {\\n  border: none;\\n}\\n\\n.dnd-item__title {\\n  display: flex;\\n  align-items: center;\\n  overflow: hidden;\\n}\\n\\n.dnd-item__title-icon {\\n  margin-right: 8px;\\n  opacity: 40%;\\n}\\n\\n.dnd-item__title-text {\\n  overflow: hidden;\\n  text-overflow: ellipsis;\\n  white-space: nowrap;\\n}\\n\\n.cdk-drag-preview {\\n  box-sizing: border-box;\\n  border-radius: 4px;\\n  box-shadow: 0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);\\n}\\n\\n.cdk-drag-placeholder {\\n  opacity: 0;\\n}\\n\\n.cdk-drag-animating {\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\n}\\n\\n.dnd-list.cdk-drop-list-dragging .dnd-item:not(.cdk-drag-placeholder) {\\n  transition: transform 250ms cubic-bezier(0, 0, 0.2, 1);\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9tYW5hZ2UtY29udGVudC1saXN0L0M6XFxQcm9qZWN0c1xcZWF2LWl0ZW0tZGlhbG9nLWFuZ3VsYXIvcHJvamVjdHNcXG5nLWRpYWxvZ3NcXHNyY1xcYXBwXFxtYW5hZ2UtY29udGVudC1saXN0XFxtYW5hZ2UtY29udGVudC1saXN0LmNvbXBvbmVudC5zY3NzIiwicHJvamVjdHMvbmctZGlhbG9ncy9zcmMvYXBwL21hbmFnZS1jb250ZW50LWxpc3QvbWFuYWdlLWNvbnRlbnQtbGlzdC5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGlCQUFBO0FDQ0Y7O0FERUE7RUFDRSxjQUFBO0VBQ0Esc0JBQUE7RUFDQSxrQkFBQTtFQUNBLGdCQUFBO0FDQ0Y7O0FERUE7RUFDRSxZQUFBO0VBQ0EsWUFBQTtFQUNBLDZCQUFBO0VBQ0EsY0FBQTtFQUNBLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDhCQUFBO0VBQ0EsaUJBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7QUNDRjs7QURDRTtFQUNFLFlBQUE7QUNDSjs7QURFRTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLGdCQUFBO0FDQUo7O0FER0U7RUFDRSxpQkFBQTtFQUNBLFlBQUE7QUNESjs7QURJRTtFQUNFLGdCQUFBO0VBQ0EsdUJBQUE7RUFDQSxtQkFBQTtBQ0ZKOztBRE1BO0VBQ0Usc0JBQUE7RUFDQSxrQkFBQTtFQUNBLHFIQUFBO0FDSEY7O0FEUUE7RUFDRSxVQUFBO0FDTEY7O0FEUUE7RUFDRSxzREFBQTtBQ0xGOztBRFFBO0VBQ0Usc0RBQUE7QUNMRiIsImZpbGUiOiJwcm9qZWN0cy9uZy1kaWFsb2dzL3NyYy9hcHAvbWFuYWdlLWNvbnRlbnQtbGlzdC9tYW5hZ2UtY29udGVudC1saXN0LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnNvcnQtdGl0bGUge1xyXG4gIHBhZGRpbmctdG9wOiAxNnB4O1xyXG59XHJcblxyXG4uZG5kLWxpc3Qge1xyXG4gIG1hcmdpbjogMTZweCAwO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbn1cclxuXHJcbi5kbmQtaXRlbSB7XHJcbiAgY3Vyc29yOiBtb3ZlO1xyXG4gIGhlaWdodDogNDBweDtcclxuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYztcclxuICBwYWRkaW5nOiAwIDhweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gIGJhY2tncm91bmQ6IHdoaXRlO1xyXG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG5cclxuICAmOmxhc3QtY2hpbGQge1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gIH1cclxuXHJcbiAgJl9fdGl0bGUge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIH1cclxuXHJcbiAgJl9fdGl0bGUtaWNvbiB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDhweDtcclxuICAgIG9wYWNpdHk6IDQwJTtcclxuICB9XHJcblxyXG4gICZfX3RpdGxlLXRleHQge1xyXG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICB9XHJcbn1cclxuXHJcbi5jZGstZHJhZy1wcmV2aWV3IHtcclxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICBib3gtc2hhZG93OiAwIDVweCA1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMiksXHJcbiAgICAwIDhweCAxMHB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMTQpLFxyXG4gICAgMCAzcHggMTRweCAycHggcmdiYSgwLCAwLCAwLCAwLjEyKTtcclxufVxyXG5cclxuLmNkay1kcmFnLXBsYWNlaG9sZGVyIHtcclxuICBvcGFjaXR5OiAwO1xyXG59XHJcblxyXG4uY2RrLWRyYWctYW5pbWF0aW5nIHtcclxuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjUwbXMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSk7XHJcbn1cclxuXHJcbi5kbmQtbGlzdC5jZGstZHJvcC1saXN0LWRyYWdnaW5nIC5kbmQtaXRlbTpub3QoLmNkay1kcmFnLXBsYWNlaG9sZGVyKSB7XHJcbiAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIDI1MG1zIGN1YmljLWJlemllcigwLCAwLCAwLjIsIDEpO1xyXG59XHJcbiIsIi5zb3J0LXRpdGxlIHtcbiAgcGFkZGluZy10b3A6IDE2cHg7XG59XG5cbi5kbmQtbGlzdCB7XG4gIG1hcmdpbjogMTZweCAwO1xuICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xuICBib3JkZXItcmFkaXVzOiA0cHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG5cbi5kbmQtaXRlbSB7XG4gIGN1cnNvcjogbW92ZTtcbiAgaGVpZ2h0OiA0MHB4O1xuICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYztcbiAgcGFkZGluZzogMCA4cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcbiAgYmFja2dyb3VuZDogd2hpdGU7XG4gIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gIGZvbnQtc2l6ZTogMTRweDtcbn1cbi5kbmQtaXRlbTpsYXN0LWNoaWxkIHtcbiAgYm9yZGVyOiBub25lO1xufVxuLmRuZC1pdGVtX190aXRsZSB7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIG92ZXJmbG93OiBoaWRkZW47XG59XG4uZG5kLWl0ZW1fX3RpdGxlLWljb24ge1xuICBtYXJnaW4tcmlnaHQ6IDhweDtcbiAgb3BhY2l0eTogNDAlO1xufVxuLmRuZC1pdGVtX190aXRsZS10ZXh0IHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG59XG5cbi5jZGstZHJhZy1wcmV2aWV3IHtcbiAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgYm9yZGVyLXJhZGl1czogNHB4O1xuICBib3gtc2hhZG93OiAwIDVweCA1cHggLTNweCByZ2JhKDAsIDAsIDAsIDAuMiksIDAgOHB4IDEwcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4xNCksIDAgM3B4IDE0cHggMnB4IHJnYmEoMCwgMCwgMCwgMC4xMik7XG59XG5cbi5jZGstZHJhZy1wbGFjZWhvbGRlciB7XG4gIG9wYWNpdHk6IDA7XG59XG5cbi5jZGstZHJhZy1hbmltYXRpbmcge1xuICB0cmFuc2l0aW9uOiB0cmFuc2Zvcm0gMjUwbXMgY3ViaWMtYmV6aWVyKDAsIDAsIDAuMiwgMSk7XG59XG5cbi5kbmQtbGlzdC5jZGstZHJvcC1saXN0LWRyYWdnaW5nIC5kbmQtaXRlbTpub3QoLmNkay1kcmFnLXBsYWNlaG9sZGVyKSB7XG4gIHRyYW5zaXRpb246IHRyYW5zZm9ybSAyNTBtcyBjdWJpYy1iZXppZXIoMCwgMCwgMC4yLCAxKTtcbn0iXX0= */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router, NavigationEnd } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { CdkDragDrop, moveItemInArray } from '@angular/cdk/drag-drop';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nimport { ContentGroupService } from './services/content-group.service';\r\nimport { EditForm } from '../app-administration/shared/models/edit-form.model';\r\nimport { ContentGroup } from './models/content-group.model';\r\nimport { GroupHeader } from './models/group-header.model';\r\n\r\n@Component({\r\n  selector: 'app-manage-content-list',\r\n  templateUrl: './manage-content-list.component.html',\r\n  styleUrls: ['./manage-content-list.component.scss']\r\n})\r\nexport class ManageContentListComponent implements OnInit, OnDestroy {\r\n  items: GroupHeader[];\r\n  header: GroupHeader;\r\n\r\n  private contentGroup: ContentGroup;\r\n  private subscription = new Subscription();\r\n  private hasChild: boolean;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ManageContentListComponent>,\r\n    private contentGroupService: ContentGroupService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.hasChild = !!this.route.snapshot.firstChild;\r\n    this.contentGroup = {\r\n      id: null,\r\n      guid: this.route.snapshot.paramMap.get('guid'),\r\n      part: this.route.snapshot.paramMap.get('part'),\r\n      index: parseInt(this.route.snapshot.paramMap.get('index'), 10),\r\n    };\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.fetchList();\r\n    this.fetchHeader();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n\r\n  saveList() {\r\n    this.snackBar.open('Saving...');\r\n    this.contentGroupService.saveList(this.contentGroup, this.items).subscribe(res => {\r\n      this.snackBar.open('Saved');\r\n      this.closeDialog();\r\n    });\r\n  }\r\n\r\n  // spm TODO: edit header seems to be broken\r\n  editHeader() {\r\n    const form: EditForm = {\r\n      items: [\r\n        {\r\n          Group: {\r\n            Guid: this.contentGroup.guid,\r\n            Index: 0,\r\n            Part: 'listcontent',\r\n            Add: this.header.Id === 0,\r\n          },\r\n        },\r\n        {\r\n          Group: {\r\n            Guid: this.contentGroup.guid,\r\n            Index: 0,\r\n            Part: 'listpresentation',\r\n            Add: this.header.Id === 0,\r\n          },\r\n        },\r\n      ],\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route });\r\n  }\r\n\r\n  editItem(id: number) {\r\n    const form: EditForm = {\r\n      items: [\r\n        { EntityId: id.toString() },\r\n      ],\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route });\r\n  }\r\n\r\n  drop(event: CdkDragDrop<any[]>) {\r\n    moveItemInArray(this.items, event.previousIndex, event.currentIndex);\r\n  }\r\n\r\n  stopDnD(event: MouseEvent) {\r\n    event.stopPropagation();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  private fetchList() {\r\n    this.contentGroupService.getList(this.contentGroup).subscribe(res => {\r\n      this.items = res;\r\n    });\r\n  }\r\n\r\n  private fetchHeader() {\r\n    this.contentGroupService.getHeader(this.contentGroup).subscribe(res => {\r\n      // spm TODO: Header title seems to always be an empty string\r\n      this.header = res;\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event: NavigationEnd) => {\r\n        const hadChild = this.hasChild;\r\n        this.hasChild = !!this.route.snapshot.firstChild;\r\n        if (!this.hasChild && hadChild) {\r\n          this.fetchList();\r\n          this.fetchHeader();\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { DragDropModule } from '@angular/cdk/drag-drop';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\n\r\nimport { ManageContentListRoutingModule } from './manage-content-list-routing.module';\r\nimport { ManageContentListComponent } from './manage-content-list.component';\r\nimport { SharedComponentsModule } from '../shared/shared-components.module';\r\nimport { Context } from '../shared/services/context';\r\nimport { ContentGroupService } from './services/content-group.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ManageContentListComponent,\r\n  ],\r\n  entryComponents: [\r\n    ManageContentListComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ManageContentListRoutingModule,\r\n    SharedComponentsModule,\r\n    MatDialogModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatTooltipModule,\r\n    DragDropModule,\r\n    MatSnackBarModule,\r\n  ],\r\n  providers: [\r\n    Context,\r\n    ContentGroupService,\r\n  ]\r\n})\r\nexport class ManageContentListModule { }\r\n"],"sourceRoot":"webpack:///"}