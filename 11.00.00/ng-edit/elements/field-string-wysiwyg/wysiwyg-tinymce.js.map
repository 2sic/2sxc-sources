{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./projects/shared/webpack-console-log.ts","webpack:///./projects/field-string-wysiwyg/src/shared/helpers.ts","webpack:///./projects/field-string-wysiwyg/src/config/defaults/tinyInstance.ts","webpack:///./projects/shared/features-guids.constants.ts","webpack:///./projects/field-string-wysiwyg/src/main/main.ts","webpack:///./projects/field-string-wysiwyg/src/main/main.html","webpack:///./projects/field-string-wysiwyg/src/main/main.css","webpack:///./projects/field-string-wysiwyg/src/config/buttons.ts","webpack:///./projects/field-string-wysiwyg/src/main/load-icons-helper.ts","webpack:///./projects/edit/assets/icons/2sxc/content-block.svg","webpack:///./projects/edit/assets/icons/2sxc/file-dnn.svg","webpack:///./projects/edit/assets/icons/2sxc/image-dnn.svg","webpack:///./projects/edit/assets/icons/2sxc/H1.svg","webpack:///./projects/edit/assets/icons/2sxc/H2.svg","webpack:///./projects/edit/assets/icons/2sxc/H3.svg","webpack:///./projects/edit/assets/icons/2sxc/H4.svg","webpack:///./projects/edit/assets/icons/2sxc/H5.svg","webpack:///./projects/edit/assets/icons/2sxc/H6.svg","webpack:///./projects/edit/assets/icons/2sxc/U1.svg","webpack:///./projects/edit/assets/icons/2sxc/U2.svg","webpack:///./projects/edit/assets/icons/2sxc/U3.svg","webpack:///./projects/edit/assets/icons/2sxc/U4.svg","webpack:///./projects/edit/assets/icons/2sxc/U5.svg","webpack:///./projects/edit/assets/icons/2sxc/U6.svg","webpack:///./projects/edit/assets/icons/font-awesome/anchor.svg","webpack:///./projects/edit/assets/icons/font-awesome/file.svg","webpack:///./projects/edit/assets/icons/font-awesome/file-pdf.svg","webpack:///./projects/edit/assets/icons/font-awesome/sitemap.svg","webpack:///./projects/edit/assets/icons/google-material/baseline-school-24px.svg","webpack:///./projects/edit/assets/icons/tinymce/paragraph.svg","webpack:///./projects/field-string-wysiwyg/src/shared/guid.ts","webpack:///./projects/field-string-wysiwyg/src/connector/dnn-page-picker.ts","webpack:///./projects/field-string-wysiwyg/src/connector/adam.ts","webpack:///./projects/field-string-wysiwyg/src/main/oxide-skin-overrides.scss","webpack:///./projects/field-string-wysiwyg/src/main/fix-menu-positions-helper.ts","webpack:///./projects/field-string-wysiwyg/src/config/tinymce-configurator.ts","webpack:///./projects/field-string-wysiwyg/src/config/translations.ts","webpack:///./projects/field-string-wysiwyg/src/config/defaults/index.ts","webpack:///./projects/field-string-wysiwyg/src/config/defaults/options.ts","webpack:///./projects/field-string-wysiwyg/src/config/defaults/paste.ts","webpack:///./projects/field-string-wysiwyg/src/config/defaults/plugins.ts","webpack:///./projects/field-string-wysiwyg/src/main/tinymce-content.css","webpack:///./projects/field-string-wysiwyg/src/config/toolbars.ts","webpack:///./projects/field-string-wysiwyg/src/preview/preview.ts","webpack:///./projects/field-string-wysiwyg/src/preview/preview.html","webpack:///./projects/field-string-wysiwyg/src/preview/preview.css","webpack:///./node_modules/tslib/tslib.es6.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isFunction.js","webpack:///./node_modules/rxjs/_esm5/internal/config.js","webpack:///./node_modules/rxjs/_esm5/internal/util/hostReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/Observer.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArray.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isObject.js","webpack:///./node_modules/rxjs/_esm5/internal/util/UnsubscriptionError.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscription.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/rxSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/Subscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/canReportError.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/noop.js","webpack:///./node_modules/rxjs/_esm5/internal/util/pipe.js","webpack:///./node_modules/rxjs/_esm5/internal/Observable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/toSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/util/ObjectUnsubscribedError.js","webpack:///./node_modules/rxjs/_esm5/internal/SubjectSubscription.js","webpack:///./node_modules/rxjs/_esm5/internal/Subject.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/refCount.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/ConnectableObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/groupBy.js","webpack:///./node_modules/rxjs/_esm5/internal/BehaviorSubject.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/Action.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueAction.js","webpack:///./node_modules/rxjs/_esm5/internal/Scheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsyncScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/queue.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/QueueScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/empty.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToArray.js","webpack:///./node_modules/rxjs/_esm5/internal/Notification.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromArray.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/of.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/throwError.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/observeOn.js","webpack:///./node_modules/rxjs/_esm5/internal/ReplaySubject.js","webpack:///./node_modules/rxjs/_esm5/internal/AsyncSubject.js","webpack:///./node_modules/rxjs/_esm5/internal/util/Immediate.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsapAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/asap.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AsapScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/async.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameAction.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/animationFrame.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/AnimationFrameScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduler/VirtualTimeScheduler.js","webpack:///./node_modules/rxjs/_esm5/internal/util/identity.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/ArgumentOutOfRangeError.js","webpack:///./node_modules/rxjs/_esm5/internal/util/EmptyError.js","webpack:///./node_modules/rxjs/_esm5/internal/util/TimeoutError.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/map.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/bindCallback.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/bindNodeCallback.js","webpack:///./node_modules/rxjs/_esm5/internal/OuterSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/InnerSubscriber.js","webpack:///./node_modules/rxjs/_esm5/internal/symbol/iterator.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isArrayLike.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeTo.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToPromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/util/subscribeToResult.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/combineLatest.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduled.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isInteropObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleObservable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/schedulePromise.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/scheduled/scheduleIterable.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/from.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/mergeMap.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/mergeAll.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/concatAll.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/concat.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/defer.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/forkJoin.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromEvent.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/fromEventPattern.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/generate.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/iif.js","webpack:///./node_modules/rxjs/_esm5/internal/util/isNumeric.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/interval.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/merge.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/never.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/onErrorResumeNext.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/pairs.js","webpack:///./node_modules/rxjs/_esm5/internal/util/not.js","webpack:///./node_modules/rxjs/_esm5/internal/operators/filter.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/partition.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/race.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/range.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/timer.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/using.js","webpack:///./node_modules/rxjs/_esm5/internal/observable/zip.js","webpack:///./node_modules/rxjs/_esm5/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","message","template","styles","min","max","Math","floor","random","TinyInstanceOptions","imgSizes","FeaturesGuidsConstants","PasteWithFormatting","PasteImageFromClipboard","tinyMceBaseUrl","subscriptions","webpackConsoleLog","instanceId","randomIntFromInterval","containerClass","toolbarContainerClass","connectedCallback","this","innerHTML","buildTemplate","default","skinOverrides","querySelector","classList","add","connector","_experimental","inlineMode","field","disabled","loadScript","tinyMceScriptLoaded","configurator","TinyMceConfigurator","tinymce","reconfigure","pasteImageFromClipboardEnabled","isFeatureEnabled","tinyOptions","buildOptions","tinyMceSetup","firstInit","baseURL","addTranslations","init","editor","on","_event","editorInit","TinyMceButtons","registerAll","exp","expand","disablePagePicker","attachDnnBridgeService","disableAdam","attachAdam","observer","fixMenuPositions","push","data","value$","subscribe","newValue","editorContent","setContent","setTimeout","focus","expandedField$","expandedFieldId","dialogShouldBeOpen","index","dialogIsOpen","clearData","dzConfig","dropzoneConfig$","acceptedFiles","next","setFocused","remove","saveValue","editorReady","forceConnectorSave$","getContent","update","length","forEach","subscription","unsubscribe","disconnect","disconnectedCallback","HTMLElement","FieldStringWysiwygDialog","customElements","define","fieldStringWysiwyg","instSettings","instance","imgformats","imgSize","selector","collapsed","width","formatter","register","registerTinyMceFormats","loadCustomIcons","linkFiles","linksGroups","images","dropDownItalicAndMore","listButtons","switchModes","openDialog","headingButtons","ui","registry","getAll","headingsGroup","contentBlock","imageContextMenu","contextMenus","addSplitButton","icon","tooltip","presets","columns","onAction","_","toggleAdam","onItemAction","api","fetch","callback","type","text","linkButton","buttons","link","linkgroupItems","execCommand","openDnnDialog","linkgroupProItems","linkgroup","linkgroupPro","imageButton","image","alignleftButton","alignleft","aligncenterButton","aligncenter","alignrightButton","alignright","italicButton","italic","strikethroughButton","strikethrough","superscriptButton","superscript","subscriptButton","subscript","bullistButton","bullist","outdentButton","outdent","indentButton","indent","addButton","isGerman","settings","language","tag","onSetup","initOnPostRender","blockquoteButton","blockquote","h4","ch1","ch2","ch3","cp","ch4","ch5","ch6","guid","Guid","uuid","toLowerCase","insertContent","onPostRender","imgMenuArray","config","apply","resizeimg100","items","imgSizeOption","addContextToolbar","predicate","makeTagDetector","buttonApi","watchChange","formatChanged","state","setActive","error","toolbar","modes","menubar","editorManager","tagWeNeedInTheTagPath","currentElement","dom","is","getBody","contains","customTinyMceIcons","anchor","file","fileDnn","filePdf","imageDnn","imageH1","imageH2","imageH3","imageH4","imageH5","imageH6","imageU1","imageU2","imageU3","imageU4","imageU5","imageU6","school","sitemap","paragraph","keys","addIcon","len","radix","chars","CHARS","join","uuidFast","Array","rnd","uuidCompact","replace","toString","split","result","Paths","FileFilter","processResultOfDnnBridge","getUrlOfIdDnnDialog","id","FileId","urlCallback","previouslySelected","selection","adamSetValue","fileItem","modeImage","undefined","adam","adamModeImage","fileName","Name","substr","lastIndexOf","content","FullPath","Type","imagesOnly","usePortalRoot","showImagesOnly","setAdamConfig","adamConfig","adamModeConfig","allowAssetsInRoot","autoLoad","enableSelect","folderDepth","fileFilter","metadataContentTypes","subFolder","MutationObserver","mutations","mutation","addedNodes","addedNode","toxMenu","containerOffsets","getBoundingClientRect","containerTop","top","containerLeft","left","containerBottom","bottom","containerRight","right","containerHeight","height","containerWidth","toxMenuOffsets","menuTop","menuLeft","menuBottom","menuRight","menuHeight","menuWidth","style","maxHeight","newBottomStyle","parseInt","newTopStyle","newLeftStyle","newRightStyle","visibility","toolbarContainer","observe","subtree","childList","options","DefaultOptions","plugins","DefaultPlugins","translateService","currentLang","managerInit","optionsInit","fixedToolbarClass","setup","buttonSource","ButtonSource","buttonAdvanced","ButtonAdvanced","dropzoneConfig","contentBlocksEnabled","allInputTypeNames","inputType","fixed_toolbar_container","content_style","contentStyle","modesOptions","TinyMceToolbars","build","TinyMceTranslations","getLanguageOptions","DefaultPaste","formattedText","url","headers","optionsReady","languages","lang2","indexOf","language_url","mceTranslations","all","translations","instant","addI18n","skin","theme","suffix","branding","inline","toolbar_drawer","automatic_uploads","autosave_ask_before_unload","paste_as_text","extended_valid_elements","custom_elements","relative_urls","default_link_target","object_resizing","debounce","uploadUrl","images_reuse_filename","paste_data_images","paste_filter_drop","paste_block_drop","images_upload_url","images_upload_base_path","images_upload_handler","imagesUploadHandler","upload_headers","blobInfo","success","failure","formData","FormData","append","blob","filename","window","activeEditor","method","body","then","response","json","Path","catch","paste_enable_default_filters","paste_create_paragraphs","paste_create_linebreaks","paste_force_cleanup_wordpaste","paste_use_dialog","paste_auto_cleanup_on_paste","paste_convert_middot_lists","paste_convert_headers_to_strong","paste_remove_spans","paste_remove_styles","paste_preprocess","e","args","paste_postprocess","plugin","anchors","node","getElementsByTagName","hasAttribute","setAttribute","console","standard","advanced","contextmenu","source","Subscription","eventListeners","Dialog","runInlineMode","runPreviewMode","previewContainer","addEventListener","element","listener","dialogEl","document","createElement","appendChild","removeEventListener","FieldStringWysiwyg","extendStatics","b","setPrototypeOf","__proto__","__extends","__","constructor","isFunction","x","_enable_super_gross_mode_that_will_cause_bad_things","Promise","Error","stack","hostReportError","err","empty","closed","useDeprecatedSynchronousErrorHandling","complete","isArray","isObject","UnsubscriptionError","UnsubscriptionErrorImpl","errors","map","_parentOrParents","_subscriptions","_unsubscribe","flattenUnsubscriptionErrors","sub","concat","teardown","EMPTY","tmp","subscriptionIndex","splice","reduce","errs","rxSubscriber","_super","Subscriber","destinationOrNext","_this","syncErrorValue","syncErrorThrown","syncErrorThrowable","isStopped","arguments","destination","subscriber","_next","_error","_complete","_unsubscribeAndRecycle","SafeSubscriber","_parentSubscriber","observerOrNext","context","_context","__tryOrSetError","__tryOrUnsub","wrappedComplete","fn","parent","canReportError","_a","closed_1","observable","noop","pipe","fns","_i","pipeFromArray","input","prev","Observable","_isScalar","_subscribe","lift","operator","sink","nextOrObserver","toSubscriber","_trySubscribe","warn","promiseCtor","getPromiseCtor","resolve","reject","operations","toPromise","ObjectUnsubscribedError","ObjectUnsubscribedErrorImpl","SubjectSubscription","subject","observers","subscriberIndex","SubjectSubscriber","Subject","hasError","thrownError","copy","slice","asObservable","AnonymousSubject","RefCountOperator","connectable","_refCount","refCounter","connection","connect","RefCountSubscriber","refCount","sharedConnection","_connection","ConnectableObservable","subjectFactory","_isComplete","getSubject","_subject","ConnectableSubscriber","GroupedObservable","groupSubject","refCountSubscription","InnerRefCountSubscription","count","attemptedToUnsubscribe","BehaviorSubject","_value","getValue","configurable","AsyncAction","scheduler","work","pending","schedule","delay","recycleAsyncId","requestAsyncId","setInterval","flush","clearInterval","execute","_execute","errored","errorValue","actions","Action","QueueAction","Scheduler","SchedulerAction","now","Date","AsyncScheduler","delegate","active","scheduled","action","shift","queue","QueueScheduler","emptyScheduled","isScheduler","NotificationKind","subscribeToArray","array","scheduleArray","fromArray","of","pop","throwError","dispatch","Notification","kind","hasValue","do","accept","toObservable","createNext","undefinedValueNotification","createError","createComplete","completeNotification","ObserveOnSubscriber","arg","notification","scheduleMessage","ObserveOnMessage","ReplaySubject","bufferSize","windowTime","Number","POSITIVE_INFINITY","_events","_infiniteTimeWindow","_bufferSize","_windowTime","nextInfiniteTimeWindow","nextTimeWindow","ReplayEvent","_getNow","_trimBufferThenGetEvents","eventsCount","spliceCount","time","AsyncSubject","hasNext","hasCompleted","nextHandle","RESOLVED","activeHandles","findAndClearHandle","handle","Immediate","cb","AsapAction","asap","AsapScheduler","AnimationFrameAction","requestAnimationFrame","cancelAnimationFrame","animationFrame","AnimationFrameScheduler","VirtualTimeScheduler","maxFrames","frame","frameTimeFactor","VirtualAction","sort","sortActions","a","identity","isObservable","obj","ArgumentOutOfRangeError","ArgumentOutOfRangeErrorImpl","EmptyError","EmptyErrorImpl","TimeoutError","TimeoutErrorImpl","project","thisArg","TypeError","MapOperator","MapSubscriber","bindCallback","callbackFunc","resultSelector","params","innerArgs","dispatchNext","bindNodeCallback","OuterSubscriber","notifyNext","outerValue","innerValue","outerIndex","innerIndex","innerSub","notifyError","notifyComplete","InnerSubscriber","getSymbolIterator","iterator","isArrayLike","isPromise","subscribeTo","obs","promise","iterable","item","done","return","subscribeToResult","outerSubscriber","innerSubscriber","NONE","combineLatest","observables","CombineLatestOperator","CombineLatestSubscriber","values","toRespond","unused","oldVal","_tryResultSelector","isInteropObservable","scheduleObservable","schedulePromise","isIterable","scheduleIterable","from","MergeMapOperator","concurrent","MergeMapSubscriber","buffer","_tryNext","_innerSub","ish","innerSubscription","mergeAll","mergeMap","ii","concatAll","defer","observableFactory","forkJoin","sources","first_1","forkJoinInternal","getPrototypeOf","resultSelector_1","completed","emitted","_loop_1","fromEvent","target","eventName","setupSubscription","sourceObj","handler","isEventTarget","source_1","off","isJQueryStyleEventEmitter","source_2","addListener","removeListener","isNodeStyleEventEmitter","source_3","fromEventPattern","addHandler","removeHandler","retValue","generate","initialStateOrOptions","condition","iterate","resultSelectorOrObservable","initialState","conditionResult","needIterate","iif","trueResult","falseResult","isNumeric","val","parseFloat","interval","period","counter","merge","last","NEVER","never","onErrorResumeNext","first","remainder","subNext","pairs","not","pred","notPred","filter","FilterOperator","FilterSubscriber","partition","race","RaceOperator","RaceSubscriber","hasFirst","range","start","current","timer","dueTime","periodOrScheduler","due","using","resourceFactory","resource","zip","ZipOperator","ZipSubscriber","iterators","StaticIterator","stillUnsubscribed","notifyInactive","checkIterators","shouldComplete","_tryresultSelector","nextResult","StaticArrayIterator","ZipBufferIterator","isComplete"],"mappings":"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","file":"wysiwyg-tinymce.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n","declare const __PRODUCTION__: boolean; // set by the definePlugin with string-replace\r\n\r\nexport function webpackConsoleLog(message?: any, ...optionalParams: any[]) {\r\n  if (__PRODUCTION__) { return; }\r\n\r\n  console.groupCollapsed(message, ...optionalParams);\r\n  // tslint:disable-next-line:no-console\r\n  console.trace();\r\n  console.groupEnd();\r\n}\r\n","export function buildTemplate(template: string, styles: string): string {\r\n  return `${template}<style>\\n${styles}\\n</style>`;\r\n}\r\n\r\nexport function randomIntFromInterval(min: number, max: number) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min);\r\n}\r\n","\r\n/**\r\n * Instance defaults\r\n */\r\nexport const TinyInstanceOptions = {\r\n  imgSizes: [100, 75, 70, 66, 60, 50, 40, 33, 30, 25, 10],\r\n\r\n}\r\n","export const FeaturesGuidsConstants = {\r\n    PasteWithFormatting: '1b13e0e6-a346-4454-a1e6-2fb18c047d20',\r\n    PasteImageFromClipboard: 'f6b8d6da-4744-453b-9543-0de499aa2352',\r\n};\r\n","import { Subscription } from 'rxjs';\r\nimport { EavCustomInputField, Connector } from '../../../edit-types';\r\nimport { buildTemplate, randomIntFromInterval } from '../shared/helpers';\r\nimport * as template from './main.html';\r\nimport * as styles from './main.css';\r\nimport { TinyMceButtons } from '../config/buttons';\r\nimport { attachDnnBridgeService } from '../connector/dnn-page-picker';\r\nimport { attachAdam } from '../connector/adam';\r\nimport * as skinOverrides from './oxide-skin-overrides.scss';\r\nimport { fixMenuPositions } from './fix-menu-positions-helper';\r\nimport { TinyMceConfigurator } from '../config/tinymce-configurator';\r\nimport { WysiwygReconfigure } from '../../../edit-types/src/WysiwygReconfigure';\r\nimport { FeaturesGuidsConstants } from '../../../shared/features-guids.constants';\r\nimport { webpackConsoleLog } from '../../../shared/webpack-console-log';\r\ndeclare const tinymce: any;\r\n\r\nconst extWhitelist = '.doc, .docx, .dot, .xls, .xlsx, .ppt, .pptx, .pdf, .txt, .htm, .html, .md, .rtf, .xml, .xsl, .xsd, .css, .zip, .csv';\r\nconst tinyMceBaseUrl = 'https://cdnjs.cloudflare.com/ajax/libs/tinymce/5.1.6';\r\n\r\nexport class FieldStringWysiwygDialog extends HTMLElement implements EavCustomInputField<string> {\r\n  connector: Connector<string>;\r\n  reconfigure?: WysiwygReconfigure;\r\n  private instanceId: string;\r\n  private containerClass: string;\r\n  private toolbarContainerClass: string;\r\n  private subscriptions: Subscription[] = [];\r\n  private editorContent: string; // saves editor content to prevent slow update when first using editor\r\n  private pasteImageFromClipboardEnabled: boolean;\r\n  private editor: any;\r\n  private firstInit: boolean;\r\n  private dialogIsOpen: boolean;\r\n  private observer: MutationObserver;\r\n\r\n  /** The object that's responsible for configuring tinymce */\r\n  public configurator: TinyMceConfigurator;\r\n\r\n  constructor() {\r\n    super();\r\n    webpackConsoleLog('FieldStringWysiwygDialog constructor called');\r\n    this.instanceId = `${randomIntFromInterval(1, 1000000)}`;\r\n    this.containerClass = `tinymce-container-${this.instanceId}`;\r\n    this.toolbarContainerClass = `tinymce-toolbar-container-${this.instanceId}`;\r\n  }\r\n\r\n  connectedCallback() {\r\n    webpackConsoleLog('FieldStringWysiwygDialog connectedCallback called');\r\n    this.innerHTML = buildTemplate(template.default, styles.default + skinOverrides.default);\r\n    this.querySelector('.tinymce-container').classList.add(this.containerClass);\r\n    this.querySelector('.tinymce-toolbar-container').classList.add(this.toolbarContainerClass);\r\n    // TODO: SPM Why does this still come from outside on _experimental?\r\n    // Shouldn't it come from the settings directly, to which this component has access?\r\n    // or from a tag attribute - that would make way more sense\r\n    this.classList.add(this.connector._experimental.inlineMode ? 'inline-wysiwyg' : 'full-wysiwyg');\r\n    if (this.connector.field.disabled) {\r\n      this.classList.add('disabled');\r\n    }\r\n    this.connector.loadScript('tinymce', `${tinyMceBaseUrl}/tinymce.min.js`, () => { this.tinyMceScriptLoaded(); });\r\n  }\r\n\r\n  private tinyMceScriptLoaded() {\r\n    webpackConsoleLog('FieldStringWysiwygDialog tinyMceScriptLoaded called');\r\n    this.configurator = new TinyMceConfigurator(tinymce, this.connector, this.reconfigure);\r\n    this.pasteImageFromClipboardEnabled = this.connector._experimental.isFeatureEnabled(FeaturesGuidsConstants.PasteImageFromClipboard);\r\n    const tinyOptions = this.configurator.buildOptions(this.containerClass, this.toolbarContainerClass, this.tinyMceSetup.bind(this));\r\n    this.firstInit = true;\r\n    if (tinymce.baseURL !== tinyMceBaseUrl) { tinymce.baseURL = tinyMceBaseUrl; }\r\n    // FYI: SPM - moved this here from Setup as it's actually global\r\n    this.configurator.addTranslations();\r\n    tinymce.init(tinyOptions);\r\n  }\r\n\r\n  /**\r\n   * This will initialized an instance of an editor.\r\n   * Everything else is kind of global.\r\n   */\r\n  private tinyMceSetup(editor: any) {\r\n    this.editor = editor;\r\n    editor.on('init', (_event: any) => {\r\n      webpackConsoleLog('FieldStringWysiwygDialog TinyMCE initialized', editor);\r\n      this.reconfigure?.editorInit?.(editor);\r\n      // FYI: SPM - anything against using the more () => syntax?\r\n      TinyMceButtons.registerAll(this, editor, (exp) => this.expand(exp)); // .bind(this));\r\n      // tslint:disable: curly\r\n      if (!this.reconfigure?.disablePagePicker) attachDnnBridgeService(this, editor);\r\n      if (!this.reconfigure?.disableAdam) attachAdam(this, editor);\r\n      this.observer = fixMenuPositions(this);\r\n      // Shared subscriptions\r\n      this.subscriptions.push(\r\n        this.connector.data.value$.subscribe(newValue => {\r\n          if (this.editorContent === newValue) { return; }\r\n          this.editorContent = newValue;\r\n          editor.setContent(this.editorContent);\r\n        }),\r\n      );\r\n      if (!this.connector._experimental.inlineMode) {\r\n        setTimeout(() => { editor.focus(false); }, 100); // If not inline mode always focus on init\r\n      } else {\r\n        if (!this.firstInit) { setTimeout(() => { editor.focus(false); }, 100); } // If is inline mode skip focus on first init\r\n        // Inline only subscriptions\r\n        this.subscriptions.push(\r\n          this.connector._experimental.expandedField$.subscribe(expandedFieldId => {\r\n            const dialogShouldBeOpen = (this.connector.field.index === expandedFieldId);\r\n            if (dialogShouldBeOpen === this.dialogIsOpen) { return; }\r\n            this.dialogIsOpen = dialogShouldBeOpen;\r\n\r\n            if (!this.firstInit && !this.dialogIsOpen) { setTimeout(() => { editor.focus(false); }, 100); }\r\n          }),\r\n        );\r\n      }\r\n      this.firstInit = false;\r\n    });\r\n\r\n    // called after tinymce editor is removed\r\n    editor.on('remove', (_event: any) => {\r\n      webpackConsoleLog('FieldStringWysiwygDialog TinyMCE removed', _event);\r\n      this.clearData();\r\n    });\r\n\r\n    editor.on('focus', (_event: any) => {\r\n      this.classList.add('focused');\r\n      webpackConsoleLog('FieldStringWysiwygDialog TinyMCE focused', _event);\r\n      if (!this.reconfigure?.disablePagePicker) attachDnnBridgeService(this, editor); // TODO: spm 2019-09-23 just a workaround. Fix asap\r\n      if (!this.reconfigure?.disableAdam) attachAdam(this, editor); // TODO: spm 2019-09-23 just a workaround. Fix asap\r\n      if (this.pasteImageFromClipboardEnabled) {\r\n        // When tiny is in focus, let it handle image uploads by removing image types from accepted files in dropzone.\r\n        // Files will be handled by dropzone\r\n        const dzConfig = { ...this.connector._experimental.dropzoneConfig$.value };\r\n        dzConfig.acceptedFiles = extWhitelist;\r\n        this.connector._experimental.dropzoneConfig$.next(dzConfig);\r\n      }\r\n      if (this.connector._experimental.inlineMode) {\r\n        this.connector._experimental.setFocused(true);\r\n      }\r\n    });\r\n\r\n    editor.on('blur', (_event: any) => {\r\n      this.classList.remove('focused');\r\n      webpackConsoleLog('FieldStringWysiwygDialog TinyMCE blurred', _event);\r\n      if (!this.pasteImageFromClipboardEnabled) {\r\n        // Dropzone will handle image uploads again\r\n        const dzConfig = { ...this.connector._experimental.dropzoneConfig$.value };\r\n        delete dzConfig.acceptedFiles;\r\n        this.connector._experimental.dropzoneConfig$.next(dzConfig);\r\n      }\r\n      if (this.connector._experimental.inlineMode) {\r\n        this.connector._experimental.setFocused(false);\r\n      }\r\n    });\r\n\r\n    editor.on('change', this.saveValue.bind(this));\r\n    editor.on('undo', this.saveValue.bind(this));\r\n    editor.on('redo', this.saveValue.bind(this));\r\n    this.reconfigure?.editorReady?.(editor);\r\n    this.subscriptions.push(this.connector.data.forceConnectorSave$.subscribe(this.saveValue.bind(this)));\r\n  }\r\n\r\n  private expand(expand: boolean) {\r\n    this.connector.expand(expand);\r\n  }\r\n\r\n  private saveValue() {\r\n    this.editorContent = this.editor.getContent();\r\n    this.connector.data.update(this.editorContent);\r\n  }\r\n\r\n  private clearData() {\r\n    if (this.editor) {\r\n      this.editor.remove();\r\n    }\r\n    if (this.subscriptions.length > 0) {\r\n      this.subscriptions.forEach(subscription => { subscription.unsubscribe(); });\r\n      this.subscriptions = [];\r\n    }\r\n    if (this.editorContent != null) {\r\n      this.editorContent = null;\r\n    }\r\n    if (this.observer != null) {\r\n      this.observer.disconnect();\r\n      this.observer = null;\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    webpackConsoleLog('FieldStringWysiwygDialog disconnectedCallback called');\r\n    this.clearData();\r\n  }\r\n}\r\n\r\ncustomElements.define('field-string-wysiwyg-dialog', FieldStringWysiwygDialog);\r\n","export default \"<div class=\\\"tinymce-toolbar-container\\\"></div>\\r\\n<div class=\\\"tinymce-container\\\"></div>\\r\\n\";","export default \".full-wysiwyg {\\r\\n  height: inherit;\\r\\n  min-height: inherit;\\r\\n  max-height: inherit;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.inline-wysiwyg {\\r\\n  height: inherit;\\r\\n  min-height: inherit;\\r\\n  max-height: inherit;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n\\r\\n.tinymce-toolbar-container {\\r\\n  flex-shrink: 0;\\r\\n}\\r\\n\\r\\n.inline-wysiwyg .tinymce-toolbar-container {\\r\\n  background-color: rgba(0, 0, 0, 0.2);\\r\\n  min-height: 39px;\\r\\n}\\r\\n\\r\\n.tinymce-container {\\r\\n  position: relative;\\r\\n  height: 100%;\\r\\n  flex-grow: 1;\\r\\n  outline: none;\\r\\n  overflow-x: hidden;\\r\\n  overflow-y: scroll;\\r\\n  background-color: #fff;\\r\\n  padding: 0 8px 1px 8px;\\r\\n  /* min-height 1px less because of padding pixel bottom */\\r\\n  min-height: 119px;\\r\\n  font-size: medium;\\r\\n  /* IE 10+ */\\r\\n  -ms-overflow-style: none;\\r\\n  /* Firefox */\\r\\n  overflow: -moz-scrollbars-none;\\r\\n  /* Firefox */\\r\\n  scrollbar-width: none;\\r\\n}\\r\\n\\r\\n.tinymce-container::-webkit-scrollbar {\\r\\n  /* Chrome */\\r\\n  display: none;\\r\\n}\\r\\n\\r\\n.full-wysiwyg .tinymce-container {\\r\\n  -moz-box-shadow: inset 0 -10px 10px -10px #888;\\r\\n  -webkit-box-shadow: inset 0 -10px 10px -10px #888;\\r\\n  box-shadow: inset 0 -10px 10px -10px #888;\\r\\n}\\r\\n\\r\\n.full-wysiwyg .tox.tox-tinymce.tox-tinymce-inline {\\r\\n  display: flex !important;\\r\\n}\\r\\n\\r\\n.inline-wysiwyg:not(.disabled) {\\r\\n  border: 1px solid rgba(0, 0, 0, 0.2);\\r\\n  border-bottom: none;\\r\\n  padding: 1px 1px 0;\\r\\n}\\r\\n\\r\\n.inline-wysiwyg:not(.disabled):hover {\\r\\n  border-width: 2px;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.inline-wysiwyg.focused {\\r\\n  border-width: 2px;\\r\\n  padding: 0;\\r\\n}\\r\\n\\r\\n.inline-wysiwyg.disabled .tinymce-container {\\r\\n  background: linear-gradient(to right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%),\\r\\n    linear-gradient(rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%),\\r\\n    linear-gradient(to right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%),\\r\\n    linear-gradient(rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%);\\r\\n  background-position: top, right, bottom, left;\\r\\n  background-repeat: repeat-x, repeat-y;\\r\\n  background-size: 4px 1px, 1px 4px;\\r\\n}\\r\\n\";","import { loadCustomIcons } from '../main/load-icons-helper';\r\nimport { Guid } from '../shared/guid';\r\nimport { FieldStringWysiwygDialog } from '../main/main';\r\nimport { webpackConsoleLog } from '../../../shared/webpack-console-log';\r\n\r\n// const imgSizes = [100, 75, 70, 66, 60, 50, 40, 33, 30, 25, 10];\r\n\r\n/** Register all kinds of buttons on TinyMce */\r\nexport class TinyMceButtons {\r\n\r\n  static registerAll(fieldStringWysiwyg: FieldStringWysiwygDialog, editor: any, expand: (expand: boolean) => void) {\r\n    const instSettings = fieldStringWysiwyg.configurator.instance;\r\n\r\n    registerTinyMceFormats(editor, instSettings.imgSizes);\r\n\r\n    loadCustomIcons(editor);\r\n\r\n    TinyMceButtons.linkFiles(editor, fieldStringWysiwyg);\r\n\r\n    TinyMceButtons.linksGroups(editor, fieldStringWysiwyg);\r\n\r\n    TinyMceButtons.images(editor, fieldStringWysiwyg);\r\n\r\n    TinyMceButtons.dropDownItalicAndMore(editor);\r\n\r\n    TinyMceButtons.listButtons(editor);\r\n\r\n    TinyMceButtons.switchModes(editor);\r\n\r\n    TinyMceButtons.openDialog(editor, expand);\r\n\r\n    TinyMceButtons.headingButtons(editor);\r\n\r\n    webpackConsoleLog('buttons', editor.ui.registry.getAll());\r\n    TinyMceButtons.headingsGroup(editor);\r\n\r\n    TinyMceButtons.contentBlock(editor);\r\n\r\n    TinyMceButtons.imageContextMenu(editor, instSettings.imgSizes);\r\n\r\n    TinyMceButtons.contextMenus(editor);\r\n  }\r\n\r\n\r\n  /** Group with adam-link, dnn-link */\r\n  // TODO: SPM this should be typed, and then it should be .adam.toggle\r\n  static linkFiles(editor: any, fieldStringWysiwyg: any) {\r\n    editor.ui.registry.addSplitButton('linkfiles', {\r\n      icon: 'custom-file-pdf',\r\n      tooltip: 'Link.AdamFile.Tooltip',\r\n      presets: 'listpreview',\r\n      columns: 3,\r\n      onAction: (_: any) => {\r\n        fieldStringWysiwyg.toggleAdam(false);\r\n      },\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        const items = [\r\n          {\r\n            type: 'choiceitem',\r\n            text: 'Link.AdamFile.Tooltip',\r\n            tooltip: 'Link.AdamFile.Tooltip',\r\n            icon: 'custom-file-pdf',\r\n            value: (api: any) => { fieldStringWysiwyg.toggleAdam(false); },\r\n          },\r\n          {\r\n            type: 'choiceitem',\r\n            text: 'Link.DnnFile.Tooltip',\r\n            tooltip: 'Link.DnnFile.Tooltip',\r\n            icon: 'custom-file-dnn',\r\n            value: (api: any) => { fieldStringWysiwyg.toggleAdam(false, true); },\r\n          },\r\n        ];\r\n        callback(items);\r\n      },\r\n    });\r\n  }\r\n\r\n  /** Button groups for links (simple and pro) with web-link, page-link, unlink, anchor */\r\n  // TODO: SPM this should be typed, and then it should be .adam.toggle\r\n  static linksGroups(editor: any, fieldStringWysiwyg: any) {\r\n    const linkButton = editor.ui.registry.getAll().buttons.link;\r\n    const linkgroupItems = [\r\n      {\r\n        ...linkButton,\r\n        type: 'choiceitem',\r\n        text: linkButton.tooltip,\r\n        value: (api: any) => { editor.execCommand('mceLink'); },\r\n      },\r\n      {\r\n        type: 'choiceitem',\r\n        text: 'Link.Page.Tooltip',\r\n        tooltip: 'Link.Page.Tooltip',\r\n        icon: 'custom-sitemap',\r\n        value: (api: any) => { fieldStringWysiwyg.openDnnDialog('pagepicker'); },\r\n      },\r\n    ];\r\n    const linkgroupProItems = [...linkgroupItems];\r\n    linkgroupProItems.push({\r\n      type: 'choiceitem',\r\n      text: 'Link.Anchor.Tooltip',\r\n      tooltip: 'Link.Anchor.Tooltip',\r\n      icon: 'custom-anchor',\r\n      value: (api: any) => { editor.execCommand('mceAnchor'); },\r\n    });\r\n    const linkgroup = {\r\n      ...linkButton,\r\n      presets: 'listpreview',\r\n      columns: 3,\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        callback(linkgroupItems);\r\n      },\r\n    };\r\n    const linkgroupPro = { ...linkgroup };\r\n    linkgroupPro.fetch = (callback: any) => {\r\n      callback(linkgroupProItems);\r\n    };\r\n    editor.ui.registry.addSplitButton('linkgroup', linkgroup);\r\n    editor.ui.registry.addSplitButton('linkgrouppro', linkgroupPro);\r\n  }\r\n\r\n\r\n  /** Images menu */\r\n  static images(editor: any, fieldStringWysiwyg: any) {\r\n    const imageButton = editor.ui.registry.getAll().buttons.image;\r\n    const alignleftButton = editor.ui.registry.getAll().buttons.alignleft;\r\n    const aligncenterButton = editor.ui.registry.getAll().buttons.aligncenter;\r\n    const alignrightButton = editor.ui.registry.getAll().buttons.alignright;\r\n    // Group with images (adam) - only in PRO mode\r\n    editor.ui.registry.addSplitButton('images', {\r\n      ...imageButton,\r\n      tooltip: 'Image.AdamImage.Tooltip',\r\n      presets: 'listpreview',\r\n      columns: 3,\r\n      onAction: (_: any) => {\r\n        fieldStringWysiwyg.toggleAdam(true);\r\n      },\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        const items = [\r\n          {\r\n            ...imageButton,\r\n            type: 'choiceitem',\r\n            text: 'Image.AdamImage.Tooltip',\r\n            tooltip: 'Image.AdamImage.Tooltip',\r\n            value: (api: any) => { fieldStringWysiwyg.toggleAdam(true); },\r\n          },\r\n          {\r\n            type: 'choiceitem',\r\n            text: 'Image.DnnImage.Tooltip',\r\n            tooltip: 'Image.DnnImage.Tooltip',\r\n            icon: 'custom-image-dnn',\r\n            value: (api: any) => { fieldStringWysiwyg.toggleAdam(true, true); },\r\n          },\r\n          // note: all these use i18n from tinyMce standard\r\n          {\r\n            ...imageButton,\r\n            type: 'choiceitem',\r\n            text: imageButton.tooltip,\r\n            icon: 'link',\r\n            value: (api: any) => { editor.execCommand('mceImage'); },\r\n          },\r\n          {\r\n            ...alignleftButton,\r\n            type: 'choiceitem',\r\n            text: alignleftButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('JustifyLeft'); },\r\n          },\r\n          {\r\n            ...aligncenterButton,\r\n            type: 'choiceitem',\r\n            text: aligncenterButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('JustifyCenter'); },\r\n          },\r\n          {\r\n            ...alignrightButton,\r\n            type: 'choiceitem',\r\n            text: alignrightButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('JustifyRight'); },\r\n          },\r\n        ];\r\n        callback(items);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Drop-down with italic, strikethrough, ... */\r\n  static dropDownItalicAndMore(editor: any) {\r\n    const italicButton = editor.ui.registry.getAll().buttons.italic;\r\n    const strikethroughButton = editor.ui.registry.getAll().buttons.strikethrough;\r\n    const superscriptButton = editor.ui.registry.getAll().buttons.superscript;\r\n    const subscriptButton = editor.ui.registry.getAll().buttons.subscript;\r\n    editor.ui.registry.addSplitButton('formatgroup', {\r\n      ...italicButton,\r\n      presets: 'listpreview',\r\n      columns: 3,\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        const items = [\r\n          {\r\n            ...strikethroughButton,\r\n            type: 'choiceitem',\r\n            text: strikethroughButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('Strikethrough'); },\r\n          },\r\n          {\r\n            ...superscriptButton,\r\n            type: 'choiceitem',\r\n            text: superscriptButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('Superscript'); },\r\n          },\r\n          {\r\n            ...subscriptButton,\r\n            type: 'choiceitem',\r\n            text: subscriptButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('Subscript'); },\r\n          },\r\n        ];\r\n        callback(items);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Lists / Indent / Outdent etc. */\r\n  static listButtons(editor: any) {\r\n    const bullistButton = editor.ui.registry.getAll().buttons.bullist;\r\n    const outdentButton = editor.ui.registry.getAll().buttons.outdent;\r\n    const indentButton = editor.ui.registry.getAll().buttons.indent;\r\n    // Drop-down with numbered list, bullet list, ...\r\n    editor.ui.registry.addSplitButton('listgroup', {\r\n      ...bullistButton,\r\n      presets: 'listpreview',\r\n      columns: 3,\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        const items = [\r\n          {\r\n            ...outdentButton,\r\n            type: 'choiceitem',\r\n            text: outdentButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('Outdent'); },\r\n          },\r\n          {\r\n            ...indentButton,\r\n            type: 'choiceitem',\r\n            text: indentButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('Indent'); },\r\n          },\r\n        ];\r\n        callback(items);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Switch normal / advanced mode */\r\n  static switchModes(editor: any) {\r\n    editor.ui.registry.addButton('modestandard', {\r\n      icon: 'close',\r\n      tooltip: 'SwitchMode.Standard',\r\n      onAction: (_: any) => {\r\n        switchModes('standard', editor);\r\n      },\r\n    });\r\n    editor.ui.registry.addButton('modeinline', {\r\n      icon: 'close',\r\n      tooltip: 'SwitchMode.Standard',\r\n      onAction: (_: any) => {\r\n        switchModes('inline', editor);\r\n      },\r\n    });\r\n    editor.ui.registry.addButton('modeadvanced', {\r\n      icon: 'custom-school',\r\n      tooltip: 'SwitchMode.Pro',\r\n      onAction: (_: any) => {\r\n        switchModes('advanced', editor);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Switch to Dialog Mode */\r\n  static openDialog(editor: any, expand: (expand: boolean) => void) {\r\n    editor.ui.registry.addButton('expandfulleditor', {\r\n      icon: 'browse',\r\n      tooltip: 'SwitchMode.Expand',\r\n      onAction: (_: any) => {\r\n        expand(true);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Headings Buttons */\r\n  static headingButtons(editor: any) {\r\n    // h1, h2, etc. buttons, inspired by http://blog.ionelmc.ro/2013/10/17/tinymce-formatting-toolbar-buttons/\r\n    // note that the complex array is needed because auto-translate only happens if the string is identical\r\n    /*\r\n      custom p, H1-H6 only for the toolbar listpreview menu\r\n      [name, buttonCommand, tooltip, text, icon]\r\n    */\r\n    const isGerman = editor.settings.language === 'de';\r\n    [['pre', 'Preformatted', 'Preformatted'],\r\n    ['cp', 'p', 'Paragraph', 'Paragraph', 'custom-paragraph'],\r\n    // ['code', 'Code', 'Code'],\r\n    ['ch1', 'h1', 'Heading 1', 'H1', isGerman ? 'custom-image-u1' : 'custom-image-h1'],\r\n    ['ch2', 'h2', 'Heading 2', 'H2', isGerman ? 'custom-image-u2' : 'custom-image-h2'],\r\n    ['ch3', 'h3', 'Heading 3', 'H3', isGerman ? 'custom-image-u3' : 'custom-image-h3'],\r\n    ['ch4', 'h4', 'Heading 4', 'H4', isGerman ? 'custom-image-u4' : 'custom-image-h4'],\r\n    ['ch5', 'h5', 'Heading 5', 'H5', isGerman ? 'custom-image-u5' : 'custom-image-h5'],\r\n    ['ch6', 'h6', 'Heading 6', 'H6', isGerman ? 'custom-image-u6' : 'custom-image-h6']].forEach((tag) => {\r\n      editor.ui.registry.addButton(tag[0], {\r\n        icon: tag[4],\r\n        tooltip: tag[2],\r\n        text: tag[2],\r\n        onAction: (_: any) => {\r\n          editor.execCommand('mceToggleFormat', false, tag[1]);\r\n        },\r\n        onSetup: initOnPostRender(tag[0], editor),\r\n      });\r\n    });\r\n  }\r\n\r\n\r\n  /** Group of buttons with an h3 to start and showing h4-6 + p */\r\n  static headingsGroup(editor: any) {\r\n    const blockquoteButton = editor.ui.registry.getAll().buttons.blockquote;\r\n    editor.ui.registry.addSplitButton('hgroup', {\r\n      ...editor.ui.registry.getAll().buttons.h4,\r\n      presets: 'listpreview',\r\n      columns: 4,\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        const items = [\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.ch1,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'h1'); },\r\n          },\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.ch2,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'h2'); },\r\n          },\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.ch3,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'h3'); },\r\n          },\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.cp,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'p'); },\r\n          },\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.ch4,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'h4'); },\r\n          },\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.ch5,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'h5'); },\r\n          },\r\n          {\r\n            ...editor.ui.registry.getAll().buttons.ch6,\r\n            type: 'choiceitem',\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'h6'); },\r\n          },\r\n          {\r\n            ...blockquoteButton,\r\n            type: 'choiceitem',\r\n            text: blockquoteButton.tooltip,\r\n            value: (api: any) => { editor.execCommand('mceToggleFormat', false, 'blockquote'); },\r\n          },\r\n        ];\r\n        callback(items);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Inside content (contentblocks) */\r\n  static contentBlock(editor: any) {\r\n    editor.ui.registry.addButton('addcontentblock', {\r\n      icon: 'custom-content-block',\r\n      tooltip: 'ContentBlock.Add',\r\n      onAction: (_: any) => {\r\n        const guid = Guid.uuid().toLowerCase(); // requires the uuid-generator to be included\r\n        editor.insertContent(`<hr sxc=\"sxc-content-block\" guid=\"${guid}\" />`);\r\n      },\r\n    });\r\n  }\r\n\r\n\r\n  /** Image alignment / size buttons in context menu */\r\n  static imageContextMenu(editor: any, imgSizes: number[]) {\r\n    editor.ui.registry.addButton('alignimgleft', {\r\n      icon: 'align-left',\r\n      tooltip: 'Align left',\r\n      onAction: (_: any) => {\r\n        editor.execCommand('JustifyLeft');\r\n      },\r\n      onPostRender: initOnPostRender('alignleft', editor),\r\n    });\r\n    editor.ui.registry.addButton('alignimgcenter', {\r\n      icon: 'align-center',\r\n      tooltip: 'Align center',\r\n      onAction: (_: any) => {\r\n        editor.execCommand('JustifyCenter');\r\n      },\r\n      onPostRender: initOnPostRender('aligncenter', editor),\r\n    });\r\n    editor.ui.registry.addButton('alignimgright', {\r\n      icon: 'align-right',\r\n      tooltip: 'Align right',\r\n      onAction: (_: any) => {\r\n        editor.execCommand('JustifyRight');\r\n      },\r\n      onPostRender: initOnPostRender('alignright', editor),\r\n    });\r\n    const imgMenuArray: any = [];\r\n    for (const imgSize of imgSizes) {\r\n      const config = {\r\n        icon: 'resize',\r\n        tooltip: `${imgSize}%`,\r\n        text: `${imgSize}%`,\r\n        value: (api: any) => { editor.formatter.apply(`imgwidth${imgSize}`); },\r\n        onAction: (_: any) => {\r\n          editor.formatter.apply(`imgwidth${imgSize}`);\r\n        },\r\n        onPostRender: initOnPostRender(`imgwidth${imgSize}`, editor),\r\n      };\r\n      editor.ui.registry.addButton(`imgresize${imgSize}`, config);\r\n      imgMenuArray.push(config);\r\n    }\r\n    editor.ui.registry.addButton('resizeimg100', {\r\n      icon: 'resize',\r\n      tooltip: '100%',\r\n      onAction: (_: any) => {\r\n        editor.formatter.apply('imgwidth100');\r\n      },\r\n      onPostRender: initOnPostRender('imgwidth100', editor),\r\n    });\r\n    // group of buttons to resize an image 100%, 50%, etc.\r\n    editor.ui.registry.addSplitButton('imgresponsive', {\r\n      ...editor.ui.registry.getAll().buttons.resizeimg100,\r\n      onItemAction: (api: any, value: any) => {\r\n        value(api);\r\n      },\r\n      fetch: (callback: any) => {\r\n        const items: any = [];\r\n        imgMenuArray.forEach((imgSizeOption: any) => {\r\n          items.push({\r\n            ...imgSizeOption,\r\n            type: 'choiceitem',\r\n          });\r\n        });\r\n        callback(items);\r\n      },\r\n    });\r\n  }\r\n\r\n  /** Add Context toolbars */\r\n  static contextMenus(editor: any) {\r\n    editor.ui.registry.addContextToolbar('a', {\r\n      predicate: makeTagDetector('a', editor),\r\n      items: 'link unlink',\r\n    });\r\n    editor.ui.registry.addContextToolbar('img', {\r\n      predicate: makeTagDetector('img', editor),\r\n      items: 'image | alignimgleft alignimgcenter alignimgright imgresponsive | removeformat | remove',\r\n    });\r\n    editor.ui.registry.addContextToolbar('li,ol,ul', {\r\n      predicate: makeTagDetector('li,ol,ul', editor),\r\n      items: 'numlist bullist | outdent indent',\r\n    });\r\n  }\r\n}\r\n\r\n\r\n\r\n\r\n/**\r\n * Helper function to add activate/deactivate to buttons like alignleft, alignright etc.\r\n * copied/modified from\r\n * https://github.com/tinymce/tinymce/blob/ddfa0366fc700334f67b2c57f8c6e290abf0b222/js/tinymce/classes/ui/FormatControls.js#L232-L249\r\n */\r\nfunction initOnPostRender(name: any, editor: any) {\r\n  return (buttonApi: any) => {\r\n    function watchChange() {\r\n      editor.formatter.formatChanged(name, (state: any) => {\r\n        try {\r\n          buttonApi.setActive(state);\r\n        } catch (error) {\r\n          // cannot be set active when not visible on toolbar and is behind More... button\r\n          // console.error('button set active error:', error);\r\n        }\r\n      });\r\n    }\r\n\r\n    if (editor.formatter) {\r\n      watchChange();\r\n    } else {\r\n      editor.on('init', watchChange);\r\n    }\r\n  };\r\n}\r\n\r\n\r\n/** Register all formats - like img-sizes */\r\nfunction registerTinyMceFormats(editor: any, imgSizes: number[]) {\r\n  const imgformats: any = {};\r\n  for (const imgSize of imgSizes) {\r\n    imgformats[`imgwidth${imgSize}`] = [{ selector: 'img', collapsed: false, styles: { width: `${imgSize}%` } }];\r\n  }\r\n  editor.formatter.register(imgformats);\r\n}\r\n\r\n// Mode switching and the buttons for it\r\nfunction switchModes(mode: any, editor: any) {\r\n  editor.settings.toolbar = editor.settings.modes[mode].toolbar;\r\n  editor.settings.menubar = editor.settings.modes[mode].menubar;\r\n\r\n  // refresh editor toolbar\r\n  editor.editorManager.remove(editor);\r\n  editor.editorManager.init(editor.settings);\r\n}\r\n\r\n// My context toolbars for links, images and lists (ul/li)\r\nfunction makeTagDetector(tagWeNeedInTheTagPath: any, editor: any) {\r\n  return function tagDetector(currentElement: any) {\r\n    // check if we are in a tag within a specific tag\r\n    const selectorMatched = editor.dom.is(currentElement, tagWeNeedInTheTagPath) && editor.getBody().contains(currentElement);\r\n    return selectorMatched;\r\n  };\r\n}\r\n","// TODO: SPM - shouldn't we move these files into this folder?\r\n// I assume they are not actually shared with any other code\r\n\r\n\r\n// 2sxc icons\r\nimport * as contentBlock from '../../../edit/assets/icons/2sxc/content-block.svg';\r\nimport * as fileDnn from '../../../edit/assets/icons/2sxc/file-dnn.svg';\r\nimport * as imageDnn from '../../../edit/assets/icons/2sxc/image-dnn.svg';\r\nimport * as imageH1 from '../../../edit/assets/icons/2sxc/H1.svg';\r\nimport * as imageH2 from '../../../edit/assets/icons/2sxc/H2.svg';\r\nimport * as imageH3 from '../../../edit/assets/icons/2sxc/H3.svg';\r\nimport * as imageH4 from '../../../edit/assets/icons/2sxc/H4.svg';\r\nimport * as imageH5 from '../../../edit/assets/icons/2sxc/H5.svg';\r\nimport * as imageH6 from '../../../edit/assets/icons/2sxc/H6.svg';\r\nimport * as imageU1 from '../../../edit/assets/icons/2sxc/U1.svg';\r\nimport * as imageU2 from '../../../edit/assets/icons/2sxc/U2.svg';\r\nimport * as imageU3 from '../../../edit/assets/icons/2sxc/U3.svg';\r\nimport * as imageU4 from '../../../edit/assets/icons/2sxc/U4.svg';\r\nimport * as imageU5 from '../../../edit/assets/icons/2sxc/U5.svg';\r\nimport * as imageU6 from '../../../edit/assets/icons/2sxc/U6.svg';\r\n// font-awesome icons\r\nimport * as anchor from '../../../edit/assets/icons/font-awesome/anchor.svg';\r\nimport * as file from '../../../edit/assets/icons/font-awesome/file.svg';\r\nimport * as filePdf from '../../../edit/assets/icons/font-awesome/file-pdf.svg';\r\nimport * as sitemap from '../../../edit/assets/icons/font-awesome/sitemap.svg';\r\n// google material icons\r\nimport * as school from '../../../edit/assets/icons/google-material/baseline-school-24px.svg';\r\n// tinymce icons\r\nimport * as paragraph from '../../../edit/assets/icons/tinymce/paragraph.svg';\r\n\r\nconst customTinyMceIcons: { [key: string]: string } = {\r\n  'custom-anchor': anchor.default,\r\n  'custom-content-block': contentBlock.default,\r\n  'custom-file': file.default,\r\n  'custom-file-dnn': fileDnn.default,\r\n  'custom-file-pdf': filePdf.default,\r\n  'custom-image-dnn': imageDnn.default,\r\n  'custom-image-h1': imageH1.default,\r\n  'custom-image-h2': imageH2.default,\r\n  'custom-image-h3': imageH3.default,\r\n  'custom-image-h4': imageH4.default,\r\n  'custom-image-h5': imageH5.default,\r\n  'custom-image-h6': imageH6.default,\r\n  'custom-image-u1': imageU1.default,\r\n  'custom-image-u2': imageU2.default,\r\n  'custom-image-u3': imageU3.default,\r\n  'custom-image-u4': imageU4.default,\r\n  'custom-image-u5': imageU5.default,\r\n  'custom-image-u6': imageU6.default,\r\n  'custom-school': school.default,\r\n  'custom-sitemap': sitemap.default,\r\n  'custom-paragraph': paragraph.default,\r\n};\r\n\r\nexport function loadCustomIcons(editor: any) {\r\n  Object.keys(customTinyMceIcons).forEach(key => {\r\n    if (!customTinyMceIcons.hasOwnProperty(key)) { return; }\r\n\r\n    editor.ui.registry.addIcon(\r\n      key,\r\n      customTinyMceIcons[key]\r\n    );\r\n  });\r\n}\r\n","export default \"<?xml version=\\\"1.0\\\" encoding=\\\"utf-8\\\"?>\\r\\n<!-- Generator: Adobe Illustrator 20.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->\\r\\n<svg version=\\\"1.1\\\" id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" xmlns:xlink=\\\"http://www.w3.org/1999/xlink\\\" x=\\\"0px\\\" y=\\\"0px\\\"\\r\\n\\t viewBox=\\\"0 0 64 64\\\" style=\\\"enable-background:new 0 0 64 64;\\\" xml:space=\\\"preserve\\\">\\r\\n<path d=\\\"M20.9,0C9.3,0,0,9.6,0,21.1V64h43.9C55.4,64,64,53.7,64,42.1V0H20.9z M50,37.5C50,44,45.9,50,39.4,50H14V25.7\\r\\n\\tC14,19.2,19.1,14,25.6,14H50V37.5z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 20.45 24\\\"><g id=\\\"Layer_2\\\" data-name=\\\"Layer 2\\\"><g id=\\\"Layer_1-2\\\" data-name=\\\"Layer 1\\\"><path d=\\\"M9.08,13.82l.78-.71A6.24,6.24,0,0,1,9,11.5a6.18,6.18,0,0,0,.3-3,1.09,1.09,0,0,0-2.1-.3,8.2,8.2,0,0,0,.4,3.6c-.6,1.3-1.4,3.1-2,4.2-1,.5-2.5,1.4-2.8,2.5a.82.82,0,0,0,.29.8l.85-.77A6.52,6.52,0,0,1,5.6,16.7c-.22.34-.42.62-.6.86l2.05-1.88,0,0a16,16,0,0,0,1.3-3A11.51,11.51,0,0,0,9.08,13.82ZM8.4,8.2c.4,0,.4,1.8.1,2.2C8.2,9.7,8.2,8.2,8.4,8.2Z\\\"/><path d=\\\"M1.5,21.8V2.3a.68.68,0,0,1,.7-.7h8.2V6.5a1.11,1.11,0,0,0,1.1,1.1h4.9v5.18l1.5,1.35V6.2a2.27,2.27,0,0,0-.6-1.6L13.4.7A2.36,2.36,0,0,0,11.8,0H2.2A2.24,2.24,0,0,0,0,2.3V21.8A2.22,2.22,0,0,0,2.2,24H6.9V22.5H2.2A.68.68,0,0,1,1.5,21.8ZM11.9,1.5c.1,0,.2.1.3.2l4,4c.1.1.2.2.2.3H11.9Z\\\"/><polygon points=\\\"13.35 12 6.25 18.4 8.45 18.4 8.45 24 11.95 24 11.95 19.8 14.75 19.8 14.75 24 18.25 24 18.25 18.4 20.45 18.4 13.35 12\\\"/></g></g></svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 24.17 24.17\\\"><defs><style>.cls-1{fill:none;}</style></defs><g id=\\\"Layer_2\\\" data-name=\\\"Layer 2\\\"><g id=\\\"Layer_1-2\\\" data-name=\\\"Layer 1\\\"><rect class=\\\"cls-1\\\" width=\\\"24.17\\\" height=\\\"24.17\\\"/><polygon points=\\\"16.54 9.16 9.44 15.56 11.63 15.56 11.63 21.16 15.13 21.16 15.13 16.96 17.93 16.96 17.93 21.16 21.43 21.16 21.43 15.56 23.64 15.56 16.54 9.16\\\"/><path d=\\\"M8,19.08H5.08V18l4.86-4.87-.53-.53a.75.75,0,0,0-1.06,0L5.08,15.82V5.08h14v4.2l2,1.85v-7a1,1,0,0,0-1-1h-16a1,1,0,0,0-1,1v16a1,1,0,0,0,1,1h6V17h0Z\\\"/><circle cx=\\\"10.08\\\" cy=\\\"9.08\\\" r=\\\"2\\\"/></g></g></svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M3 18.9375V6.05273H4.70508V11.3438H11.4023V6.05273H13.1074V18.9375H11.4023V12.8643H4.70508V18.9375H3Z\\\"/>\\r\\n<path d=\\\"M21.2725 18.9375H19.6904V8.85645C19.3096 9.21973 18.8086 9.58301 18.1875 9.94629C17.5723 10.3096 17.0186 10.582 16.5264 10.7637V9.23438C17.4111 8.81836 18.1846 8.31445 18.8467 7.72266C19.5088 7.13086 19.9775 6.55664 20.2529 6H21.2725V18.9375Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M3 17.5V6.04688H4.51562V10.75H10.4688V6.04688H11.9844V17.5H10.4688V12.1016H4.51562V17.5H3Z\\\"/>\\r\\n<path d=\\\"M21.3359 16.1484V17.5H13.7656C13.7552 17.1615 13.8099 16.8359 13.9297 16.5234C14.1224 16.0078 14.4297 15.5 14.8516 15C15.2786 14.5 15.8932 13.9219 16.6953 13.2656C17.9401 12.2448 18.7812 11.4375 19.2188 10.8438C19.6562 10.2448 19.875 9.67969 19.875 9.14844C19.875 8.59115 19.6745 8.1224 19.2734 7.74219C18.8776 7.35677 18.3594 7.16406 17.7188 7.16406C17.0417 7.16406 16.5 7.36719 16.0938 7.77344C15.6875 8.17969 15.4818 8.74219 15.4766 9.46094L14.0312 9.3125C14.1302 8.23438 14.5026 7.41406 15.1484 6.85156C15.7943 6.28385 16.6615 6 17.75 6C18.849 6 19.7188 6.30469 20.3594 6.91406C21 7.52344 21.3203 8.27865 21.3203 9.17969C21.3203 9.63802 21.2266 10.0885 21.0391 10.5312C20.8516 10.974 20.5391 11.4401 20.1016 11.9297C19.6693 12.4193 18.9479 13.0911 17.9375 13.9453C17.0938 14.6536 16.5521 15.1354 16.3125 15.3906C16.0729 15.6406 15.875 15.8932 15.7188 16.1484H21.3359Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M3 17.7812V7.04395H4.4209V11.4531H10.002V7.04395H11.4229V17.7812H10.002V12.7202H4.4209V17.7812H3Z\\\"/>\\r\\n<path d=\\\"M13.2686 14.9468L14.5869 14.771C14.7383 15.5181 14.9946 16.0576 15.356 16.3896C15.7222 16.7168 16.1665 16.8804 16.689 16.8804C17.3091 16.8804 17.8315 16.6655 18.2563 16.2358C18.686 15.8062 18.9009 15.2739 18.9009 14.6392C18.9009 14.0337 18.7031 13.5356 18.3076 13.145C17.9121 12.7495 17.4092 12.5518 16.7988 12.5518C16.5498 12.5518 16.2397 12.6006 15.8687 12.6982L16.0151 11.541C16.103 11.5508 16.1738 11.5557 16.2275 11.5557C16.7891 11.5557 17.2944 11.4092 17.7437 11.1162C18.1929 10.8232 18.4175 10.3716 18.4175 9.76123C18.4175 9.27783 18.2539 8.87744 17.9268 8.56006C17.5996 8.24268 17.1772 8.08398 16.6597 8.08398C16.147 8.08398 15.7197 8.24512 15.3779 8.56738C15.0361 8.88965 14.8164 9.37305 14.7188 10.0176L13.4004 9.7832C13.5615 8.89941 13.9277 8.21582 14.499 7.73242C15.0703 7.24414 15.7808 7 16.6304 7C17.2163 7 17.7559 7.12695 18.249 7.38086C18.7422 7.62988 19.1182 7.97168 19.377 8.40625C19.6406 8.84082 19.7725 9.30225 19.7725 9.79053C19.7725 10.2544 19.6479 10.6768 19.3989 11.0576C19.1499 11.4385 18.7812 11.7412 18.293 11.9658C18.9277 12.1123 19.4209 12.4175 19.7725 12.8813C20.124 13.3403 20.2998 13.9165 20.2998 14.6099C20.2998 15.5474 19.958 16.3433 19.2744 16.9976C18.5908 17.647 17.7266 17.9717 16.6816 17.9717C15.7393 17.9717 14.9556 17.6909 14.3306 17.1294C13.7104 16.5679 13.3564 15.8403 13.2686 14.9468Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M4 17.0215V7H5.32617V11.1152H10.5352V7H11.8613V17.0215H10.5352V12.2979H5.32617V17.0215H4Z\\\"/>\\r\\n<path d=\\\"M17.5215 17.0215V14.6221H13.1738V13.4941L17.7471 7H18.752V13.4941H20.1055V14.6221H18.752V17.0215H17.5215ZM17.5215 13.4941V8.97559L14.3838 13.4941H17.5215Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M4 16.3057V7H5.23145V10.8213H10.0684V7H11.2998V16.3057H10.0684V11.9194H5.23145V16.3057H4Z\\\"/>\\r\\n<path d=\\\"M12.8931 13.8682L14.0928 13.7666C14.1816 14.3506 14.3869 14.7907 14.7085 15.0869C15.0343 15.3789 15.4258 15.5249 15.8828 15.5249C16.4329 15.5249 16.8984 15.3175 17.2793 14.9028C17.6602 14.4881 17.8506 13.938 17.8506 13.2524C17.8506 12.6007 17.6665 12.0866 17.2983 11.71C16.9344 11.3333 16.4562 11.145 15.8638 11.145C15.4956 11.145 15.1634 11.2297 14.8672 11.3989C14.571 11.564 14.3382 11.7798 14.1689 12.0464L13.0962 11.9067L13.9976 7.12695H18.625V8.21875H14.9116L14.4102 10.7197C14.9688 10.3304 15.5549 10.1357 16.1685 10.1357C16.981 10.1357 17.6665 10.4172 18.2251 10.98C18.7837 11.5428 19.063 12.2664 19.063 13.1509C19.063 13.993 18.8175 14.7209 18.3267 15.3345C17.73 16.0877 16.9154 16.4644 15.8828 16.4644C15.0365 16.4644 14.3446 16.2274 13.8071 15.7534C13.2739 15.2795 12.9692 14.651 12.8931 13.8682Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M5 16.625V8.03516H6.13672V11.5625H10.6016V8.03516H11.7383V16.625H10.6016V12.5762H6.13672V16.625H5Z\\\"/>\\r\\n<path d=\\\"M18.6816 10.1387L17.6328 10.2207C17.5391 9.80664 17.4062 9.50586 17.2344 9.31836C16.9492 9.01758 16.5977 8.86719 16.1797 8.86719C15.8438 8.86719 15.5488 8.96094 15.2949 9.14844C14.9629 9.39062 14.7012 9.74414 14.5098 10.209C14.3184 10.6738 14.2188 11.3359 14.2109 12.1953C14.4648 11.8086 14.7754 11.5215 15.1426 11.334C15.5098 11.1465 15.8945 11.0527 16.2969 11.0527C17 11.0527 17.5977 11.3125 18.0898 11.832C18.5859 12.3477 18.834 13.0156 18.834 13.8359C18.834 14.375 18.7168 14.877 18.4824 15.3418C18.252 15.8027 17.9336 16.1562 17.5273 16.4023C17.1211 16.6484 16.6602 16.7715 16.1445 16.7715C15.2656 16.7715 14.5488 16.4492 13.9941 15.8047C13.4395 15.1562 13.1621 14.0898 13.1621 12.6055C13.1621 10.9453 13.4688 9.73828 14.082 8.98438C14.6172 8.32812 15.3379 8 16.2441 8C16.9199 8 17.4727 8.18945 17.9023 8.56836C18.3359 8.94727 18.5957 9.4707 18.6816 10.1387ZM14.375 13.8418C14.375 14.2051 14.4512 14.5527 14.6035 14.8848C14.7598 15.2168 14.9766 15.4707 15.2539 15.6465C15.5312 15.8184 15.8223 15.9043 16.127 15.9043C16.5723 15.9043 16.9551 15.7246 17.2754 15.3652C17.5957 15.0059 17.7559 14.5176 17.7559 13.9004C17.7559 13.3066 17.5977 12.8398 17.2812 12.5C16.9648 12.1562 16.5664 11.9844 16.0859 11.9844C15.6094 11.9844 15.2051 12.1562 14.873 12.5C14.541 12.8398 14.375 13.2871 14.375 13.8418Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M10.4287 5.59277H12.1338V13.0371C12.1338 14.332 11.9873 15.3604 11.6943 16.1221C11.4014 16.8838 10.8711 17.5049 10.1035 17.9854C9.3418 18.46 8.33984 18.6973 7.09766 18.6973C5.89062 18.6973 4.90332 18.4893 4.13574 18.0732C3.36816 17.6572 2.82031 17.0566 2.49219 16.2715C2.16406 15.4805 2 14.4023 2 13.0371V5.59277H3.70508V13.0283C3.70508 14.1475 3.80762 14.9736 4.0127 15.5068C4.22363 16.0342 4.58105 16.4414 5.08496 16.7285C5.59473 17.0156 6.21582 17.1592 6.94824 17.1592C8.20215 17.1592 9.0957 16.875 9.62891 16.3066C10.1621 15.7383 10.4287 14.6455 10.4287 13.0283V5.59277ZM4.5752 4.80176V3H6.22754V4.80176H4.5752ZM7.85352 4.80176V3H9.50586V4.80176H7.85352Z\\\"/>\\r\\n<path d=\\\"M20.2988 18.4775H18.7168V8.39648C18.3359 8.75977 17.835 9.12305 17.2139 9.48633C16.5986 9.84961 16.0449 10.1221 15.5527 10.3037V8.77441C16.4375 8.3584 17.2109 7.85449 17.873 7.2627C18.5352 6.6709 19.0039 6.09668 19.2793 5.54004H20.2988V18.4775Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M10.4922 6.30469H12.0078V12.9219C12.0078 14.0729 11.8776 14.987 11.6172 15.6641C11.3568 16.3411 10.8854 16.8932 10.2031 17.3203C9.52604 17.7422 8.63542 17.9531 7.53125 17.9531C6.45833 17.9531 5.58073 17.7682 4.89844 17.3984C4.21615 17.0286 3.72917 16.4948 3.4375 15.7969C3.14583 15.0938 3 14.1354 3 12.9219V6.30469H4.51562V12.9141C4.51562 13.9089 4.60677 14.6432 4.78906 15.1172C4.97656 15.5859 5.29427 15.9479 5.74219 16.2031C6.19531 16.4583 6.7474 16.5859 7.39844 16.5859C8.51302 16.5859 9.30729 16.3333 9.78125 15.8281C10.2552 15.3229 10.4922 14.3516 10.4922 12.9141V6.30469ZM5.28906 5.60156V4H6.75781V5.60156H5.28906ZM8.20312 5.60156V4H9.67188V5.60156H8.20312Z\\\"/>\\r\\n<path d=\\\"M21.3594 16.4062V17.7578H13.7891C13.7786 17.4193 13.8333 17.0938 13.9531 16.7812C14.1458 16.2656 14.4531 15.7578 14.875 15.2578C15.3021 14.7578 15.9167 14.1797 16.7188 13.5234C17.9635 12.5026 18.8047 11.6953 19.2422 11.1016C19.6797 10.5026 19.8984 9.9375 19.8984 9.40625C19.8984 8.84896 19.6979 8.38021 19.2969 8C18.901 7.61458 18.3828 7.42188 17.7422 7.42188C17.0651 7.42188 16.5234 7.625 16.1172 8.03125C15.7109 8.4375 15.5052 9 15.5 9.71875L14.0547 9.57031C14.1536 8.49219 14.526 7.67188 15.1719 7.10938C15.8177 6.54167 16.6849 6.25781 17.7734 6.25781C18.8724 6.25781 19.7422 6.5625 20.3828 7.17188C21.0234 7.78125 21.3438 8.53646 21.3438 9.4375C21.3438 9.89583 21.25 10.3464 21.0625 10.7891C20.875 11.2318 20.5625 11.6979 20.125 12.1875C19.6927 12.6771 18.9714 13.349 17.9609 14.2031C17.1172 14.9115 16.5755 15.3932 16.3359 15.6484C16.0964 15.8984 15.8984 16.151 15.7422 16.4062H21.3594Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M11.0239 6.16064H12.4448V12.3643C12.4448 13.4434 12.3228 14.3003 12.0786 14.9351C11.8345 15.5698 11.3926 16.0874 10.7529 16.4878C10.1182 16.8833 9.2832 17.0811 8.24805 17.0811C7.24219 17.0811 6.41943 16.9077 5.77979 16.561C5.14014 16.2144 4.68359 15.7139 4.41016 15.0596C4.13672 14.4004 4 13.502 4 12.3643V6.16064H5.4209V12.3569C5.4209 13.2896 5.50635 13.978 5.67725 14.4224C5.85303 14.8618 6.15088 15.2012 6.5708 15.4404C6.99561 15.6797 7.51318 15.7993 8.12354 15.7993C9.16846 15.7993 9.91309 15.5625 10.3574 15.0889C10.8018 14.6152 11.0239 13.7046 11.0239 12.3569V6.16064ZM6.146 5.50146V4H7.52295V5.50146H6.146ZM8.87793 5.50146V4H10.2549V5.50146H8.87793Z\\\"/>\\r\\n<path d=\\\"M14.2905 14.0635L15.6089 13.8877C15.7603 14.6348 16.0166 15.1743 16.3779 15.5063C16.7441 15.8335 17.1885 15.9971 17.7109 15.9971C18.3311 15.9971 18.8535 15.7822 19.2783 15.3525C19.708 14.9229 19.9229 14.3906 19.9229 13.7559C19.9229 13.1504 19.7251 12.6523 19.3296 12.2617C18.9341 11.8662 18.4312 11.6685 17.8208 11.6685C17.5718 11.6685 17.2617 11.7173 16.8906 11.8149L17.0371 10.6577C17.125 10.6675 17.1958 10.6724 17.2495 10.6724C17.811 10.6724 18.3164 10.5259 18.7656 10.2329C19.2148 9.93994 19.4395 9.48828 19.4395 8.87793C19.4395 8.39453 19.2759 7.99414 18.9487 7.67676C18.6216 7.35938 18.1992 7.20068 17.6816 7.20068C17.1689 7.20068 16.7417 7.36182 16.3999 7.68408C16.0581 8.00635 15.8384 8.48975 15.7407 9.13428L14.4224 8.8999C14.5835 8.01611 14.9497 7.33252 15.521 6.84912C16.0923 6.36084 16.8027 6.1167 17.6523 6.1167C18.2383 6.1167 18.7778 6.24365 19.271 6.49756C19.7642 6.74658 20.1401 7.08838 20.3989 7.52295C20.6626 7.95752 20.7944 8.41895 20.7944 8.90723C20.7944 9.37109 20.6699 9.79346 20.4209 10.1743C20.1719 10.5552 19.8032 10.8579 19.3149 11.0825C19.9497 11.229 20.4429 11.5342 20.7944 11.998C21.146 12.457 21.3218 13.0332 21.3218 13.7266C21.3218 14.6641 20.98 15.46 20.2964 16.1143C19.6128 16.7637 18.7485 17.0884 17.7036 17.0884C16.7612 17.0884 15.9775 16.8076 15.3525 16.2461C14.7324 15.6846 14.3784 14.957 14.2905 14.0635Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M10.5557 7.0166H11.8818V12.8066C11.8818 13.8138 11.7679 14.6136 11.54 15.2061C11.3122 15.7985 10.8997 16.2816 10.3027 16.6553C9.71029 17.0244 8.93099 17.209 7.96484 17.209C7.02604 17.209 6.25814 17.0472 5.66113 16.7236C5.06413 16.4001 4.63802 15.9329 4.38281 15.3223C4.1276 14.707 4 13.8685 4 12.8066V7.0166H5.32617V12.7998C5.32617 13.6702 5.40592 14.3128 5.56543 14.7275C5.72949 15.1377 6.00749 15.4544 6.39941 15.6777C6.7959 15.901 7.27897 16.0127 7.84863 16.0127C8.82389 16.0127 9.51888 15.7917 9.93359 15.3496C10.3483 14.9076 10.5557 14.0576 10.5557 12.7998V7.0166ZM6.00293 6.40137V5H7.28809V6.40137H6.00293ZM8.55273 6.40137V5H9.83789V6.40137H8.55273Z\\\"/>\\r\\n<path d=\\\"M17.542 17.0381V14.6387H13.1943V13.5107L17.7676 7.0166H18.7725V13.5107H20.126V14.6387H18.7725V17.0381H17.542ZM17.542 13.5107V8.99219L14.4043 13.5107H17.542Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M11.0874 7.87256H12.3188V13.249C12.3188 14.1842 12.2131 14.9269 12.0015 15.4771C11.7899 16.0272 11.4069 16.4757 10.8525 16.8228C10.3024 17.1655 9.57878 17.3369 8.68164 17.3369C7.8099 17.3369 7.09684 17.1867 6.54248 16.8862C5.98812 16.5858 5.59245 16.152 5.35547 15.585C5.11849 15.0137 5 14.235 5 13.249V7.87256H6.23145V13.2427C6.23145 14.0509 6.3055 14.6476 6.45361 15.0327C6.60596 15.4136 6.8641 15.7077 7.22803 15.915C7.59619 16.1224 8.04476 16.2261 8.57373 16.2261C9.47933 16.2261 10.1247 16.0208 10.5098 15.6104C10.8949 15.1999 11.0874 14.4106 11.0874 13.2427V7.87256ZM6.85986 7.30127V6H8.05322V7.30127H6.85986ZM9.22754 7.30127V6H10.4209V7.30127H9.22754Z\\\"/>\\r\\n<path d=\\\"M13.9121 14.7407L15.1118 14.6392C15.2007 15.2231 15.4059 15.6632 15.7275 15.9595C16.0534 16.2515 16.4448 16.3975 16.9019 16.3975C17.452 16.3975 17.9175 16.1901 18.2983 15.7754C18.6792 15.3607 18.8696 14.8105 18.8696 14.125C18.8696 13.4733 18.6855 12.9591 18.3174 12.5825C17.9535 12.2059 17.4753 12.0176 16.8828 12.0176C16.5146 12.0176 16.1825 12.1022 15.8862 12.2715C15.59 12.4365 15.3573 12.6523 15.188 12.9189L14.1152 12.7793L15.0166 7.99951H19.644V9.09131H15.9307L15.4292 11.5923C15.9878 11.203 16.5739 11.0083 17.1875 11.0083C18 11.0083 18.6855 11.2897 19.2441 11.8525C19.8027 12.4154 20.082 13.139 20.082 14.0234C20.082 14.8656 19.8366 15.5934 19.3457 16.207C18.749 16.9603 17.9344 17.3369 16.9019 17.3369C16.0555 17.3369 15.3636 17.0999 14.8262 16.626C14.293 16.152 13.9883 15.5236 13.9121 14.7407Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\">\\r\\n<path d=\\\"M10.6191 7.72852H11.7559V12.6914C11.7559 13.5547 11.6582 14.2402 11.4629 14.748C11.2676 15.2559 10.9141 15.6699 10.4023 15.9902C9.89453 16.3066 9.22656 16.4648 8.39844 16.4648C7.59375 16.4648 6.93555 16.3262 6.42383 16.0488C5.91211 15.7715 5.54688 15.3711 5.32812 14.8477C5.10938 14.3203 5 13.6016 5 12.6914V7.72852H6.13672V12.6855C6.13672 13.4316 6.20508 13.9824 6.3418 14.3379C6.48242 14.6895 6.7207 14.9609 7.05664 15.1523C7.39648 15.3438 7.81055 15.4395 8.29883 15.4395C9.13477 15.4395 9.73047 15.25 10.0859 14.8711C10.4414 14.4922 10.6191 13.7637 10.6191 12.6855V7.72852ZM6.7168 7.20117V6H7.81836V7.20117H6.7168ZM8.90234 7.20117V6H10.0039V7.20117H8.90234Z\\\"/>\\r\\n<path d=\\\"M18.6992 9.83203L17.6504 9.91406C17.5566 9.5 17.4238 9.19922 17.252 9.01172C16.9668 8.71094 16.6152 8.56055 16.1973 8.56055C15.8613 8.56055 15.5664 8.6543 15.3125 8.8418C14.9805 9.08398 14.7188 9.4375 14.5273 9.90234C14.3359 10.3672 14.2363 11.0293 14.2285 11.8887C14.4824 11.502 14.793 11.2148 15.1602 11.0273C15.5273 10.8398 15.9121 10.7461 16.3145 10.7461C17.0176 10.7461 17.6152 11.0059 18.1074 11.5254C18.6035 12.041 18.8516 12.709 18.8516 13.5293C18.8516 14.0684 18.7344 14.5703 18.5 15.0352C18.2695 15.4961 17.9512 15.8496 17.5449 16.0957C17.1387 16.3418 16.6777 16.4648 16.1621 16.4648C15.2832 16.4648 14.5664 16.1426 14.0117 15.498C13.457 14.8496 13.1797 13.7832 13.1797 12.2988C13.1797 10.6387 13.4863 9.43164 14.0996 8.67773C14.6348 8.02148 15.3555 7.69336 16.2617 7.69336C16.9375 7.69336 17.4902 7.88281 17.9199 8.26172C18.3535 8.64062 18.6133 9.16406 18.6992 9.83203ZM14.3926 13.5352C14.3926 13.8984 14.4688 14.2461 14.6211 14.5781C14.7773 14.9102 14.9941 15.1641 15.2715 15.3398C15.5488 15.5117 15.8398 15.5977 16.1445 15.5977C16.5898 15.5977 16.9727 15.418 17.293 15.0586C17.6133 14.6992 17.7734 14.2109 17.7734 13.5938C17.7734 13 17.6152 12.5332 17.2988 12.1934C16.9824 11.8496 16.584 11.6777 16.1035 11.6777C15.627 11.6777 15.2227 11.8496 14.8906 12.1934C14.5586 12.5332 14.3926 12.9805 14.3926 13.5352Z\\\"/>\\r\\n</svg>\\r\\n\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 576 512\\\"><path d=\\\"M504.485 264.485c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.029c-7.56 7.56-2.206 20.485 8.485 20.485h49.129C461.111 420.749 390.501 473.6 304 479.452V192h52c6.627 0 12-5.373 12-12v-8c0-6.627-5.373-12-12-12h-52v-34.016c28.513-7.339 49.336-33.833 47.933-64.947-1.48-32.811-28.101-59.458-60.911-60.967C254.302-1.619 224 27.652 224 64c0 29.821 20.396 54.879 48 61.984V160h-52c-6.627 0-12 5.373-12 12v8c0 6.627 5.373 12 12 12h52v287.452C185.498 473.6 114.888 420.749 97.901 352h49.129c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.03c-4.686-4.686-12.284-4.686-16.971 0l-67.029 67.03C-3.074 339.074 2.28 352 12.971 352h52.136C83.963 448.392 182.863 512 288 512c110.901 0 204.938-68.213 222.893-160h52.136c10.691 0 16.045-12.926 8.485-20.485l-67.029-67.03zM256 64c0-17.645 14.355-32 32-32s32 14.355 32 32-14.355 32-32 32-32-14.355-32-32zM61.255 320L80 301.255 98.745 320h-37.49zm416 0L496 301.255 514.745 320h-37.49z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 384 512\\\"><path d=\\\"M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-22-171.2c-13.5-13.3-55-9.2-73.7-6.7-21.2-12.8-35.2-30.4-45.1-56.6 4.3-18 12-47.2 6.4-64.9-4.4-28.1-39.7-24.7-44.6-6.8-5 18.3-.3 44.4 8.4 77.8-11.9 28.4-29.7 66.9-42.1 88.6-20.8 10.7-54.1 29.3-58.8 52.4-3.5 16.8 22.9 39.4 53.1 6.4 9.1-9.9 19.3-24.8 31.3-45.5 26.7-8.8 56.1-19.8 82-24 21.9 12 47.6 19.9 64.6 19.9 27.7.1 28.9-30.2 18.5-40.6zm-229.2 89c5.9-15.9 28.6-34.4 35.5-40.8-22.1 35.3-35.5 41.5-35.5 40.8zM180 175.5c8.7 0 7.8 37.5 2.1 47.6-5.2-16.3-5-47.6-2.1-47.6zm-28.4 159.3c11.3-19.8 21-43.2 28.8-63.7 9.7 17.7 22.1 31.7 35.1 41.5-24.3 4.7-45.4 15.1-63.9 22.2zm153.4-5.9s-5.8 7-43.5-9.1c41-3 47.7 6.4 43.5 9.1z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 640 512\\\"><path d=\\\"M608 352h-32v-97.59c0-16.77-13.62-30.41-30.41-30.41H336v-64h48c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h48v64H94.41C77.62 224 64 237.64 64 254.41V352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32H96v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32h-32v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-480 32v96H32v-96h96zm240 0v96h-96v-96h96zM256 128V32h128v96H256zm352 352h-96v-96h96v96z\\\"/></svg>\";","export default \"<svg xmlns=\\\"http://www.w3.org/2000/svg\\\" width=\\\"24\\\" height=\\\"24\\\" viewBox=\\\"0 0 24 24\\\"><path d=\\\"M0 0h24v24H0z\\\" fill=\\\"none\\\"/><path d=\\\"M5 13.18v4L12 21l7-3.82v-4L12 17l-7-3.82zM12 3L1 9l11 6 9-4.91V17h2V9L12 3z\\\"/></svg>\";","export default \"<svg width=\\\"24\\\" height=\\\"24\\\"><path d=\\\"M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z\\\" fill-rule=\\\"evenodd\\\"></path></svg>\\r\\n\";","/*!\r\nMath.uuid.js (v1.4)\r\nhttp://www.broofa.com\r\nmailto:robert@broofa.com\r\nCopyright (c) 2010 Robert Kieffer\r\nDual licensed under the MIT and GPL licenses.\r\n*/\r\n\r\n/*\r\n * Generate a random uuid.\r\n *\r\n * USAGE: Math.uuid(length, radix)\r\n *   length - the desired number of characters\r\n *   radix  - the number of allowable values for each character.\r\n *\r\n * EXAMPLES:\r\n *   // No arguments  - returns RFC4122, version 4 ID\r\n *   >>> Math.uuid()\r\n *   \"92329D39-6F5C-4520-ABFC-AAB64544E172\"\r\n *\r\n *   // One argument - returns ID of the specified length\r\n *   >>> Math.uuid(15)     // 15 character ID (default base=62)\r\n *   \"VcydxgltxrVZSTV\"\r\n *\r\n *   // Two arguments - returns ID of the specified length, and radix. (Radix must be <= 62)\r\n *   >>> Math.uuid(8, 2)  // 8 character ID (base=2)\r\n *   \"01001010\"\r\n *   >>> Math.uuid(8, 10) // 8 character ID (base=10)\r\n *   \"47473046\"\r\n *   >>> Math.uuid(8, 16) // 8 character ID (base=16)\r\n *   \"098F4D35\"\r\n */\r\nexport class Guid {\r\n  // Private array of chars to use\r\n  private static CHARS = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.split('');\r\n\r\n  public static uuid(len?: any, radix?: any) {\r\n    // tslint:disable\r\n    var chars = Guid.CHARS, uuid = [], i;\r\n    radix = radix || chars.length;\r\n\r\n    if (len) {\r\n      // Compact form\r\n      for (i = 0; i < len; i++) uuid[i] = chars[0 | Math.random() * radix];\r\n    } else {\r\n      // rfc4122, version 4 form\r\n      var r;\r\n\r\n      // rfc4122 requires these characters\r\n      uuid[8] = uuid[13] = uuid[18] = uuid[23] = '-';\r\n      uuid[14] = '4';\r\n\r\n      // Fill in random data.  At i==19 set the high bits of clock sequence as\r\n      // per rfc4122, sec. 4.1.5\r\n      for (i = 0; i < 36; i++) {\r\n        if (!uuid[i]) {\r\n          r = 0 | Math.random() * 16;\r\n          uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\r\n        }\r\n      }\r\n    }\r\n\r\n    return uuid.join('');\r\n    // tslint:enable\r\n  }\r\n\r\n  // A more performant, but slightly bulkier, RFC4122v4 solution.  We boost performance\r\n  // by minimizing calls to random()\r\n  public static uuidFast() {\r\n    // tslint:disable\r\n    var chars = Guid.CHARS, uuid = new Array(36), rnd = 0, r;\r\n    for (var i = 0; i < 36; i++) {\r\n      if (i == 8 || i == 13 || i == 18 || i == 23) {\r\n        uuid[i] = '-';\r\n      } else if (i == 14) {\r\n        uuid[i] = '4';\r\n      } else {\r\n        if (rnd <= 0x02) rnd = 0x2000000 + (Math.random() * 0x1000000) | 0;\r\n        r = rnd & 0xf;\r\n        rnd = rnd >> 4;\r\n        uuid[i] = chars[(i == 19) ? (r & 0x3) | 0x8 : r];\r\n      }\r\n    }\r\n    return uuid.join('');\r\n    // tslint:enable\r\n  }\r\n\r\n  // A more compact, but less performant, RFC4122v4 solution:\r\n  public static uuidCompact() {\r\n    // tslint:disable\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n      var r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\r\n      return v.toString(16);\r\n    });\r\n    // tslint:enable\r\n  }\r\n}\r\n","export function attachDnnBridgeService(fieldStringWysiwyg: any, editor: any) {\r\n  let result: any = {};\r\n  // open the dialog - note: strong dependency on the buttons, not perfect here\r\n  fieldStringWysiwyg.openDnnDialog = (type: any) => {\r\n    fieldStringWysiwyg.connector._experimental.openDnnDialog(\r\n      '', { Paths: null, FileFilter: null }, fieldStringWysiwyg.processResultOfDnnBridge\r\n    );\r\n  };\r\n\r\n  // the callback when something was selected\r\n  fieldStringWysiwyg.processResultOfDnnBridge = (value: any) => {\r\n    result = value;\r\n    if (!value) { return; }\r\n    fieldStringWysiwyg.connector._experimental.getUrlOfIdDnnDialog('page:' + (value.id || value.FileId), fieldStringWysiwyg.urlCallback);\r\n  };\r\n\r\n  fieldStringWysiwyg.urlCallback = (data: any) => {\r\n    const previouslySelected = editor.selection.getContent();\r\n    editor.insertContent('<a href=\\\"' + data + '\\\">' + (previouslySelected || result.name) + '</a>');\r\n  };\r\n}\r\n","import { AdamSetValue, AdamAfterUpload } from '../../../edit-types';\r\nimport { FieldStringWysiwygDialog } from '../main/main';\r\n\r\n// TODO: SPM this must really become a normal class, which then becomes .adam on the field\r\nexport function attachAdam(fieldStringWysiwyg: any /* FieldStringWysiwygDialog */, editor: any) {\r\n  const adamSetValue: AdamSetValue = (fileItem: any, modeImage: any) => {\r\n    if (modeImage === undefined) {  // if not supplied, use the setting in the adam\r\n      modeImage = fieldStringWysiwyg.adam.adamModeImage;\r\n    }\r\n\r\n    const fileName = fileItem.Name.substr(0, fileItem.Name.lastIndexOf('.'));\r\n\r\n    const content = modeImage\r\n      ? '<img src=\"' + fileItem.FullPath + '\" + alt=\"' + fileName + '\">'\r\n      : '<a href=\"' + fileItem.FullPath + '\">' + fileName + '</a>';\r\n\r\n    editor.insertContent(content);\r\n  };\r\n\r\n  const adamAfterUpload: AdamAfterUpload = (fileItem: any) => {\r\n    adamSetValue(fileItem, fileItem.Type === 'image');\r\n  };\r\n\r\n  fieldStringWysiwyg.adam = fieldStringWysiwyg.connector._experimental.attachAdam(adamSetValue, adamAfterUpload);\r\n\r\n  fieldStringWysiwyg.toggleAdam = (imagesOnly: any, usePortalRoot: boolean) => {\r\n    fieldStringWysiwyg.adam.adamModeImage = imagesOnly;\r\n    fieldStringWysiwyg.adam.toggleAdam({\r\n      showImagesOnly: imagesOnly,\r\n      usePortalRoot,\r\n    });\r\n  };\r\n\r\n  fieldStringWysiwyg.setAdamConfig = (adamConfig: any) => {\r\n    fieldStringWysiwyg.adam.setAdamConfig(adamConfig);\r\n  };\r\n\r\n  fieldStringWysiwyg.setAdamConfig({ // default adam config\r\n    adamModeConfig: { usePortalRoot: false },\r\n    allowAssetsInRoot: true,\r\n    autoLoad: false,\r\n    enableSelect: true,\r\n    folderDepth: 0,\r\n    fileFilter: '',\r\n    metadataContentTypes: '',\r\n    subFolder: '',\r\n    showImagesOnly: false, // adamModeImage?\r\n  });\r\n}\r\n","export default \".tox{color:#222f3e}.tox-tinymce{border:none !important}.tox-tinymce-inline .tox-editor-header{border:none;box-shadow:none}.tox-tiered-menu .tox-menu.tox-collection{width:max-content;white-space:nowrap;visibility:hidden}.tox .accessibility-issue__description{border:1px solid #ccc}.tox .accessibility-issue__description>:last-child:not(:only-child){border-color:#ccc}.tox .accessibility-issue--info .accessibility-issue__description{background-color:rgba(32,122,183,.1);border-color:rgba(32,122,183,.4);color:#222f3e}.tox .accessibility-issue--info .accessibility-issue__description>:last-child{border-color:rgba(32,122,183,.4)}.tox .accessibility-issue--info h2{color:#207ab7}.tox .accessibility-issue--info .tox-icon svg{fill:#207ab7}.tox .accessibility-issue--info a .tox-icon{color:#207ab7}.tox .accessibility-issue--warn .accessibility-issue__description{background-color:rgba(255,165,0,.1);border-color:rgba(255,165,0,.5);color:#222f3e}.tox .accessibility-issue--warn .accessibility-issue__description>:last-child{border-color:rgba(255,165,0,.5)}.tox .accessibility-issue--warn h2{color:#cc8500}.tox .accessibility-issue--warn .tox-icon svg{fill:#cc8500}.tox .accessibility-issue--warn a .tox-icon{color:#cc8500}.tox .accessibility-issue--error .accessibility-issue__description{background-color:rgba(204,0,0,.1);border-color:rgba(204,0,0,.4);color:#222f3e}.tox .accessibility-issue--error .accessibility-issue__description>:last-child{border-color:rgba(204,0,0,.4)}.tox .accessibility-issue--error h2{color:#c00}.tox .accessibility-issue--error .tox-icon svg{fill:#c00}.tox .accessibility-issue--error a .tox-icon{color:#c00}.tox .accessibility-issue--success .accessibility-issue__description{background-color:rgba(120,171,70,.1);border-color:rgba(120,171,70,.4);color:#222f3e}.tox .accessibility-issue--success .accessibility-issue__description>:last-child{border-color:rgba(120,171,70,.4)}.tox .accessibility-issue--success h2{color:#78ab46}.tox .accessibility-issue--success .tox-icon svg{fill:#78ab46}.tox .accessibility-issue--success a .tox-icon{color:#78ab46}.tox .tox-button{background-color:#207ab7;border-color:#207ab7;color:#fff}.tox .tox-button[disabled]{background-color:#207ab7;border-color:#207ab7;color:rgba(255,255,255,.5)}.tox .tox-button:focus:not(:disabled){background-color:#1c6ca1;border-color:#1c6ca1;color:#fff}.tox .tox-button:hover:not(:disabled){background-color:#1c6ca1;border-color:#1c6ca1;color:#fff}.tox .tox-button:active:not(:disabled){background-color:#185d8c;border-color:#185d8c;color:#fff}.tox .tox-button--secondary{background-color:#f0f0f0;border-color:#f0f0f0;color:#222f3e}.tox .tox-button--secondary[disabled]{background-color:#f0f0f0;border-color:#f0f0f0;color:rgba(34,47,62,.5)}.tox .tox-button--secondary:focus:not(:disabled){background-color:#e3e3e3;border-color:#e3e3e3;color:#222f3e}.tox .tox-button--secondary:hover:not(:disabled){background-color:#e3e3e3;border-color:#e3e3e3;color:#222f3e}.tox .tox-button--secondary:active:not(:disabled){background-color:#d6d6d6;border-color:#d6d6d6;color:#222f3e}.tox .tox-button--naked{color:#222f3e}.tox .tox-button--naked[disabled]{background-color:#f0f0f0;border-color:#f0f0f0;color:rgba(34,47,62,.5)}.tox .tox-button--naked:hover:not(:disabled){background-color:#e3e3e3;border-color:#e3e3e3;color:#222f3e}.tox .tox-button--naked:focus:not(:disabled){background-color:#e3e3e3;border-color:#e3e3e3;color:#222f3e}.tox .tox-button--naked:active:not(:disabled){background-color:#d6d6d6;border-color:#d6d6d6;color:#222f3e}.tox .tox-button--naked.tox-button--icon:hover:not(:disabled){color:#222f3e}.tox .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:rgba(34,47,62,.3)}.tox .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{fill:#207ab7}.tox .tox-checkbox__icons .tox-checkbox-icon__checked svg{fill:#207ab7}.tox .tox-checkbox--disabled{color:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__checked svg{fill:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__unchecked svg{fill:rgba(34,47,62,.5)}.tox .tox-checkbox--disabled .tox-checkbox__icons .tox-checkbox-icon__indeterminate svg{fill:rgba(34,47,62,.5)}.tox input.tox-checkbox__input:focus+.tox-checkbox__icons{box-shadow:inset 0 0 0 1px #207ab7}.tox .tox-collection--list .tox-collection__group{border-color:#ccc}.tox .tox-collection__group-heading{background-color:#e6e6e6;color:rgba(34,47,62,.7)}.tox .tox-collection__item{color:#fff !important}.tox .tox-collection--list .tox-collection__item--enabled{color:contrast(inherit, #222f3e, #fff)}.tox .tox-collection--list .tox-collection__item--active:not(.tox-collection__item--state-disabled):not(.tox-swatch){background-color:#006aef !important;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--enabled{background-color:#006aef !important;color:#222f3e}.tox .tox-collection--toolbar .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#006aef !important;color:#222f3e}.tox .tox-collection--grid .tox-collection__item--enabled{background-color:#c8cbcf;color:#222f3e}.tox .tox-collection--grid .tox-collection__item--active:not(.tox-collection__item--state-disabled){background-color:#006aef !important;color:#222f3e}.tox .tox-collection__item--state-disabled{color:rgba(34,47,62,.5) !important}.tox .tox-collection__item-icon svg:not([width]):not([height]){width:auto !important;height:24px !important}.tox .tox-collection__item-label>:first-child{color:#fff !important}.tox .tox-collection__item-accessory{color:rgba(34,47,62,.7)}.tox .tox-collection__item-caret{fill:#fff !important}.tox .tox-sv-palette-thumb{border:1px solid #000}.tox .tox-sv-palette-inner-thumb{border:1px solid #fff}.tox .tox-hue-slider-spectrum{background:linear-gradient(to bottom, red, #ff0080, #f0f, #8000ff, #00f, #0080ff, #0ff, #00ff80, #0f0, #80ff00, #ff0, #ff8000, red)}.tox .tox-hue-slider-thumb{background:#fff;border:1px solid #000}.tox .tox-rgb-form input.tox-invalid{border:1px solid red !important}.tox .tox-rgb-form .tox-rgba-preview{border:1px solid #000}.tox .tox-swatch:focus,.tox .tox-swatch:hover{box-shadow:0 0 0 1px rgba(127,127,127,.3) inset}.tox .tox-swatch--remove svg path{stroke:#e74c3c}.tox .tox-swatches__picker-btn:hover{background:#dee0e2}.tox .tox-comment-thread{background:#fff}.tox .tox-comment{background:#fff;border:1px solid #ccc;box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-comment__header{color:#222f3e}.tox .tox-comment__date{color:rgba(34,47,62,.7)}.tox .tox-comment__body{color:#222f3e}.tox .tox-comment__expander p{color:rgba(34,47,62,.7)}.tox .tox-comment-thread__overlay::after{background:#fff}.tox .tox-comment__gradient::after{background:linear-gradient(rgba(255, 255, 255, 0), #fff)}.tox .tox-comment__overlay{background:#fff}.tox .tox-comment__loading-text{color:#222f3e}.tox .tox-comment__overlaytext p{background-color:#fff;box-shadow:0 0 8px 8px #fff;color:#222f3e}.tox .tox-comment__busy-spinner{background-color:#fff}.tox .tox-user__avatar svg{fill:rgba(34,47,62,.7)}.tox .tox-user__name{color:rgba(34,47,62,.7)}.tox .tox-dialog-wrap__backdrop{background-color:rgba(255,255,255,.75)}.tox .tox-dialog{background-color:#fff;border-color:#ccc;box-shadow:0 16px 16px -10px rgba(34,47,62,.15),0 0 40px 1px rgba(34,47,62,.15)}.tox .tox-dialog__header{background-color:#fff;color:#222f3e}.tox .tox-dialog__body{color:#222f3e}.tox .tox-dialog__body-nav-item{color:rgba(34,47,62,.7)}.tox .tox-dialog__body-nav-item--active{border-bottom:2px solid #207ab7;color:#207ab7}.tox .tox-dialog__body-content a{color:#207ab7}.tox .tox-dialog__body-content a:focus,.tox .tox-dialog__body-content a:hover{color:#185d8c}.tox .tox-dialog__body-content a:active{color:#185d8c}.tox .tox-dialog__footer{background-color:#fff;border-top:1px solid #ccc}.tox .tox-dialog__busy-spinner{background-color:rgba(255,255,255,.75)}.tox .tox-dialog__table tbody tr{border-bottom:1px solid #ccc}.tox .tox-dropzone{background:#fff;border:2px dashed #ccc}.tox .tox-dropzone p{color:rgba(34,47,62,.7)}.tox .tox-edit-area{border-top:1px solid #ccc}.tox .tox-edit-area__iframe{background-color:#fff}.tox.tox-inline-edit-area{border:1px dotted #ccc}.tox .tox-control-wrap__status-icon-invalid svg{fill:#c00}.tox .tox-control-wrap__status-icon-unknown svg{fill:orange}.tox .tox-control-wrap__status-icon-valid svg{fill:green}.tox .tox-color-input span{border-color:rgba(34,47,62,.2)}.tox .tox-color-input span:focus{border-color:#207ab7}.tox .tox-label,.tox .tox-toolbar-label{color:rgba(34,47,62,.7)}.tox .tox-form__group--error{color:#c00}.tox .tox-selectfield select,.tox .tox-textarea,.tox .tox-textfield,.tox .tox-toolbar-textfield{background-color:#fff;border-color:#ccc;color:#222f3e}.tox .tox-textarea[disabled],.tox .tox-textfield[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85)}.tox .tox-selectfield select:focus,.tox .tox-textarea:focus,.tox .tox-textfield:focus{border-color:#207ab7}.tox .tox-naked-btn{color:#207ab7}.tox .tox-naked-btn svg{fill:#222f3e}.tox .tox-selectfield select[disabled]{background-color:#f2f2f2;color:rgba(34,47,62,.85)}.tox .tox-image-tools__image{background-color:#666}.tox .tox-croprect-block{background:#000}.tox .tox-croprect-handle{border:2px solid #fff}.tox .tox-insert-table-picker>div{border-color:#ccc}.tox .tox-insert-table-picker .tox-insert-table-picker__selected{background-color:#fff !important;border-color:rgba(32,122,183,.5)}.tox .tox-insert-table-picker__label{color:#fff !important}.tox .tox-menu{background-color:#0087f4 !important;border:1px solid rgba(34,47,62,.5) !important;box-shadow:0 4px 8px 0 rgba(34,47,62,.1)}.tox .tox-menubar{background:url(\\\"data:image/svg+xml;charset=utf8,%3Csvg height='43px' viewBox='0 0 40 43px' width='40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='42px' width='100' height='1' fill='%23cccccc'/%3E%3C/svg%3E\\\") left 0 top 0 #fff;background-color:#0087f4 !important}.tox .tox-mbtn{color:#fff !important}.tox .tox-mbtn[disabled]{color:rgba(34,47,62,.5)}.tox .tox-mbtn:hover:not(:disabled){background:#006aef !important;color:#222f3e}.tox .tox-mbtn:focus:not(:disabled){background:#006aef !important;color:#222f3e}.tox .tox-mbtn--active{background:#0074f1 !important;color:#222f3e}.tox .tox-notification{background-color:#fffaea;border-color:#ffe89d;color:#222f3e}.tox .tox-notification a{color:#207ab7}.tox .tox-notification--success{background-color:#dff0d8;border-color:#d6e9c6}.tox .tox-notification--success a{color:#486d2a}.tox .tox-notification--error{background-color:#f2dede;border-color:#ebccd1}.tox .tox-notification--error a{color:#843441}.tox .tox-notification--warn{background-color:#fcf8e3;border-color:#faebcc}.tox .tox-notification--info{background-color:#d9edf7;border-color:#779ecb}.tox .tox-notification__body{color:#222f3e}.tox .tox-pop__dialog{background-color:#fff;border:1px solid #ccc;box-shadow:0 1px 3px rgba(0,0,0,.15)}.tox .tox-pop.tox-pop--bottom::after{border-color:#fff transparent transparent transparent}.tox .tox-pop.tox-pop--bottom::before{border-color:#ccc transparent transparent transparent}.tox .tox-pop.tox-pop--top::after{border-color:transparent transparent #fff transparent}.tox .tox-pop.tox-pop--top::before{border-color:transparent transparent #ccc transparent}.tox .tox-pop.tox-pop--left::after{border-color:transparent #fff transparent transparent}.tox .tox-pop.tox-pop--left::before{border-color:transparent #ccc transparent transparent}.tox .tox-pop.tox-pop--right::after{border-color:transparent transparent transparent #fff}.tox .tox-pop.tox-pop--right::before{border-color:transparent transparent transparent #ccc}.tox .tox-sidebar{background-color:#fff;border-top:1px solid #ccc}.tox .tox-slider__rail{border:1px solid #ccc}.tox .tox-slider__handle{background-color:#207ab7;border:2px solid #185d8c}.tox .tox-spinner>div{background-color:rgba(34,47,62,.7)}.tox .tox-statusbar{background-color:#fff;border-top:1px solid #ccc;color:rgba(34,47,62,.7)}.tox .tox-statusbar a,.tox .tox-statusbar__path-item,.tox .tox-statusbar__wordcount{color:rgba(34,47,62,.7)}.tox .tox-statusbar__resize-handle svg{fill:rgba(34,47,62,.7)}.tox .tox-throbber__busy-spinner{background-color:rgba(255,255,255,.6)}.tox .tox-tbtn{color:#fff !important}.tox .tox-tbtn svg{fill:#fff !important}.tox .tox-tbtn--enabled{background:#006aef !important;color:#222f3e}.tox .tox-tbtn--enabled svg{fill:#222f3e}.tox .tox-tbtn:hover{background:#006aef !important;color:#222f3e}.tox .tox-tbtn:hover svg{fill:#222f3e}.tox .tox-tbtn:focus{background:#006aef !important;color:#222f3e}.tox .tox-tbtn:focus svg{fill:#222f3e}.tox .tox-tbtn:active{background:#0074f1 !important;color:#222f3e}.tox .tox-tbtn:active svg{fill:#222f3e}.tox .tox-tbtn--disabled,.tox .tox-tbtn--disabled:hover,.tox .tox-tbtn:disabled,.tox .tox-tbtn:disabled:hover{color:rgba(34,47,62,.5) !important;background-color:initial !important}.tox .tox-tbtn--disabled svg,.tox .tox-tbtn--disabled:hover svg,.tox .tox-tbtn:disabled svg,.tox .tox-tbtn:disabled:hover svg{fill:rgba(34,47,62,.5) !important}.tox .tox-tbtn__select-chevron svg{fill:#fff !important}.tox .tox-tbtn__icon-wrap svg:not([width]):not([height]){width:24px !important;height:24px !important}.tox .tox-split-button:hover{box-shadow:0 0 0 1px #006aef inset !important}.tox .tox-split-button:focus{background:#006aef !important;color:#222f3e}.tox .tox-split-button__chevron svg{fill:#fff !important}.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:focus,.tox .tox-split-button.tox-tbtn--disabled .tox-tbtn:hover,.tox .tox-split-button.tox-tbtn--disabled:focus,.tox .tox-split-button.tox-tbtn--disabled:hover{color:rgba(34,47,62,.5)}.tox .tox-toolbar,.tox .tox-toolbar__overflow,.tox .tox-toolbar__primary{background:url(\\\"data:image/svg+xml;charset=utf8,%3Csvg height='39px' viewBox='0 0 40 39px' width='40' xmlns='http://www.w3.org/2000/svg'%3E%3Crect x='0' y='38px' width='100' height='1' fill='%23cccccc'/%3E%3C/svg%3E\\\") left 0 top 0 #fff;background-color:#0087f4 !important}.tox.tox-tinymce-aux .tox-toolbar__overflow{background-color:#fff;border:1px solid #ccc;box-shadow:0 1px 3px rgba(0,0,0,.15);top:0 !important;right:0 !important;max-height:none !important}.tox:not([dir=rtl]) .tox-toolbar__group:not(:last-of-type){border-right:1px solid #ccc}.tox[dir=rtl] .tox-toolbar__group:not(:last-of-type){border-left:1px solid #ccc}.tox .tox-tooltip__body{background-color:#222f3e;box-shadow:0 2px 4px rgba(34,47,62,.3);color:rgba(255,255,255,.75)}.tox .tox-tooltip--down .tox-tooltip__arrow{border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #222f3e}.tox .tox-tooltip--up .tox-tooltip__arrow{border-bottom:8px solid #222f3e;border-left:8px solid transparent;border-right:8px solid transparent}.tox .tox-tooltip--right .tox-tooltip__arrow{border-bottom:8px solid transparent;border-left:8px solid #222f3e;border-top:8px solid transparent}.tox .tox-tooltip--left .tox-tooltip__arrow{border-bottom:8px solid transparent;border-right:8px solid #222f3e;border-top:8px solid transparent}.tox .tox-well{border:1px solid #ccc}.tox .tox-custom-editor{border:1px solid #ccc}.tox .tox-dialog-loading::before{background-color:rgba(0,0,0,.5)}\";","export function fixMenuPositions(fieldStringWysiwyg: HTMLElement) {\r\n  const observer = new MutationObserver((mutations: MutationRecord[]) => {\r\n    for (const mutation of mutations) {\r\n      // tslint:disable-next-line:prefer-for-of\r\n      for (let i = 0; i < mutation.addedNodes.length; i++) {\r\n        const addedNode = mutation.addedNodes[i] as HTMLElement;\r\n        if (!addedNode.classList) { continue; }\r\n        if (!addedNode.classList.contains('tox-menu')) { continue; }\r\n\r\n        const toxMenu = addedNode;\r\n        const containerPaddingTopBottom = 10;\r\n        const containerPaddingSides = 0;\r\n        const containerOffsets = fieldStringWysiwyg.getBoundingClientRect();\r\n        const containerTop = containerOffsets.top + containerPaddingTopBottom;\r\n        const containerLeft = containerOffsets.left + containerPaddingSides;\r\n        const containerBottom = containerOffsets.bottom - containerPaddingTopBottom;\r\n        const containerRight = containerOffsets.right - containerPaddingSides;\r\n        const containerHeight = containerOffsets.height - 2 * containerPaddingTopBottom;\r\n        const containerWidth = containerOffsets.width - 2 * containerPaddingSides;\r\n\r\n        let toxMenuOffsets = toxMenu.getBoundingClientRect();\r\n        let menuTop = toxMenuOffsets.top;\r\n        let menuLeft = toxMenuOffsets.left;\r\n        let menuBottom = toxMenuOffsets.bottom;\r\n        let menuRight = toxMenuOffsets.right;\r\n        let menuHeight = toxMenuOffsets.height;\r\n        let menuWidth = toxMenuOffsets.width;\r\n\r\n        // fix height\r\n        if (menuHeight > containerHeight) {\r\n          toxMenu.style.maxHeight = `${containerHeight}px`;\r\n          toxMenuOffsets = toxMenu.getBoundingClientRect();\r\n          menuTop = toxMenuOffsets.top;\r\n          menuLeft = toxMenuOffsets.left;\r\n          menuBottom = toxMenuOffsets.bottom;\r\n          menuRight = toxMenuOffsets.right;\r\n          menuHeight = toxMenuOffsets.height;\r\n          menuWidth = toxMenuOffsets.width;\r\n        }\r\n\r\n        if (menuTop < containerTop) {\r\n          // fix too far top\r\n          const oldBottomStyle = parseInt(toxMenu.style.bottom, 10);\r\n          const newBottomStyle = oldBottomStyle - (containerTop - menuTop);\r\n          toxMenu.style.bottom = `${newBottomStyle}px`;\r\n        } else if (menuBottom > containerBottom) {\r\n          // fix too far bottom\r\n          const oldTopStyle = parseInt(toxMenu.style.top, 10);\r\n          const newTopStyle = oldTopStyle - (menuBottom - containerBottom);\r\n          toxMenu.style.top = `${newTopStyle}px`;\r\n        }\r\n\r\n        if (menuWidth > containerWidth) {\r\n          // fix too wide\r\n          toxMenu.style.width = `${containerWidth}px`;\r\n          toxMenuOffsets = toxMenu.getBoundingClientRect();\r\n          menuTop = toxMenuOffsets.top;\r\n          menuLeft = toxMenuOffsets.left;\r\n          menuBottom = toxMenuOffsets.bottom;\r\n          menuRight = toxMenuOffsets.right;\r\n          menuHeight = toxMenuOffsets.height;\r\n          menuWidth = toxMenuOffsets.width;\r\n        }\r\n        if (menuRight > containerRight) {\r\n          // fix too far right\r\n          const oldLeftStyle = parseInt(toxMenu.style.left, 10);\r\n          const newLeftStyle = oldLeftStyle - (menuRight - containerRight);\r\n          toxMenu.style.left = `${newLeftStyle}px`;\r\n        } else if (menuLeft < containerLeft) {\r\n          // fix too far left\r\n          const oldRightStyle = parseInt(toxMenu.style.right, 10);\r\n          const newRightStyle = oldRightStyle - (containerLeft - menuLeft);\r\n          toxMenu.style.right = `${newRightStyle}px`;\r\n        }\r\n\r\n        toxMenu.style.visibility = 'visible';\r\n      }\r\n    }\r\n  });\r\n  const toolbarContainer = fieldStringWysiwyg.querySelector('.tinymce-toolbar-container');\r\n  observer.observe(toolbarContainer, { subtree: true, childList: true });\r\n  return observer;\r\n}\r\n","import { TinyMceTranslations } from './translations';\r\nimport { Connector } from '../../../edit-types';\r\nimport { DefaultPlugins, DefaultOptions, DefaultPaste } from './defaults';\r\nimport { FeaturesGuidsConstants as FeatGuids } from '../../../shared/features-guids.constants';\r\nimport * as contentStyle from '../main/tinymce-content.css';\r\nimport { TinyMceToolbars } from './toolbars';\r\nimport { WysiwygReconfigure } from '../../../edit-types/src/WysiwygReconfigure';\r\nimport { TinyInstanceOptions } from './defaults/tinyInstance';\r\n// tslint:disable: curly\r\n\r\n/**\r\n * This object will configure the tinyMCE\r\n */\r\nexport class TinyMceConfigurator {\r\n  /** language used - will be set by the constructor */\r\n  private language: string;\r\n\r\n  /** Standard constructor */\r\n  constructor(\r\n    /** TinyMCE editorManager - in charge of buttons, i18n etc. */\r\n    public editorManager: any,\r\n    private connector: Connector<any>,\r\n    /** Reconfiguration object - which can optionally change/extend/enhance stuff */\r\n    private reconfigure: WysiwygReconfigure,\r\n  ) {\r\n    this.language = connector._experimental.translateService.currentLang;\r\n\r\n    // call optional reconfiguration\r\n    if (reconfigure) {\r\n      reconfigure.managerInit?.(editorManager);\r\n      if (reconfigure.optionsInit) reconfigure.optionsInit(this.options, this.instance);\r\n    }\r\n\r\n  }\r\n\r\n  /** options to be used - can be modified before it's applied */\r\n  options = { ...DefaultOptions, ...{ plugins: [...DefaultPlugins] } };  // copy the object, so changes don't affect original\r\n\r\n  instance = { ...TinyInstanceOptions };\r\n\r\n  /**\r\n   * Construct TinyMce options\r\n   */\r\n  buildOptions(containerClass: string, fixedToolbarClass: string, setup: (editor: any) => any) {\r\n    const connector = this.connector;\r\n    const exp = connector._experimental;\r\n    const inlineMode = exp.inlineMode;\r\n    const buttonSource = connector.field.settings.ButtonSource;\r\n    const buttonAdvanced = connector.field.settings.ButtonAdvanced;\r\n    const dropzoneConfig = exp.dropzoneConfig$.value;\r\n    // enable content blocks if there is another field after this one and it's type is entity-content-blocks\r\n    const contentBlocksEnabled = (exp.allInputTypeNames.length > connector.field.index + 1)\r\n      ? exp.allInputTypeNames[connector.field.index + 1].inputType === 'entity-content-blocks'\r\n      : false;\r\n\r\n    // build options based on defaults + a few instance specific properties\r\n    let options = {\r\n      ...this.options,\r\n      // plugins: this.plugins,\r\n      selector: `.${containerClass}`,\r\n      fixed_toolbar_container: `.${fixedToolbarClass}`,\r\n      content_style: contentStyle.default,\r\n      setup, // callback function during setup\r\n    };\r\n\r\n    const modesOptions = TinyMceToolbars.build(contentBlocksEnabled, inlineMode, buttonSource, buttonAdvanced);\r\n    options = { ...options, ...modesOptions };\r\n\r\n    // TODO: SPM - unsure if this actually does anything, as we already add all i18n?\r\n    options = { ...options, ...TinyMceTranslations.getLanguageOptions(this.language) };\r\n\r\n    if (exp.isFeatureEnabled(FeatGuids.PasteWithFormatting))\r\n      options = { ...options, ...DefaultPaste.formattedText };\r\n\r\n    if (exp.isFeatureEnabled(FeatGuids.PasteImageFromClipboard))\r\n      options = { ...options, ...DefaultPaste.images(dropzoneConfig.url as string, dropzoneConfig.headers) };\r\n\r\n    if (this.reconfigure?.optionsReady)\r\n      this.reconfigure.optionsReady(options);\r\n    return options;\r\n  }\r\n\r\n\r\n\r\n\r\n  addTranslations() {\r\n    TinyMceTranslations.addTranslations(this.language,\r\n      this.connector._experimental.translateService,\r\n      this.editorManager);\r\n    this.reconfigure?.addTranslations?.(this.editorManager, this.language);\r\n  }\r\n}\r\n","import { TranslateService } from '@ngx-translate/core';\r\n\r\n// default language\r\nconst defaultLanguage = 'en';\r\n// translated languages\r\nconst languages = 'de,es,fr,it,uk,nl'.split(',');\r\n\r\n// prefixes in the i18n files\r\nconst prefix = 'Extension.TinyMce';\r\nconst prefixDot = 'Extension.TinyMce.';\r\n\r\n\r\nexport class TinyMceTranslations {\r\n\r\n  /**\r\n   * Get a tiny-mce configuration for a language file\r\n   * TODO: looks fishy, the files are in a strange place - probably wrong for this?\r\n   * TODO: not ever sure if this is actually used, as we're already adding translations in the other code?\r\n   */\r\n  static getLanguageOptions(currentLang: string) {\r\n    // check if it's an additionally translated language and load the translations\r\n    const lang2 = currentLang.substr(0, 2);\r\n    if (languages.indexOf(lang2) === -1) {\r\n      return {\r\n        language: defaultLanguage,\r\n      };\r\n    } else {\r\n      return {\r\n        language: lang2,\r\n        language_url: '/DesktopModules/ToSIC_SexyContent/dist/i18n/lib/tinymce/' + lang2 + '.js',\r\n      };\r\n    }\r\n  }\r\n\r\n  /** Add translations to TinyMCE. Call after TinyMCE is initialized */\r\n  static addTranslations(language: string, translateService: TranslateService, editorManager: any) {\r\n    const keys = [];\r\n    const mceTranslations: any = {};\r\n\r\n    // find all relevant keys by querying the primary language\r\n    const all = translateService.translations[defaultLanguage];\r\n    for (const key in all) {\r\n      if (key.indexOf(prefix) === 0) {\r\n        keys.push(key);\r\n      }\r\n    }\r\n\r\n    const translations = translateService.instant(keys);\r\n\r\n    // TODO: SPM - this looks unused\r\n    for (const key of keys) {\r\n      mceTranslations[key.replace(prefixDot, '')] = translations[key];\r\n    }\r\n\r\n    editorManager.addI18n(language, translations[keys[0]]);\r\n  }\r\n\r\n\r\n}\r\n\r\n","\r\nexport * from './options';\r\nexport * from './paste';\r\nexport * from './plugins';\r\nexport * from './tinyInstance';\r\n","import { DefaultPlugins } from './plugins';\r\n\r\n\r\nexport const DefaultOptions = {\r\n  skin: 'oxide',\r\n  theme: 'silver',\r\n  suffix: '.min', // force minified skin, theme, plugins, etc.\r\n  // body_class: 'field-string-wysiwyg-mce-box',\r\n  height: '100%',\r\n  branding: false,\r\n  // statusbar: true, // doesn't work in inline\r\n  inline: true, // use the div, not an iframe\r\n  toolbar_drawer: 'floating',\r\n  automatic_uploads: false, // we're using our own upload mechanism\r\n  autosave_ask_before_unload: false,\r\n  paste_as_text: true,\r\n  // 2020-04-17 2dm - plugins now added later\r\n  // plugins: DefaultPlugins,\r\n  extended_valid_elements: '@[class]' // allow classes on all elements,\r\n    + ',i' // allow i elements (allows icon-font tags like <i class='fa fa-...'>),\r\n    + ',hr[sxc|guid]', // allow inline content-blocks\r\n  custom_elements: 'hr',\r\n  // Url Rewriting in images and pages\r\n  // convert_urls: false,  // don't use this, would keep the domain which is often a test-domain\r\n  // keep urls with full path so starting with a '/' - otherwise it would rewrite them to a '../../..' syntax\r\n  relative_urls: false,\r\n  default_link_target: '_blank', // auto-use blank as default link-target\r\n  object_resizing: false, // don't allow manual scaling of images\r\n  debounce: false, // DONT slow-down model updates - otherwise we sometimes miss the last changes\r\n};\r\n","import { webpackConsoleLog } from '../../../../shared/webpack-console-log';\r\n\r\nexport class DefaultPaste {\r\n\r\n  /** Paste formatted text, e.g. text copied from MS Word */\r\n  static formattedText = {\r\n    paste_as_text: false,\r\n    paste_enable_default_filters: true,\r\n    paste_create_paragraphs: true,\r\n    paste_create_linebreaks: false,\r\n    paste_force_cleanup_wordpaste: true,\r\n    paste_use_dialog: true,\r\n    paste_auto_cleanup_on_paste: true,\r\n    paste_convert_middot_lists: true,\r\n    paste_convert_headers_to_strong: false,\r\n    paste_remove_spans: true,\r\n    paste_remove_styles: true,\r\n    paste_preprocess(e: any, args: any) {\r\n      webpackConsoleLog('paste preprocess', e, args);\r\n    },\r\n    paste_postprocess(plugin: any, args: any) {\r\n      try {\r\n        const anchors = args.node.getElementsByTagName('a');\r\n        for (const anchor of anchors) {\r\n          if (anchor.hasAttribute('target') === false) {\r\n            anchor.setAttribute('target', '_blank');\r\n          }\r\n        }\r\n      } catch (e) {\r\n        console.error('error in paste postprocess - will only log but not throw', e);\r\n      }\r\n    }\r\n  };\r\n\r\n  /** Paste image */\r\n  static images(uploadUrl: string, headers: any) {\r\n    return {\r\n      automatic_uploads: true,\r\n      images_reuse_filename: true,\r\n      paste_data_images: true,\r\n      paste_filter_drop: false,\r\n      paste_block_drop: false,\r\n      images_upload_url: uploadUrl,\r\n      images_upload_base_path: '/images_upload_base_path/',\r\n      images_upload_handler: DefaultPaste.imagesUploadHandler,\r\n      upload_headers: headers,\r\n    };\r\n  }\r\n\r\n  private static imagesUploadHandler(blobInfo: any, success: (imgPath: string) => any, failure: () => any) {\r\n    const formData = new FormData();\r\n    formData.append('file', blobInfo.blob(), blobInfo.filename());\r\n\r\n    const settings = (window as any).tinymce.activeEditor.settings;\r\n    webpackConsoleLog('TinyMCE upload settings', settings);\r\n\r\n    fetch(settings.images_upload_url, {\r\n      method: 'POST',\r\n      // mode: 'cors',\r\n      headers: settings.upload_headers,\r\n      body: formData,\r\n    }).then(response =>\r\n      response.json()\r\n    ).then(data => {\r\n      webpackConsoleLog('TinyMCE upload data', data);\r\n      success(data.Path);\r\n    }).catch(error => {\r\n      webpackConsoleLog('TinyMCE upload error:', error);\r\n    });\r\n\r\n  }\r\n}\r\n","/**\r\n * The default plugins we're activating on TinyMce\r\n */\r\nexport const DefaultPlugins = [\r\n  'code', // allow view / edit source\r\n  // 'contextmenu', // right-click menu for things like insert, etc. spm built into tinymce core in v5\r\n  'autolink', // automatically convert www.xxx links to real links\r\n  'tabfocus', // get in an out of the editor with tab\r\n  'image', // image button and image-settings\r\n  'link', // link button + ctrl+k to add link\r\n  // 'autosave',     // temp-backups the content in case the browser crashes, allows restore\r\n  'paste', // enables paste as text from word etc. https://www.tinymce.com/docs/plugins/paste/\r\n  'anchor', // allows users to set an anchor inside the text\r\n  'charmap', // character map https://www.tinymce.com/docs/plugins/visualchars/\r\n  'hr', // hr\r\n  'media', // video embed\r\n  'nonbreaking', // add button to insert &nbsp; https://www.tinymce.com/docs/plugins/nonbreaking/\r\n  'searchreplace', // search/replace https://www.tinymce.com/docs/plugins/searchreplace/\r\n  'table', // https://www.tinymce.com/docs/plugins/searchreplace/\r\n  'lists', // should fix bug with fonts in list-items (https://github.com/tinymce/tinymce/issues/2330),\r\n  'textpattern' // enable typing like '1. text' to create lists etc.\r\n];\r\n","export default \"/* Probably not needed */\\r\\n/* .mce-i-apple:before {\\r\\n  position: relative;\\r\\n  top: 1px;\\r\\n  display: inline-block;\\r\\n  font-family: 'Glyphicons Halflings';\\r\\n  font-style: normal;\\r\\n  font-weight: normal;\\r\\n  line-height: 1;\\r\\n\\r\\n  -webkit-font-smoothing: antialiased;\\r\\n  -moz-osx-font-smoothing: grayscale;\\r\\n\\r\\n  content:\\\"\\\\f179\\\"\\r\\n} */\\r\\n\\r\\n/* content block */\\r\\nhr[sxc] {\\r\\n  background-color: #B0DCFF;\\r\\n  height: 75px;\\r\\n}\\r\\n\\r\\nhr[sxc]::after {\\r\\n  color: white;\\r\\n  content: \\\"App / Content\\\";\\r\\n  position: absolute;\\r\\n  text-align: center;\\r\\n  font-size: 25px;\\r\\n  display: inline-block;\\r\\n  width: calc(100% - 2px); /* 2px because of the border */\\r\\n  margin-top: 17px;\\r\\n}\\r\\n\";","\r\nexport class TinyMceToolbars {\r\n\r\n  static build(contentBlocksEnabled: boolean, inlineMode: boolean, buttonSource: string, buttonAdvanced: string) {\r\n    const modes = {\r\n      inline: TinyMceToolbars.inline(contentBlocksEnabled, buttonSource, buttonAdvanced),\r\n      standard: TinyMceToolbars.standard(contentBlocksEnabled, buttonSource, buttonAdvanced),\r\n      advanced: TinyMceToolbars.advanced(inlineMode, contentBlocksEnabled),\r\n    };\r\n    return {\r\n      modes, // for later switch to another mode\r\n      menubar: inlineMode ? modes.inline.menubar : modes.standard.menubar, // basic menu (none)\r\n      toolbar: inlineMode ? modes.inline.toolbar : modes.standard.toolbar, // basic toolbar\r\n      contextmenu: inlineMode ? modes.inline.contextmenu : modes.standard.contextmenu, // 'link image | charmap hr adamimage',\r\n    };\r\n  }\r\n\r\n  private static advanced(inlineMode: boolean, contentBlocksEnabled: boolean) {\r\n    return {\r\n      menubar: true,\r\n      toolbar: ' undo redo removeformat '\r\n        + '| styleselect '\r\n        + '| bold italic '\r\n        + '| h2 h3 hgroup '\r\n        + '| numlist bullist outdent indent '\r\n        + '| ' + (!inlineMode ? ' images linkfiles' : '') + ' linkgrouppro '\r\n        + '| '\r\n        + (contentBlocksEnabled ? ' addcontentblock ' : '')\r\n        + ' code '\r\n        + (inlineMode ? ' modeinline expandfulleditor ' : ' modestandard '),\r\n      contextmenu: 'link image | charmap hr adamimage' + (contentBlocksEnabled ? ' addcontentblock' : '')\r\n    };\r\n  }\r\n\r\n  private static standard(contentBlocksEnabled: boolean, source: string, advanced: string) {\r\n    return {\r\n      menubar: false,\r\n      toolbar: ' undo redo removeformat '\r\n        + '| bold formatgroup '\r\n        + '| h2 h3 hgroup '\r\n        + '| numlist listgroup '\r\n        + '| linkfiles linkgroup '\r\n        + '| '\r\n        + (contentBlocksEnabled ? ' addcontentblock ' : '')\r\n        + (source === 'false' ? '' : ' code ')\r\n        + (advanced === 'false' ? '' : ' modeadvanced '),\r\n      contextmenu: 'charmap hr' + (contentBlocksEnabled ? ' addcontentblock' : '')\r\n    };\r\n  }\r\n\r\n  private static inline(contentBlocksEnabled: boolean, source: string, advanced: string) {\r\n    return {\r\n      menubar: false,\r\n      toolbar: ' undo redo removeformat '\r\n        + '| bold formatgroup '\r\n        + '| h2 h3 hgroup '\r\n        + '| numlist listgroup '\r\n        + '| linkgroup '\r\n        + '| '\r\n        + (contentBlocksEnabled ? ' addcontentblock ' : '')\r\n        + (source === 'true' ? ' code ' : '')\r\n        + (advanced === 'true' ? ' modeadvanced ' : '')\r\n        + ' expandfulleditor ',\r\n      contextmenu: 'charmap hr' + (contentBlocksEnabled ? ' addcontentblock' : '')\r\n    };\r\n  }\r\n}\r\n","import { Subscription } from 'rxjs';\r\n\r\nimport { EavCustomInputField, Connector } from '../../../edit-types';\r\nimport { buildTemplate } from '../shared/helpers';\r\nimport * as template from './preview.html';\r\nimport * as styles from './preview.css';\r\nimport { ElementEventListener } from '../../../shared/element-event-listener-model';\r\nimport { FieldStringWysiwygDialog } from '../main/main';\r\nimport { webpackConsoleLog } from '../../../shared/webpack-console-log';\r\n\r\nclass FieldStringWysiwyg extends HTMLElement implements EavCustomInputField<string> {\r\n  connector: Connector<string>;\r\n  private subscription = new Subscription();\r\n  private eventListeners: ElementEventListener[] = [];\r\n\r\n  constructor() {\r\n    super();\r\n    webpackConsoleLog('FieldStringWysiwyg constructor called');\r\n  }\r\n\r\n  connectedCallback() {\r\n    webpackConsoleLog('FieldStringWysiwyg connectedCallback called');\r\n    const inline = this.connector.field.settings.Dialog === 'inline';\r\n    if (!inline) {\r\n      this.runPreviewMode();\r\n    } else {\r\n      this.runInlineMode();\r\n    }\r\n  }\r\n\r\n  private runPreviewMode() {\r\n    this.innerHTML = buildTemplate(template.default, styles.default);\r\n    const previewContainer: HTMLDivElement = this.querySelector('.wysiwyg-preview');\r\n    if (this.connector.field.disabled) {\r\n      previewContainer.classList.add('disabled');\r\n    } else {\r\n      const expand = () => { this.connector.expand(true); };\r\n      previewContainer.addEventListener('click', expand);\r\n      this.eventListeners.push({ element: previewContainer, type: 'click', listener: expand });\r\n    }\r\n    this.subscription.add(\r\n      this.connector.data.value$.subscribe(value => {\r\n        previewContainer.innerHTML = !value ? '' : value\r\n          .replace('<hr sxc=\"sxc-content-block', '<hr class=\"sxc-content-block') // content block\r\n          .replace(/<a[^>]*>(.*?)<\\/a>/g, '$1'); // remove href from A tag\r\n      })\r\n    );\r\n  }\r\n\r\n  private runInlineMode() {\r\n    const dialogName = 'field-string-wysiwyg-dialog';\r\n    const dialogEl = document.createElement(dialogName) as FieldStringWysiwygDialog;\r\n    dialogEl.connector = this.connector;\r\n    dialogEl.connector._experimental.inlineMode = true;\r\n    this.appendChild(dialogEl);\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    webpackConsoleLog('FieldStringWysiwyg disconnectedCallback called');\r\n    this.eventListeners.forEach(listener => {\r\n      listener.element.removeEventListener(listener.type, listener.listener);\r\n    });\r\n    this.eventListeners = null;\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n}\r\n\r\ncustomElements.define('field-string-wysiwyg', FieldStringWysiwyg);\r\n\r\n// export class FieldStringWysiwygInline extends FieldStringWysiwyg {\r\n//   inline = true;\r\n// }\r\n\r\n// customElements.define('field-string-wysiwyg-inline', FieldStringWysiwyg);\r\n","export default \"<div class=\\\"wysiwyg-preview\\\"></div>\\r\\n\";","export default \".wysiwyg-preview {\\r\\n  height: 96px;\\r\\n  user-select: none;\\r\\n}\\r\\n\\r\\n.wysiwyg-preview:not(.disabled) {\\r\\n  cursor: pointer;\\r\\n  border: 1px solid rgba(0, 0, 0, 0.2);\\r\\n  border-bottom: none;\\r\\n  padding: 1px 8px 0;\\r\\n}\\r\\n\\r\\n.wysiwyg-preview:not(.disabled):hover {\\r\\n  border-width: 2px;\\r\\n  padding: 0 7px 0;\\r\\n}\\r\\n\\r\\n.wysiwyg-preview.disabled {\\r\\n  background: linear-gradient(to right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%),\\r\\n    linear-gradient(rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%),\\r\\n    linear-gradient(to right, rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%),\\r\\n    linear-gradient(rgba(0, 0, 0, 0.2) 0%, rgba(0, 0, 0, 0.2) 33%, transparent 0%);\\r\\n  background-position: top, right, bottom, left;\\r\\n  background-repeat: repeat-x, repeat-y;\\r\\n  background-size: 4px 1px, 1px 4px;\\r\\n}\\r\\n\";","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isFunction(x) {\n    return typeof x === 'function';\n}\n//# sourceMappingURL=isFunction.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar _enable_super_gross_mode_that_will_cause_bad_things = false;\nexport var config = {\n    Promise: undefined,\n    set useDeprecatedSynchronousErrorHandling(value) {\n        if (value) {\n            var error = /*@__PURE__*/ new Error();\n            /*@__PURE__*/ console.warn('DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \\n' + error.stack);\n        }\n        else if (_enable_super_gross_mode_that_will_cause_bad_things) {\n            /*@__PURE__*/ console.log('RxJS: Back to a better error behavior. Thank you. <3');\n        }\n        _enable_super_gross_mode_that_will_cause_bad_things = value;\n    },\n    get useDeprecatedSynchronousErrorHandling() {\n        return _enable_super_gross_mode_that_will_cause_bad_things;\n    },\n};\n//# sourceMappingURL=config.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function hostReportError(err) {\n    setTimeout(function () { throw err; }, 0);\n}\n//# sourceMappingURL=hostReportError.js.map\n","/** PURE_IMPORTS_START _config,_util_hostReportError PURE_IMPORTS_END */\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nexport var empty = {\n    closed: true,\n    next: function (value) { },\n    error: function (err) {\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            throw err;\n        }\n        else {\n            hostReportError(err);\n        }\n    },\n    complete: function () { }\n};\n//# sourceMappingURL=Observer.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArray = /*@__PURE__*/ (function () { return Array.isArray || (function (x) { return x && typeof x.length === 'number'; }); })();\n//# sourceMappingURL=isArray.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isObject(x) {\n    return x !== null && typeof x === 'object';\n}\n//# sourceMappingURL=isObject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar UnsubscriptionErrorImpl = /*@__PURE__*/ (function () {\n    function UnsubscriptionErrorImpl(errors) {\n        Error.call(this);\n        this.message = errors ?\n            errors.length + \" errors occurred during unsubscription:\\n\" + errors.map(function (err, i) { return i + 1 + \") \" + err.toString(); }).join('\\n  ') : '';\n        this.name = 'UnsubscriptionError';\n        this.errors = errors;\n        return this;\n    }\n    UnsubscriptionErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return UnsubscriptionErrorImpl;\n})();\nexport var UnsubscriptionError = UnsubscriptionErrorImpl;\n//# sourceMappingURL=UnsubscriptionError.js.map\n","/** PURE_IMPORTS_START _util_isArray,_util_isObject,_util_isFunction,_util_UnsubscriptionError PURE_IMPORTS_END */\nimport { isArray } from './util/isArray';\nimport { isObject } from './util/isObject';\nimport { isFunction } from './util/isFunction';\nimport { UnsubscriptionError } from './util/UnsubscriptionError';\nvar Subscription = /*@__PURE__*/ (function () {\n    function Subscription(unsubscribe) {\n        this.closed = false;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (unsubscribe) {\n            this._unsubscribe = unsubscribe;\n        }\n    }\n    Subscription.prototype.unsubscribe = function () {\n        var errors;\n        if (this.closed) {\n            return;\n        }\n        var _a = this, _parentOrParents = _a._parentOrParents, _unsubscribe = _a._unsubscribe, _subscriptions = _a._subscriptions;\n        this.closed = true;\n        this._parentOrParents = null;\n        this._subscriptions = null;\n        if (_parentOrParents instanceof Subscription) {\n            _parentOrParents.remove(this);\n        }\n        else if (_parentOrParents !== null) {\n            for (var index = 0; index < _parentOrParents.length; ++index) {\n                var parent_1 = _parentOrParents[index];\n                parent_1.remove(this);\n            }\n        }\n        if (isFunction(_unsubscribe)) {\n            try {\n                _unsubscribe.call(this);\n            }\n            catch (e) {\n                errors = e instanceof UnsubscriptionError ? flattenUnsubscriptionErrors(e.errors) : [e];\n            }\n        }\n        if (isArray(_subscriptions)) {\n            var index = -1;\n            var len = _subscriptions.length;\n            while (++index < len) {\n                var sub = _subscriptions[index];\n                if (isObject(sub)) {\n                    try {\n                        sub.unsubscribe();\n                    }\n                    catch (e) {\n                        errors = errors || [];\n                        if (e instanceof UnsubscriptionError) {\n                            errors = errors.concat(flattenUnsubscriptionErrors(e.errors));\n                        }\n                        else {\n                            errors.push(e);\n                        }\n                    }\n                }\n            }\n        }\n        if (errors) {\n            throw new UnsubscriptionError(errors);\n        }\n    };\n    Subscription.prototype.add = function (teardown) {\n        var subscription = teardown;\n        if (!teardown) {\n            return Subscription.EMPTY;\n        }\n        switch (typeof teardown) {\n            case 'function':\n                subscription = new Subscription(teardown);\n            case 'object':\n                if (subscription === this || subscription.closed || typeof subscription.unsubscribe !== 'function') {\n                    return subscription;\n                }\n                else if (this.closed) {\n                    subscription.unsubscribe();\n                    return subscription;\n                }\n                else if (!(subscription instanceof Subscription)) {\n                    var tmp = subscription;\n                    subscription = new Subscription();\n                    subscription._subscriptions = [tmp];\n                }\n                break;\n            default: {\n                throw new Error('unrecognized teardown ' + teardown + ' added to Subscription.');\n            }\n        }\n        var _parentOrParents = subscription._parentOrParents;\n        if (_parentOrParents === null) {\n            subscription._parentOrParents = this;\n        }\n        else if (_parentOrParents instanceof Subscription) {\n            if (_parentOrParents === this) {\n                return subscription;\n            }\n            subscription._parentOrParents = [_parentOrParents, this];\n        }\n        else if (_parentOrParents.indexOf(this) === -1) {\n            _parentOrParents.push(this);\n        }\n        else {\n            return subscription;\n        }\n        var subscriptions = this._subscriptions;\n        if (subscriptions === null) {\n            this._subscriptions = [subscription];\n        }\n        else {\n            subscriptions.push(subscription);\n        }\n        return subscription;\n    };\n    Subscription.prototype.remove = function (subscription) {\n        var subscriptions = this._subscriptions;\n        if (subscriptions) {\n            var subscriptionIndex = subscriptions.indexOf(subscription);\n            if (subscriptionIndex !== -1) {\n                subscriptions.splice(subscriptionIndex, 1);\n            }\n        }\n    };\n    Subscription.EMPTY = (function (empty) {\n        empty.closed = true;\n        return empty;\n    }(new Subscription()));\n    return Subscription;\n}());\nexport { Subscription };\nfunction flattenUnsubscriptionErrors(errors) {\n    return errors.reduce(function (errs, err) { return errs.concat((err instanceof UnsubscriptionError) ? err.errors : err); }, []);\n}\n//# sourceMappingURL=Subscription.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var rxSubscriber = /*@__PURE__*/ (function () {\n    return typeof Symbol === 'function'\n        ? /*@__PURE__*/ Symbol('rxSubscriber')\n        : '@@rxSubscriber_' + /*@__PURE__*/ Math.random();\n})();\nexport var $$rxSubscriber = rxSubscriber;\n//# sourceMappingURL=rxSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_util_isFunction,_Observer,_Subscription,_internal_symbol_rxSubscriber,_config,_util_hostReportError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isFunction } from './util/isFunction';\nimport { empty as emptyObserver } from './Observer';\nimport { Subscription } from './Subscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nimport { config } from './config';\nimport { hostReportError } from './util/hostReportError';\nvar Subscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subscriber, _super);\n    function Subscriber(destinationOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this.syncErrorValue = null;\n        _this.syncErrorThrown = false;\n        _this.syncErrorThrowable = false;\n        _this.isStopped = false;\n        switch (arguments.length) {\n            case 0:\n                _this.destination = emptyObserver;\n                break;\n            case 1:\n                if (!destinationOrNext) {\n                    _this.destination = emptyObserver;\n                    break;\n                }\n                if (typeof destinationOrNext === 'object') {\n                    if (destinationOrNext instanceof Subscriber) {\n                        _this.syncErrorThrowable = destinationOrNext.syncErrorThrowable;\n                        _this.destination = destinationOrNext;\n                        destinationOrNext.add(_this);\n                    }\n                    else {\n                        _this.syncErrorThrowable = true;\n                        _this.destination = new SafeSubscriber(_this, destinationOrNext);\n                    }\n                    break;\n                }\n            default:\n                _this.syncErrorThrowable = true;\n                _this.destination = new SafeSubscriber(_this, destinationOrNext, error, complete);\n                break;\n        }\n        return _this;\n    }\n    Subscriber.prototype[rxSubscriberSymbol] = function () { return this; };\n    Subscriber.create = function (next, error, complete) {\n        var subscriber = new Subscriber(next, error, complete);\n        subscriber.syncErrorThrowable = false;\n        return subscriber;\n    };\n    Subscriber.prototype.next = function (value) {\n        if (!this.isStopped) {\n            this._next(value);\n        }\n    };\n    Subscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._error(err);\n        }\n    };\n    Subscriber.prototype.complete = function () {\n        if (!this.isStopped) {\n            this.isStopped = true;\n            this._complete();\n        }\n    };\n    Subscriber.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.isStopped = true;\n        _super.prototype.unsubscribe.call(this);\n    };\n    Subscriber.prototype._next = function (value) {\n        this.destination.next(value);\n    };\n    Subscriber.prototype._error = function (err) {\n        this.destination.error(err);\n        this.unsubscribe();\n    };\n    Subscriber.prototype._complete = function () {\n        this.destination.complete();\n        this.unsubscribe();\n    };\n    Subscriber.prototype._unsubscribeAndRecycle = function () {\n        var _parentOrParents = this._parentOrParents;\n        this._parentOrParents = null;\n        this.unsubscribe();\n        this.closed = false;\n        this.isStopped = false;\n        this._parentOrParents = _parentOrParents;\n        return this;\n    };\n    return Subscriber;\n}(Subscription));\nexport { Subscriber };\nvar SafeSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SafeSubscriber, _super);\n    function SafeSubscriber(_parentSubscriber, observerOrNext, error, complete) {\n        var _this = _super.call(this) || this;\n        _this._parentSubscriber = _parentSubscriber;\n        var next;\n        var context = _this;\n        if (isFunction(observerOrNext)) {\n            next = observerOrNext;\n        }\n        else if (observerOrNext) {\n            next = observerOrNext.next;\n            error = observerOrNext.error;\n            complete = observerOrNext.complete;\n            if (observerOrNext !== emptyObserver) {\n                context = Object.create(observerOrNext);\n                if (isFunction(context.unsubscribe)) {\n                    _this.add(context.unsubscribe.bind(context));\n                }\n                context.unsubscribe = _this.unsubscribe.bind(_this);\n            }\n        }\n        _this._context = context;\n        _this._next = next;\n        _this._error = error;\n        _this._complete = complete;\n        return _this;\n    }\n    SafeSubscriber.prototype.next = function (value) {\n        if (!this.isStopped && this._next) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                this.__tryOrUnsub(this._next, value);\n            }\n            else if (this.__tryOrSetError(_parentSubscriber, this._next, value)) {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.error = function (err) {\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            var useDeprecatedSynchronousErrorHandling = config.useDeprecatedSynchronousErrorHandling;\n            if (this._error) {\n                if (!useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(this._error, err);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, this._error, err);\n                    this.unsubscribe();\n                }\n            }\n            else if (!_parentSubscriber.syncErrorThrowable) {\n                this.unsubscribe();\n                if (useDeprecatedSynchronousErrorHandling) {\n                    throw err;\n                }\n                hostReportError(err);\n            }\n            else {\n                if (useDeprecatedSynchronousErrorHandling) {\n                    _parentSubscriber.syncErrorValue = err;\n                    _parentSubscriber.syncErrorThrown = true;\n                }\n                else {\n                    hostReportError(err);\n                }\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.complete = function () {\n        var _this = this;\n        if (!this.isStopped) {\n            var _parentSubscriber = this._parentSubscriber;\n            if (this._complete) {\n                var wrappedComplete = function () { return _this._complete.call(_this._context); };\n                if (!config.useDeprecatedSynchronousErrorHandling || !_parentSubscriber.syncErrorThrowable) {\n                    this.__tryOrUnsub(wrappedComplete);\n                    this.unsubscribe();\n                }\n                else {\n                    this.__tryOrSetError(_parentSubscriber, wrappedComplete);\n                    this.unsubscribe();\n                }\n            }\n            else {\n                this.unsubscribe();\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrUnsub = function (fn, value) {\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            this.unsubscribe();\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                throw err;\n            }\n            else {\n                hostReportError(err);\n            }\n        }\n    };\n    SafeSubscriber.prototype.__tryOrSetError = function (parent, fn, value) {\n        if (!config.useDeprecatedSynchronousErrorHandling) {\n            throw new Error('bad call');\n        }\n        try {\n            fn.call(this._context, value);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                parent.syncErrorValue = err;\n                parent.syncErrorThrown = true;\n                return true;\n            }\n            else {\n                hostReportError(err);\n                return true;\n            }\n        }\n        return false;\n    };\n    SafeSubscriber.prototype._unsubscribe = function () {\n        var _parentSubscriber = this._parentSubscriber;\n        this._context = null;\n        this._parentSubscriber = null;\n        _parentSubscriber.unsubscribe();\n    };\n    return SafeSubscriber;\n}(Subscriber));\nexport { SafeSubscriber };\n//# sourceMappingURL=Subscriber.js.map\n","/** PURE_IMPORTS_START _Subscriber PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nexport function canReportError(observer) {\n    while (observer) {\n        var _a = observer, closed_1 = _a.closed, destination = _a.destination, isStopped = _a.isStopped;\n        if (closed_1 || isStopped) {\n            return false;\n        }\n        else if (destination && destination instanceof Subscriber) {\n            observer = destination;\n        }\n        else {\n            observer = null;\n        }\n    }\n    return true;\n}\n//# sourceMappingURL=canReportError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var observable = /*@__PURE__*/ (function () { return typeof Symbol === 'function' && Symbol.observable || '@@observable'; })();\n//# sourceMappingURL=observable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function noop() { }\n//# sourceMappingURL=noop.js.map\n","/** PURE_IMPORTS_START _noop PURE_IMPORTS_END */\nimport { noop } from './noop';\nexport function pipe() {\n    var fns = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        fns[_i] = arguments[_i];\n    }\n    return pipeFromArray(fns);\n}\nexport function pipeFromArray(fns) {\n    if (!fns) {\n        return noop;\n    }\n    if (fns.length === 1) {\n        return fns[0];\n    }\n    return function piped(input) {\n        return fns.reduce(function (prev, fn) { return fn(prev); }, input);\n    };\n}\n//# sourceMappingURL=pipe.js.map\n","/** PURE_IMPORTS_START _util_canReportError,_util_toSubscriber,_symbol_observable,_util_pipe,_config PURE_IMPORTS_END */\nimport { canReportError } from './util/canReportError';\nimport { toSubscriber } from './util/toSubscriber';\nimport { observable as Symbol_observable } from './symbol/observable';\nimport { pipeFromArray } from './util/pipe';\nimport { config } from './config';\nvar Observable = /*@__PURE__*/ (function () {\n    function Observable(subscribe) {\n        this._isScalar = false;\n        if (subscribe) {\n            this._subscribe = subscribe;\n        }\n    }\n    Observable.prototype.lift = function (operator) {\n        var observable = new Observable();\n        observable.source = this;\n        observable.operator = operator;\n        return observable;\n    };\n    Observable.prototype.subscribe = function (observerOrNext, error, complete) {\n        var operator = this.operator;\n        var sink = toSubscriber(observerOrNext, error, complete);\n        if (operator) {\n            sink.add(operator.call(sink, this.source));\n        }\n        else {\n            sink.add(this.source || (config.useDeprecatedSynchronousErrorHandling && !sink.syncErrorThrowable) ?\n                this._subscribe(sink) :\n                this._trySubscribe(sink));\n        }\n        if (config.useDeprecatedSynchronousErrorHandling) {\n            if (sink.syncErrorThrowable) {\n                sink.syncErrorThrowable = false;\n                if (sink.syncErrorThrown) {\n                    throw sink.syncErrorValue;\n                }\n            }\n        }\n        return sink;\n    };\n    Observable.prototype._trySubscribe = function (sink) {\n        try {\n            return this._subscribe(sink);\n        }\n        catch (err) {\n            if (config.useDeprecatedSynchronousErrorHandling) {\n                sink.syncErrorThrown = true;\n                sink.syncErrorValue = err;\n            }\n            if (canReportError(sink)) {\n                sink.error(err);\n            }\n            else {\n                console.warn(err);\n            }\n        }\n    };\n    Observable.prototype.forEach = function (next, promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var subscription;\n            subscription = _this.subscribe(function (value) {\n                try {\n                    next(value);\n                }\n                catch (err) {\n                    reject(err);\n                    if (subscription) {\n                        subscription.unsubscribe();\n                    }\n                }\n            }, reject, resolve);\n        });\n    };\n    Observable.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        return source && source.subscribe(subscriber);\n    };\n    Observable.prototype[Symbol_observable] = function () {\n        return this;\n    };\n    Observable.prototype.pipe = function () {\n        var operations = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            operations[_i] = arguments[_i];\n        }\n        if (operations.length === 0) {\n            return this;\n        }\n        return pipeFromArray(operations)(this);\n    };\n    Observable.prototype.toPromise = function (promiseCtor) {\n        var _this = this;\n        promiseCtor = getPromiseCtor(promiseCtor);\n        return new promiseCtor(function (resolve, reject) {\n            var value;\n            _this.subscribe(function (x) { return value = x; }, function (err) { return reject(err); }, function () { return resolve(value); });\n        });\n    };\n    Observable.create = function (subscribe) {\n        return new Observable(subscribe);\n    };\n    return Observable;\n}());\nexport { Observable };\nfunction getPromiseCtor(promiseCtor) {\n    if (!promiseCtor) {\n        promiseCtor = config.Promise || Promise;\n    }\n    if (!promiseCtor) {\n        throw new Error('no Promise impl found');\n    }\n    return promiseCtor;\n}\n//# sourceMappingURL=Observable.js.map\n","/** PURE_IMPORTS_START _Subscriber,_symbol_rxSubscriber,_Observer PURE_IMPORTS_END */\nimport { Subscriber } from '../Subscriber';\nimport { rxSubscriber as rxSubscriberSymbol } from '../symbol/rxSubscriber';\nimport { empty as emptyObserver } from '../Observer';\nexport function toSubscriber(nextOrObserver, error, complete) {\n    if (nextOrObserver) {\n        if (nextOrObserver instanceof Subscriber) {\n            return nextOrObserver;\n        }\n        if (nextOrObserver[rxSubscriberSymbol]) {\n            return nextOrObserver[rxSubscriberSymbol]();\n        }\n    }\n    if (!nextOrObserver && !error && !complete) {\n        return new Subscriber(emptyObserver);\n    }\n    return new Subscriber(nextOrObserver, error, complete);\n}\n//# sourceMappingURL=toSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ObjectUnsubscribedErrorImpl = /*@__PURE__*/ (function () {\n    function ObjectUnsubscribedErrorImpl() {\n        Error.call(this);\n        this.message = 'object unsubscribed';\n        this.name = 'ObjectUnsubscribedError';\n        return this;\n    }\n    ObjectUnsubscribedErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ObjectUnsubscribedErrorImpl;\n})();\nexport var ObjectUnsubscribedError = ObjectUnsubscribedErrorImpl;\n//# sourceMappingURL=ObjectUnsubscribedError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from './Subscription';\nvar SubjectSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscription, _super);\n    function SubjectSubscription(subject, subscriber) {\n        var _this = _super.call(this) || this;\n        _this.subject = subject;\n        _this.subscriber = subscriber;\n        _this.closed = false;\n        return _this;\n    }\n    SubjectSubscription.prototype.unsubscribe = function () {\n        if (this.closed) {\n            return;\n        }\n        this.closed = true;\n        var subject = this.subject;\n        var observers = subject.observers;\n        this.subject = null;\n        if (!observers || observers.length === 0 || subject.isStopped || subject.closed) {\n            return;\n        }\n        var subscriberIndex = observers.indexOf(this.subscriber);\n        if (subscriberIndex !== -1) {\n            observers.splice(subscriberIndex, 1);\n        }\n    };\n    return SubjectSubscription;\n}(Subscription));\nexport { SubjectSubscription };\n//# sourceMappingURL=SubjectSubscription.js.map\n","/** PURE_IMPORTS_START tslib,_Observable,_Subscriber,_Subscription,_util_ObjectUnsubscribedError,_SubjectSubscription,_internal_symbol_rxSubscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Observable } from './Observable';\nimport { Subscriber } from './Subscriber';\nimport { Subscription } from './Subscription';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nimport { rxSubscriber as rxSubscriberSymbol } from '../internal/symbol/rxSubscriber';\nvar SubjectSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(SubjectSubscriber, _super);\n    function SubjectSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.destination = destination;\n        return _this;\n    }\n    return SubjectSubscriber;\n}(Subscriber));\nexport { SubjectSubscriber };\nvar Subject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Subject, _super);\n    function Subject() {\n        var _this = _super.call(this) || this;\n        _this.observers = [];\n        _this.closed = false;\n        _this.isStopped = false;\n        _this.hasError = false;\n        _this.thrownError = null;\n        return _this;\n    }\n    Subject.prototype[rxSubscriberSymbol] = function () {\n        return new SubjectSubscriber(this);\n    };\n    Subject.prototype.lift = function (operator) {\n        var subject = new AnonymousSubject(this, this);\n        subject.operator = operator;\n        return subject;\n    };\n    Subject.prototype.next = function (value) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        if (!this.isStopped) {\n            var observers = this.observers;\n            var len = observers.length;\n            var copy = observers.slice();\n            for (var i = 0; i < len; i++) {\n                copy[i].next(value);\n            }\n        }\n    };\n    Subject.prototype.error = function (err) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.hasError = true;\n        this.thrownError = err;\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].error(err);\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.complete = function () {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        this.isStopped = true;\n        var observers = this.observers;\n        var len = observers.length;\n        var copy = observers.slice();\n        for (var i = 0; i < len; i++) {\n            copy[i].complete();\n        }\n        this.observers.length = 0;\n    };\n    Subject.prototype.unsubscribe = function () {\n        this.isStopped = true;\n        this.closed = true;\n        this.observers = null;\n    };\n    Subject.prototype._trySubscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return _super.prototype._trySubscribe.call(this, subscriber);\n        }\n    };\n    Subject.prototype._subscribe = function (subscriber) {\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            return new SubjectSubscription(this, subscriber);\n        }\n    };\n    Subject.prototype.asObservable = function () {\n        var observable = new Observable();\n        observable.source = this;\n        return observable;\n    };\n    Subject.create = function (destination, source) {\n        return new AnonymousSubject(destination, source);\n    };\n    return Subject;\n}(Observable));\nexport { Subject };\nvar AnonymousSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnonymousSubject, _super);\n    function AnonymousSubject(destination, source) {\n        var _this = _super.call(this) || this;\n        _this.destination = destination;\n        _this.source = source;\n        return _this;\n    }\n    AnonymousSubject.prototype.next = function (value) {\n        var destination = this.destination;\n        if (destination && destination.next) {\n            destination.next(value);\n        }\n    };\n    AnonymousSubject.prototype.error = function (err) {\n        var destination = this.destination;\n        if (destination && destination.error) {\n            this.destination.error(err);\n        }\n    };\n    AnonymousSubject.prototype.complete = function () {\n        var destination = this.destination;\n        if (destination && destination.complete) {\n            this.destination.complete();\n        }\n    };\n    AnonymousSubject.prototype._subscribe = function (subscriber) {\n        var source = this.source;\n        if (source) {\n            return this.source.subscribe(subscriber);\n        }\n        else {\n            return Subscription.EMPTY;\n        }\n    };\n    return AnonymousSubject;\n}(Subject));\nexport { AnonymousSubject };\n//# sourceMappingURL=Subject.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function refCount() {\n    return function refCountOperatorFunction(source) {\n        return source.lift(new RefCountOperator(source));\n    };\n}\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=refCount.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Observable,_Subscriber,_Subscription,_operators_refCount PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { SubjectSubscriber } from '../Subject';\nimport { Observable } from '../Observable';\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { refCount as higherOrderRefCount } from '../operators/refCount';\nvar ConnectableObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableObservable, _super);\n    function ConnectableObservable(source, subjectFactory) {\n        var _this = _super.call(this) || this;\n        _this.source = source;\n        _this.subjectFactory = subjectFactory;\n        _this._refCount = 0;\n        _this._isComplete = false;\n        return _this;\n    }\n    ConnectableObservable.prototype._subscribe = function (subscriber) {\n        return this.getSubject().subscribe(subscriber);\n    };\n    ConnectableObservable.prototype.getSubject = function () {\n        var subject = this._subject;\n        if (!subject || subject.isStopped) {\n            this._subject = this.subjectFactory();\n        }\n        return this._subject;\n    };\n    ConnectableObservable.prototype.connect = function () {\n        var connection = this._connection;\n        if (!connection) {\n            this._isComplete = false;\n            connection = this._connection = new Subscription();\n            connection.add(this.source\n                .subscribe(new ConnectableSubscriber(this.getSubject(), this)));\n            if (connection.closed) {\n                this._connection = null;\n                connection = Subscription.EMPTY;\n            }\n        }\n        return connection;\n    };\n    ConnectableObservable.prototype.refCount = function () {\n        return higherOrderRefCount()(this);\n    };\n    return ConnectableObservable;\n}(Observable));\nexport { ConnectableObservable };\nexport var connectableObservableDescriptor = /*@__PURE__*/ (function () {\n    var connectableProto = ConnectableObservable.prototype;\n    return {\n        operator: { value: null },\n        _refCount: { value: 0, writable: true },\n        _subject: { value: null, writable: true },\n        _connection: { value: null, writable: true },\n        _subscribe: { value: connectableProto._subscribe },\n        _isComplete: { value: connectableProto._isComplete, writable: true },\n        getSubject: { value: connectableProto.getSubject },\n        connect: { value: connectableProto.connect },\n        refCount: { value: connectableProto.refCount }\n    };\n})();\nvar ConnectableSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ConnectableSubscriber, _super);\n    function ConnectableSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    ConnectableSubscriber.prototype._error = function (err) {\n        this._unsubscribe();\n        _super.prototype._error.call(this, err);\n    };\n    ConnectableSubscriber.prototype._complete = function () {\n        this.connectable._isComplete = true;\n        this._unsubscribe();\n        _super.prototype._complete.call(this);\n    };\n    ConnectableSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (connectable) {\n            this.connectable = null;\n            var connection = connectable._connection;\n            connectable._refCount = 0;\n            connectable._subject = null;\n            connectable._connection = null;\n            if (connection) {\n                connection.unsubscribe();\n            }\n        }\n    };\n    return ConnectableSubscriber;\n}(SubjectSubscriber));\nvar RefCountOperator = /*@__PURE__*/ (function () {\n    function RefCountOperator(connectable) {\n        this.connectable = connectable;\n    }\n    RefCountOperator.prototype.call = function (subscriber, source) {\n        var connectable = this.connectable;\n        connectable._refCount++;\n        var refCounter = new RefCountSubscriber(subscriber, connectable);\n        var subscription = source.subscribe(refCounter);\n        if (!refCounter.closed) {\n            refCounter.connection = connectable.connect();\n        }\n        return subscription;\n    };\n    return RefCountOperator;\n}());\nvar RefCountSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RefCountSubscriber, _super);\n    function RefCountSubscriber(destination, connectable) {\n        var _this = _super.call(this, destination) || this;\n        _this.connectable = connectable;\n        return _this;\n    }\n    RefCountSubscriber.prototype._unsubscribe = function () {\n        var connectable = this.connectable;\n        if (!connectable) {\n            this.connection = null;\n            return;\n        }\n        this.connectable = null;\n        var refCount = connectable._refCount;\n        if (refCount <= 0) {\n            this.connection = null;\n            return;\n        }\n        connectable._refCount = refCount - 1;\n        if (refCount > 1) {\n            this.connection = null;\n            return;\n        }\n        var connection = this.connection;\n        var sharedConnection = connectable._connection;\n        this.connection = null;\n        if (sharedConnection && (!connection || sharedConnection === connection)) {\n            sharedConnection.unsubscribe();\n        }\n    };\n    return RefCountSubscriber;\n}(Subscriber));\n//# sourceMappingURL=ConnectableObservable.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Subscription,_Observable,_Subject PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Subscription } from '../Subscription';\nimport { Observable } from '../Observable';\nimport { Subject } from '../Subject';\nexport function groupBy(keySelector, elementSelector, durationSelector, subjectSelector) {\n    return function (source) {\n        return source.lift(new GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector));\n    };\n}\nvar GroupByOperator = /*@__PURE__*/ (function () {\n    function GroupByOperator(keySelector, elementSelector, durationSelector, subjectSelector) {\n        this.keySelector = keySelector;\n        this.elementSelector = elementSelector;\n        this.durationSelector = durationSelector;\n        this.subjectSelector = subjectSelector;\n    }\n    GroupByOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new GroupBySubscriber(subscriber, this.keySelector, this.elementSelector, this.durationSelector, this.subjectSelector));\n    };\n    return GroupByOperator;\n}());\nvar GroupBySubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(GroupBySubscriber, _super);\n    function GroupBySubscriber(destination, keySelector, elementSelector, durationSelector, subjectSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.keySelector = keySelector;\n        _this.elementSelector = elementSelector;\n        _this.durationSelector = durationSelector;\n        _this.subjectSelector = subjectSelector;\n        _this.groups = null;\n        _this.attemptedToUnsubscribe = false;\n        _this.count = 0;\n        return _this;\n    }\n    GroupBySubscriber.prototype._next = function (value) {\n        var key;\n        try {\n            key = this.keySelector(value);\n        }\n        catch (err) {\n            this.error(err);\n            return;\n        }\n        this._group(value, key);\n    };\n    GroupBySubscriber.prototype._group = function (value, key) {\n        var groups = this.groups;\n        if (!groups) {\n            groups = this.groups = new Map();\n        }\n        var group = groups.get(key);\n        var element;\n        if (this.elementSelector) {\n            try {\n                element = this.elementSelector(value);\n            }\n            catch (err) {\n                this.error(err);\n            }\n        }\n        else {\n            element = value;\n        }\n        if (!group) {\n            group = (this.subjectSelector ? this.subjectSelector() : new Subject());\n            groups.set(key, group);\n            var groupedObservable = new GroupedObservable(key, group, this);\n            this.destination.next(groupedObservable);\n            if (this.durationSelector) {\n                var duration = void 0;\n                try {\n                    duration = this.durationSelector(new GroupedObservable(key, group));\n                }\n                catch (err) {\n                    this.error(err);\n                    return;\n                }\n                this.add(duration.subscribe(new GroupDurationSubscriber(key, group, this)));\n            }\n        }\n        if (!group.closed) {\n            group.next(element);\n        }\n    };\n    GroupBySubscriber.prototype._error = function (err) {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.error(err);\n            });\n            groups.clear();\n        }\n        this.destination.error(err);\n    };\n    GroupBySubscriber.prototype._complete = function () {\n        var groups = this.groups;\n        if (groups) {\n            groups.forEach(function (group, key) {\n                group.complete();\n            });\n            groups.clear();\n        }\n        this.destination.complete();\n    };\n    GroupBySubscriber.prototype.removeGroup = function (key) {\n        this.groups.delete(key);\n    };\n    GroupBySubscriber.prototype.unsubscribe = function () {\n        if (!this.closed) {\n            this.attemptedToUnsubscribe = true;\n            if (this.count === 0) {\n                _super.prototype.unsubscribe.call(this);\n            }\n        }\n    };\n    return GroupBySubscriber;\n}(Subscriber));\nvar GroupDurationSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(GroupDurationSubscriber, _super);\n    function GroupDurationSubscriber(key, group, parent) {\n        var _this = _super.call(this, group) || this;\n        _this.key = key;\n        _this.group = group;\n        _this.parent = parent;\n        return _this;\n    }\n    GroupDurationSubscriber.prototype._next = function (value) {\n        this.complete();\n    };\n    GroupDurationSubscriber.prototype._unsubscribe = function () {\n        var _a = this, parent = _a.parent, key = _a.key;\n        this.key = this.parent = null;\n        if (parent) {\n            parent.removeGroup(key);\n        }\n    };\n    return GroupDurationSubscriber;\n}(Subscriber));\nvar GroupedObservable = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(GroupedObservable, _super);\n    function GroupedObservable(key, groupSubject, refCountSubscription) {\n        var _this = _super.call(this) || this;\n        _this.key = key;\n        _this.groupSubject = groupSubject;\n        _this.refCountSubscription = refCountSubscription;\n        return _this;\n    }\n    GroupedObservable.prototype._subscribe = function (subscriber) {\n        var subscription = new Subscription();\n        var _a = this, refCountSubscription = _a.refCountSubscription, groupSubject = _a.groupSubject;\n        if (refCountSubscription && !refCountSubscription.closed) {\n            subscription.add(new InnerRefCountSubscription(refCountSubscription));\n        }\n        subscription.add(groupSubject.subscribe(subscriber));\n        return subscription;\n    };\n    return GroupedObservable;\n}(Observable));\nexport { GroupedObservable };\nvar InnerRefCountSubscription = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerRefCountSubscription, _super);\n    function InnerRefCountSubscription(parent) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        parent.count++;\n        return _this;\n    }\n    InnerRefCountSubscription.prototype.unsubscribe = function () {\n        var parent = this.parent;\n        if (!parent.closed && !this.closed) {\n            _super.prototype.unsubscribe.call(this);\n            parent.count -= 1;\n            if (parent.count === 0 && parent.attemptedToUnsubscribe) {\n                parent.unsubscribe();\n            }\n        }\n    };\n    return InnerRefCountSubscription;\n}(Subscription));\n//# sourceMappingURL=groupBy.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_util_ObjectUnsubscribedError PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nvar BehaviorSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(BehaviorSubject, _super);\n    function BehaviorSubject(_value) {\n        var _this = _super.call(this) || this;\n        _this._value = _value;\n        return _this;\n    }\n    Object.defineProperty(BehaviorSubject.prototype, \"value\", {\n        get: function () {\n            return this.getValue();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    BehaviorSubject.prototype._subscribe = function (subscriber) {\n        var subscription = _super.prototype._subscribe.call(this, subscriber);\n        if (subscription && !subscription.closed) {\n            subscriber.next(this._value);\n        }\n        return subscription;\n    };\n    BehaviorSubject.prototype.getValue = function () {\n        if (this.hasError) {\n            throw this.thrownError;\n        }\n        else if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else {\n            return this._value;\n        }\n    };\n    BehaviorSubject.prototype.next = function (value) {\n        _super.prototype.next.call(this, this._value = value);\n    };\n    return BehaviorSubject;\n}(Subject));\nexport { BehaviorSubject };\n//# sourceMappingURL=BehaviorSubject.js.map\n","/** PURE_IMPORTS_START tslib,_Action PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Action } from './Action';\nvar AsyncAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncAction, _super);\n    function AsyncAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.pending = false;\n        return _this;\n    }\n    AsyncAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (this.closed) {\n            return this;\n        }\n        this.state = state;\n        var id = this.id;\n        var scheduler = this.scheduler;\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, delay);\n        }\n        this.pending = true;\n        this.delay = delay;\n        this.id = this.id || this.requestAsyncId(scheduler, this.id, delay);\n        return this;\n    };\n    AsyncAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return setInterval(scheduler.flush.bind(scheduler, this), delay);\n    };\n    AsyncAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && this.delay === delay && this.pending === false) {\n            return id;\n        }\n        clearInterval(id);\n        return undefined;\n    };\n    AsyncAction.prototype.execute = function (state, delay) {\n        if (this.closed) {\n            return new Error('executing a cancelled action');\n        }\n        this.pending = false;\n        var error = this._execute(state, delay);\n        if (error) {\n            return error;\n        }\n        else if (this.pending === false && this.id != null) {\n            this.id = this.recycleAsyncId(this.scheduler, this.id, null);\n        }\n    };\n    AsyncAction.prototype._execute = function (state, delay) {\n        var errored = false;\n        var errorValue = undefined;\n        try {\n            this.work(state);\n        }\n        catch (e) {\n            errored = true;\n            errorValue = !!e && e || new Error(e);\n        }\n        if (errored) {\n            this.unsubscribe();\n            return errorValue;\n        }\n    };\n    AsyncAction.prototype._unsubscribe = function () {\n        var id = this.id;\n        var scheduler = this.scheduler;\n        var actions = scheduler.actions;\n        var index = actions.indexOf(this);\n        this.work = null;\n        this.state = null;\n        this.pending = false;\n        this.scheduler = null;\n        if (index !== -1) {\n            actions.splice(index, 1);\n        }\n        if (id != null) {\n            this.id = this.recycleAsyncId(scheduler, id, null);\n        }\n        this.delay = null;\n    };\n    return AsyncAction;\n}(Action));\nexport { AsyncAction };\n//# sourceMappingURL=AsyncAction.js.map\n","/** PURE_IMPORTS_START tslib,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscription } from '../Subscription';\nvar Action = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(Action, _super);\n    function Action(scheduler, work) {\n        return _super.call(this) || this;\n    }\n    Action.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return this;\n    };\n    return Action;\n}(Subscription));\nexport { Action };\n//# sourceMappingURL=Action.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar QueueAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueAction, _super);\n    function QueueAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    QueueAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay > 0) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.delay = delay;\n        this.state = state;\n        this.scheduler.flush(this);\n        return this;\n    };\n    QueueAction.prototype.execute = function (state, delay) {\n        return (delay > 0 || this.closed) ?\n            _super.prototype.execute.call(this, state, delay) :\n            this._execute(state, delay);\n    };\n    QueueAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        return scheduler.flush(this);\n    };\n    return QueueAction;\n}(AsyncAction));\nexport { QueueAction };\n//# sourceMappingURL=QueueAction.js.map\n","var Scheduler = /*@__PURE__*/ (function () {\n    function Scheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        this.SchedulerAction = SchedulerAction;\n        this.now = now;\n    }\n    Scheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return new this.SchedulerAction(this, work).schedule(state, delay);\n    };\n    Scheduler.now = function () { return Date.now(); };\n    return Scheduler;\n}());\nexport { Scheduler };\n//# sourceMappingURL=Scheduler.js.map\n","/** PURE_IMPORTS_START tslib,_Scheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Scheduler } from '../Scheduler';\nvar AsyncScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncScheduler, _super);\n    function AsyncScheduler(SchedulerAction, now) {\n        if (now === void 0) {\n            now = Scheduler.now;\n        }\n        var _this = _super.call(this, SchedulerAction, function () {\n            if (AsyncScheduler.delegate && AsyncScheduler.delegate !== _this) {\n                return AsyncScheduler.delegate.now();\n            }\n            else {\n                return now();\n            }\n        }) || this;\n        _this.actions = [];\n        _this.active = false;\n        _this.scheduled = undefined;\n        return _this;\n    }\n    AsyncScheduler.prototype.schedule = function (work, delay, state) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (AsyncScheduler.delegate && AsyncScheduler.delegate !== this) {\n            return AsyncScheduler.delegate.schedule(work, delay, state);\n        }\n        else {\n            return _super.prototype.schedule.call(this, work, delay, state);\n        }\n    };\n    AsyncScheduler.prototype.flush = function (action) {\n        var actions = this.actions;\n        if (this.active) {\n            actions.push(action);\n            return;\n        }\n        var error;\n        this.active = true;\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (action = actions.shift());\n        this.active = false;\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsyncScheduler;\n}(Scheduler));\nexport { AsyncScheduler };\n//# sourceMappingURL=AsyncScheduler.js.map\n","/** PURE_IMPORTS_START _QueueAction,_QueueScheduler PURE_IMPORTS_END */\nimport { QueueAction } from './QueueAction';\nimport { QueueScheduler } from './QueueScheduler';\nexport var queue = /*@__PURE__*/ new QueueScheduler(QueueAction);\n//# sourceMappingURL=queue.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar QueueScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(QueueScheduler, _super);\n    function QueueScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return QueueScheduler;\n}(AsyncScheduler));\nexport { QueueScheduler };\n//# sourceMappingURL=QueueScheduler.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport var EMPTY = /*@__PURE__*/ new Observable(function (subscriber) { return subscriber.complete(); });\nexport function empty(scheduler) {\n    return scheduler ? emptyScheduled(scheduler) : EMPTY;\n}\nfunction emptyScheduled(scheduler) {\n    return new Observable(function (subscriber) { return scheduler.schedule(function () { return subscriber.complete(); }); });\n}\n//# sourceMappingURL=empty.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isScheduler(value) {\n    return value && typeof value.schedule === 'function';\n}\n//# sourceMappingURL=isScheduler.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var subscribeToArray = function (array) {\n    return function (subscriber) {\n        for (var i = 0, len = array.length; i < len && !subscriber.closed; i++) {\n            subscriber.next(array[i]);\n        }\n        subscriber.complete();\n    };\n};\n//# sourceMappingURL=subscribeToArray.js.map\n","/** PURE_IMPORTS_START _observable_empty,_observable_of,_observable_throwError PURE_IMPORTS_END */\nimport { empty } from './observable/empty';\nimport { of } from './observable/of';\nimport { throwError } from './observable/throwError';\nexport var NotificationKind;\n/*@__PURE__*/ (function (NotificationKind) {\n    NotificationKind[\"NEXT\"] = \"N\";\n    NotificationKind[\"ERROR\"] = \"E\";\n    NotificationKind[\"COMPLETE\"] = \"C\";\n})(NotificationKind || (NotificationKind = {}));\nvar Notification = /*@__PURE__*/ (function () {\n    function Notification(kind, value, error) {\n        this.kind = kind;\n        this.value = value;\n        this.error = error;\n        this.hasValue = kind === 'N';\n    }\n    Notification.prototype.observe = function (observer) {\n        switch (this.kind) {\n            case 'N':\n                return observer.next && observer.next(this.value);\n            case 'E':\n                return observer.error && observer.error(this.error);\n            case 'C':\n                return observer.complete && observer.complete();\n        }\n    };\n    Notification.prototype.do = function (next, error, complete) {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return next && next(this.value);\n            case 'E':\n                return error && error(this.error);\n            case 'C':\n                return complete && complete();\n        }\n    };\n    Notification.prototype.accept = function (nextOrObserver, error, complete) {\n        if (nextOrObserver && typeof nextOrObserver.next === 'function') {\n            return this.observe(nextOrObserver);\n        }\n        else {\n            return this.do(nextOrObserver, error, complete);\n        }\n    };\n    Notification.prototype.toObservable = function () {\n        var kind = this.kind;\n        switch (kind) {\n            case 'N':\n                return of(this.value);\n            case 'E':\n                return throwError(this.error);\n            case 'C':\n                return empty();\n        }\n        throw new Error('unexpected notification kind value');\n    };\n    Notification.createNext = function (value) {\n        if (typeof value !== 'undefined') {\n            return new Notification('N', value);\n        }\n        return Notification.undefinedValueNotification;\n    };\n    Notification.createError = function (err) {\n        return new Notification('E', undefined, err);\n    };\n    Notification.createComplete = function () {\n        return Notification.completeNotification;\n    };\n    Notification.completeNotification = new Notification('C');\n    Notification.undefinedValueNotification = new Notification('N', undefined);\n    return Notification;\n}());\nexport { Notification };\n//# sourceMappingURL=Notification.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function scheduleArray(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var i = 0;\n        sub.add(scheduler.schedule(function () {\n            if (i === input.length) {\n                subscriber.complete();\n                return;\n            }\n            subscriber.next(input[i++]);\n            if (!subscriber.closed) {\n                sub.add(this.schedule());\n            }\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleArray.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeToArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeToArray } from '../util/subscribeToArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function fromArray(input, scheduler) {\n    if (!scheduler) {\n        return new Observable(subscribeToArray(input));\n    }\n    else {\n        return scheduleArray(input, scheduler);\n    }\n}\n//# sourceMappingURL=fromArray.js.map\n","/** PURE_IMPORTS_START _util_isScheduler,_fromArray,_scheduled_scheduleArray PURE_IMPORTS_END */\nimport { isScheduler } from '../util/isScheduler';\nimport { fromArray } from './fromArray';\nimport { scheduleArray } from '../scheduled/scheduleArray';\nexport function of() {\n    var args = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        args[_i] = arguments[_i];\n    }\n    var scheduler = args[args.length - 1];\n    if (isScheduler(scheduler)) {\n        args.pop();\n        return scheduleArray(args, scheduler);\n    }\n    else {\n        return fromArray(args);\n    }\n}\n//# sourceMappingURL=of.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function throwError(error, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) { return subscriber.error(error); });\n    }\n    else {\n        return new Observable(function (subscriber) { return scheduler.schedule(dispatch, 0, { error: error, subscriber: subscriber }); });\n    }\n}\nfunction dispatch(_a) {\n    var error = _a.error, subscriber = _a.subscriber;\n    subscriber.error(error);\n}\n//# sourceMappingURL=throwError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber,_Notification PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nimport { Notification } from '../Notification';\nexport function observeOn(scheduler, delay) {\n    if (delay === void 0) {\n        delay = 0;\n    }\n    return function observeOnOperatorFunction(source) {\n        return source.lift(new ObserveOnOperator(scheduler, delay));\n    };\n}\nvar ObserveOnOperator = /*@__PURE__*/ (function () {\n    function ObserveOnOperator(scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.scheduler = scheduler;\n        this.delay = delay;\n    }\n    ObserveOnOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ObserveOnSubscriber(subscriber, this.scheduler, this.delay));\n    };\n    return ObserveOnOperator;\n}());\nexport { ObserveOnOperator };\nvar ObserveOnSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ObserveOnSubscriber, _super);\n    function ObserveOnSubscriber(destination, scheduler, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.scheduler = scheduler;\n        _this.delay = delay;\n        return _this;\n    }\n    ObserveOnSubscriber.dispatch = function (arg) {\n        var notification = arg.notification, destination = arg.destination;\n        notification.observe(destination);\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype.scheduleMessage = function (notification) {\n        var destination = this.destination;\n        destination.add(this.scheduler.schedule(ObserveOnSubscriber.dispatch, this.delay, new ObserveOnMessage(notification, this.destination)));\n    };\n    ObserveOnSubscriber.prototype._next = function (value) {\n        this.scheduleMessage(Notification.createNext(value));\n    };\n    ObserveOnSubscriber.prototype._error = function (err) {\n        this.scheduleMessage(Notification.createError(err));\n        this.unsubscribe();\n    };\n    ObserveOnSubscriber.prototype._complete = function () {\n        this.scheduleMessage(Notification.createComplete());\n        this.unsubscribe();\n    };\n    return ObserveOnSubscriber;\n}(Subscriber));\nexport { ObserveOnSubscriber };\nvar ObserveOnMessage = /*@__PURE__*/ (function () {\n    function ObserveOnMessage(notification, destination) {\n        this.notification = notification;\n        this.destination = destination;\n    }\n    return ObserveOnMessage;\n}());\nexport { ObserveOnMessage };\n//# sourceMappingURL=observeOn.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_scheduler_queue,_Subscription,_operators_observeOn,_util_ObjectUnsubscribedError,_SubjectSubscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { queue } from './scheduler/queue';\nimport { Subscription } from './Subscription';\nimport { ObserveOnSubscriber } from './operators/observeOn';\nimport { ObjectUnsubscribedError } from './util/ObjectUnsubscribedError';\nimport { SubjectSubscription } from './SubjectSubscription';\nvar ReplaySubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ReplaySubject, _super);\n    function ReplaySubject(bufferSize, windowTime, scheduler) {\n        if (bufferSize === void 0) {\n            bufferSize = Number.POSITIVE_INFINITY;\n        }\n        if (windowTime === void 0) {\n            windowTime = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this) || this;\n        _this.scheduler = scheduler;\n        _this._events = [];\n        _this._infiniteTimeWindow = false;\n        _this._bufferSize = bufferSize < 1 ? 1 : bufferSize;\n        _this._windowTime = windowTime < 1 ? 1 : windowTime;\n        if (windowTime === Number.POSITIVE_INFINITY) {\n            _this._infiniteTimeWindow = true;\n            _this.next = _this.nextInfiniteTimeWindow;\n        }\n        else {\n            _this.next = _this.nextTimeWindow;\n        }\n        return _this;\n    }\n    ReplaySubject.prototype.nextInfiniteTimeWindow = function (value) {\n        var _events = this._events;\n        _events.push(value);\n        if (_events.length > this._bufferSize) {\n            _events.shift();\n        }\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype.nextTimeWindow = function (value) {\n        this._events.push(new ReplayEvent(this._getNow(), value));\n        this._trimBufferThenGetEvents();\n        _super.prototype.next.call(this, value);\n    };\n    ReplaySubject.prototype._subscribe = function (subscriber) {\n        var _infiniteTimeWindow = this._infiniteTimeWindow;\n        var _events = _infiniteTimeWindow ? this._events : this._trimBufferThenGetEvents();\n        var scheduler = this.scheduler;\n        var len = _events.length;\n        var subscription;\n        if (this.closed) {\n            throw new ObjectUnsubscribedError();\n        }\n        else if (this.isStopped || this.hasError) {\n            subscription = Subscription.EMPTY;\n        }\n        else {\n            this.observers.push(subscriber);\n            subscription = new SubjectSubscription(this, subscriber);\n        }\n        if (scheduler) {\n            subscriber.add(subscriber = new ObserveOnSubscriber(subscriber, scheduler));\n        }\n        if (_infiniteTimeWindow) {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i]);\n            }\n        }\n        else {\n            for (var i = 0; i < len && !subscriber.closed; i++) {\n                subscriber.next(_events[i].value);\n            }\n        }\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n        }\n        else if (this.isStopped) {\n            subscriber.complete();\n        }\n        return subscription;\n    };\n    ReplaySubject.prototype._getNow = function () {\n        return (this.scheduler || queue).now();\n    };\n    ReplaySubject.prototype._trimBufferThenGetEvents = function () {\n        var now = this._getNow();\n        var _bufferSize = this._bufferSize;\n        var _windowTime = this._windowTime;\n        var _events = this._events;\n        var eventsCount = _events.length;\n        var spliceCount = 0;\n        while (spliceCount < eventsCount) {\n            if ((now - _events[spliceCount].time) < _windowTime) {\n                break;\n            }\n            spliceCount++;\n        }\n        if (eventsCount > _bufferSize) {\n            spliceCount = Math.max(spliceCount, eventsCount - _bufferSize);\n        }\n        if (spliceCount > 0) {\n            _events.splice(0, spliceCount);\n        }\n        return _events;\n    };\n    return ReplaySubject;\n}(Subject));\nexport { ReplaySubject };\nvar ReplayEvent = /*@__PURE__*/ (function () {\n    function ReplayEvent(time, value) {\n        this.time = time;\n        this.value = value;\n    }\n    return ReplayEvent;\n}());\n//# sourceMappingURL=ReplaySubject.js.map\n","/** PURE_IMPORTS_START tslib,_Subject,_Subscription PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subject } from './Subject';\nimport { Subscription } from './Subscription';\nvar AsyncSubject = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsyncSubject, _super);\n    function AsyncSubject() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.value = null;\n        _this.hasNext = false;\n        _this.hasCompleted = false;\n        return _this;\n    }\n    AsyncSubject.prototype._subscribe = function (subscriber) {\n        if (this.hasError) {\n            subscriber.error(this.thrownError);\n            return Subscription.EMPTY;\n        }\n        else if (this.hasCompleted && this.hasNext) {\n            subscriber.next(this.value);\n            subscriber.complete();\n            return Subscription.EMPTY;\n        }\n        return _super.prototype._subscribe.call(this, subscriber);\n    };\n    AsyncSubject.prototype.next = function (value) {\n        if (!this.hasCompleted) {\n            this.value = value;\n            this.hasNext = true;\n        }\n    };\n    AsyncSubject.prototype.error = function (error) {\n        if (!this.hasCompleted) {\n            _super.prototype.error.call(this, error);\n        }\n    };\n    AsyncSubject.prototype.complete = function () {\n        this.hasCompleted = true;\n        if (this.hasNext) {\n            _super.prototype.next.call(this, this.value);\n        }\n        _super.prototype.complete.call(this);\n    };\n    return AsyncSubject;\n}(Subject));\nexport { AsyncSubject };\n//# sourceMappingURL=AsyncSubject.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar nextHandle = 1;\nvar RESOLVED = /*@__PURE__*/ (function () { return /*@__PURE__*/ Promise.resolve(); })();\nvar activeHandles = {};\nfunction findAndClearHandle(handle) {\n    if (handle in activeHandles) {\n        delete activeHandles[handle];\n        return true;\n    }\n    return false;\n}\nexport var Immediate = {\n    setImmediate: function (cb) {\n        var handle = nextHandle++;\n        activeHandles[handle] = true;\n        RESOLVED.then(function () { return findAndClearHandle(handle) && cb(); });\n        return handle;\n    },\n    clearImmediate: function (handle) {\n        findAndClearHandle(handle);\n    },\n};\nexport var TestTools = {\n    pending: function () {\n        return Object.keys(activeHandles).length;\n    }\n};\n//# sourceMappingURL=Immediate.js.map\n","/** PURE_IMPORTS_START tslib,_util_Immediate,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Immediate } from '../util/Immediate';\nimport { AsyncAction } from './AsyncAction';\nvar AsapAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsapAction, _super);\n    function AsapAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AsapAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler.scheduled || (scheduler.scheduled = Immediate.setImmediate(scheduler.flush.bind(scheduler, null)));\n    };\n    AsapAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        if (scheduler.actions.length === 0) {\n            Immediate.clearImmediate(id);\n            scheduler.scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AsapAction;\n}(AsyncAction));\nexport { AsapAction };\n//# sourceMappingURL=AsapAction.js.map\n","/** PURE_IMPORTS_START _AsapAction,_AsapScheduler PURE_IMPORTS_END */\nimport { AsapAction } from './AsapAction';\nimport { AsapScheduler } from './AsapScheduler';\nexport var asap = /*@__PURE__*/ new AsapScheduler(AsapAction);\n//# sourceMappingURL=asap.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AsapScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AsapScheduler, _super);\n    function AsapScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AsapScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AsapScheduler;\n}(AsyncScheduler));\nexport { AsapScheduler };\n//# sourceMappingURL=AsapScheduler.js.map\n","/** PURE_IMPORTS_START _AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nexport var async = /*@__PURE__*/ new AsyncScheduler(AsyncAction);\n//# sourceMappingURL=async.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nvar AnimationFrameAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnimationFrameAction, _super);\n    function AnimationFrameAction(scheduler, work) {\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        return _this;\n    }\n    AnimationFrameAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (delay !== null && delay > 0) {\n            return _super.prototype.requestAsyncId.call(this, scheduler, id, delay);\n        }\n        scheduler.actions.push(this);\n        return scheduler.scheduled || (scheduler.scheduled = requestAnimationFrame(function () { return scheduler.flush(null); }));\n    };\n    AnimationFrameAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if ((delay !== null && delay > 0) || (delay === null && this.delay > 0)) {\n            return _super.prototype.recycleAsyncId.call(this, scheduler, id, delay);\n        }\n        if (scheduler.actions.length === 0) {\n            cancelAnimationFrame(id);\n            scheduler.scheduled = undefined;\n        }\n        return undefined;\n    };\n    return AnimationFrameAction;\n}(AsyncAction));\nexport { AnimationFrameAction };\n//# sourceMappingURL=AnimationFrameAction.js.map\n","/** PURE_IMPORTS_START _AnimationFrameAction,_AnimationFrameScheduler PURE_IMPORTS_END */\nimport { AnimationFrameAction } from './AnimationFrameAction';\nimport { AnimationFrameScheduler } from './AnimationFrameScheduler';\nexport var animationFrame = /*@__PURE__*/ new AnimationFrameScheduler(AnimationFrameAction);\n//# sourceMappingURL=animationFrame.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncScheduler } from './AsyncScheduler';\nvar AnimationFrameScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(AnimationFrameScheduler, _super);\n    function AnimationFrameScheduler() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    AnimationFrameScheduler.prototype.flush = function (action) {\n        this.active = true;\n        this.scheduled = undefined;\n        var actions = this.actions;\n        var error;\n        var index = -1;\n        var count = actions.length;\n        action = action || actions.shift();\n        do {\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        } while (++index < count && (action = actions.shift()));\n        this.active = false;\n        if (error) {\n            while (++index < count && (action = actions.shift())) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    return AnimationFrameScheduler;\n}(AsyncScheduler));\nexport { AnimationFrameScheduler };\n//# sourceMappingURL=AnimationFrameScheduler.js.map\n","/** PURE_IMPORTS_START tslib,_AsyncAction,_AsyncScheduler PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { AsyncAction } from './AsyncAction';\nimport { AsyncScheduler } from './AsyncScheduler';\nvar VirtualTimeScheduler = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(VirtualTimeScheduler, _super);\n    function VirtualTimeScheduler(SchedulerAction, maxFrames) {\n        if (SchedulerAction === void 0) {\n            SchedulerAction = VirtualAction;\n        }\n        if (maxFrames === void 0) {\n            maxFrames = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, SchedulerAction, function () { return _this.frame; }) || this;\n        _this.maxFrames = maxFrames;\n        _this.frame = 0;\n        _this.index = -1;\n        return _this;\n    }\n    VirtualTimeScheduler.prototype.flush = function () {\n        var _a = this, actions = _a.actions, maxFrames = _a.maxFrames;\n        var error, action;\n        while ((action = actions[0]) && action.delay <= maxFrames) {\n            actions.shift();\n            this.frame = action.delay;\n            if (error = action.execute(action.state, action.delay)) {\n                break;\n            }\n        }\n        if (error) {\n            while (action = actions.shift()) {\n                action.unsubscribe();\n            }\n            throw error;\n        }\n    };\n    VirtualTimeScheduler.frameTimeFactor = 10;\n    return VirtualTimeScheduler;\n}(AsyncScheduler));\nexport { VirtualTimeScheduler };\nvar VirtualAction = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(VirtualAction, _super);\n    function VirtualAction(scheduler, work, index) {\n        if (index === void 0) {\n            index = scheduler.index += 1;\n        }\n        var _this = _super.call(this, scheduler, work) || this;\n        _this.scheduler = scheduler;\n        _this.work = work;\n        _this.index = index;\n        _this.active = true;\n        _this.index = scheduler.index = index;\n        return _this;\n    }\n    VirtualAction.prototype.schedule = function (state, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        if (!this.id) {\n            return _super.prototype.schedule.call(this, state, delay);\n        }\n        this.active = false;\n        var action = new VirtualAction(this.scheduler, this.work);\n        this.add(action);\n        return action.schedule(state, delay);\n    };\n    VirtualAction.prototype.requestAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        this.delay = scheduler.frame + delay;\n        var actions = scheduler.actions;\n        actions.push(this);\n        actions.sort(VirtualAction.sortActions);\n        return true;\n    };\n    VirtualAction.prototype.recycleAsyncId = function (scheduler, id, delay) {\n        if (delay === void 0) {\n            delay = 0;\n        }\n        return undefined;\n    };\n    VirtualAction.prototype._execute = function (state, delay) {\n        if (this.active === true) {\n            return _super.prototype._execute.call(this, state, delay);\n        }\n    };\n    VirtualAction.sortActions = function (a, b) {\n        if (a.delay === b.delay) {\n            if (a.index === b.index) {\n                return 0;\n            }\n            else if (a.index > b.index) {\n                return 1;\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (a.delay > b.delay) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    };\n    return VirtualAction;\n}(AsyncAction));\nexport { VirtualAction };\n//# sourceMappingURL=VirtualTimeScheduler.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function identity(x) {\n    return x;\n}\n//# sourceMappingURL=identity.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function isObservable(obj) {\n    return !!obj && (obj instanceof Observable || (typeof obj.lift === 'function' && typeof obj.subscribe === 'function'));\n}\n//# sourceMappingURL=isObservable.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar ArgumentOutOfRangeErrorImpl = /*@__PURE__*/ (function () {\n    function ArgumentOutOfRangeErrorImpl() {\n        Error.call(this);\n        this.message = 'argument out of range';\n        this.name = 'ArgumentOutOfRangeError';\n        return this;\n    }\n    ArgumentOutOfRangeErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return ArgumentOutOfRangeErrorImpl;\n})();\nexport var ArgumentOutOfRangeError = ArgumentOutOfRangeErrorImpl;\n//# sourceMappingURL=ArgumentOutOfRangeError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar EmptyErrorImpl = /*@__PURE__*/ (function () {\n    function EmptyErrorImpl() {\n        Error.call(this);\n        this.message = 'no elements in sequence';\n        this.name = 'EmptyError';\n        return this;\n    }\n    EmptyErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return EmptyErrorImpl;\n})();\nexport var EmptyError = EmptyErrorImpl;\n//# sourceMappingURL=EmptyError.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nvar TimeoutErrorImpl = /*@__PURE__*/ (function () {\n    function TimeoutErrorImpl() {\n        Error.call(this);\n        this.message = 'Timeout has occurred';\n        this.name = 'TimeoutError';\n        return this;\n    }\n    TimeoutErrorImpl.prototype = /*@__PURE__*/ Object.create(Error.prototype);\n    return TimeoutErrorImpl;\n})();\nexport var TimeoutError = TimeoutErrorImpl;\n//# sourceMappingURL=TimeoutError.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function map(project, thisArg) {\n    return function mapOperation(source) {\n        if (typeof project !== 'function') {\n            throw new TypeError('argument is not a function. Are you looking for `mapTo()`?');\n        }\n        return source.lift(new MapOperator(project, thisArg));\n    };\n}\nvar MapOperator = /*@__PURE__*/ (function () {\n    function MapOperator(project, thisArg) {\n        this.project = project;\n        this.thisArg = thisArg;\n    }\n    MapOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new MapSubscriber(subscriber, this.project, this.thisArg));\n    };\n    return MapOperator;\n}());\nexport { MapOperator };\nvar MapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MapSubscriber, _super);\n    function MapSubscriber(destination, project, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.count = 0;\n        _this.thisArg = thisArg || _this;\n        return _this;\n    }\n    MapSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.project.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return MapSubscriber;\n}(Subscriber));\n//# sourceMappingURL=map.js.map\n","/** PURE_IMPORTS_START _Observable,_AsyncSubject,_operators_map,_util_canReportError,_util_isArray,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { map } from '../operators/map';\nimport { canReportError } from '../util/canReportError';\nimport { isArray } from '../util/isArray';\nimport { isScheduler } from '../util/isScheduler';\nexport function bindCallback(callbackFunc, resultSelector, scheduler) {\n    if (resultSelector) {\n        if (isScheduler(resultSelector)) {\n            scheduler = resultSelector;\n        }\n        else {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return bindCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n            };\n        }\n    }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var context = this;\n        var subject;\n        var params = {\n            context: context,\n            subject: subject,\n            callbackFunc: callbackFunc,\n            scheduler: scheduler,\n        };\n        return new Observable(function (subscriber) {\n            if (!scheduler) {\n                if (!subject) {\n                    subject = new AsyncSubject();\n                    var handler = function () {\n                        var innerArgs = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            innerArgs[_i] = arguments[_i];\n                        }\n                        subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n                        subject.complete();\n                    };\n                    try {\n                        callbackFunc.apply(context, args.concat([handler]));\n                    }\n                    catch (err) {\n                        if (canReportError(subject)) {\n                            subject.error(err);\n                        }\n                        else {\n                            console.warn(err);\n                        }\n                    }\n                }\n                return subject.subscribe(subscriber);\n            }\n            else {\n                var state = {\n                    args: args, subscriber: subscriber, params: params,\n                };\n                return scheduler.schedule(dispatch, 0, state);\n            }\n        });\n    };\n}\nfunction dispatch(state) {\n    var _this = this;\n    var self = this;\n    var args = state.args, subscriber = state.subscriber, params = state.params;\n    var callbackFunc = params.callbackFunc, context = params.context, scheduler = params.scheduler;\n    var subject = params.subject;\n    if (!subject) {\n        subject = params.subject = new AsyncSubject();\n        var handler = function () {\n            var innerArgs = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                innerArgs[_i] = arguments[_i];\n            }\n            var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n            _this.add(scheduler.schedule(dispatchNext, 0, { value: value, subject: subject }));\n        };\n        try {\n            callbackFunc.apply(context, args.concat([handler]));\n        }\n        catch (err) {\n            subject.error(err);\n        }\n    }\n    this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext(state) {\n    var value = state.value, subject = state.subject;\n    subject.next(value);\n    subject.complete();\n}\nfunction dispatchError(state) {\n    var err = state.err, subject = state.subject;\n    subject.error(err);\n}\n//# sourceMappingURL=bindCallback.js.map\n","/** PURE_IMPORTS_START _Observable,_AsyncSubject,_operators_map,_util_canReportError,_util_isScheduler,_util_isArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { AsyncSubject } from '../AsyncSubject';\nimport { map } from '../operators/map';\nimport { canReportError } from '../util/canReportError';\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nexport function bindNodeCallback(callbackFunc, resultSelector, scheduler) {\n    if (resultSelector) {\n        if (isScheduler(resultSelector)) {\n            scheduler = resultSelector;\n        }\n        else {\n            return function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                return bindNodeCallback(callbackFunc, scheduler).apply(void 0, args).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n            };\n        }\n    }\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var params = {\n            subject: undefined,\n            args: args,\n            callbackFunc: callbackFunc,\n            scheduler: scheduler,\n            context: this,\n        };\n        return new Observable(function (subscriber) {\n            var context = params.context;\n            var subject = params.subject;\n            if (!scheduler) {\n                if (!subject) {\n                    subject = params.subject = new AsyncSubject();\n                    var handler = function () {\n                        var innerArgs = [];\n                        for (var _i = 0; _i < arguments.length; _i++) {\n                            innerArgs[_i] = arguments[_i];\n                        }\n                        var err = innerArgs.shift();\n                        if (err) {\n                            subject.error(err);\n                            return;\n                        }\n                        subject.next(innerArgs.length <= 1 ? innerArgs[0] : innerArgs);\n                        subject.complete();\n                    };\n                    try {\n                        callbackFunc.apply(context, args.concat([handler]));\n                    }\n                    catch (err) {\n                        if (canReportError(subject)) {\n                            subject.error(err);\n                        }\n                        else {\n                            console.warn(err);\n                        }\n                    }\n                }\n                return subject.subscribe(subscriber);\n            }\n            else {\n                return scheduler.schedule(dispatch, 0, { params: params, subscriber: subscriber, context: context });\n            }\n        });\n    };\n}\nfunction dispatch(state) {\n    var _this = this;\n    var params = state.params, subscriber = state.subscriber, context = state.context;\n    var callbackFunc = params.callbackFunc, args = params.args, scheduler = params.scheduler;\n    var subject = params.subject;\n    if (!subject) {\n        subject = params.subject = new AsyncSubject();\n        var handler = function () {\n            var innerArgs = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                innerArgs[_i] = arguments[_i];\n            }\n            var err = innerArgs.shift();\n            if (err) {\n                _this.add(scheduler.schedule(dispatchError, 0, { err: err, subject: subject }));\n            }\n            else {\n                var value = innerArgs.length <= 1 ? innerArgs[0] : innerArgs;\n                _this.add(scheduler.schedule(dispatchNext, 0, { value: value, subject: subject }));\n            }\n        };\n        try {\n            callbackFunc.apply(context, args.concat([handler]));\n        }\n        catch (err) {\n            this.add(scheduler.schedule(dispatchError, 0, { err: err, subject: subject }));\n        }\n    }\n    this.add(subject.subscribe(subscriber));\n}\nfunction dispatchNext(arg) {\n    var value = arg.value, subject = arg.subject;\n    subject.next(value);\n    subject.complete();\n}\nfunction dispatchError(arg) {\n    var err = arg.err, subject = arg.subject;\n    subject.error(err);\n}\n//# sourceMappingURL=bindNodeCallback.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar OuterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(OuterSubscriber, _super);\n    function OuterSubscriber() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    OuterSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    OuterSubscriber.prototype.notifyError = function (error, innerSub) {\n        this.destination.error(error);\n    };\n    OuterSubscriber.prototype.notifyComplete = function (innerSub) {\n        this.destination.complete();\n    };\n    return OuterSubscriber;\n}(Subscriber));\nexport { OuterSubscriber };\n//# sourceMappingURL=OuterSubscriber.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from './Subscriber';\nvar InnerSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(InnerSubscriber, _super);\n    function InnerSubscriber(parent, outerValue, outerIndex) {\n        var _this = _super.call(this) || this;\n        _this.parent = parent;\n        _this.outerValue = outerValue;\n        _this.outerIndex = outerIndex;\n        _this.index = 0;\n        return _this;\n    }\n    InnerSubscriber.prototype._next = function (value) {\n        this.parent.notifyNext(this.outerValue, value, this.outerIndex, this.index++, this);\n    };\n    InnerSubscriber.prototype._error = function (error) {\n        this.parent.notifyError(error, this);\n        this.unsubscribe();\n    };\n    InnerSubscriber.prototype._complete = function () {\n        this.parent.notifyComplete(this);\n        this.unsubscribe();\n    };\n    return InnerSubscriber;\n}(Subscriber));\nexport { InnerSubscriber };\n//# sourceMappingURL=InnerSubscriber.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function getSymbolIterator() {\n    if (typeof Symbol !== 'function' || !Symbol.iterator) {\n        return '@@iterator';\n    }\n    return Symbol.iterator;\n}\nexport var iterator = /*@__PURE__*/ getSymbolIterator();\nexport var $$iterator = iterator;\n//# sourceMappingURL=iterator.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport var isArrayLike = (function (x) { return x && typeof x.length === 'number' && typeof x !== 'function'; });\n//# sourceMappingURL=isArrayLike.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function isPromise(value) {\n    return !!value && typeof value.subscribe !== 'function' && typeof value.then === 'function';\n}\n//# sourceMappingURL=isPromise.js.map\n","/** PURE_IMPORTS_START _subscribeToArray,_subscribeToPromise,_subscribeToIterable,_subscribeToObservable,_isArrayLike,_isPromise,_isObject,_symbol_iterator,_symbol_observable PURE_IMPORTS_END */\nimport { subscribeToArray } from './subscribeToArray';\nimport { subscribeToPromise } from './subscribeToPromise';\nimport { subscribeToIterable } from './subscribeToIterable';\nimport { subscribeToObservable } from './subscribeToObservable';\nimport { isArrayLike } from './isArrayLike';\nimport { isPromise } from './isPromise';\nimport { isObject } from './isObject';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeTo = function (result) {\n    if (!!result && typeof result[Symbol_observable] === 'function') {\n        return subscribeToObservable(result);\n    }\n    else if (isArrayLike(result)) {\n        return subscribeToArray(result);\n    }\n    else if (isPromise(result)) {\n        return subscribeToPromise(result);\n    }\n    else if (!!result && typeof result[Symbol_iterator] === 'function') {\n        return subscribeToIterable(result);\n    }\n    else {\n        var value = isObject(result) ? 'an invalid object' : \"'\" + result + \"'\";\n        var msg = \"You provided \" + value + \" where a stream was expected.\"\n            + ' You can provide an Observable, Promise, Array, or Iterable.';\n        throw new TypeError(msg);\n    }\n};\n//# sourceMappingURL=subscribeTo.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport var subscribeToObservable = function (obj) {\n    return function (subscriber) {\n        var obs = obj[Symbol_observable]();\n        if (typeof obs.subscribe !== 'function') {\n            throw new TypeError('Provided object does not correctly implement Symbol.observable');\n        }\n        else {\n            return obs.subscribe(subscriber);\n        }\n    };\n};\n//# sourceMappingURL=subscribeToObservable.js.map\n","/** PURE_IMPORTS_START _hostReportError PURE_IMPORTS_END */\nimport { hostReportError } from './hostReportError';\nexport var subscribeToPromise = function (promise) {\n    return function (subscriber) {\n        promise.then(function (value) {\n            if (!subscriber.closed) {\n                subscriber.next(value);\n                subscriber.complete();\n            }\n        }, function (err) { return subscriber.error(err); })\n            .then(null, hostReportError);\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToPromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport var subscribeToIterable = function (iterable) {\n    return function (subscriber) {\n        var iterator = iterable[Symbol_iterator]();\n        do {\n            var item = iterator.next();\n            if (item.done) {\n                subscriber.complete();\n                break;\n            }\n            subscriber.next(item.value);\n            if (subscriber.closed) {\n                break;\n            }\n        } while (true);\n        if (typeof iterator.return === 'function') {\n            subscriber.add(function () {\n                if (iterator.return) {\n                    iterator.return();\n                }\n            });\n        }\n        return subscriber;\n    };\n};\n//# sourceMappingURL=subscribeToIterable.js.map\n","/** PURE_IMPORTS_START _InnerSubscriber,_subscribeTo,_Observable PURE_IMPORTS_END */\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { subscribeTo } from './subscribeTo';\nimport { Observable } from '../Observable';\nexport function subscribeToResult(outerSubscriber, result, outerValue, outerIndex, innerSubscriber) {\n    if (innerSubscriber === void 0) {\n        innerSubscriber = new InnerSubscriber(outerSubscriber, outerValue, outerIndex);\n    }\n    if (innerSubscriber.closed) {\n        return undefined;\n    }\n    if (result instanceof Observable) {\n        return result.subscribe(innerSubscriber);\n    }\n    return subscribeTo(result)(innerSubscriber);\n}\n//# sourceMappingURL=subscribeToResult.js.map\n","/** PURE_IMPORTS_START tslib,_util_isScheduler,_util_isArray,_OuterSubscriber,_util_subscribeToResult,_fromArray PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isScheduler } from '../util/isScheduler';\nimport { isArray } from '../util/isArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { fromArray } from './fromArray';\nvar NONE = {};\nexport function combineLatest() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = null;\n    var scheduler = null;\n    if (isScheduler(observables[observables.length - 1])) {\n        scheduler = observables.pop();\n    }\n    if (typeof observables[observables.length - 1] === 'function') {\n        resultSelector = observables.pop();\n    }\n    if (observables.length === 1 && isArray(observables[0])) {\n        observables = observables[0];\n    }\n    return fromArray(observables, scheduler).lift(new CombineLatestOperator(resultSelector));\n}\nvar CombineLatestOperator = /*@__PURE__*/ (function () {\n    function CombineLatestOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    CombineLatestOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new CombineLatestSubscriber(subscriber, this.resultSelector));\n    };\n    return CombineLatestOperator;\n}());\nexport { CombineLatestOperator };\nvar CombineLatestSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(CombineLatestSubscriber, _super);\n    function CombineLatestSubscriber(destination, resultSelector) {\n        var _this = _super.call(this, destination) || this;\n        _this.resultSelector = resultSelector;\n        _this.active = 0;\n        _this.values = [];\n        _this.observables = [];\n        return _this;\n    }\n    CombineLatestSubscriber.prototype._next = function (observable) {\n        this.values.push(NONE);\n        this.observables.push(observable);\n    };\n    CombineLatestSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            this.active = len;\n            this.toRespond = len;\n            for (var i = 0; i < len; i++) {\n                var observable = observables[i];\n                this.add(subscribeToResult(this, observable, observable, i));\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyComplete = function (unused) {\n        if ((this.active -= 1) === 0) {\n            this.destination.complete();\n        }\n    };\n    CombineLatestSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        var values = this.values;\n        var oldVal = values[outerIndex];\n        var toRespond = !this.toRespond\n            ? 0\n            : oldVal === NONE ? --this.toRespond : this.toRespond;\n        values[outerIndex] = innerValue;\n        if (toRespond === 0) {\n            if (this.resultSelector) {\n                this._tryResultSelector(values);\n            }\n            else {\n                this.destination.next(values.slice());\n            }\n        }\n    };\n    CombineLatestSubscriber.prototype._tryResultSelector = function (values) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, values);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return CombineLatestSubscriber;\n}(OuterSubscriber));\nexport { CombineLatestSubscriber };\n//# sourceMappingURL=combineLatest.js.map\n","/** PURE_IMPORTS_START _scheduleObservable,_schedulePromise,_scheduleArray,_scheduleIterable,_util_isInteropObservable,_util_isPromise,_util_isArrayLike,_util_isIterable PURE_IMPORTS_END */\nimport { scheduleObservable } from './scheduleObservable';\nimport { schedulePromise } from './schedulePromise';\nimport { scheduleArray } from './scheduleArray';\nimport { scheduleIterable } from './scheduleIterable';\nimport { isInteropObservable } from '../util/isInteropObservable';\nimport { isPromise } from '../util/isPromise';\nimport { isArrayLike } from '../util/isArrayLike';\nimport { isIterable } from '../util/isIterable';\nexport function scheduled(input, scheduler) {\n    if (input != null) {\n        if (isInteropObservable(input)) {\n            return scheduleObservable(input, scheduler);\n        }\n        else if (isPromise(input)) {\n            return schedulePromise(input, scheduler);\n        }\n        else if (isArrayLike(input)) {\n            return scheduleArray(input, scheduler);\n        }\n        else if (isIterable(input) || typeof input === 'string') {\n            return scheduleIterable(input, scheduler);\n        }\n    }\n    throw new TypeError((input !== null && typeof input || input) + ' is not observable');\n}\n//# sourceMappingURL=scheduled.js.map\n","/** PURE_IMPORTS_START _symbol_observable PURE_IMPORTS_END */\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function isInteropObservable(input) {\n    return input && typeof input[Symbol_observable] === 'function';\n}\n//# sourceMappingURL=isInteropObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { observable as Symbol_observable } from '../symbol/observable';\nexport function scheduleObservable(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            var observable = input[Symbol_observable]();\n            sub.add(observable.subscribe({\n                next: function (value) { sub.add(scheduler.schedule(function () { return subscriber.next(value); })); },\n                error: function (err) { sub.add(scheduler.schedule(function () { return subscriber.error(err); })); },\n                complete: function () { sub.add(scheduler.schedule(function () { return subscriber.complete(); })); },\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleObservable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function schedulePromise(input, scheduler) {\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        sub.add(scheduler.schedule(function () {\n            return input.then(function (value) {\n                sub.add(scheduler.schedule(function () {\n                    subscriber.next(value);\n                    sub.add(scheduler.schedule(function () { return subscriber.complete(); }));\n                }));\n            }, function (err) {\n                sub.add(scheduler.schedule(function () { return subscriber.error(err); }));\n            });\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=schedulePromise.js.map\n","/** PURE_IMPORTS_START _symbol_iterator PURE_IMPORTS_END */\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function isIterable(input) {\n    return input && typeof input[Symbol_iterator] === 'function';\n}\n//# sourceMappingURL=isIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription,_symbol_iterator PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nimport { iterator as Symbol_iterator } from '../symbol/iterator';\nexport function scheduleIterable(input, scheduler) {\n    if (!input) {\n        throw new Error('Iterable cannot be null');\n    }\n    return new Observable(function (subscriber) {\n        var sub = new Subscription();\n        var iterator;\n        sub.add(function () {\n            if (iterator && typeof iterator.return === 'function') {\n                iterator.return();\n            }\n        });\n        sub.add(scheduler.schedule(function () {\n            iterator = input[Symbol_iterator]();\n            sub.add(scheduler.schedule(function () {\n                if (subscriber.closed) {\n                    return;\n                }\n                var value;\n                var done;\n                try {\n                    var result = iterator.next();\n                    value = result.value;\n                    done = result.done;\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return;\n                }\n                if (done) {\n                    subscriber.complete();\n                }\n                else {\n                    subscriber.next(value);\n                    this.schedule();\n                }\n            }));\n        }));\n        return sub;\n    });\n}\n//# sourceMappingURL=scheduleIterable.js.map\n","/** PURE_IMPORTS_START _Observable,_util_subscribeTo,_scheduled_scheduled PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { scheduled } from '../scheduled/scheduled';\nexport function from(input, scheduler) {\n    if (!scheduler) {\n        if (input instanceof Observable) {\n            return input;\n        }\n        return new Observable(subscribeTo(input));\n    }\n    else {\n        return scheduled(input, scheduler);\n    }\n}\n//# sourceMappingURL=from.js.map\n","/** PURE_IMPORTS_START tslib,_util_subscribeToResult,_OuterSubscriber,_InnerSubscriber,_map,_observable_from PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { InnerSubscriber } from '../InnerSubscriber';\nimport { map } from './map';\nimport { from } from '../observable/from';\nexport function mergeMap(project, resultSelector, concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    if (typeof resultSelector === 'function') {\n        return function (source) { return source.pipe(mergeMap(function (a, i) { return from(project(a, i)).pipe(map(function (b, ii) { return resultSelector(a, b, i, ii); })); }, concurrent)); };\n    }\n    else if (typeof resultSelector === 'number') {\n        concurrent = resultSelector;\n    }\n    return function (source) { return source.lift(new MergeMapOperator(project, concurrent)); };\n}\nvar MergeMapOperator = /*@__PURE__*/ (function () {\n    function MergeMapOperator(project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        this.project = project;\n        this.concurrent = concurrent;\n    }\n    MergeMapOperator.prototype.call = function (observer, source) {\n        return source.subscribe(new MergeMapSubscriber(observer, this.project, this.concurrent));\n    };\n    return MergeMapOperator;\n}());\nexport { MergeMapOperator };\nvar MergeMapSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(MergeMapSubscriber, _super);\n    function MergeMapSubscriber(destination, project, concurrent) {\n        if (concurrent === void 0) {\n            concurrent = Number.POSITIVE_INFINITY;\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.project = project;\n        _this.concurrent = concurrent;\n        _this.hasCompleted = false;\n        _this.buffer = [];\n        _this.active = 0;\n        _this.index = 0;\n        return _this;\n    }\n    MergeMapSubscriber.prototype._next = function (value) {\n        if (this.active < this.concurrent) {\n            this._tryNext(value);\n        }\n        else {\n            this.buffer.push(value);\n        }\n    };\n    MergeMapSubscriber.prototype._tryNext = function (value) {\n        var result;\n        var index = this.index++;\n        try {\n            result = this.project(value, index);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.active++;\n        this._innerSub(result, value, index);\n    };\n    MergeMapSubscriber.prototype._innerSub = function (ish, value, index) {\n        var innerSubscriber = new InnerSubscriber(this, value, index);\n        var destination = this.destination;\n        destination.add(innerSubscriber);\n        var innerSubscription = subscribeToResult(this, ish, undefined, undefined, innerSubscriber);\n        if (innerSubscription !== innerSubscriber) {\n            destination.add(innerSubscription);\n        }\n    };\n    MergeMapSubscriber.prototype._complete = function () {\n        this.hasCompleted = true;\n        if (this.active === 0 && this.buffer.length === 0) {\n            this.destination.complete();\n        }\n        this.unsubscribe();\n    };\n    MergeMapSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.destination.next(innerValue);\n    };\n    MergeMapSubscriber.prototype.notifyComplete = function (innerSub) {\n        var buffer = this.buffer;\n        this.remove(innerSub);\n        this.active--;\n        if (buffer.length > 0) {\n            this._next(buffer.shift());\n        }\n        else if (this.active === 0 && this.hasCompleted) {\n            this.destination.complete();\n        }\n    };\n    return MergeMapSubscriber;\n}(OuterSubscriber));\nexport { MergeMapSubscriber };\n//# sourceMappingURL=mergeMap.js.map\n","/** PURE_IMPORTS_START _mergeMap,_util_identity PURE_IMPORTS_END */\nimport { mergeMap } from './mergeMap';\nimport { identity } from '../util/identity';\nexport function mergeAll(concurrent) {\n    if (concurrent === void 0) {\n        concurrent = Number.POSITIVE_INFINITY;\n    }\n    return mergeMap(identity, concurrent);\n}\n//# sourceMappingURL=mergeAll.js.map\n","/** PURE_IMPORTS_START _mergeAll PURE_IMPORTS_END */\nimport { mergeAll } from './mergeAll';\nexport function concatAll() {\n    return mergeAll(1);\n}\n//# sourceMappingURL=concatAll.js.map\n","/** PURE_IMPORTS_START _of,_operators_concatAll PURE_IMPORTS_END */\nimport { of } from './of';\nimport { concatAll } from '../operators/concatAll';\nexport function concat() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    return concatAll()(of.apply(void 0, observables));\n}\n//# sourceMappingURL=concat.js.map\n","/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { from } from './from';\nimport { empty } from './empty';\nexport function defer(observableFactory) {\n    return new Observable(function (subscriber) {\n        var input;\n        try {\n            input = observableFactory();\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        var source = input ? from(input) : empty();\n        return source.subscribe(subscriber);\n    });\n}\n//# sourceMappingURL=defer.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_operators_map,_util_isObject,_from PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { map } from '../operators/map';\nimport { isObject } from '../util/isObject';\nimport { from } from './from';\nexport function forkJoin() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    if (sources.length === 1) {\n        var first_1 = sources[0];\n        if (isArray(first_1)) {\n            return forkJoinInternal(first_1, null);\n        }\n        if (isObject(first_1) && Object.getPrototypeOf(first_1) === Object.prototype) {\n            var keys = Object.keys(first_1);\n            return forkJoinInternal(keys.map(function (key) { return first_1[key]; }), keys);\n        }\n    }\n    if (typeof sources[sources.length - 1] === 'function') {\n        var resultSelector_1 = sources.pop();\n        sources = (sources.length === 1 && isArray(sources[0])) ? sources[0] : sources;\n        return forkJoinInternal(sources, null).pipe(map(function (args) { return resultSelector_1.apply(void 0, args); }));\n    }\n    return forkJoinInternal(sources, null);\n}\nfunction forkJoinInternal(sources, keys) {\n    return new Observable(function (subscriber) {\n        var len = sources.length;\n        if (len === 0) {\n            subscriber.complete();\n            return;\n        }\n        var values = new Array(len);\n        var completed = 0;\n        var emitted = 0;\n        var _loop_1 = function (i) {\n            var source = from(sources[i]);\n            var hasValue = false;\n            subscriber.add(source.subscribe({\n                next: function (value) {\n                    if (!hasValue) {\n                        hasValue = true;\n                        emitted++;\n                    }\n                    values[i] = value;\n                },\n                error: function (err) { return subscriber.error(err); },\n                complete: function () {\n                    completed++;\n                    if (completed === len || !hasValue) {\n                        if (emitted === len) {\n                            subscriber.next(keys ?\n                                keys.reduce(function (result, key, i) { return (result[key] = values[i], result); }, {}) :\n                                values);\n                        }\n                        subscriber.complete();\n                    }\n                }\n            }));\n        };\n        for (var i = 0; i < len; i++) {\n            _loop_1(i);\n        }\n    });\n}\n//# sourceMappingURL=forkJoin.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nvar toString = /*@__PURE__*/ (function () { return Object.prototype.toString; })();\nexport function fromEvent(target, eventName, options, resultSelector) {\n    if (isFunction(options)) {\n        resultSelector = options;\n        options = undefined;\n    }\n    if (resultSelector) {\n        return fromEvent(target, eventName, options).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        function handler(e) {\n            if (arguments.length > 1) {\n                subscriber.next(Array.prototype.slice.call(arguments));\n            }\n            else {\n                subscriber.next(e);\n            }\n        }\n        setupSubscription(target, eventName, handler, subscriber, options);\n    });\n}\nfunction setupSubscription(sourceObj, eventName, handler, subscriber, options) {\n    var unsubscribe;\n    if (isEventTarget(sourceObj)) {\n        var source_1 = sourceObj;\n        sourceObj.addEventListener(eventName, handler, options);\n        unsubscribe = function () { return source_1.removeEventListener(eventName, handler, options); };\n    }\n    else if (isJQueryStyleEventEmitter(sourceObj)) {\n        var source_2 = sourceObj;\n        sourceObj.on(eventName, handler);\n        unsubscribe = function () { return source_2.off(eventName, handler); };\n    }\n    else if (isNodeStyleEventEmitter(sourceObj)) {\n        var source_3 = sourceObj;\n        sourceObj.addListener(eventName, handler);\n        unsubscribe = function () { return source_3.removeListener(eventName, handler); };\n    }\n    else if (sourceObj && sourceObj.length) {\n        for (var i = 0, len = sourceObj.length; i < len; i++) {\n            setupSubscription(sourceObj[i], eventName, handler, subscriber, options);\n        }\n    }\n    else {\n        throw new TypeError('Invalid event target');\n    }\n    subscriber.add(unsubscribe);\n}\nfunction isNodeStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.addListener === 'function' && typeof sourceObj.removeListener === 'function';\n}\nfunction isJQueryStyleEventEmitter(sourceObj) {\n    return sourceObj && typeof sourceObj.on === 'function' && typeof sourceObj.off === 'function';\n}\nfunction isEventTarget(sourceObj) {\n    return sourceObj && typeof sourceObj.addEventListener === 'function' && typeof sourceObj.removeEventListener === 'function';\n}\n//# sourceMappingURL=fromEvent.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isArray,_util_isFunction,_operators_map PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isArray } from '../util/isArray';\nimport { isFunction } from '../util/isFunction';\nimport { map } from '../operators/map';\nexport function fromEventPattern(addHandler, removeHandler, resultSelector) {\n    if (resultSelector) {\n        return fromEventPattern(addHandler, removeHandler).pipe(map(function (args) { return isArray(args) ? resultSelector.apply(void 0, args) : resultSelector(args); }));\n    }\n    return new Observable(function (subscriber) {\n        var handler = function () {\n            var e = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                e[_i] = arguments[_i];\n            }\n            return subscriber.next(e.length === 1 ? e[0] : e);\n        };\n        var retValue;\n        try {\n            retValue = addHandler(handler);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        if (!isFunction(removeHandler)) {\n            return undefined;\n        }\n        return function () { return removeHandler(handler, retValue); };\n    });\n}\n//# sourceMappingURL=fromEventPattern.js.map\n","/** PURE_IMPORTS_START _Observable,_util_identity,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { identity } from '../util/identity';\nimport { isScheduler } from '../util/isScheduler';\nexport function generate(initialStateOrOptions, condition, iterate, resultSelectorOrObservable, scheduler) {\n    var resultSelector;\n    var initialState;\n    if (arguments.length == 1) {\n        var options = initialStateOrOptions;\n        initialState = options.initialState;\n        condition = options.condition;\n        iterate = options.iterate;\n        resultSelector = options.resultSelector || identity;\n        scheduler = options.scheduler;\n    }\n    else if (resultSelectorOrObservable === undefined || isScheduler(resultSelectorOrObservable)) {\n        initialState = initialStateOrOptions;\n        resultSelector = identity;\n        scheduler = resultSelectorOrObservable;\n    }\n    else {\n        initialState = initialStateOrOptions;\n        resultSelector = resultSelectorOrObservable;\n    }\n    return new Observable(function (subscriber) {\n        var state = initialState;\n        if (scheduler) {\n            return scheduler.schedule(dispatch, 0, {\n                subscriber: subscriber,\n                iterate: iterate,\n                condition: condition,\n                resultSelector: resultSelector,\n                state: state\n            });\n        }\n        do {\n            if (condition) {\n                var conditionResult = void 0;\n                try {\n                    conditionResult = condition(state);\n                }\n                catch (err) {\n                    subscriber.error(err);\n                    return undefined;\n                }\n                if (!conditionResult) {\n                    subscriber.complete();\n                    break;\n                }\n            }\n            var value = void 0;\n            try {\n                value = resultSelector(state);\n            }\n            catch (err) {\n                subscriber.error(err);\n                return undefined;\n            }\n            subscriber.next(value);\n            if (subscriber.closed) {\n                break;\n            }\n            try {\n                state = iterate(state);\n            }\n            catch (err) {\n                subscriber.error(err);\n                return undefined;\n            }\n        } while (true);\n        return undefined;\n    });\n}\nfunction dispatch(state) {\n    var subscriber = state.subscriber, condition = state.condition;\n    if (subscriber.closed) {\n        return undefined;\n    }\n    if (state.needIterate) {\n        try {\n            state.state = state.iterate(state.state);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n    }\n    else {\n        state.needIterate = true;\n    }\n    if (condition) {\n        var conditionResult = void 0;\n        try {\n            conditionResult = condition(state.state);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        if (!conditionResult) {\n            subscriber.complete();\n            return undefined;\n        }\n        if (subscriber.closed) {\n            return undefined;\n        }\n    }\n    var value;\n    try {\n        value = state.resultSelector(state.state);\n    }\n    catch (err) {\n        subscriber.error(err);\n        return undefined;\n    }\n    if (subscriber.closed) {\n        return undefined;\n    }\n    subscriber.next(value);\n    if (subscriber.closed) {\n        return undefined;\n    }\n    return this.schedule(state);\n}\n//# sourceMappingURL=generate.js.map\n","/** PURE_IMPORTS_START _defer,_empty PURE_IMPORTS_END */\nimport { defer } from './defer';\nimport { EMPTY } from './empty';\nexport function iif(condition, trueResult, falseResult) {\n    if (trueResult === void 0) {\n        trueResult = EMPTY;\n    }\n    if (falseResult === void 0) {\n        falseResult = EMPTY;\n    }\n    return defer(function () { return condition() ? trueResult : falseResult; });\n}\n//# sourceMappingURL=iif.js.map\n","/** PURE_IMPORTS_START _isArray PURE_IMPORTS_END */\nimport { isArray } from './isArray';\nexport function isNumeric(val) {\n    return !isArray(val) && (val - parseFloat(val) + 1) >= 0;\n}\n//# sourceMappingURL=isNumeric.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nexport function interval(period, scheduler) {\n    if (period === void 0) {\n        period = 0;\n    }\n    if (scheduler === void 0) {\n        scheduler = async;\n    }\n    if (!isNumeric(period) || period < 0) {\n        period = 0;\n    }\n    if (!scheduler || typeof scheduler.schedule !== 'function') {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        subscriber.add(scheduler.schedule(dispatch, period, { subscriber: subscriber, counter: 0, period: period }));\n        return subscriber;\n    });\n}\nfunction dispatch(state) {\n    var subscriber = state.subscriber, counter = state.counter, period = state.period;\n    subscriber.next(counter);\n    this.schedule({ subscriber: subscriber, counter: counter + 1, period: period }, period);\n}\n//# sourceMappingURL=interval.js.map\n","/** PURE_IMPORTS_START _Observable,_util_isScheduler,_operators_mergeAll,_fromArray PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { isScheduler } from '../util/isScheduler';\nimport { mergeAll } from '../operators/mergeAll';\nimport { fromArray } from './fromArray';\nexport function merge() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var concurrent = Number.POSITIVE_INFINITY;\n    var scheduler = null;\n    var last = observables[observables.length - 1];\n    if (isScheduler(last)) {\n        scheduler = observables.pop();\n        if (observables.length > 1 && typeof observables[observables.length - 1] === 'number') {\n            concurrent = observables.pop();\n        }\n    }\n    else if (typeof last === 'number') {\n        concurrent = observables.pop();\n    }\n    if (scheduler === null && observables.length === 1 && observables[0] instanceof Observable) {\n        return observables[0];\n    }\n    return mergeAll(concurrent)(fromArray(observables, scheduler));\n}\n//# sourceMappingURL=merge.js.map\n","/** PURE_IMPORTS_START _Observable,_util_noop PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { noop } from '../util/noop';\nexport var NEVER = /*@__PURE__*/ new Observable(noop);\nexport function never() {\n    return NEVER;\n}\n//# sourceMappingURL=never.js.map\n","/** PURE_IMPORTS_START _Observable,_from,_util_isArray,_empty PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { from } from './from';\nimport { isArray } from '../util/isArray';\nimport { EMPTY } from './empty';\nexport function onErrorResumeNext() {\n    var sources = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        sources[_i] = arguments[_i];\n    }\n    if (sources.length === 0) {\n        return EMPTY;\n    }\n    var first = sources[0], remainder = sources.slice(1);\n    if (sources.length === 1 && isArray(first)) {\n        return onErrorResumeNext.apply(void 0, first);\n    }\n    return new Observable(function (subscriber) {\n        var subNext = function () { return subscriber.add(onErrorResumeNext.apply(void 0, remainder).subscribe(subscriber)); };\n        return from(first).subscribe({\n            next: function (value) { subscriber.next(value); },\n            error: subNext,\n            complete: subNext,\n        });\n    });\n}\n//# sourceMappingURL=onErrorResumeNext.js.map\n","/** PURE_IMPORTS_START _Observable,_Subscription PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { Subscription } from '../Subscription';\nexport function pairs(obj, scheduler) {\n    if (!scheduler) {\n        return new Observable(function (subscriber) {\n            var keys = Object.keys(obj);\n            for (var i = 0; i < keys.length && !subscriber.closed; i++) {\n                var key = keys[i];\n                if (obj.hasOwnProperty(key)) {\n                    subscriber.next([key, obj[key]]);\n                }\n            }\n            subscriber.complete();\n        });\n    }\n    else {\n        return new Observable(function (subscriber) {\n            var keys = Object.keys(obj);\n            var subscription = new Subscription();\n            subscription.add(scheduler.schedule(dispatch, 0, { keys: keys, index: 0, subscriber: subscriber, subscription: subscription, obj: obj }));\n            return subscription;\n        });\n    }\n}\nexport function dispatch(state) {\n    var keys = state.keys, index = state.index, subscriber = state.subscriber, subscription = state.subscription, obj = state.obj;\n    if (!subscriber.closed) {\n        if (index < keys.length) {\n            var key = keys[index];\n            subscriber.next([key, obj[key]]);\n            subscription.add(this.schedule({ keys: keys, index: index + 1, subscriber: subscriber, subscription: subscription, obj: obj }));\n        }\n        else {\n            subscriber.complete();\n        }\n    }\n}\n//# sourceMappingURL=pairs.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport function not(pred, thisArg) {\n    function notPred() {\n        return !(notPred.pred.apply(notPred.thisArg, arguments));\n    }\n    notPred.pred = pred;\n    notPred.thisArg = thisArg;\n    return notPred;\n}\n//# sourceMappingURL=not.js.map\n","/** PURE_IMPORTS_START tslib,_Subscriber PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { Subscriber } from '../Subscriber';\nexport function filter(predicate, thisArg) {\n    return function filterOperatorFunction(source) {\n        return source.lift(new FilterOperator(predicate, thisArg));\n    };\n}\nvar FilterOperator = /*@__PURE__*/ (function () {\n    function FilterOperator(predicate, thisArg) {\n        this.predicate = predicate;\n        this.thisArg = thisArg;\n    }\n    FilterOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new FilterSubscriber(subscriber, this.predicate, this.thisArg));\n    };\n    return FilterOperator;\n}());\nvar FilterSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(FilterSubscriber, _super);\n    function FilterSubscriber(destination, predicate, thisArg) {\n        var _this = _super.call(this, destination) || this;\n        _this.predicate = predicate;\n        _this.thisArg = thisArg;\n        _this.count = 0;\n        return _this;\n    }\n    FilterSubscriber.prototype._next = function (value) {\n        var result;\n        try {\n            result = this.predicate.call(this.thisArg, value, this.count++);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        if (result) {\n            this.destination.next(value);\n        }\n    };\n    return FilterSubscriber;\n}(Subscriber));\n//# sourceMappingURL=filter.js.map\n","/** PURE_IMPORTS_START _util_not,_util_subscribeTo,_operators_filter,_Observable PURE_IMPORTS_END */\nimport { not } from '../util/not';\nimport { subscribeTo } from '../util/subscribeTo';\nimport { filter } from '../operators/filter';\nimport { Observable } from '../Observable';\nexport function partition(source, predicate, thisArg) {\n    return [\n        filter(predicate, thisArg)(new Observable(subscribeTo(source))),\n        filter(not(predicate, thisArg))(new Observable(subscribeTo(source)))\n    ];\n}\n//# sourceMappingURL=partition.js.map\n","/** PURE_IMPORTS_START tslib,_util_isArray,_fromArray,_OuterSubscriber,_util_subscribeToResult PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { isArray } from '../util/isArray';\nimport { fromArray } from './fromArray';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nexport function race() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    if (observables.length === 1) {\n        if (isArray(observables[0])) {\n            observables = observables[0];\n        }\n        else {\n            return observables[0];\n        }\n    }\n    return fromArray(observables, undefined).lift(new RaceOperator());\n}\nvar RaceOperator = /*@__PURE__*/ (function () {\n    function RaceOperator() {\n    }\n    RaceOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new RaceSubscriber(subscriber));\n    };\n    return RaceOperator;\n}());\nexport { RaceOperator };\nvar RaceSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(RaceSubscriber, _super);\n    function RaceSubscriber(destination) {\n        var _this = _super.call(this, destination) || this;\n        _this.hasFirst = false;\n        _this.observables = [];\n        _this.subscriptions = [];\n        return _this;\n    }\n    RaceSubscriber.prototype._next = function (observable) {\n        this.observables.push(observable);\n    };\n    RaceSubscriber.prototype._complete = function () {\n        var observables = this.observables;\n        var len = observables.length;\n        if (len === 0) {\n            this.destination.complete();\n        }\n        else {\n            for (var i = 0; i < len && !this.hasFirst; i++) {\n                var observable = observables[i];\n                var subscription = subscribeToResult(this, observable, observable, i);\n                if (this.subscriptions) {\n                    this.subscriptions.push(subscription);\n                }\n                this.add(subscription);\n            }\n            this.observables = null;\n        }\n    };\n    RaceSubscriber.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        if (!this.hasFirst) {\n            this.hasFirst = true;\n            for (var i = 0; i < this.subscriptions.length; i++) {\n                if (i !== outerIndex) {\n                    var subscription = this.subscriptions[i];\n                    subscription.unsubscribe();\n                    this.remove(subscription);\n                }\n            }\n            this.subscriptions = null;\n        }\n        this.destination.next(innerValue);\n    };\n    return RaceSubscriber;\n}(OuterSubscriber));\nexport { RaceSubscriber };\n//# sourceMappingURL=race.js.map\n","/** PURE_IMPORTS_START _Observable PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nexport function range(start, count, scheduler) {\n    if (start === void 0) {\n        start = 0;\n    }\n    return new Observable(function (subscriber) {\n        if (count === undefined) {\n            count = start;\n            start = 0;\n        }\n        var index = 0;\n        var current = start;\n        if (scheduler) {\n            return scheduler.schedule(dispatch, 0, {\n                index: index, count: count, start: start, subscriber: subscriber\n            });\n        }\n        else {\n            do {\n                if (index++ >= count) {\n                    subscriber.complete();\n                    break;\n                }\n                subscriber.next(current++);\n                if (subscriber.closed) {\n                    break;\n                }\n            } while (true);\n        }\n        return undefined;\n    });\n}\nexport function dispatch(state) {\n    var start = state.start, index = state.index, count = state.count, subscriber = state.subscriber;\n    if (index >= count) {\n        subscriber.complete();\n        return;\n    }\n    subscriber.next(start);\n    if (subscriber.closed) {\n        return;\n    }\n    state.index = index + 1;\n    state.start = start + 1;\n    this.schedule(state);\n}\n//# sourceMappingURL=range.js.map\n","/** PURE_IMPORTS_START _Observable,_scheduler_async,_util_isNumeric,_util_isScheduler PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { async } from '../scheduler/async';\nimport { isNumeric } from '../util/isNumeric';\nimport { isScheduler } from '../util/isScheduler';\nexport function timer(dueTime, periodOrScheduler, scheduler) {\n    if (dueTime === void 0) {\n        dueTime = 0;\n    }\n    var period = -1;\n    if (isNumeric(periodOrScheduler)) {\n        period = Number(periodOrScheduler) < 1 && 1 || Number(periodOrScheduler);\n    }\n    else if (isScheduler(periodOrScheduler)) {\n        scheduler = periodOrScheduler;\n    }\n    if (!isScheduler(scheduler)) {\n        scheduler = async;\n    }\n    return new Observable(function (subscriber) {\n        var due = isNumeric(dueTime)\n            ? dueTime\n            : (+dueTime - scheduler.now());\n        return scheduler.schedule(dispatch, due, {\n            index: 0, period: period, subscriber: subscriber\n        });\n    });\n}\nfunction dispatch(state) {\n    var index = state.index, period = state.period, subscriber = state.subscriber;\n    subscriber.next(index);\n    if (subscriber.closed) {\n        return;\n    }\n    else if (period === -1) {\n        return subscriber.complete();\n    }\n    state.index = index + 1;\n    this.schedule(state, period);\n}\n//# sourceMappingURL=timer.js.map\n","/** PURE_IMPORTS_START _Observable,_from,_empty PURE_IMPORTS_END */\nimport { Observable } from '../Observable';\nimport { from } from './from';\nimport { EMPTY } from './empty';\nexport function using(resourceFactory, observableFactory) {\n    return new Observable(function (subscriber) {\n        var resource;\n        try {\n            resource = resourceFactory();\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        var result;\n        try {\n            result = observableFactory(resource);\n        }\n        catch (err) {\n            subscriber.error(err);\n            return undefined;\n        }\n        var source = result ? from(result) : EMPTY;\n        var subscription = source.subscribe(subscriber);\n        return function () {\n            subscription.unsubscribe();\n            if (resource) {\n                resource.unsubscribe();\n            }\n        };\n    });\n}\n//# sourceMappingURL=using.js.map\n","/** PURE_IMPORTS_START tslib,_fromArray,_util_isArray,_Subscriber,_OuterSubscriber,_util_subscribeToResult,_.._internal_symbol_iterator PURE_IMPORTS_END */\nimport * as tslib_1 from \"tslib\";\nimport { fromArray } from './fromArray';\nimport { isArray } from '../util/isArray';\nimport { Subscriber } from '../Subscriber';\nimport { OuterSubscriber } from '../OuterSubscriber';\nimport { subscribeToResult } from '../util/subscribeToResult';\nimport { iterator as Symbol_iterator } from '../../internal/symbol/iterator';\nexport function zip() {\n    var observables = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        observables[_i] = arguments[_i];\n    }\n    var resultSelector = observables[observables.length - 1];\n    if (typeof resultSelector === 'function') {\n        observables.pop();\n    }\n    return fromArray(observables, undefined).lift(new ZipOperator(resultSelector));\n}\nvar ZipOperator = /*@__PURE__*/ (function () {\n    function ZipOperator(resultSelector) {\n        this.resultSelector = resultSelector;\n    }\n    ZipOperator.prototype.call = function (subscriber, source) {\n        return source.subscribe(new ZipSubscriber(subscriber, this.resultSelector));\n    };\n    return ZipOperator;\n}());\nexport { ZipOperator };\nvar ZipSubscriber = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ZipSubscriber, _super);\n    function ZipSubscriber(destination, resultSelector, values) {\n        if (values === void 0) {\n            values = Object.create(null);\n        }\n        var _this = _super.call(this, destination) || this;\n        _this.iterators = [];\n        _this.active = 0;\n        _this.resultSelector = (typeof resultSelector === 'function') ? resultSelector : null;\n        _this.values = values;\n        return _this;\n    }\n    ZipSubscriber.prototype._next = function (value) {\n        var iterators = this.iterators;\n        if (isArray(value)) {\n            iterators.push(new StaticArrayIterator(value));\n        }\n        else if (typeof value[Symbol_iterator] === 'function') {\n            iterators.push(new StaticIterator(value[Symbol_iterator]()));\n        }\n        else {\n            iterators.push(new ZipBufferIterator(this.destination, this, value));\n        }\n    };\n    ZipSubscriber.prototype._complete = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        this.unsubscribe();\n        if (len === 0) {\n            this.destination.complete();\n            return;\n        }\n        this.active = len;\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            if (iterator.stillUnsubscribed) {\n                var destination = this.destination;\n                destination.add(iterator.subscribe(iterator, i));\n            }\n            else {\n                this.active--;\n            }\n        }\n    };\n    ZipSubscriber.prototype.notifyInactive = function () {\n        this.active--;\n        if (this.active === 0) {\n            this.destination.complete();\n        }\n    };\n    ZipSubscriber.prototype.checkIterators = function () {\n        var iterators = this.iterators;\n        var len = iterators.length;\n        var destination = this.destination;\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            if (typeof iterator.hasValue === 'function' && !iterator.hasValue()) {\n                return;\n            }\n        }\n        var shouldComplete = false;\n        var args = [];\n        for (var i = 0; i < len; i++) {\n            var iterator = iterators[i];\n            var result = iterator.next();\n            if (iterator.hasCompleted()) {\n                shouldComplete = true;\n            }\n            if (result.done) {\n                destination.complete();\n                return;\n            }\n            args.push(result.value);\n        }\n        if (this.resultSelector) {\n            this._tryresultSelector(args);\n        }\n        else {\n            destination.next(args);\n        }\n        if (shouldComplete) {\n            destination.complete();\n        }\n    };\n    ZipSubscriber.prototype._tryresultSelector = function (args) {\n        var result;\n        try {\n            result = this.resultSelector.apply(this, args);\n        }\n        catch (err) {\n            this.destination.error(err);\n            return;\n        }\n        this.destination.next(result);\n    };\n    return ZipSubscriber;\n}(Subscriber));\nexport { ZipSubscriber };\nvar StaticIterator = /*@__PURE__*/ (function () {\n    function StaticIterator(iterator) {\n        this.iterator = iterator;\n        this.nextResult = iterator.next();\n    }\n    StaticIterator.prototype.hasValue = function () {\n        return true;\n    };\n    StaticIterator.prototype.next = function () {\n        var result = this.nextResult;\n        this.nextResult = this.iterator.next();\n        return result;\n    };\n    StaticIterator.prototype.hasCompleted = function () {\n        var nextResult = this.nextResult;\n        return nextResult && nextResult.done;\n    };\n    return StaticIterator;\n}());\nvar StaticArrayIterator = /*@__PURE__*/ (function () {\n    function StaticArrayIterator(array) {\n        this.array = array;\n        this.index = 0;\n        this.length = 0;\n        this.length = array.length;\n    }\n    StaticArrayIterator.prototype[Symbol_iterator] = function () {\n        return this;\n    };\n    StaticArrayIterator.prototype.next = function (value) {\n        var i = this.index++;\n        var array = this.array;\n        return i < this.length ? { value: array[i], done: false } : { value: null, done: true };\n    };\n    StaticArrayIterator.prototype.hasValue = function () {\n        return this.array.length > this.index;\n    };\n    StaticArrayIterator.prototype.hasCompleted = function () {\n        return this.array.length === this.index;\n    };\n    return StaticArrayIterator;\n}());\nvar ZipBufferIterator = /*@__PURE__*/ (function (_super) {\n    tslib_1.__extends(ZipBufferIterator, _super);\n    function ZipBufferIterator(destination, parent, observable) {\n        var _this = _super.call(this, destination) || this;\n        _this.parent = parent;\n        _this.observable = observable;\n        _this.stillUnsubscribed = true;\n        _this.buffer = [];\n        _this.isComplete = false;\n        return _this;\n    }\n    ZipBufferIterator.prototype[Symbol_iterator] = function () {\n        return this;\n    };\n    ZipBufferIterator.prototype.next = function () {\n        var buffer = this.buffer;\n        if (buffer.length === 0 && this.isComplete) {\n            return { value: null, done: true };\n        }\n        else {\n            return { value: buffer.shift(), done: false };\n        }\n    };\n    ZipBufferIterator.prototype.hasValue = function () {\n        return this.buffer.length > 0;\n    };\n    ZipBufferIterator.prototype.hasCompleted = function () {\n        return this.buffer.length === 0 && this.isComplete;\n    };\n    ZipBufferIterator.prototype.notifyComplete = function () {\n        if (this.buffer.length > 0) {\n            this.isComplete = true;\n            this.parent.notifyInactive();\n        }\n        else {\n            this.destination.complete();\n        }\n    };\n    ZipBufferIterator.prototype.notifyNext = function (outerValue, innerValue, outerIndex, innerIndex, innerSub) {\n        this.buffer.push(innerValue);\n        this.parent.checkIterators();\n    };\n    ZipBufferIterator.prototype.subscribe = function (value, index) {\n        return subscribeToResult(this, this.observable, this, index);\n    };\n    return ZipBufferIterator;\n}(OuterSubscriber));\n//# sourceMappingURL=zip.js.map\n","/** PURE_IMPORTS_START  PURE_IMPORTS_END */\nexport { Observable } from './internal/Observable';\nexport { ConnectableObservable } from './internal/observable/ConnectableObservable';\nexport { GroupedObservable } from './internal/operators/groupBy';\nexport { observable } from './internal/symbol/observable';\nexport { Subject } from './internal/Subject';\nexport { BehaviorSubject } from './internal/BehaviorSubject';\nexport { ReplaySubject } from './internal/ReplaySubject';\nexport { AsyncSubject } from './internal/AsyncSubject';\nexport { asap as asapScheduler } from './internal/scheduler/asap';\nexport { async as asyncScheduler } from './internal/scheduler/async';\nexport { queue as queueScheduler } from './internal/scheduler/queue';\nexport { animationFrame as animationFrameScheduler } from './internal/scheduler/animationFrame';\nexport { VirtualTimeScheduler, VirtualAction } from './internal/scheduler/VirtualTimeScheduler';\nexport { Scheduler } from './internal/Scheduler';\nexport { Subscription } from './internal/Subscription';\nexport { Subscriber } from './internal/Subscriber';\nexport { Notification, NotificationKind } from './internal/Notification';\nexport { pipe } from './internal/util/pipe';\nexport { noop } from './internal/util/noop';\nexport { identity } from './internal/util/identity';\nexport { isObservable } from './internal/util/isObservable';\nexport { ArgumentOutOfRangeError } from './internal/util/ArgumentOutOfRangeError';\nexport { EmptyError } from './internal/util/EmptyError';\nexport { ObjectUnsubscribedError } from './internal/util/ObjectUnsubscribedError';\nexport { UnsubscriptionError } from './internal/util/UnsubscriptionError';\nexport { TimeoutError } from './internal/util/TimeoutError';\nexport { bindCallback } from './internal/observable/bindCallback';\nexport { bindNodeCallback } from './internal/observable/bindNodeCallback';\nexport { combineLatest } from './internal/observable/combineLatest';\nexport { concat } from './internal/observable/concat';\nexport { defer } from './internal/observable/defer';\nexport { empty } from './internal/observable/empty';\nexport { forkJoin } from './internal/observable/forkJoin';\nexport { from } from './internal/observable/from';\nexport { fromEvent } from './internal/observable/fromEvent';\nexport { fromEventPattern } from './internal/observable/fromEventPattern';\nexport { generate } from './internal/observable/generate';\nexport { iif } from './internal/observable/iif';\nexport { interval } from './internal/observable/interval';\nexport { merge } from './internal/observable/merge';\nexport { never } from './internal/observable/never';\nexport { of } from './internal/observable/of';\nexport { onErrorResumeNext } from './internal/observable/onErrorResumeNext';\nexport { pairs } from './internal/observable/pairs';\nexport { partition } from './internal/observable/partition';\nexport { race } from './internal/observable/race';\nexport { range } from './internal/observable/range';\nexport { throwError } from './internal/observable/throwError';\nexport { timer } from './internal/observable/timer';\nexport { using } from './internal/observable/using';\nexport { zip } from './internal/observable/zip';\nexport { scheduled } from './internal/scheduled/scheduled';\nexport { EMPTY } from './internal/observable/empty';\nexport { NEVER } from './internal/observable/never';\nexport { config } from './internal/config';\n//# sourceMappingURL=index.js.map\n"],"sourceRoot":""}