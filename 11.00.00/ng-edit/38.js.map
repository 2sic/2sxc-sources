{"version":3,"sources":["./src/app/app-administration/shared/services/content-types.service.ts"],"names":["http","context","dnnContext","retrieveContentType","staticName","this","get","$2sxc","apiUrl","params","appId","toString","contentTypeId","retrieveContentTypes","scope","getScopes","pipe","o","Object","keys","map","key","name","value","save","contentType","post","appid","delete","StaticName","createGhost","sourceStaticName","ContentTypesService"],"mappings":"8FAOA,kGAGA,aAEE,WAAoBA,EAA0BC,EAA0BC,GAApD,KAAAF,OAA0B,KAAAC,UAA0B,KAAAC,a,OAExE,YAAAC,oBAAA,SAAoBC,GAClB,OAAOC,KAAKL,KAAKM,IAAID,KAAKH,WAAWK,MAAMP,KAAKQ,OAAO,uBAAwB,CAC7EC,OAAQ,CAAEC,MAAOL,KAAKJ,QAAQS,MAAMC,WAAYC,cAAeR,MAInE,YAAAS,qBAAA,SAAqBC,GACnB,OAAOT,KAAKL,KAAKM,IAAID,KAAKH,WAAWK,MAAMP,KAAKQ,OAAO,uBAAwB,CAC7EC,OAAQ,CAAEC,MAAOL,KAAKJ,QAAQS,MAAMC,WAAYG,MAAK,MAIzD,YAAAC,UAAA,WACE,OAAQV,KAAKL,KAAKM,IAAID,KAAKH,WAAWK,MAAMP,KAAKQ,OAAO,0BAA2B,CACjFC,OAAQ,CAAEC,MAAOL,KAAKJ,QAAQS,MAAMC,cAErCK,KAAK,aAAI,SAAAC,GAAK,OAAAC,OAAOC,KAAKF,GAAGG,KAAI,SAACC,GAAQ,OAAGC,KAAML,EAAEI,GAAME,MAAOF,WAIrE,YAAAG,KAAA,SAAKC,GACH,OAAOpB,KAAKL,KAAK0B,KAAKrB,KAAKH,WAAWK,MAAMP,KAAKQ,OAAO,wBAAyBiB,EAAa,CAC5FhB,OAAQ,CAAEkB,MAAOtB,KAAKJ,QAAQS,MAAMC,eAIxC,YAAAiB,OAAA,SAAOH,GACL,OAAOpB,KAAKL,KAAKM,IAAID,KAAKH,WAAWK,MAAMP,KAAKQ,OAAO,0BAA2B,CAChFC,OAAQ,CAAEkB,MAAOtB,KAAKJ,QAAQS,MAAMC,WAAYP,WAAYqB,EAAYI,eAI5E,YAAAC,YAAA,SAAYC,GACV,OAAO1B,KAAKL,KAAKM,IAAID,KAAKH,WAAWK,MAAMP,KAAKQ,OAAO,+BAAgC,CACrFC,OAAQ,CAAEkB,MAAOtB,KAAKJ,QAAQS,MAAMC,WAAYoB,iBAAgB,M,sCArCzDC,GAAmB,gC,yBAAnBA,EAAmB,QAAnBA,EAAmB,Y,EADhC","file":"38.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\n\r\nimport { ContentType, ContentTypeEdit } from '../models/content-type.model';\r\nimport { Context } from '../../../shared/services/context';\r\nimport { map } from 'rxjs/operators';\r\nimport { EavScopeOption } from '../../../shared/constants/eav-constants';\r\n\r\n@Injectable()\r\nexport class ContentTypesService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  retrieveContentType(staticName: string) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/get'), {\r\n      params: { appId: this.context.appId.toString(), contentTypeId: staticName }\r\n    }) as Observable<ContentType>;\r\n  }\r\n\r\n  retrieveContentTypes(scope: string) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/get'), {\r\n      params: { appId: this.context.appId.toString(), scope }\r\n    }) as Observable<ContentType[]>;\r\n  }\r\n\r\n  getScopes() {\r\n    return (this.http.get(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/scopes'), {\r\n      params: { appId: this.context.appId.toString() }\r\n    }) as Observable<{[key: string]: string}>)\r\n    .pipe(map(o => Object.keys(o).map((key) => ({ name: o[key], value: key } as EavScopeOption))));\r\n  }\r\n\r\n\r\n  save(contentType: ContentTypeEdit) {\r\n    return this.http.post(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/save'), contentType, {\r\n      params: { appid: this.context.appId.toString() },\r\n    }) as Observable<boolean>;\r\n  }\r\n\r\n  delete(contentType: ContentType) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/delete'), {\r\n      params: { appid: this.context.appId.toString(), staticName: contentType.StaticName },\r\n    }) as Observable<boolean>;\r\n  }\r\n\r\n  createGhost(sourceStaticName: string) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/createghost'), {\r\n      params: { appid: this.context.appId.toString(), sourceStaticName },\r\n    }) as Observable<boolean>;\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}