{"version":3,"sources":["./src/app/app-administration/shared/modals/import-query/import-query.component.html","./src/app/app-administration/shared/modals/import-query/import-query.component.ts"],"names":["dialogRef","pipelinesService","viewStates","Default","Waiting","Imported","viewState","this","ngOnInit","importQuery","importFile","subscribe","next","res","error","fileChange","event","target","files","closeDialog","close","ImportQueryComponent"],"mappings":"kRAQQ,eAA0B,sBAAW,Q,yBACrC,eAAyB,QAAqB,Q,mBAArB,iC,qCAJ/B,cACE,cACE,mBAAyD,gDAAS,WAChE,uBACA,uBACF,OACA,oBAA8B,kEAA9B,OACF,OAEA,gBACE,mBAA0B,gEAAwB,iBAAM,OACxD,qBAAkE,gEAAwB,kBAAM,OAClG,OACF,O,qBAVY,mCACA,kCAOiC,wC,sBAG7C,cACE,yBACA,gBACE,oBAAmC,iBAAM,OACzC,oBAAkD,iBAAM,OAC1D,OACF,Q,qCACA,cACE,YAAG,4BAAiB,OACpB,gBACE,oBAAyC,gEAAwB,gBAAK,OACxE,OACF,QCzBF,iBAcE,WAAoBA,EAAuDC,GAAvD,KAAAD,YAAuD,KAAAC,mBARnE,KAAAC,WAAa,CACnBC,QAAS,EACTC,QAAS,EACTC,SAAU,GAEZ,KAAAC,UAAYC,KAAKL,WAAWC,Q,OAK5B,YAAAK,SAAA,aAGM,YAAAC,YAAN,W,yHAEG,OADDF,KAAKD,UAAYC,KAAKL,WAAWE,QAChC,GAAMG,KAAKN,iBAAiBQ,YAAYF,KAAKG,a,cAA7C,SAA0DC,UAAU,CACnEC,KAAM,SAAAC,GACJ,EAAKP,UAAY,EAAKJ,WAAWG,UAEnCS,MAAO,SAACA,GACN,EAAKR,UAAY,EAAKJ,WAAWC,W,YAKvC,YAAAY,WAAA,SAAWC,GACTT,KAAKG,WAAcM,EAAMC,OAA4BC,MAAM,IAG7D,YAAAC,YAAA,WACEZ,KAAKP,UAAUoB,S,sCA/BNC,GAAoB,sB,uBAApBA,EAAoB,mnBDXjC,gBACE,gBAA8B,uBAAY,OAC5C,OAEA,gBACE,uBAcA,sBAOA,sBAMF,Q,MA5BK,qCACE,+BAcA,+BAOA,iC,yDCpBP","file":"import-query-component.6178966099c6cef218e8.js","sourcesContent":["<div mat-dialog-title>\r\n  <div class=\"dialog-title-box\">Import Query</div>\r\n</div>\r\n\r\n<div [ngSwitch]=\"viewState\">\r\n  <div *ngSwitchCase=\"1\">\r\n    <div>\r\n      <button mat-raised-button matTooltip=\"Open file browser\" (click)=\"fileInput.click()\">\r\n        <span *ngIf=\"!importFile\">Select file</span>\r\n        <span *ngIf=\"importFile\">{{ importFile.name }}</span>\r\n      </button>\r\n      <input #fileInput type=\"file\" (change)=\"fileChange($event)\" class=\"hide\" />\r\n    </div>\r\n\r\n    <div class=\"dialog-actions-box\">\r\n      <button mat-raised-button (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" [disabled]=\"!importFile\" (click)=\"importQuery()\">Import</button>\r\n    </div>\r\n  </div>\r\n  <div *ngSwitchCase=\"2\">\r\n    <mat-spinner mode=\"indeterminate\" diameter=\"20\" color=\"accent\"></mat-spinner>\r\n    <div class=\"dialog-actions-box\">\r\n      <button mat-raised-button disabled>Cancel</button>\r\n      <button mat-raised-button color=\"accent\" disabled>Import</button>\r\n    </div>\r\n  </div>\r\n  <div *ngSwitchCase=\"3\">\r\n    <p>Import completed!</p>\r\n    <div class=\"dialog-actions-box\">\r\n      <button mat-raised-button color=\"accent\" (click)=\"closeDialog()\">Close</button>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\n\r\nimport { PipelinesService } from '../../services/pipelines.service';\r\n\r\n@Component({\r\n  selector: 'app-import-query',\r\n  templateUrl: './import-query.component.html',\r\n  styleUrls: ['./import-query.component.scss']\r\n})\r\nexport class ImportQueryComponent implements OnInit {\r\n  private viewStates = {\r\n    Default: 1,\r\n    Waiting: 2,\r\n    Imported: 3\r\n  };\r\n  viewState = this.viewStates.Default;\r\n  importFile: File;\r\n\r\n  constructor(private dialogRef: MatDialogRef<ImportQueryComponent>, private pipelinesService: PipelinesService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  async importQuery() {\r\n    this.viewState = this.viewStates.Waiting;\r\n    (await this.pipelinesService.importQuery(this.importFile)).subscribe({\r\n      next: res => {\r\n        this.viewState = this.viewStates.Imported;\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.viewState = this.viewStates.Default;\r\n      },\r\n    });\r\n  }\r\n\r\n  fileChange(event: Event) {\r\n    this.importFile = (event.target as HTMLInputElement).files[0];\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}