{"version":3,"sources":["./src/app/code-editor/code-editor.component.html","./src/app/code-editor/code-snippets/code-snippets.component.html","./src/app/code-editor/code-templates/code-templates.component.html","./src/app/code-editor/ace-editor/ace-editor.component.ts","./src/app/code-editor/ace-editor/ace-editor.helpers.ts","./src/app/code-editor/ace-editor/ace-options.ts","./src/app/code-editor/code-editor-routing.module.ts","./src/app/code-editor/code-editor.component.scss","./src/app/code-editor/code-editor.component.ts","./src/app/code-editor/code-editor.module.ts","./src/app/code-editor/code-snippets/code-snippets.component.scss","./src/app/code-editor/code-snippets/code-snippets.component.ts","./src/app/code-editor/code-snippets/code-snippets.helpers.ts","./src/app/code-editor/code-snippets/toarray.pipe.ts","./src/app/code-editor/code-templates/code-templates.component.scss","./src/app/code-editor/code-templates/code-templates.component.ts","./src/app/code-editor/code-templates/code-templates.helpers.ts","./src/app/code-editor/models/source-view.model.ts","./src/app/code-editor/services/snippets.service.ts","./src/app/code-editor/services/source.service.ts"],"names":[],"mappings":"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","file":"code-editor-code-editor-module.js","sourcesContent":["export default \"<div class=\\\"editor-root\\\">\\r\\n  <div class=\\\"editor-side-toolbar\\\">\\r\\n    <div class=\\\"button\\\" [ngClass]=\\\"{'active': activeExplorer === explorer.templates}\\\" matTooltip=\\\"Templates\\\"\\r\\n      (click)=\\\"toggleExplorer(explorer.templates)\\\">\\r\\n      <mat-icon>file_copy</mat-icon>\\r\\n    </div>\\r\\n    <div class=\\\"button\\\" [ngClass]=\\\"{'active': activeExplorer === explorer.snippets}\\\" matTooltip=\\\"Snippets\\\"\\r\\n      (click)=\\\"toggleExplorer(explorer.snippets)\\\">\\r\\n      <mat-icon>code</mat-icon>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <app-code-templates [hidden]=\\\"activeExplorer !== explorer.templates\\\" [view]=\\\"view\\\" [templates]=\\\"templates\\\">\\r\\n  </app-code-templates>\\r\\n  <app-code-snippets [hidden]=\\\"activeExplorer !== explorer.snippets\\\" [snippets]=\\\"explorerSnipps\\\"\\r\\n    (insertSnippet)=\\\"changeInsertSnipp($event)\\\">\\r\\n  </app-code-snippets>\\r\\n\\r\\n  <app-ace-editor *ngIf=\\\"view\\\" [filename]=\\\"view.FileName\\\" [(ngModel)]=\\\"view.Code\\\" [snippets]=\\\"editorSnipps\\\"\\r\\n    [insertSnippet]=\\\"insertSnipp\\\" [toggleResize]=\\\"!this.activeExplorer\\\">\\r\\n  </app-ace-editor>\\r\\n\\r\\n  <button mat-fab mat-elevation-z24 matTooltip=\\\"Click to save or CTRL + S\\\" (click)=\\\"save()\\\">\\r\\n    <mat-icon>done</mat-icon>\\r\\n  </button>\\r\\n</div>\\r\\n\";","export default \"<div class=\\\"editor-active-explorer editor-fancy-scrollbar\\\">\\r\\n\\r\\n  <div class=\\\"edit-input\\\">\\r\\n    <mat-form-field appearance=\\\"standard\\\" color=\\\"accent\\\" class=\\\"set-dropdown\\\">\\r\\n      <mat-select [ngModel]=\\\"selected\\\" name=\\\"selected\\\" (selectionChange)=\\\"onSetChange($event)\\\">\\r\\n        <mat-option *ngFor=\\\"let set of sets\\\" [value]=\\\"set\\\">{{ set }}</mat-option>\\r\\n      </mat-select>\\r\\n    </mat-form-field>\\r\\n  </div>\\r\\n\\r\\n  <ng-container *ngFor=\\\"let item of activeSet | keyvalue\\\">\\r\\n\\r\\n    <div class=\\\"collapsible\\\" [matTooltip]=\\\"item.key\\\" matTooltipShowDelay=\\\"750\\\" (click)=\\\"toggleItem(item)\\\">\\r\\n      <mat-icon>{{ toggledItems.includes(item) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}</mat-icon>\\r\\n      <span>{{ item.key }}</span>\\r\\n    </div>\\r\\n\\r\\n    <ul class=\\\"list\\\" *ngIf=\\\"toggledItems.includes(item)\\\">\\r\\n      <li class=\\\"list-item\\\" *ngFor=\\\"let value of (item.value | toarray)\\\">\\r\\n\\r\\n        <div class=\\\"list-item__label-wrapper\\\">\\r\\n          <div matRipple class=\\\"label\\\" [matTooltip]=\\\"value.snip\\\" matTooltipShowDelay=\\\"750\\\"\\r\\n            (click)=\\\"addSnippet(value.snip)\\\">{{ value.label }}\\r\\n          </div>\\r\\n          <mat-icon matTooltip=\\\"Show Help\\\" matTooltipShowDelay=\\\"750\\\" appClickStopPropagation\\r\\n            (click)=\\\"toggleInfo(value)\\\">\\r\\n            info\\r\\n          </mat-icon>\\r\\n        </div>\\r\\n\\r\\n        <div class=\\\"list-item__help-wrapper\\\" *ngIf=\\\"toggledInfos.includes(value)\\\">\\r\\n          <div class=\\\"text\\\">{{ value.help }}</div>\\r\\n          <div *ngFor=\\\"let link of value.links\\\">\\r\\n            <a href=\\\"{{ link.url }}\\\" target=\\\"_blank\\\">{{ link.name }}</a>\\r\\n          </div>\\r\\n        </div>\\r\\n\\r\\n      </li>\\r\\n    </ul>\\r\\n\\r\\n  </ng-container>\\r\\n</div>\\r\\n\";","export default \"<div class=\\\"editor-active-explorer editor-fancy-scrollbar\\\">\\r\\n\\r\\n  <ng-container *ngFor=\\\"let item of tree\\\">\\r\\n    <ng-container *ngTemplateOutlet=\\\"collapsible; context: {item: item}\\\"></ng-container>\\r\\n  </ng-container>\\r\\n\\r\\n  <ng-template #collapsible let-item=\\\"item\\\">\\r\\n\\r\\n    <div class=\\\"template-option\\\" [ngClass]=\\\"{'active': toggledItems.includes(item) }\\\" *ngIf=\\\"!item.children\\\"\\r\\n      matTooltipShowDelay=\\\"750\\\" [matTooltip]=\\\"item.name\\\" (click)=\\\"openTemplate(item.pathFromRoot)\\\">\\r\\n      {{ item.name }}\\r\\n    </div>\\r\\n\\r\\n    <div class=\\\"collapsible\\\" *ngIf=\\\"item.children\\\" matTooltipShowDelay=\\\"750\\\" [matTooltip]=\\\"item.name\\\"\\r\\n      (click)=\\\"toggleItem(item)\\\">\\r\\n      <mat-icon>{{ toggledItems.includes(item) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}</mat-icon>\\r\\n      <span>{{ item.name }}</span>\\r\\n    </div>\\r\\n\\r\\n    <ng-container *ngIf=\\\"toggledItems.includes(item)\\\">\\r\\n      <div class=\\\"list\\\" *ngFor=\\\"let item1 of item.children\\\">\\r\\n        <ng-container *ngTemplateOutlet=\\\"collapsible; context: {item: item1}\\\"></ng-container>\\r\\n      </div>\\r\\n    </ng-container>\\r\\n\\r\\n  </ng-template>\\r\\n\\r\\n</div>\\r\\n\";","// tslint:disable-next-line:max-line-length\r\nimport { Component, OnInit, Input, ElementRef, NgZone, OnChanges, SimpleChanges, ChangeDetectionStrategy, OnDestroy, forwardRef, ViewChild } from '@angular/core';\r\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\r\n\r\nimport { loadScripts } from './ace-editor.helpers';\r\nimport { aceOptions } from './ace-options';\r\nimport { Ace, Editor } from './ace.model';\r\ndeclare const ace: Ace;\r\n\r\n@Component({\r\n  selector: 'app-ace-editor',\r\n  template: `<div style=\"width: 100%; height: 100%;\" #editor></div>`,\r\n  styles: [':host {display: block; width: 100%; height: 100%}'],\r\n  providers: [{\r\n    provide: NG_VALUE_ACCESSOR,\r\n    useExisting: forwardRef(() => AceEditorComponent),\r\n    multi: true\r\n  }],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class AceEditorComponent implements OnInit, OnChanges, OnDestroy {\r\n  @ViewChild('editor') editorRef: ElementRef;\r\n  @Input() filename: string;\r\n  @Input() snippets: any[];\r\n  @Input() insertSnippet: any;\r\n  /** If value changes editor will be resized */\r\n  @Input() toggleResize: boolean;\r\n\r\n  private value = '';\r\n  private editor: Editor;\r\n\r\n  propagateChange: (_: any) => void = () => { };\r\n  propagateTouched: (_: any) => void = () => { };\r\n\r\n  constructor(private zone: NgZone) { }\r\n\r\n  ngOnInit() {\r\n    loadScripts(\r\n      [\r\n        { globalVar: 'ace', src: 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ace.min.js' },\r\n        { globalVar: null, src: 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-modelist.min.js' },\r\n        { globalVar: null, src: 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11/ext-language_tools.min.js' },\r\n      ],\r\n      this.aceLoaded.bind(this)\r\n    );\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const filename = changes.filename?.currentValue;\r\n    const snippets = changes.snippets?.currentValue;\r\n    this.updateValues(filename, snippets);\r\n\r\n    if (!this.editor) { return; }\r\n    const resize = changes.toggleResize?.currentValue !== changes.toggleResize?.previousValue;\r\n    if (resize) {\r\n      this.zone.runOutsideAngular(() => {\r\n        // wait for Angular to update DOM to be able to get proper size of the container\r\n        setTimeout(() => { this.editor.resize(); }, 50);\r\n      });\r\n    }\r\n    const snippet = changes.insertSnippet?.currentValue;\r\n    if (snippet) {\r\n      this.zone.runOutsideAngular(() => {\r\n        const snippetManager = ace.require('ace/snippets').snippetManager;\r\n        snippetManager.insertSnippet(this.editor, snippet);\r\n        this.editor.focus();\r\n      });\r\n    }\r\n  }\r\n\r\n  writeValue(value: string) {\r\n    this.value = value || '';\r\n    if (!this.editor) { return; }\r\n    this.zone.runOutsideAngular(() => {\r\n      const p = this.editor.getCursorPosition();\r\n      this.editor.setValue(this.value, -1);\r\n      this.editor.moveCursorToPosition(p);\r\n    });\r\n  }\r\n\r\n  registerOnChange(fn: (_: any) => void) {\r\n    this.propagateChange = fn;\r\n  }\r\n\r\n  registerOnTouched(fn: (_: any) => void) {\r\n    this.propagateTouched = fn;\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.editor.destroy();\r\n      this.editor.container.remove();\r\n      this.editor = null;\r\n    });\r\n  }\r\n\r\n  private aceLoaded() {\r\n    this.zone.runOutsideAngular(() => {\r\n      ace.config.set('basePath', 'https://cdnjs.cloudflare.com/ajax/libs/ace/1.4.11');\r\n      this.editor = ace.edit(this.editorRef.nativeElement, aceOptions);\r\n      (this.editor as any).$blockScrolling = Infinity;\r\n      this.editor.session.setValue(this.value); // set value and reset undo history\r\n      this.updateValues(this.filename, this.snippets);\r\n      this.editor.on('change', this.onEditorValueChange.bind(this));\r\n      this.editor.on('blur', this.onEditorBlurred.bind(this));\r\n      this.editor.focus();\r\n    });\r\n  }\r\n\r\n  private onEditorValueChange() {\r\n    this.zone.run(() => {\r\n      this.propagateChange(this.editor.getValue());\r\n    });\r\n  }\r\n\r\n  private onEditorBlurred() {\r\n    this.zone.run(() => {\r\n      this.propagateTouched(this.editor.getValue());\r\n    });\r\n  }\r\n\r\n  private updateValues(filename: string, snippets: any[]) {\r\n    if (!this.editor) { return; }\r\n    this.zone.runOutsideAngular(() => {\r\n      if (filename) {\r\n        const modelist = ace.require('ace/ext/modelist');\r\n        const mode = modelist.getModeForPath(filename).mode;\r\n        this.editor.session.setMode(mode);\r\n      }\r\n      if (snippets) {\r\n        const snippetManager = ace.require('ace/snippets').snippetManager;\r\n        snippetManager.register(this.snippets);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n","export function loadScripts(scriptObjects: ScriptObject[], callback: (...args: any[]) => any, iteration = 0) {\r\n  const isLast = scriptObjects.length === iteration + 1;\r\n  const newCallback = isLast ? callback : loadScripts.bind(this, scriptObjects, callback, iteration + 1);\r\n  const scrObj = scriptObjects[iteration];\r\n\r\n  if (!!(window as any)[scrObj.globalVar]) {\r\n    callback();\r\n    return;\r\n  }\r\n\r\n  const scriptInDom: HTMLScriptElement = document.querySelector(`script[src=\"${scrObj.src}\"]`);\r\n  if (scriptInDom) {\r\n    scriptInDom.addEventListener('load', newCallback, { once: true });\r\n    return;\r\n  }\r\n\r\n  const scriptEl = document.createElement('script');\r\n  scriptEl.src = scrObj.src;\r\n  scriptEl.addEventListener('load', newCallback, { once: true });\r\n  document.head.appendChild(scriptEl);\r\n}\r\n\r\nexport class ScriptObject {\r\n  globalVar: string;\r\n  src: string;\r\n}\r\n","import { EditorOptions } from './ace.model';\r\n\r\nexport const aceOptions: Partial<EditorOptions> & EditorPluginsOptions = {\r\n  mode: 'ace/mode/razor',\r\n  wrap: true,\r\n  useSoftTabs: true,\r\n  theme: 'ace/theme/sqlserver',\r\n  fontSize: 14,\r\n  fontFamily: 'Consolas, Courier New, monospace',\r\n  showGutter: true,\r\n  enableBasicAutocompletion: true,\r\n  enableLiveAutocompletion: true,\r\n  enableSnippets: true,\r\n};\r\n\r\ninterface EditorPluginsOptions {\r\n  enableBasicAutocompletion: boolean;\r\n  enableLiveAutocompletion: boolean;\r\n  enableSnippets: boolean;\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { CodeEditorComponent } from './code-editor.component';\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: CodeEditorComponent },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class CodeEditorRoutingModule { }\r\n","export default \".mat-fab {\\n  position: absolute;\\n  right: 48px;\\n  bottom: 32px;\\n  z-index: 10;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9jb2RlLWVkaXRvci9DOlxcUHJvamVjdHNcXGVhdi1pdGVtLWRpYWxvZy1hbmd1bGFyL3Byb2plY3RzXFxuZy1kaWFsb2dzXFxzcmNcXGFwcFxcY29kZS1lZGl0b3JcXGNvZGUtZWRpdG9yLmNvbXBvbmVudC5zY3NzIiwicHJvamVjdHMvbmctZGlhbG9ncy9zcmMvYXBwL2NvZGUtZWRpdG9yL2NvZGUtZWRpdG9yLmNvbXBvbmVudC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0Usa0JBQUE7RUFDQSxXQUFBO0VBQ0EsWUFBQTtFQUNBLFdBQUE7QUNDRiIsImZpbGUiOiJwcm9qZWN0cy9uZy1kaWFsb2dzL3NyYy9hcHAvY29kZS1lZGl0b3IvY29kZS1lZGl0b3IuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIubWF0LWZhYiB7XHJcbiAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gIHJpZ2h0OiA0OHB4O1xyXG4gIGJvdHRvbTogMzJweDtcclxuICB6LWluZGV4OiAxMDtcclxufVxyXG4iLCIubWF0LWZhYiB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDQ4cHg7XG4gIGJvdHRvbTogMzJweDtcbiAgei1pbmRleDogMTA7XG59Il19 */\"","import { Component, OnInit, OnDestroy, NgZone } from '@angular/core';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nimport { Context } from '../shared/services/context';\r\nimport { keyItems } from '../shared/constants/sessions-keys';\r\nimport { SourceService } from './services/source.service';\r\nimport { EditItem, SourceItem, } from '../app-administration/shared/models/edit-form.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { ElementEventListener } from '../../../../shared/element-event-listener-model';\r\nimport { SnippetsService } from './services/snippets.service';\r\n\r\n@Component({\r\n  selector: 'app-code-editor',\r\n  templateUrl: './code-editor.component.html',\r\n  styleUrls: ['./code-editor.component.scss']\r\n})\r\nexport class CodeEditorComponent implements OnInit, OnDestroy {\r\n  explorer = {\r\n    templates: 'templates',\r\n    snippets: 'snippets'\r\n  };\r\n  activeExplorer: string;\r\n  view: SourceView;\r\n  templates: string[];\r\n  explorerSnipps: any;\r\n  editorSnipps: any;\r\n  insertSnipp: any;\r\n\r\n  private viewKey: number | string; // templateId or path\r\n  private eventListeners: ElementEventListener[] = [];\r\n  private savedCode: string;\r\n\r\n  constructor(\r\n    private context: Context,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private sourceService: SourceService,\r\n    private snippetsService: SnippetsService,\r\n    private zone: NgZone,\r\n    private titleService: Title,\r\n  ) {\r\n    this.context.init(this.route);\r\n    this.calculateViewKey();\r\n    this.attachListeners();\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.sourceService.get(this.viewKey).subscribe(view => {\r\n      this.view = view;\r\n      this.savedCode = this.view.Code;\r\n      this.titleService.setTitle(`${this.view.FileName} - Code Editor`);\r\n\r\n      this.snippetsService.getSnippets(this.view).then((res: any) => {\r\n        this.explorerSnipps = res.sets;\r\n        this.editorSnipps = res.list;\r\n      });\r\n    });\r\n    this.sourceService.getTemplates().subscribe(templates => {\r\n      this.templates = templates;\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.detachListeners();\r\n  }\r\n\r\n  toggleExplorer(explorer: string) {\r\n    if (this.activeExplorer === explorer) {\r\n      this.activeExplorer = null;\r\n    } else {\r\n      this.activeExplorer = explorer;\r\n    }\r\n  }\r\n\r\n  changeInsertSnipp(snippet: any) {\r\n    this.insertSnipp = snippet;\r\n  }\r\n\r\n  save() {\r\n    this.snackBar.open('Saving...');\r\n    let codeToSave = this.view.Code;\r\n    this.sourceService.save(this.viewKey, this.view).subscribe({\r\n      next: res => {\r\n        if (!res) {\r\n          this.snackBar.open('Failed', null, { duration: 2000 });\r\n          return;\r\n        }\r\n        this.savedCode = codeToSave;\r\n        codeToSave = null;\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Failed', null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private calculateViewKey() {\r\n    const itemsRaw = sessionStorage.getItem(keyItems);\r\n    const editItems: EditItem[] | SourceItem[] = JSON.parse(itemsRaw);\r\n    const item = editItems[0];\r\n    this.viewKey = (item as EditItem).EntityId || (item as SourceItem).Path;\r\n  }\r\n\r\n  private attachListeners() {\r\n    this.zone.runOutsideAngular(() => {\r\n      const closing = this.stopClose.bind(this);\r\n      const save = this.keyboardSave.bind(this);\r\n      window.addEventListener('beforeunload', closing);\r\n      window.addEventListener('keydown', save);\r\n      this.eventListeners.push({ element: window, type: 'beforeunload', listener: closing });\r\n      this.eventListeners.push({ element: window, type: 'keydown', listener: save });\r\n    });\r\n  }\r\n\r\n  private detachListeners() {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.eventListeners.forEach(listener => {\r\n        listener.element.removeEventListener(listener.type, listener.listener);\r\n      });\r\n      this.eventListeners = null;\r\n    });\r\n  }\r\n\r\n  private stopClose(e: BeforeUnloadEvent) {\r\n    if (this.savedCode === this.view.Code) { return; }\r\n    e.preventDefault(); // Cancel the event\r\n    e.returnValue = ''; // Chrome requires returnValue to be set\r\n  }\r\n\r\n  private keyboardSave(e: KeyboardEvent) {\r\n    const CTRL_S = e.keyCode === 83 && (navigator.platform.match('Mac') ? e.metaKey : e.ctrlKey);\r\n    if (!CTRL_S) { return; }\r\n    e.preventDefault();\r\n    this.zone.run(() => { this.save(); });\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatRippleModule } from '@angular/material/core';\r\n\r\nimport { CodeEditorRoutingModule } from './code-editor-routing.module';\r\nimport { SharedComponentsModule } from '../shared/shared-components.module';\r\nimport { CodeEditorComponent } from './code-editor.component';\r\nimport { Context } from '../shared/services/context';\r\nimport { SourceService } from './services/source.service';\r\nimport { DialogService } from '../shared/services/dialog.service';\r\nimport { CodeSnippetsComponent } from './code-snippets/code-snippets.component';\r\nimport { SnippetsService } from './services/snippets.service';\r\nimport { ToArrayPipe } from './code-snippets/toarray.pipe';\r\nimport { CodeTemplatesComponent } from './code-templates/code-templates.component';\r\nimport { AceEditorComponent } from './ace-editor/ace-editor.component';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    CodeEditorComponent,\r\n    CodeSnippetsComponent,\r\n    ToArrayPipe,\r\n    CodeTemplatesComponent,\r\n    AceEditorComponent,\r\n  ],\r\n  entryComponents: [\r\n    CodeEditorComponent,\r\n    CodeSnippetsComponent,\r\n    CodeTemplatesComponent,\r\n    AceEditorComponent,\r\n  ],\r\n  imports: [\r\n    CodeEditorRoutingModule,\r\n    SharedComponentsModule,\r\n    CommonModule,\r\n    MatDialogModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatTooltipModule,\r\n    MatSnackBarModule,\r\n    FormsModule,\r\n    MatSelectModule,\r\n    MatRippleModule,\r\n  ],\r\n  providers: [\r\n    Context,\r\n    SourceService,\r\n    DialogService,\r\n    SnippetsService,\r\n  ]\r\n})\r\nexport class CodeEditorModule { }\r\n","export default \".edit-input {\\n  background-color: white;\\n  height: 44px;\\n  display: flex;\\n  align-items: flex-end;\\n}\\n\\n.set-dropdown {\\n  font-size: 14px;\\n  height: auto;\\n}\\n\\n.collapsible {\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  padding: 3px 0;\\n}\\n\\n.collapsible:hover {\\n  background-color: #2a2d2e;\\n}\\n\\n.collapsible .mat-icon {\\n  width: 18px;\\n  height: 18px;\\n  font-size: 18px;\\n}\\n\\n.list {\\n  list-style-type: none;\\n  margin: 0;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  padding: 0;\\n}\\n\\n.list .list-item {\\n  padding-right: 8px;\\n}\\n\\n.list .list-item:hover {\\n  background-color: #2a2d2e;\\n}\\n\\n.list .list-item__label-wrapper {\\n  display: flex;\\n  align-items: center;\\n  justify-content: space-between;\\n}\\n\\n.list .list-item .label {\\n  cursor: pointer;\\n  padding: 3px 0 3px 24px;\\n  flex: 1 1 auto;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n\\n.list .list-item .mat-icon {\\n  cursor: pointer;\\n  width: 18px;\\n  height: 18px;\\n  font-size: 18px;\\n}\\n\\n.list .list-item__help-wrapper {\\n  padding: 3px 18px 3px 24px;\\n  -webkit-user-select: text;\\n     -moz-user-select: text;\\n      -ms-user-select: text;\\n          user-select: text;\\n}\\n\\n.list .list-item__help-wrapper .text {\\n  font-size: 12px;\\n  font-style: oblique;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9jb2RlLWVkaXRvci9jb2RlLXNuaXBwZXRzL0M6XFxQcm9qZWN0c1xcZWF2LWl0ZW0tZGlhbG9nLWFuZ3VsYXIvcHJvamVjdHNcXG5nLWRpYWxvZ3NcXHNyY1xcYXBwXFxjb2RlLWVkaXRvclxcY29kZS1zbmlwcGV0c1xcY29kZS1zbmlwcGV0cy5jb21wb25lbnQuc2NzcyIsInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9jb2RlLWVkaXRvci9jb2RlLXNuaXBwZXRzL2NvZGUtc25pcHBldHMuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSx1QkFBQTtFQUNBLFlBQUE7RUFDQSxhQUFBO0VBQ0EscUJBQUE7QUNDRjs7QURFQTtFQUNFLGVBQUE7RUFDQSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0tBQUEsc0JBQUE7TUFBQSxxQkFBQTtVQUFBLGlCQUFBO0VBQ0EsY0FBQTtBQ0NGOztBRENFO0VBQ0UseUJBQUE7QUNDSjs7QURFRTtFQUNFLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZUFBQTtBQ0FKOztBRElBO0VBQ0UscUJBQUE7RUFDQSxTQUFBO0VBQ0EseUJBQUE7S0FBQSxzQkFBQTtNQUFBLHFCQUFBO1VBQUEsaUJBQUE7RUFDQSxVQUFBO0FDREY7O0FER0U7RUFDRSxrQkFBQTtBQ0RKOztBREdJO0VBQ0UseUJBQUE7QUNETjs7QURJSTtFQUNFLGFBQUE7RUFDQSxtQkFBQTtFQUNBLDhCQUFBO0FDRk47O0FES0k7RUFDRSxlQUFBO0VBQ0EsdUJBQUE7RUFDQSxjQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLHVCQUFBO0FDSE47O0FETUk7RUFDRSxlQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxlQUFBO0FDSk47O0FET0k7RUFDRSwwQkFBQTtFQUNBLHlCQUFBO0tBQUEsc0JBQUE7TUFBQSxxQkFBQTtVQUFBLGlCQUFBO0FDTE47O0FET007RUFDRSxlQUFBO0VBQ0EsbUJBQUE7QUNMUiIsImZpbGUiOiJwcm9qZWN0cy9uZy1kaWFsb2dzL3NyYy9hcHAvY29kZS1lZGl0b3IvY29kZS1zbmlwcGV0cy9jb2RlLXNuaXBwZXRzLmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLmVkaXQtaW5wdXQge1xyXG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gIGhlaWdodDogNDRweDtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcclxufVxyXG5cclxuLnNldC1kcm9wZG93biB7XHJcbiAgZm9udC1zaXplOiAxNHB4O1xyXG4gIGhlaWdodDogYXV0bztcclxufVxyXG5cclxuLmNvbGxhcHNpYmxlIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBwYWRkaW5nOiAzcHggMDtcclxuXHJcbiAgJjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNDIsIDQ1LCA0Nik7XHJcbiAgfVxyXG5cclxuICAubWF0LWljb24ge1xyXG4gICAgd2lkdGg6IDE4cHg7XHJcbiAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgfVxyXG59XHJcblxyXG4ubGlzdCB7XHJcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xyXG4gIG1hcmdpbjogMDtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBwYWRkaW5nOiAwO1xyXG5cclxuICAubGlzdC1pdGVtIHtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDhweDtcclxuXHJcbiAgICAmOmhvdmVyIHtcclxuICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDQyLCA0NSwgNDYpO1xyXG4gICAgfVxyXG5cclxuICAgICZfX2xhYmVsLXdyYXBwZXIge1xyXG4gICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICB9XHJcblxyXG4gICAgLmxhYmVsIHtcclxuICAgICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gICAgICBwYWRkaW5nOiAzcHggMCAzcHggMjRweDtcclxuICAgICAgZmxleDogMSAxIGF1dG87XHJcbiAgICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xyXG4gICAgfVxyXG5cclxuICAgIC5tYXQtaWNvbiB7XHJcbiAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgd2lkdGg6IDE4cHg7XHJcbiAgICAgIGhlaWdodDogMThweDtcclxuICAgICAgZm9udC1zaXplOiAxOHB4O1xyXG4gICAgfVxyXG5cclxuICAgICZfX2hlbHAtd3JhcHBlciB7XHJcbiAgICAgIHBhZGRpbmc6IDNweCAxOHB4IDNweCAyNHB4O1xyXG4gICAgICB1c2VyLXNlbGVjdDogdGV4dDtcclxuXHJcbiAgICAgIC50ZXh0IHtcclxuICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgZm9udC1zdHlsZTogb2JsaXF1ZTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCIuZWRpdC1pbnB1dCB7XG4gIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xuICBoZWlnaHQ6IDQ0cHg7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcbn1cblxuLnNldC1kcm9wZG93biB7XG4gIGZvbnQtc2l6ZTogMTRweDtcbiAgaGVpZ2h0OiBhdXRvO1xufVxuXG4uY29sbGFwc2libGUge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICBwYWRkaW5nOiAzcHggMDtcbn1cbi5jb2xsYXBzaWJsZTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMyYTJkMmU7XG59XG4uY29sbGFwc2libGUgLm1hdC1pY29uIHtcbiAgd2lkdGg6IDE4cHg7XG4gIGhlaWdodDogMThweDtcbiAgZm9udC1zaXplOiAxOHB4O1xufVxuXG4ubGlzdCB7XG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgbWFyZ2luOiAwO1xuICB1c2VyLXNlbGVjdDogbm9uZTtcbiAgcGFkZGluZzogMDtcbn1cbi5saXN0IC5saXN0LWl0ZW0ge1xuICBwYWRkaW5nLXJpZ2h0OiA4cHg7XG59XG4ubGlzdCAubGlzdC1pdGVtOmhvdmVyIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogIzJhMmQyZTtcbn1cbi5saXN0IC5saXN0LWl0ZW1fX2xhYmVsLXdyYXBwZXIge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG4ubGlzdCAubGlzdC1pdGVtIC5sYWJlbCB7XG4gIGN1cnNvcjogcG9pbnRlcjtcbiAgcGFkZGluZzogM3B4IDAgM3B4IDI0cHg7XG4gIGZsZXg6IDEgMSBhdXRvO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbn1cbi5saXN0IC5saXN0LWl0ZW0gLm1hdC1pY29uIHtcbiAgY3Vyc29yOiBwb2ludGVyO1xuICB3aWR0aDogMThweDtcbiAgaGVpZ2h0OiAxOHB4O1xuICBmb250LXNpemU6IDE4cHg7XG59XG4ubGlzdCAubGlzdC1pdGVtX19oZWxwLXdyYXBwZXIge1xuICBwYWRkaW5nOiAzcHggMThweCAzcHggMjRweDtcbiAgdXNlci1zZWxlY3Q6IHRleHQ7XG59XG4ubGlzdCAubGlzdC1pdGVtX19oZWxwLXdyYXBwZXIgLnRleHQge1xuICBmb250LXNpemU6IDEycHg7XG4gIGZvbnQtc3R5bGU6IG9ibGlxdWU7XG59Il19 */\"","import { Component, OnInit, Input, OnChanges, SimpleChanges, ChangeDetectionStrategy, Output, EventEmitter } from '@angular/core';\r\nimport { MatSelectChange } from '@angular/material/select';\r\n\r\nimport { toggleInArray } from './code-snippets.helpers';\r\n\r\n@Component({\r\n  selector: 'app-code-snippets',\r\n  templateUrl: './code-snippets.component.html',\r\n  styleUrls: ['./code-snippets.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CodeSnippetsComponent implements OnInit, OnChanges {\r\n  @Input() snippets: any;\r\n  @Output() insertSnippet: EventEmitter<any> = new EventEmitter();\r\n  selected = 'Content';\r\n  sets: string[];\r\n  activeSet: any;\r\n  toggledItems: any[] = [];\r\n  toggledInfos: any[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    const snippets = changes.snippets?.currentValue;\r\n    if (snippets) {\r\n      this.sets = Object.keys(snippets);\r\n      this.activeSet = this.snippets[this.selected];\r\n    } else {\r\n      this.sets = null;\r\n      this.activeSet = null;\r\n    }\r\n  }\r\n\r\n  onSetChange(event: MatSelectChange) {\r\n    this.selected = event.value;\r\n    this.activeSet = this.snippets[this.selected];\r\n    this.toggledItems = [];\r\n    this.toggledInfos = [];\r\n  }\r\n\r\n  addSnippet(snippet: string) {\r\n    this.insertSnippet.emit(snippet);\r\n  }\r\n\r\n  toggleItem(item: any) {\r\n    toggleInArray(item, this.toggledItems);\r\n  }\r\n\r\n  toggleInfo(info: any) {\r\n    toggleInArray(info, this.toggledInfos);\r\n  }\r\n\r\n}\r\n","export function toggleInArray(item: any, array: any[]) {\r\n  const index = array.indexOf(item);\r\n  if (index === -1) {\r\n    array.push(item);\r\n  } else {\r\n    array.splice(index, 1);\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({ name: 'toarray' })\r\nexport class ToArrayPipe implements PipeTransform {\r\n  transform(obj: object | Array<any>): Array<any> {\r\n    if (typeof obj !== typeof {}) { return obj as Array<any>; }\r\n    return Object.keys(obj).map(key => {\r\n      return (obj as any)[key];\r\n    });\r\n  }\r\n}\r\n","export default \".template-option {\\n  cursor: pointer;\\n  padding: 4px 0 4px 8px;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  text-overflow: ellipsis;\\n}\\n.template-option:hover {\\n  background-color: #2a2d2e;\\n}\\n.template-option.active {\\n  background-color: #37373d;\\n}\\n.list {\\n  padding-left: 16px;\\n}\\n.collapsible {\\n  display: flex;\\n  align-items: center;\\n  cursor: pointer;\\n  overflow: hidden;\\n  white-space: nowrap;\\n  -webkit-user-select: none;\\n     -moz-user-select: none;\\n      -ms-user-select: none;\\n          user-select: none;\\n  padding: 3px 0;\\n}\\n.collapsible:hover {\\n  background-color: #2a2d2e;\\n}\\n.collapsible .mat-icon {\\n  width: 18px;\\n  height: 18px;\\n  font-size: 18px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9jb2RlLWVkaXRvci9jb2RlLXRlbXBsYXRlcy9DOlxcUHJvamVjdHNcXGVhdi1pdGVtLWRpYWxvZy1hbmd1bGFyL3Byb2plY3RzXFxuZy1kaWFsb2dzXFxzcmNcXGFwcFxcY29kZS1lZGl0b3JcXGNvZGUtdGVtcGxhdGVzXFxjb2RlLXRlbXBsYXRlcy5jb21wb25lbnQuc2NzcyIsInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9jb2RlLWVkaXRvci9jb2RlLXRlbXBsYXRlcy9jb2RlLXRlbXBsYXRlcy5jb21wb25lbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNFLGVBQUE7RUFDQSxzQkFBQTtFQUNBLGdCQUFBO0VBQ0EsbUJBQUE7RUFDQSx1QkFBQTtBQ0NGO0FEQ0U7RUFDRSx5QkFBQTtBQ0NKO0FERUU7RUFDRSx5QkFBQTtBQ0FKO0FESUE7RUFDRSxrQkFBQTtBQ0RGO0FESUE7RUFDRSxhQUFBO0VBQ0EsbUJBQUE7RUFDQSxlQUFBO0VBQ0EsZ0JBQUE7RUFDQSxtQkFBQTtFQUNBLHlCQUFBO0tBQUEsc0JBQUE7TUFBQSxxQkFBQTtVQUFBLGlCQUFBO0VBQ0EsY0FBQTtBQ0RGO0FER0U7RUFDRSx5QkFBQTtBQ0RKO0FESUU7RUFDRSxXQUFBO0VBQ0EsWUFBQTtFQUNBLGVBQUE7QUNGSiIsImZpbGUiOiJwcm9qZWN0cy9uZy1kaWFsb2dzL3NyYy9hcHAvY29kZS1lZGl0b3IvY29kZS10ZW1wbGF0ZXMvY29kZS10ZW1wbGF0ZXMuY29tcG9uZW50LnNjc3MiLCJzb3VyY2VzQ29udGVudCI6WyIudGVtcGxhdGUtb3B0aW9uIHtcclxuICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgcGFkZGluZzogNHB4IDAgNHB4IDhweDtcclxuICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XHJcblxyXG4gICY6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDQyLCA0NSwgNDYpO1xyXG4gIH1cclxuXHJcbiAgJi5hY3RpdmUge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDU1LCA1NSwgNjEpO1xyXG4gIH1cclxufVxyXG5cclxuLmxpc3Qge1xyXG4gIHBhZGRpbmctbGVmdDogMTZweDtcclxufVxyXG5cclxuLmNvbGxhcHNpYmxlIHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcclxuICB1c2VyLXNlbGVjdDogbm9uZTtcclxuICBwYWRkaW5nOiAzcHggMDtcclxuXHJcbiAgJjpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoNDIsIDQ1LCA0Nik7XHJcbiAgfVxyXG5cclxuICAubWF0LWljb24ge1xyXG4gICAgd2lkdGg6IDE4cHg7XHJcbiAgICBoZWlnaHQ6IDE4cHg7XHJcbiAgICBmb250LXNpemU6IDE4cHg7XHJcbiAgfVxyXG59XHJcbiIsIi50ZW1wbGF0ZS1vcHRpb24ge1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIHBhZGRpbmc6IDRweCAwIDRweCA4cHg7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHRleHQtb3ZlcmZsb3c6IGVsbGlwc2lzO1xufVxuLnRlbXBsYXRlLW9wdGlvbjpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMyYTJkMmU7XG59XG4udGVtcGxhdGUtb3B0aW9uLmFjdGl2ZSB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMzNzM3M2Q7XG59XG5cbi5saXN0IHtcbiAgcGFkZGluZy1sZWZ0OiAxNnB4O1xufVxuXG4uY29sbGFwc2libGUge1xuICBkaXNwbGF5OiBmbGV4O1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gIHVzZXItc2VsZWN0OiBub25lO1xuICBwYWRkaW5nOiAzcHggMDtcbn1cbi5jb2xsYXBzaWJsZTpob3ZlciB7XG4gIGJhY2tncm91bmQtY29sb3I6ICMyYTJkMmU7XG59XG4uY29sbGFwc2libGUgLm1hdC1pY29uIHtcbiAgd2lkdGg6IDE4cHg7XG4gIGhlaWdodDogMThweDtcbiAgZm9udC1zaXplOiAxOHB4O1xufSJdfQ== */\"","import { Component, OnInit, Input, ChangeDetectionStrategy, OnChanges, SimpleChanges } from '@angular/core';\r\n\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { EditForm } from '../../app-administration/shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { calculateTree, toggleInArray, calculateOpenItems } from './code-templates.helpers';\r\nimport { TreeItem } from '../models/tree-item.model';\r\n\r\n@Component({\r\n  selector: 'app-code-templates',\r\n  templateUrl: './code-templates.component.html',\r\n  styleUrls: ['./code-templates.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class CodeTemplatesComponent implements OnInit, OnChanges {\r\n  @Input() view: SourceView;\r\n  @Input() templates: string[];\r\n  tree: TreeItem[];\r\n  toggledItems: TreeItem[] = [];\r\n\r\n  constructor(private dialogService: DialogService) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  ngOnChanges(changes: SimpleChanges) {\r\n    if (changes.templates?.currentValue) {\r\n      this.tree = calculateTree(this.templates);\r\n      this.toggledItems = calculateOpenItems(this.view?.FileName, this.tree);\r\n    }\r\n    if (changes.view?.currentValue) {\r\n      this.toggledItems = calculateOpenItems(this.view?.FileName, this.tree);\r\n    }\r\n  }\r\n\r\n  openTemplate(path: string) {\r\n    const form: EditForm = {\r\n      items: [\r\n        { Path: path }\r\n      ]\r\n    };\r\n    this.dialogService.openCode(form);\r\n  }\r\n\r\n  toggleItem(item: TreeItem) {\r\n    toggleInArray(item, this.toggledItems);\r\n  }\r\n\r\n}\r\n","import { TreeItem } from '../models/tree-item.model';\r\n\r\nexport function calculateTree(templates: string[]): TreeItem[] {\r\n  if (!templates) { return []; }\r\n\r\n  const tree: TreeItem[] = [];\r\n  for (const template of templates) {\r\n    let parent: TreeItem[] = tree;\r\n    const paths = template.split('/');\r\n    const last = paths[paths.length - 1];\r\n    for (const path of paths) {\r\n      const existing = parent.find(item => item.name === path);\r\n      if (existing) {\r\n        parent = existing.children;\r\n      } else {\r\n        const item: TreeItem = {\r\n          name: path,\r\n          children: (path !== last) ? [] : null,\r\n          pathFromRoot: template,\r\n        };\r\n        parent.push(item);\r\n        parent = item.children;\r\n      }\r\n    }\r\n  }\r\n\r\n  return tree;\r\n}\r\n\r\nexport function calculateOpenItems(filename: string, tree: TreeItem[]): TreeItem[] {\r\n  if (!filename || !tree) { return []; }\r\n\r\n  const openItems: TreeItem[] = [];\r\n  const paths = filename.split('/');\r\n  let parent = tree;\r\n  for (const path of paths) {\r\n    const existing = parent.find(item => item.name === path);\r\n    if (!existing) { break; }\r\n    openItems.push(existing);\r\n    if (!existing.children) { break; }\r\n    parent = existing.children;\r\n  }\r\n\r\n  return openItems;\r\n}\r\n\r\nexport function toggleInArray(item: TreeItem, array: TreeItem[]) {\r\n  const index = array.indexOf(item);\r\n  if (index === -1) {\r\n    array.push(item);\r\n  } else {\r\n    array.splice(index, 1);\r\n  }\r\n}\r\n","export class SourceView {\r\n  AppId: number;\r\n  Code: string;\r\n  Extension: string;\r\n  FileName: string;\r\n  HasApp: boolean;\r\n  HasList: boolean;\r\n  IsSafe: boolean;\r\n  LocationScope: string;\r\n  Name: string;\r\n  Streams: SourceViewStreams;\r\n  Type: string;\r\n  TypeContent: string;\r\n  TypeContentPresentation: string;\r\n  TypeList: string;\r\n  TypeListPresentation: string;\r\n}\r\n\r\nexport class SourceViewStreams {\r\n  [key: string]: any; // spm TODO: Figure out the type\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\n\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { Snippet } from '../models/snippet.model';\r\nimport { Field } from '../../content-type-fields/models/field.model';\r\n\r\n@Injectable()\r\nexport class SnippetsService {\r\n  private keyPrefixes = ['@', '['];\r\n  private keyPrefixIndex = (view: SourceView) => (view.Type.indexOf('Razor') > -1) ? 0 : 1;\r\n\r\n  constructor(\r\n    private http: HttpClient,\r\n    private dnnContext: DnnContext,\r\n  ) { }\r\n\r\n  async getSnippets(view: SourceView) {\r\n    const res: any = await this.http.get('../sxc-develop/snippets.json.js').toPromise();\r\n    const snippets: Snippet[] = res.snippets;\r\n    const relevant = this.filterAwayNotNeededSnippetsList(snippets, view);\r\n    const standAndInputSnips = this.extractInputTypeSnippets(relevant);\r\n    const sets = this.initSnippetsWithConfig(standAndInputSnips.standardArray, view, standAndInputSnips.inputTypeSnippets);\r\n    return { sets, list: standAndInputSnips.standardArray };\r\n  }\r\n\r\n  // scan the list for sets starting with @ or [ and filter if not needed right now\r\n  private filterAwayNotNeededSnippetsList(list: Snippet[], view: SourceView) {\r\n    const newList = [];\r\n    for (const itm of list) {\r\n      const setHasPrefix = this.keyPrefixes.indexOf(itm.set[0]);\r\n      if (setHasPrefix === -1 || (setHasPrefix === this.keyPrefixIndex(view))) {\r\n        // if necessary, remove first char\r\n        if (setHasPrefix === this.keyPrefixIndex(view)) {\r\n          itm.set = itm.set.substr(1);\r\n        }\r\n        newList.push(itm);\r\n      }\r\n    }\r\n    return newList;\r\n  }\r\n\r\n  private extractInputTypeSnippets(list: Snippet[]) {\r\n    const standardArray: Snippet[] = [];\r\n    const inputTypeArray: Snippet[] = [];\r\n\r\n    for (const itm of list) {\r\n      const systemSnippet = itm.set[0] === '\\\\';\r\n      if (!systemSnippet) {\r\n        standardArray.push(itm);\r\n      } else {\r\n        itm.set = itm.set.substr(1);\r\n        inputTypeArray.push(itm);\r\n      }\r\n    }\r\n    const inputTypeSnippets = this.catalogInputTypeSnippets(inputTypeArray);\r\n    return {\r\n      standardArray,\r\n      inputTypeSnippets,\r\n    };\r\n  }\r\n\r\n  private catalogInputTypeSnippets(list: Snippet[]) {\r\n    const inputTypeList: any = {};\r\n    for (const itm of list) {\r\n      if (inputTypeList[itm.subset] === undefined) {\r\n        inputTypeList[itm.subset] = [];\r\n      }\r\n      inputTypeList[itm.subset].push(itm);\r\n    }\r\n    return inputTypeList;\r\n  }\r\n\r\n  private initSnippetsWithConfig(sets: any, templateConfiguration: SourceView, inputTypeSnippets: any) {\r\n    sets = this.makeTree(sets);\r\n\r\n    // retrieve all relevant content-types and infos\r\n    sets.Content = Object.assign({}, sets.Content, { Fields: {}, PresentationFields: {} });\r\n    if (templateConfiguration.TypeContent) {\r\n      this.loadContentType(sets.Content.Fields, templateConfiguration.TypeContent, 'Content', templateConfiguration, inputTypeSnippets);\r\n    }\r\n    if (templateConfiguration.TypeContentPresentation) {\r\n      this.loadContentType(\r\n        sets.Content.PresentationFields, templateConfiguration.TypeContentPresentation,\r\n        'Content.Presentation', templateConfiguration, inputTypeSnippets,\r\n      );\r\n    }\r\n\r\n    if (templateConfiguration.HasList) {\r\n      sets.List = Object.assign({}, sets.List, { Fields: {}, PresentationFields: {} });\r\n      if (templateConfiguration.TypeList) {\r\n        this.loadContentType(sets.List.Fields, templateConfiguration.TypeList, 'ListContent', templateConfiguration, inputTypeSnippets);\r\n      }\r\n      if (templateConfiguration.TypeListPresentation) {\r\n        this.loadContentType(\r\n          sets.List.PresentationFields, templateConfiguration.TypeListPresentation,\r\n          'ListContent.Presentation', templateConfiguration, inputTypeSnippets,\r\n        );\r\n      }\r\n    } else {\r\n      delete sets.List;\r\n    }\r\n\r\n    // maybe App-infos\r\n    if (templateConfiguration.HasApp) {\r\n      sets.App.Resources = {};\r\n      sets.App.Settings = {};\r\n      this.loadContentType(sets.App.Resources, 'App-Resources', 'App.Resources', templateConfiguration, inputTypeSnippets);\r\n      this.loadContentType(sets.App.Settings, 'App-Settings', 'App.Settings', templateConfiguration, inputTypeSnippets);\r\n    }\r\n\r\n    return sets;\r\n  }\r\n\r\n  // Convert the list into a tree with set/subset/item\r\n  private makeTree(list: Snippet[]) {\r\n    const tree: any = {};\r\n    for (const o of list) {\r\n      if (tree[o.set] === undefined) {\r\n        tree[o.set] = {};\r\n      }\r\n      if (tree[o.set][o.subset] === undefined) {\r\n        tree[o.set][o.subset] = [];\r\n      }\r\n      const reformatted = {\r\n        key: o.name,\r\n        label: this.label(o.set, o.subset, o.name),\r\n        snip: o.content,\r\n        help: o.help || this.help(o.set, o.subset, o.name),\r\n        links: this.linksList(o.links)\r\n      };\r\n\r\n      tree[o.set][o.subset].push(reformatted);\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  private label(set: any, subset: any, snip: any) {\r\n    const key = this.getHelpKey(set, subset, snip, '.Key');\r\n\r\n    let result = key;\r\n    if (result === key) {\r\n      result = snip;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private getHelpKey(set: any, subset: any, snip: any, addition: any) {\r\n    return 'SourceEditorSnippets' + '.' + set + '.' + subset + '.' + snip + addition;\r\n  }\r\n\r\n  private help(set: any, subset: any, snip: any) {\r\n    const key = this.getHelpKey(set, subset, snip, '.Help');\r\n\r\n    let result = key;\r\n    if (result === key) {\r\n      result = '';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private linksList(linksString: any) {\r\n    if (!linksString) {\r\n      return null;\r\n    }\r\n    const links = [];\r\n    const llist = linksString.split('\\n');\r\n    for (const l of llist) {\r\n      const pair = l.split(':');\r\n      if (pair.length === 3) {\r\n        links.push({ name: pair[0].trim(), url: pair[1].trim() + ':' + pair[2].trim() });\r\n      }\r\n    }\r\n    if (links.length === 0) { return null; }\r\n    return links;\r\n  }\r\n\r\n  // get fields in content types\r\n  private loadContentType(target: any, type: any, prefix: any, templateConfiguration: SourceView, inputTypeSnippets: any) {\r\n    this.getFields(templateConfiguration.AppId, type)\r\n      .then(fields => {\r\n        // first add common items if the content-type actually exists\r\n        for (const value of fields) {\r\n          const fieldname = value.StaticName;\r\n          target[fieldname] = {\r\n            key: fieldname,\r\n            label: fieldname,\r\n            snip: this.valuePlaceholder(prefix, fieldname, templateConfiguration),\r\n            help: value.Metadata.merged.Notes || '' + ' (' + value.Type.toLowerCase() + ') '\r\n          };\r\n          // try to add generic snippets specific to this input-type\r\n          const snipDefaults = cloneDeep(target[fieldname]); // must be a copy, because target[fieldname] will grow\r\n\r\n          this.attachSnippets(target, prefix, fieldname, value.InputType, snipDefaults, inputTypeSnippets);\r\n        }\r\n\r\n        const std = ['EntityId', 'EntityTitle', 'EntityGuid', 'EntityType', 'IsPublished', 'Modified'];\r\n        if (fields.length) {\r\n          // tslint:disable-next-line:prefer-for-of\r\n          for (let i = 0; i < std.length; i++) {\r\n            target[std[i]] = {\r\n              key: std[i],\r\n              label: std[i],\r\n              snip: this.valuePlaceholder(prefix, std[i], templateConfiguration),\r\n              help: 'SourceEditorSnippets.StandardFields.' + std[i] + '.Help'\r\n            };\r\n          }\r\n        }\r\n      });\r\n  }\r\n\r\n  private valuePlaceholder(obj: any, val: any, templateConfiguration: any) {\r\n    return (templateConfiguration.Type.indexOf('Razor') > -1)\r\n      ? '@' + obj + '.' + val\r\n      : '[' + obj.replace('.', ':') + ':' + val + ']';\r\n  }\r\n\r\n  private getFields(appId: number, staticName: string) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('eav/contenttype/getfields'), {\r\n      params: { appid: appId.toString(), staticName },\r\n    })\r\n      .toPromise()\r\n      .then((fields: Field[]) => {\r\n        if (fields) {\r\n          for (const fld of fields) {\r\n            if (!fld.Metadata) { continue; }\r\n            const md = fld.Metadata;\r\n            const allMd = md.All;\r\n            const typeMd = md[fld.Type];\r\n            const inputMd = md[fld.InputType];\r\n            md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n          }\r\n        }\r\n        return fields;\r\n      });\r\n  }\r\n\r\n  private attachSnippets(target: any, prefix: any, fieldname: any, inputType: any, snipDefaults: any, inputTypeSnippets: any) {\r\n    let genericSnippet = inputTypeSnippets[inputType];\r\n    if (inputType.indexOf('-')) {   // if it's a sub-type, let's also get the master-type\r\n      const fieldType = inputType.substr(0, inputType.indexOf('-'));\r\n      if (fieldType) {\r\n        const typeSnips = inputTypeSnippets[fieldType];\r\n        if (typeSnips) {\r\n          genericSnippet = genericSnippet ? genericSnippet.concat(typeSnips) : typeSnips;\r\n        }\r\n      }\r\n    }\r\n    if (!genericSnippet) {\r\n      return;\r\n    }\r\n\r\n    if (target[fieldname].more === undefined) {\r\n      target[fieldname].more = [];\r\n    }\r\n    const fieldSnips = target[fieldname].more;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let g = 0; g < genericSnippet.length; g++) {\r\n      try {\r\n        fieldSnips[fieldname + '-' + genericSnippet[g].name] = Object.assign({}, snipDefaults, {\r\n          key: fieldname + ' - ' + genericSnippet[g].name,\r\n          label: genericSnippet[g].name,\r\n          snip: this.localizeGenericSnippet(genericSnippet[g].content, prefix, fieldname),\r\n          collapse: true\r\n        });\r\n      } finally { }\r\n    }\r\n  }\r\n\r\n  private localizeGenericSnippet(snip: any, objName: any, fieldName: any) {\r\n    snip = snip.replace(/(\\$\\{[0-9]+\\:)var(\\})/gi, '$1' + objName + '$2')\r\n      .replace(/(\\$\\{[0-9]+\\:)prop(\\})/gi, '$1' + fieldName + '$2');\r\n    return snip;\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { Context as DnnContext } from '@2sic.com/dnn-sxc-angular';\r\n\r\nimport { Context } from '../../shared/services/context';\r\nimport { SourceView } from '../models/source-view.model';\r\n\r\n@Injectable()\r\nexport class SourceService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  /** Key is templateId or path */\r\n  get(key: number | string) {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('app-sys/appassets/asset'), {\r\n      params: this.calcParams(key)\r\n    }).pipe(\r\n      map((view: SourceView) => {\r\n        if (view.Type.toLowerCase() === 'auto') {\r\n          switch (view.Extension.toLowerCase()) {\r\n            case '.cs':\r\n            case '.cshtml':\r\n              view.Type = 'Razor';\r\n              break;\r\n            case '.html':\r\n            case '.css':\r\n            case '.js':\r\n              view.Type = 'Token';\r\n              break;\r\n          }\r\n        }\r\n        return view;\r\n      })\r\n    ) as Observable<SourceView>;\r\n  }\r\n\r\n  /** Key is templateId or path */\r\n  save(key: number | string, view: SourceView) {\r\n    return this.http.post(this.dnnContext.$2sxc.http.apiUrl('app-sys/appassets/asset'), view, {\r\n      params: this.calcParams(key),\r\n    }) as Observable<boolean>;\r\n  }\r\n\r\n  getTemplates() {\r\n    return this.http.get(this.dnnContext.$2sxc.http.apiUrl('app-sys/appassets/list'), {\r\n      params: { appId: this.context.appId.toString(), global: 'false', withSubfolders: 'true' },\r\n    }) as Observable<string[]>;\r\n  }\r\n\r\n  private calcParams(key: number | string) {\r\n    if (typeof key === typeof 0) {\r\n      return { templateId: key.toString() };\r\n    } else {\r\n      return { path: key as string };\r\n    }\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}