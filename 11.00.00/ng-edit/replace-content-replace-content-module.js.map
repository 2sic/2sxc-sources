{"version":3,"sources":["./src/app/replace-content/replace-content.component.html","./src/app/replace-content/replace-content-dialog.config.ts","./src/app/replace-content/replace-content-routing.module.ts","./src/app/replace-content/replace-content.component.scss","./src/app/replace-content/replace-content.component.ts","./src/app/replace-content/replace-content.module.ts"],"names":[],"mappings":"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","file":"replace-content-replace-content-module.js","sourcesContent":["export default \"<div mat-dialog-title>\\r\\n  <div class=\\\"dialog-title-box\\\">Replace Content Item</div>\\r\\n</div>\\r\\n\\r\\n<router-outlet></router-outlet>\\r\\n\\r\\n<p class=\\\"dialog-description\\\">\\r\\n  By replacing a content-item you can make a other content appear in the slot of the original content.\\r\\n</p>\\r\\n\\r\\n<div class=\\\"options-box\\\">\\r\\n  <mat-form-field class=\\\"options-box__field\\\" appearance=\\\"standard\\\" color=\\\"accent\\\">\\r\\n    <mat-label>Choose item</mat-label>\\r\\n    <mat-select [(ngModel)]=\\\"item.id\\\" name=\\\"Language\\\">\\r\\n      <mat-option *ngFor=\\\"let option of options\\\" [value]=\\\"option.value\\\">{{ option.label }}</mat-option>\\r\\n    </mat-select>\\r\\n  </mat-form-field>\\r\\n  <button mat-icon-button class=\\\"options-box__copy\\\" matTooltip=\\\"Copy\\\" (click)=\\\"copySelected()\\\">\\r\\n    <mat-icon>file_copy</mat-icon>\\r\\n  </button>\\r\\n</div>\\r\\n\\r\\n<div class=\\\"dialog-actions-box\\\">\\r\\n  <button mat-raised-button (click)=\\\"closeDialog()\\\">Cancel</button>\\r\\n  <button mat-raised-button color=\\\"accent\\\" (click)=\\\"save()\\\">Save</button>\\r\\n</div>\\r\\n\";","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const replaceContentDialog: DialogConfig = {\r\n  name: 'REPLACE_CONTENT_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'small',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { ReplaceContentComponent } = await import('./replace-content.component');\r\n    return ReplaceContentComponent;\r\n  }\r\n};\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { replaceContentDialog } from './replace-content-dialog.config';\r\nimport { edit } from '../../../../edit/edit.matcher';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', component: DialogEntryComponent, data: { dialog: replaceContentDialog }, children: [\r\n      {\r\n        matcher: edit,\r\n        loadChildren: () => import('../../../../edit/edit.module').then(m => m.EditModule)\r\n      },\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class ReplaceContentRoutingModule { }\r\n","export default \".options-box {\\n  display: flex;\\n  align-items: flex-end;\\n}\\n.options-box__field {\\n  width: 40%;\\n}\\n.options-box__copy {\\n  margin-left: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9yZXBsYWNlLWNvbnRlbnQvQzpcXFByb2plY3RzXFxlYXYtaXRlbS1kaWFsb2ctYW5ndWxhci9wcm9qZWN0c1xcbmctZGlhbG9nc1xcc3JjXFxhcHBcXHJlcGxhY2UtY29udGVudFxccmVwbGFjZS1jb250ZW50LmNvbXBvbmVudC5zY3NzIiwicHJvamVjdHMvbmctZGlhbG9ncy9zcmMvYXBwL3JlcGxhY2UtY29udGVudC9yZXBsYWNlLWNvbnRlbnQuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxhQUFBO0VBQ0EscUJBQUE7QUNDRjtBRENFO0VBQ0UsVUFBQTtBQ0NKO0FERUU7RUFDRSxnQkFBQTtBQ0FKIiwiZmlsZSI6InByb2plY3RzL25nLWRpYWxvZ3Mvc3JjL2FwcC9yZXBsYWNlLWNvbnRlbnQvcmVwbGFjZS1jb250ZW50LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm9wdGlvbnMtYm94IHtcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcclxuXHJcbiAgJl9fZmllbGQge1xyXG4gICAgd2lkdGg6IDQwJTtcclxuICB9XHJcblxyXG4gICZfX2NvcHkge1xyXG4gICAgbWFyZ2luLWxlZnQ6IDhweDtcclxuICB9XHJcbn1cclxuIiwiLm9wdGlvbnMtYm94IHtcbiAgZGlzcGxheTogZmxleDtcbiAgYWxpZ24taXRlbXM6IGZsZXgtZW5kO1xufVxuLm9wdGlvbnMtYm94X19maWVsZCB7XG4gIHdpZHRoOiA0MCU7XG59XG4ub3B0aW9ucy1ib3hfX2NvcHkge1xuICBtYXJnaW4tbGVmdDogOHB4O1xufSJdfQ== */\"","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Router, ActivatedRoute, NavigationEnd } from '@angular/router';\r\nimport { Subscription } from 'rxjs';\r\nimport { filter } from 'rxjs/operators';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\n\r\nimport { ContentGroupService } from '../manage-content-list/services/content-group.service';\r\nimport { ReplaceOption } from './models/replace-option.model';\r\nimport { ContentGroup } from '../manage-content-list/models/content-group.model';\r\nimport { EditForm } from '../app-administration/shared/models/edit-form.model';\r\n\r\n@Component({\r\n  selector: 'app-replace-content',\r\n  templateUrl: './replace-content.component.html',\r\n  styleUrls: ['./replace-content.component.scss']\r\n})\r\nexport class ReplaceContentComponent implements OnInit, OnDestroy {\r\n  options: ReplaceOption[];\r\n  item: ContentGroup;\r\n  contentTypeName: string;\r\n\r\n  private subscription = new Subscription();\r\n  private hasChild: boolean;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<ReplaceContentComponent>,\r\n    private contentGroupService: ContentGroupService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.hasChild = !!this.route.snapshot.firstChild;\r\n    this.item = {\r\n      id: null,\r\n      guid: this.route.snapshot.paramMap.get('guid'),\r\n      part: this.route.snapshot.paramMap.get('part'),\r\n      index: parseInt(this.route.snapshot.paramMap.get('index'), 10),\r\n    };\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.getConfig();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscription.unsubscribe();\r\n    this.subscription = null;\r\n  }\r\n\r\n  save() {\r\n    this.snackBar.open('Saving...');\r\n    this.contentGroupService.saveItem(this.item).subscribe(() => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.closeDialog();\r\n    });\r\n  }\r\n\r\n  copySelected() {\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: this.contentTypeName, DuplicateEntity: this.item.id }],\r\n    };\r\n    this.router.navigate([`edit/${JSON.stringify(form)}`], { relativeTo: this.route });\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  private getConfig() {\r\n    this.contentGroupService.getItems(this.item).subscribe(replaceConfig => {\r\n      const itemKeys = Object.keys(replaceConfig.Items);\r\n      this.options = [];\r\n      for (const key of itemKeys) {\r\n        const nKey = parseInt(key, 10);\r\n        const itemName = replaceConfig.Items[nKey];\r\n        this.options.push({ label: `${itemName} (${nKey})`, value: nKey });\r\n      }\r\n      if (!this.item.id) {\r\n        this.item.id = replaceConfig.SelectedId;\r\n      }\r\n      if (!this.contentTypeName) {\r\n        this.contentTypeName = replaceConfig.ContentTypeName;\r\n      }\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe((event: NavigationEnd) => {\r\n        const hadChild = this.hasChild;\r\n        this.hasChild = !!this.route.snapshot.firstChild;\r\n        if (!this.hasChild && hadChild) {\r\n          this.getConfig();\r\n          const navigation = this.router.getCurrentNavigation();\r\n          const editResult = navigation.extras?.state;\r\n          if (editResult) {\r\n            this.item.id = editResult[Object.keys(editResult)[0]];\r\n          }\r\n        }\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\n\r\nimport { ReplaceContentRoutingModule } from './replace-content-routing.module';\r\nimport { ReplaceContentComponent } from './replace-content.component';\r\nimport { SharedComponentsModule } from '../shared/shared-components.module';\r\nimport { Context } from '../shared/services/context';\r\nimport { ContentGroupService } from '../manage-content-list/services/content-group.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    ReplaceContentComponent,\r\n  ],\r\n  entryComponents: [\r\n    ReplaceContentComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    ReplaceContentRoutingModule,\r\n    SharedComponentsModule,\r\n    MatDialogModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatTooltipModule,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    FormsModule,\r\n    MatSnackBarModule,\r\n  ],\r\n  providers: [\r\n    Context,\r\n    ContentGroupService,\r\n  ]\r\n})\r\nexport class ReplaceContentModule { }\r\n"],"sourceRoot":"webpack:///"}