"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["common"],{1657:(g,p,t)=>{t.d(p,{E:()=>i});var e=t(9148),a=t(6256),o=t(5060),c=t(3840),u=t(8136),m=t(4824),s=t(4601);function l(h,f){if(1&h){const _=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(_);const E=e.XpG();return e.Njj(E.openLightspeedFeatureInfo())}),e.j41(1,"mat-icon",3),e.EFF(2," bolt "),e.k0s()()}}function d(h,f){if(1&h&&(e.j41(0,"a",5)(1,"mat-icon",6),e.EFF(2," bolt "),e.k0s()()),2&h){const _=e.XpG(2);e.Y8G("href","#"+_.params().lightSpeedLink(_.lightSpeedOwner()),e.B4B)}}function n(h,f){if(1&h&&(e.j41(0,"a",5)(1,"mat-icon",7),e.EFF(2," bolt "),e.k0s()()),2&h){const _=e.XpG(2);e.Y8G("href","#"+_.params().lightSpeedLink(_.lightSpeedOwner()),e.B4B)}}function r(h,f){if(1&h&&(e.j41(0,"div",4),e.DNE(1,d,3,1,"a",5)(2,n,3,1,"a",5),e.k0s()),2&h){const _=e.XpG();e.ZvI("eav-grid-action-button ",_.appHasLightSpeed?"":"disabled",""),e.Y8G("tippy",_.appHasLightSpeed?_.lightSpeed().Title:"Not yet configured for LightSpeed"),e.R7$(),e.vxM(_.appLightSpeedEnabled?1:2)}}let i=(()=>{class h{constructor(){this.lightSpeedOwner=e.hFB.required(),this.params=e.hFB.required(),this.lightSpeed=e.hFB.required(),this.features=(0,e.WQX)(m.t),this.lightSpeedEnabled=this.features.isEnabled[u.T.LightSpeed]}get appHasLightSpeed(){return null!=this.lightSpeed()?.Id}get appLightSpeedEnabled(){return 1==this.lightSpeed()?.IsEnabled}openLightspeedFeatureInfo(){this.params().openLightspeedFeatureInfo()}static{this.\u0275fac=function(v){return new(v||h)}}static{this.\u0275cmp=e.VBU({type:h,selectors:[["app-lightspeed-action"]],inputs:{lightSpeedOwner:[1,"lightSpeedOwner"],params:[1,"params"],lightSpeed:[1,"lightSpeed"]},standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled"],["matRipple","",3,"class","tippy"],["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled",3,"click"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false"],["matRipple","",3,"tippy"],[1,"default-link",3,"href"],["matBadgeSize","small","matBadge","\u2705","matBadgePosition","below after","aria-hidden","false"],["matBadgeSize","small","matBadge","\u26d4","matBadgePosition","below after","aria-hidden","false"]],template:function(v,E){1&v&&e.DNE(0,l,3,0,"div",0)(1,r,3,5,"div",1),2&v&&e.vxM(E.lightSpeedEnabled()?1:0)},dependencies:[s.e,c.m_,c.An,a.Y,a.k,o.pZ,o.r6],encapsulation:2})}}return h})()},8713:(g,p,t)=>{t.d(p,{g:()=>o});var e=t(52),a=t(334);class o{static getLightSpeedEditParams(u){return{items:[a.c.newMetadata(u,e.YX.appMetadata.LightSpeed.ContentTypeName,e.YX.metadata.app,!0)]}}}},7703:(g,p,t)=>{t.d(p,{s:()=>a,w:()=>e});const e=/^[A-Za-z][A-Za-z0-9]+$/,a="Standard letters and numbers are allowed. Must start with a letter."},2620:(g,p,t)=>{t.d(p,{y:()=>e});class e{refresh(o){return!0}}},8362:(g,p,t)=>{t.d(p,{l:()=>u});var e=t(9148),a=t(271),o=t(1772),c=t(6474);let u=(()=>{class m extends c.D{getStackSig(l,d,n,r=!1){const i=(0,e.vPA)([]);return this.getAndWrite(o.u+"GetStack",{params:{appId:this.appId,part:l,...d&&{key:d},...n&&{view:n}}},i),(0,e.EWP)(()=>r?i().map(h=>({...h,_value:JSON.stringify(h.Value)})):i())}getStack(l,d,n,r=!1){return this.getHttp(o.u+"GetStack",{params:{appId:this.appId,part:l,...d&&{key:d},...n&&{view:n}}}).pipe((0,a.T)(i=>{if(!r)return i;for(const h of i)h._value=JSON.stringify(h.Value);return i}))}static{this.\u0275fac=(()=>{let l;return function(n){return(l||(l=e.xGo(m)))(n||m)}})()}static{this.\u0275prov=e.jDH({token:m,factory:m.\u0275fac})}}return m})()},1423:(g,p,t)=>{t.d(p,{g:()=>s});var e=t(5060),a=t(2938),o=t(4601),c=t(4038),u=t(5081),m=t(9148);let s=(()=>{class l{constructor(){this.clipboard=(0,a.d)(u.W)}agInit(n){this.value=n.value}refresh(n){return!0}copy(n){n=c.i.tryParse(n)??n,this.clipboard.copyToClipboard(n)}static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275cmp=m.VBU({type:l,selectors:[["app-analyze-settings-value"]],standalone:!0,features:[m.aNF],decls:3,vars:2,consts:[["matRipple","",1,"value-box","highlight",3,"click","tippy"],[1,"value"]],template:function(r,i){1&r&&(m.j41(0,"div",0),m.bIt("click",function(){return i.copy(i.value)}),m.j41(1,"span",1),m.EFF(2),m.k0s()()),2&r&&(m.Y8G("tippy",i.value),m.R7$(2),m.JRh(i.value))},dependencies:[e.pZ,e.r6,o.e],styles:[".value-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.value-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}"]})}}return l})()},3583:(g,p,t)=>{t.d(p,{U:()=>d});var e=t(6474),a=t(9148);const m="admin/app/app";let d=(()=>{class n extends e.D{getAll(){return this.getSignal("admin/app/list",{params:{zoneId:this.zoneId}})}getInheritable(){return this.getSignal("admin/app/InheritableApps",{params:{zoneId:this.zoneId}})}getPendingApps(){return this.getSignal("admin/app/GetPendingApps",{params:{zoneId:this.zoneId}})}create(i,h,f){return this.http.post(this.apiUrl(m),{},{params:{zoneId:this.zoneId,name:i,...null!=h&&{inheritAppId:h},...null!=f&&{templateId:f}}})}installPendingApps(i){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),i,{params:{zoneId:this.zoneId}})}delete(i){return this.http.delete(this.apiUrl(m),{params:{zoneId:this.zoneId,appId:i.toString()}})}flushCache(i){return this.getHttpApiUrl("admin/app/flushcache",{params:{zoneId:this.zoneId,appId:i.toString()}})}static{this.\u0275fac=(()=>{let i;return function(f){return(i||(i=a.xGo(n)))(f||n)}})()}static{this.\u0275prov=a.jDH({token:n,factory:n.\u0275fac})}}return n})()},3992:(g,p,t)=>{t.d(p,{b:()=>d});var e=t(271),a=t(3550),o=t(6474),c=t(9148);const s="sys/license/Summary";let d=(()=>{class n extends o.D{saveFeatures(i){return this.http.post(this.apiUrl("admin/feature/SaveNew"),i)}getLicenses(){return this.getHttpApiUrl(s)}getLicensesSig(){return this.getSignal(s)}uploadLicense(i){const h=new FormData;return h.append("File",i),this.http.post(this.apiUrl("sys/license/Upload"),h).pipe((0,e.T)(f=>({Success:f.Success,Messages:[{MessageType:f.Success?a.G1.Success:a.G1.Error,Text:`License ${f.Success?"uploaded":"upload failed"}: ${f.Message}`}]})))}retrieveLicense(){return this.getHttpApiUrl("sys/license/Retrieve")}static{this.\u0275fac=(()=>{let i;return function(f){return(i||(i=c.xGo(n)))(f||n)}})()}static{this.\u0275prov=c.jDH({token:n,factory:n.\u0275fac})}}return n})()},7130:(g,p,t)=>{t.d(p,{U:()=>s});var e=t(6474),a=t(9148);let s=(()=>{class l extends e.D{getLanguage(n){return this.getSignal("admin/zone/GetLanguages",{},n)}toggleLanguage(n,r){return this.getHttpApiUrl("admin/zone/SwitchLanguage",{params:{cultureCode:n,enable:r.toString()}})}getSystemInfo(n){return this.getSignal("admin/zone/GetSystemInfo",{},n)}getLanguagesPermissions(n){return this.getSignal("admin/app/languages",{params:{appId:this.appId}},n)}static{this.\u0275fac=(()=>{let n;return function(i){return(n||(n=a.xGo(l)))(i||l)}})()}static{this.\u0275prov=a.jDH({token:l,factory:l.\u0275fac})}}return l})()},753:(g,p,t)=>{t.r(p),t.d(p,{contentItemsRoutes:()=>s});var e=t(3454),a=t(5544),o=t(9204);const c={name:"IMPORT_CONTENT_ITEM_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,o.A)(function*(){const{ImportContentItemComponent:l}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts")]).then(t.bind(t,6754));return l})()},u={name:"CONTENT_ITEMS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,o.A)(function*(){const{ContentItemsComponent:l}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("default-projects_eav-ui_src_app_shared_services_service-base_ts-node_modules_angular_material-ffa7b3"),t.e("default-node_modules_angular_material_fesm2022_slide-toggle_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_content-items_content-items_component_ts")]).then(t.bind(t,7730));return l})()};var m=t(1195);const s=[{path:"",component:a.DialogEntryComponent,data:{dialog:u},children:[...e.H.getRoutes(),{path:"export/:contentTypeStaticName",loadChildren:()=>t.e("projects_eav-ui_src_app_content-export_content-export_routing_ts").then(t.bind(t,4350)).then(l=>l.ContentExportRoutes)},{path:"export/:contentTypeStaticName/:selectedIds",loadChildren:()=>t.e("projects_eav-ui_src_app_content-export_content-export_routing_ts").then(t.bind(t,4350)).then(l=>l.ContentExportRoutes)},{path:"import",component:a.DialogEntryComponent,data:{dialog:c}},{path:":contentTypeStaticName/import",loadChildren:()=>t.e("projects_eav-ui_src_app_content-import_content-import_routing_ts").then(t.bind(t,3031)).then(l=>l.contentImportRoutes),data:{title:"Import Items"}},...m.RD]}]},4007:(g,p,t)=>{t.d(p,{D:()=>o,y:()=>a});var e=t(1726);function a(c){return{[e.O.Boolean]:"toggle_on",[e.O.Custom]:"extension",[e.O.DateTime]:"today",[e.O.Empty]:"crop_free",[e.O.Entity]:"share",[e.O.Hyperlink]:"link",[e.O.Number]:"dialpad",[e.O.String]:"text_fields"}[c]??"device_unknown"}function o(c){return{[e.O.Boolean]:"Boolean (yes/no)",[e.O.Custom]:"Custom - ui-tools or custom types",[e.O.DateTime]:"Date and/or time",[e.O.Empty]:"Empty - for form-titles etc.",[e.O.Entity]:"Entity (other content-items)",[e.O.Hyperlink]:"Link / file reference",[e.O.Number]:"Number",[e.O.String]:"Text / string"}[c]??"device_unknown"}},5733:(g,p,t)=>{t.r(p),t.d(p,{contentTypeFieldsRoutes:()=>l});var e=t(1195),a=t(3454),o=t(2437),c=t(5544),u=t(9204);const s={name:"EDIT_CONTENT_TYPE_FIELDS_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,u.A)(function*(){const{EditContentTypeFieldsComponent:d}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("common"),t.e("projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-974b18")]).then(t.bind(t,4099));return d})()},l=[{path:"",component:c.DialogEntryComponent,data:{dialog:{name:"CONTENT_TYPE_FIELDS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,u.A)(function*(){const{ContentTypeFieldsComponent:d}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_services_clipboard_service_ts-node_modules_angular_mat-15cf82"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("default-projects_eav-ui_src_app_shared_services_service-base_ts-node_modules_angular_material-ffa7b3"),t.e("default-projects_eav-ui_src_app_features_feature-icon-text_feature-icon-text_component_ts-pro-5596fb"),t.e("common"),t.e("projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts")]).then(t.bind(t,5715));return d})()}},children:[{path:"add/:contentTypeStaticName",component:c.DialogEntryComponent,data:{dialog:s}},{path:"update/:contentTypeStaticName/:id/:editMode",component:c.DialogEntryComponent,data:{dialog:s}},...a.H.getRoutes(),o.k.route,...e.RD]}]},5160:(g,p,t)=>{t.d(p,{O:()=>o});var e=t(9148),a=t(4456);let o=(()=>{class c{constructor(){this.appReservedNames=(0,e.hFB)({})}validate(m){if(!m.value)return null;const s=m.value.toLocaleLowerCase(),l=Object.keys(this.appReservedNames()).find(d=>d.toLocaleLowerCase()===s);return l?{reservedNames:this.appReservedNames()[l]}:null}static mergeReserved(m,s){const l={};return s.forEach(d=>{l[d.StaticName]="this field already exists"}),{...m,...l}}static{this.\u0275fac=function(s){return new(s||c)}}static{this.\u0275dir=e.FsC({type:c,selectors:[["","appReservedNames",""]],inputs:{appReservedNames:[1,"appReservedNames"]},standalone:!0,features:[e.Jv_([{provide:a.cz,useExisting:c,multi:!0}])]})}}return c})()},6068:(g,p,t)=>{t.d(p,{g:()=>e.g});var e=t(4029)},6740:(g,p,t)=>{t.d(p,{z:()=>a});const a=t(6619).c.production?[]:["ViewController"]},8857:(g,p,t)=>{t.d(p,{a:()=>l});var e=t(2434),a=t(4435),o=t(6740),c=t(6953),u=t(8275);const m={all:!0,constructor:!1,markTouched:!1,set:!1,disable:!1,getErrors:!0,fields:[...o.z,"*"]},s="ValidationMessage.";class l{constructor(n,r="unknown",i=!1){this.control=n,this.name=r,this.moreDisabled=i,this.log=(0,a.T)({UiControl:l},m),this.#t={jsonWarning:`${s}JsonWarning`,formulaWarning:`${s}NotValid`},this.control??={dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1},this.log.extendName(`[${r}]`),this.log.aIfInList("fields",this.name,{moreDisabled:i},"constructor")}static emptyControl(){return new l({dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1})}get dirty(){return this.control.dirty}get invalid(){return this.control.invalid}get touched(){return this.control.touched}get disabled(){return this.control.disabled||this.moreDisabled}get touchedAndInvalid(){return this.control.touched&&this.control.invalid}markTouched(){this.log.aIfInList("fields",this.name,null,"markTouched"),l.markTouched(this.control)}setIfChanged(n){this.log.aIfInList("fields",this.name,{before:this.control.value,newValue:n},"setIfChanged"),!(0,e.A)(n,this.control.value)&&this.#e(n)}#e(n){const r=this.control,i=r.value;this.log.aIfInList("fields",this.name,{before:i,newValue:n},"set"),r.touched||r.markAsTouched(),!r.dirty&&!c.$.fieldValuesAreEqual(i,n)&&r.markAsDirty(),r.patchValue(n)}disable(n){this.log.aIfInList("fields",this.name,null,`disable: ${n}`),l.disable(this.control,n)}static markTouched(n){n.touched||(n.markAsTouched(),n.updateValueAndValidity())}static disable(n,r){n.disabled!==r&&(r?n.disable():n.enable())}getErrors(){const n=this.control,r=n.errors,i=this.log.fnIfInList("getErrors","fields",this.name,{control:n,name:this.name});if(!n.invalid)return i.r("","valid");if(!n.dirty&&!n.touched)return i.r("","not dirty or touched");for(const h of Object.keys(r)){const f="formulaError"===h?n.errors.formulaMessage??u.n.messages[h]?.(!0):u.n.messages[h]?.(!0);if(f)return i.r(f,"error found")}return i.r("","no error")}#t;getWarnings(){const n=this.control;if(null==n._warning||!n.dirty&&!n.touched)return"";let r="";for(const i of Object.keys(n._warning))if(r="formulaWarning"===i?n._warning.formulaMessage??this.#t[i]:this.#t[i],r)break;return r}}},6953:(g,p,t)=>{t.d(p,{$:()=>a});var e=t(3826);class a{static fieldValuesAreEqual(c,u){return!!(c===u||"number"==typeof c&&"number"==typeof u&&isNaN(c)&&isNaN(u)||Array.isArray(c)&&Array.isArray(u)&&e.a.arraysEqual(c,u))}static getItemValuesChanges(c,u){const m={};for(const s of Object.keys(u)){const l=u[s];a.fieldValuesAreEqual(l,c[s])||(m[s]=l)}return 0===Object.keys(m).length?void 0:m}}},8275:(g,p,t)=>{t.d(p,{n:()=>c});var e=t(8857);const a="ValidationMessage.",o="ValidationMessage.NotValid";let c=(()=>{class u{static{this.messages={required:s=>s?`${a}Required`:`${a}RequiredShort`,min:s=>s?`${a}Min`:o,max:s=>s?`${a}Max`:o,minNoItems:s=>s?`${a}MinNoItems`:o,maxNoItems:s=>s?`${a}MaxNoItems`:o,pattern:s=>s?`${a}Pattern`:o,decimals:s=>s?`${a}Decimals`:o,jsonError:s=>s?`${a}JsonError`:o,formulaError:s=>o}}static validateForm(s){const l={};for(const[d,n]of Object.entries(s.controls))if(e.a.markTouched(n),n.invalid)for(const r of Object.keys(n.errors))if(l[d]=this.messages[r]?.(!1),l[d])break;return l}}return u})()},7903:(g,p,t)=>{t.r(p),t.d(p,{importRoutes:()=>c});var e=t(5544),a=t(9204);const c=[{path:"",component:e.DialogEntryComponent,data:{dialog:{name:"IMPORT_APP_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,a.A)(function*(){const{ImportAppComponent:u}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("projects_eav-ui_src_app_import-app_import-app_component_ts")]).then(t.bind(t,781));return u})()}}}]},9669:(g,p,t)=>{t.d(p,{y:()=>c});var e=t(6474),a=t(9148);const o="cms/contentgroup/";let c=(()=>{class u extends e.D{getItems(s){return this.getHttpApiUrl(o+"replace",{params:{appId:this.appId,guid:s.guid,part:s.part,index:s.index.toString()}})}saveItem(s){return this.http.post(this.apiUrl(o+"replace"),{},{params:{guid:s.guid,part:s.part,index:s.index.toString(),entityId:s.id.toString(),add:`${s.add}`}})}removeItem(s,l){return this.http.delete(this.apiUrl("cms/list/delete"),{params:{index:l,parent:s.guid,fields:s.part}})}getList(s){return this.getHttpApiUrl(o+"itemlist",{params:{appId:this.appId,guid:s.guid,part:s.part}})}saveList(s,l){return this.http.post(this.apiUrl(o+"itemlist"),l,{params:{appId:this.appId,guid:s.guid,part:s.part}})}getHeader(s,l){return this.getSignal(o+"header",{params:{appId:this.appId,guid:s.guid}},l)}static{this.\u0275fac=(()=>{let s;return function(d){return(s||(s=a.xGo(u)))(d||u)}})()}static{this.\u0275prov=a.jDH({token:u,factory:u.\u0275fac})}}return u})()},318:(g,p,t)=>{t.r(p),t.d(p,{replaceContentRoutes:()=>u});var e=t(5544),a=t(9204);const o={name:"REPLACE_CONTENT_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,a.A)(function*(){const{ReplaceContentComponent:m}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_autocomplete_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb")]).then(t.bind(t,4513));return m})()};var c=t(1195);const u=[{path:"",component:e.DialogEntryComponent,data:{dialog:o},children:[...c.Ed]}]},5544:(g,p,t)=>{t.r(p),t.d(p,{DialogEntryComponent:()=>m});var e=t(4435),a=t(8873),o=t(9148),c=t(7941),u=t(2159);let m=(()=>{class s{#e;#t;constructor(d,n,r,i,h,f){this.matDialog=d,this.viewContainerRef=n,this.router=r,this.route=i,this.context=h,this.changeDetectorRef=f,this.log=(0,e.T)({DialogEntryComponent:s});const _=this.router.getCurrentNavigation();this.#e=_?.extras?.state||{}}ngOnInit(){const d=this.log.fn("ngOnInit"),n=this.route.snapshot.data.dialog;if(null==n)throw new Error("Could not find config for dialog. Did you forget to add DialogConfig to route data?");d.a("Open dialog: "+n.name,{id:this.context.id,context:this.context}),n.getComponent().then(r=>{const i=this.matDialog;i._dialogAnimatingOpen&&i._lastDialogRef?i._lastDialogRef.afterOpened().subscribe(()=>this.openDialogComponent(n,r)):this.openDialogComponent(n,r)})}ngOnDestroy(){this.#t.close()}openDialogComponent(d,n){this.log.a(`Open dialog(initContext: ${d.initContext})`,{name:d.name,"Contextid:":this.context.log.svcId,"Context:":this.context}),d.initContext&&this.context.init(this.route),this.#t=this.matDialog.open(n,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:this.#e,panelClass:["dialog-panel",`dialog-panel-${d.panelSize}`,d.showScrollbar?"show-scrollbar":"no-scrollbar",...d.panelClass?d.panelClass:[]],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.#t.afterClosed().subscribe(r=>{this.log.a("Dialog was closed - name:"+d.name,{data:r});const i=r;if(null==i?.navigateUrl)if(this.route.pathFromRoot.length<=3)try{window.parent.$2sxc.totalPopup.close()}catch{}else this.router.navigate(["./"],this.route.snapshot.url.length>0?{relativeTo:this.route.parent,state:r}:{relativeTo:this.route.parent.parent,state:r});else this.router.navigate([i.navigateUrl])}),this.changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||s)(o.rXU(c.bZ),o.rXU(o.c1b),o.rXU(u.Ix),o.rXU(u.nX),o.rXU(a.o),o.rXU(o.gRc))}}static{this.\u0275cmp=o.VBU({type:s,selectors:[["app-dialog-entry"]],standalone:!0,features:[o.Jv_([a.o]),o.aNF],decls:0,vars:0,template:function(n,r){},encapsulation:2})}}return s})()},9417:(g,p,t)=>{function e(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}t.d(p,{L:()=>e})},4038:(g,p,t)=>{t.d(p,{i:()=>e});class e{static tryParse(o){try{return JSON.parse(o)}catch{}}}},3518:(g,p,t)=>{function e(a,o,c=0){const m=a.length===c+1?o:e.bind(this,a,o,c+1),s=a[c],l="string"==typeof s.test?s.test:null,d="function"==typeof s.test?s.test:null,n=window;null!=l&&n[l]||null!=d&&d()?o():window.require([s.src],r=>{r&&!n[l]&&(n[l]=r),m()})}t.d(p,{P:()=>e})},1477:(g,p,t)=>{function e(a){try{const o=a?.Api;if(!o)return;const u={...window.$2sxc.env.header,appApi:o};window.$2sxc.env.load(u)}catch{}}t.d(p,{W:()=>e})},6666:(g,p,t)=>{t.d(p,{F:()=>e});const e={App:"App",Site:"Site",Global:"Global"}},2785:(g,p,t)=>{t.d(p,{o:()=>m});var e=t(7567),a=t(8172),o=t(334),c=t(6474),u=t(9148);let m=(()=>{class s extends c.D{openCodeFile(d,n,r){const i=e.Y.Develop,h={items:[{Path:d,...null!=r&&o.c.editId(r)}]},f={...this.buildHashParam(a.Q$,i),...this.buildHashParam(a.P3,n.toString()),...this.buildHashParam(a.Ul,JSON.stringify(h.items))},_=this.buildFullUrl(f);window.open(_,"_blank")}openQueryDesigner(d){const n=e.Y.PipelineDesigner,r={items:[o.c.editId(d)]},i={...this.buildHashParam(a.Q$,n),...this.buildHashParam(a.Xw,d.toString()),...this.buildHashParam(a.Ul,JSON.stringify(r.items))},h=this.buildFullUrl(i);window.open(h,"_blank")}openAppsManagement(d,n){const r={...n&&{tab:n}},i={...this.buildHashParam(a.v4,d.toString()),...this.buildHashParam(a.Q$,e.Y.Zone),...Object.keys(r).length?this.buildHashParam(a.z0,JSON.stringify(r)):""},h=this.buildFullUrl(i);window.open(h,"_blank")}openAppAdministration(d,n,r,i){const h={...r&&{tab:r},...i&&{scope:i}},f={...this.buildHashParam(a.v4,d.toString()),...this.buildHashParam(a.K7,n.toString()),...this.buildHashParam(a.Q$,e.Y.App),...Object.keys(h).length?this.buildHashParam(a.z0,JSON.stringify(h)):""},_=this.buildFullUrl(f);window.open(_,"_blank")}buildSharedHashParams(){return{...this.buildHashParam(a.v4,this.zoneId),...this.buildHashParam(a.K7,this.appId),...this.buildHashParam(a.Zm,this.context.moduleId?.toString()),...this.buildHashParam(a.p$,this.context.contentBlockId?.toString()),...this.buildHashParam(a.h9),...sessionStorage.getItem(a.tn)?this.buildHashParam(a.tn):{}}}buildHashParam(d,n){const r=d.replace(a.Pl,""),i=n??sessionStorage.getItem(d),h=encodeURIComponent(i);return{[r]:h}}buildFullUrl(d){const n=sessionStorage.getItem(a.zX),r=new URL(n),i=r.origin+r.pathname+r.search,h={...this.buildSharedHashParams(),...d};return i+Object.entries(h).reduce((_,[v,E])=>`${_}&${v}=${E}`,"").replace("&","#")}static{this.\u0275fac=(()=>{let d;return function(r){return(d||(d=u.xGo(s)))(r||s)}})()}static{this.\u0275prov=u.jDH({token:s,factory:s.\u0275fac})}}return s})()},3143:(g,p,t)=>{t.d(p,{$:()=>c});var e=t(9923),a=t(819);const o=(u,m)=>(u.push(m),u);function c(){return(0,a.N)((u,m)=>{(0,e.T)(o,[])(u).subscribe(m)})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.05.01/dist/ng-edit/common.c8362cb884b3a48c.js.map