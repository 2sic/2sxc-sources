{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_language-permissions_language-permissi-a91b40.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AACoE;AACT;AACe;AACnB;AACR;AACI;AAE0B;AACtB;AACwB;AAEe;AACN;AACF;AACyC;;;;;;AAczH,MAAOe,4BAA4B;EAIvC,CAAAC,OAAQ;EACR,CAAAC,aAAc;EAEdC,YACUC,MAAkD;IAAlD,KAAAA,MAAM,GAANA,MAAM;IAPhB,KAAAC,WAAW,GAAgB,IAAI,CAAC,CAAAC,gBAAiB,EAAE;IAGnD,MAAAL,OAAQ,GAAGT,gDAAS,CAACC,+EAAW,CAAC;IACjC,MAAAS,aAAc,GAAGV,gDAAS,CAACM,wFAAoB,CAAC;IAMhD,MAAAS,OAAQ,GAAGrB,qDAAM,CAAC,CAAC,CAAC;IAEpB,KAAAsB,SAAS,GAAGvB,uDAAQ,CAAC,MAAK;MACxB,MAAMwB,CAAC,GAAG,IAAI,CAAC,CAAAF,OAAQ,EAAE;MACzB,OAAO,IAAI,CAAC,CAAAN,OAAQ,CAACS,uBAAuB,CAACC,SAAS,CAAC;IACzD,CAAC,CAAC;EAPE;EAEJ,CAAAJ,OAAQ;EAORK,QAAQA,CAAA;IACN,IAAI,CAAC,CAAAV,aAAc,CAACW,gBAAgB,CAAC,MAAK;MACxC,IAAI,CAAC,CAAAN,OAAQ,CAACO,MAAM,CAACC,CAAC,IAAI,EAAEA,CAAC,CAAC;IAChC,CAAC,CAAC;EAEJ;EAEAC,WAAWA,CAAA;IACT,IAAI,CAACZ,MAAM,CAACa,KAAK,EAAE;EACrB;EAEAC,eAAeA,CAACC,QAAiC;IAC/C,IAAI,CAAC,CAAAjB,aAAc,CAACkB,WAAW,CAAC,CAAC1B,yDAAe,CAAC2B,cAAc,CAACF,QAAQ,CAACG,MAAM,CAAC,CAAC,CAAC;EACpF;EAGA,CAAAhB,gBAAiBiB,CAAA;IACf,MAAMlB,WAAW,GAAgB;MAC/B,GAAGT,gGAAkB;MACrB4B,UAAU,EAAE,CACV;QACE,GAAG7B,iFAAiB,CAAC8B,qBAAqB;QAC1CC,KAAK,EAAE,MAAM;QACbC,MAAM,EAAE,oBAAoB;QAC5BC,kBAAkB,EAAE,CAAC,MAAK;UACxB,MAAMC,MAAM,GAA2C;YACrDC,aAAa,EAAGX,QAAQ,IAAK,OAAOA,QAAQ,CAACY,IAAI;WAClD;UACD,OAAOF,MAAM;QACf,CAAC,EAAC;OACH,EACD;QACE,GAAGlC,iFAAiB,CAACqC,QAAQ;QAC7BN,KAAK,EAAE,MAAM;QACbO,IAAI,EAAE,KAAK;QACXC,WAAW,EAAGC,CAAoC,IAAKA,CAAC,CAACC,IAAI,CAACC;OAC/D,EACD;QACE,GAAG1C,iFAAiB,CAAC2C,mBAAmB;QACxCC,YAAY,EAAExC,wIAAoC;QAClD6B,kBAAkB,EAAE,CAAC,MAAK;UACxB,MAAMC,MAAM,GAAsC;YAChDW,iBAAiB,EAAGC,IAAI,IAAK,IAAI,CAACvB,eAAe,CAACuB,IAAI;WACvD;UACD,OAAOZ,MAAM;QACf,CAAC,EAAC;OACH;KAEJ;IACD,OAAOxB,WAAW;EACpB;;;uCApEWL,4BAA4B,EAAA0C,+DAAA,CAAAE,kEAAA;IAAA;EAAA;;;YAA5B5C,4BAA4B;MAAA6C,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAC,sCAAAC,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UC3BrCT,4DAFJ,aAA8C,aACb,aACS;UAAAA,oDAAA,2BAAoB;UAAAA,0DAAA,EAAM;UAChEA,4DAAA,gBAAqE;UAAxBA,wDAAA,mBAAAe,8DAAA;YAAA,OAASL,GAAA,CAAApC,WAAA,EAAa;UAAA,EAAC;UAClE0B,4DAAA,eAAU;UAAAA,oDAAA,YAAK;UAEnBA,0DAFmB,EAAW,EACnB,EACL;UAEJA,4DADF,aAAsD,QACjD;UACDA,oDAAA,wNAEF;UAAAA,0DAAA,EAAI;UACJA,uDAAA,qBAA+B;UAC/BA,4DAAA,cAA0B;UACxBA,uDAAA,0BAAoH;UACtHA,0DAAA,EAAM;UACNA,uDAAA,6BAAqD;UAEzDA,0DADE,EAAM,EACF;;;UAJ2CA,uDAAA,IAAyB;UAACA,wDAA1B,YAAAU,GAAA,CAAA5C,SAAA,KAAyB,gBAAA4C,GAAA,CAAA/C,WAAA,CAA4B;;;qBDQlGlB,sEAAe,EAAA0E,oEAAA,EACfvE,kEAAa,EAAAyE,4DAAA,EACbxE,0DAAY,EACZH,sEAAgB,EAChBS,0FAAa,EAAAoE,sEAAA;MAAAE,aAAA;IAAA;EAAA;;;;;;;;;;;;;;;;;;;;AEvBwC;AACA;AACF;AACoC;;;;;AAcrF,MAAOpE,oCAAoC;EAK/CwE,MAAMA,CAAC1C,MAA+D;IACpE,IAAI,CAACA,MAAM,GAAGA,MAAM;IACpB,IAAI,CAACV,QAAQ,GAAG,IAAI,CAACU,MAAM,CAACO,IAAI;EAClC;EAEA7B,OAAOA,CAACsB,MAAY;IAClB,OAAO,IAAI;EACb;EAEAX,eAAeA,CAAA;IACb,IAAI,CAACW,MAAM,CAACW,iBAAiB,CAAC,IAAI,CAACrB,QAAQ,CAAC;EAC9C;;;uCAhBWpB,oCAAoC;IAAA;EAAA;;;YAApCA,oCAAoC;MAAA8C,SAAA;MAAAC,KAAA;MAAAC,IAAA;MAAAC,MAAA;MAAAC,QAAA,WAAAuB,8CAAArB,EAAA,EAAAC,GAAA;QAAA,IAAAD,EAAA;UClB/CT,4DADF,aAA+B,aAC2E;UAA5BA,wDAAA,mBAAA+B,mEAAA;YAAA,OAASrB,GAAA,CAAAlC,eAAA,EAAiB;UAAA,EAAC;UACrGwB,4DAAA,kBACoG;UAClGA,oDAAA,eACF;UAEJA,0DAFI,EAAW,EACP,EACF;;;UALQA,uDAAA,GAAuC;UAC/CA,wDADQ,aAAAU,GAAA,CAAAjC,QAAA,CAAAuD,WAAA,CAAAC,KAAA,CAAuC,oBAAAvB,GAAA,CAAAjC,QAAA,CAAAuD,WAAA,CAAAC,KAAA,CACD;;;qBDU5CN,mEAAe,EAAAzB,6DAAA,EACftD,iEAAa,EAAAuE,2DAAA,EACbO,mEAAc,EAAAL,6DAAA,EACdO,qGAAc;MAAAH,aAAA;IAAA;EAAA","sources":["./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.html"],"sourcesContent":["import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, computed, OnInit, signal } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { transient } from '../../../../../../core';\r\nimport { SiteLanguagePermissions } from '../../../apps-management/models/site-language.model';\r\nimport { ZoneService } from '../../../apps-management/services/zone.service';\r\nimport { GoToPermissions } from '../../../permissions';\r\nimport { ColumnDefinitions } from '../../../shared/ag-grid/column-definitions';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../../shared/constants/default-grid-options.constants';\r\nimport { SxcGridModule } from '../../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../../../shared/routing/dialog-routing.service';\r\nimport { LanguagesPermissionsActionsComponent } from './languages-permissions-actions/languages-permissions-actions.component';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions/languages-permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-language-permissions',\r\n  templateUrl: './language-permissions.component.html',\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    MatDialogActions,\r\n    SxcGridModule,\r\n  ]\r\n})\r\nexport class LanguagePermissionsComponent implements OnInit {\r\n  gridOptions: GridOptions = this.#buildGridOptions();\r\n\r\n\r\n  #zoneSvc = transient(ZoneService);\r\n  #dialogRouting = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<LanguagePermissionsComponent>,\r\n  ) { }\r\n\r\n  #refresh = signal(0);\r\n\r\n  languages = computed(() => {\r\n    const r = this.#refresh();\r\n    return this.#zoneSvc.getLanguagesPermissions(undefined);\r\n  })\r\n\r\n  ngOnInit(): void {\r\n    this.#dialogRouting.doOnDialogClosed(() => {\r\n      this.#refresh.update(v => ++v)\r\n    });\r\n\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openPermissions(language: SiteLanguagePermissions): void {\r\n    this.#dialogRouting.navRelative([GoToPermissions.getUrlLanguage(language.NameId)]);\r\n  }\r\n\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          field: 'Code',\r\n          filter: 'agTextColumnFilter',\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguagePermissions> = {\r\n              tooltipGetter: (language) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Name',\r\n          sort: 'asc',\r\n          valueGetter: (p: { data: SiteLanguagePermissions }) => p.data.Culture,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: LanguagesPermissionsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: LanguagesPermissionsActionsParams = {\r\n              onOpenPermissions: (lang) => this.openPermissions(lang),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\n\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Language permissions</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <p>\r\n      If no language permissions are defined, all editors can edit all languages. As soon as you set any language permission, only the\r\n      specified users (or users in the specified groups) can edit these permissions.\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"languages()()\" [gridOptions]=\"gridOptions\"> </ag-grid-angular>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\"></mat-dialog-actions>\r\n  </div>\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from 'projects/eav-ui/src/app/shared/directives/tippy.directive';\r\nimport { SiteLanguagePermissions } from '../../../../apps-management/models/site-language.model';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-languages-permissions-actions',\r\n    templateUrl: './languages-permissions-actions.component.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        MatBadgeModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class LanguagesPermissionsActionsComponent implements ICellRendererAngularComp {\r\n  language: SiteLanguagePermissions;\r\n\r\n  private params: ICellRendererParams & LanguagesPermissionsActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & LanguagesPermissionsActionsParams): void {\r\n    this.params = params;\r\n    this.language = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.language);\r\n  }\r\n}\r\n","\r\n<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"language.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!language.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n</div>\r\n"],"names":["computed","signal","MatButtonModule","MatDialogActions","MatDialogRef","MatIconModule","RouterOutlet","transient","ZoneService","GoToPermissions","ColumnDefinitions","defaultGridOptions","SxcGridModule","DialogRoutingService","LanguagesPermissionsActionsComponent","LanguagePermissionsComponent","zoneSvc","dialogRouting","constructor","dialog","gridOptions","buildGridOptions","refresh","languages","r","getLanguagesPermissions","undefined","ngOnInit","doOnDialogClosed","update","v","closeDialog","close","openPermissions","language","navRelative","getUrlLanguage","NameId","#buildGridOptions","columnDefs","IdWithDefaultRenderer","field","filter","cellRendererParams","params","tooltipGetter","Code","TextWide","sort","valueGetter","p","data","Culture","ActionsPinnedRight1","cellRenderer","onOpenPermissions","lang","i0","ɵɵdirectiveInject","i1","selectors","decls","vars","consts","template","LanguagePermissionsComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LanguagePermissionsComponent_Template_button_click_4_listener","ɵɵelement","ɵɵadvance","ɵɵproperty","i2","MatIconButton","i3","MatIcon","i4","AgGridAngular","encapsulation","MatBadgeModule","MatRippleModule","TippyDirective","agInit","LanguagesPermissionsActionsComponent_Template","LanguagesPermissionsActionsComponent_Template_div_click_1_listener","Permissions","Count","MatRipple","MatBadge"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}