{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_service-802177.js","mappings":"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","sources":["./projects/eav-ui/src/app/content-items/services/content-items.service.ts","./projects/eav-ui/src/app/permissions/models/permission.model.ts","./projects/eav-ui/src/app/permissions/index.ts","./projects/eav-ui/src/app/shared/services/service-base.ts","./projects/eav-ui/src/app/shared/constants/dropdown-insert-value.constant.ts","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.ts","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.html","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions.routing.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/permissions/go-to-permissions.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html"],"sourcesContent":["import { Injectable, Signal } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { webApiEntityList, webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentItem } from '../models/content-item.model';\r\n\r\nconst logSpecs = {\r\n  getAll: true,\r\n  getAllSig: true,\r\n}\r\n\r\n@Injectable()\r\nexport class ContentItemsService extends HttpServiceBase {\r\n\r\n  log = classLog({ ContentItemsService }, logSpecs);\r\n\r\n  getAll(contentTypeStaticName: string) {\r\n    this.log.fnIf('getAll', { contentTypeStaticName });\r\n    return this.getHttpApiUrl<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  getAllSig(contentTypeStaticName: string, initial: undefined): Signal<ContentItem[]> {\r\n    this.log.fnIf('getAllSig', { contentTypeStaticName, initial });\r\n    return this.getSignal<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    }, initial);\r\n  }\r\n\r\n  getColumns(contentTypeStaticName: string) {\r\n    return this.getHttpApiUrl<Field[]>(webApiFieldsAll, {\r\n      params: { appId: this.appId, staticName: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  importItem(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.apiUrl(webApiEntityRoot + 'upload'), {\r\n          AppId: this.appId,\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { MetadataItem } from '../../metadata';\r\n\r\nexport interface Permission extends MetadataItem {\r\n  Identity: string;\r\n  Condition: string;\r\n  Grant: string;\r\n}\r\n","\r\nexport * from './go-to-permissions';\r\nexport * from './models/permission.model';\r\nexport * from './permissions-dialog.config';\r\nexport * from './permissions.routing';\r\nexport * from './permissions.component';\r\n// export * from './permissions.module'; // TOOD:: für was wird der index verwendet?\r\nexport * from './services/metadata.service';\r\nexport * from './services/permissions.service';\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * Base class for services - just to standardize use of subscriptions.\r\n * Has @Injectable() just to allow it ot use the standard OnDestroy interface.\r\n */\r\n@Injectable()\r\nexport abstract class ServiceBase implements OnDestroy {\r\n\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  // TODO: TRY TO GET RID OF THIS. AFAIK it's just used in the mask, which should switch over to signals.\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","export const dropdownInsertValue = 'DROPDOWN_INSERT_VALUE' as const;\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { EcoFabSpeedDialActionsComponent, EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent } from '@ecodev/fab-speed-dial';\r\nimport { map, take } from 'rxjs';\r\nimport { convert, Of, transient } from '../../../../core';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EavForInAdminUi } from '../edit/shared/models/eav';\r\nimport { openFeatureDialog } from '../features/shared/base-feature.component';\r\nimport { MetadataService } from '../permissions';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { MetadataKeyTypes } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../shared/logging';\r\nimport { EditForm, EditPrep, ItemAddIdentifier } from '../shared/models/edit-form.model';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataDto, MetadataItem, MetadataRecommendation } from './models/metadata.model';\r\n\r\n@Component({\r\n    selector: 'app-metadata',\r\n    templateUrl: './metadata.component.html',\r\n    styleUrls: ['./metadata.component.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        RouterOutlet,\r\n        SxcGridModule,\r\n        MatDialogActions,\r\n        EcoFabSpeedDialComponent,\r\n        NgClass,\r\n        EcoFabSpeedDialTriggerComponent,\r\n        EcoFabSpeedDialActionsComponent,\r\n        MatBadgeModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class MetadataComponent implements OnInit {\r\n\r\n  log = classLog({ MetadataComponent });\r\n\r\n  #entitiesSvc = transient(EntityEditService);\r\n  #metadataSvc = transient(MetadataService);\r\n  #contentItemSvc = transient(ContentItemsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) { }\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  fabOpen = signal(false);\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key', 'title', 'contentTypeStaticName']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as Of<typeof MetadataKeyTypes>,\r\n    key: p.key,\r\n    contentTypeStaticName: p.contentTypeStaticName,\r\n  }));\r\n\r\n  // 2024-11-05 2dm: broken, must inform @2dg\r\n  // itemFor = computed<EavForInAdminUi | undefined>(() => {\r\n  //   const items = this.#contentItemSvc.getAllSig(this.#params.contentTypeStaticName, undefined)\r\n  //   const item = items()?.find(i => i.Guid === this.#params.key);\r\n  //   if (item?.For)\r\n  //     return item.For;\r\n  //   return undefined;\r\n  // });\r\n\r\n  // Signal to get itemFor - must be _outside_ the computed property, otherwise it regenerates infinitely\r\n  #itemsFromHttp = this.#contentItemSvc.getAllSig(this.#params.contentTypeStaticName,  /* initial: */ null);\r\n\r\n  itemFor = computed<EavForInAdminUi | undefined>(() => {\r\n    const item = this.#itemsFromHttp()?.find(i => i.Guid === this.#params.key);\r\n    return (item?.For)\r\n      ? item.For\r\n      : undefined;\r\n  });\r\n\r\n  metadataSet = signal<MetadataDto>({ Items: [], Recommendations: [] } as MetadataDto);\r\n\r\n  recommendations = computed(() => {\r\n    const metadata = this.metadataSet();\r\n    return metadata.Recommendations.filter(r =>\r\n      metadata.Items.filter(i => i._Type.Id === r.Id).length < r.Count\r\n    );\r\n  });\r\n\r\n  protected title = (() => {\r\n    try {\r\n      return decodeURIComponent(this.#dialogRoutes.getParam('title') ?? '');\r\n    } catch (e) {\r\n      console.error('Couldn\\'t properly decode title');\r\n      return this.#dialogRoutes.getParam('title') ?? '';\r\n    }\r\n  })();\r\n\r\n  ngOnInit() {\r\n    this.#fetchMetadata();\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.#fetchMetadata());\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen.set(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.matDialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.#entitiesSvc.create(recommendation.Id, { For: this.calculateItemFor('dummy').For }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.matDialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [this.calculateItemFor(contentType)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(contentType: string): ItemAddIdentifier {\r\n    const x = EditPrep.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key);\r\n    return EditPrep.newMetadataFromInfo(contentType, x);\r\n  }\r\n\r\n  #fetchMetadata() {\r\n    const logGetMetadata = this.log.rxTap('getMetadata');\r\n    this.#metadataSvc.getMetadata(this.#params.targetType, this.#params.keyType, this.#params.key)\r\n      .pipe(\r\n        logGetMetadata.pipe(),\r\n        take(1),\r\n        map(metadata => {\r\n          metadata.Recommendations.forEach(r => {\r\n            if (r.Icon?.startsWith('base64:')) {\r\n              r.Icon = r.Icon.replace('base64:', '');\r\n              r.Icon = window.atob(r.Icon);\r\n              // used for coloring black icons to white\r\n              r.Icon = r.Icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n            }\r\n          });\r\n          return metadata;\r\n        }),\r\n        logGetMetadata.map(),\r\n      )\r\n      // 2024-05-30 2dm - this standard shorthand seems to fail\r\n      // for reasons unknown to me. I've replaced it with the longhand\r\n      // The problem occurs when the metadataSet$ is updated after the initial load.\r\n      // .subscribe(this.metadataSet$);\r\n      .subscribe(data => {\r\n        this.metadataSet.set(data);\r\n      }\r\n      );\r\n  }\r\n\r\n  #editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.metadataSet().Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.matDialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.#deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.#entitiesSvc.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.#fetchMetadata();\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<MetadataItem>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          onCellClicked: (p: { data: MetadataItem }) => this.#editMetadata(p.data),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (p: { data: MetadataItem }) => `${p.data._Type.Name}${p.data._Type.Title !== p.data._Type.Name ? ` (${p.data._Type.Title})` : ''}`,\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            onDelete: (metadata) => this.#deleteMetadata(metadata),\r\n          } satisfies MetadataActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ title || 'Metadata' }}\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <p>\r\n      @if (!itemFor()) {\r\n      This item is not metadata for anything else.\r\n      }\r\n      @else {\r\n      This item is metadata for:\r\n      <br>Target: {{ itemFor().Target }}\r\n      <br>TargetType: {{ itemFor().TargetType }}\r\n      @if (itemFor().KeyNumber) {\r\n      <br>Key Number: {{ itemFor().KeyNumber }}\r\n      }\r\n      @if (itemFor().KeyGuid) {\r\n      <br>Key Guid: {{ itemFor().KeyGuid }}\r\n      }\r\n      @if (itemFor().KeyString) {\r\n      <br>Key String: {{ itemFor().KeyString }}\r\n      }\r\n      @if (itemFor().Title) {\r\n      <br>Title: {{ itemFor().Title }}\r\n      }\r\n      }\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"metadataSet().Items\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    @if (recommendations().length === 0) {\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\"\r\n      (click)=\"createMetadata()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    }\r\n    @if (recommendations().length > 0) {\r\n    <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': fabOpen() }\"\r\n      (openChange)=\"openChange($event)\">\r\n      <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n        <button mat-fab>\r\n          <mat-icon class=\"spin180\">{{ fabOpen() ? 'close' : 'add' }}</mat-icon>\r\n        </button>\r\n      </eco-fab-speed-dial-trigger>\r\n      <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\"\r\n          (click)=\"createMetadata()\">\r\n          <mat-icon>search</mat-icon>\r\n        </button>\r\n        @for (recommendation of recommendations(); track recommendation) {\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" [attr.label]=\"recommendation.Title\"\r\n          (click)=\"createMetadata(recommendation)\">\r\n          @if (recommendation.Icon) {\r\n          <div style=\"color: white; fill: white;\" [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n            [matBadgeHidden]=\"recommendation.Enabled\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"💎\"\r\n            matBadgePosition=\"below after\" aria-hidden=\"false\"></div>\r\n          } @else {\r\n          <mat-icon>add</mat-icon>\r\n          }\r\n        </button>\r\n        }\r\n      </eco-fab-speed-dial-actions>\r\n    </eco-fab-speed-dial>\r\n    }\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\n\r\n@Component({\r\n    selector: 'app-confirm-delete-dialog',\r\n    templateUrl: './confirm-delete-dialog.component.html',\r\n    styleUrls: ['./confirm-delete-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class ConfirmDeleteDialogComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    private dialog: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.dialog.close(confirm);\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Delete {{ dialogData.entityTitle }} ({{ dialogData.entityId }})?</mat-card-title>\r\n    @if (dialogData.message) {\r\n      <mat-card-subtitle [innerHtml]=\"dialogData.message | safeHtml\"></mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog(true)\">Delete</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { classLog } from '../logging';\r\n\r\n@Directive({\r\n  selector: '[appClickStopPropagation]',\r\n})\r\nexport class ClickStopPropagationDirective {\r\n\r\n  log = classLog({ClickStopPropagationDirective});\r\n\r\n  // Log constructor to detect that it was really attached/created\r\n  constructor() {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    this.log.a('onClick', { event });\r\n    event.stopPropagation();\r\n\r\n    // This should never be added here, as it's often on a link, and the default behavior (link open) should happen\r\n    // event.preventDefault();\r\n  }\r\n\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-actions',\r\n    templateUrl: './metadata-actions.component.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutes\r\n  },\r\n];\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n    selector: 'app-field-hint',\r\n    templateUrl: './field-hint.component.html',\r\n    styleUrls: ['./field-hint.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        NgClass,\r\n        NgTemplateOutlet\r\n    ]\r\n})\r\nexport class FieldHintComponent {\r\n  isError = input<boolean>(false);\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError()) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { Route } from '@angular/router';\r\nimport { Of } from '../../../../core';\r\nimport { eavConstants, MetadataKeyTypes } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-metadata-content-type',\r\n    templateUrl: './metadata-content-type.component.html',\r\n    styleUrls: ['./metadata-content-type.component.scss'],\r\n    imports: [TippyDirective,]\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, HostBinding, OnInit, signal, WritableSignal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { MetadataSaveFormValues } from './metadata-save-dialog.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-save-dialog',\r\n    templateUrl: './metadata-save-dialog.component.html',\r\n    styleUrls: ['./metadata-save-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatFormFieldModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        MatSlideToggleModule,\r\n        FieldHintComponent,\r\n        ClickStopPropagationDirective,\r\n    ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  #contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  scope = signal(eavConstants.scopes.default.value);\r\n  scopeOptions = this.#contentTypesService.getScopesSig(undefined) as WritableSignal<ScopeOption[]>;\r\n\r\n  contentTypes = computed(() => {\r\n    const scope = this.scope();\r\n    return this.#contentTypesService.getTypesSig(scope, undefined);\r\n  });\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialog.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions().some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions.set([newScopeOption, ...this.scopeOptions()]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.scope.set(newScope);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Create Metadata</mat-card-title>\r\n    <mat-card-subtitle>\r\n      This is a special operation to add an item which is metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      @if (advancedMode && guidedContentType) {\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Scope</mat-label>\r\n        <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions().length ? 'No items found' : ''\">\r\n          @for (scopeOption of scopeOptions(); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.value\">\r\n            {{ scopeOption.name }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <app-field-hint>\r\n        The scope should almost never be changed -\r\n        <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n      </app-field-hint>\r\n      }\r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        @if (guidedContentType) {\r\n        <mat-select formControlName=\"contentType\" required\r\n          [placeholder]=\"!contentTypes()()?.length ? 'No items found' : ''\">\r\n          @for (contentType of contentTypes()(); track contentType) {\r\n          <mat-option [value]=\"contentType.NameId\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n        }\r\n        @if (!guidedContentType) {\r\n        <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n        }\r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"eav-card-actions\">\r\n    <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n      {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n    </mat-slide-toggle>\r\n    <div>\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\"\r\n        (click)=\"confirm()\">\r\n        Confirm\r\n      </button>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n"],"names":["Signal","from","map","switchMap","webApiFieldsAll","toBase64","classLog","webApiEntityList","webApiEntityRoot","HttpServiceBase","logSpecs","getAll","getAllSig","ContentItemsService","constructor","log","contentTypeStaticName","fnIf","getHttpApiUrl","params","appId","contentType","initial","getSignal","getColumns","staticName","importItem","file","pipe","fileBase64","http","post","apiUrl","AppId","ContentBase64","success","result","Success","Messages","__ngFactoryType__","factory","ɵfac","Subscription","ServiceBase","subscriptions","ngOnDestroy","destroy","unsubscribe","dropdownInsertValue","NgClass","ChangeDetectorRef","computed","signal","ViewContainerRef","MatBadgeModule","MatButtonModule","MatDialog","MatDialogActions","MatDialogRef","MatIconModule","MatSnackBar","RouterOutlet","EcoFabSpeedDialActionsComponent","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","take","convert","transient","openFeatureDialog","MetadataService","ColumnDefinitions","defaultGridOptions","convertFormToUrl","EditPrep","SxcGridModule","SafeHtmlPipe","DialogRoutingService","EntityEditService","ConfirmDeleteDialogComponent","MetadataActionsComponent","MetadataContentTypeComponent","MetadataSaveDialogComponent","i0","ɵɵtext","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","itemFor","KeyNumber","KeyGuid","KeyString","Title","ɵɵtemplate","MetadataComponent_Conditional_10_Conditional_5_Template","MetadataComponent_Conditional_10_Conditional_6_Template","MetadataComponent_Conditional_10_Conditional_7_Template","MetadataComponent_Conditional_10_Conditional_8_Template","Target","TargetType","ɵɵconditional","ɵɵelementStart","ɵɵlistener","MetadataComponent_Conditional_15_Template_button_click_0_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","createMetadata","ɵɵelementEnd","ɵɵproperty","ɵɵpipeBind1","recommendation_r5","Icon","ɵɵsanitizeHtml","Enabled","MetadataComponent_Conditional_16_For_10_Template_button_click_0_listener","_r4","$implicit","MetadataComponent_Conditional_16_For_10_Conditional_1_Template","MetadataComponent_Conditional_16_For_10_Conditional_2_Template","MetadataComponent_Conditional_16_Template_eco_fab_speed_dial_openChange_0_listener","$event","_r3","openChange","MetadataComponent_Conditional_16_Template_button_click_6_listener","ɵɵrepeaterCreate","MetadataComponent_Conditional_16_For_10_Template","ɵɵrepeaterTrackByIdentity","ɵɵpureFunction1","_c0","fabOpen","ɵɵtextInterpolate","ɵɵrepeater","recommendations","MetadataComponent","entitiesSvc","metadataSvc","contentItemSvc","dialogRoutes","dialog","snackBar","matDialog","viewContainerRef","changeDetectorRef","gridOptions","buildGridOptions","getParams","p","targetType","parseInt","keyType","key","itemsFromHttp","item","find","i","Guid","For","undefined","metadataSet","Items","Recommendations","metadata","filter","r","_Type","Id","length","Count","title","decodeURIComponent","getParam","e","console","error","ngOnInit","fetchMetadata","doOnDialogClosed","closeDialog","close","open","set","recommendation","MissingFeature","CreateEmpty","Name","create","calculateItemFor","subscribe","duration","next","createMetadataForm","metadataDialogRef","autoFocus","width","afterClosed","form","items","formUrl","navRelative","markForCheck","x","constructMetadataInfo","newMetadataFromInfo","#fetchMetadata","logGetMetadata","rxTap","getMetadata","forEach","startsWith","replace","window","atob","data","editMetadata","#editMetadata","editId","deleteMetadata","#deleteMetadata","confirmed","entityId","entityTitle","message","DeleteWarning","confirmationDialogRef","isConfirmed","delete","#buildGridOptions","columnDefs","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWide","field","onCellClicked","headerName","valueGetter","cellRenderer","ActionsPinnedRight1","onDelete","ɵɵdirectiveInject","i1","i2","selectors","decls","vars","consts","template","MetadataComponent_Template","rf","ctx","MetadataComponent_Template_button_click_4_listener","MetadataComponent_Conditional_9_Template","MetadataComponent_Conditional_10_Template","MetadataComponent_Conditional_15_Template","MetadataComponent_Conditional_16_Template","i3","MatIconButton","MatMiniFabButton","MatFabButton","i4","MatIcon","i5","AgGridAngular","i6","MatBadge","styles","MatCardModule","MAT_DIALOG_DATA","dialogData","hostClass","confirm","hostVars","hostBindings","ConfirmDeleteDialogComponent_HostBindings","ɵɵhostProperty","ConfirmDeleteDialogComponent_Conditional_4_Template","ConfirmDeleteDialogComponent_Template_button_click_6_listener","ConfirmDeleteDialogComponent_Template_button_click_8_listener","ɵɵtextInterpolate2","MatCard","MatCardActions","MatCardHeader","MatCardSubtitle","MatCardTitle","MatButton","ClickStopPropagationDirective","a","onClick","event","stopPropagation","ClickStopPropagationDirective_HostBindings","ClickStopPropagationDirective_click_HostBindingHandler","MatRippleModule","TippyDirective","agInit","refresh","MetadataActionsComponent_Template","MetadataActionsComponent_Template_div_click_1_listener","MatRipple","encapsulation","permissionsDialog","name","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","DialogEntryComponent","EditRoutes","permissionRoutes","path","component","children","NgTemplateOutlet","input","MatFormFieldModule","ɵɵelementContainer","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","ɵɵprojection","FieldHintComponent","isError","isShort","toggleIsShort","inputs","ngContentSelectors","FieldHintComponent_Template","FieldHintComponent_Template_div_click_0_listener","_r1","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","_c1","tmp_2_0","MatHint","MatError","eavConstants","GoToPermissions","route","loadChildren","then","m","getUrl","getUrlApp","app","toString","getUrlAttribute","id","attribute","getUrlContentType","guid","getUrlEntity","entity","getUrlLanguage","language","value","MetadataContentTypeComponent_Template","Description","WritableSignal","FormsModule","ReactiveFormsModule","UntypedFormControl","UntypedFormGroup","Validators","MatOptionModule","MatInputModule","MatSelectModule","MatSlideToggleModule","distinctUntilChanged","startWith","ContentTypesService","scopeOption_r1","MetadataSaveDialogComponent_Conditional_11_For_5_Template","ctx_r1","scopeOptions","contentType_r3","NameId","Label","MetadataSaveDialogComponent_Conditional_15_For_2_Template","tmp_1_0","contentTypes","contentTypesService","guidedContentType","advancedMode","scope","scopes","default","getScopesSig","getTypesSig","buildForm","toggleGuidedContentType","toggleAdvancedMode","checked","formValues","getRawValue","addControl","required","controls","valueChanges","newScope","patchValue","prompt","some","option","newScopeOption","MetadataSaveDialogComponent_HostBindings","MetadataSaveDialogComponent_Conditional_11_Template","MetadataSaveDialogComponent_Conditional_15_Template","MetadataSaveDialogComponent_Conditional_16_Template","MetadataSaveDialogComponent_Template_button_click_18_listener","MetadataSaveDialogComponent_Template_button_click_21_listener","MetadataSaveDialogComponent_Conditional_24_Template","MetadataSaveDialogComponent_Template_mat_slide_toggle_change_26_listener","MetadataSaveDialogComponent_Template_button_click_29_listener","MetadataSaveDialogComponent_Template_button_click_31_listener","touched","errors","valid","MatCardContent","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","RequiredValidator","FormGroupDirective","FormControlName","MatFormField","MatLabel","MatSuffix","MatSelect","MatOption","i7","MatInput","i8","i9","i10","MatSlideToggle"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}