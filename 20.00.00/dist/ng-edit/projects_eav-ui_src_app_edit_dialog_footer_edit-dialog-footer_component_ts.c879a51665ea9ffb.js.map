{"version":3,"file":"projects_eav-ui_src_app_edit_dialog_footer_edit-dialog-footer_component_ts.c879a51665ea9ffb.js","mappings":"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","names":["DataDumpComponent","constructor","itemService","formConfig","this","items","getManySignal","config","itemGuids","static","__ngFactoryType__","i0","i1","i2","debug_node_JnOYh9kg","VBU","selectors","decls","vars","consts","template","rf","ctx","JsonPipe","styles","DebugTypes","Data","Formulas","Logs","SelectTargets","Entity","Field","Target","SnippetLabelSizePipe","maxLength","transform","label","length","substring","EJ8","pure","entityOption_r3","entityGuid","_c2","hasFormula","fieldOption_r4","fieldName","targetOption_r6","target","$event","_r5","ctx_r1","selectedChanged","FormulaDesignerComponent_Conditional_0_Conditional_16_For_2_Template","state","targetOptions","_r7","snippet_r9","_r8","$implicit","clipboard","copyToClipboard","code","snippet_r11","_r10","result","value","FormulaDesignerComponent_Conditional_0_Conditional_40_Conditional_0_Conditional_0_Template","FormulaDesignerComponent_Conditional_0_Conditional_40_Conditional_0_Conditional_1_Template","FormulaDesignerComponent_Conditional_0_Conditional_40_Conditional_0_Conditional_2_Template","undefined","isOnlyPromise","FormulaDesignerComponent_Conditional_0_Conditional_40_Conditional_0_Template","FormulaDesignerComponent_Conditional_0_Conditional_40_Conditional_1_Template","isError","_r12","save","editMode","tmp_3_0","currentFormula","sourceCode","tmp_4_0","saving","_r1","FormulaDesignerComponent_Conditional_0_For_6_Template","_forTrack0","FormulaDesignerComponent_Conditional_0_For_12_Template","_forTrack1","FormulaDesignerComponent_Conditional_0_Conditional_16_Template","FormulaDesignerComponent_Conditional_0_Conditional_17_Template","toggleFreeText","formulaChanged","onFocused","FormulaDesignerComponent_Conditional_0_For_32_Template","_forTrack2","FormulaDesignerComponent_Conditional_0_Conditional_33_Template","FormulaDesignerComponent_Conditional_0_For_35_Template","FormulaDesignerComponent_Conditional_0_Conditional_40_Template","toggleEdit","deleteFormula","reset","FormulaDesignerComponent_Conditional_0_Conditional_60_Template","run","entityOptions","fieldsOptions","freeTextTarget","_c0","focused","filename","tmp_11_0","v2JsTypings","monacoOptions","_c1","v1DataSnippets","tmp_16_0","v1ContextSnippets","isDeleted","menu_r13","tmp_20_0","sourceCodeId","allowSaveFormula","tmp_22_0","FormulaDesignerComponent","#designerSvc","#entitiesService","snackBar","contentTypeService","translate","log","classLog","inject","FormulaDesignerService","transient","EntityEditService","ClipboardService","loadError","enableFormulaSave","signal","minimap","enabled","lineHeight","lineNumbers","lineDecorationsWidth","folding","scrollBeyondLastLine","tabSize","fixedOverflowWidgets","formId","designerState","formulaResult","currentTargetOptions","computed","Object","values","FormulaNewPickerTargets","includes","defaultListItemFormula","defaultFormula","ngOnInit","keys","itemSettingsServices","setDesignerOpen","initAfterItemSettingsAreReady","ngOnDestroy","newState","selectedSettingsSvc","allProps","set","formula","cache","updateFormulaFromEditor","#designerIdentifier","oldState","designer","identifier","resetFormula","retriggerFormulas","item","get","atAllFieldSettings","getAttributeOfItem","Metadata","find","m","Type","Id","create","eavConstants","contentTypes","formulas","Title","Formula","Enabled","ParentRelationship","EditPrep","relationship","Guid","subscribe","savedFormula","updateSaved","open","duration","update","sourceCodeGuid","confirm","instant","title","id","delete","next","error","_","i3","i4","i5","FormulaDesignerComponent_Conditional_0_Template","MatFormFieldModule","i6","MatSelectModule","i7","FormsModule","i8","MatOptionModule","NgClass","MatInputModule","i9","MatButtonModule","i10","MatIconModule","i11","MonacoEditorComponent","MatMenuModule","i12","TippyDirective","ClipboardModule","type","ConfigEditorDialogComponent","dialog","data","hostClass","editorOptions","theme","language","readOnly","automaticLayout","selectedConfig","JSON","stringify","configData","MAT_DIALOG_DATA","hostVars","hostBindings","MatDialogModule","encapsulation","SpecsEditorDialogComponent","logSpecs","onClose","close","onSave","onValueChanged","newValue","config_r1","log_r3","ctx_r3","openLogSpecs","key","_r2","toggleConfig","LogsConfigComponent_For_32_Conditional_4_Template","isChecked","hasLogSpecs","LogsConfigComponent","loggingService","matDialog","LogSeverities","logManager","LogManager","singleton","allLogs","mergeAllSpecs","configs","sessionPrefix","searchTerm","logs","getLogsSignal","loadConfigsFromStateManager","checkAll","every","specs","spec","toggle","applyFilters","onFilterSelected","filter","selectedFilter","filterLogs","event","toLowerCase","name","savedConfigs","startsWith","map","replace","onConfigSelected","configName","filteredLogs","entries","fromEntries","saveConfig","prompt","enabledConfigs","add","exportConfig","width","logKey","afterClosed","updatedSpecs","parse","updateSpecs","LogsConfigComponent_For_30_Template","LogsConfigComponent_For_32_Template","CommonModule","log_r2","ctx_r2","logToConsole","severity","Error","Warn","time","LogsDumpComponent_Conditional_2_Conditional_0_Template","LogsDumpComponent_Conditional_2_For_2_Template","LogsDumpComponent","showSettings","Log","console","warn","showLogSettings","show","LogsDumpComponent_Conditional_2_Template","LogsDumpComponent_Conditional_3_Template","DatePipe","toggleSize","preferences","expanded","_r3","prefManager","pinResource","EditDialogFooterComponent_Conditional_22_Case_1_Template","EditDialogFooterComponent_Conditional_22_Case_2_Template","EditDialogFooterComponent_Conditional_22_Case_3_Template","tmp_2_0","tab","EditDialogFooterComponent","sxcVer","window","sxcVersion","lastIndexOf","UserPreferences","part","footerPreferences","toggleDialog","s","hideTab","setMany","size","pinResources","pinned","EditDialogFooterComponent_Conditional_18_Template","EditDialogFooterComponent_Conditional_19_Template","EditDialogFooterComponent_Conditional_22_Template","MatCardModule","HttpServiceBaseSignal","contentType","entity","http","post","params","appId","zoneId","entityId","tryForce","apiUrl","webApiEntityRoot","toString","force","context","HttpContext","IGNORED_STATUSES","_angular_core__WEBPACK_IMPORTED_MODULE_5__","jDH","factory","ɵfac"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/edit/dialog/footer/data-dump/data-dump.component.ts","./projects/eav-ui/src/app/edit/dialog/footer/data-dump/data-dump.component.html","./projects/eav-ui/src/app/edit/dialog/footer/edit-dialog-footer.models.ts","./projects/eav-ui/src/app/edit/dialog/footer/formula-designer/formula-designer.models.ts","./projects/eav-ui/src/app/edit/dialog/footer/formula-designer/snippet-label-size.pipe.ts","./projects/eav-ui/src/app/edit/dialog/footer/formula-designer/formula-designer.component.html","./projects/eav-ui/src/app/edit/dialog/footer/formula-designer/formula-designer.component.ts","./node_modules/@angular/cdk/fesm2022/clipboard.mjs","./projects/eav-ui/src/app/edit/dialog/footer/logs-config/config-editor-dialog/config-editor-dialog.component.ts","./projects/eav-ui/src/app/edit/dialog/footer/logs-config/config-editor-dialog/config-editor-dialog.component.html","./projects/eav-ui/src/app/edit/dialog/footer/logs-config/specs-editor-dialog/specs-editor-dialog.component.ts","./projects/eav-ui/src/app/edit/dialog/footer/logs-config/specs-editor-dialog/specs-editor-dialog.component.html","./projects/eav-ui/src/app/edit/dialog/footer/logs-config/logs-config.component.html","./projects/eav-ui/src/app/edit/dialog/footer/logs-config/logs-config.component.ts","./projects/eav-ui/src/app/edit/dialog/footer/logs-dump/logs-dump.component.html","./projects/eav-ui/src/app/edit/dialog/footer/logs-dump/logs-dump.component.ts","./projects/eav-ui/src/app/edit/dialog/footer/edit-dialog-footer.component.html","./projects/eav-ui/src/app/edit/dialog/footer/edit-dialog-footer.component.ts","./projects/eav-ui/src/app/shared/services/entity-edit.service.ts"],"sourcesContent":["import { Component } from '@angular/core';\r\nimport { JsonPipe } from '@angular/common';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { ItemService } from '../../../state/item.service';\r\n\r\n@Component({\r\n    selector: 'app-data-dump',\r\n    templateUrl: './data-dump.component.html',\r\n    styleUrls: ['./data-dump.component.scss'],\r\n    imports: [JsonPipe]\r\n})\r\nexport class DataDumpComponent {\r\n  protected items = this.itemService.getManySignal(this.formConfig.config.itemGuids);\r\n  constructor(private itemService: ItemService, private formConfig: FormConfigService) { }\r\n}\r\n","  <textarea readonly class=\"fancy-scrollbar-light\">{{ items() | json }}</textarea>\r\n\r\n","export const DebugTypes = {\r\n  Data: 'data',\r\n  Formulas: 'formulas',\r\n  Logs: 'logs',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Of } from '../../../../../../../core';\r\nimport { FormulaCacheItem } from '../../../formulas/cache/formula-cache.model';\r\nimport { FormulaTargets } from '../../../formulas/targets/formula-targets';\r\n\r\nexport interface EntityOption {\r\n  entityGuid: string;\r\n  formulas: FormulaCacheItem[];\r\n  hasFormula: boolean;\r\n  label: string;\r\n}\r\n\r\nexport interface FieldOption {\r\n  fieldName: string;\r\n  formulas: FormulaCacheItem[];\r\n  hasFormula: boolean;\r\n  inputType: string;\r\n  label: string;\r\n}\r\n\r\nexport interface TargetOption {\r\n  hasFormula: boolean;\r\n  label: string;\r\n  target: Of<typeof FormulaTargets>;\r\n}\r\n\r\nexport interface DesignerSnippet {\r\n  code: string;\r\n  label: string;\r\n}\r\n\r\nexport const SelectTargets = {\r\n  Entity: 'entityGuid',\r\n  Field: 'fieldValue',\r\n  Target: 'formulaTarget',\r\n} as const /* the as const ensures that the keys/values can be strictly checked */;\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'snippetLabelSize',\r\n})\r\nexport class SnippetLabelSizePipe implements PipeTransform {\r\n\r\n  private maxLength = 24;\r\n\r\n  transform(label: string): string {\r\n    if (label.length <= this.maxLength) { return label; }\r\n    return `…${label.substring(label.length - this.maxLength)}`;\r\n  }\r\n}\r\n","@if (!loadError) {\r\n  <div class=\"formula-context-box\">\r\n    <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n      <mat-label>Entity</mat-label>\r\n      <mat-select [ngModel]=\"state().entityGuid\" (ngModelChange)=\"selectedChanged(SelectTargets.Entity, $event)\">\r\n        @for (entityOption of entityOptions(); track entityOption.entityGuid)\r\n        {\r\n          <mat-option\r\n            [value]=\"entityOption.entityGuid\">\r\n            <span [ngClass]=\"{ 'has-formula': entityOption.hasFormula }\">\r\n              {{ entityOption.label }}\r\n            </span>\r\n          </mat-option>\r\n        }\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n      <mat-label>Attribute</mat-label>\r\n      <mat-select [ngModel]=\"state().fieldName\" (ngModelChange)=\"selectedChanged(SelectTargets.Field, $event)\"\r\n        [disabled]=\"state().entityGuid == null\">\r\n        @for (fieldOption of fieldsOptions(); track fieldOption.fieldName)\r\n        {\r\n          <mat-option\r\n            [value]=\"fieldOption.fieldName\">\r\n            <span [ngClass]=\"{ 'has-formula': fieldOption.hasFormula }\">\r\n              {{ fieldOption.fieldName }}\r\n            </span>\r\n          </mat-option>\r\n        }\r\n      </mat-select>\r\n    </mat-form-field>\r\n    <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n      <mat-label>Target</mat-label>\r\n      @if (!freeTextTarget)\r\n      {\r\n        <mat-select [ngModel]=\"state().target\"\r\n          (ngModelChange)=\"selectedChanged(SelectTargets.Target, $event)\"\r\n          [disabled]=\"state().entityGuid == null || state().fieldName == null\">\r\n          @for (targetOption of targetOptions(); track targetOption) {\r\n            <mat-option [value]=\"targetOption.target\">\r\n              <span [ngClass]=\"{ 'has-formula': targetOption.hasFormula }\">\r\n                {{ targetOption.label }}\r\n              </span>\r\n            </mat-option>\r\n          }\r\n        </mat-select>\r\n      }\r\n      @else\r\n      {\r\n        <input matInput [ngModel]=\"state().target\"\r\n          (ngModelChange)=\"selectedChanged(SelectTargets.Target, $event)\"\r\n          [disabled]=\"state().entityGuid == null || state().fieldName == null\">\r\n      }\r\n    </mat-form-field>\r\n    <button mat-icon-button tippy=\"FreeText Target\" class=\"eav-formula-button\"\r\n      [disabled]=\"state().entityGuid == null || state().fieldName == null\" (click)=\"toggleFreeText()\">\r\n      <mat-icon>text_fields</mat-icon>\r\n    </button>\r\n    <div class=\"spacer\"></div>\r\n    <a mat-icon-button tippy=\"Help\" class=\"eav-formula-button\" href=\"https://go.2sxc.org/formulas\" target=\"_blank\">\r\n      <mat-icon>help</mat-icon>\r\n    </a>\r\n  </div>\r\n  <div class=\"formula-box\">\r\n    <div class=\"formula-field\" [ngClass]=\"{\r\n      'disabled': !state().editMode || state().entityGuid == null || state().fieldName == null || state().target == null,\r\n      'focused': focused\r\n      }\">\r\n      <mat-label class=\"label\">Function</mat-label>\r\n      <app-monaco-editor class=\"editor\" [filename]=\"filename\" [value]=\"currentFormula()?.sourceCode ?? template()\"\r\n        [jsTypings]=\"v2JsTypings()\" (valueChanged)=\"formulaChanged($event)\" [options]=\"monacoOptions\"\r\n        (focused)=\"onFocused(true)\" (blurred)=\"onFocused(false)\">\r\n      </app-monaco-editor>\r\n    </div>\r\n    <div class=\"formula-snippets fancy-scrollbar-light\" [ngClass]=\"{ 'disabled': !state().editMode }\">\r\n      @for (snippet of v1DataSnippets(); track snippet.code)\r\n      {\r\n        <div class=\"snippet\" [title]=\"snippet.code\"\r\n          (click)=\"clipboard.copyToClipboard(snippet.code)\">\r\n          {{ snippet.label | snippetLabelSize }}\r\n        </div>\r\n      }\r\n      @if (v1DataSnippets()?.length && v1ContextSnippets().length)\r\n      {\r\n        <div class=\"separator\"></div>\r\n      }\r\n      @for (snippet of v1ContextSnippets(); track snippet.code)\r\n      {\r\n        <div class=\"snippet\" [title]=\"snippet.code\"\r\n          (click)=\"clipboard.copyToClipboard(snippet.code)\">\r\n          {{ snippet.label | snippetLabelSize }}\r\n        </div>\r\n      }\r\n    </div>\r\n  </div>\r\n  <div class=\"formula-footer-box\">\r\n    <div class=\"formula-result-box hide-scrollbar\">\r\n      <span class=\"label\">Result:&nbsp;</span>\r\n      @if (result() != null && !isDeleted())\r\n      {\r\n        @if (!result().isError)\r\n        {\r\n          @if (result().value !== undefined) {\r\n            <span>{{ result().value | json }}</span>\r\n          }\r\n          @else if (!result().isOnlyPromise) {\r\n            <span class=\"result-undefined\">undefined</span>\r\n          }\r\n          @else {\r\n            <span>promise(🤞🏽)</span>\r\n          }\r\n        }\r\n        @else\r\n        {\r\n          <span class=\"result-error\">\r\n            Calculation failed. Please check console for more info\r\n          </span>\r\n        }\r\n      }\r\n    </div>\r\n    <div class=\"formula-actions-box\">\r\n      <button mat-icon-button tippy=\"Edit\" (click)=\"toggleEdit()\">\r\n        <mat-icon>edit</mat-icon>\r\n      </button>\r\n      <button mat-icon-button tippy=\"Menu\" [matMenuTriggerFor]=\"menu\">\r\n        <mat-icon>more_vert</mat-icon>\r\n      </button>\r\n      <mat-menu #menu=\"matMenu\">\r\n        <button mat-menu-item (click)=\"deleteFormula()\"\r\n          [disabled]=\"!currentFormula()?.sourceCodeId\">\r\n          <mat-icon>delete</mat-icon>\r\n          <span>Delete</span>\r\n        </button>\r\n        <button mat-menu-item (click)=\"reset()\">\r\n          <mat-icon>history</mat-icon>\r\n          <span>Reset</span>\r\n        </button>\r\n      </mat-menu>\r\n      @if (allowSaveFormula)\r\n      {\r\n        <button mat-icon-button tippy=\"Save\"\r\n          [tippyDisabled]=\"!state().editMode || !currentFormula()?.sourceCode\"\r\n          [disabled]=\"!state().editMode || !currentFormula()?.sourceCode || saving()\" (click)=\"save()\">\r\n          <mat-icon>save</mat-icon>\r\n        </button>\r\n      }\r\n      <button mat-icon-button tippy=\"Run\"\r\n        [disabled]=\"!state().editMode || !currentFormula()?.sourceCode\" (click)=\"run()\">\r\n        <mat-icon>play_arrow</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n}\r\n","import { JsonPipe, NgClass } from '@angular/common';\r\nimport { HttpErrorResponse } from '@angular/common/http';\r\nimport { Component, computed, inject, OnDestroy, OnInit, signal } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { Of } from '../../../../../../../core';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { MonacoEditorComponent } from '../../../../monaco-editor/monaco-editor.component';\r\nimport { eavConstants } from '../../../../shared/constants/eav.constants';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../../shared/logging';\r\nimport { EditPrep } from '../../../../shared/models/edit-form.model';\r\nimport { ClipboardService } from '../../../../shared/services/clipboard.service';\r\nimport { EntityEditService } from '../../../../shared/services/entity-edit.service';\r\nimport { FormConfigService } from '../../../form/form-config.service';\r\nimport { DesignerState } from '../../../formulas/designer/designer-state.model';\r\nimport { FormulaDesignerService } from '../../../formulas/designer/formula-designer.service';\r\nimport { defaultFormula, defaultListItemFormula } from '../../../formulas/formula-definitions';\r\nimport { FormulaIdentifier } from '../../../formulas/results/formula-results.models';\r\nimport { FormulaNewPickerTargets, FormulaTargets } from '../../../formulas/targets/formula-targets';\r\nimport { ContentTypeService } from '../../../shared/content-types/content-type.service';\r\nimport { ItemService } from '../../../state/item.service';\r\nimport { SelectTargets } from './formula-designer.models';\r\nimport { SnippetLabelSizePipe } from './snippet-label-size.pipe';\r\n\r\n@Component({\r\n    selector: 'app-formula-designer',\r\n    templateUrl: './formula-designer.component.html',\r\n    styleUrls: ['./formula-designer.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        MatSelectModule,\r\n        FormsModule,\r\n        MatOptionModule,\r\n        NgClass,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        MonacoEditorComponent,\r\n        MatMenuModule,\r\n        JsonPipe,\r\n        SnippetLabelSizePipe,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class FormulaDesignerComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({FormulaDesignerComponent});\r\n\r\n  #designerSvc = inject(FormulaDesignerService);\r\n\r\n  #entitiesService = transient(EntityEditService);\r\n  \r\n  constructor(\r\n    private snackBar: MatSnackBar,\r\n    private formConfig: FormConfigService,\r\n    private itemService: ItemService,\r\n    private contentTypeService: ContentTypeService,\r\n    private translate: TranslateService,\r\n  ) { }\r\n\r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  SelectTargets = SelectTargets;\r\n  loadError = false;\r\n  freeTextTarget = false;\r\n  allowSaveFormula = this.formConfig.config.enableFormulaSave;\r\n  isDeleted = signal(false);\r\n  saving = signal(false);\r\n  monacoOptions: Monaco.editor.IStandaloneEditorConstructionOptions = {\r\n    minimap: {\r\n      enabled: false,\r\n    },\r\n    lineHeight: 19,\r\n    lineNumbers: 'off',\r\n    lineDecorationsWidth: 0,\r\n    folding: false,\r\n    scrollBeyondLastLine: false,\r\n    tabSize: 2,\r\n    fixedOverflowWidgets: true,\r\n  };\r\n  filename = `formula${this.formConfig.config.formId}.js`;\r\n  focused = false;\r\n\r\n\r\n  protected state = this.#designerSvc.designerState;\r\n  protected result = this.#designerSvc.formulaResult;\r\n  protected targetOptions = this.#designerSvc.currentTargetOptions;\r\n  \r\n  protected entityOptions = this.#designerSvc.entityOptions;\r\n  protected fieldsOptions = this.#designerSvc.fieldsOptions;\r\n  protected currentFormula = this.#designerSvc.currentFormula;\r\n\r\n  protected v2JsTypings = this.#designerSvc.v2JsTypings;\r\n\r\n  protected v1ContextSnippets = this.#designerSvc.v1ContextSnippets;\r\n  protected v1DataSnippets = this.#designerSvc.v1DataSnippets;\r\n\r\n  protected template = computed(() => Object.values(FormulaNewPickerTargets).includes(this.state().target)\r\n    ? defaultListItemFormula\r\n    : defaultFormula\r\n  );\r\n\r\n\r\n  ngOnInit(): void {\r\n    // Make sure all necessary services have what they need, otherwise flag & exit\r\n    // 1. Make sure the designer has access to all itemSettingsServices\r\n    this.loadError = false;\r\n    if (Object.keys(this.#designerSvc.itemSettingsServices).length < 1) {\r\n      this.loadError = true;\r\n      return;\r\n    }\r\n    \r\n    this.#designerSvc.setDesignerOpen(true);\r\n    this.#designerSvc.initAfterItemSettingsAreReady();\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.#designerSvc.setDesignerOpen(false);\r\n  }\r\n\r\n  selectedChanged(target: Of<typeof SelectTargets>, value: string | Of<typeof FormulaTargets>): void {\r\n    const newState: DesignerState = {\r\n      ...this.#designerSvc.designerState(),\r\n      editMode: false,\r\n    };\r\n    switch (target) {\r\n      case SelectTargets.Entity:\r\n        newState.entityGuid = value;\r\n        const selectedSettingsSvc = this.#designerSvc.itemSettingsServices[newState.entityGuid];\r\n        newState.fieldName = Object.keys(selectedSettingsSvc.allProps())[0];\r\n        break;\r\n      case SelectTargets.Field:\r\n        newState.fieldName = value;\r\n        break;\r\n      case SelectTargets.Target:\r\n        newState.target = value as Of<typeof FormulaTargets>;\r\n        break;\r\n    }\r\n\r\n    this.#designerSvc.designerState.set(newState);\r\n  }\r\n\r\n  toggleFreeText(): void {\r\n    this.freeTextTarget = !this.freeTextTarget;\r\n  }\r\n\r\n  formulaChanged(formula: string): void {\r\n    this.#designerSvc.cache.updateFormulaFromEditor(this.#designerIdentifier, formula, false);\r\n  }\r\n\r\n  onFocused(focused: boolean): void {\r\n    this.focused = focused;\r\n  }\r\n\r\n  toggleEdit(): void {\r\n    const oldState = this.#designerSvc.designerState();\r\n    const designer: DesignerState = {\r\n      ...oldState,\r\n      editMode: !oldState.editMode,\r\n    };\r\n    this.#designerSvc.designerState.set(designer);\r\n    if (designer.editMode && this.#designerSvc.currentFormula() == null)\r\n      this.#designerSvc.cache.updateFormulaFromEditor(this.#designerIdentifier, this.template(), false);\r\n  }\r\n\r\n  reset(): void {\r\n    const designer: DesignerState = {\r\n      ...this.#designerSvc.designerState(),\r\n      editMode: false,\r\n    };\r\n    const identifier = this.#designerIdentifier;\r\n    this.#designerSvc.designerState.set(designer);\r\n    this.#designerSvc.cache.resetFormula(identifier);\r\n    this.#designerSvc.itemSettingsServices[identifier.entityGuid].retriggerFormulas('designer-reset');\r\n  }\r\n\r\n  run(): void {\r\n    const identifier = this.#designerIdentifier;\r\n    const formula = this.#designerSvc.currentFormula();\r\n    this.#designerSvc.cache.updateFormulaFromEditor(identifier, formula.sourceCode, true);\r\n    this.#designerSvc.itemSettingsServices[identifier.entityGuid].retriggerFormulas('designer-run');\r\n    this.isDeleted.set(false);\r\n  }\r\n\r\n  get #designerIdentifier(): FormulaIdentifier {\r\n    const designer = this.#designerSvc.designerState();\r\n    const id: FormulaIdentifier = { entityGuid: designer.entityGuid, fieldName: designer.fieldName, target: designer.target };\r\n    return id;\r\n  }\r\n\r\n  //#region Save/Delete\r\n\r\n  save(): void {\r\n    this.saving.set(true);\r\n    const formula = this.#designerSvc.currentFormula();\r\n\r\n    if (formula.sourceCodeId == null) {\r\n      const item = this.itemService.get(formula.entityGuid);\r\n      const attributeDef = this.contentTypeService.getAttributeOfItem(item, formula.fieldName);\r\n      const atAllFieldSettings = attributeDef.Metadata.find(m => m.Type.Id === '@All');\r\n      if (!atAllFieldSettings) {\r\n        this.snackBar.open('Field configuration is missing. Please create formula in Administration', undefined, { duration: 3000 });\r\n        this.saving.set(false);\r\n        return;\r\n      }\r\n      this.#entitiesService.create(\r\n        eavConstants.contentTypes.formulas,\r\n        {\r\n          Title: formula.target,\r\n          Target: formula.target,\r\n          Formula: formula.sourceCode,\r\n          Enabled: true,\r\n          ParentRelationship: EditPrep.relationship(atAllFieldSettings.Guid, 'Formulas'),\r\n        },\r\n      ).subscribe(savedFormula => {\r\n        this.#designerSvc.cache.updateSaved(formula, savedFormula.Guid, savedFormula.Id);\r\n        this.snackBar.open('Formula saved', null, { duration: 2000 });\r\n        this.saving.set(false);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.#entitiesService.update(eavConstants.contentTypes.formulas, formula.sourceCodeId, { Formula: formula.sourceCode }).subscribe(() => {\r\n      this.#designerSvc.cache.updateSaved(formula, formula.sourceCodeGuid, formula.sourceCodeId);\r\n      this.snackBar.open('Formula saved', null, { duration: 2000 });\r\n      this.saving.set(false);\r\n    });\r\n  }\r\n\r\n  deleteFormula(): void {\r\n    const designer = this.#designerSvc.designerState();\r\n    const formula = this.#designerSvc.currentFormula();\r\n\r\n    const id = formula.sourceCodeId;\r\n    const title = formula.fieldName + ' - ' + formula.target;\r\n\r\n    const confirmed = confirm(this.translate.instant('Data.Delete.Question', { title, id }));\r\n    if (!confirmed)\r\n      return;\r\n\r\n    this.#entitiesService.delete(eavConstants.contentTypes.formulas, formula.sourceCodeId, true)\r\n      .subscribe({\r\n        next: () => {\r\n          this.#designerSvc.cache.delete(formula);\r\n          this.snackBar.open(this.translate.instant('Message.Deleted'), null, { duration: 2000 });\r\n          this.isDeleted.set(true);\r\n          if (designer.editMode)\r\n            this.toggleEdit();\r\n        },\r\n        error: (_: HttpErrorResponse) => {\r\n          this.snackBar.open(this.translate.instant('Message.DeleteError'), null, { duration: 2000 });\r\n        }\r\n      });\r\n  }\r\n\r\n  //#endregion\r\n\r\n}\r\n","import * as i0 from '@angular/core';\nimport { inject, DOCUMENT, Injectable, InjectionToken, NgZone, EventEmitter, Directive, Input, Output, NgModule } from '@angular/core';\n\n/**\n * A pending copy-to-clipboard operation.\n *\n * The implementation of copying text to the clipboard modifies the DOM and\n * forces a re-layout. This re-layout can take too long if the string is large,\n * causing the execCommand('copy') to happen too long after the user clicked.\n * This results in the browser refusing to copy. This object lets the\n * re-layout happen in a separate tick from copying by providing a copy function\n * that can be called later.\n *\n * Destroy must be called when no longer in use, regardless of whether `copy` is\n * called.\n */\nclass PendingCopy {\n    _document;\n    _textarea;\n    constructor(text, _document) {\n        this._document = _document;\n        const textarea = (this._textarea = this._document.createElement('textarea'));\n        const styles = textarea.style;\n        // Hide the element for display and accessibility. Set a fixed position so the page layout\n        // isn't affected. We use `fixed` with `top: 0`, because focus is moved into the textarea\n        // for a split second and if it's off-screen, some browsers will attempt to scroll it into view.\n        styles.position = 'fixed';\n        styles.top = styles.opacity = '0';\n        styles.left = '-999em';\n        textarea.setAttribute('aria-hidden', 'true');\n        textarea.value = text;\n        // Making the textarea `readonly` prevents the screen from jumping on iOS Safari (see #25169).\n        textarea.readOnly = true;\n        // The element needs to be inserted into the fullscreen container, if the page\n        // is in fullscreen mode, otherwise the browser won't execute the copy command.\n        (this._document.fullscreenElement || this._document.body).appendChild(textarea);\n    }\n    /** Finishes copying the text. */\n    copy() {\n        const textarea = this._textarea;\n        let successful = false;\n        try {\n            // Older browsers could throw if copy is not supported.\n            if (textarea) {\n                const currentFocus = this._document.activeElement;\n                textarea.select();\n                textarea.setSelectionRange(0, textarea.value.length);\n                successful = this._document.execCommand('copy');\n                if (currentFocus) {\n                    currentFocus.focus();\n                }\n            }\n        }\n        catch {\n            // Discard error.\n            // Initial setting of {@code successful} will represent failure here.\n        }\n        return successful;\n    }\n    /** Cleans up DOM changes used to perform the copy operation. */\n    destroy() {\n        const textarea = this._textarea;\n        if (textarea) {\n            textarea.remove();\n            this._textarea = undefined;\n        }\n    }\n}\n\n/**\n * A service for copying text to the clipboard.\n */\nclass Clipboard {\n    _document = inject(DOCUMENT);\n    constructor() { }\n    /**\n     * Copies the provided text into the user's clipboard.\n     *\n     * @param text The string to copy.\n     * @returns Whether the operation was successful.\n     */\n    copy(text) {\n        const pendingCopy = this.beginCopy(text);\n        const successful = pendingCopy.copy();\n        pendingCopy.destroy();\n        return successful;\n    }\n    /**\n     * Prepares a string to be copied later. This is useful for large strings\n     * which take too long to successfully render and be copied in the same tick.\n     *\n     * The caller must call `destroy` on the returned `PendingCopy`.\n     *\n     * @param text The string to copy.\n     * @returns the pending copy operation.\n     */\n    beginCopy(text) {\n        return new PendingCopy(text, this._document);\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: Clipboard, deps: [], target: i0.ɵɵFactoryTarget.Injectable });\n    static ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: Clipboard, providedIn: 'root' });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: Clipboard, decorators: [{\n            type: Injectable,\n            args: [{ providedIn: 'root' }]\n        }], ctorParameters: () => [] });\n\n/** Injection token that can be used to provide the default options to `CdkCopyToClipboard`. */\nconst CDK_COPY_TO_CLIPBOARD_CONFIG = new InjectionToken('CDK_COPY_TO_CLIPBOARD_CONFIG');\n/**\n * Provides behavior for a button that when clicked copies content into user's\n * clipboard.\n */\nclass CdkCopyToClipboard {\n    _clipboard = inject(Clipboard);\n    _ngZone = inject(NgZone);\n    /** Content to be copied. */\n    text = '';\n    /**\n     * How many times to attempt to copy the text. This may be necessary for longer text, because\n     * the browser needs time to fill an intermediate textarea element and copy the content.\n     */\n    attempts = 1;\n    /**\n     * Emits when some text is copied to the clipboard. The\n     * emitted value indicates whether copying was successful.\n     */\n    copied = new EventEmitter();\n    /** Copies that are currently being attempted. */\n    _pending = new Set();\n    /** Whether the directive has been destroyed. */\n    _destroyed;\n    /** Timeout for the current copy attempt. */\n    _currentTimeout;\n    constructor() {\n        const config = inject(CDK_COPY_TO_CLIPBOARD_CONFIG, { optional: true });\n        if (config && config.attempts != null) {\n            this.attempts = config.attempts;\n        }\n    }\n    /** Copies the current text to the clipboard. */\n    copy(attempts = this.attempts) {\n        if (attempts > 1) {\n            let remainingAttempts = attempts;\n            const pending = this._clipboard.beginCopy(this.text);\n            this._pending.add(pending);\n            const attempt = () => {\n                const successful = pending.copy();\n                if (!successful && --remainingAttempts && !this._destroyed) {\n                    // We use 1 for the timeout since it's more predictable when flushing in unit tests.\n                    this._currentTimeout = this._ngZone.runOutsideAngular(() => setTimeout(attempt, 1));\n                }\n                else {\n                    this._currentTimeout = null;\n                    this._pending.delete(pending);\n                    pending.destroy();\n                    this.copied.emit(successful);\n                }\n            };\n            attempt();\n        }\n        else {\n            this.copied.emit(this._clipboard.copy(this.text));\n        }\n    }\n    ngOnDestroy() {\n        if (this._currentTimeout) {\n            clearTimeout(this._currentTimeout);\n        }\n        this._pending.forEach(copy => copy.destroy());\n        this._pending.clear();\n        this._destroyed = true;\n    }\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: CdkCopyToClipboard, deps: [], target: i0.ɵɵFactoryTarget.Directive });\n    static ɵdir = i0.ɵɵngDeclareDirective({ minVersion: \"14.0.0\", version: \"20.0.0\", type: CdkCopyToClipboard, isStandalone: true, selector: \"[cdkCopyToClipboard]\", inputs: { text: [\"cdkCopyToClipboard\", \"text\"], attempts: [\"cdkCopyToClipboardAttempts\", \"attempts\"] }, outputs: { copied: \"cdkCopyToClipboardCopied\" }, host: { listeners: { \"click\": \"copy()\" } }, ngImport: i0 });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: CdkCopyToClipboard, decorators: [{\n            type: Directive,\n            args: [{\n                    selector: '[cdkCopyToClipboard]',\n                    host: {\n                        '(click)': 'copy()',\n                    },\n                }]\n        }], ctorParameters: () => [], propDecorators: { text: [{\n                type: Input,\n                args: ['cdkCopyToClipboard']\n            }], attempts: [{\n                type: Input,\n                args: ['cdkCopyToClipboardAttempts']\n            }], copied: [{\n                type: Output,\n                args: ['cdkCopyToClipboardCopied']\n            }] } });\n\nclass ClipboardModule {\n    static ɵfac = i0.ɵɵngDeclareFactory({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: ClipboardModule, deps: [], target: i0.ɵɵFactoryTarget.NgModule });\n    static ɵmod = i0.ɵɵngDeclareNgModule({ minVersion: \"14.0.0\", version: \"20.0.0\", ngImport: i0, type: ClipboardModule, imports: [CdkCopyToClipboard], exports: [CdkCopyToClipboard] });\n    static ɵinj = i0.ɵɵngDeclareInjector({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: ClipboardModule });\n}\ni0.ɵɵngDeclareClassMetadata({ minVersion: \"12.0.0\", version: \"20.0.0\", ngImport: i0, type: ClipboardModule, decorators: [{\n            type: NgModule,\n            args: [{\n                    imports: [CdkCopyToClipboard],\n                    exports: [CdkCopyToClipboard],\n                }]\n        }] });\n\nexport { CDK_COPY_TO_CLIPBOARD_CONFIG, CdkCopyToClipboard, Clipboard, ClipboardModule, PendingCopy };\n","import { ClipboardModule } from '@angular/cdk/clipboard';\r\nimport { Component, HostBinding, Inject } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport {\r\n  MAT_DIALOG_DATA,\r\n  MatDialogActions,\r\n  MatDialogClose,\r\n  MatDialogModule, MatDialogRef\r\n} from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { transient } from '../../../../../../../../core/transient';\r\nimport { ClipboardService } from '../../../../..//shared/services/clipboard.service';\r\nimport { MonacoEditorComponent } from '../../../../../monaco-editor/monaco-editor.component';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\n@Component({\r\n    imports: [\r\n        MatDialogModule,\r\n        FormsModule,\r\n        MonacoEditorComponent,\r\n        MatButtonModule,\r\n        MatDialogActions,\r\n        MatDialogClose,\r\n        ClipboardModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ],\r\n    selector: 'app-monaco-editor-dialog',\r\n    templateUrl: './config-editor-dialog.component.html'\r\n})\r\nexport class ConfigEditorDialogComponent {\r\n\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n  \r\n  selectedConfig: string;\r\n  focused = false;\r\n  editorOptions = {\r\n    theme: 'vs-light',\r\n    language: 'json',\r\n    readOnly: true,\r\n    automaticLayout: true,\r\n    minimap: { enabled: false },\r\n    scrollBeyondLastLine: false,\r\n  };\r\n  filename = 'exported-config.json';\r\n\r\n  constructor(\r\n    public dialog: MatDialogRef<ConfigEditorDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) {\r\n    this.selectedConfig = JSON.stringify(data.configData, null, 2);\r\n  }\r\n  \r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  onFocused(focused: boolean): void {\r\n    this.focused = focused;\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Configs Exporter</div>\r\n    <button mat-icon-button mat-dialog-close tippy=\"Close dialog\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\" style=\"padding-bottom: 0;\">\r\n    <app-monaco-editor\r\n      [filename]=\"filename\"\r\n      [value]=\"selectedConfig\"\r\n      [options]=\"editorOptions\"\r\n      (focused)=\"onFocused(true)\"\r\n      (blurred)=\"onFocused(false)\"\r\n      style=\"height: 350px; width: 100%\"\r\n    />\r\n  </div>\r\n  <mat-dialog-actions>\r\n    <button mat-icon-button (click)=\"clipboard.copyToClipboard(selectedConfig)\" tippy=\"Copy Config To Clipboard\">\r\n      <mat-icon>content_copy</mat-icon>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport {\r\n  MAT_DIALOG_DATA,\r\n  MatDialogActions,\r\n  MatDialogClose,\r\n  MatDialogModule,\r\n  MatDialogRef\r\n} from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MonacoEditorComponent } from '../../../../../monaco-editor/monaco-editor.component';\r\nimport { TippyDirective } from '../../../../../shared/directives/tippy.directive';\r\n@Component({\r\n    imports: [\r\n        MatDialogModule,\r\n        FormsModule,\r\n        MonacoEditorComponent,\r\n        MatButtonModule,\r\n        MatDialogActions,\r\n        MatDialogClose,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ],\r\n    selector: 'app-monaco-editor-dialog',\r\n    templateUrl: './specs-editor-dialog.component.html'\r\n})\r\nexport class SpecsEditorDialogComponent {\r\n\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  logSpecs: string;\r\n  focused = false;\r\n  editorOptions = {\r\n    theme: 'vs-light',\r\n    language: 'json',\r\n    readOnly: false,\r\n    automaticLayout: true,\r\n    minimap: { enabled: false },\r\n    scrollBeyondLastLine: false,\r\n  };\r\n  filename = 'log-specs.json';\r\n\r\n  constructor(\r\n    public dialog: MatDialogRef<SpecsEditorDialogComponent>,\r\n    @Inject(MAT_DIALOG_DATA) public data: any\r\n  ) {\r\n    this.logSpecs = JSON.stringify(data.logSpecs, null, 2);\r\n  }\r\n\r\n  onClose(): void {\r\n    this.dialog.close();\r\n  }\r\n\r\n  onSave(): void {\r\n    this.dialog.close(this.logSpecs);\r\n  }\r\n\r\n  onValueChanged(newValue: string): void {\r\n    this.logSpecs = newValue;\r\n  }\r\n\r\n  onFocused(focused: boolean): void {\r\n    this.focused = focused;\r\n  }\r\n}\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Log Specs Editor</div>\r\n    <button mat-icon-button mat-dialog-close tippy=\"Close dialog\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\" style=\"padding-bottom: 0;\">\r\n    <app-monaco-editor\r\n      [filename]=\"filename\"\r\n      [value]=\"logSpecs\"\r\n      [options]=\"editorOptions\"\r\n      (valueChanged)=\"onValueChanged($event)\"\r\n      (focused)=\"onFocused(true)\"\r\n      (blurred)=\"onFocused(false)\"\r\n      style=\"height: 350px; width: 100%\"\r\n    />\r\n  </div>\r\n  <mat-dialog-actions>\r\n    <button mat-icon-button (click)=\"onSave()\" tippy=\"Save Specs\">\r\n      <mat-icon>save</mat-icon>\r\n    </button>\r\n  </mat-dialog-actions>\r\n</div>\r\n","<div class=\"log-content fancy-scrollbar-light\">\r\n  <div class=\"menu\">\r\n    <mat-form-field id=\"search-input\" color=\"accent\">\r\n      <mat-label>Search</mat-label>\r\n      <input matInput placeholder=\"Search\" (input)=\"filterLogs($event)\" />\r\n    </mat-form-field>\r\n\r\n    <mat-form-field id=\"active-filter-dropdown\" color=\"accent\">\r\n      <mat-label>Show</mat-label>\r\n      <mat-select [(value)]=\"selectedFilter\" (selectionChange)=\"onFilterSelected($event.value)\">\r\n        <mat-option value=\"\"> All </mat-option>\r\n        <mat-option value=\"activated\"> Activated </mat-option>\r\n        <mat-option value=\"deactivated\"> Deactivated </mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n\r\n    <button mat-icon-button tippy=\"Toggle All Logs in View\" (click)=\"checkAll()\">\r\n      <mat-icon>check_box</mat-icon>\r\n    </button>\r\n\r\n    <button mat-icon-button (click)=\"saveConfig()\" tippy=\"Save Configuration with all selected Logs\">\r\n      <mat-icon>save</mat-icon>\r\n    </button>\r\n\r\n    <button\r\n      mat-icon-button\r\n      [disabled]=\"selectedConfig === null\"\r\n      (click)=\"exportConfig()\"\r\n      tippy=\"Export the selected configuration from the saved Configs\"\r\n      >\r\n      <mat-icon>ios_share</mat-icon>\r\n    </button>\r\n\r\n    <mat-form-field color=\"accent\">\r\n      <mat-label>Configs</mat-label>\r\n      <mat-select\r\n        [(value)]=\"selectedConfig\"\r\n        (selectionChange)=\"onConfigSelected($event.value)\"\r\n        >\r\n        @for (config of configs; track config) {\r\n          <mat-option [value]=\"config\">\r\n            {{ config }}\r\n          </mat-option>\r\n        }\r\n      </mat-select>\r\n    </mat-form-field>\r\n  </div>\r\n  @for (log of allLogs | keyvalue; track log) {\r\n    <div>\r\n      <label>\r\n        <input\r\n          type=\"checkbox\"\r\n          [id]=\"log.key\"\r\n          [name]=\"log.key\"\r\n          [checked]=\"isChecked(log.key)\"\r\n          (change)=\"toggleConfig(log.key)\"\r\n          />\r\n          {{ log.key }}\r\n          @if (hasLogSpecs(log.key)) {\r\n            <button (click)=\"openLogSpecs(log.key)\" tippy=\"Edit Log Specs\">\r\n              <mat-icon class=\"specs-icon\">data_object</mat-icon>\r\n            </button>\r\n          }\r\n        </label>\r\n      </div>\r\n    }\r\n  </div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { LogManager } from '../../../../shared/logging/log-manager';\r\nimport { LoggingService, LogSeverities } from '../../../shared/services/logging.service';\r\nimport { ConfigEditorDialogComponent } from '../logs-config/config-editor-dialog/config-editor-dialog.component';\r\nimport { SpecsEditorDialogComponent } from '../logs-config/specs-editor-dialog/specs-editor-dialog.component';\r\n\r\n@Component({\r\n  selector: 'app-logs-config',\r\n  templateUrl: './logs-config.component.html',\r\n  styleUrls: ['./logs-config.component.scss'],\r\n  imports: [\r\n    CommonModule,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    TippyDirective,\r\n    MatFormFieldModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    FormsModule,\r\n    MatInputModule,\r\n  ]\r\n})\r\nexport class LogsConfigComponent {\r\n  LogSeverities = LogSeverities;\r\n  logManager = LogManager.singleton();\r\n  allLogs = this.logManager.mergeAllSpecs;\r\n  configs: string[] = [];\r\n  sessionPrefix = 'logSpecs';\r\n  selectedFilter: \"activated\" | \"deactivated\" | \"\";\r\n  selectedConfig: string | null = null;\r\n  searchTerm: string = '';\r\n\r\n  protected logs = this.loggingService.getLogsSignal();\r\n\r\n  constructor(\r\n    private loggingService: LoggingService,\r\n    private matDialog: MatDialog,\r\n    private snackBar: MatSnackBar\r\n  ) { this.loadConfigsFromStateManager(); }\r\n\r\n  /* Toggle Functions */\r\n  checkAll(): void {\r\n    const allChecked = Object.values(this.allLogs).every(\r\n      (specs) => specs.enabled\r\n    );\r\n\r\n    if (allChecked) {\r\n      // Reset all to unchecked\r\n      for (const spec of Object.keys(this.allLogs)) {\r\n        if (this.isChecked(spec)) {\r\n          this.logManager.toggle(spec);\r\n        }\r\n      }\r\n    } else {\r\n      for (const spec of Object.keys(this.allLogs)) {\r\n        if (!this.isChecked(spec)) {\r\n          this.logManager.toggle(spec);\r\n        }\r\n      }\r\n    }\r\n\r\n    this.applyFilters();\r\n  }\r\n\r\n  onFilterSelected(filter: \"activated\" | \"deactivated\" | \"\"): void {\r\n    this.selectedFilter = filter;\r\n    this.applyFilters();\r\n  }\r\n\r\n  filterLogs(event: Event): void {\r\n    const inputElement = event.target as HTMLInputElement;\r\n    this.searchTerm = inputElement.value.toLowerCase(); // Store the search term\r\n    this.applyFilters();\r\n  }\r\n\r\n  isChecked(name: string): boolean {\r\n    return this.allLogs[name]?.enabled ?? false;\r\n  }\r\n\r\n  toggleConfig(name: string): void {\r\n    this.logManager.toggle(name);\r\n    this.applyFilters();\r\n  }\r\n\r\n  /* Config Functions */\r\n  loadConfigsFromStateManager(): void {\r\n    const savedConfigs = Object.keys(this.logManager.state.cache).filter(\r\n      (key) => key.startsWith(this.sessionPrefix)\r\n    );\r\n    this.configs = savedConfigs.map((key) =>\r\n      key.replace(`${this.sessionPrefix}.`, '')\r\n    );\r\n  }\r\n\r\n  onConfigSelected(configName: string | null): void {\r\n    this.selectedConfig = configName;\r\n  }\r\n\r\n  private applyFilters(): void {\r\n \r\n    let filteredLogs = Object.entries(this.logManager.mergeAllSpecs); // Always start from full logs\r\n  \r\n    if (this.searchTerm) {\r\n      filteredLogs = filteredLogs.filter(([key]) => key.toLowerCase().includes(this.searchTerm));\r\n    }\r\n  \r\n    if (this.selectedFilter === 'activated') {\r\n      filteredLogs = filteredLogs.filter(([, log]) => log.enabled);\r\n    } else if (this.selectedFilter === 'deactivated') {\r\n      filteredLogs = filteredLogs.filter(([, log]) => !log.enabled);\r\n    }\r\n  \r\n    this.allLogs = Object.fromEntries(filteredLogs);\r\n  }\r\n\r\n  saveConfig(): void {\r\n    const configName = prompt('Enter the config name:');\r\n  \r\n    if (configName) {\r\n      // Save all activated logs, irrespective of the filters\r\n      const enabledConfigs = Object.fromEntries(\r\n        Object.entries(this.logManager.mergeAllSpecs).filter(\r\n          ([, config]) => config.enabled\r\n        )\r\n      );\r\n  \r\n      const fullConfigKey = `${this.sessionPrefix}.${configName}`;\r\n      this.logManager.state.add(fullConfigKey, enabledConfigs);\r\n  \r\n      this.snackBar.open(`Config \"${configName}\" has been saved.`, null, {\r\n        duration: 2000,\r\n      });\r\n      this.loadConfigsFromStateManager();\r\n    }\r\n  }\r\n  \r\n  exportConfig(): void {\r\n    const fullConfigKey = `${this.sessionPrefix}.${this.selectedConfig}`;\r\n    const configData = this.logManager.state.cache[fullConfigKey];\r\n\r\n    if (configData && Object.keys(configData).length > 0) {\r\n      this.matDialog.open(ConfigEditorDialogComponent, {\r\n        width: '800px',\r\n        data: { configData },\r\n      });\r\n    } else {\r\n      this.snackBar.open(`No active logs to export for \"${this.selectedConfig}\".`, null, {\r\n        duration: 2000,\r\n      });\r\n    }\r\n    \r\n    this.applyFilters();\r\n  }\r\n\r\n  /* Specs Editor Dialog Functions */\r\n  hasLogSpecs(logKey: string): boolean {\r\n    const specs = this.allLogs[logKey]?.specs;\r\n    return !!specs && Object.keys(specs).length > 0;\r\n  }\r\n\r\n  openLogSpecs(logKey: string): void {\r\n    let logSpecs = this.allLogs[logKey].specs;\r\n    const dialogRef = this.matDialog.open(SpecsEditorDialogComponent, {\r\n      width: '800px',\r\n      data: { logSpecs: logSpecs },\r\n    });\r\n\r\n    dialogRef.afterClosed().subscribe((result) => {\r\n      if (result) {\r\n        const updatedSpecs = JSON.parse(result);\r\n\r\n        this.allLogs[logKey].specs = updatedSpecs;\r\n\r\n        this.logManager.updateSpecs(this.allLogs);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"logs-box fancy-scrollbar-light\">\r\n  <div class=\"logs-content\">\r\n    @if (!showSettings) {\r\n      @if (logs().length === 0) {\r\n        <div>Logs are empty</div>\r\n      } \r\n      @for (log of logs(); track log) {\r\n        <div\r\n          class=\"log-entry\"\r\n          [ngClass]=\"{\r\n            'log-error': log.severity === LogSeverities.Error,\r\n            'log-warn': log.severity === LogSeverities.Warn\r\n          }\"\r\n        >\r\n          <span class=\"log-entry-part log-entry-time\"\r\n            >{{ log.time | date : \"HH:mm:ss\" }}:</span\r\n          >\r\n          <span class=\"log-entry-part log-entry-label\">{{ log.label }}</span>\r\n          <span\r\n            class=\"log-entry-part log-entry-show\"\r\n            tippy=\"Log to console\"\r\n            (click)=\"logToConsole(log)\"\r\n          >\r\n            console\r\n          </span>\r\n        </div>\r\n      }\r\n    } @else {\r\n      <app-logs-config />\r\n    }\r\n  </div>\r\n\r\n  <div class=\"log-button\">\r\n    <button mat-icon-button tippy=\"Show Logs Settings\" (click)=\"showLogSettings(true)\">\r\n      <mat-icon>settings</mat-icon>\r\n    </button>\r\n    <button mat-icon-button tippy=\"Show Logs Output\" (click)=\"showLogSettings(false)\">\r\n      <mat-icon>contract</mat-icon>\r\n    </button>\r\n  </div>\r\n</div>\r\n","import { DatePipe, NgClass } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { LogEntry, LoggingService, LogSeverities } from '../../../shared/services/logging.service';\r\nimport { LogsConfigComponent } from \"../logs-config/logs-config.component\";\r\n\r\n@Component({\r\n    selector: 'app-logs-dump',\r\n    templateUrl: './logs-dump.component.html',\r\n    styleUrls: ['./logs-dump.component.scss'],\r\n    imports: [\r\n        NgClass,\r\n        DatePipe,\r\n        MatIconModule,\r\n        MatButtonModule,\r\n        LogsConfigComponent,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class LogsDumpComponent {\r\n  LogSeverities = LogSeverities;\r\n  showSettings = true;\r\n\r\n  protected logs = this.loggingService.getLogsSignal();\r\n\r\n  constructor(private loggingService: LoggingService) { }\r\n\r\n  logToConsole(log: LogEntry): void {\r\n    switch (log.severity) {\r\n      case LogSeverities.Log:\r\n        console.log(log.label, log.error);\r\n        break;\r\n      case LogSeverities.Warn:\r\n        console.warn(log.label, log.error);\r\n        break;\r\n      case LogSeverities.Error:\r\n        console.error(log.label, log.error);\r\n        break;\r\n    }\r\n  }\r\n\r\n  showLogSettings(show: boolean): void {\r\n    this.showSettings = show;\r\n  }\r\n}\r\n\r\n","<mat-card appearance=\"raised\" class=\"mat-elevation-z4\" [ngClass]=\"{ 'debug-enabled': preferences().tab != null }\">\r\n  \r\n  <div class=\"debug-buttons-container\">\r\n    <button mat-button tippy=\"Show Data JSON\" (click)=\"toggleDialog(DebugTypes.Data)\">\r\n      <mat-icon>offline_bolt</mat-icon>\r\n      <span>Data</span>\r\n    </button>\r\n    <button mat-button tippy=\"Show Formula Designer\" (click)=\"toggleDialog(DebugTypes.Formulas)\">\r\n      <mat-icon>functions</mat-icon>\r\n      <span>Formulas</span>\r\n    </button>\r\n    <button mat-button tippy=\"Show Logs\" (click)=\"toggleDialog(DebugTypes.Logs)\">\r\n      <mat-icon>speed</mat-icon>\r\n      <span>Logs</span>\r\n    </button>\r\n    <div class=\"spacer\"></div>\r\n\r\n    <!-- Special expand button when working with formulas, to get more space -->\r\n    @if (preferences().tab != null)\r\n    {\r\n      <button mat-icon-button tippy=\"expand/shrink\" (click)=\"toggleSize()\">\r\n        <mat-icon>{{ preferences().expanded ? 'unfold_less' : 'expand' }}</mat-icon>\r\n      </button>\r\n    }\r\n    @else\r\n    {\r\n      <button mat-icon-button [tippy]=\"'Developer tools are only visible to developers. ' + pinResource('status')\" (click)=\"prefManager.toggle('pinned')\">\r\n        <mat-icon>{{ pinResource('icon') }}</mat-icon>\r\n      </button>\r\n    }\r\n\r\n    <div class=\"sxc-version\">\r\n      2sxc {{ sxcVer }}\r\n    </div>\r\n  </div>\r\n\r\n  @if (preferences().tab != null)\r\n  {\r\n    <div class=\"debug-info-container\" [ngClass]=\"'size' + (preferences().expanded ? '-xl' : '')\">\r\n      @switch (preferences().tab) {\r\n        @case (DebugTypes.Data) {\r\n          <app-data-dump></app-data-dump>\r\n        }\r\n        @case (DebugTypes.Formulas) {\r\n          <app-formula-designer></app-formula-designer>\r\n        }\r\n        @case (DebugTypes.Logs) {\r\n          <app-logs-dump></app-logs-dump>\r\n        }\r\n      }\r\n    </div>\r\n  }\r\n</mat-card>","import { NgClass } from '@angular/common';\r\nimport { Component, inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { Of } from '../../../../../../core';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { classLog } from '../../../shared/logging';\r\nimport { EavWindow } from '../../../shared/models/eav-window.model';\r\nimport { UserPreferences } from '../../../shared/user/user-preferences.service';\r\nimport { DataDumpComponent } from './data-dump/data-dump.component';\r\nimport { DebugTypes } from './edit-dialog-footer.models';\r\nimport { footerPreferences } from './footer-preferences';\r\nimport { FormulaDesignerComponent } from './formula-designer/formula-designer.component';\r\nimport { LogsDumpComponent } from './logs-dump/logs-dump.component';\r\n\r\ndeclare const window: EavWindow;\r\n\r\n@Component({\r\n    selector: 'app-edit-dialog-footer',\r\n    templateUrl: './edit-dialog-footer.component.html',\r\n    styleUrls: ['./edit-dialog-footer.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        NgClass,\r\n        DataDumpComponent,\r\n        FormulaDesignerComponent,\r\n        LogsDumpComponent,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class EditDialogFooterComponent {\r\n\r\n  log = classLog({EditDialogFooterComponent});\r\n\r\n  DebugTypes = DebugTypes;\r\n\r\n  sxcVer = window.sxcVersion.substring(0, window.sxcVersion.lastIndexOf('.'));\r\n  \r\n  prefManager = inject(UserPreferences).part(footerPreferences);\r\n  preferences = this.prefManager.data;\r\n\r\n  toggleDialog(type: Of<typeof DebugTypes>): void {\r\n    const s = this.preferences();\r\n    const hideTab = s.tab === type;\r\n    const tab = hideTab ? null :  type;\r\n    const expanded = hideTab ? false : s.expanded;\r\n    const size = hideTab ? 0 : expanded ? 2 : 1;\r\n    this.prefManager.setMany({ tab, expanded, size });\r\n  }\r\n\r\n  toggleSize(): void {\r\n    const expanded = !this.preferences().expanded;\r\n    const size = expanded ? 2 : 1;\r\n    this.prefManager.setMany({ expanded, size });\r\n  }\r\n\r\n  pinResource(part: string): string {\r\n    return pinResources[(`${part}-${this.preferences().pinned}`)];\r\n  }\r\n}\r\n\r\nconst pinResources: Record<string, string> = {\r\n  ['status-true']: 'pinned - will remain visible on reload',\r\n  ['status-false']: 'not pinned - will hide on reload',\r\n  ['icon-true']: 'keep_public',\r\n  ['icon-false']: 'keep_off',\r\n}\r\n","import { HttpContext } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { EavFor } from '../../edit/shared/models/eav';\r\nimport { IGNORED_STATUSES } from '../interceptors/handle-errors.interceptor';\r\nimport { ItemInListIdentifier } from '../models/edit-form.model';\r\nimport { webApiEntityRoot } from './entity.service';\r\nimport { HttpServiceBaseSignal } from './http-service-base-signal';\r\n\r\n@Injectable()\r\nexport class EntityEditService extends HttpServiceBaseSignal {\r\n\r\n  create<T = QuickEntityResponse>(contentType: string, entity: QuickEntityRequest): Observable<T> {\r\n    return this.http.post<T>(`app/auto/data/${contentType}`, entity, {\r\n      params: { appId: this.appId, zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  update<T = QuickEntityResponse>(contentType: string, entityId: number, entity: QuickEntityRequest): Observable<T> {\r\n    return this.http.post<T>(`app/auto/data/${contentType}/${entityId}`, entity, {\r\n      params: { appId: this.appId, zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  delete(type: string, id: number, tryForce: boolean) {\r\n    return this.http.delete<null>(this.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: { contentType: type, id: id.toString(), appId: this.appId, force: tryForce.toString() },\r\n      context: new HttpContext().set(IGNORED_STATUSES, [400]),\r\n    });\r\n  }\r\n}\r\n\r\ninterface QuickEntityRequest {\r\n  /** Metadata target */\r\n  For?: EavFor;\r\n  /** Parent linking target (add to this entity) */\r\n  ParentRelationship?: ItemInListIdentifier;\r\n  [field: string]: any;\r\n}\r\n\r\ninterface QuickEntityResponse {\r\n  Created: string;\r\n  Guid: string;\r\n  Id: number;\r\n  Modified: string;\r\n  [field: string]: any;\r\n}\r\n"],"x_google_ignoreList":[7]}