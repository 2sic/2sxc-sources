"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts"],{9262:(D,c,i)=>{i.r(c),i.d(c,{WebApiRestApiComponent:()=>a});var s=i(7580),r=i(4456),A=i(4175),E=i(3777),m=i(3840),u=i(5175),I=i(2159),h=i(2938),g=i(9996),P=i(7037),T=i(8471),_=i(4950),f=i(4646);function e(t,l){if(1&t&&(s.j41(0,"mat-option",3),s.EFF(1),s.k0s()),2&t){const n=l.$implicit;s.Y8G("value",n.path),s.R7$(),s.SpI(" ",n.name," ")}}function p(t,l){if(1&t&&s.Z7z(0,e,2,2,"mat-option",3,s.fX1),2&t){const n=s.XpG();s.Dyx(n.webApisTypes().sort())}}let a=(()=>{class t{#e;#t;#a;constructor(n){this.fb=n,this.#e=(0,h.d)(g.F),this.#t=(0,h.d)(T.c),this.#a=this.#e.getWebApisSig(),this.webApisTypes=(0,s.EWP)(()=>{const o=this.#a(),d=this.#t.url.split("/");var C=d[d.length-1].replace("%252F","/");const O=o.find(M=>M.path===C);return O&&this.webApiTypeForm.get("webApiType").setValue(O.path),o}),this.webApiTypeForm=this.fb.group({webApiType:[""]})}openRestApi(n){n&&this.#t.navRelative([encodeURIComponent(n)])}static{this.\u0275fac=function(o){return new(o||t)(s.rXU(r.ok))}}static{this.\u0275cmp=s.VBU({type:t,selectors:[["app-web-api-rest-api"]],decls:7,vars:2,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","webApiType",3,"valueChange"],[3,"value"]],template:function(o,d){1&o&&(s.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),s.EFF(3,"Endpoint"),s.k0s(),s.j41(4,"mat-select",2),s.bIt("valueChange",function(C){return d.openRestApi(C)}),s.DNE(5,p,2,0),s.k0s()()(),s.nrm(6,"router-outlet")),2&o&&(s.Y8G("formGroup",d.webApiTypeForm),s.R7$(5),s.vxM(d.webApisTypes()?5:-1))},dependencies:[u.Ve,_.rl,_.nJ,u.VO,f.wT,A.Hl,E.Hu,m.m_,r.X1,r.qT,r.BC,r.cb,r.j4,r.JD,I.n3,P.p],encapsulation:2})}}return t})()},9996:(D,c,i)=>{i.d(c,{F:()=>T});var s=i(7580),r=i(271),A=i(6474);const m="admin/AppFiles/asset",h="admin/ApiExplorer/AppApiFiles";let T=(()=>{class _ extends A.D{get(e,p,a){return this.getHttpApiUrl(m,{params:{appId:this.appId,global:p,...this.templateIdOrPath(e,p,a)}}).pipe((0,r.T)(t=>{if("auto"===t.Type.toLocaleLowerCase())switch(t.Extension.toLocaleLowerCase()){case".cs":case".cshtml":t.Type="Razor";break;case".html":case".css":case".js":t.Type="Token"}return t}))}save(e,p,a,t){return this.http.post(this.apiUrl(m),a,{params:{appId:this.appId,global:p,...this.templateIdOrPath(e,p,t)}})}getAll(e){return this.getHttpApiUrl("admin/AppFiles/AppFiles",{params:{appId:this.appId,...e&&{mask:e}}}).pipe((0,r.T)(({Files:p})=>(p.forEach(a=>{a.Shared??=!1}),p)))}getWebApis(){return this.getHttpApiUrl(h,{params:{appId:this.appId}}).pipe((0,r.T)(({files:e})=>(e.forEach(p=>{p.isShared??=!1,p.isCompiled??=!1}),e))).pipe((0,r.T)(e=>e.map(a=>{const t=a.path.lastIndexOf("/"),l=a.path.lastIndexOf("."),n=a.path.substring(0,t),o=a.path.substring(t+1,l);return{path:a.path,folder:n,name:o,isShared:a.isShared,endpointPath:a.endpointPath,isCompiled:a.isCompiled,edition:a.edition}})))}getWebApisSig(){const e=this.getSignal(h,{params:{appId:this.appId}});return(0,s.EWP)(()=>{const a=e()?.files;return a?(a.forEach(t=>{t.isShared??=!1,t.isCompiled??=!1}),a.map(t=>{const l=t.path.lastIndexOf("/"),n=t.path.lastIndexOf("."),o=t.path.substring(0,l),d=t.path.substring(l+1,n);return{path:t.path,folder:o,name:d,isShared:t.isShared,endpointPath:t.endpointPath,isCompiled:t.isCompiled,edition:t.edition}})):[]})}getWebApiDetails(e){return this.getHttpApiUrl("admin/ApiExplorer/inspect",{params:{appId:this.appId,zoneId:this.zoneId,path:e}})}getPredefinedTemplates(e,p){return this.getHttpApiUrl("admin/AppFiles/GetTemplates",{params:{...e&&{purpose:e},...p&&{type:p}}})}getPreview(e,p,a){return this.getHttpApiUrl("admin/AppFiles/preview",{params:{appId:this.appId,path:e,templateKey:a,global:p}})}create(e,p,a){return this.http.post(this.apiUrl("admin/AppFiles/create"),{},{params:{appId:this.appId,global:p,purpose:"auto",path:e,templateKey:a}})}templateIdOrPath(e,p,a){if(/^[0-9]*$/g.test(e)){const t=a.find(l=>l.EntityId?.toString()===e&&l.IsShared===p)?.Path;return{templateId:e,...null!=t&&{path:t}}}return{path:e}}static{this.\u0275fac=(()=>{let e;return function(a){return(e||(e=s.xGo(_)))(a||_)}})()}static{this.\u0275prov=s.jDH({token:_,factory:_.\u0275fac})}}return _})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.02/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts.70e9cfbe1dc62ad2.js.map