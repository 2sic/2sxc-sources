(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"/ciH":function(e,t,n){"use strict";var i=n("PYp2"),a=n("SEb4"),o=n("TPB+"),r=/^(?:0|[1-9]\d*)$/,c=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&r.test(e))&&e>-1&&e%1==0&&e<t},s=n("HuQ3"),l=Object.prototype.hasOwnProperty;t.a=function(e,t){var n=Object(a.a)(e),r=!n&&Object(i.a)(e),d=!n&&!r&&Object(o.a)(e),u=!n&&!r&&!d&&Object(s.a)(e),p=n||r||d||u,f=p?function(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}(e.length,String):[],g=f.length;for(var b in e)!t&&!l.call(e,b)||p&&("length"==b||d&&("offset"==b||"parent"==b)||u&&("buffer"==b||"byteLength"==b||"byteOffset"==b)||c(b,g))||f.push(b);return f}},"1/u/":function(e,t,n){"use strict";function i(e,t,n){void 0===n&&(n=0);var a=e.length===n+1?t:i.bind(this,e,t,n+1),o=e[n],r="string"==typeof o.test?o.test:null,c="function"==typeof o.test?o.test:null;if(null!=r&&window[r])t();else if(null!=c&&c())t();else{var s=document.querySelector('script[src="'+o.src+'"]');if(s)s.addEventListener("load",a,{once:!0});else{var l=document.createElement("script");l.src=o.src,l.addEventListener("load",a,{once:!0}),document.head.appendChild(l)}}}n.d(t,"a",(function(){return i}))},"2FQU":function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("J+dc"),a=n("merk"),o=n("xWkI"),r=n("EM62"),c=n("3oUN"),s=n("W1gw"),l=function(){function e(e,t){this.store=e,this.snackBar=t}return e.prototype.loadDebugEnabled=function(e){this.store.dispatch(o.a({debugEnabled:e}))},e.prototype.toggleDebugEnabled=function(){var e;this.store.dispatch(o.b()),this.store.select(a.c).pipe(Object(i.a)(1)).subscribe((function(t){e=t})),this.snackBar.open(e?"debug mode enabled":"debug mode disabled",null,{duration:3e3})},e.prototype.getDebugEnabled=function(){return this.store.select(a.c)},e.\u0275fac=function(t){return new(t||e)(r.Wb(c.i),r.Wb(s.b))},e.\u0275prov=r.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},BaCy:function(e,t,n){"use strict";var i=n("lnqP"),a=n("qd5q"),o=n("FoV5");t.a=function(e){return Object(i.a)(e,o.a,a.a)}},CYhr:function(e,t,n){"use strict";var i=n("y7Du"),a=Object(i.a)(Object,"create"),o=Object.prototype.hasOwnProperty,r=Object.prototype.hasOwnProperty;function c(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}c.prototype.clear=function(){this.__data__=a?a(null):{},this.size=0},c.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},c.prototype.get=function(e){var t=this.__data__;if(a){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return o.call(t,e)?t[e]:void 0},c.prototype.has=function(e){var t=this.__data__;return a?void 0!==t[e]:r.call(t,e)},c.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=a&&void 0===t?"__lodash_hash_undefined__":t,this};var s=c,l=n("Go5w"),d=n("OJPH"),u=function(e,t){var n,i,a=e.__data__;return("string"==(i=typeof(n=t))||"number"==i||"symbol"==i||"boolean"==i?"__proto__"!==n:null===n)?a["string"==typeof t?"string":"hash"]:a.map};function p(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}p.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(d.a||l.a),string:new s}},p.prototype.delete=function(e){var t=u(this,e).delete(e);return this.size-=t?1:0,t},p.prototype.get=function(e){return u(this,e).get(e)},p.prototype.has=function(e){return u(this,e).has(e)},p.prototype.set=function(e,t){var n=u(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this},t.a=p},DHAC:function(e,t,n){"use strict";var i=n("Go5w"),a=n("OJPH"),o=n("CYhr");function r(e){var t=this.__data__=new i.a(e);this.size=t.size}r.prototype.clear=function(){this.__data__=new i.a,this.size=0},r.prototype.delete=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n},r.prototype.get=function(e){return this.__data__.get(e)},r.prototype.has=function(e){return this.__data__.has(e)},r.prototype.set=function(e,t){var n=this.__data__;if(n instanceof i.a){var r=n.__data__;if(!a.a||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new o.a(r)}return n.set(e,t),this.size=n.size,this},t.a=r},FoV5:function(e,t,n){"use strict";var i=n("/ciH"),a=n("tyTC"),o=n("GIvL");t.a=function(e){return Object(o.a)(e)?Object(i.a)(e):Object(a.a)(e)}},Go5w:function(e,t,n){"use strict";var i=n("HVAe"),a=function(e,t){for(var n=e.length;n--;)if(Object(i.a)(e[n][0],t))return n;return-1},o=Array.prototype.splice;function r(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}r.prototype.clear=function(){this.__data__=[],this.size=0},r.prototype.delete=function(e){var t=this.__data__,n=a(t,e);return!(n<0||(n==t.length-1?t.pop():o.call(t,n,1),--this.size,0))},r.prototype.get=function(e){var t=this.__data__,n=a(t,e);return n<0?void 0:t[n][1]},r.prototype.has=function(e){return a(this.__data__,e)>-1},r.prototype.set=function(e,t){var n=this.__data__,i=a(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this},t.a=r},HVAe:function(e,t,n){"use strict";t.a=function(e,t){return e===t||e!=e&&t!=t}},NUo7:function(e,t,n){"use strict";t.a=function(){return[]}},gFym:function(e,t,n){"use strict";t.a=function(e,t){for(var n=-1,i=t.length,a=e.length;++n<i;)e[a+n]=t[n];return e}},ji8j:function(e,t,n){"use strict";n.r(t),n.d(t,"MultiItemEditFormComponent",(function(){return Lc}));var i=n("D57K"),a=n("xeA8"),o=(n("qzOT"),n("C05f")),r=n("g6G6"),c=n("KTx3"),s=n("8K1b"),l=n("AqVP"),d=n("9fIP"),u=n("MMYH"),p=n("ckkg"),f=n("FU6l"),g=n("5uGe"),b=n("sWLk"),h=n("uCWR");function m(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[t.length-1];return"function"==typeof i&&t.pop(),Object(p.a)(t,void 0).lift(new v(i))}var v=function(){function e(t){Object(d.a)(this,e),this.resultSelector=t}return Object(u.a)(e,[{key:"call",value:function(e,t){return t.subscribe(new y(e,this.resultSelector))}}]),e}(),y=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e,i){var a;return arguments.length>2&&void 0!==arguments[2]||Object.create(null),Object(d.a)(this,n),(a=t.call(this,e)).resultSelector=i,a.iterators=[],a.active=0,a.resultSelector="function"==typeof i?i:void 0,a}return Object(u.a)(n,[{key:"_next",value:function(e){var t=this.iterators;Object(f.a)(e)?t.push(new x(e)):t.push("function"==typeof e[b.a]?new w(e[b.a]()):new _(this.destination,this,e))}},{key:"_complete",value:function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var n=0;n<t;n++){var i=e[n];i.stillUnsubscribed?this.destination.add(i.subscribe()):this.active--}}else this.destination.complete()}},{key:"notifyInactive",value:function(){this.active--,0===this.active&&this.destination.complete()}},{key:"checkIterators",value:function(){for(var e=this.iterators,t=e.length,n=this.destination,i=0;i<t;i++){var a=e[i];if("function"==typeof a.hasValue&&!a.hasValue())return}for(var o=!1,r=[],c=0;c<t;c++){var s=e[c],l=s.next();if(s.hasCompleted()&&(o=!0),l.done)return void n.complete();r.push(l.value)}this.resultSelector?this._tryresultSelector(r):n.next(r),o&&n.complete()}},{key:"_tryresultSelector",value:function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}]),n}(g.a),w=function(){function e(t){Object(d.a)(this,e),this.iterator=t,this.nextResult=t.next()}return Object(u.a)(e,[{key:"hasValue",value:function(){return!0}},{key:"next",value:function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e}},{key:"hasCompleted",value:function(){var e=this.nextResult;return Boolean(e&&e.done)}}]),e}(),x=function(){function e(t){Object(d.a)(this,e),this.array=t,this.index=0,this.length=0,this.length=t.length}return Object(u.a)(e,[{key:b.a,value:function(){return this}},{key:"next",value:function(e){var t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}},{key:"hasValue",value:function(){return this.array.length>this.index}},{key:"hasCompleted",value:function(){return this.array.length===this.index}}]),e}(),_=function(e){Object(s.a)(n,e);var t=Object(l.a)(n);function n(e,i,a){var o;return Object(d.a)(this,n),(o=t.call(this,e)).parent=i,o.observable=a,o.stillUnsubscribed=!0,o.buffer=[],o.isComplete=!1,o}return Object(u.a)(n,[{key:b.a,value:function(){return this}},{key:"next",value:function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}},{key:"hasValue",value:function(){return this.buffer.length>0}},{key:"hasCompleted",value:function(){return 0===this.buffer.length&&this.isComplete}},{key:"notifyComplete",value:function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}},{key:"notifyNext",value:function(e){this.buffer.push(e),this.parent.checkIterators()}},{key:"subscribe",value:function(){return Object(h.c)(this.observable,new h.a(this))}}]),n}(h.b),C=n("ROBh"),O=n("8j5Y"),k=n("BwBJ"),S=n("J+dc"),M=n("0Woy"),I=n("YtkY"),A=n("xVbo"),P=n("TLy2"),T=n("4e/d"),R=n("50eG"),$=n("uuTa"),L=n("W1gw"),E=n("EM62"),D=n("2kYt"),z=n("s2Ay");function F(e,t){if(1&e&&(E.Sb(0,"div"),E.Sb(1,"span"),E.Nc(2),E.Sb(3,"span"),E.Nc(4),E.fc(5,"translate"),E.Rb(),E.Rb(),E.Rb()),2&e){var n=t.$implicit;E.Ab(2),E.Oc(n.field),E.Ab(2),E.Pc(": ",E.gc(5,2,n.message),"")}}var N=function(){function e(e){this.snackBarData=e,this.fieldErrors=[]}return e.prototype.ngOnInit=function(){this.fieldErrors=this.snackBarData.fieldErrors},e.\u0275fac=function(t){return new(t||e)(E.Mb(L.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-snack-bar-save-errors"]],decls:6,vars:4,consts:[[1,"save-errors-container"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.Sb(1,"div"),E.Nc(2),E.fc(3,"translate"),E.Rb(),E.Nb(4,"br"),E.Lc(5,F,6,4,"div",1),E.Rb()),2&e&&(E.Ab(2),E.Oc(E.gc(3,2,"Errors.SaveErrors")),E.Ab(3),E.kc("ngForOf",t.fieldErrors))},directives:[D.l],pipes:[z.d],styles:[".save-errors-container[_ngcontent-%COMP%]{font-size:14px}"],changeDetection:0}),e}(),j=n("qFEQ"),V=n("PBFl"),G=function(){function e(e,t){this.snackRef=e,this.snackBarData=t}return e.prototype.ngOnInit=function(){},e.prototype.saveChanges=function(e){this.snackBarData.save=e,this.snackRef.dismissWithAction()},e.\u0275fac=function(t){return new(t||e)(E.Mb(L.d),E.Mb(L.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-snack-bar-unsaved-changes"]],decls:10,vars:9,consts:[[1,"error-message"],["fxLayoutAlign","end end"],["mat-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(E.Sb(0,"span",0),E.Nc(1),E.fc(2,"translate"),E.Rb(),E.Sb(3,"div",1),E.Sb(4,"button",2),E.ac("click",(function(){return t.saveChanges(!1)})),E.Nc(5),E.fc(6,"translate"),E.Rb(),E.Sb(7,"button",2),E.ac("click",(function(){return t.saveChanges(!0)})),E.Nc(8),E.fc(9,"translate"),E.Rb(),E.Rb()),2&e&&(E.Ab(1),E.Oc(E.gc(2,3,"Errors.UnsavedChanges")),E.Ab(4),E.Pc(" ",E.gc(6,5,"General.Buttons.NotSave").toUpperCase()," "),E.Ab(3),E.Pc(" ",E.gc(9,7,"General.Buttons.Save").toUpperCase()," "))},directives:[j.b,V.a],pipes:[z.d],styles:[".error-message[_ngcontent-%COMP%]{font-size:14px}"],changeDetection:0}),e}(),B=function(){function e(){}return e.create=function(e){var t={};return Object(R.a)("eavValues.values.forEach: ",e.values),e.values.forEach((function(e){var n=e.dimensions.map((function(e){return e.value})).join();t[n]=e.value})),t},e}(),q=function(){function e(){}return e.create=function(t){var n=new e;return Object.keys(t).forEach((function(e){var i=t[e].type;n[i]||(n[i]={}),n[i][e]=B.create(t[e])})),n},e}(),U=function(){return function(e){this.Target=e.Target,e.Number&&(this.Number=e.Number),e.String&&(this.String=e.String),e.Guid&&(this.Guid=e.Guid)}}(),H=function(){return function(e,t){this.Id=e,this.Name=t}}(),Q=function(){function e(e,t,n,i,a,o,r,c){this.Id=e,this.Version=t,this.Guid=n,this.Type=i,this.Attributes=a,this.Owner=o,this.Metadata=r,c&&(this.For=c)}return e.create=function(t){var n=q.create(t.attributes),i=this.createArray(t.metadata),a=t.For?new U(t.For):null;return new e(t.id,t.version,t.guid,new H(t.type.id,t.type.name),n,t.owner,i,a)},e.createArray=function(t){if(!t)return null;var n=new Array;return t.forEach((function(t){n.push(e.create(t))})),n},e}(),W=function(){function e(e,t){this.Header=e,this.Entity=t}return e.create=function(t){return new e(t.header,Q.create(t.entity))},e}(),K=n("gZep"),X=n("bwdy"),Y=n("nIj0"),Z=n("nsG0"),J=n("jIqt"),ee=n("Ohay"),te=n("EfUY"),ne=n("JXuk"),ie=n("ubup"),ae=function(){function e(e,t){this.eavService=e,this.validationMessagesService=t,this.subscription=new X.a}return e.prototype.ngOnInit=function(){var e=this;this.control=this.group.controls[this.config.field.name],this.settings$=this.config.field.settings$,this.label$=this.settings$.pipe(Object(I.a)((function(e){return e.Name}))),this.placeholder$=this.settings$.pipe(Object(I.a)((function(e){return e.Placeholder}))),this.required$=this.settings$.pipe(Object(I.a)((function(e){return te.a.isRequired(e)}))),this.invalid$=this.control.statusChanges.pipe(Object(I.a)((function(e){return"INVALID"===e})),Object(J.a)(this.control.invalid)),this.showValidation$=this.validationMessagesService.showValidation$.pipe(Object(A.a)((function(t){return t===e.control}))),this.value$=this.eavService.formValueChange$.pipe(Object(A.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(I.a)((function(t){return e.control.value})),Object(J.a)(this.control.value),Object(ee.a)()),this.disabled$=this.eavService.formDisabledChange$.asObservable().pipe(Object(A.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(I.a)((function(t){return e.control.disabled})),Object(J.a)(this.control.disabled),Object(ee.a)())},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(E.Mb(ne.a),E.Mb(ie.a))},e.\u0275dir=E.Hb({type:e,inputs:{config:"config",group:"group"}}),e}(),oe=n("f7+R"),re=n("o9tz"),ce="f6b8d6da-4744-453b-9543-0de499aa2352",se=n("4UCL"),le=function(e){this.rootSubfolder="",this.fileFilter="",this.allowAssetsInRoot=!0,this.folderDepth=0,this.metadataContentTypes="",this.usePortalRoot=!1,this.showImagesOnly=!1,this.autoLoad=!1,this.enableSelect=!0,this.subfolder="",this.allowEdit=!0,this.disabled=!0,this.maxDepthReached=!1,this.disabled=e},de=n("mULc"),ue=n("IMfk"),pe=n("t8nT"),fe=function(){function e(e,t,n,i,a){this.enabled=e,this.expires=t,this.id=n,this.isPublic=i,this.ui=a,this.enabled=e,this.expires=t,this.id=n,this.isPublic=i,this.ui=a}return e.createFeatureArray=function(t){var n=[];return t.forEach((function(t){n.push(new e(t.enabled,t.expires,t.id,t.public,t.ui))})),n},e}(),ge=function(e){function t(t){return e.call(this,"Feature",t)||this}return Object(i.d)(t,e),t.prototype.loadFeatures=function(e){var t=fe.createFeatureArray(e);this.addAllToCache(t)},t.prototype.isFeatureEnabled=function(e){var t=!1;return this.entities$.pipe(Object(S.a)(1)).subscribe((function(n){var i=n.find((function(t){return t.id===e}));null!=i&&(t=i.enabled)})),t},t.\u0275fac=function(e){return new(e||t)(E.Wb(pe.b))},t.\u0275prov=E.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(pe.a),be=n("B5/E"),he=n("0adC"),me=n("GAih"),ve=n("Y2X+"),ye=n("bFHC"),we=function(){function e(e,t){this.elementRef=e,this.featureService=t,this.eventListeners=[]}return e.prototype.ngOnInit=function(){if(this.featureService.isFeatureEnabled(ce)){switch(this.elementType){case"input":this.elementRef.nativeElement.pastableTextarea();break;case"element":this.elementRef.nativeElement.pastableNonInputable()}var e=this.handleImage.bind(this);this.elementRef.nativeElement.addEventListener("handleImage",e),this.eventListeners.push({element:this.elementRef.nativeElement,type:"handleImage",listener:e})}},e.prototype.ngOnDestroy=function(){this.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)}))},e.prototype.handleImage=function(e){Object(R.a)("PASTE IMAGE","event:",e);var t=this.getFile(e.detail);this.config.dropzone.uploadFile(t)},e.prototype.getFile=function(e){var t=e.file;try{var n=new FormData;n.append("file",e.file,e.imageFileName),t=n.get("file")}catch(i){console.error("paste image error",i)}return t},e.\u0275fac=function(t){return new(t||e)(E.Mb(E.l),E.Mb(ge))},e.\u0275dir=E.Hb({type:e,selectors:[["","appPasteClipboardImage",""]],inputs:{config:"config",elementType:"elementType"}}),e}(),xe=n("Zfm5");function _e(e,t){1&e&&(E.Sb(0,"mat-icon"),E.Nc(1,"public"),E.Rb())}function Ce(e,t){1&e&&E.Nb(0,"mat-icon",12)}function Oe(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",8),E.ac("click",(function(e){return E.Ac(n),E.ec(3).openUploadClick(e)})),E.fc(1,"translate"),E.Sb(2,"div",9),E.Sb(3,"mat-icon"),E.Nc(4,"cloud_upload"),E.Rb(),E.Sb(5,"div",10),E.Nc(6),E.fc(7,"translate"),E.Lc(8,_e,2,0,"mat-icon",0),E.Lc(9,Ce,1,0,"mat-icon",11),E.Rb(),E.Rb(),E.Rb()}if(2&e){var i=E.ec(2).ngIf;E.kc("matTooltip",E.gc(1,4,"Fields.Hyperlink.AdamFileManager.UploadTip")),E.Ab(6),E.Pc(" ",E.gc(7,6,"Fields.Hyperlink.AdamFileManager.UploadLabel")," \xa0 "),E.Ab(2),E.kc("ngIf",i.adamConfig.usePortalRoot),E.Ab(1),E.kc("ngIf",!i.adamConfig.usePortalRoot)}}function ke(e,t){1&e&&(E.Sb(0,"div",10),E.Nc(1),E.fc(2,"translate"),E.Rb()),2&e&&(E.Ab(1),E.Pc(" ",E.gc(2,1,"Fields.Hyperlink.AdamFileManager.UploadPasteLabel")," "))}function Se(e,t){1&e&&(E.Sb(0,"div",10),E.Nc(1),E.fc(2,"translate"),E.Rb()),2&e&&(E.Ab(1),E.Pc(" ",E.gc(2,1,"Fields.Hyperlink.AdamFileManager.UploadPasteFocusedLabel")," "))}function Me(e,t){if(1&e&&(E.Sb(0,"div",13,14),E.fc(2,"translate"),E.Sb(3,"div",9),E.Sb(4,"mat-icon"),E.Nc(5,"filter"),E.Rb(),E.Lc(6,ke,3,3,"div",15),E.Lc(7,Se,3,3,"div",15),E.Rb(),E.Rb()),2&e){var n=E.yc(1),i=E.ec(3);E.kc("config",i.config)("elementType","element")("matTooltip",E.gc(2,5,"Fields.Hyperlink.AdamFileManager.UploadPasteTip")),E.Ab(6),E.kc("ngIf",!n.classList.contains("pastable-focus")),E.Ab(1),E.kc("ngIf",n.classList.contains("pastable-focus"))}}function Ie(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",16),E.ac("click",(function(){return E.Ac(n),E.ec(3).addFolder()})),E.fc(1,"translate"),E.Sb(2,"div",9),E.Nb(3,"mat-icon",17),E.Sb(4,"div",18),E.Nc(5),E.fc(6,"translate"),E.Rb(),E.Rb(),E.Nb(7,"div",19),E.Rb()}2&e&&(E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.AdamFileManager.NewFolderTip")),E.Ab(5),E.Oc(E.gc(6,4,"Fields.Hyperlink.AdamFileManager.NewFolder")))}function Ae(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"div",16),E.ac("click",(function(){return E.Ac(n),E.ec(3).goUp()})),E.fc(2,"translate"),E.Sb(3,"div",9),E.Nb(4,"mat-icon",20),E.Sb(5,"div",18),E.Nc(6),E.fc(7,"translate"),E.Rb(),E.Rb(),E.Sb(8,"div",21),E.Sb(9,"mat-icon",22),E.Nc(10,"arrow_back"),E.Rb(),E.Rb(),E.Rb(),E.Pb()}2&e&&(E.Ab(1),E.kc("matTooltip",E.gc(2,2,"Fields.Hyperlink.AdamFileManager.BackFolderTip")),E.Ab(5),E.Oc(E.gc(7,4,"Fields.Hyperlink.AdamFileManager.BackFolder")))}var Pe=function(e){return{"adam-button-disabled":e}};function Te(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-icon",31),E.ac("click",(function(){E.Ac(n);var e=E.ec(2).$implicit;return E.ec(3).del(e)})),E.fc(1,"translate"),E.Nc(2,"clear "),E.Rb()}if(2&e){var i=E.ec(4).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.AdamFileManager.Delete"))("ngClass",E.oc(4,Pe,i.disabled))}}function Re(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-icon",32),E.ac("click",(function(){E.Ac(n);var e=E.ec(2).$implicit;return E.ec(3).rename(e)})),E.fc(1,"translate"),E.Nc(2,"edit "),E.Rb()}if(2&e){var i=E.ec(4).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.AdamFileManager.Edit"))("ngClass",E.oc(4,Pe,i.disabled))}}var $e=function(e){return{"metadata-exists":e}};function Le(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-icon",33),E.ac("click",(function(){E.Ac(n);var e=E.ec(2).$implicit;return E.ec(3).editItemMetadata(e)})),E.Nc(1,"local_offer"),E.Rb()}if(2&e){var i=E.ec(2).$implicit;E.mc("matTooltip","",i._metadataContentType,": ",i.MetadataId,""),E.kc("ngClass",E.oc(3,$e,i.MetadataId>0))}}function Ee(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"div",23),E.ac("click",(function(){E.Ac(n);var e=E.ec().$implicit;return E.ec(3).goIntoFolder(e)})),E.Sb(2,"div",24),E.Nb(3,"mat-icon",20),E.Sb(4,"div",25),E.Nc(5),E.Rb(),E.Rb(),E.Sb(6,"div"),E.Lc(7,Te,3,6,"mat-icon",26),E.Lc(8,Re,3,6,"mat-icon",27),E.Sb(9,"div",28),E.Sb(10,"div",29),E.Nc(11),E.Rb(),E.Rb(),E.Rb(),E.Lc(12,Le,2,5,"mat-icon",30),E.Rb(),E.Pb()}if(2&e){var i=E.ec().$implicit,a=E.ec(2).ngIf;E.Ab(5),E.Oc(i.Name),E.Ab(1),E.Cb("dz-details file-type-",i.Type,""),E.Ab(1),E.kc("ngIf",a.adamConfig.allowEdit),E.Ab(1),E.kc("ngIf",a.adamConfig.allowEdit),E.Ab(2),E.kc("title",i.Name),E.Ab(1),E.Oc(i.Name),E.Ab(1),E.kc("ngIf",i._metadataContentType)}}function De(e,t){if(1&e&&(E.Sb(0,"mat-icon"),E.Nc(1),E.Rb()),2&e){var n=E.ec(3).$implicit;E.Ab(1),E.Oc(n._icon)}}function ze(e,t){if(1&e&&E.Nb(0,"mat-icon",45),2&e){var n=E.ec(3).$implicit;E.kc("svgIcon",n._icon)}}function Fe(e,t){if(1&e&&(E.Sb(0,"div",24),E.Lc(1,De,2,1,"mat-icon",0),E.Lc(2,ze,1,1,"mat-icon",44),E.Sb(3,"div",18),E.Nc(4),E.Rb(),E.Rb()),2&e){var n=E.ec(2).$implicit;E.Ab(1),E.kc("ngIf",n._isMaterialIcon),E.Ab(1),E.kc("ngIf",!n._isMaterialIcon),E.Ab(2),E.Oc(n.Name)}}function Ne(e,t){if(1&e&&(E.Sb(0,"div",46),E.Nb(1,"img",47),E.Rb()),2&e){var n=E.ec(2).$implicit;E.Ab(1),E.kc("alt",n.Id+":"+n.Name)("src",n.FullPath+"?w=120&h=120&mode=crop",E.Dc)}}function je(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-icon",31),E.ac("click",(function(){E.Ac(n);var e=E.ec(2).$implicit;return E.ec(3).del(e)})),E.fc(1,"translate"),E.Nc(2,"clear "),E.Rb()}if(2&e){var i=E.ec(4).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.AdamFileManager.Delete"))("ngClass",E.oc(4,Pe,i.disabled))}}function Ve(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-icon",32),E.ac("click",(function(){E.Ac(n);var e=E.ec(2).$implicit;return E.ec(3).rename(e)})),E.fc(1,"translate"),E.Nc(2,"edit "),E.Rb()}if(2&e){var i=E.ec(4).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.AdamFileManager.Edit"))("ngClass",E.oc(4,Pe,i.disabled))}}function Ge(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-icon",33),E.ac("click",(function(){E.Ac(n);var e=E.ec(2).$implicit;return E.ec(3).editItemMetadata(e)})),E.Nc(1,"local_offer"),E.Rb()}if(2&e){var i=E.ec(2).$implicit;E.mc("matTooltip","",i._metadataContentType,": ",i.MetadataId,""),E.kc("ngClass",E.oc(3,$e,i.MetadataId>0))}}var Be=function(e,t){return{"dz-success":e,"disable-select":t}};function qe(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"div",34),E.ac("click",(function(){E.Ac(n);var e=E.ec().$implicit;return E.ec(3).select(e)})),E.fc(2,"async"),E.Lc(3,Fe,5,3,"div",35),E.Lc(4,Ne,2,2,"div",36),E.Sb(5,"div"),E.Lc(6,je,3,6,"mat-icon",26),E.Lc(7,Ve,3,6,"mat-icon",27),E.Sb(8,"div",28),E.Sb(9,"div",29),E.Nc(10),E.Rb(),E.Rb(),E.Sb(11,"div",37),E.Sb(12,"span"),E.Nc(13),E.Rb(),E.Rb(),E.Sb(14,"a",38),E.Sb(15,"mat-icon",39),E.fc(16,"translate"),E.Nc(17,"open_in_new"),E.Rb(),E.Rb(),E.Rb(),E.Lc(18,Ge,2,5,"mat-icon",30),E.Sb(19,"div",40),E.dc(),E.Sb(20,"svg",41),E.Sb(21,"title"),E.Nc(22,"Check"),E.Rb(),E.Nb(23,"defs"),E.Sb(24,"g",42),E.Nb(25,"path",43),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Pb()}if(2&e){var i=E.ec().$implicit,a=E.ec(2).ngIf,o=E.ec();E.Ab(1),E.kc("ngClass",E.pc(21,Be,E.gc(2,17,o.value$)==="file:"+i.Id,!a.adamConfig.enableSelect)),E.Ab(2),E.kc("ngIf","image"!==i.Type),E.Ab(1),E.kc("ngIf","image"===i.Type),E.Ab(1),E.Cb("dz-details file-type-",i.Type,""),E.Ab(1),E.kc("ngIf",a.adamConfig.allowEdit),E.Ab(1),E.kc("ngIf",a.adamConfig.allowEdit),E.Ab(2),E.kc("title",i.Name),E.Ab(1),E.Oc(i.Name),E.Ab(1),E.mc("title","#",i.Id," - ",i._displaySize," KB"),E.Ab(2),E.Qc("#",i.Id," - ",i._displaySize," KB"),E.Ab(1),E.kc("href",i.FullPath,E.Dc),E.Ab(1),E.kc("matTooltip",E.gc(16,19,"Fields.Hyperlink.AdamFileManager.Show")),E.Ab(3),E.kc("ngIf",i._metadataContentType)}}function Ue(e,t){if(1&e&&(E.Qb(0),E.Lc(1,Ee,13,9,"ng-container",0),E.Lc(2,qe,26,24,"ng-container",0),E.Pb()),2&e){var n=t.$implicit;E.Ab(1),E.kc("ngIf",n.IsFolder),E.Ab(1),E.kc("ngIf",!n.IsFolder)}}var He=function(e,t){return{"adam-scope-site":e,"adam-scope-field":t}};function Qe(e,t){if(1&e&&(E.Sb(0,"div",3),E.Lc(1,Oe,10,8,"div",4),E.Lc(2,Me,8,7,"div",5),E.Lc(3,Ie,8,6,"div",6),E.Lc(4,Ae,11,6,"ng-container",0),E.Lc(5,Ue,3,2,"ng-container",7),E.fc(6,"async"),E.Rb()),2&e){var n=E.ec().ngIf,i=E.ec();E.kc("ngClass",E.pc(9,He,n.adamConfig.usePortalRoot,!n.adamConfig.usePortalRoot)),E.Ab(1),E.kc("ngIf",!n.disabled&&n.adamConfig.allowEdit&&!((""===n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder===n.adamConfig.rootSubfolder)&&!n.adamConfig.allowAssetsInRoot)),E.Ab(1),E.kc("ngIf",i.pasteClipboardImage&&!n.disabled&&n.adamConfig.allowEdit&&!((""===n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder===n.adamConfig.rootSubfolder)&&!n.adamConfig.allowAssetsInRoot)),E.Ab(1),E.kc("ngIf",!n.adamConfig.maxDepthReached&&!n.disabled&&n.adamConfig.allowEdit&&!((""===n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder===n.adamConfig.rootSubfolder)&&!n.adamConfig.allowAssetsInRoot)),E.Ab(1),E.kc("ngIf",""!==n.adamConfig.subfolder||n.adamConfig.usePortalRoot&&n.adamConfig.subfolder!==n.adamConfig.rootSubfolder),E.Ab(1),E.kc("ngForOf",E.gc(6,7,i.items$))("ngForTrackBy",i.trackByFn)}}function We(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"div",1),E.Lc(2,Qe,7,12,"div",2),E.fc(3,"async"),E.Rb(),E.Pb()),2&e){var n=t.ngIf,i=E.ec();E.Ab(1),E.kc("@adamShowAnimate",null!=n.adamConfig&&n.adamConfig.autoLoad?"open":"closed"),E.Ab(1),E.kc("ngIf",(null==n.adamConfig?null:n.adamConfig.autoLoad)&&E.gc(3,2,i.expanded$))}}var Ke=function(e,t){return{adamConfig:e,disabled:t}},Xe=function(){function e(e,t,n,i,a,r,c){this.adamService=e,this.fileTypeService=t,this.featureService=n,this.dnnContext=i,this.eavService=a,this.editRoutingService=r,this.zone=c,this.openUpload=new E.n,this.adamConfig$=new o.a(null),this.items$=new o.a([]),this.subscription=new X.a}return e.prototype.ngOnInit=function(){var e=this;this.control=this.group.controls[this.config.field.name],this.refreshOnChildClosed(),this.url=this.dnnContext.$2sxc.http.apiUrl("app-content/"+this.config.entity.header.ContentTypeName+"/"+this.config.entity.header.Guid+"/"+this.config.field.name),this.pasteClipboardImage=this.featureService.isFeatureEnabled(ce),this.config.adam={items$:this.items$.asObservable(),toggle:function(t,n){e.zone.run((function(){e.toggle(t,n)}))},setConfig:function(t){e.zone.run((function(){e.setConfig(t)}))},getConfig:function(){return e.adamConfig$.value},getConfig$:function(){return e.adamConfig$.asObservable()},onItemClick:function(){},onItemUpload:function(){},refresh:function(){e.zone.run((function(){e.fetchItems()}))},addFullPath:function(t){e.adamService.addFullPath(t)}},this.subscription.add(this.adamConfig$.subscribe((function(t){e.fetchItems()}))),this.expanded$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.value$=this.eavService.formValueChange$.pipe(Object(A.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(I.a)((function(t){return e.control.value})),Object(J.a)(this.control.value),Object(ee.a)()),this.disabled$=this.eavService.formDisabledChange$.asObservable().pipe(Object(A.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(I.a)((function(t){return e.control.disabled})),Object(J.a)(this.control.disabled),Object(ee.a)())},e.prototype.ngOnDestroy=function(){this.adamConfig$.complete(),this.items$.complete(),this.subscription.unsubscribe()},e.prototype.addFolder=function(){var e=this;if(!this.control.disabled){var t=window.prompt("Please enter a folder name");t&&this.adamService.addFolder(t,this.url,this.adamConfig$.value).subscribe((function(t){e.fetchItems()}))}},e.prototype.del=function(e){var t=this;this.control.disabled||window.confirm("Are you sure you want to delete this item?")&&this.adamService.deleteItem(e,this.url,this.adamConfig$.value).subscribe((function(e){t.fetchItems()}))},e.prototype.editItemMetadata=function(e){this.editRoutingService.open(this.config.field.index,this.config.entity.entityGuid,{items:[0===e.MetadataId?{ContentTypeName:e._metadataContentType,For:{Target:re.a.metadata.cmsObject.target,String:("folder"===e.Type?"folder":"file")+":"+e.Id}}:{EntityId:e.MetadataId}]})},e.prototype.goUp=function(){var e=this.adamConfig$.value.subfolder;e=e.includes("/")?e.slice(0,e.lastIndexOf("/")):"",this.config.adam.setConfig({subfolder:e})},e.prototype.getMetadataContentType=function(e){var t;return"folder"===e.Type?(t=this.adamConfig$.value.metadataContentTypes.match(/^(folder)(:)([^\n]*)/im))?t[3]:null:(t=this.adamConfig$.value.metadataContentTypes.match(/^([^:\n]*)(\n|$)/im))?t[1]:null},e.prototype.goIntoFolder=function(e){var t=this.adamConfig$.value.subfolder;this.config.adam.setConfig({subfolder:t=t?t+"/"+e.Name:e.Name})},e.prototype.openUploadClick=function(e){this.openUpload.emit()},e.prototype.rename=function(e){var t=this;if(!this.control.disabled){var n=window.prompt("Rename the file / folder to: ",e.Name);n&&this.adamService.rename(e,n,this.url,this.adamConfig$.value).subscribe((function(e){t.fetchItems()}))}},e.prototype.select=function(e){!this.control.disabled&&this.adamConfig$.value.enableSelect&&this.config.adam.onItemClick(e)},e.prototype.fetchItems=function(){var e=this,t=this.adamConfig$.value;null!=t&&t.autoLoad&&this.adamService.getAll(this.url,t).subscribe((function(n){var a,o,r=[],c=t.fileFilter?t.fileFilter.split(",").map((function(e){return e.replace("*","").trim()})):[];try{for(var s=Object(i.h)(n),l=s.next();!l.done;l=s.next()){var d=l.value;if("."!==d.Name){if("2sxc"!==d.Name&&"adam"!==d.Name&&(d.IsFolder||!t.showImagesOnly||"image"===d.Type)&&(!d.IsFolder||!t.maxDepthReached)){if(c.length>0){var u=d.Name.substring(d.Name.lastIndexOf("."));if(!c.includes(u))continue}d._metadataContentType=e.getMetadataContentType(d),d._icon=e.fileTypeService.getIconClass(d.Name),d._isMaterialIcon=e.fileTypeService.isKnownType(d.Name),d._displaySize=(d.Size/1024).toFixed(0),r.push(d)}}else{var p=d.AllowEdit;p!==t.allowEdit&&e.config.adam.setConfig({allowEdit:p})}}}catch(f){a={error:f}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(a)throw a.error}}r.sort((function(e,t){return e.Name.toLocaleLowerCase().localeCompare(t.Name.toLocaleLowerCase())})),r.sort((function(e,t){return t.IsFolder.toString().localeCompare(e.IsFolder.toString())})),e.items$.next(r)}))},e.prototype.toggle=function(e,t){var n=Object(i.a)(Object(i.a)({},this.adamConfig$.value),{usePortalRoot:e,showImagesOnly:t});JSON.stringify(n)===JSON.stringify(this.adamConfig$.value)?n.autoLoad=!n.autoLoad:n.autoLoad||(n.autoLoad=!0),this.config.adam.setConfig(n)},e.prototype.trackByFn=function(e,t){return t.Id},e.prototype.setConfig=function(e){var t,n,a=this.config.field.isExternal,o=null!=this.adamConfig$.value?this.adamConfig$.value:new le(a),r=new le(a),c=Object.keys(r);try{for(var s=Object(i.h)(c),l=s.next();!l.done;l=s.next()){var d=l.value;r[d]=null!=e[d]?e[d]:o[d]}}catch(m){t={error:m}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}if(o.usePortalRoot!==r.usePortalRoot&&(r.subfolder=""),r.usePortalRoot&&(r.rootSubfolder.includes("\\")&&(r.rootSubfolder=r.rootSubfolder.replace(/\\/g,"/")),r.rootSubfolder.startsWith("/")&&(r.rootSubfolder=r.rootSubfolder.replace("/","")),!r.subfolder.startsWith(r.rootSubfolder)&&(r.subfolder=r.rootSubfolder),r.maxDepthReached=!1),!r.usePortalRoot)if((r.subfolder?r.subfolder.split("/").length:0)>=r.folderDepth){var u=r.subfolder.split("/");u=u.slice(0,r.folderDepth),r.subfolder=u.join("/"),r.maxDepthReached=!0}else r.maxDepthReached=!1;this.adamConfig$.next(r);var p=this.config.dropzone.getConfig(),f={},g=se.a.getUrlParams(p.url);if((g.subfolder||"")!==r.subfolder||g.usePortalRoot!==r.usePortalRoot.toString()){var b=p.url;b=se.a.replaceUrlParam(b,"subfolder",r.subfolder),b=se.a.replaceUrlParam(b,"usePortalRoot",r.usePortalRoot.toString()),f.url=b}var h=!r.allowEdit||(""===r.subfolder||r.usePortalRoot&&r.subfolder===r.rootSubfolder)&&!r.allowAssetsInRoot;p.disabled!==h&&(f.disabled=h),Object.keys(f).length>0&&this.config.dropzone.setConfig(f)},e.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.editRoutingService.childFormClosed().subscribe((function(t){e.fetchItems()})))},e.\u0275fac=function(t){return new(t||e)(E.Mb(de.a),E.Mb(ue.a),E.Mb(ge),E.Mb(be.a),E.Mb(ne.a),E.Mb(he.a),E.Mb(E.A))},e.\u0275cmp=E.Gb({type:e,selectors:[["adam-browser"]],inputs:{config:"config",group:"group"},outputs:{openUpload:"openUpload"},decls:3,vars:8,consts:[[4,"ngIf"],[1,"dropzone"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["class","dz-preview dropzone-adam",3,"matTooltip","click",4,"ngIf"],["appPasteClipboardImage","","class","dz-preview dropzone-adam paste-image",3,"config","elementType","matTooltip",4,"ngIf"],["class","dz-preview",3,"matTooltip","click",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"dz-preview","dropzone-adam",3,"matTooltip","click"],[1,"dz-image","adam-browse-background-icon","adam-browse-background"],[1,"adam-upload-label"],["svgIcon","appleFilled",4,"ngIf"],["svgIcon","appleFilled"],["appPasteClipboardImage","",1,"dz-preview","dropzone-adam","paste-image",3,"config","elementType","matTooltip"],["pasteDiv",""],["class","adam-upload-label",4,"ngIf"],[1,"dz-preview",3,"matTooltip","click"],["svgIcon","folder-plus"],[1,"adam-short-label"],[1,"dz-details",2,"opacity","1"],["svgIcon","folder"],[1,"adam-background","adam-browse-background-icon"],[1,"adam-back-folder-arrow"],[1,"dz-preview",3,"click"],[1,"dz-image","adam-blur","adam-browse-background-icon","adam-browse-background"],[1,"short-label"],["appClickStopPropagation","","class","adam-delete-button",3,"matTooltip","ngClass","click",4,"ngIf"],["appClickStopPropagation","","class","adam-rename-button",3,"matTooltip","ngClass","click",4,"ngIf"],[1,"adam-full-name-area"],[1,"adam-full-name",3,"title"],["class","adam-tag","appClickStopPropagation","",3,"ngClass","matTooltip","click",4,"ngIf"],["appClickStopPropagation","",1,"adam-delete-button",3,"matTooltip","ngClass","click"],["appClickStopPropagation","",1,"adam-rename-button",3,"matTooltip","ngClass","click"],["appClickStopPropagation","",1,"adam-tag",3,"ngClass","matTooltip","click"],[1,"dz-preview",3,"ngClass","click"],["class","dz-image adam-blur adam-browse-background-icon adam-browse-background",4,"ngIf"],["class","dz-image adam-browse-background-image",4,"ngIf"],["appClickStopPropagation","",1,"dz-filename","adam-short-label",3,"title"],["target","_blank","appClickStopPropagation","",1,"adam-link-button",3,"href"],[3,"matTooltip"],[1,"dz-success-mark"],["width","54px","height","54px","viewBox","0 0 54 54","version","1.1","xmlns","https://www.w3.org/2000/svg",0,"xmlns","xlink","https://www.w3.org/1999/xlink",0,"xmlns","sketch","https://www.bohemiancoding.com/sketch/ns"],["id","Page-1","stroke","none","stroke-width","1","fill","none","fill-rule","evenodd",0,"sketch","type","MSPage"],["d","M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z","id","Oval-2","stroke-opacity","0.198794158","stroke","#747474","fill-opacity","0.816519475","fill","#FFFFFF",0,"sketch","type","MSShapeGroup"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"],[1,"dz-image","adam-browse-background-image"],["data-dz-thumbnail","",3,"alt","src"]],template:function(e,t){1&e&&(E.Lc(0,We,4,4,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,Ke,E.gc(1,1,t.adamConfig$),E.gc(2,3,t.disabled$)))},directives:[D.m,D.k,me.a,D.l,ve.a,ye.a,we,xe.a],pipes:[D.b,z.d],styles:['.metadata-exists[_ngcontent-%COMP%]{color:#0088f4}.adam-browse-background-icon[_ngcontent-%COMP%]{padding:20px 5px 10px;min-width:100%;min-height:100%;text-align:center}.adam-browse-background-icon[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px}.adam-browse-background-image[_ngcontent-%COMP%]{display:flex!important;justify-content:center;align-items:center}.adam-background[_ngcontent-%COMP%]{z-index:20;position:absolute;top:0;left:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;line-height:150%;cursor:pointer}.adam-background[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .adam-tag[_ngcontent-%COMP%]{cursor:pointer}.adam-tag[_ngcontent-%COMP%]{font-size:large;position:absolute;right:-15px;top:50px;font-size:34px;width:34px;height:34px;z-index:30}.adam-back-folder-arrow[_ngcontent-%COMP%]{font-size:35px!important;top:13px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.adam-link-button[_ngcontent-%COMP%]{left:4px;color:rgba(0,0,0,.9)}.adam-delete-button[_ngcontent-%COMP%], .adam-link-button[_ngcontent-%COMP%], .adam-rename-button[_ngcontent-%COMP%]{position:absolute;top:4px;font-size:24px;width:24px;height:24px}.adam-delete-button[_ngcontent-%COMP%], .adam-rename-button[_ngcontent-%COMP%]{right:4px;cursor:pointer;font-weight:700}.adam-delete-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled), .adam-link-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled), .adam-rename-button[_ngcontent-%COMP%]:hover:not(.adam-button-disabled){color:#0088f4}.adam-button-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24);cursor:default}.adam-rename-button[_ngcontent-%COMP%]{right:26px;font-size:22px;width:22px;height:22px}.dz-details[_ngcontent-%COMP%]{bottom:0}.dz-details[_ngcontent-%COMP%], .dz-image[_ngcontent-%COMP%]{cursor:pointer}.disable-select[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%], .disable-select[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{cursor:default}.disable-select[_ngcontent-%COMP%]   .adam-full-name[_ngcontent-%COMP%]{cursor:text}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .adam-blur[_ngcontent-%COMP%]{transform:scale(1.05);filter:blur(8px)}.adam-short-label[_ngcontent-%COMP%]{cursor:text}.adam-short-label[_ngcontent-%COMP%], .adam-upload-label[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;left:0;right:0;bottom:10px}.adam-upload-label[_ngcontent-%COMP%] > mat-icon[_ngcontent-%COMP%]{font-size:19px;width:19px;height:19px}.adam-full-name[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.8);border-radius:3px;word-break:break-all;width:80%;max-height:3em;position:absolute;top:48%;left:50%;transform:translate(-50%,-50%);overflow-x:scroll;-ms-overflow-style:none;overflow:-moz-scrollbars-none;scrollbar-width:none}.adam-full-name[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.adam-full-name-area[_ngcontent-%COMP%]{height:60px;display:block}.adam-browse-background[_ngcontent-%COMP%]{background-color:#f5f5f5}.mce-ico[class*=" icon-"][_ngcontent-%COMP%]:before, .mce-ico[class^=icon-][_ngcontent-%COMP%]:before{margin-left:0}.dropzone[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{box-sizing:border-box;outline-color:#0069bf}.dropzone.dz-drag-hover[_ngcontent-%COMP%], .eav-dragging[_ngcontent-%COMP%]   .dropzone[_ngcontent-%COMP%]{min-height:0;outline:2px dashed #0069bf;background:#fff;padding:0;border-radius:5px;transition:outline-color .5s}.dropzone.dz-clickable[_ngcontent-%COMP%]{cursor:pointer}.dropzone.dz-clickable[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:default}.dropzone.dz-clickable[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%], .dropzone.dz-clickable[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{cursor:pointer}.dropzone.dz-started[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{display:none}.dropzone.dz-drag-hover[_ngcontent-%COMP%]{outline-color:#0087f7}.dropzone.dz-drag-hover[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{opacity:.5}.dropzone[_ngcontent-%COMP%]   .dz-message[_ngcontent-%COMP%]{text-align:center;margin:2em 0}.dropzone-previews[_ngcontent-%COMP%]{margin:5px -5px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]{position:relative;display:inline-block;vertical-align:top;margin:5px;min-height:100px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover{z-index:1000}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-file-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{border-radius:6px;background:#999;background:linear-gradient(180deg,#eee,#ddd)}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-file-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{opacity:1}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-image-preview[_ngcontent-%COMP%]{background:#fff}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-image-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{transition:opacity .2s linear}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]{font-size:14px;text-align:center;display:block;cursor:pointer;border:none}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-remove[_ngcontent-%COMP%]:hover{text-decoration:underline}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .dz-details[_ngcontent-%COMP%]{opacity:1}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]{z-index:20;position:absolute;top:0;left:0;opacity:0;font-size:13px;min-width:100%;max-width:100%;padding:2em 1em;text-align:center;color:rgba(0,0,0,.9);line-height:150%}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-size[_ngcontent-%COMP%]{margin-bottom:1em;font-size:16px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]{white-space:nowrap}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{border:1px solid hsla(0,0%,78.4%,.8);background-color:hsla(0,0%,100%,.8)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:not(:hover){overflow:hidden;text-overflow:ellipsis}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]:not(:hover)   span[_ngcontent-%COMP%]{border:1px solid transparent}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-filename[_ngcontent-%COMP%]   span[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-details[_ngcontent-%COMP%]   .dz-size[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:hsla(0,0%,100%,.4);padding:0 .4em;border-radius:3px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:hover   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:scale(1.05);filter:blur(8px)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]{border-radius:6px;overflow:hidden;width:120px;height:120px;position:relative;display:block;z-index:10}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:block}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-success[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]{-webkit-animation:passing-through 3s cubic-bezier(.77,0,.175,1);animation:passing-through 3s cubic-bezier(.77,0,.175,1)}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]{opacity:1;-webkit-animation:slide-in 3s cubic-bezier(.77,0,.175,1);animation:slide-in 3s cubic-bezier(.77,0,.175,1)}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]{pointer-events:none;opacity:0;z-index:500;position:absolute;display:block;top:50%;left:50%;margin-left:-27px;margin-top:-27px}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%], .dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-success-mark[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;width:54px;height:54px}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-processing[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:1;transition:all .2s linear}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-complete[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:0;transition:opacity .4s ease-in}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]:not(.dz-processing)   .dz-progress[_ngcontent-%COMP%]{-webkit-animation:pulse 6s ease infinite;animation:pulse 6s ease infinite}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]{opacity:1;z-index:1000;pointer-events:none;position:absolute;height:16px;left:50%;top:50%;margin-top:-8px;width:80px;margin-left:-40px;background:hsla(0,0%,100%,.9);-webkit-transform:scale(1);border-radius:8px;overflow:hidden}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-progress[_ngcontent-%COMP%]   .dz-upload[_ngcontent-%COMP%]{background:#333;background:linear-gradient(180deg,#666,#444);position:absolute;top:0;left:0;bottom:0;width:0;transition:width .3s ease-in-out}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]{display:block}.dropzone[_ngcontent-%COMP%]   .dz-preview.dz-error[_ngcontent-%COMP%]:hover   .dz-error-message[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]{pointer-events:none;z-index:1000;position:absolute;display:block;display:none;opacity:0;transition:opacity .3s ease;border-radius:8px;font-size:13px;top:130px;left:-10px;width:140px;background:#be2626;background:linear-gradient(180deg,#be2626,#a92222);padding:.5em 1.2em;color:#fff}.dropzone[_ngcontent-%COMP%]   .dz-preview[_ngcontent-%COMP%]   .dz-error-message[_ngcontent-%COMP%]:after{content:"";position:absolute;top:-6px;left:64px;width:0;height:0;border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #be2626}'],data:{animation:[Object(oe.n)("adamShowAnimate",[Object(oe.k)("closed",Object(oe.l)({height:"0",overflow:"hidden"})),Object(oe.k)("open",Object(oe.l)({height:"*",overflow:"hidden"})),Object(oe.m)("closed => open",[Object(oe.e)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])])]},changeDetection:0}),e}(),Ye=n("zmEM"),Ze=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Gb({type:e,selectors:[["adam-hint"]],decls:18,vars:9,consts:[[1,"hint-box","u-border-radius-bottom","mat-caption","u-shadow-top"],[1,"hint-box__hint"],[1,"hint-box__sponsor"],["href","https://2sxc.org/help?tag=adam","target","_blank","tabindex","-1",1,"adam-link",3,"matTooltip"],["svgIcon","appleFilled"],["href","https://www.2sic.com","target","_blank","tabindex","-1"]],template:function(e,t){1&e&&(E.Nb(0,"mat-divider"),E.Sb(1,"div",0),E.Sb(2,"div",1),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Sb(5,"div",2),E.Sb(6,"a",3),E.fc(7,"translate"),E.Nb(8,"mat-icon",4),E.Sb(9,"span"),E.Nc(10,"Adam"),E.Rb(),E.Rb(),E.Nc(11," \xa0 "),E.Sb(12,"span"),E.Nc(13),E.fc(14,"translate"),E.Rb(),E.Nc(15," \xa0 "),E.Sb(16,"a",5),E.Nc(17,"2sic.com"),E.Rb(),E.Rb(),E.Rb()),2&e&&(E.Ab(3),E.Oc(E.gc(4,3,"Fields.Hyperlink.AdamFileManager.Hint")),E.Ab(3),E.kc("matTooltip",E.gc(7,5,"Fields.Hyperlink.AdamFileManager.SponsorTooltip")),E.Ab(7),E.Oc(E.gc(14,7,"Fields.Hyperlink.AdamFileManager.SponsorLine")))},directives:[Ye.a,ve.a,ye.a],pipes:[z.d],styles:[".hint-box[_ngcontent-%COMP%]{padding:2px 24px;background-color:#fff;color:rgba(29,39,61,.44);display:flex}.hint-box__hint[_ngcontent-%COMP%]{flex:1 1 auto}.hint-box__sponsor[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.adam-link[_ngcontent-%COMP%]{display:flex;align-items:center}.adam-link[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;line-height:14px}"],changeDetection:0}),e}(),Je=["fieldComponent"],et=["invisibleClickable"],tt=function(e,t){return{"adam-browser-container--short u-hide-scrollbar":e,"u-display-none":t}},nt=function(e){return{"u-display-none":e}},it=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.adamDisabled$=new o.a(!0),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.fullscreenAdam=this.config.field.inputType===Z.a.HyperlinkLibrary},t.prototype.ngAfterViewInit=function(){var e=this;this.subscription.add(this.config.adam.getConfig$().subscribe((function(t){null!=t&&e.adamDisabled$.next(t.disabled)})))},t.prototype.ngOnDestroy=function(){this.adamDisabled$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.openUpload=function(){this.invisibleClickableRef.nativeElement.click()},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-adam-attach-wrapper"]],viewQuery:function(e,t){var n;1&e&&(E.Gc(Je,!0,E.Q),E.Sc(et,!0)),2&e&&(E.xc(n=E.bc())&&(t.fieldComponent=n.first),E.xc(n=E.bc())&&(t.invisibleClickableRef=n.first))},features:[E.xb],decls:13,vars:21,consts:[[1,"adam-dialog-container"],[1,"adam-dialog-content"],["fieldComponent",""],[1,"u-shadow-top",3,"config","group","ngClass","openUpload"],[3,"ngClass"],[1,"dropzone-previews"],["data-note","just a fake, invisible area for dropzone",1,"invisible-clickable"],["invisibleClickable",""],[1,"field-hints",3,"ngClass"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.Ob(2,null,2),E.Rb(),E.Sb(4,"adam-browser",3),E.ac("openUpload",(function(){return t.openUpload()})),E.fc(5,"async"),E.Rb(),E.Sb(6,"div",4),E.fc(7,"async"),E.Nb(8,"div",5),E.Nb(9,"span",6,7),E.Rb(),E.Nb(11,"adam-hint",8),E.fc(12,"async"),E.Rb()),2&e&&(E.Ab(4),E.kc("config",t.config)("group",t.group)("ngClass",E.pc(14,tt,!t.fullscreenAdam,E.gc(5,8,t.adamDisabled$))),E.Ab(2),E.Cb("field-",t.config.field.index,""),E.kc("ngClass",E.oc(17,nt,E.gc(7,10,t.adamDisabled$))),E.Ab(5),E.kc("ngClass",E.oc(19,nt,E.gc(12,12,t.adamDisabled$))))},directives:[Xe,D.k,me.a,Ze],pipes:[D.b],styles:[".adam-browser-container--short[_ngcontent-%COMP%]{flex-shrink:0;max-height:45%;overflow-y:scroll}"],changeDetection:0}),t}(ae),at=n("GN9g"),ot=n("HM3f"),rt=function(){return function(e,t,n){this.acceptedFiles=null,this.maxFiles=1e3,this.parallelUploads=1e3,this.autoReset=null,this.errorReset=null,this.cancelReset=null,this.maxFilesize=1e4,this.paramName="uploadfile",this.maxThumbnailFilesize=10,this.dictDefaultMessage="",this.addRemoveLinks=!1,this.previewsContainer=".dropzone-previews",this.clickable=".dropzone-previews",this.disabled=e,this.url=t,this.headers=n}}(),ct=["fieldComponent"],st=function(e){return{"dropzone-disabled":e}},lt=function(e){function t(t,n,i,a){var r=e.call(this,t,n)||this;return r.dnnContext=i,r.zone=a,r.dropzoneConfig$=new o.a(null),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.dropzoneDisabled$=Object(ot.a)([this.disabled$,this.dropzoneConfig$]).pipe(Object(I.a)((function(e){var t=Object(i.f)(e,2),n=t[1];return t[0]||null==n||n.disabled}))),this.config.dropzone={setConfig:function(e){t.zone.run((function(){t.setConfig(e)}))},getConfig:function(){return t.dropzoneConfig$.value},getConfig$:function(){return t.dropzoneConfig$.asObservable()},uploadFile:function(e){t.zone.run((function(){t.uploadFile(e)}))}},this.config.dropzone.setConfig({})},t.prototype.ngAfterViewInit=function(){this.config.dropzone.setConfig({previewsContainer:".field-"+this.config.field.index+" .dropzone-previews",clickable:".field-"+this.config.field.index+" .invisible-clickable"})},t.prototype.ngOnDestroy=function(){this.dropzoneConfig$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.onUploadError=function(e){Object(R.a)("Dropzone upload error. Args:",e),this.dropzoneRef.reset()},t.prototype.onUploadSuccess=function(e){var t=e[1];t.Success?this.config.adam?(this.config.adam.addFullPath(t),this.config.adam.onItemUpload(t),this.config.adam.refresh()):alert("Upload failed because: ADAM reference doesn't exist"):alert("Upload failed because: "+t.Error),this.dropzoneRef.reset()},t.prototype.setConfig=function(e){var t,n,a=this.config.field.isExternal,o=this.dnnContext.$2sxc.http.apiUrl("app-content/"+this.config.entity.header.ContentTypeName+"/"+this.config.entity.header.Guid+"/"+this.config.field.name+"?subfolder=&usePortalRoot=false&appId="+this.eavService.eavConfig.appId),r=this.dnnContext.sxc.webApi.headers(),c=null!=this.dropzoneConfig$.value?this.dropzoneConfig$.value:new rt(a,o,r),s=new rt(a,o,r),l=Object.keys(s);try{for(var d=Object(i.h)(l),u=d.next();!u.done;u=d.next()){var p=u.value;s[p]=null!=e[p]?e[p]:c[p]}}catch(g){t={error:g}}finally{try{u&&!u.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}if(s.maxFiles!==s.parallelUploads){var f=s.maxFiles>=s.parallelUploads?s.maxFiles:s.parallelUploads;s.maxFiles=f,s.parallelUploads=f}(null==s.acceptedFiles||""===s.acceptedFiles)&&delete s.acceptedFiles,this.dropzoneConfig$.next(s)},t.prototype.uploadFile=function(e){var t=this.dropzoneRef.dropzone();e.upload={chunked:t.defaultOptions.chunking},t.processFile(e)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(be.a),E.Mb(E.A))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-dropzone-wrapper"]],viewQuery:function(e,t){var n;1&e&&(E.Gc(ct,!0,E.Q),E.Sc(at.a,!0)),2&e&&(E.xc(n=E.bc())&&(t.fieldComponent=n.first),E.xc(n=E.bc())&&(t.dropzoneRef=n.first))},features:[E.xb],decls:6,vars:11,consts:[[1,"dropzone","dropzone-container",3,"ngClass","dropzone","disabled","error","success"],["fieldComponent",""]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.ac("error",(function(e){return t.onUploadError(e)}))("success",(function(e){return t.onUploadSuccess(e)})),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.Ob(4,null,1),E.Rb()),2&e&&E.kc("ngClass",E.oc(9,st,E.gc(1,3,t.dropzoneDisabled$)))("dropzone",E.gc(2,5,t.dropzoneConfig$))("disabled",E.gc(3,7,t.dropzoneDisabled$))},directives:[D.k,me.a,at.a],pipes:[D.b],styles:[".dropzone-container[_ngcontent-%COMP%]{height:100%;position:relative}"],changeDetection:0}),t}(ae);function dt(e){return function(t){Reflect.defineMetadata("inputTypeAnnotations",e,t)}}var ut=n("WcVu"),pt=n("k8N0"),ft=n("29Wa"),gt=function(){function e(e,t){this.zone=t,this.target="_blank",this.element=e.nativeElement}return e.prototype.ngOnInit=function(){var e=this;this.zone.runOutsideAngular((function(){e.observer=new MutationObserver((function(t){"A"===e.element.tagName&&(a=e.element).target!==e.target&&(a.target=e.target);for(var n=e.element.getElementsByTagName("a"),i=0;i<n.length;i++){var a;(a=n[i]).target!==e.target&&(a.target=e.target)}})),e.observer.observe(e.element,{childList:!0,subtree:!0})}))},e.prototype.ngOnDestroy=function(){var e=this;this.zone.runOutsideAngular((function(){e.observer.disconnect()}))},e.\u0275fac=function(t){return new(t||e)(E.Mb(E.l),E.Mb(E.A))},e.\u0275dir=E.Hb({type:e,selectors:[["","appChangeAnchorTarget",""]]}),e}(),bt=n("KSFr"),ht=function(e){return{"c-fht__container-hint--ellipsis":e}};function mt(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-hint",4),E.ac("click",(function(e){return E.Ac(n),E.ec(2).toggleHint(e)})),E.Nb(1,"span",5),E.fc(2,"safeHtml"),E.Rb()}if(2&e){var i=E.ec().ngIf,a=E.ec();E.kc("ngClass",a.control.disabled?"c-fht__container-hint--disabled":"c-fht__container-hint"),E.Ab(1),E.kc("ngClass",E.oc(5,ht,!a.isFullText))("innerHtml",E.gc(2,3,i.description),E.Bc)}}var vt=function(e){return{param:e}};function yt(e,t){if(1&e&&(E.Sb(0,"mat-error",6),E.Nc(1),E.fc(2,"translate"),E.Rb()),2&e){var n=E.ec(2);E.Ab(1),E.Pc(" ",E.hc(2,1,n.getErrorMessage(),E.oc(4,vt,n.config.field.settings))," ")}}var wt=function(e,t,n,i){return{"c-fht__container--no-hint":e,"c-fht__container--last":t,"c-fht__container--last--no-hint":n,"c-fht__container--hyperlink-default-wrapper-fix":i}};function xt(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"div",1),E.Lc(2,mt,3,7,"mat-hint",2),E.Lc(3,yt,3,6,"mat-error",3),E.Rb(),E.Pb()),2&e){var n=t.ngIf,i=E.ec();E.Ab(1),E.kc("ngClass",E.rc(3,wt,!(n.description||n.invalid&&!i.disableError),i.config.field.isLastInGroup,i.config.field.isLastInGroup&&!n.description&&!(n.invalid&&!i.disableError),i.hyperlinkDefaultWrapperFix&&!i.config.field.isLastInGroup)),E.Ab(1),E.kc("ngIf",n.description),E.Ab(1),E.kc("ngIf",n.invalid&&!i.disableError)}}var _t=function(e,t){return{invalid:e,description:t}},Ct=function(){function e(e){this.validationMessagesService=e,this.disableError=!1,this.hyperlinkDefaultWrapperFix=!1,this.isFullText=!1}return e.prototype.ngOnInit=function(){this.control=this.group.controls[this.config.field.name],this.invalid$=this.control.statusChanges.pipe(Object(I.a)((function(e){return"INVALID"===e})),Object(J.a)(this.control.invalid)),this.description$=this.config.field.settings$.pipe(Object(I.a)((function(e){return e.Notes})))},e.prototype.toggleHint=function(e){var t=e.target;if("A"!==t.tagName){for(;t&&t.classList&&!t.classList.contains("notes-container");){if(!(t=t.parentNode))return;if("A"===t.tagName)return}this.isFullText=!this.isFullText}},e.prototype.getErrorMessage=function(){return this.validationMessagesService.getErrorMessage(this.control,this.config)},e.\u0275fac=function(t){return new(t||e)(E.Mb(ie.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-field-helper-text"]],inputs:{config:"config",group:"group",disableError:"disableError",hyperlinkDefaultWrapperFix:"hyperlinkDefaultWrapperFix"},decls:3,vars:8,consts:[[4,"ngIf"],[1,"c-fht__container",3,"ngClass"],["class","mat-caption","align","start","fxLayout","row","fxLayoutAlign","start start",3,"ngClass","click",4,"ngIf"],["class","mat-caption",4,"ngIf"],["align","start","fxLayout","row","fxLayoutAlign","start start",1,"mat-caption",3,"ngClass","click"],["appChangeAnchorTarget","",1,"notes-container",3,"ngClass","innerHtml"],[1,"mat-caption"]],template:function(e,t){1&e&&(E.Lc(0,xt,4,8,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,_t,E.gc(1,1,t.invalid$),E.gc(2,3,t.description$)))},directives:[D.m,D.k,me.a,ft.f,j.c,j.b,gt,ft.b],pipes:[D.b,bt.a,z.d],styles:[".c-fht__container[_ngcontent-%COMP%], .c-fht__container--no-hint[_ngcontent-%COMP%]{padding:.54166667em 0 13px}.c-fht__container--last[_ngcontent-%COMP%], .c-fht__container--last--no-hint[_ngcontent-%COMP%]{padding:.54166667em 0 5px}.c-fht__container--hyperlink-default-wrapper-fix[_ngcontent-%COMP%]{min-height:22px}.c-fht__container-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-fht__container-hint--ellipsis[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-height:16px}.c-fht__container-hint--disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-fht__container--input-invalid[_ngcontent-%COMP%]{padding:6px 12px 11px;border:2px;border-bottom-style:solid;border-color:#b00030}.c-fht__container[_ngcontent-%COMP%]   .c-ew__color--accent[_ngcontent-%COMP%]{color:#0087f4}.c-fht__container[_ngcontent-%COMP%]   .c-ew__color--primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}"],changeDetection:0}),e}();function Ot(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"div",1),E.Sb(2,"mat-slide-toggle",2),E.Nc(3),E.fc(4,"async"),E.Rb(),E.Nb(5,"app-field-helper-text",3),E.Rb(),E.Pb()),2&e){var n=E.ec();E.Ab(1),E.kc("formGroup",n.group),E.Ab(1),E.kc("formControlName",n.config.field.name),E.Ab(1),E.Oc(E.gc(4,5,n.label$)),E.Ab(2),E.kc("config",n.config)("group",n.group)}}var kt=function(e,t){return{disabled:e,showValidation:t}},St=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.label$=Object(ot.a)([this.value$,this.settings$,this.label$]).pipe(Object(I.a)((function(e){var t=Object(i.f)(e,3),n=t[0],a=t[1];return!0===n&&null!=a.TitleTrue&&""!==a.TitleTrue?a.TitleTrue:!1===n&&null!=a.TitleFalse&&""!==a.TitleFalse?a.TitleFalse:t[2]})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["boolean-default"]],features:[E.xb],decls:3,vars:8,consts:[[4,"ngIf"],[3,"formGroup"],[3,"formControlName"],["disableError","true",3,"config","group"]],template:function(e,t){1&e&&(E.Lc(0,Ot,6,7,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,kt,E.gc(1,1,t.disabled$),E.gc(2,3,t.showValidation$)))},directives:[D.m,Y.n,Y.g,pt.a,Y.m,Y.e,Ct],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),Mt=function(e,t){return{"toggle-false":e,"toggle-null":t}};function It(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"div",1),E.Sb(2,"mat-slide-toggle",2),E.ac("toggleChange",(function(){return E.Ac(n),E.ec().toggle()})),E.fc(3,"async"),E.Nc(4),E.fc(5,"async"),E.Rb(),E.Nb(6,"app-field-helper-text",3),E.Rb(),E.Pb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("formGroup",a.group),E.Ab(1),E.kc("disabled",E.gc(3,7,a.disabled$))("checked",i.value)("ngClass",E.pc(11,Mt,!1===i.value,null===i.value)),E.Ab(2),E.Pc(" ",E.gc(5,9,a.label$)," "),E.Ab(2),E.kc("config",a.config)("group",a.group)}}var At=function(e,t){return{value:e,showValidation:t}},Pt=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.value$=this.value$.pipe(Object(I.a)((function(e){return""===e?null:e}))),this.label$=Object(ot.a)([this.value$,this.settings$,this.label$]).pipe(Object(I.a)((function(e){var t=Object(i.f)(e,3),n=t[0],a=t[1];return!0===n&&null!=a.TitleTrue&&""!==a.TitleTrue?a.TitleTrue:!1===n&&null!=a.TitleFalse&&""!==a.TitleFalse?a.TitleFalse:null===n&&null!=a.TitleIndeterminate&&""!==a.TitleIndeterminate?a.TitleIndeterminate:t[2]})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.toggle=function(){var e;switch(this.control.value){case!1:e=null;break;case"":case null:e=!0;break;case!0:e=!1}this.control.patchValue(e)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["boolean-tristate"]],features:[E.xb],decls:3,vars:8,consts:[[4,"ngIf"],[3,"formGroup"],[3,"disabled","checked","ngClass","toggleChange"],["disableError","true",3,"config","group"]],template:function(e,t){1&e&&(E.Lc(0,It,7,14,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,At,E.gc(1,1,t.value$),E.gc(2,3,t.showValidation$)))},directives:[D.m,Y.n,Y.g,pt.a,D.k,me.a,Ct],pipes:[D.b],styles:[".toggle-false .mat-slide-toggle-bar{background-color:orange}  .toggle-null .mat-slide-toggle-thumb-container{margin-left:8px}"],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),Tt=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["custom-default"]],features:[E.xb],decls:2,vars:1,consts:[[1,"message"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.Nc(1),E.Rb()),2&e&&(E.Ab(1),E.Pc("",t.config.field.name,": Field configuration is incomplete and should be fixed."))},styles:[".message[_ngcontent-%COMP%]{padding:16px}"],changeDetection:0}),t=Object(i.c)([dt({})],t)}(ae),Rt=n("Cd2c");function $t(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"mat-form-field",1),E.Nb(2,"textarea",2),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.Sb(6,"mat-label"),E.Nc(7),E.fc(8,"async"),E.Rb(),E.Rb(),E.Nb(9,"app-field-helper-text",3),E.Pb()),2&e){var n=E.ec();E.Ab(1),E.kc("formGroup",n.group),E.Ab(1),E.kc("formControlName",n.config.field.name)("rows",E.gc(3,8,n.rowCount$))("placeholder",E.gc(4,10,n.placeholder$))("required",E.gc(5,12,n.required$)),E.Ab(5),E.Oc(E.gc(8,14,n.label$)),E.Ab(2),E.kc("config",n.config)("group",n.group)}}var Lt=function(e,t){return{disabled:e,showValidation:t}},Et=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rowCount$=this.settings$.pipe(Object(I.a)((function(e){return e.Rows||5})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["custom-json-editor"]],features:[E.xb],decls:3,vars:8,consts:[[4,"ngIf"],["appearance","standard","color","accent",1,"textarea-field",3,"formGroup"],["matInput","",3,"formControlName","rows","placeholder","required"],[3,"config","group"]],template:function(e,t){1&e&&(E.Lc(0,$t,10,16,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,Lt,E.gc(1,1,t.disabled$),E.gc(2,3,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,Rt.b,Y.c,Y.m,Y.e,Y.t,ft.g,Ct],pipes:[D.b],styles:[".textarea-field[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),Dt=n("Scw0"),zt=n("9LM3"),Ft=n("csyo"),Nt=n("nwk6"),jt=n("1/u/"),Vt=function(){function e(e,t,n,a,o){var r=this;this.field=n,this._experimental=a,this.data=new Gt(e,t),this.dialog=new Bt(e),this.loadScript=function(e,t,n){var a,c;if(("string"==typeof e||"function"==typeof e)&&"string"==typeof t&&"function"==typeof n)return t=r.resolveTokens(t,o),void Object(jt.a)([{test:e,src:t}],n);if(!Array.isArray(e)||"function"!=typeof t)throw new Error("Unrecognized parameters. Please double check your input");try{for(var s=Object(i.h)(e),l=s.next();!l.done;l=s.next()){var d=l.value;d.src=r.resolveTokens(d.src,o)}}catch(u){a={error:u}}finally{try{l&&!l.done&&(c=s.return)&&c.call(s)}finally{if(a)throw a.error}}Object(jt.a)(e,t)}}return e.prototype.resolveTokens=function(e,t){return(e=e.replace(/\[System:Path\]/i,se.a.getUrlPrefix("system",t)).replace(/\[Zone:Path\]/i,se.a.getUrlPrefix("zone",t)).replace(/\[App:Path\]/i,se.a.getUrlPrefix("app",t))).includes("?")||(e=e+"?sxcver="+sxcVersion),e},e}(),Gt=function(){function e(e,t){var n=this;this._connectorHost=e,this.clientValueChangeListeners=[],this.value$=t,this.forceConnectorSave$=e.forceConnectorSave$,this.value$.subscribe((function(e){n.value=e,n.clientValueChangeListeners.forEach((function(t){return t(e)}))}))}return e.prototype.update=function(e){this._connectorHost.update(e)},e.prototype.onValueChange=function(e){this.clientValueChangeListeners.push(e)},e}(),Bt=function(){return function(e){this.open=function(t){return e.expand(!0,t)},this.close=function(){return e.expand(!1)}}}(),qt=function(){function e(e,t,n,i,a,r,c,s,l,d,u,p){var f=this;this.config=e,this.group=t,this.customElContainerRef=n,this.customElName=i,this.eavService=a,this.translateService=r,this.contentTypeService=c,this.inputTypeService=s,this.featureService=l,this.editRoutingService=d,this.dnnBridgeService=u,this.zone=p,this.value$=new o.a(null),this.subscription=new X.a,this.control=this.group.controls[this.config.field.name],this.subscription.add(this.eavService.formValueChange$.pipe(Object(A.a)((function(e){return e.formId===f.config.form.formId&&e.entityGuid===f.config.entity.entityGuid})),Object(I.a)((function(e){return f.control.value})),Object(J.a)(this.control.value),Object(ee.a)()).subscribe((function(e){f.value$.next(e)}))),this.customEl=document.createElement(this.customElName),this.customEl.connector=this.buildConnector(),this.customElContainerRef.nativeElement.appendChild(this.customEl)}return e.prototype.destroy=function(){var e;this.subscription.unsubscribe(),this.value$.complete(),null===(e=this.customEl)||void 0===e||e.parentNode.removeChild(this.customEl),this.customEl=null},e.prototype.buildConnector=function(){var e=this.calculateRegularProps(),t=this.calculateExperimentalProps();return new Vt(e,this.value$.asObservable(),this.config.field,t,this.eavService.eavConfig)},e.prototype.calculateRegularProps=function(){var e=this;return{forceConnectorSave$:this.eavService.forceConnectorSave$,update:function(t){e.zone.run((function(){e.updateControl(e.control,t)}))},expand:function(t,n){e.zone.run((function(){e.editRoutingService.expand(t,e.config.field.index,e.config.entity.entityGuid,n)}))}}},e.prototype.calculateExperimentalProps=function(){var e,t=this;return this.contentTypeService.getContentTypeById(this.config.entity.contentTypeId).pipe(Object(S.a)(1)).subscribe((function(n){e=Nt.a.calculateInputTypes(n.contentType.attributes,t.inputTypeService)})),{entityGuid:this.config.entity.entityGuid,allInputTypeNames:e,formGroup:this.group,translateService:this.translateService,isExpanded$:this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),dropzone:this.config.dropzone,adam:this.config.adam,updateField:function(e,n){t.zone.run((function(){t.updateControl(t.group.controls[e],n)}))},isFeatureEnabled:function(e){return t.featureService.isFeatureEnabled(e)},setFocused:function(e){t.zone.run((function(){t.config.field.focused$.next(e)}))},openPagePicker:function(e,n){t.zone.run((function(){t.dnnBridgeService.open("pagepicker",e,n)}))},getUrlOfId:function(e,n){t.zone.run((function(){t.getUrlOfId(e,n)}))}}},e.prototype.getUrlOfId=function(e,t){e&&this.dnnBridgeService.getUrlOfId(e,this.config.entity.header.ContentTypeName,this.config.entity.header.Guid,this.config.field.name).subscribe((function(e){e&&t(e)}))},e.prototype.updateControl=function(e,t){null==e||e.disabled||(e.value!==t&&e.patchValue(t),e.dirty||e.markAsDirty(),e.touched||e.markAsTouched())},e}(),Ut=n("C+g0"),Ht=function(e){function t(t){return e.call(this,"ContentType",t)||this}return Object(i.d)(t,e),t.prototype.addContentTypes=function(e){var t=e.map((function(e){return Ut.a.create(e)}));this.addManyToCache(t)},t.prototype.getContentTypeById=function(e){return this.entities$.pipe(Object(I.a)((function(t){return t.find((function(t){return t.contentType.id===e}))})))},t.\u0275fac=function(e){return new(e||t)(E.Wb(pe.b))},t.\u0275prov=E.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(pe.a),Qt=n("iKpp"),Wt=["customElContainer"],Kt=function(){function e(e,t,n,i,a,o,r,c){this.eavService=e,this.translateService=t,this.contentTypeService=n,this.inputTypeService=i,this.featureService=a,this.editRoutingService=o,this.dnnBridgeService=r,this.zone=c}return e.prototype.ngAfterViewInit=function(){var e,t=(null===(e=null===history||void 0===history?void 0:history.state)||void 0===e?void 0:e.componentTag)||"field-"+this.config.field.inputType+"-dialog";Object(R.a)("Connector created for:",t),this.connectorCreator=new qt(this.config,this.group,this.customElContainerRef,t,this.eavService,this.translateService,this.contentTypeService,this.inputTypeService,this.featureService,this.editRoutingService,this.dnnBridgeService,this.zone)},e.prototype.ngOnDestroy=function(){Object(R.a)("Connector destroyed"),this.connectorCreator.destroy()},e.\u0275fac=function(t){return new(t||e)(E.Mb(ne.a),E.Mb(z.e),E.Mb(Ht),E.Mb(zt.a),E.Mb(ge),E.Mb(he.a),E.Mb(Qt.a),E.Mb(E.A))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-connector"]],viewQuery:function(e,t){var n;1&e&&E.Sc(Wt,!0),2&e&&E.xc(n=E.bc())&&(t.customElContainerRef=n.first)},inputs:{config:"config",group:"group"},decls:2,vars:0,consts:[[2,"height","100%","position","relative"],["customElContainer",""]],template:function(e,t){1&e&&E.Nb(0,"div",0,1)},styles:[""],changeDetection:0}),e}();function Xt(e,t){1&e&&E.Nb(0,"mat-spinner",3)}function Yt(e,t){if(1&e&&E.Nb(0,"app-connector",4),2&e){var n=E.ec(2);E.kc("config",n.config)("group",n.group)}}function Zt(e,t){if(1&e&&(E.Qb(0),E.Lc(1,Xt,1,0,"mat-spinner",1),E.Lc(2,Yt,1,2,"app-connector",2),E.Pb()),2&e){var n=t.ngIf;E.Ab(1),E.kc("ngIf",n.loading),E.Ab(1),E.kc("ngIf",!n.loading&&n.isExpanded)}}var Jt=function(e,t,n){return{loading:e,isExpanded:t,showValidation:n}},en=function(e){function t(t,n,i,a,r){var c=e.call(this,t,n)||this;return c.inputTypeService=i,c.scriptsLoaderService=a,c.editRoutingService=r,c.loading$=new o.a(!0),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.isExpanded$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.loadAssets()},t.prototype.ngOnDestroy=function(){this.loading$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.loadAssets=function(){var e;this.inputTypeService.getInputTypeById(this.config.field.inputType).pipe(Object(S.a)(1)).subscribe((function(t){e=t}));var t=e.AngularAssets.split("\n");0!==t.length&&this.scriptsLoaderService.load(t,this.assetsLoaded.bind(this))},t.prototype.assetsLoaded=function(){Object(R.a)("ExternalWebcomponentComponent",this.config.field.name,"loaded"),this.loading$.next(!1)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(zt.a),E.Mb(Dt.a),E.Mb(he.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["external-web-component"]],features:[E.xb],decls:4,vars:11,consts:[[4,"ngIf"],["color","accent",4,"ngIf"],[3,"config","group",4,"ngIf"],["color","accent"],[3,"config","group"]],template:function(e,t){1&e&&(E.Lc(0,Zt,3,2,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async")),2&e&&E.kc("ngIf",E.qc(7,Jt,E.gc(1,1,t.loading$),E.gc(2,3,t.isExpanded$),E.gc(3,5,t.showValidation$)))},directives:[D.m,Ft.b,Kt],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({})],t)}(ae),tn=n("mFH5"),nn=n("pTcC"),an=n("gcUQ");function on(e,t){if(1&e&&(E.Sb(0,"mat-form-field",3),E.Nb(1,"input",4),E.Nb(2,"mat-datepicker-toggle",5),E.fc(3,"translate"),E.Nb(4,"mat-datepicker",null,6),E.Sb(6,"mat-label"),E.Nc(7),E.Rb(),E.Rb()),2&e){var n=E.yc(5),i=E.ec().ngIf,a=E.ec();E.kc("formGroup",a.group),E.Ab(1),E.kc("formControlName",a.config.field.name)("matDatepicker",n)("placeholder",i.placeholder)("required",i.required),E.Ab(1),E.kc("for",n)("matTooltip",E.gc(3,8,"Fields.DateTime.Open")),E.Ab(5),E.Oc(i.label)}}function rn(e,t){if(1&e&&(E.Sb(0,"mat-form-field",3),E.Nb(1,"input",7),E.Nb(2,"mat-datepicker-toggle",5),E.fc(3,"translate"),E.Nb(4,"ngx-mat-datetime-picker",null,6),E.Sb(6,"mat-label"),E.Nc(7),E.Rb(),E.Rb()),2&e){var n=E.yc(5),i=E.ec().ngIf,a=E.ec();E.kc("formGroup",a.group),E.Ab(1),E.kc("formControlName",a.config.field.name)("ngxMatDatetimePicker",n)("placeholder",i.placeholder)("required",i.required),E.Ab(1),E.kc("for",n)("matTooltip",E.gc(3,8,"Fields.DateTime.Open")),E.Ab(5),E.Oc(i.label)}}function cn(e,t){if(1&e&&(E.Qb(0),E.Lc(1,on,8,10,"mat-form-field",1),E.Lc(2,rn,8,10,"mat-form-field",1),E.Nb(3,"app-field-helper-text",2),E.Pb()),2&e){var n=t.ngIf,i=E.ec();E.Ab(1),E.kc("ngIf",!n.useTimePicker),E.Ab(1),E.kc("ngIf",n.useTimePicker),E.Ab(1),E.kc("config",i.config)("group",i.group)}}var sn=function(e,t,n,i,a,o){return{useTimePicker:e,placeholder:t,required:n,disabled:i,label:a,showValidation:o}},ln=function(e){function t(t,n,i,a,o){var r=e.call(this,t,n)||this;r.translate=i,r.dateAdapter=a,r.ngxDateTimeAdapter=o;var c=r.translate.currentLang;return r.dateAdapter.setLocale(c),r.ngxDateTimeAdapter.setLocale(c),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.useTimePicker$=this.settings$.pipe(Object(I.a)((function(e){return e.UseTimePicker})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(z.e),E.Mb(tn.a),E.Mb(nn.b))},t.\u0275cmp=E.Gb({type:t,selectors:[["datetime-default"]],features:[E.xb],decls:7,vars:20,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup",4,"ngIf"],[3,"config","group"],["appearance","standard","color","accent",3,"formGroup"],["matInput","",3,"formControlName","matDatepicker","placeholder","required"],["matSuffix","",3,"for","matTooltip"],["picker",""],["matInput","",3,"formControlName","ngxMatDatetimePicker","placeholder","required"]],template:function(e,t){1&e&&(E.Lc(0,cn,4,4,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async")),2&e&&E.kc("ngIf",E.tc(13,sn,E.gc(1,1,t.useTimePicker$),E.gc(2,3,t.placeholder$),E.gc(3,5,t.required$),E.gc(4,7,t.disabled$),E.gc(5,9,t.label$),E.gc(6,11,t.showValidation$)))},directives:[D.m,Ct,ft.c,Y.n,Y.g,Rt.b,Y.c,an.e,Y.m,Y.e,Y.t,an.h,ft.h,ve.a,an.d,ft.g,nn.c,nn.d],pipes:[D.b,z.d],styles:[""],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),dn=function(){function e(){}return e.prototype.ngOnInit=function(){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Gb({type:e,selectors:[["empty-default"]],decls:0,vars:0,template:function(e,t){},styles:[""],changeDetection:0}),e}(),un=n("b67o"),pn=n("oqI+"),fn=function(){function e(e,t,n,i,a){this.changeEvent=n,this.eavConfig=a,this.fields=[],this.findFields=/\[.*?\]/gi,this.unwrapField=/[\[\]]/gi,this.subscriptions=[],this.mask=e,this.model=t,this.fields=this.fieldList(),i&&(this.preClean=i),t&&n&&this.watchAllFields()}return e.prototype.resolve=function(){var e=this,t=this.mask;return null!=this.eavConfig&&null!=t&&(t=(t=t.replace("[App:AppId]",this.eavConfig.appId)).replace("[App:ZoneId]",this.eavConfig.zoneId)),this.fields.forEach((function(n,i){var a=e.model.hasOwnProperty(n)&&e.model[n]&&e.model[n].value?e.model[n].value:"",o=e.preClean(n,a);t=t.replace("["+n+"]",o)})),t},e.prototype.fieldList=function(){var e=this,t=[];if(!this.mask)return t;var n=this.mask.match(this.findFields);return n?n.forEach((function(n,i){var a=n.replace(e.unwrapField,"");t.push(a)})):t.push(this.mask),t},e.prototype.preClean=function(e,t){return t},e.prototype.onChange=function(){var e=this.resolve();this.value!==e&&this.changeEvent(e),this.value=e},e.prototype.watchAllFields=function(){var e=this;this.fields.forEach((function(t){if(e.model[t]){var n=e.model[t].valueChanges.subscribe((function(t){return e.onChange()}));e.subscriptions.push(n)}}))},e.prototype.destroy=function(){this.subscriptions.forEach((function(e){e.unsubscribe()}))},e}(),gn=n("bRQ+"),bn=n("2FQU"),hn=n("ulve"),mn=["autocomplete"];function vn(e,t){if(1&e&&(E.Sb(0,"button",16),E.Sb(1,"mat-icon"),E.Nc(2,"arrow_drop_down"),E.Rb(),E.Rb()),2&e){var n=E.ec();E.kc("disabled",n.disabled||!n.settings.EnableAddExisting)}}function yn(e,t){if(1&e&&(E.Sb(0,"button",18),E.Sb(1,"mat-icon"),E.Nc(2,"arrow_drop_down"),E.Rb(),E.Rb()),2&e){var n=E.ec(2);E.kc("disabled",n.disabled)}}function wn(e,t){if(1&e){var n=E.Tb();E.Sb(0,"a",17),E.ac("click",(function(){return E.Ac(n),E.ec().toggleFreeText()})),E.Sb(1,"button",18),E.Sb(2,"mat-icon",19),E.fc(3,"translate"),E.Nc(4,"text_fields"),E.Rb(),E.Rb(),E.Lc(5,yn,3,1,"button",20),E.Rb()}if(2&e){var i=E.ec();E.Ab(1),E.kc("disabled",i.disabled),E.Ab(1),E.kc("matTooltip",E.gc(3,3,"Fields.String.Freetext")),E.Ab(3),E.kc("ngIf",i.freeTextMode)}}function xn(e,t){if(1&e&&(E.Sb(0,"mat-option",21),E.Sb(1,"span"),E.Nc(2),E.Rb(),E.Rb()),2&e){var n=t.$implicit,i=E.ec();E.kc("value",n.Value)("disabled",i.isOptionDisabled(n.Value)),E.Ab(2),E.Oc(n.Text?n.Text:n.Value)}}function _n(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",22),E.ac("click",(function(){return E.Ac(n),E.ec().openNewEntityDialog()})),E.fc(1,"translate"),E.Sb(2,"mat-icon"),E.Nc(3,"add_circle_outline"),E.Rb(),E.Rb()}if(2&e){var i=E.ec();E.kc("matTooltip",E.gc(1,2,"Fields.Entity.New"))("disabled",i.disabled||i.disableAddNew)}}function Cn(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-form-field",23),E.Nb(1,"input",24),E.Sb(2,"a",25),E.ac("click",(function(){return E.Ac(n),E.ec().toggleFreeText()})),E.Sb(3,"button",18),E.Sb(4,"mat-icon"),E.Nc(5,"arrow_drop_down"),E.Rb(),E.Rb(),E.Rb(),E.Sb(6,"mat-label"),E.Nc(7),E.Rb(),E.Rb()}if(2&e){var i=E.ec();E.kc("formGroup",i.group),E.Ab(1),E.kc("required",i.required)("formControlName",i.config.field.name)("placeholder",i.placeholder),E.Ab(2),E.kc("disabled",i.disabled),E.Ab(4),E.Oc(i.label)}}function On(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div"),E.Nc(1,"debug: "),E.Sb(2,"span",26),E.ac("click",(function(){return E.Ac(n),E.ec().insertNull()})),E.Nc(3,"add null-item"),E.Rb(),E.Rb()}}function kn(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div"),E.Sb(1,"button",27),E.ac("click",(function(){return E.Ac(n),E.ec().openNewEntityDialog()})),E.fc(2,"translate"),E.Sb(3,"mat-icon"),E.Nc(4,"add"),E.Rb(),E.Rb(),E.Rb()}if(2&e){var i=E.ec();E.Ab(1),E.kc("matTooltip",E.gc(2,2,"Fields.Entity.New"))("disabled",i.disabled||i.disableAddNew)}}var Sn=function(e){return{"mat-form-field-invalid":e}},Mn=function(e){return{"mat-error":e}},In=function(){function e(e,t){this.translate=e,this.globalConfigService=t,this.toggleFreeTextMode=new E.n,this.addSelected=new E.n,this.editEntity=new E.n,this.filteredEntities=[]}return e.prototype.ngOnInit=function(){this.debugEnabled$=this.globalConfigService.getDebugEnabled()},e.prototype.ngOnChanges=function(e){var t,n;if(null!=(null===(t=e.availableEntities)||void 0===t?void 0:t.currentValue)){var i=(null===(n=this.autocompleteRef)||void 0===n?void 0:n.nativeElement.value)||"";this.filterSelectionList(i)}},e.prototype.getPlaceholder=function(){return this.availableEntities.length?"search":this.error?this.error:this.translate.instant("Fields.EntityQuery.QueryNoItems")},e.prototype.toggleFreeText=function(){this.disabled||this.toggleFreeTextMode.emit()},e.prototype.filterSelectionList=function(e){this.filteredEntities=""!==e?this.availableEntities.filter((function(t){return t.Text?t.Text.toLowerCase().includes(e.toLowerCase()):t.Value.toLowerCase().includes(e.toLowerCase())})):this.availableEntities},e.prototype.optionSelected=function(e){this.addSelected.emit(e.option.value),this.autocompleteRef.nativeElement.value="",this.autocompleteRef.nativeElement.blur()},e.prototype.insertNull=function(){this.addSelected.emit(null)},e.prototype.isOptionDisabled=function(e){return!!this.selectedEntities.find((function(t){return t.value===e}))},e.prototype.openNewEntityDialog=function(){this.editEntity.emit(null)},e.\u0275fac=function(t){return new(t||e)(E.Mb(z.e),E.Mb(bn.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-entity-default-search"]],viewQuery:function(e,t){var n;1&e&&E.Sc(mn,!0),2&e&&E.xc(n=E.bc())&&(t.autocompleteRef=n.first)},inputs:{config:"config",group:"group",control:"control",label:"label",placeholder:"placeholder",required:"required",invalid:"invalid",touched:"touched",disabled:"disabled",freeTextMode:"freeTextMode",settings:"settings",error:"error",disableAddNew:"disableAddNew",selectedEntities:"selectedEntities",availableEntities:"availableEntities"},outputs:{toggleFreeTextMode:"toggleFreeTextMode",addSelected:"addSelected",editEntity:"editEntity"},features:[E.yb],decls:22,vars:29,consts:[[3,"hidden"],["fxLayout","row","fxLayoutAlign","start end",1,"ed-field"],[3,"ngClass"],["appearance","standard","color","accent",3,"formGroup","ngClass"],["matInput","",3,"placeholder","matAutocomplete","disabled","blur","input"],["autocomplete",""],["mat-icon-button","","matSuffix","",3,"disabled",4,"ngIf"],["matSuffix","","fxLayoutAlign","center center","appClickStopPropagation","",3,"click",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value","disabled",4,"ngFor","ngForOf"],["fxLayoutAlign","end center",3,"ngClass"],["mat-icon-button","",3,"matTooltip","disabled","click",4,"ngIf"],["appearance","standard","color","accent",3,"formGroup",4,"ngIf"],[4,"ngIf"],[3,"config","group"],["mat-icon-button","","matSuffix","",3,"disabled"],["matSuffix","","fxLayoutAlign","center center","appClickStopPropagation","",3,"click"],["mat-icon-button","",3,"disabled"],[3,"matTooltip"],["mat-icon-button","",3,"disabled",4,"ngIf"],[3,"value","disabled"],["mat-icon-button","",3,"matTooltip","disabled","click"],["appearance","standard","color","accent",3,"formGroup"],["matInput","",3,"required","formControlName","placeholder"],["matSuffix","","appClickStopPropagation","",3,"click"],[3,"click"],["mat-mini-fab","","color","accent",3,"matTooltip","disabled","click"]],template:function(e,t){if(1&e&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.Sb(2,"div",2),E.Sb(3,"div",0),E.Sb(4,"mat-form-field",3),E.Sb(5,"input",4,5),E.ac("blur",(function(){return t.control.markAsTouched()}))("input",(function(e){return t.filterSelectionList(e.target.value)})),E.Rb(),E.Lc(7,vn,3,1,"button",6),E.Lc(8,wn,6,5,"a",7),E.Sb(9,"mat-label",2),E.Nc(10),E.fc(11,"translate"),E.Rb(),E.Rb(),E.Sb(12,"mat-autocomplete",8,9),E.ac("optionSelected",(function(e){return t.optionSelected(e)})),E.Lc(14,xn,3,3,"mat-option",10),E.Rb(),E.Rb(),E.Rb(),E.Sb(15,"div",11),E.Lc(16,_n,4,4,"button",12),E.Rb(),E.Rb(),E.Rb(),E.Lc(17,Cn,8,6,"mat-form-field",13),E.Lc(18,On,4,0,"div",14),E.fc(19,"async"),E.Nb(20,"app-field-helper-text",15),E.Lc(21,kn,5,4,"div",14)),2&e){var n=E.yc(13);E.kc("hidden",t.freeTextMode),E.Ab(2),E.kc("ngClass",t.settings.EnableCreate&&t.settings.EntityType&&!t.selectedEntities.length&&!t.settings.AllowMultiValue?"ed-field__field-short":"ed-field__field"),E.Ab(1),E.kc("hidden",!t.settings.AllowMultiValue&&t.selectedEntities.length),E.Ab(1),E.kc("formGroup",t.group)("ngClass",E.oc(25,Sn,t.invalid&&t.touched)),E.Ab(1),E.kc("placeholder",t.getPlaceholder())("matAutocomplete",n)("disabled",t.disabled||!t.settings.EnableAddExisting),E.Ab(2),E.kc("ngIf",!t.settings.EnableTextEntry),E.Ab(1),E.kc("ngIf",t.settings.EnableTextEntry),E.Ab(1),E.kc("ngClass",E.oc(27,Mn,t.invalid&&t.touched)),E.Ab(1),E.Qc(" ",t.settings.AllowMultiValue?E.gc(11,21,"Fields.Entity.Choose"):t.label," ",t.required?"*":""," "),E.Ab(4),E.kc("ngForOf",t.filteredEntities),E.Ab(1),E.kc("ngClass",t.settings.EnableCreate&&t.settings.EntityType&&!t.selectedEntities.length&&!t.settings.AllowMultiValue?"ed-field__create-icon":"ed-field__create-icon-hide"),E.Ab(1),E.kc("ngIf",t.settings.EnableCreate&&t.settings.EntityType&&!t.selectedEntities.length&&!t.settings.AllowMultiValue),E.Ab(1),E.kc("ngIf",t.freeTextMode),E.Ab(1),E.kc("ngIf",E.gc(19,23,t.debugEnabled$)),E.Ab(2),E.kc("config",t.config)("group",t.group),E.Ab(1),E.kc("ngIf",!t.freeTextMode&&t.settings.EnableCreate&&t.settings.EntityType&&t.settings.AllowMultiValue)}},directives:[j.c,j.b,D.k,me.a,ft.c,Y.n,Y.g,Rt.b,hn.c,D.m,ft.g,hn.a,D.l,Ct,V.a,ft.h,ye.a,xe.a,ve.a,tn.l,Y.c,Y.t,Y.m,Y.e],pipes:[z.d,D.b],styles:[".ed-field[_ngcontent-%COMP%]{width:100%;height:100%}.ed-field__create-icon[_ngcontent-%COMP%]{width:38px;padding-bottom:4px}.ed-field__create-icon[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.ed-field__create-icon-hide[_ngcontent-%COMP%]{width:0}.ed-field__field-short[_ngcontent-%COMP%]{width:calc(100% - 38px);max-width:calc(100% - 38px)}.ed-field__field[_ngcontent-%COMP%]{width:100%}"],changeDetection:0}),e}();function An(e,t,n,i){return("string"==typeof e?gn.a.convertValueToArray(e,t):e).map((function(t){var a,o=n.find((function(e){return e.Value===t}));return a=null==t?"empty slot":"string"==typeof e?null!=o?o.Text:t:null!=o?o.Text:i.instant("Fields.Entity.EntityNotFound"),{value:t,label:a,tooltip:a+" ("+t+")",isFreeTextOrNotFound:null==o}}))}var Pn=n("kVtj"),Tn=function(e){return{disabled:e}};function Rn(e,t){if(1&e&&(E.Sb(0,"mat-label",3),E.Nc(1),E.Rb()),2&e){var n=E.ec();E.kc("ngClass",E.oc(3,Tn,n.disabled)),E.Ab(1),E.Qc(" ",n.label," ",n.required?"*":"","\n")}}function $n(e,t){if(1&e&&(E.Sb(0,"mat-icon",10),E.fc(1,"translate"),E.Nc(2," drag_handle "),E.Rb()),2&e){var n=E.ec(2);E.kc("matTooltipDisabled",n.disabled)("matTooltip",E.gc(1,2,"Fields.Entity.DragMove"))}}function Ln(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",11),E.ac("click",(function(){E.Ac(n);var e=E.ec().$implicit;return E.ec().edit(e.value)})),E.fc(1,"translate"),E.Sb(2,"mat-icon"),E.Nc(3,"edit"),E.Rb(),E.Rb()}if(2&e){var i=E.ec(2);E.kc("matTooltip",E.gc(1,2,"Fields.Entity.Edit"))("disabled",i.config.field.disabled)}}function En(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",11),E.ac("click",(function(){E.Ac(n);var e=E.ec(),t=e.index,i=e.$implicit;return E.ec().deleteItem(t,i.value)})),E.fc(1,"translate"),E.Sb(2,"mat-icon"),E.Nc(3,"delete"),E.Rb(),E.Rb()}if(2&e){var i=E.ec(2);E.kc("matTooltip",E.gc(1,2,"Fields.Entity.Delete"))("disabled",i.disabled)}}function Dn(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",11),E.ac("click",(function(){E.Ac(n);var e=E.ec().index;return E.ec().removeItem(e)})),E.fc(1,"translate"),E.Sb(2,"mat-icon"),E.Nc(3),E.Rb(),E.Rb()}if(2&e){var i=E.ec(2);E.kc("matTooltip",E.gc(1,3,"Fields.Entity.Remove"))("disabled",i.disabled),E.Ab(3),E.Oc(i.settings.AllowMultiValue?"clear":"arrow_drop_down")}}var zn=function(e,t,n){return{"normal-item":e,"dnd-item":t,disabled:n}};function Fn(e,t){if(1&e&&(E.Sb(0,"div",4),E.Sb(1,"div",5),E.Lc(2,$n,3,4,"mat-icon",6),E.Sb(3,"span",7),E.Nc(4),E.Rb(),E.Rb(),E.Sb(5,"div",8),E.Lc(6,Ln,4,4,"button",9),E.Lc(7,En,4,4,"button",9),E.Lc(8,Dn,4,5,"button",9),E.Rb(),E.Rb()),2&e){var n=t.$implicit,i=E.ec();E.kc("ngClass",E.qc(8,zn,!i.settings.AllowMultiValue,i.settings.AllowMultiValue,i.disabled)),E.Ab(1),E.kc("ngClass",E.oc(12,Tn,i.disabled)),E.Ab(1),E.kc("ngIf",i.settings.AllowMultiValue),E.Ab(1),E.kc("matTooltip",n.tooltip),E.Ab(1),E.Pc(" ",n.label," "),E.Ab(2),E.kc("ngIf",i.settings.EnableEdit&&!n.isFreeTextOrNotFound),E.Ab(1),E.kc("ngIf",i.settings.EnableDelete&&!n.isFreeTextOrNotFound),E.Ab(1),E.kc("ngIf",i.settings.EnableRemove)}}var Nn=function(e,t){return{"normal-list":e,"dnd-list":t}},jn=function(){function e(){this.reorder=new E.n,this.removeSelected=new E.n,this.editEntity=new E.n,this.deleteEntity=new E.n}return e.prototype.trackByFn=function(e,t){return t.value},e.prototype.drop=function(e){Object(pn.d)(this.selectedEntities,e.previousIndex,e.currentIndex),this.reorder.emit({previousIndex:e.previousIndex,currentIndex:e.currentIndex})},e.prototype.edit=function(e){this.editEntity.emit(e)},e.prototype.removeItem=function(e){this.removeSelected.emit(e)},e.prototype.deleteItem=function(e,t){this.deleteEntity.emit({index:e,entityGuid:t})},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=E.Gb({type:e,selectors:[["app-entity-default-list"]],inputs:{config:"config",label:"label",required:"required",disabled:"disabled",freeTextMode:"freeTextMode",settings:"settings",selectedEntities:"selectedEntities"},outputs:{reorder:"reorder",removeSelected:"removeSelected",editEntity:"editEntity",deleteEntity:"deleteEntity"},decls:3,vars:8,consts:[["class","field-label",3,"ngClass",4,"ngIf"],["cdkDropList","",3,"cdkDropListDisabled","ngClass","cdkDropListDropped"],["cdkDrag","",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"field-label",3,"ngClass"],["cdkDrag","",3,"ngClass"],[1,"item-title",3,"ngClass"],["class","item-title__icon",3,"matTooltipDisabled","matTooltip",4,"ngIf"],[1,"item-title__text",3,"matTooltip"],[1,"item-actions"],["mat-icon-button","","appMousedownStopPropagation","",3,"matTooltip","disabled","click",4,"ngIf"],[1,"item-title__icon",3,"matTooltipDisabled","matTooltip"],["mat-icon-button","","appMousedownStopPropagation","",3,"matTooltip","disabled","click"]],template:function(e,t){1&e&&(E.Lc(0,Rn,2,5,"mat-label",0),E.Sb(1,"div",1),E.ac("cdkDropListDropped",(function(e){return t.drop(e)})),E.Lc(2,Fn,9,14,"div",2),E.Rb()),2&e&&(E.kc("ngIf",!t.settings.AllowMultiValue),E.Ab(1),E.kc("cdkDropListDisabled",!t.settings.AllowMultiValue||t.disabled)("ngClass",E.pc(5,Nn,!t.settings.AllowMultiValue,t.settings.AllowMultiValue)),E.Ab(1),E.kc("ngForOf",t.selectedEntities)("ngForTrackBy",t.trackByFn))},directives:[D.m,pn.b,D.k,me.a,D.l,ft.g,pn.a,ve.a,ye.a,V.a,Pn.a],pipes:[z.d],styles:[".normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]{padding:0 0 1px;border-bottom:1px solid rgba(0,0,0,.2)}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:hover:not(.disabled){padding:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.normal-list[_ngcontent-%COMP%]   .normal-item.disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.field-label[_ngcontent-%COMP%]{display:block;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:12px;line-height:14px;padding-top:12px;padding-bottom:4px;color:rgba(29,39,61,.44)}.field-label.disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]{height:30px;display:flex;align-items:center;justify-content:space-between}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:first-of-type{height:31px}.normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:first-of-type   .item-actions[_ngcontent-%COMP%], .normal-list[_ngcontent-%COMP%]   .normal-item[_ngcontent-%COMP%]:first-of-type   .item-title[_ngcontent-%COMP%]{margin-top:-2px}.dnd-list[_ngcontent-%COMP%]{border:1px solid #ccc;border-radius:4px;overflow:hidden;margin-bottom:32px}.dnd-item[_ngcontent-%COMP%]{height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.dnd-item[_ngcontent-%COMP%]:not(.disabled){cursor:move}.dnd-item[_ngcontent-%COMP%]:last-child{border:none}.item-title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.item-title__icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.item-title__text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.item-title.disabled[_ngcontent-%COMP%]   .item-title__icon[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.item-title.disabled[_ngcontent-%COMP%]   .item-title__text[_ngcontent-%COMP%]{color:rgba(29,39,61,.24);cursor:default}.item-actions[_ngcontent-%COMP%]{flex-shrink:0}.item-actions[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{width:30px;height:30px;line-height:30px}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),e}();function Vn(e,t){if(1&e){var n=E.Tb();E.Sb(0,"app-entity-default-list",3),E.ac("reorder",(function(e){return E.Ac(n),E.ec(2).reorder(e)}))("removeSelected",(function(e){return E.Ac(n),E.ec(2).removeSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec(2).editEntity(e)}))("deleteEntity",(function(e){return E.Ac(n),E.ec(2).deleteEntity(e)})),E.Rb()}if(2&e){var i=E.ec().ngIf,a=E.ec();E.kc("config",a.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function Gn(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Lc(1,Vn,1,7,"app-entity-default-list",1),E.Sb(2,"app-entity-default-search",2),E.ac("toggleFreeTextMode",(function(){return E.Ac(n),E.ec().toggleFreeTextMode()}))("addSelected",(function(e){return E.Ac(n),E.ec().addSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec().editEntity(e)})),E.Rb(),E.Pb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),E.Ab(1),E.kc("config",a.config)("group",a.group)("control",a.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var Bn=function(e,t,n,i,a,o,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:a,disabled:o,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},qn=function(e){function t(t,n,i,a,r,c){var s=e.call(this,t,n)||this;return s.entityService=i,s.translate=a,s.editRoutingService=r,s.snackBar=c,s.useQuery=!1,s.error$=new o.a(""),s.freeTextMode$=new o.a(!1),s.disableAddNew$=new o.a(!0),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.config.entityCache$=new o.a([]),this.settings$=new o.a(null),this.subscription.add(this.config.field.settings$.pipe(Object(I.a)((function(e){return t.calculateSettings(e)}))).subscribe((function(e){t.settings$.next(e)}))),this.selectedEntities$=Object(ot.a)([this.value$,this.settings$,this.config.entityCache$]).pipe(Object(I.a)((function(e){var n=Object(i.f)(e,3);return An(n[0],n[1].Separator,n[2],t.translate)}))),this.isExpanded$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.subscription.add(this.settings$.subscribe((function(e){var n;null===(n=t.contentTypeMask)||void 0===n||n.destroy(),t.contentTypeMask=new fn(e.EntityType,t.group.controls,t.useQuery?t.updateAddNew.bind(t):t.fetchAvailableEntities.bind(t),null,t.eavService.eavConfig)}))),this.useQuery?this.updateAddNew():this.fetchAvailableEntities(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.settings$.complete(),this.error$.complete(),this.freeTextMode$.complete(),this.disableAddNew$.complete(),this.config.entityCache$.complete(),this.contentTypeMask.destroy(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleFreeTextMode=function(){this.freeTextMode$.next(!this.freeTextMode$.value)},t.prototype.calculateSettings=function(e){var t=Object(i.a)({},e);return null==t.EntityType&&(t.EntityType=""),null==t.AllowMultiValue&&(t.AllowMultiValue=!1),null==t.EnableEdit&&(t.EnableEdit=!0),null==t.EnableCreate&&(t.EnableCreate=!0),null==t.EnableAddExisting&&(t.EnableAddExisting=!0),null==t.EnableRemove&&(t.EnableRemove=!0),null==t.EnableDelete&&(t.EnableDelete=!1),t},t.prototype.fetchAvailableEntities=function(){var e=this;this.updateAddNew();var t=this.contentTypeMask.resolve();this.entityService.getAvailableEntities(this.settings$.value.EnableAddExisting?null:this.control.value,t).subscribe((function(t){e.config.entityCache$.next(t)}))},t.prototype.updateAddNew=function(){var e=this.contentTypeMask.resolve();this.disableAddNew$.next(!e)},t.prototype.reorder=function(e){this.updateValue("reorder",e)},t.prototype.addSelected=function(e){this.updateValue("add",e)},t.prototype.removeSelected=function(e){this.updateValue("delete",e)},t.prototype.editEntity=function(e){var t;t=null==e?{items:[{ContentTypeName:this.contentTypeMask.resolve()}]}:{items:[{EntityId:this.config.entityCache$.value.find((function(t){return t.Value===e})).Id}]},this.editRoutingService.open(this.config.field.index,this.config.entity.entityGuid,t)},t.prototype.deleteEntity=function(e){var t=this,n=this.config.entityCache$.value.find((function(t){return t.Value===e.entityGuid})),i=n.Id.toString(),a=n.Text,o=this.contentTypeMask.resolve();confirm(this.translate.instant("Data.Delete.Question",{title:a,id:i}))&&(this.snackBar.open("Deleting..."),this.entityService.delete(o,i,!1).subscribe({next:function(){t.snackBar.open("Deleted",null,{duration:2e3}),t.removeSelected(e.index),t.fetchAvailableEntities()},error:function(n){t.snackBar.dismiss(),confirm(t.translate.instant("Data.Delete.Question",{title:a,id:i}))&&(t.snackBar.open("Deleting..."),t.entityService.delete(o,i,!0).subscribe((function(n){t.snackBar.open("Deleted",null,{duration:2e3}),t.removeSelected(e.index),t.fetchAvailableEntities()})))}}))},t.prototype.refreshOnChildClosed=function(){var e=this;this.subscription.add(this.editRoutingService.childFormClosed().subscribe((function(){e.fetchAvailableEntities()}))),this.subscription.add(this.editRoutingService.childFormResult(this.config.field.index,this.config.entity.entityGuid).subscribe((function(t){var n=Object.keys(t)[0];e.addSelected(n)})))},t.prototype.updateValue=function(e,t){var n=this,a="string"==typeof this.control.value?gn.a.convertValueToArray(this.control.value,this.settings$.value.Separator):Object(i.g)(this.control.value);switch(e){case"add":a.push(t);break;case"delete":a.splice(t,1);break;case"reorder":var o=t;Object(pn.d)(a,o.previousIndex,o.currentIndex)}if("string"==typeof this.control.value){var r=gn.a.convertArrayToString(a,this.settings$.value.Separator);this.control.patchValue(r)}else this.control.patchValue(a);this.control.dirty||this.control.markAsDirty(),"delete"!==e||a.length||setTimeout((function(){var e;null===(e=n.entitySearchComponent.autocompleteRef)||void 0===e||e.nativeElement.focus()}))},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(un.a),E.Mb(z.e),E.Mb(he.a),E.Mb(L.b))},t.\u0275cmp=E.Gb({type:t,selectors:[["entity-default"]],viewQuery:function(e,t){var n;1&e&&E.Sc(In,!0),2&e&&E.xc(n=E.bc())&&(t.entitySearchComponent=n.first)},features:[E.xb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(E.Lc(0,Gn,3,16,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async"),E.fc(9,"async"),E.fc(10,"async"),E.fc(11,"async"),E.fc(12,"async"),E.fc(13,"async")),2&e&&E.kc("ngIf",E.wc(27,Bn,[E.gc(1,1,t.label$),E.gc(2,3,t.placeholder$),E.gc(3,5,t.required$),E.gc(4,7,t.invalid$),t.control.touched,E.gc(5,9,t.disabled$),E.gc(6,11,t.freeTextMode$),E.gc(7,13,t.settings$),E.gc(8,15,t.selectedEntities$),E.gc(9,17,t.config.entityCache$),E.gc(10,19,t.disableAddNew$),E.gc(11,21,t.isExpanded$),E.gc(12,23,t.error$),E.gc(13,25,t.showValidation$)]))},directives:[D.m,In,jn],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({})],t)}(ae);function Un(e,t){if(1&e){var n=E.Tb();E.Sb(0,"app-entity-default-list",3),E.ac("reorder",(function(e){return E.Ac(n),E.ec(2).reorder(e)}))("removeSelected",(function(e){return E.Ac(n),E.ec(2).removeSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec(2).editEntity(e)}))("deleteEntity",(function(e){return E.Ac(n),E.ec(2).deleteEntity(e)})),E.Rb()}if(2&e){var i=E.ec().ngIf,a=E.ec();E.kc("config",a.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function Hn(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Lc(1,Un,1,7,"app-entity-default-list",1),E.Sb(2,"app-entity-default-search",2),E.ac("toggleFreeTextMode",(function(){return E.Ac(n),E.ec().toggleFreeTextMode()}))("addSelected",(function(e){return E.Ac(n),E.ec().addSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec().editEntity(e)})),E.Rb(),E.Pb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),E.Ab(1),E.kc("config",a.config)("group",a.group)("control",a.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var Qn=function(e,t,n,i,a,o,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:a,disabled:o,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},Wn=function(e){function t(t,n,i,a,o,r){return e.call(this,t,n,i,a,o,r)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateSettings=function(t){var n=e.prototype.calculateSettings.call(this,t);return n.AllowMultiValue=!1,n.EnableRemove=!0,n.AllowMultiValue=!0,n.EnableAddExisting=!1,n.EnableCreate=!1,n.EnableEdit=!1,n.EntityType="ContentGroupReference",n},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(un.a),E.Mb(z.e),E.Mb(he.a),E.Mb(L.b))},t.\u0275cmp=E.Gb({type:t,selectors:[["entity-content-blocks"]],features:[E.xb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(E.Lc(0,Hn,3,16,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async"),E.fc(9,"async"),E.fc(10,"async"),E.fc(11,"async"),E.fc(12,"async"),E.fc(13,"async")),2&e&&E.kc("ngIf",E.wc(27,Qn,[E.gc(1,1,t.label$),E.gc(2,3,t.placeholder$),E.gc(3,5,t.required$),E.gc(4,7,t.invalid$),t.control.touched,E.gc(5,9,t.disabled$),E.gc(6,11,t.freeTextMode$),E.gc(7,13,t.settings$),E.gc(8,15,t.selectedEntities$),E.gc(9,17,t.config.entityCache$),E.gc(10,19,t.disableAddNew$),E.gc(11,21,t.isExpanded$),E.gc(12,23,t.error$),E.gc(13,25,t.showValidation$)]))},directives:[D.m,In,jn],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({})],t)}(qn),Kn=n("gatd");function Xn(e,t){if(1&e){var n=E.Tb();E.Sb(0,"app-entity-default-list",3),E.ac("reorder",(function(e){return E.Ac(n),E.ec(2).reorder(e)}))("removeSelected",(function(e){return E.Ac(n),E.ec(2).removeSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec(2).editEntity(e)}))("deleteEntity",(function(e){return E.Ac(n),E.ec(2).deleteEntity(e)})),E.Rb()}if(2&e){var i=E.ec().ngIf,a=E.ec();E.kc("config",a.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function Yn(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Lc(1,Xn,1,7,"app-entity-default-list",1),E.Sb(2,"app-entity-default-search",2),E.ac("toggleFreeTextMode",(function(){return E.Ac(n),E.ec().toggleFreeTextMode()}))("addSelected",(function(e){return E.Ac(n),E.ec().addSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec().editEntity(e)})),E.Rb(),E.Pb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),E.Ab(1),E.kc("config",a.config)("group",a.group)("control",a.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var Zn=function(e,t,n,i,a,o,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:a,disabled:o,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},Jn=function(e){function t(t,n,i,a,o,r,c){var s=e.call(this,t,n,i,a,o,r)||this;return s.queryService=c,s.useQuery=!0,s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){var n;null===(n=t.paramsMask)||void 0===n||n.destroy(),t.paramsMask=new fn(e.UrlParameters,t.group.controls,t.fetchAvailableEntities.bind(t),null,t.eavService.eavConfig)}))),this.fetchAvailableEntities()},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateSettings=function(t){var n=e.prototype.calculateSettings.call(this,t);return null==n.Query&&(n.Query=""),null!=n.StreamName&&""!==n.StreamName||(n.StreamName="Default"),null==n.UrlParameters&&(n.UrlParameters=""),n},t.prototype.fetchAvailableEntities=function(){var e=this,t=this.settings$.value;if(t.Query){var n=t.StreamName,i=t.Query.includes("/")?t.Query:t.Query+"/"+n,a=this.paramsMask.resolve();this.queryService.getAvailableEntities(i,!0,a).subscribe({next:function(t){if(t)if(t[n]){var i=t[n].map(e.queryEntityMapping.bind(e));e.config.entityCache$.next(i)}else e.error$.next(e.translate.instant("Fields.EntityQuery.QueryStreamNotFound")+n);else e.error$.next(e.translate.instant("Fields.EntityQuery.QueryError"))},error:function(t){console.error(t),console.error(e.translate.instant("Fields.EntityQuery.QueryError")+" - "+t.data)}})}else alert("No query defined for "+this.config.field.name+" - can't load entities")},t.prototype.queryEntityMapping=function(e){return{Id:e.Id,Value:e.Guid,Text:e.Title}},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(un.a),E.Mb(z.e),E.Mb(he.a),E.Mb(L.b),E.Mb(Kn.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["entity-query"]],features:[E.xb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(E.Lc(0,Yn,3,16,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async"),E.fc(9,"async"),E.fc(10,"async"),E.fc(11,"async"),E.fc(12,"async"),E.fc(13,"async")),2&e&&E.kc("ngIf",E.wc(27,Zn,[E.gc(1,1,t.label$),E.gc(2,3,t.placeholder$),E.gc(3,5,t.required$),E.gc(4,7,t.invalid$),t.control.touched,E.gc(5,9,t.disabled$),E.gc(6,11,t.freeTextMode$),E.gc(7,13,t.settings$),E.gc(8,15,t.selectedEntities$),E.gc(9,17,t.config.entityCache$),E.gc(10,19,t.disableAddNew$),E.gc(11,21,t.isExpanded$),E.gc(12,23,t.error$),E.gc(13,25,t.showValidation$)]))},directives:[D.m,In,jn],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({})],t)}(qn),ei=n("Jb3d"),ti=n("Meci");function ni(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",16),E.ac("click",(function(){return E.Ac(n),E.ec(3).toggleAdam(!1,!1)})),E.fc(1,"translate"),E.Nb(2,"mat-icon",17),E.Rb()}if(2&e){var i=E.ec(2).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.Default.AdamTip"))("disabled",i.disabled)}}function ii(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",18),E.ac("click",(function(){return E.Ac(n),E.ec(3).openPagePicker()})),E.fc(1,"translate"),E.Nb(2,"mat-icon",19),E.Rb()}if(2&e){var i=E.ec(2).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.Default.PageTip"))("disabled",i.disabled)}}function ai(e,t){if(1&e&&(E.Sb(0,"button",20),E.fc(1,"translate"),E.Sb(2,"mat-icon"),E.Nc(3,"more_vert"),E.Rb(),E.Rb()),2&e){E.ec();var n=E.yc(6),i=E.ec().ngIf;E.kc("matTooltip",E.gc(1,3,"Fields.Hyperlink.Default.MoreOptions"))("disabled",i.disabled)("matMenuTriggerFor",n)}}function oi(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",21),E.ac("click",(function(){return E.Ac(n),E.ec(3).toggleAdam(!1,!1)})),E.Nb(1,"mat-icon",17),E.Sb(2,"span"),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Rb()}2&e&&(E.Ab(3),E.Oc(E.gc(4,1,"Fields.Hyperlink.Default.MenuAdam")))}function ri(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",21),E.ac("click",(function(){return E.Ac(n),E.ec(3).openPagePicker()})),E.Nb(1,"mat-icon",19),E.Sb(2,"span"),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Rb()}2&e&&(E.Ab(3),E.Oc(E.gc(4,1,"Fields.Hyperlink.Default.MenuPage")))}function ci(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",21),E.ac("click",(function(){return E.Ac(n),E.ec(3).toggleAdam(!0,!0)})),E.Nb(1,"mat-icon",22),E.Sb(2,"span"),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Rb()}2&e&&(E.Ab(3),E.Oc(E.gc(4,1,"Fields.Hyperlink.Default.MenuImage")))}function si(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",21),E.ac("click",(function(){return E.Ac(n),E.ec(3).toggleAdam(!0,!1)})),E.Nb(1,"mat-icon",23),E.Sb(2,"span"),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Rb()}2&e&&(E.Ab(3),E.Oc(E.gc(4,1,"Fields.Hyperlink.Default.MenuDocs")))}function li(e,t){if(1&e&&(E.Sb(0,"div",24),E.Sb(1,"div",25),E.Nc(2),E.Rb(),E.Sb(3,"div",26),E.Sb(4,"a",27),E.Sb(5,"span"),E.Nc(6),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&e){var n=E.ec(2).ngIf;E.Ab(2),E.Oc(n.value),E.Ab(2),E.kc("href",n.preview.url,E.Dc)("matTooltip",n.preview.url),E.Ab(2),E.Oc(n.preview.floatingText)}}function di(e,t){if(1&e&&(E.Sb(0,"a",31),E.Sb(1,"div",32),E.Nb(2,"img",33),E.Rb(),E.Rb()),2&e){var n=E.ec(3).ngIf;E.kc("href",n.preview.thumbnailUrl,E.Dc),E.Ab(2),E.kc("src",n.preview.thumbnailPreviewUrl,E.Dc)}}function ui(e,t){if(1&e&&(E.Sb(0,"mat-icon"),E.Nc(1),E.Rb()),2&e){var n=E.ec(4).ngIf;E.Ab(1),E.Oc(n.preview.icon)}}function pi(e,t){if(1&e&&E.Nb(0,"mat-icon",37),2&e){var n=E.ec(4).ngIf;E.kc("svgIcon",n.preview.icon)}}function fi(e,t){if(1&e&&(E.Sb(0,"a",34),E.Sb(1,"div",35),E.Lc(2,ui,2,1,"mat-icon",0),E.Lc(3,pi,1,1,"mat-icon",36),E.Rb(),E.Rb()),2&e){var n=E.ec(3).ngIf;E.kc("href",n.preview.url,E.Dc)("matTooltip",n.preview.url),E.Ab(2),E.kc("ngIf",n.preview.isKnownType),E.Ab(1),E.kc("ngIf",!n.preview.isKnownType)}}function gi(e,t){if(1&e&&(E.Sb(0,"div",28),E.Lc(1,di,3,2,"a",29),E.Lc(2,fi,4,4,"a",30),E.Rb()),2&e){var n=E.ec(2).ngIf;E.Ab(1),E.kc("ngIf",n.preview.isImage),E.Ab(1),E.kc("ngIf",!n.preview.isImage)}}function bi(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"div",1),E.Lc(2,ni,3,4,"button",2),E.Lc(3,ii,3,4,"button",3),E.Lc(4,ai,4,5,"button",4),E.Rb(),E.Sb(5,"mat-menu",5,6),E.Lc(7,oi,5,3,"button",7),E.Lc(8,ri,5,3,"button",7),E.Lc(9,ci,5,3,"button",7),E.Lc(10,si,5,3,"button",7),E.Rb(),E.Sb(11,"div",8),E.Sb(12,"div",9),E.Sb(13,"mat-card",10),E.Sb(14,"div",11),E.Sb(15,"mat-form-field",12),E.Nb(16,"input",13),E.fc(17,"translate"),E.fc(18,"async"),E.fc(19,"async"),E.Sb(20,"mat-label"),E.Nc(21),E.fc(22,"async"),E.Rb(),E.Rb(),E.Lc(23,li,7,4,"div",14),E.Rb(),E.Lc(24,gi,3,2,"div",15),E.Rb(),E.Rb(),E.Rb(),E.Pb()),2&e){var n=E.ec().ngIf,i=E.ec();E.Ab(2),E.kc("ngIf",n.buttons.includes("adam")),E.Ab(1),E.kc("ngIf",n.buttons.includes("page")),E.Ab(1),E.kc("ngIf",n.buttons.includes("more")),E.Ab(3),E.kc("ngIf",n.settings.ShowAdam),E.Ab(1),E.kc("ngIf",n.settings.ShowPagePicker),E.Ab(1),E.kc("ngIf",n.settings.ShowImageManager),E.Ab(1),E.kc("ngIf",n.settings.ShowFileManager),E.Ab(5),E.kc("formGroup",i.group),E.Ab(1),E.kc("formControlName",i.config.field.name)("matTooltip",E.gc(17,17,"Fields.Hyperlink.Default.Tooltip"))("placeholder",E.gc(18,19,i.placeholder$))("required",E.gc(19,21,i.required$))("config",i.config)("elementType","input"),E.Ab(5),E.Oc(E.gc(22,23,i.label$)),E.Ab(2),E.kc("ngIf",null==n.preview?null:n.preview.floatingText),E.Ab(1),E.kc("ngIf",n.value&&n.preview)}}function hi(e,t){if(1&e&&(E.Qb(0),E.Lc(1,bi,25,25,"ng-container",0),E.fc(2,"async"),E.Pb()),2&e){var n=E.ec();E.Ab(1),E.kc("ngIf",E.gc(2,1,n.open$))}}var mi=function(e,t,n,i,a,o){return{disabled:e,buttons:t,settings:n,value:i,preview:a,showValidation:o}},vi=function(e){function t(t,n,i,a,r){var c=e.call(this,t,n)||this;return c.fileTypeService=i,c.dnnBridgeService=a,c.editRoutingService=r,c.preview$=new o.a({url:"",thumbnailUrl:"",thumbnailPreviewUrl:"",floatingText:"",isImage:!1,isKnownType:!1,icon:""}),c}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.buttons$=this.settings$.pipe(Object(I.a)((function(e){return e.Buttons||"adam,more"}))),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.subscription.add(this.settings$.subscribe((function(e){t.attachAdam(e)}))),this.subscription.add(this.value$.subscribe((function(e){t.setLink(e)})))},t.prototype.ngOnDestroy=function(){this.preview$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.openPagePicker=function(){var e=this.settings$.value;this.dnnBridgeService.open("pagepicker",{CurrentValue:this.control.value,FileFilter:null!=e.FileFilter?e.FileFilter:"",Paths:null!=e.Paths?e.Paths:""},this.pagePickerCallback.bind(this))},t.prototype.pagePickerCallback=function(e){e&&this.control.patchValue("page:"+e.id)},t.prototype.setLink=function(e){var t=this;e&&this.dnnBridgeService.getUrlOfId(e,this.config.entity.header.ContentTypeName,this.config.entity.header.Guid,this.config.field.name).subscribe((function(e){if(e){var n=e.toLowerCase(),i={url:e,floatingText:n.includes("file:")||n.includes("page:")?".../"+e.substring(e.lastIndexOf("/")+1,e.length):"",thumbnailUrl:t.thumbnailUrl(e),thumbnailPreviewUrl:t.thumbnailUrl(e,2),isImage:t.fileTypeService.isImage(e),isKnownType:t.fileTypeService.isKnownType(e),icon:t.fileTypeService.getIconClass(e)};t.preview$.next(i)}}))},t.prototype.thumbnailUrl=function(e,t,n){var i=e;1===t&&(i+="?w=72&h=72&mode=crop"),2===t&&(i+="?w=800&h=800&mode=max");var a=n?'"':"";return a+i+a},t.prototype.toggleAdam=function(e,t){this.config.adam.toggle(e,t)},t.prototype.attachAdam=function(e){var t=this;this.config.adam.onItemClick=function(e){t.setValue(e)},this.config.adam.onItemUpload=function(e){t.setValue(e)},this.config.adam.setConfig({rootSubfolder:e.Paths,fileFilter:e.FileFilter,autoLoad:!0})},t.prototype.setValue=function(e){this.control.patchValue("url"===this.settings$.value.ServerResourceMapping?e.FullPath:"file:"+e.Id)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(ue.a),E.Mb(Qt.a),E.Mb(he.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["hyperlink-default"]],features:[E.xb],decls:7,vars:20,consts:[[4,"ngIf"],[1,"fabs-box"],["mat-mini-fab","","color","accent",3,"matTooltip","disabled","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","click",4,"ngIf"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","matMenuTriggerFor",4,"ngIf"],[1,"menu-box"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngIf"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],[1,"mdc-layout-grid__cell--span-12","hyperlink-card","shadow-bottom-z-1"],[1,"hyperlink-input-link-wrapper"],["appearance","standard","color","accent",3,"formGroup"],["matInput","","matTooltipPosition","above","appPasteClipboardImage","",3,"formControlName","matTooltip","placeholder","required","config","elementType"],["class","hyperlink-floating",4,"ngIf"],["class","preview-wrapper",4,"ngIf"],["mat-mini-fab","","color","accent",3,"matTooltip","disabled","click"],["svgIcon","appleFilled"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","click"],["svgIcon","sitemap"],["mat-mini-fab","","color","primary",3,"matTooltip","disabled","matMenuTriggerFor"],["mat-menu-item","",3,"click"],["svgIcon","file-image"],["svgIcon","file"],[1,"hyperlink-floating"],[1,"hyperlink-floating__value"],[1,"hyperlink-floating__url-box"],["target","_blank",1,"hyperlink-floating__url",3,"href","matTooltip"],[1,"preview-wrapper"],["target","_blank",3,"href",4,"ngIf"],["target","_blank","matTooltipPosition","right",3,"href","matTooltip",4,"ngIf"],["target","_blank",3,"href"],[1,"preview-image-box"],[1,"preview-image",3,"src"],["target","_blank","matTooltipPosition","right",3,"href","matTooltip"],[1,"preview-icon-box"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"]],template:function(e,t){1&e&&(E.Lc(0,hi,3,3,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async")),2&e&&E.kc("ngIf",E.tc(13,mi,E.gc(1,1,t.disabled$),E.gc(2,3,t.buttons$),E.gc(3,5,t.settings$),E.gc(4,7,t.value$),E.gc(5,9,t.preview$),E.gc(6,11,t.showValidation$)))},directives:[D.m,ei.d,ti.a,ft.c,Y.n,Y.g,Rt.b,Y.c,we,Y.m,Y.e,ve.a,Y.t,ft.g,V.a,ye.a,ei.c,ei.a],pipes:[D.b,z.d],styles:[".fabs-box[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:8px;z-index:11;position:fixed;width:800px;pointer-events:none}.fabs-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:16px;pointer-events:auto}.fabs-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:last-of-type{margin-right:32px!important}.menu-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center}.hyperlink-card[_ngcontent-%COMP%]{border-radius:8px}.preview-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;padding-top:8px}.preview-wrapper[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.preview-image-box[_ngcontent-%COMP%]{z-index:100;width:100%;height:auto}.preview-image[_ngcontent-%COMP%]{width:100%;max-height:calc(100vh - 219px - 52px - 24px);height:auto}.preview-icon-box[_ngcontent-%COMP%]{z-index:100;display:flex;align-items:center;justify-content:center;width:80px;height:80px;background-color:rgba(29,39,61,.08)}.preview-icon-box[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:56px;width:56px;height:56px;line-height:56px;color:rgba(29,39,61,.44)}"],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.DropzoneWrapper,ut.a.EavLocalizationWrapper,ut.a.HyperlinkDefaultExpandableWrapper,ut.a.AdamAttachWrapper]})],t)}(ae),yi=n("mpfY"),wi=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){t.attachAdam(e),t.attachAdamValidator(e.Required)})))},t.prototype.ngOnDestroy=function(){var t;null===(t=this.adamValidation)||void 0===t||t.unsubscribe(),e.prototype.ngOnDestroy.call(this)},t.prototype.attachAdam=function(e){this.config.adam.setConfig({allowAssetsInRoot:e.AllowAssetsInRoot,autoLoad:!0,enableSelect:!1,rootSubfolder:e.Paths,fileFilter:e.FileFilter,folderDepth:e.FolderDepth||0,metadataContentTypes:e.MetadataContentTypes})},t.prototype.attachAdamValidator=function(e){var t,n=this;if(!e)return null===(t=this.adamValidation)||void 0===t||t.unsubscribe(),void this.control.setValidators(this.config.field.validation);var a=Object(i.g)(this.config.field.validation,[yi.a.validateAdam()]);this.control.setValidators(a),this.adamValidation=this.config.adam.items$.subscribe((function(e){n.control.adamItems=e.length,n.control.updateValueAndValidity()}))},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["hyperlink-library"]],features:[E.xb],decls:0,vars:0,template:function(e,t){},styles:[""],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.DropzoneWrapper,ut.a.EavLocalizationWrapper,ut.a.HyperlinkLibraryExpandableWrapper,ut.a.AdamAttachWrapper]})],t)}(ae);function xi(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"mat-form-field",1),E.Nb(2,"input",2),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.Sb(7,"mat-label"),E.Nc(8),E.fc(9,"async"),E.Rb(),E.Rb(),E.Nb(10,"app-field-helper-text",3),E.Pb()),2&e){var n=E.ec();E.Ab(1),E.kc("formGroup",n.group),E.Ab(1),E.kc("formControlName",n.config.field.name)("required",E.gc(3,9,n.required$))("placeholder",E.gc(4,11,n.placeholder$))("min",E.gc(5,13,n.min$))("max",E.gc(6,15,n.max$)),E.Ab(6),E.Oc(E.gc(9,17,n.label$)),E.Ab(2),E.kc("config",n.config)("group",n.group)}}var _i=function(e,t){return{disabled:e,showValidation:t}},Ci=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.min$=this.settings$.pipe(Object(I.a)((function(e){return e.Min}))),this.max$=this.settings$.pipe(Object(I.a)((function(e){return e.Max})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["number-default"]],features:[E.xb],decls:3,vars:8,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],["matInput","","type","number",3,"formControlName","required","placeholder","min","max"],[3,"config","group"]],template:function(e,t){1&e&&(E.Lc(0,xi,11,19,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,_i,E.gc(1,1,t.disabled$),E.gc(2,3,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,Rt.b,Y.q,Y.c,Y.m,Y.e,Y.t,ft.g,Ct],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae);function Oi(e,t){if(1&e&&E.Nb(0,"input",5),2&e){var n=E.ec().ngIf,i=E.ec();E.kc("formControlName",i.config.field.name)("placeholder",n.placeholder)("required",n.required)}}function ki(e,t){if(1&e&&(E.Sb(0,"textarea",6),E.Nc(1,"    "),E.Rb()),2&e){var n=E.ec().ngIf,i=E.ec();E.kc("formControlName",i.config.field.name)("rows",n.rowCount)("placeholder",n.placeholder)("required",n.required)}}var Si=function(e){return{"textarea-field":e}};function Mi(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"mat-form-field",1),E.Lc(2,Oi,1,3,"input",2),E.Lc(3,ki,2,4,"textarea",3),E.Sb(4,"mat-label"),E.Nc(5),E.Rb(),E.Rb(),E.Nb(6,"app-field-helper-text",4),E.Pb()),2&e){var n=t.ngIf,i=E.ec();E.Ab(1),E.kc("formGroup",i.group)("ngClass",E.oc(7,Si,n.rowCount>1)),E.Ab(1),E.kc("ngIf",n.rowCount<=1),E.Ab(1),E.kc("ngIf",n.rowCount>1),E.Ab(2),E.Oc(n.label),E.Ab(1),E.kc("config",i.config)("group",i.group)}}var Ii=function(e,t,n,i,a,o){return{rowCount:e,label:t,placeholder:n,required:i,disabled:a,showValidation:o}},Ai=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.rowCount$=this.settings$.pipe(Object(I.a)((function(e){return e.RowCount||1})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["string-default"]],features:[E.xb],decls:7,vars:20,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup","ngClass"],["matInput","",3,"formControlName","placeholder","required",4,"ngIf"],["matInput","",3,"formControlName","rows","placeholder","required",4,"ngIf"],[3,"config","group"],["matInput","",3,"formControlName","placeholder","required"],["matInput","",3,"formControlName","rows","placeholder","required"]],template:function(e,t){1&e&&(E.Lc(0,Mi,7,9,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async")),2&e&&E.kc("ngIf",E.tc(13,Ii,E.gc(1,1,t.rowCount$),E.gc(2,3,t.label$),E.gc(3,5,t.placeholder$),E.gc(4,7,t.required$),E.gc(5,9,t.disabled$),E.gc(6,11,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,D.k,me.a,ft.g,Ct,Rt.b,Y.c,Y.m,Y.e,Y.t],pipes:[D.b],styles:[".textarea-field[_ngcontent-%COMP%]{height:auto}"],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae);function Pi(e,t){if(1&e){var n=E.Tb();E.Sb(0,"app-entity-default-list",3),E.ac("reorder",(function(e){return E.Ac(n),E.ec(2).reorder(e)}))("removeSelected",(function(e){return E.Ac(n),E.ec(2).removeSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec(2).editEntity(e)}))("deleteEntity",(function(e){return E.Ac(n),E.ec(2).deleteEntity(e)})),E.Rb()}if(2&e){var i=E.ec().ngIf,a=E.ec();E.kc("config",a.config)("label",i.label)("required",i.required)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)}}function Ti(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Lc(1,Pi,1,7,"app-entity-default-list",1),E.Sb(2,"app-entity-default-search",2),E.ac("toggleFreeTextMode",(function(){return E.Ac(n),E.ec().toggleFreeTextMode()}))("addSelected",(function(e){return E.Ac(n),E.ec().addSelected(e)}))("editEntity",(function(e){return E.Ac(n),E.ec().editEntity(e)})),E.Rb(),E.Pb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngIf",!i.freeTextMode&&i.selectedEntities.length&&(!i.settings.AllowMultiValue||i.settings.AllowMultiValue&&i.isExpanded)),E.Ab(1),E.kc("config",a.config)("group",a.group)("control",a.control)("label",i.label)("placeholder",i.placeholder)("required",i.required)("invalid",i.invalid)("touched",i.touched)("disabled",i.disabled)("freeTextMode",i.freeTextMode)("settings",i.settings)("selectedEntities",i.selectedEntities)("availableEntities",i.availableEntities)("disableAddNew",i.disableAddNew)("error",i.error)}}var Ri=function(e,t,n,i,a,o,r,c,s,l,d,u,p,f){return{label:e,placeholder:t,required:n,invalid:i,touched:a,disabled:o,freeTextMode:r,settings:c,selectedEntities:s,availableEntities:l,disableAddNew:d,isExpanded:u,error:p,showValidation:f}},$i=function(e){function t(t,n,i,a,o,r,c){return e.call(this,t,n,i,a,o,r,c)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateSettings=function(t){var n=e.prototype.calculateSettings.call(this,t);return null==n.Value&&(n.Value=""),null==n.Label&&(n.Label=""),null==n.EnableTextEntry&&(n.EnableTextEntry=!1),null!=n.Separator&&""!==n.Separator||(n.Separator=","),n},t.prototype.queryEntityMapping=function(e){var t=this.settings$.value;return{Id:e.Id,Value:e[t.Value],Text:e[t.Label]}},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(un.a),E.Mb(z.e),E.Mb(he.a),E.Mb(L.b),E.Mb(Kn.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["string-dropdown-query"]],features:[E.xb],decls:14,vars:42,consts:[[4,"ngIf"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity",4,"ngIf"],[3,"config","group","control","label","placeholder","required","invalid","touched","disabled","freeTextMode","settings","selectedEntities","availableEntities","disableAddNew","error","toggleFreeTextMode","addSelected","editEntity"],[3,"config","label","required","disabled","freeTextMode","settings","selectedEntities","reorder","removeSelected","editEntity","deleteEntity"]],template:function(e,t){1&e&&(E.Lc(0,Ti,3,16,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async"),E.fc(9,"async"),E.fc(10,"async"),E.fc(11,"async"),E.fc(12,"async"),E.fc(13,"async")),2&e&&E.kc("ngIf",E.wc(27,Ri,[E.gc(1,1,t.label$),E.gc(2,3,t.placeholder$),E.gc(3,5,t.required$),E.gc(4,7,t.invalid$),t.control.touched,E.gc(5,9,t.disabled$),E.gc(6,11,t.freeTextMode$),E.gc(7,13,t.settings$),E.gc(8,15,t.selectedEntities$),E.gc(9,17,t.config.entityCache$),E.gc(10,19,t.disableAddNew$),E.gc(11,21,t.isExpanded$),E.gc(12,23,t.error$),E.gc(13,25,t.showValidation$)]))},directives:[D.m,In,jn],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({})],t)}(Jn),Li=n("R7+U");function Ei(e,t){if(1&e&&(E.Sb(0,"mat-option",8),E.Nc(1),E.Rb()),2&e){var n=t.$implicit;E.kc("value",n.value),E.Ab(1),E.Pc(" ",n.label," ")}}function Di(e,t){if(1&e&&(E.Sb(0,"mat-select",6),E.Lc(1,Ei,2,2,"mat-option",7),E.Rb()),2&e){var n=E.ec().ngIf,i=E.ec();E.kc("formControlName",i.config.field.name)("required",n.required)("placeholder",n.placeholder),E.Ab(1),E.kc("ngForOf",n.dropdownOptions)}}function zi(e,t){if(1&e&&E.Nb(0,"input",9),2&e){var n=E.ec().ngIf,i=E.ec();E.kc("formControlName",i.config.field.name)("required",n.required)("placeholder",n.placeholder)}}function Fi(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",10),E.ac("click",(function(){return E.Ac(n),E.ec(2).toggleFreeTextMode()})),E.Sb(1,"mat-icon",11),E.fc(2,"translate"),E.Nc(3),E.Rb(),E.Rb()}if(2&e){var i=E.ec().ngIf;E.kc("disabled",i.disabled),E.Ab(1),E.kc("matTooltip",E.gc(2,3,i.freeTextMode?"Fields.String.Dropdown":"Fields.String.Freetext")),E.Ab(2),E.Pc(" ",i.freeTextMode?"arrow_drop_down_circle":"text_fields"," ")}}function Ni(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"mat-form-field",1),E.Lc(2,Di,2,4,"mat-select",2),E.Lc(3,zi,1,3,"input",3),E.Lc(4,Fi,4,5,"button",4),E.Sb(5,"mat-label"),E.Nc(6),E.Rb(),E.Rb(),E.Nb(7,"app-field-helper-text",5),E.Pb()),2&e){var n=t.ngIf,i=E.ec();E.Ab(1),E.kc("formGroup",i.group),E.Ab(1),E.kc("ngIf",!n.freeTextMode),E.Ab(1),E.kc("ngIf",n.freeTextMode),E.Ab(1),E.kc("ngIf",n.enableTextEntry),E.Ab(2),E.Oc(n.label),E.Ab(1),E.kc("config",i.config)("group",i.group)}}var ji=function(e,t,n,i,a,o,r,c){return{required:e,placeholder:t,label:n,disabled:i,enableTextEntry:a,dropdownOptions:o,freeTextMode:r,showValidation:c}},Vi=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.toggleFreeText$=new o.a(!1),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.enableTextEntry$=this.settings$.pipe(Object(I.a)((function(e){return e.EnableTextEntry||!1}))),this.dropdownOptions$=Object(ot.a)([this.value$,this.settings$]).pipe(Object(I.a)((function(e){var t,n,a,o,r=Object(i.f)(e,2);return t=r[0],a=!1,o=[],(n=r[1].DropdownValues)&&(o=n.replace(/\r/g,"").split("\n").map((function(e){var n=e.split(":"),i=n[1],o=n.shift(),r=n.join(":"),c={label:o,value:r||""===i?r:o};return c.value===t&&(a=!0),c}))),a||o.push({label:t,value:t}),o}))),this.freeTextMode$=Object(ot.a)([this.enableTextEntry$,this.toggleFreeText$]).pipe(Object(I.a)((function(e){var t=Object(i.f)(e,2);return!!t[0]&&t[1]})))},t.prototype.ngOnDestroy=function(){this.toggleFreeText$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleFreeTextMode=function(){this.toggleFreeText$.next(!this.toggleFreeText$.value)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["string-dropdown"]],features:[E.xb],decls:9,vars:26,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],[3,"formControlName","required","placeholder",4,"ngIf"],["matInput","",3,"formControlName","required","placeholder",4,"ngIf"],["matSuffix","","mat-icon-button","","appClickStopPropagation","",3,"disabled","click",4,"ngIf"],[3,"config","group"],[3,"formControlName","required","placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","",3,"formControlName","required","placeholder"],["matSuffix","","mat-icon-button","","appClickStopPropagation","",3,"disabled","click"],[3,"matTooltip"]],template:function(e,t){1&e&&(E.Lc(0,Ni,8,7,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async")),2&e&&E.kc("ngIf",E.vc(17,ji,E.gc(1,1,t.required$),E.gc(2,3,t.placeholder$),E.gc(3,5,t.label$),E.gc(4,7,t.disabled$),E.gc(5,9,t.enableTextEntry$),E.gc(6,11,t.dropdownOptions$),E.gc(7,13,t.freeTextMode$),E.gc(8,15,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,ft.g,Ct,Li.a,Y.m,Y.e,Y.t,D.l,tn.l,Rt.b,Y.c,V.a,ft.h,xe.a,ye.a,ve.a],pipes:[D.b,z.d],styles:[""],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),Gi=n("qvOF");function Bi(e,t){if(1&e&&E.Nb(0,"i"),2&e){var n=E.ec().ngIf;E.Db("icon-preview ",n.previewCss," ",n.value,"")}}function qi(e,t){if(1&e&&(E.Sb(0,"mat-option",9),E.Sb(1,"div",2),E.Nb(2,"i"),E.Sb(3,"span"),E.Nc(4),E.Rb(),E.Rb(),E.Rb()),2&e){var n=t.$implicit,i=E.ec().ngIf;E.kc("value",n.class),E.Ab(2),E.Db("icon-preview ",i.previewCss," ",n.class,""),E.Ab(2),E.Oc(n.label)}}function Ui(e,t){if(1&e&&(E.Qb(0),E.Sb(1,"mat-form-field",1),E.Sb(2,"div",2),E.Lc(3,Bi,1,4,"i",3),E.Nb(4,"input",4),E.fc(5,"async"),E.fc(6,"async"),E.Rb(),E.Sb(7,"mat-autocomplete",null,5),E.Sb(9,"cdk-virtual-scroll-viewport",6),E.Lc(10,qi,5,6,"mat-option",7),E.Rb(),E.Rb(),E.Sb(11,"mat-label"),E.Nc(12),E.fc(13,"async"),E.Rb(),E.Rb(),E.Nb(14,"app-field-helper-text",8),E.Pb()),2&e){var n=t.ngIf,i=E.yc(8),a=E.ec();E.Ab(1),E.kc("formGroup",a.group),E.Ab(2),E.kc("ngIf",n.value),E.Ab(1),E.kc("formControlName",a.config.field.name)("placeholder",E.gc(5,12,a.placeholder$))("required",E.gc(6,14,a.required$))("matAutocomplete",i),E.Ab(5),E.Ic("height",n.filteredIcons.length<6?48*n.filteredIcons.length:240,"px"),E.Ab(1),E.kc("cdkVirtualForOf",n.filteredIcons),E.Ab(2),E.Oc(E.gc(13,16,a.label$)),E.Ab(2),E.kc("config",a.config)("group",a.group)}}var Hi=function(e,t,n,i,a){return{value:e,filteredIcons:t,disabled:n,previewCss:i,showValidation:a}},Qi=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.scriptsLoaderService=i,a.iconOptions$=new o.a([]),a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){var n=e.CssPrefix||"",i=e.ShowPrefix||!1;t.scriptsLoaderService.load((e.Files||"").split("\n"),(function(){var e=function(e,t){var n=[],i={};if(!e)return n;for(var a=t?0:e.length-1,o=0;o<document.styleSheets.length;o++){var r=document.styleSheets[o];if(r){var c=void 0;try{c=r.rules}catch(p){}if(!c)try{c=r.cssRules}catch(p){}if(c)for(var s=0;s<c.length;s++){var l=c[s];if(l.selectorText&&l.selectorText.startsWith(e)){var d=l.selectorText,u=d.substring(0,d.indexOf(":")).replace(".","");i[u]||(n.push({rule:l,class:u,search:null==u?void 0:u.toLowerCase(),label:u.substring(a)}),i[u]=!0)}}}}return n}(n,i);t.iconOptions$.next(e)}))}))),this.previewCss$=this.settings$.pipe(Object(I.a)((function(e){return e.PreviewCss}))),this.filteredIcons$=Object(ot.a)([this.value$,this.iconOptions$]).pipe(Object(I.a)((function(e){var t=Object(i.f)(e,2),n=t[0],a=t[1];return n?a.filter((function(e){var t,i;return null!==(i=null===(t=e.search)||void 0===t?void 0:t.includes(n.toLowerCase()))&&void 0!==i&&i})):a})))},t.prototype.ngOnDestroy=function(){this.iconOptions$.complete(),e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(Dt.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["string-font-icon-picker"]],features:[E.xb],decls:6,vars:17,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],[1,"icon-option"],[3,"class",4,"ngIf"],["matInput","",3,"formControlName","placeholder","required","matAutocomplete"],["auto","matAutocomplete"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],[3,"config","group"],[3,"value"]],template:function(e,t){1&e&&(E.Lc(0,Ui,15,18,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async")),2&e&&E.kc("ngIf",E.sc(11,Hi,E.gc(1,1,t.value$),E.gc(2,3,t.filteredIcons$),E.gc(3,5,t.disabled$),E.gc(4,7,t.previewCss$),E.gc(5,9,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,Rt.b,Y.c,hn.c,Y.m,Y.e,Y.t,hn.a,Gi.d,Gi.a,Gi.c,ft.g,Ct,tn.l],pipes:[D.b],styles:[".icon-option[_ngcontent-%COMP%]{display:flex;align-items:center}.icon-preview[_ngcontent-%COMP%]{display:flex;height:18px;margin-right:8px}"],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),Wi=n("6fnQ"),Ki=n("Q+Kz"),Xi={Token:{ext:".html",prefix:"",suggestion:Ki.c},"C# Razor":{ext:".cshtml",prefix:"_",suggestion:Ki.b}};function Yi(e,t){if(1&e&&(E.Sb(0,"mat-option",8),E.Nc(1),E.Rb()),2&e){var n=t.$implicit;E.kc("value",n),E.Ab(1),E.Pc(" ",n," ")}}function Zi(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"div",1),E.Sb(2,"mat-form-field",2),E.Sb(3,"mat-select",3),E.fc(4,"async"),E.Sb(5,"mat-option",4),E.Nc(6,"(no file selected)"),E.Rb(),E.Lc(7,Yi,2,2,"mat-option",5),E.fc(8,"async"),E.Rb(),E.Sb(9,"mat-label"),E.Nc(10),E.fc(11,"async"),E.Rb(),E.Rb(),E.Sb(12,"button",6),E.ac("click",(function(){return E.Ac(n),E.ec().createTemplate()})),E.fc(13,"async"),E.Sb(14,"mat-icon"),E.Nc(15,"add"),E.Rb(),E.Rb(),E.Rb(),E.Nb(16,"app-field-helper-text",7),E.Pb()}if(2&e){var i=E.ec();E.Ab(2),E.kc("formGroup",i.group),E.Ab(1),E.kc("formControlName",i.config.field.name)("required",E.gc(4,8,i.required$)),E.Ab(4),E.kc("ngForOf",E.gc(8,10,i.templateOptions$)),E.Ab(3),E.Oc(E.gc(11,12,i.label$)),E.Ab(2),E.kc("disabled",E.gc(13,14,i.disabled$)),E.Ab(4),E.kc("config",i.config)("group",i.group)}}var Ji=function(e){return{showValidation:e}},ea=function(e){function t(t,n,i){var a=e.call(this,t,n)||this;return a.assetsService=i,a.templateOptions$=new o.a([]),a.activeSpec=Xi.Token,a.templates=[],a.global=!1,a.resetIfNotFound=!1,a}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.typeWatcher=new fn("[Type]",this.group.controls,this.setFileConfig.bind(this),null),this.locationWatcher=new fn("[Location]",this.group.controls,this.onLocationChange.bind(this),null),this.setFileConfig(this.typeWatcher.resolve()||"Token"),this.onLocationChange(this.locationWatcher.resolve()||null)},t.prototype.ngOnDestroy=function(){this.templateOptions$.complete(),this.typeWatcher.destroy(),this.locationWatcher.destroy(),e.prototype.ngOnDestroy.call(this)},t.prototype.setFileConfig=function(e){this.activeSpec=Xi[e],this.setTemplateOptions()},t.prototype.onLocationChange=function(e){var t=this;this.global="Host File System"===e,this.assetsService.getAll(this.global).subscribe((function(e){t.templates=e,t.resetIfNotFound=!0,t.setTemplateOptions()}))},t.prototype.setTemplateOptions=function(){var e=this,t=this.templates,n=this.activeSpec.ext;t=(t=t.filter((function(e){return!e.includes(".code.")}))).filter((function(e){return e.slice(e.length-n.length)===n})),this.templateOptions$.next(t),this.resetIfNotFound&&!t.find((function(t){return t===e.control.value}))&&this.control.patchValue("")},t.prototype.createTemplate=function(){var e=this,t=prompt("Enter new file name",this.activeSpec.suggestion);if(t){var n="",i=(t=t.replace("\\","/")).lastIndexOf("/");i>-1&&(n=t.substring(0,i+1),t=t.substring(i+1)),t.endsWith(this.activeSpec.ext)||(t+=this.activeSpec.ext),""!==this.activeSpec.prefix&&t[0]!==this.activeSpec.prefix&&(t=this.activeSpec.prefix+t);var a=n+t;this.assetsService.create(a,this.global).subscribe((function(t){!1===t?alert("Server reported that create failed - the file probably already exists"):(e.templates.push(a),e.setTemplateOptions(),e.control.patchValue(a))}))}},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(Wi.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["string-template-picker"]],features:[E.xb],decls:2,vars:5,consts:[[4,"ngIf"],[1,"picker-wrapper"],["appearance","standard","color","accent",3,"formGroup"],[3,"formControlName","required"],["value",""],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","","matTooltip","Create a new file",3,"disabled","click"],[3,"config","group"],[3,"value"]],template:function(e,t){1&e&&(E.Lc(0,Zi,17,16,"ng-container",0),E.fc(1,"async")),2&e&&E.kc("ngIf",E.oc(3,Ji,E.gc(1,1,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,Li.a,Y.m,Y.e,Y.t,tn.l,D.l,ft.g,V.a,ve.a,ye.a,Ct],pipes:[D.b],styles:[".picker-wrapper[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae);function ta(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"mat-form-field",1),E.Sb(2,"input",2),E.ac("blur",(function(){return E.Ac(n),E.ec().clean(!0)})),E.fc(3,"async"),E.fc(4,"async"),E.Rb(),E.Sb(5,"mat-label"),E.Nc(6),E.fc(7,"async"),E.Rb(),E.Rb(),E.Nb(8,"app-field-helper-text",3),E.Pb()}if(2&e){var i=E.ec();E.Ab(1),E.kc("formGroup",i.group),E.Ab(1),E.kc("formControlName",i.config.field.name)("placeholder",E.gc(3,7,i.placeholder$))("required",E.gc(4,9,i.required$)),E.Ab(4),E.Oc(E.gc(7,11,i.label$)),E.Ab(2),E.kc("config",i.config)("group",i.group)}}var na=function(e,t){return{disabled:e,showValidation:t}},ia=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.lastAutoCopy="",i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.settings$.subscribe((function(e){t.autoGenerateMask=e.AutoGenerateMask||null,t.allowSlashes=e.AllowSlashes||!1,null!=t.fieldMaskService&&(t.fieldMaskService.destroy(),t.fieldMaskService=null),t.fieldMaskService=new fn(t.autoGenerateMask,t.group.controls,t.onSourcesChanged.bind(t),t.preClean)}))),this.onSourcesChanged(this.fieldMaskService.resolve()),this.subscription.add(this.control.valueChanges.subscribe((function(e){t.clean(!1)})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.onSourcesChanged=function(e){var t=this.control.value;if(!t||t===this.lastAutoCopy){var n=gn.a.stripNonUrlCharacters(e,this.allowSlashes,!0);n&&(this.lastAutoCopy=n,t!==n&&this.control.patchValue(n))}},t.prototype.preClean=function(e,t){return t.replace("/","-").replace("\\","-")},t.prototype.clean=function(e){var t=this.control.value,n=gn.a.stripNonUrlCharacters(t,this.allowSlashes,e);t!==n&&this.control.patchValue(n)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["string-url-path"]],features:[E.xb],decls:3,vars:8,consts:[[4,"ngIf"],["appearance","standard","color","accent",3,"formGroup"],["matInput","",3,"formControlName","placeholder","required","blur"],[3,"config","group"]],template:function(e,t){1&e&&(E.Lc(0,ta,9,13,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,na,E.gc(1,1,t.disabled$),E.gc(2,3,t.showValidation$)))},directives:[D.m,ft.c,Y.n,Y.g,Rt.b,Y.c,Y.m,Y.e,Y.t,ft.g,Ct],pipes:[D.b],styles:[""],changeDetection:0}),t=Object(i.c)([dt({wrapper:[ut.a.EavLocalizationWrapper]})],t)}(ae),aa=n("qRWW"),oa=n("DHBU"),ra=n("ywpU"),ca=n("DHAC"),sa=n("CYhr");function la(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new sa.a;++t<n;)this.add(e[t])}la.prototype.add=la.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},la.prototype.has=function(e){return this.__data__.has(e)};var da=la,ua=function(e,t){for(var n=-1,i=null==e?0:e.length;++n<i;)if(t(e[n],n,e))return!0;return!1},pa=function(e,t,n,i,a,o){var r=1&n,c=e.length,s=t.length;if(c!=s&&!(r&&s>c))return!1;var l=o.get(e);if(l&&o.get(t))return l==t;var d=-1,u=!0,p=2&n?new da:void 0;for(o.set(e,t),o.set(t,e);++d<c;){var f=e[d],g=t[d];if(i)var b=r?i(g,f,d,t,e,o):i(f,g,d,e,t,o);if(void 0!==b){if(b)continue;u=!1;break}if(p){if(!ua(t,(function(e,t){if(!p.has(t)&&(f===e||a(f,e,n,i,o)))return p.push(t)}))){u=!1;break}}else if(f!==g&&!a(f,g,n,i,o)){u=!1;break}}return o.delete(e),o.delete(t),u},fa=n("GAvS"),ga=n("mY74"),ba=n("HVAe"),ha=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,i){n[++t]=[i,e]})),n},ma=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n},va=fa.a?fa.a.prototype:void 0,ya=va?va.valueOf:void 0,wa=n("BaCy"),xa=Object.prototype.hasOwnProperty,_a=n("EaxY"),Ca=n("SEb4"),Oa=n("TPB+"),ka=n("HuQ3"),Sa="[object Arguments]",Ma="[object Array]",Ia="[object Object]",Aa=Object.prototype.hasOwnProperty,Pa=n("gfy7"),Ta=function(e,t){return function e(t,n,i,a,o){return t===n||(null==t||null==n||!Object(Pa.a)(t)&&!Object(Pa.a)(n)?t!=t&&n!=n:function(e,t,n,i,a,o){var r=Object(Ca.a)(e),c=Object(Ca.a)(t),s=r?Ma:Object(_a.a)(e),l=c?Ma:Object(_a.a)(t),d=(s=s==Sa?Ia:s)==Ia,u=(l=l==Sa?Ia:l)==Ia,p=s==l;if(p&&Object(Oa.a)(e)){if(!Object(Oa.a)(t))return!1;r=!0,d=!1}if(p&&!d)return o||(o=new ca.a),r||Object(ka.a)(e)?pa(e,t,n,i,a,o):function(e,t,n,i,a,o,r){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new ga.a(e),new ga.a(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return Object(ba.a)(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var c=ha;case"[object Set]":if(c||(c=ma),e.size!=t.size&&!(1&i))return!1;var s=r.get(e);if(s)return s==t;i|=2,r.set(e,t);var l=pa(c(e),c(t),i,a,o,r);return r.delete(e),l;case"[object Symbol]":if(ya)return ya.call(e)==ya.call(t)}return!1}(e,t,s,n,i,a,o);if(!(1&n)){var f=d&&Aa.call(e,"__wrapped__"),g=u&&Aa.call(t,"__wrapped__");if(f||g){var b=f?e.value():e,h=g?t.value():t;return o||(o=new ca.a),a(b,h,n,i,o)}}return!!p&&(o||(o=new ca.a),function(e,t,n,i,a,o){var r=1&n,c=Object(wa.a)(e),s=c.length;if(s!=Object(wa.a)(t).length&&!r)return!1;for(var l=s;l--;){var d=c[l];if(!(r?d in t:xa.call(t,d)))return!1}var u=o.get(e);if(u&&o.get(t))return u==t;var p=!0;o.set(e,t),o.set(t,e);for(var f=r;++l<s;){var g=e[d=c[l]],b=t[d];if(i)var h=r?i(b,g,d,t,e,o):i(g,b,d,e,t,o);if(!(void 0===h?g===b||a(g,b,n,i,o):h)){p=!1;break}f||(f="constructor"==d)}if(p&&!f){var m=e.constructor,v=t.constructor;m==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof m&&m instanceof m&&"function"==typeof v&&v instanceof v||(p=!1)}return o.delete(e),o.delete(t),p}(e,t,n,i,a,o))}(t,n,i,a,e,o))}(e,t)},Ra=function(){function e(){}return e.Translate="translate",e.DontTranslate="dontTranslate",e.MissingDefaultLangValue="missingDefaultLangValue",e.LinkReadOnly="linkReadOnly",e.LinkReadWrite="linkReadWrite",e.LinkCopyFrom="linkCopyFrom",e}(),$a=n("OZ4H"),La=function(){function e(){}return e.NoTranslate="NoTranslate",e.FromPrimary="FromPrimary",e.FromOther="FromOther",e.LinkReadOnly="LinkReadOnly",e.LinkShared="LinkShared",e}(),Ea=n("+Isi"),Da=n("nKqi");function za(e,t){1&e&&E.Ob(0)}function Fa(e,t){1&e&&E.Ob(0)}function Na(e,t){1&e&&E.Ob(0)}function ja(e,t){1&e&&E.Ob(0)}function Va(e,t){1&e&&E.Ob(0)}var Ga=function(e){return{"mat-list-item-focus":e}},Ba=function(e){return{primary:e}};function qa(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-list-item",11),E.ac("click",(function(){E.Ac(n);var e=t.i18nKey;return E.ec(2).select(e)})),E.Sb(1,"mat-icon",12),E.Nc(2),E.Rb(),E.Sb(3,"div",13),E.Nc(4),E.fc(5,"translate"),E.Rb(),E.Sb(6,"div",14),E.Nc(7),E.fc(8,"translate"),E.Rb(),E.Rb()}if(2&e){var i=t.icon,a=t.link,o=t.i18nKey,r=E.ec().ngIf,c=E.ec();E.kc("ngClass",E.oc(10,Ga,r.selected.linkType===a)),E.Ab(2),E.Oc(i),E.Ab(2),E.Pc(" ",E.hc(5,4,"LangMenu.Dialog."+o+".Title",E.oc(12,Ba,c.dialogData.defaultLanguage)),""),E.Ab(3),E.Pc(" ",E.hc(8,7,"LangMenu.Dialog."+o+".Body",E.oc(14,Ba,c.dialogData.defaultLanguage)),"")}}var Ua=function(e,t){return{"mat-list-item-focus":e,"mat-list-item--disabled":t}};function Ha(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",16),E.ac("click",(function(){E.Ac(n);var e=t.$implicit;return E.ec(3).selectLanguage(e.key)})),E.Sb(1,"mat-icon",12),E.Nc(2,"language"),E.Rb(),E.Nc(3),E.Rb()}if(2&e){var i=t.$implicit,a=E.ec(2).ngIf,o=E.ec();E.kc("disabled",o.isLanguageDisabled(i.key))("ngClass",E.pc(3,Ua,a.selected.language===i.key,o.isLanguageDisabled(i.key))),E.Ab(3),E.Pc(" ",i.key," ")}}function Qa(e,t){if(1&e&&(E.Sb(0,"div"),E.Sb(1,"div",2),E.Sb(2,"div",3),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Sb(5,"div",4),E.Nc(6),E.fc(7,"translate"),E.Rb(),E.Rb(),E.Sb(8,"mat-action-list"),E.Lc(9,Ha,4,6,"button",15),E.Rb(),E.Rb()),2&e){var n=E.ec().ngIf;E.Ab(3),E.Pc(" ",E.gc(4,3,n.i18nRoot+".Subtitle")," "),E.Ab(3),E.Pc(" ",E.gc(7,5,"LangMenu.Dialog.PickLanguageIntro")," "),E.Ab(3),E.kc("ngForOf",n.languages)}}var Wa=function(e){return{name:e}},Ka=function(e,t){return{link:e,icon:"lock",i18nKey:t}},Xa=function(e,t){return{link:e,icon:"lock_open",i18nKey:t}},Ya=function(e,t){return{link:e,icon:"translate",i18nKey:t}},Za=function(e,t){return{link:e,icon:"link",i18nKey:t}},Ja=function(e,t){return{link:e,icon:"share",i18nKey:t}};function eo(e,t){if(1&e&&(E.Sb(0,"mat-card",1),E.Sb(1,"div",2),E.Sb(2,"div",3),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Sb(5,"div",4),E.Nc(6),E.fc(7,"translate"),E.Rb(),E.Rb(),E.Sb(8,"mat-nav-list",5),E.Lc(9,za,1,0,"ng-container",6),E.Lc(10,Fa,1,0,"ng-container",6),E.Lc(11,Na,1,0,"ng-container",6),E.Lc(12,ja,1,0,"ng-container",6),E.Lc(13,Va,1,0,"ng-container",6),E.Rb(),E.Lc(14,qa,9,16,"ng-template",null,7,E.Mc),E.Lc(16,Qa,10,7,"div",8),E.Sb(17,"mat-dialog-actions",9),E.Sb(18,"button",10),E.Nc(19,"OK"),E.Rb(),E.Rb(),E.Rb()),2&e){var n=t.ngIf,i=E.yc(15),a=E.ec();E.Ab(3),E.Pc(" ",E.hc(4,15,"LangMenu.Dialog.Title",E.oc(20,Wa,a.dialogData.attributeKey))," "),E.Ab(3),E.Pc(" ",E.gc(7,18,"LangMenu.Dialog.Intro")," "),E.Ab(3),E.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",E.pc(22,Ka,a.TranslationLinks.DontTranslate,a.I18nKeys.NoTranslate)),E.Ab(1),E.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",E.pc(25,Xa,a.TranslationLinks.Translate,a.I18nKeys.FromPrimary)),E.Ab(1),E.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",E.pc(28,Ya,a.TranslationLinks.LinkCopyFrom,a.I18nKeys.FromOther)),E.Ab(1),E.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",E.pc(31,Za,a.TranslationLinks.LinkReadOnly,a.I18nKeys.LinkReadOnly)),E.Ab(1),E.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",E.pc(34,Ja,a.TranslationLinks.LinkReadWrite,a.I18nKeys.LinkShared)),E.Ab(3),E.kc("ngIf",n.showLanguages),E.Ab(2),E.kc("disabled",a.isOkDisabled(n.selected))("mat-dialog-close",n.selected)}}var to=function(e,t,n,i){return{languages:e,selected:t,showLanguages:n,i18nRoot:i}},no=function(){function e(e,t,n){this.dialogData=e,this.languageService=t,this.languageInstanceService=n,this.TranslationLinks=Ra,this.I18nKeys=La,this.selected$=new o.a(Object(i.a)({},this.dialogData)),this.showLanguages$=new o.a(""!==this.dialogData.language);var a=function(e){switch(e){case Ra.Translate:return La.FromPrimary;case Ra.DontTranslate:return La.NoTranslate;case Ra.LinkReadOnly:return La.LinkReadOnly;case Ra.LinkReadWrite:return La.LinkShared;case Ra.LinkCopyFrom:return La.FromOther}}(this.dialogData.linkType);this.i18nRoot$=new o.a("LangMenu.Dialog."+a)}return e.prototype.ngOnInit=function(){this.languages$=Object(ot.a)([this.languageService.entities$,this.languageInstanceService.getCurrentLanguage(this.dialogData.formId)]).pipe(Object(I.a)((function(e){var t=Object(i.f)(e,2),n=t[1];return t[0].filter((function(e){return e.key!==n}))})))},e.prototype.ngOnDestroy=function(){this.selected$.complete(),this.showLanguages$.complete(),this.i18nRoot$.complete()},e.prototype.select=function(e){var t=e!==La.FromPrimary&&e!==La.NoTranslate,n=Object(i.a)({},this.selected$.value);t||(n.language=""),n.linkType=function(e){switch(e){case La.FromPrimary:return Ra.Translate;case La.NoTranslate:return Ra.DontTranslate;case La.LinkReadOnly:return Ra.LinkReadOnly;case La.LinkShared:return Ra.LinkReadWrite;case La.FromOther:return Ra.LinkCopyFrom}}(e),this.showLanguages$.next(t),this.selected$.next(n),this.i18nRoot$.next("LangMenu.Dialog."+e)},e.prototype.selectLanguage=function(e){this.selected$.next(Object(i.a)(Object(i.a)({},this.selected$.value),{language:e}))},e.prototype.isOkDisabled=function(e){return""===e.language&&e.linkType!==Ra.Translate&&e.linkType!==Ra.DontTranslate},e.prototype.isLanguageDisabled=function(e){return!this.dialogData.attributes||!aa.a.isEditableTranslationExist(this.dialogData.attributes[this.dialogData.attributeKey],e,this.dialogData.defaultLanguage)},e.\u0275fac=function(t){return new(t||e)(E.Mb($a.a),E.Mb(Ea.a),E.Mb(ra.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-link-to-other-language"]],decls:5,vars:14,consts:[["class","link-other-lang-container u-hide-scrollbar",4,"ngIf"],[1,"link-other-lang-container","u-hide-scrollbar"],[1,"mat-card__header"],[1,"mat-card__title"],[1,"mat-card__description"],["toggle",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["item",""],[4,"ngIf"],["fxLayoutAlign","end center"],["mat-button","","color","accent",3,"disabled","mat-dialog-close"],[3,"ngClass","click"],["matListIcon","","color","accent"],["matLine","",1,"mat-list-item__title"],["matLine","",1,"mat-list-item__body"],["mat-list-item","",3,"disabled","ngClass","click",4,"ngFor","ngForOf"],["mat-list-item","",3,"disabled","ngClass","click"]],template:function(e,t){1&e&&(E.Lc(0,eo,20,37,"mat-card",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async")),2&e&&E.kc("ngIf",E.rc(9,to,E.gc(1,1,t.languages$),E.gc(2,3,t.selected$),E.gc(3,5,t.showLanguages$),E.gc(4,7,t.i18nRoot$)))},directives:[D.m,ti.a,Da.e,D.r,$a.c,j.b,V.a,$a.d,Da.c,D.k,me.a,ye.a,Da.b,tn.j,Da.a,D.l],pipes:[D.b,z.d],styles:[".link-other-lang-container[_ngcontent-%COMP%]{max-height:99vh;overflow-y:scroll}.mat-list-item-focus[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}.mat-list-item--disabled[_ngcontent-%COMP%]{cursor:default;color:rgba(29,39,61,.24)}"],changeDetection:0}),e}(),io=function(){function e(){}return e.calculateSharedInfoMessage=function(t,n){t=e.calculateShortDimensions(t,n);var i=e.calculateEditAndReadDimensions(t),a=i.editableDimensions,o=i.readOnlyDimensions,r="",c=a.length>0,s=o.length>0;return c&&s?r=a.join(", ")+", ("+o.join(", ")+")":c?r=a.join(", "):s&&(r="("+o.join(", ")+")"),r},e.calculateShortDimensions=function(e,t){var n={},i=t.slice(0,t.indexOf("-"));return n[i]=[],n[i].push(i),e.forEach((function(e){var t=e.slice(0,e.indexOf("-")).replace("~","");n[t]||(n[t]=[]),n[t].push(e)})),e.map((function(e){var t=e.slice(0,e.indexOf("-")),i=t.replace("~","");return n[i].length>1?e:t}))},e.calculateEditAndReadDimensions=function(e){var t=[],n=[];return e.forEach((function(e){e.includes("~")?n.push(e.replace("~","")):t.push(e)})),{editableDimensions:t,readOnlyDimensions:n}},e}(),ao=function(e){return{"menu-item-selected":e}};function oo(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",2),E.Sb(1,"button",3),E.Sb(2,"span",2),E.Nc(3),E.fc(4,"translate"),E.Sb(5,"mat-icon",4),E.Nc(6,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"mat-menu",5,6),E.Sb(9,"button",7),E.ac("click",(function(){return E.Ac(n),E.ec(3).translateAll()})),E.Nc(10),E.fc(11,"translate"),E.Rb(),E.Sb(12,"button",7),E.ac("click",(function(){return E.Ac(n),E.ec(3).dontTranslateAll()})),E.Nc(13),E.fc(14,"translate"),E.Rb(),E.Sb(15,"button",7),E.ac("click",(function(){return E.Ac(n),E.ec(3).openLinkToOtherLanguage()})),E.Nc(16),E.fc(17,"translate"),E.Rb(),E.Rb(),E.Rb()}if(2&e){var i=E.yc(8),a=E.ec(2).ngIf,o=E.ec();E.Ab(1),E.kc("matMenuTriggerFor",i),E.Ab(2),E.Pc(" ",E.gc(4,9,"LangMenu.Translate").toUpperCase()," \xa0\xa0 "),E.Ab(4),E.kc("overlapTrigger",!0),E.Ab(2),E.kc("ngClass",E.oc(17,ao,a.translationState.linkType===o.translationLinkConstants.Translate)),E.Ab(1),E.Pc(" ",E.gc(11,11,"LangMenu.TranslateAll")," "),E.Ab(2),E.kc("ngClass",E.oc(19,ao,a.translationState.linkType===o.translationLinkConstants.DontTranslate)),E.Ab(1),E.Pc(" ",E.gc(14,13,"LangMenu.NoTranslateAll")," "),E.Ab(2),E.kc("ngClass",E.oc(21,ao,""!==a.translationState.language)),E.Ab(1),E.Pc(" ",E.gc(17,15,"LangMenu.Link")," ")}}var ro=function(e){return{"shared-languages--disabled":e}},co=function(e){return{languages:e}};function so(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",2),E.Sb(1,"div",8),E.Sb(2,"div",9),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Sb(5,"button",10),E.Sb(6,"mat-icon",4),E.Nc(7,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Sb(8,"mat-menu",5,11),E.Sb(10,"button",7),E.ac("click",(function(){E.Ac(n);var e=E.ec(3);return e.translateUnlink(e.config.field.name)})),E.Nc(11),E.fc(12,"translate"),E.Rb(),E.Sb(13,"button",7),E.ac("click",(function(){E.Ac(n);var e=E.ec(3);return e.linkToDefault(e.config.field.name)})),E.Nc(14),E.fc(15,"translate"),E.Rb(),E.Sb(16,"button",7),E.ac("click",(function(){return E.Ac(n),E.ec(3).openLinkToOtherLanguage()})),E.Nc(17),E.fc(18,"translate"),E.Rb(),E.Rb(),E.Rb()}if(2&e){var i=E.yc(9),a=E.ec(2).ngIf,o=E.ec();E.Ab(1),E.kc("ngClass",o.getTranslationStateClass(a.translationState.linkType)),E.Ab(1),E.kc("ngClass",E.oc(21,ro,a.disabled)),E.Ab(1),E.Pc(" ",a.infoMessageLabel?E.hc(4,12,a.infoMessageLabel,E.oc(23,co,a.infoMessage)):"",""),E.Ab(2),E.kc("disabled",o.fieldConfig.disableI18n||a.defaultLanguageMissingValue)("matMenuTriggerFor",i),E.Ab(3),E.kc("overlapTrigger",!0),E.Ab(2),E.kc("ngClass",E.oc(25,ao,a.translationState.linkType===o.translationLinkConstants.Translate)),E.Ab(1),E.Pc(" ",E.gc(12,15,"LangMenu.Translate")," "),E.Ab(2),E.kc("ngClass",E.oc(27,ao,a.translationState.linkType===o.translationLinkConstants.DontTranslate)),E.Ab(1),E.Pc(" ",E.gc(15,17,"LangMenu.NoTranslate")," "),E.Ab(2),E.kc("ngClass",E.oc(29,ao,""!==a.translationState.language)),E.Ab(1),E.Pc(" ",E.gc(18,19,"LangMenu.Link")," ")}}function lo(e,t){if(1&e&&(E.Qb(0),E.Lc(1,oo,18,23,"div",1),E.Lc(2,so,19,31,"div",1),E.Pb()),2&e){var n=E.ec(2);E.Ab(1),E.kc("ngIf",n.fieldConfig.isParentGroup),E.Ab(1),E.kc("ngIf",!n.fieldConfig.isParentGroup)}}function uo(e,t){if(1&e&&(E.Qb(0),E.Lc(1,lo,3,2,"ng-container",0),E.Pb()),2&e){var n=t.ngIf;E.Ab(1),E.kc("ngIf",n.currentLanguage!==n.defaultLanguage)}}var po=function(e,t,n,i,a,o,r){return{currentLanguage:e,defaultLanguage:t,translationState:n,disabled:i,defaultLanguageMissingValue:a,infoMessage:o,infoMessageLabel:r}},fo=function(){function e(e,t,n,i,a,r){this.dialog=e,this.languageInstanceService=t,this.itemService=n,this.inputTypeService=i,this.contentTypeService=a,this.eavService=r,this.translationLinkConstants=Ra,this.currentLanguage="",this.defaultLanguage="",this.defaultLanguageMissingValue$=new o.a(!1),this.headerGroupSlotIsEmpty=!1,this.translationState$=new o.a({formId:null,linkType:"",language:""}),this.infoMessage$=new o.a(""),this.infoMessageLabel$=new o.a(""),this.subscription=new X.a}return e.prototype.ngOnInit=function(){var e=this;this.fieldConfig=this.config.field,this.control=this.group.controls[this.config.field.name],this.disabled$=this.fieldConfig.isParentGroup?Object(C.a)(!1):this.eavService.formDisabledChange$.asObservable().pipe(Object(A.a)((function(t){return t.formId===e.config.form.formId&&t.entityGuid===e.config.entity.entityGuid})),Object(I.a)((function(t){return e.control.disabled})),Object(J.a)(this.control.disabled),Object(ee.a)()),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.config.form.formId),this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.config.form.formId),this.attributes$=this.itemService.selectAttributesByEntityId(this.config.entity.entityId,this.config.entity.entityGuid),this.subscribeToAttributeValues(),this.subscribeMenuChange(),this.subscribeToItemFromStore(),this.subscribeToContentTypeFromStore(),this.subscribeToCurrentLanguageFromStore(),this.subscribeToDefaultLanguageFromStore(),this.subscribeToEntityHeaderFromStore()},e.prototype.ngOnChanges=function(e){null!=e.toggleTranslateField&&this.currentLanguage!==this.defaultLanguage&&this.control.disabled&&this.translateUnlink(this.config.field.name)},e.prototype.ngOnDestroy=function(){this.defaultLanguageMissingValue$.complete(),this.translationState$.complete(),this.infoMessage$.complete(),this.infoMessageLabel$.complete(),this.subscription.unsubscribe()},e.prototype.openLinkToOtherLanguage=function(){var e=this,t=this.dialog.open(no,{panelClass:"c-link-to-other-language",autoFocus:!1,width:"350px",data:{formId:this.config.form.formId,linkType:this.translationState$.value.linkType,language:this.translationState$.value.language,defaultLanguage:this.defaultLanguage,attributes:this.attributes,attributeKey:this.config.field.name}});t.keydownEvents().subscribe((function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()})),t.afterClosed().subscribe((function(t){t&&e.triggerTranslation(t)}))},e.prototype.translateUnlink=function(e){if(!this.isTranslateDisabled(e)){this.itemService.removeItemAttributeDimension(this.config.entity.entityId,e,this.currentLanguage,this.config.entity.entityGuid);var t=aa.a.getValueTranslation(this.attributes[e],this.defaultLanguage,this.defaultLanguage);if(t){var n=Nt.a.getFieldType(this.config,e);this.itemService.addAttributeValue(this.config.entity.entityId,e,t.value,this.currentLanguage,!1,this.config.entity.entityGuid,n)}else Object(R.a)(this.currentLanguage+": Cant copy value from "+this.defaultLanguage+" because that value does not exist.");this.refreshControlConfig(e)}},e.prototype.linkToDefault=function(e){this.isTranslateDisabled(e)||(this.itemService.removeItemAttributeDimension(this.config.entity.entityId,e,this.currentLanguage,this.config.entity.entityGuid),this.refreshControlConfig(e))},e.prototype.translateAll=function(){var e=this;this.setTranslationState(Ra.Translate,""),Object.keys(this.attributes).forEach((function(t){e.translateUnlink(t)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.dontTranslateAll=function(){var e=this;this.setTranslationState(Ra.DontTranslate,""),Object.keys(this.attributes).forEach((function(t){e.linkToDefault(t)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.copyFromAll=function(e){var t=this;this.setTranslationState(Ra.LinkCopyFrom,e),Object.keys(this.attributes).forEach((function(n){t.copyFrom(e,n)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.copyFrom=function(e,t){if(!this.isTranslateDisabled(t)){var n=aa.a.getValueTranslation(this.attributes[t],e,this.defaultLanguage);n?this.attributes&&aa.a.isEditableOrReadonlyTranslationExist(this.attributes[t],this.currentLanguage,this.defaultLanguage)?this.itemService.updateItemAttributeValue(this.config.entity.entityId,t,n.value,this.currentLanguage,this.defaultLanguage,!1,this.config.entity.entityGuid):this.itemService.addAttributeValue(this.config.entity.entityId,t,n.value,this.currentLanguage,!1,this.config.entity.entityGuid,this.config.field.type):Object(R.a)(this.currentLanguage+": Cant copy value from "+e+" because that value does not exist."),this.refreshControlConfig(t)}},e.prototype.linkReadOnlyAll=function(e){var t=this;this.setTranslationState(Ra.LinkReadOnly,e),Object.keys(this.attributes).forEach((function(n){t.linkReadOnly(e,n)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.linkReadOnly=function(e,t){this.isTranslateDisabled(t)||(this.setTranslationState(Ra.LinkReadOnly,e),this.itemService.removeItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,this.config.entity.entityGuid),this.itemService.addItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,e,this.defaultLanguage,!0,this.config.entity.entityGuid),this.refreshControlConfig(t))},e.prototype.linkReadWriteAll=function(e){var t=this;this.setTranslationState(Ra.LinkReadWrite,e),Object.keys(this.attributes).forEach((function(n){t.linkReadWrite(e,n)})),this.languageInstanceService.triggerLocalizationWrapperMenuChange()},e.prototype.linkReadWrite=function(e,t){this.isTranslateDisabled(t)||(this.setTranslationState(Ra.LinkReadWrite,e),this.itemService.removeItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,this.config.entity.entityGuid),this.itemService.addItemAttributeDimension(this.config.entity.entityId,t,this.currentLanguage,e,this.defaultLanguage,!1,this.config.entity.entityGuid),this.refreshControlConfig(t))},e.prototype.getTranslationStateClass=function(e){switch(e){case Ra.MissingDefaultLangValue:return"eav-localization-missing-default-lang-value";case Ra.Translate:case Ra.LinkCopyFrom:return"eav-localization-translate";case Ra.DontTranslate:return"";case Ra.LinkReadOnly:return"eav-localization-link-read-only";case Ra.LinkReadWrite:return"eav-localization-link-read-write";default:return""}},e.prototype.refreshControlConfig=function(e){this.fieldConfig.isParentGroup||(this.setControlDisable(this.attributes[e],e,this.currentLanguage,this.defaultLanguage),this.readTranslationState(this.attributes[e],e,this.currentLanguage,this.defaultLanguage),this.setInfoMessage(this.attributes[e],e,this.currentLanguage,this.defaultLanguage))},e.prototype.triggerTranslation=function(e){if(!Ta(this.translationState$.value,e))switch(e.linkType){case Ra.Translate:this.fieldConfig.isParentGroup?this.translateAll():this.translateUnlink(this.config.field.name);break;case Ra.DontTranslate:this.fieldConfig.isParentGroup?this.dontTranslateAll():this.linkToDefault(this.config.field.name);break;case Ra.LinkReadOnly:this.fieldConfig.isParentGroup?this.linkReadOnlyAll(e.language):this.linkReadOnly(e.language,this.config.field.name);break;case Ra.LinkReadWrite:this.fieldConfig.isParentGroup?this.linkReadWriteAll(e.language):this.linkReadWrite(e.language,this.config.field.name);break;case Ra.LinkCopyFrom:this.fieldConfig.isParentGroup?this.copyFromAll(e.language):this.copyFrom(e.language,this.config.field.name)}},e.prototype.setTranslationState=function(e,t){var n=Object(i.a)(Object(i.a)({},this.translationState$.value),{linkType:e,language:t});this.translationState$.next(n)},e.prototype.setControlDisable=function(e,t,n,i){this.config.field.disabled||(this.headerGroupSlotIsEmpty?(this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):n===i?(this.group.controls[t].enable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):aa.a.translationExistsInDefault(e,i)?(this.defaultLanguageMissingValue$.next(!1),this.isTranslateDisabled(t)?(this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):aa.a.isEditableTranslationExist(e,n,i)?(this.group.controls[t].enable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid})):(aa.a.isReadonlyTranslationExist(e,n),this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid}))):(this.group.controls[t].disable({emitEvent:!1}),this.eavService.formDisabledChange$.next({formId:this.config.form.formId,entityGuid:this.config.entity.entityGuid}),this.defaultLanguageMissingValue$.next(!0)))},e.prototype.translateAllConfiguration=function(){var e,t=aa.a.translateSettings(this.config.field.fullSettings,this.currentLanguage,this.defaultLanguage);this.config.field.settings=t,this.config.field.label=this.config.field.settings.Name||null,this.config.field.validation=te.a.getValidations(this.config.field.settings),this.config.field.required=te.a.isRequired(this.config.field.settings),null===(e=this.config.field.settings$)||void 0===e||e.next(t)},e.prototype.subscribeToCurrentLanguageFromStore=function(){var e=this;this.subscription.add(this.currentLanguage$.subscribe((function(t){e.currentLanguage=t,e.translateAllConfiguration(),e.refreshControlConfig(e.config.field.name)})))},e.prototype.subscribeToDefaultLanguageFromStore=function(){var e=this;this.subscription.add(this.defaultLanguage$.subscribe((function(t){e.defaultLanguage=t,e.translateAllConfiguration(),e.refreshControlConfig(e.config.field.name)})))},e.prototype.subscribeToAttributeValues=function(){var e=this;this.subscription.add(this.attributes$.subscribe((function(t){e.attributes=t})))},e.prototype.subscribeToEntityHeaderFromStore=function(){var e=this;this.config.entity.header.Group&&this.config.entity.header.Group.SlotCanBeEmpty&&this.subscription.add(this.itemService.selectHeaderByEntityId(this.config.entity.entityId,this.config.entity.entityGuid).subscribe((function(t){t.Group&&!e.fieldConfig.isParentGroup&&(e.headerGroupSlotIsEmpty=t.Group.SlotIsEmpty,e.setControlDisable(e.attributes[e.config.field.name],e.config.field.name,e.currentLanguage,e.defaultLanguage))})))},e.prototype.subscribeToItemFromStore=function(){var e=this;this.subscription.add(this.itemService.selectItemById(this.config.entity.entityId).subscribe((function(t){e.item=t})))},e.prototype.subscribeToContentTypeFromStore=function(){var e=this;this.subscription.add(this.contentTypeService.getContentTypeById(null===this.item.entity.type?this.item.header.ContentTypeName:this.item.entity.type.id).subscribe((function(t){e.contentType=t})))},e.prototype.isTranslateDisabled=function(e){if(!aa.a.translationExistsInDefault(this.attributes[e],this.defaultLanguage))return!0;var t=this.contentType.contentType.attributes.find((function(t){return t.name===e}));if(null==t)return!1;var n=Nt.a.calculateInputType(t,this.inputTypeService);return aa.a.isI18nDisabled(this.inputTypeService,n,t.settings)},e.prototype.readTranslationState=function(e,t,n,i){if(aa.a.translationExistsInDefault(e,i))if(this.isTranslateDisabled(t))this.setTranslationState(Ra.DontTranslate,"");else if(aa.a.isEditableTranslationExist(e,n,i)){var a=aa.a.getValueTranslation(e,n,i).dimensions.filter((function(e){return e.value!==n}));a.length>0?this.setTranslationState(Ra.LinkReadWrite,a[0].value):this.setTranslationState(Ra.Translate,"")}else if(aa.a.isReadonlyTranslationExist(e,n)){var o=aa.a.getValueTranslation(e,n,i).dimensions.filter((function(e){return e.value!==n}));this.setTranslationState(Ra.LinkReadOnly,o[0].value)}else this.setTranslationState(Ra.DontTranslate,"");else this.setTranslationState(Ra.MissingDefaultLangValue,"")},e.prototype.subscribeMenuChange=function(){var e=this;this.subscription.add(this.languageInstanceService.localizationWrapperMenuChange$.subscribe((function(t){e.fieldConfig.isParentGroup||e.refreshControlConfig(e.config.field.name)})))},e.prototype.setInfoMessage=function(e,t,n,i){if(this.isTranslateDisabled(t))return this.infoMessage$.next(""),void this.infoMessageLabel$.next("LangMenu.InAllLanguages");if(!aa.a.translationExistsInDefault(e,i))return this.infoMessage$.next(i),void this.infoMessageLabel$.next("LangMenu.MissingDefaultLangValue");var a=aa.a.isEditableTranslationExist(e,n,i),o=aa.a.isReadonlyTranslationExist(e,n);if(a||o){var r=aa.a.getValueTranslation(e,n,i).dimensions.map((function(e){return e.value}));(r=r.filter((function(e){return!e.includes(n)}))).length>0?(this.infoMessage$.next(io.calculateSharedInfoMessage(r,n)),a?this.infoMessageLabel$.next("LangMenu.In"):o&&this.infoMessageLabel$.next("LangMenu.From")):(this.infoMessage$.next(""),this.infoMessageLabel$.next(""))}else this.infoMessage$.next(""),this.infoMessageLabel$.next("LangMenu.UseDefault")},e.\u0275fac=function(t){return new(t||e)(E.Mb($a.b),E.Mb(ra.a),E.Mb(oa.a),E.Mb(zt.a),E.Mb(Ht),E.Mb(ne.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-translate-group-menu"]],inputs:{config:"config",group:"group",toggleTranslateField:"toggleTranslateField"},features:[E.yb],decls:8,vars:23,consts:[[4,"ngIf"],["fxLayoutAlign","end center",4,"ngIf"],["fxLayoutAlign","end center"],["mat-button","","fxLayoutAlign","end center",3,"matMenuTriggerFor"],[1,"translate-icon"],[3,"overlapTrigger"],["rootMenu","matMenu"],["mat-menu-item","",3,"ngClass","click"],["fxLayoutAlign","end center",1,"shared-languages-container",3,"ngClass"],[1,"shared-languages","mat-caption",3,"ngClass"],["mat-icon-button","",3,"disabled","matMenuTriggerFor"],["rootMenu2","matMenu"]],template:function(e,t){1&e&&(E.Lc(0,uo,2,1,"ng-container",0),E.fc(1,"async"),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async")),2&e&&E.kc("ngIf",E.uc(15,po,E.gc(1,1,t.currentLanguage$),E.gc(2,3,t.defaultLanguage$),E.gc(3,5,t.translationState$),E.gc(4,7,t.disabled$),E.gc(5,9,t.defaultLanguageMissingValue$),E.gc(6,11,t.infoMessage$),E.gc(7,13,t.infoMessageLabel$)))},directives:[D.m,j.b,V.a,ei.c,ye.a,ei.d,ei.a,D.k,me.a],pipes:[D.b,z.d],styles:[".menu-item-selected[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}.eav-localization-lock-open[_ngcontent-%COMP%]{color:green}.eav-localization-missing-default-lang-value[_ngcontent-%COMP%]{color:red}.eav-localization-translate[_ngcontent-%COMP%]{color:green}.eav-localization-link-read-only[_ngcontent-%COMP%], .eav-localization-link-read-write[_ngcontent-%COMP%]{color:#00f}.shared-languages[_ngcontent-%COMP%]{position:relative;left:-6px;top:-1px;padding:0 4px 0 6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-height:16px;cursor:default;color:rgba(29,39,61,.44)}.shared-languages--disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.translate-icon[_ngcontent-%COMP%]{font-size:20px;height:20px;width:20px;line-height:20px}"],changeDetection:0}),e}(),go=["fieldComponent"];function bo(e,t){if(1&e){var n=E.Tb();E.Sb(0,"mat-slide-toggle",14),E.ac("change",(function(){return E.Ac(n),E.ec(2).toggleSlotIsEmpty()})),E.fc(1,"translate"),E.Rb()}if(2&e){var i=E.ec().ngIf;E.kc("checked",!i.slotIsEmpty)("disabled",i.currentLanguage!==i.defaultLanguage)("matTooltip",E.gc(1,4,i.slotIsEmpty?"ItemCard.SlotUsedFalse":"ItemCard.SlotUsedTrue"))("matTooltipDisabled",i.currentLanguage!==i.defaultLanguage)}}function ho(e,t){if(1&e&&E.Nb(0,"app-translate-group-menu",15),2&e){var n=E.ec(2);E.kc("config",n.config)("group",n.group)}}function mo(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",8),E.Sb(1,"div",9),E.ac("click",(function(){return E.Ac(n),E.ec().toggleCollapse()})),E.Sb(2,"div",10),E.Sb(3,"mat-icon"),E.Nc(4),E.Rb(),E.Sb(5,"span",11),E.Nc(6),E.fc(7,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Lc(8,bo,2,6,"mat-slide-toggle",12),E.Lc(9,ho,1,2,"app-translate-group-menu",13),E.Rb()}if(2&e){var i=t.ngIf,a=E.ec();E.kc("ngClass",a.fieldConfig.isParentGroup?"mat-card-header-group-parent":"mat-card-header-group-child"),E.Ab(2),E.kc("ngClass",a.fieldConfig.isParentGroup?"mat-display-1":"mat-body-1"),E.Ab(2),E.Pc(" ",i.collapse?"keyboard_arrow_down":"keyboard_arrow_up"," "),E.Ab(2),E.Pc(" ",i.itemTitle||E.gc(7,6,"ItemCard.DefaultTitle")," "),E.Ab(2),E.kc("ngIf",i.slotCanBeEmpty),E.Ab(1),E.kc("ngIf",a.fieldConfig.isParentGroup)}}function vo(e,t){if(1&e&&(E.Sb(0,"div",16),E.Nb(1,"div",17),E.fc(2,"safeHtml"),E.fc(3,"async"),E.Rb()),2&e){var n=E.ec();E.Ab(1),E.kc("innerHtml",E.gc(2,1,E.gc(3,3,n.description$)),E.Bc)}}var yo=function(e,t,n){return{"mat-card-group-parent":e,"mat-card-group-child":t,"force-hide":n}},wo=function(e,t,n,i,a,o){return{collapse:e,itemTitle:t,currentLanguage:n,defaultLanguage:i,slotCanBeEmpty:a,slotIsEmpty:o}},xo=function(e){return{display:e}},_o=function(){function e(e,t,n){this.itemService=e,this.languageInstanceService=t,this.contentTypeService=n,this.collapse$=new o.a(!1),this.subscription=new X.a}return e.prototype.ngOnInit=function(){var e=this;this.fieldConfig=this.config.field,this.visibleInEditUI$=this.fieldConfig.settings$.pipe(Object(I.a)((function(e){return!1!==e.VisibleInEditUI}))),this.header$=this.itemService.selectHeaderByEntityId(this.config.entity.entityId,this.config.entity.entityGuid),this.collapse$.next(this.fieldConfig.settings$.value.DefaultCollapsed||!1),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.config.form.formId),this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.config.form.formId),this.slotCanBeEmpty$=this.header$.pipe(Object(I.a)((function(e){var t;return(null===(t=null==e?void 0:e.Group)||void 0===t?void 0:t.SlotCanBeEmpty)||!1}))),this.slotIsEmpty$=this.header$.pipe(Object(I.a)((function(e){var t;return(null===(t=null==e?void 0:e.Group)||void 0===t?void 0:t.SlotIsEmpty)||!1}))),this.itemTitle$=this.fieldConfig.isParentGroup?this.currentLanguage$.pipe(Object(I.a)((function(t){var n,i,a,o;e.contentTypeService.getContentTypeById(e.config.entity.contentTypeId).pipe(Object(S.a)(1)).subscribe((function(e){i=e})),e.defaultLanguage$.pipe(Object(S.a)(1)).subscribe((function(e){a=e}));try{var r=i.contentType.metadata.find((function(e){return"ContentType"===e.type.name||"xx ContentType"===e.type.name}));r&&(o=null===(n=aa.a.getValueOrDefault(r.attributes.Label,t,a))||void 0===n?void 0:n.value),o=o||i.contentType.name}catch(c){o=i.contentType.name}return o}))):this.fieldConfig.settings$.pipe(Object(I.a)((function(e){return e.Name}))),this.description$=this.fieldConfig.settings$.pipe(Object(I.a)((function(t){return e.fieldConfig.isParentGroup?null!=t.EditInstructions?t.EditInstructions:"":null!=t.Notes?t.Notes:""}))),this.subscription.add(this.currentLanguage$.subscribe((function(t){var n;e.defaultLanguage$.pipe(Object(S.a)(1)).subscribe((function(e){n=e})),e.translateAllConfiguration(t,n)})))},e.prototype.ngOnDestroy=function(){this.collapse$.complete(),this.subscription.unsubscribe()},e.prototype.toggleCollapse=function(){this.collapse$.next(!this.collapse$.value)},e.prototype.toggleSlotIsEmpty=function(){var e;this.header$.pipe(Object(S.a)(1)).subscribe((function(t){e=t}));var t=Object(i.a)(Object(i.a)({},e),{Group:Object(i.a)(Object(i.a)({},e.Group),{SlotIsEmpty:!e.Group.SlotIsEmpty})});this.itemService.updateItemHeader(this.config.entity.entityId,this.config.entity.entityGuid,t)},e.prototype.translateAllConfiguration=function(e,t){var n,i=aa.a.translateSettings(this.fieldConfig.fullSettings,e,t);this.fieldConfig.settings=i,this.fieldConfig.label=this.fieldConfig.settings.Name||null,this.fieldConfig.validation=te.a.getValidations(this.fieldConfig.settings),this.fieldConfig.required=te.a.isRequired(this.fieldConfig.settings),null===(n=this.config.field.settings$)||void 0===n||n.next(i)},e.\u0275fac=function(t){return new(t||e)(E.Mb(oa.a),E.Mb(ra.a),E.Mb(Ht))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-collapsible-wrapper"]],viewQuery:function(e,t){var n;1&e&&E.Gc(go,!0,E.Q),2&e&&E.xc(n=E.bc())&&(t.fieldComponent=n.first)},inputs:{config:"config",group:"group"},decls:18,vars:36,consts:[[1,"shadow-bottom-z-1",3,"ngClass"],["fxLayout","row","fxLayoutAlign","start center",3,"ngClass",4,"ngIf"],[3,"ngStyle","ngClass"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],["class","mdc-layout-grid__cell--span-12 mat-body-1","align","start",4,"ngIf"],[1,"mdc-layout-grid__cell--span-12"],["fieldComponent",""],["fxLayout","row","fxLayoutAlign","start center",3,"ngClass"],["fxFlex","auto","fxLayoutAlign","start center",3,"click"],["fxLayoutAlign","start center",1,"mat-card-title-group",3,"ngClass"],[1,"title"],["fxLayoutAlign","start center",3,"checked","disabled","matTooltip","matTooltipDisabled","change",4,"ngIf"],["fxLayoutAlign","end center",3,"config","group",4,"ngIf"],["fxLayoutAlign","start center",3,"checked","disabled","matTooltip","matTooltipDisabled","change"],["fxLayoutAlign","end center",3,"config","group"],["align","start",1,"mdc-layout-grid__cell--span-12","mat-body-1"],["appChangeAnchorTarget","",1,"description",3,"innerHtml"]],template:function(e,t){1&e&&(E.Sb(0,"mat-card",0),E.fc(1,"async"),E.Lc(2,mo,10,8,"div",1),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async"),E.Sb(9,"mat-card-content",2),E.fc(10,"async"),E.Sb(11,"div",3),E.Sb(12,"div",4),E.Lc(13,vo,4,5,"div",5),E.fc(14,"async"),E.Sb(15,"div",6),E.Ob(16,null,7),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&e&&(E.kc("ngClass",E.qc(23,yo,t.fieldConfig.isParentGroup,!t.fieldConfig.isParentGroup,!(!0===E.gc(1,5,t.visibleInEditUI$)))),E.Ab(2),E.kc("ngIf",E.tc(27,wo,E.gc(3,7,t.collapse$),E.gc(4,9,t.itemTitle$),E.gc(5,11,t.currentLanguage$),E.gc(6,13,t.defaultLanguage$),E.gc(7,15,t.slotCanBeEmpty$),E.gc(8,17,t.slotIsEmpty$))),E.Ab(7),E.kc("ngStyle",E.oc(34,xo,E.gc(10,19,t.collapse$)?"none":"block"))("ngClass",t.fieldConfig.isParentGroup?"mat-card-content-group-parent":"mat-card-content-group-child"),E.Ab(4),E.kc("ngIf",E.gc(14,21,t.description$)))},directives:[ti.a,D.k,me.a,D.m,ti.b,D.n,me.c,j.c,j.b,j.a,ye.a,pt.a,ve.a,fo,gt],pipes:[D.b,z.d,bt.a],styles:[".mat-card-group-parent[_ngcontent-%COMP%]{padding:0;margin:0;border-radius:8px}@media (max-width:600px){.mat-card-group-parent[_ngcontent-%COMP%]{border-radius:4px}}.mat-card-group-child[_ngcontent-%COMP%]{padding:0;margin:0 0 8px;border-radius:8px}.mat-card-header-group-parent[_ngcontent-%COMP%]{padding:24px 32px;border-radius:8px;height:68px}.mat-card-header-group-parent[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.mat-card-header-group-child[_ngcontent-%COMP%]{padding:20px 32px;border-radius:8px}.mat-card-header-group-child[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:16px;font-weight:400}.mat-card-content-group-parent[_ngcontent-%COMP%]{border-radius:8px;padding-bottom:0}.mat-card-content[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{font-size:14px;padding-left:16px;padding-right:16px}.mat-card-title-group[_ngcontent-%COMP%]{margin:0;cursor:pointer;line-height:20px;color:#0088f4}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important;margin-right:6px}.mdc-layout-grid[_ngcontent-%COMP%]{padding:0 16px 16px}"],changeDetection:0}),e}(),Co=["fieldComponent"],Oo=function(e){return{display:e}},ko=function(e){function t(t,n){var i=e.call(this,t,n)||this;return i.collapse$=new o.a(!0),i}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this)},t.prototype.ngOnDestroy=function(){this.collapse$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleCollapse=function(){this.collapse$.next(!this.collapse$.value)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-collapsible-field-wrapper"]],viewQuery:function(e,t){var n;1&e&&E.Gc(Co,!0,E.Q),2&e&&E.xc(n=E.bc())&&(t.fieldComponent=n.first)},features:[E.xb],decls:14,vars:14,consts:[["fxLayout","row","fxLayoutAlign","start center",1,"mat-card-header-group-child"],["fxFlex","auto","fxLayoutAlign","start center",1,"mat-caption",3,"click"],["fxLayoutAlign","start center",1,"mat-caption","field-title"],[2,"padding-top","8px",3,"ngStyle"],["fieldComponent",""]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.ac("click",(function(){return t.toggleCollapse()})),E.Sb(2,"div",2),E.Sb(3,"mat-icon"),E.Nc(4),E.fc(5,"async"),E.Rb(),E.Sb(6,"span"),E.Nc(7),E.fc(8,"async"),E.fc(9,"async"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Sb(10,"div",3),E.fc(11,"async"),E.Ob(12,null,4),E.Rb()),2&e&&(E.Ab(4),E.Pc(" ",E.gc(5,4,t.collapse$)?"keyboard_arrow_down":"keyboard_arrow_up",""),E.Ab(3),E.Qc("",E.gc(8,6,t.label$),"\xa0",E.gc(9,8,t.required$)?"*":"",""),E.Ab(3),E.kc("ngStyle",E.oc(12,Oo,E.gc(11,10,t.collapse$)?"none":"block")))},directives:[j.c,j.b,j.a,ye.a,D.n,me.c],pipes:[D.b],styles:[".mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px;margin-right:8px}.field-title[_ngcontent-%COMP%]{cursor:pointer}"],changeDetection:0}),t}(ae),So=["fieldComponent"],Mo=function(e){return{"language-wrap__field-short":e}},Io=function(e){return{"language-wrap__translate--hidden":e}},Ao=function(e){function t(t,n,i,a){var r=e.call(this,t,n)||this;return r.languageInstanceService=i,r.editRoutingService=a,r.toggleTranslateField$=new o.a(!1),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.config.form.formId),this.defaultLanguage$=this.languageInstanceService.getDefaultLanguage(this.config.form.formId),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngOnDestroy=function(){this.toggleTranslateField$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.toggleTranslate=function(){var e,t,n;this.open$.pipe(Object(S.a)(1)).subscribe((function(t){e=t})),this.currentLanguage$.pipe(Object(S.a)(1)).subscribe((function(e){t=e})),this.defaultLanguage$.pipe(Object(S.a)(1)).subscribe((function(e){n=e})),!e&&t!==n&&this.toggleTranslateField$.next(!this.toggleTranslateField$.value)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(ra.a),E.Mb(he.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-eav-localization-wrapper"]],viewQuery:function(e,t){var n;1&e&&E.Gc(So,!0,E.Q),2&e&&E.xc(n=E.bc())&&(t.fieldComponent=n.first)},features:[E.xb],decls:10,vars:19,consts:[[1,"language-wrap"],[1,"language-wrap__field",3,"ngClass","dblclick"],["fieldComponent",""],[1,"language-wrap__translate",3,"ngClass","config","group","toggleTranslateField"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.Sb(1,"div",1),E.ac("dblclick",(function(){return t.toggleTranslate()})),E.fc(2,"async"),E.fc(3,"async"),E.Ob(4,null,2),E.Rb(),E.Nb(6,"app-translate-group-menu",3),E.fc(7,"async"),E.fc(8,"async"),E.fc(9,"async"),E.Rb()),2&e&&(E.Ab(1),E.kc("ngClass",E.oc(15,Mo,E.gc(2,5,t.currentLanguage$)!==E.gc(3,7,t.defaultLanguage$))),E.Ab(5),E.kc("ngClass",E.oc(17,Io,E.gc(7,9,t.currentLanguage$)===E.gc(8,11,t.defaultLanguage$)))("config",t.config)("group",t.group)("toggleTranslateField",E.gc(9,13,t.toggleTranslateField$)))},directives:[D.k,me.a,fo],pipes:[D.b],styles:[".language-wrap[_ngcontent-%COMP%]{display:flex;padding-left:16px;padding-right:16px}.language-wrap__field[_ngcontent-%COMP%]{width:100%;height:100%}.language-wrap__field-short[_ngcontent-%COMP%]{width:calc(100% - 48px)}.language-wrap__translate[_ngcontent-%COMP%]{width:48px;position:relative}.language-wrap__translate--hidden[_ngcontent-%COMP%]{width:0}"],changeDetection:0}),t}(ae),Po=[Object(oe.n)("itemShrinkAnimation",[Object(oe.k)("open",Object(oe.l)({height:"30vh"})),Object(oe.k)("closed",Object(oe.l)({height:"0vh"})),Object(oe.m)("open => closed",[Object(oe.e)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)")])]),Object(oe.n)("contentExpandAnimation",[Object(oe.k)("closed",Object(oe.l)({height:"0"})),Object(oe.k)("expanded",Object(oe.l)({height:"calc(100vh - {{bottomPixels}})",maxHeight:"calc(100vh - {{bottomPixels}})"}),{params:{bottomPixels:window.innerWidth>600?"100px":"50px"}}),Object(oe.m)("closed => expanded",[Object(oe.e)("300ms cubic-bezier(0.4, 0.0, 0.2, 1)",Object(oe.h)([Object(oe.l)({height:"0vh",overflow:"hidden"}),Object(oe.l)({height:"calc(100vh - {{bottomPixels}})",overflow:"hidden"})]))],{params:{bottomPixels:window.innerWidth>600?"100px":"50px"}})])],To=["fieldComponent"];function Ro(e,t){if(1&e&&(E.Sb(0,"mat-list-item",21),E.Sb(1,"span",22),E.Nc(2),E.Rb(),E.Rb()),2&e){var n=t.$implicit;E.Ab(2),E.Oc(n.label)}}function $o(e,t){if(1&e&&(E.Sb(0,"mat-list",19),E.Lc(1,Ro,3,1,"mat-list-item",20),E.Rb()),2&e){var n=E.ec().ngIf,i=E.ec();E.Ab(1),E.kc("ngForOf",n.selectedEntities)("ngForTrackBy",i.trackByFn)}}function Lo(e,t){if(1&e&&(E.Sb(0,"span",23),E.Nc(1),E.Rb()),2&e){var n=E.ec().ngIf;E.Ab(1),E.Pc(" ",n.entitiesNumber," ")}}var Eo=function(e,t,n,i,a){return{"mat-caption":e,"mat-empty":t,"mat-error":n,color__primary:i,"color__label-disabled":a}},Do=function(){return{enterDuration:360}},zo=function(e,t){return{"c-ew__preview--invalid":e,"c-ew__preview--disabled":t}};function Fo(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",12),E.Sb(1,"mat-label",13),E.Nc(2),E.Rb(),E.Sb(3,"div",14),E.ac("click",(function(){return E.Ac(n),E.ec().expandDialog()})),E.Sb(4,"div",0),E.Sb(5,"div",15),E.Lc(6,$o,2,2,"mat-list",16),E.Lc(7,Lo,2,1,"span",17),E.Rb(),E.Rb(),E.Rb(),E.Nb(8,"app-field-helper-text",18),E.Rb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngClass",E.sc(10,Eo,i.entitiesNumber,!i.entitiesNumber,i.invalid&&i.touched&&!a.config.field.disabled,!(i.invalid&&i.touched||a.config.field.disabled),a.config.field.disabled)),E.Ab(1),E.Qc(" ",i.label," ",i.required?"*":""," "),E.Ab(1),E.kc("matRippleAnimation",E.nc(16,Do))("ngClass",E.pc(17,zo,i.invalid&&i.touched,a.config.field.disabled)),E.Ab(1),E.kc("ngClass",i.entitiesNumber?"c-ew__preview-container":"c-ew__preview-container--empty"),E.Ab(2),E.kc("ngIf",i.entitiesNumber),E.Ab(1),E.kc("ngIf",i.entitiesNumber>5),E.Ab(1),E.kc("config",a.config)("group",a.group)}}var No=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},jo=function(e){return{bottomPixels:e}},Vo=function(e,t){return{value:e,params:t}},Go=function(){return[]},Bo=function(e,t,n,i,a,o,r){return{label:e,required:t,invalid:n,touched:i,selectedEntities:a,entitiesNumber:o,showValidation:r}},qo=function(e){function t(t,n,i,a){var o=e.call(this,t,n)||this;return o.translate=i,o.editRoutingService=a,o}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.dialogIsOpen$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngAfterViewInit=function(){var e=this;this.selectedEntities$=Object(ot.a)([this.value$,this.settings$,this.config.entityCache$]).pipe(Object(I.a)((function(t){var n=Object(i.f)(t,3);return An(n[0],n[1].Separator,n[2],e.translate)})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.prototype.trackByFn=function(e,t){return t.value},t.prototype.expandDialog=function(){this.config.field.disabled||this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(z.e),E.Mb(he.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-entity-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&E.Gc(To,!0,E.Q),2&e&&E.xc(n=E.bc())&&(t.fieldComponent=n.first)},features:[E.xb],decls:31,vars:47,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24"],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","u-add-scrollbar","u-hide-scrollbar"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],[1,"mdc-layout-grid__cell--span-12","u-border-radius","shadow-bottom-z-1"],["fieldComponent",""],["class","c-ew__preview-holder",4,"ngIf"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label",3,"ngClass"],["matRipple","",1,"c-ew__preview","mat-ripple",3,"matRippleAnimation","ngClass","click"],["fxLayout","row","fxLayoutAlign","start center"],["fxLayout","row",4,"ngIf"],["class","more-entities mat-body-1",4,"ngIf"],[3,"config","group"],["fxLayout","row"],["role","listitem",4,"ngFor","ngForOf","ngForTrackBy"],["role","listitem"],["mat-line",""],[1,"more-entities","mat-body-1"]],template:function(e,t){if(1&e&&(E.Sb(0,"div",0),E.fc(1,"async"),E.Sb(2,"div",1),E.ac("click",(function(){return t.closeDialog()})),E.Rb(),E.Sb(3,"div",2),E.Sb(4,"div",0),E.fc(5,"async"),E.Sb(6,"mat-card",3),E.Sb(7,"button",4),E.ac("click",(function(){return t.closeDialog()})),E.fc(8,"translate"),E.Sb(9,"mat-icon"),E.Nc(10,"arrow_back"),E.Rb(),E.Rb(),E.Sb(11,"span",5),E.Nc(12),E.fc(13,"async"),E.Rb(),E.Rb(),E.Rb(),E.Sb(14,"div"),E.Nb(15,"div"),E.fc(16,"async"),E.Sb(17,"div",6),E.fc(18,"async"),E.Sb(19,"div",7),E.Sb(20,"div",8),E.Sb(21,"mat-card",9),E.Ob(22,null,10),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Lc(24,Fo,9,20,"div",11),E.fc(25,"async"),E.fc(26,"async"),E.fc(27,"async"),E.fc(28,"async"),E.fc(29,"async"),E.fc(30,"async")),2&e){var n=null;E.kc("ngClass",E.gc(1,7,t.dialogIsOpen$)?"c-ew__container":"u-display-none"),E.Ab(4),E.kc("ngClass",E.oc(31,No,E.gc(5,9,t.dialogIsOpen$))),E.Ab(3),E.kc("matTooltip",E.gc(8,11,"Form.Buttons.Return.Tip")),E.Ab(5),E.Oc(E.gc(13,13,t.label$)),E.Ab(3),E.kc("@itemShrinkAnimation",E.gc(16,15,t.dialogIsOpen$)?"closed":"open"),E.Ab(2),E.kc("@contentExpandAnimation",E.pc(35,Vo,E.gc(18,17,t.dialogIsOpen$)?"expanded":"closed",E.oc(33,jo,t.calculateBottomPixels()))),E.Ab(7),E.kc("ngIf",E.uc(39,Bo,E.gc(25,19,t.label$),E.gc(26,21,t.required$),E.gc(27,23,t.invalid$),t.control.touched,(null==(n=E.gc(28,25,t.selectedEntities$))?null:n.slice(0,9))||E.nc(38,Go),(null==(n=E.gc(29,27,t.selectedEntities$))?null:n.length)||0,E.gc(30,29,t.showValidation$)))}},directives:[D.k,me.a,j.c,ti.a,V.a,j.b,ve.a,ye.a,D.m,ft.g,tn.q,Ct,Da.a,D.l,Da.c,tn.j],pipes:[D.b,z.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding:0 0 1px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){padding:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{padding:0;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:36px;cursor:pointer}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:calc(16px + 12px)}.c-ew__preview-label[_ngcontent-%COMP%]{top:-16px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:rgba(29,39,61,.44)}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;align-content:center}.c-ew__preview-container--empty[_ngcontent-%COMP%]{padding:6px 0 0}.c-ew__preview[_ngcontent-%COMP%]   .color__accent[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview[_ngcontent-%COMP%]   .color__primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__label-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.more-entities[_ngcontent-%COMP%]{padding:0 12px;margin-left:10px;background:transparent;color:#1d273d;border-radius:10px;border:1px solid rgba(29,39,61,.44);height:18px;font-size:12px;line-height:16px;flex:0 0 auto;display:flex;align-items:center}.mat-list[_ngcontent-%COMP%]{overflow:hidden;padding:0;margin-top:9px;flex:1 1 auto}.mat-list-item[_ngcontent-%COMP%]{width:auto!important;max-width:200px;flex:0 1 auto;height:20px!important;background:rgba(29,39,61,.08);border-radius:10px;margin-right:10px;margin-bottom:7px;font-size:12px;line-height:16px;white-space:nowrap;text-overflow:ellipsis}"],data:{animation:[Po]},changeDetection:0}),t}(ae),Uo=n("kfUh"),Ho=["fieldComponent"],Qo=["previewContainer"],Wo=["backdrop"],Ko=["dialog"],Xo=function(e,t,n,i,a,o){return{"mat-caption":e,"mat-empty":t,"mat-error":n,color__primary:i,"color__label-disabled":a,"c-ew__preview-label--focused":o}},Yo=function(e,t,n){return{"c-ew__preview--invalid":e,"c-ew__preview--disabled":t,"c-ew__preview--focused":n}},Zo=function(e){return{"c-ew__preview-content--disabled":e}};function Jo(e,t){if(1&e&&(E.Sb(0,"div",11),E.Sb(1,"mat-label",12),E.Nc(2),E.Rb(),E.Sb(3,"div",13),E.Sb(4,"div",14),E.Nb(5,"div",15,16),E.Rb(),E.Rb(),E.Nb(7,"app-field-helper-text",17),E.Rb()),2&e){var n=t.ngIf,i=E.ec();E.Ab(1),E.kc("ngClass",E.tc(7,Xo,n.value,!n.value,n.invalid&&n.touched&&!n.disabled,!(n.invalid&&n.touched||n.disabled),n.disabled,n.focused)),E.Ab(1),E.Qc(" ",n.label," ",n.required?"*":""," "),E.Ab(1),E.kc("ngClass",E.qc(14,Yo,n.invalid&&(n.touched||n.dirty),n.disabled,n.focused)),E.Ab(2),E.kc("ngClass",E.oc(18,Zo,n.disabled)),E.Ab(2),E.kc("config",i.config)("group",i.group)}}var er=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},tr=function(e){return{bottomPixels:e}},nr=function(e,t){return{value:e,params:t}},ir=function(e,t,n,i,a,o,r,c,s){return{value:e,label:t,required:n,invalid:i,touched:a,dirty:o,focused:r,disabled:c,showValidation:s}},ar=function(e){function t(t,n,i,a,o,r,c,s,l){var d=e.call(this,t,n)||this;return d.translateService=i,d.contentTypeService=a,d.inputTypeService=o,d.featureService=r,d.editRoutingService=c,d.dnnBridgeService=s,d.zone=l,d}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngAfterViewInit=function(){var e="field-"+this.config.field.inputType;Object(R.a)("ExpandableWrapper created for:",e),this.connectorCreator=new qt(this.config,this.group,this.previewContainerRef,e,this.eavService,this.translateService,this.contentTypeService,this.inputTypeService,this.featureService,this.editRoutingService,this.dnnBridgeService,this.zone),this.dropzoneDraggingHelper=new Uo.a(this.zone),this.dropzoneDraggingHelper.attach(this.backdropRef.nativeElement),this.dropzoneDraggingHelper.attach(this.dialogRef.nativeElement)},t.prototype.ngOnDestroy=function(){Object(R.a)("ExpandableWrapper destroyed"),this.connectorCreator.destroy(),this.dropzoneDraggingHelper.detach(),e.prototype.ngOnDestroy.call(this)},t.prototype.expandDialog=function(){this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(z.e),E.Mb(Ht),E.Mb(zt.a),E.Mb(ge),E.Mb(he.a),E.Mb(Qt.a),E.Mb(E.A))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&(E.Gc(Ho,!0,E.Q),E.Sc(Qo,!0),E.Sc(Wo,!0),E.Sc(Ko,!0)),2&e&&(E.xc(n=E.bc())&&(t.fieldComponent=n.first),E.xc(n=E.bc())&&(t.previewContainerRef=n.first),E.xc(n=E.bc())&&(t.backdropRef=n.first),E.xc(n=E.bc())&&(t.dialogRef=n.first))},features:[E.xb],decls:31,vars:50,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["backdrop",""],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["dialog",""],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","u-border-radius-bottom","u-add-scrollbar","u-hide-scrollbar"],["fieldComponent",""],["class","c-ew__preview-holder",4,"ngIf"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label",3,"ngClass"],[1,"c-ew__preview",3,"ngClass"],[1,"c-ew__preview-container"],[1,"c-ew__preview-content","u-hide-scrollbar",3,"ngClass"],["previewContainer",""],[3,"config","group"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.fc(1,"async"),E.Sb(2,"div",1,2),E.ac("click",(function(){return t.closeDialog()})),E.Rb(),E.Sb(4,"div",3,4),E.Sb(6,"div",0),E.fc(7,"async"),E.Sb(8,"mat-card",5),E.Sb(9,"button",6),E.ac("click",(function(){return t.closeDialog()})),E.fc(10,"translate"),E.Sb(11,"mat-icon"),E.Nc(12,"arrow_back"),E.Rb(),E.Rb(),E.Sb(13,"span",7),E.Nc(14),E.fc(15,"async"),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div"),E.Nb(17,"div"),E.fc(18,"async"),E.Sb(19,"div",8),E.fc(20,"async"),E.Ob(21,null,9),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Lc(23,Jo,8,20,"div",10),E.fc(24,"async"),E.fc(25,"async"),E.fc(26,"async"),E.fc(27,"async"),E.fc(28,"async"),E.fc(29,"async"),E.fc(30,"async")),2&e&&(E.kc("ngClass",E.gc(1,7,t.open$)?"c-ew__container":"u-display-none"),E.Ab(6),E.kc("ngClass",E.oc(33,er,E.gc(7,9,t.open$))),E.Ab(3),E.kc("matTooltip",E.gc(10,11,"Form.Buttons.Return.Tip")),E.Ab(5),E.Oc(E.gc(15,13,t.label$)),E.Ab(3),E.kc("@itemShrinkAnimation",E.gc(18,15,t.open$)?"closed":"open"),E.Ab(2),E.kc("@contentExpandAnimation",E.pc(37,nr,E.gc(20,17,t.open$)?"expanded":"closed",E.oc(35,tr,t.calculateBottomPixels()))),E.Ab(4),E.kc("ngIf",E.wc(40,ir,[E.gc(24,19,t.value$),E.gc(25,21,t.label$),E.gc(26,23,t.required$),E.gc(27,25,t.invalid$),t.control.touched,t.control.dirty,E.gc(28,27,t.config.field.focused$),E.gc(29,29,t.disabled$),E.gc(30,31,t.showValidation$)])))},directives:[D.k,me.a,j.c,ti.a,V.a,j.b,ve.a,ye.a,D.m,ft.g,Ct],pipes:[D.b,z.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{margin-bottom:1px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){margin-bottom:0;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--focused[_ngcontent-%COMP%]:not(.c-ew__preview--invalid){margin-bottom:0;border-bottom:2px solid #0085f4!important;transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{margin-bottom:0;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 2px;margin-bottom:0;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:36px;max-height:50vh;font-size:14px}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:calc(14px + 12px)}.c-ew__preview-label[_ngcontent-%COMP%]{top:-14px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:rgba(29,39,61,.44)}.c-ew__preview-label--focused[_ngcontent-%COMP%]:not(.mat-error){color:#0087f4!important}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;min-height:inherit;max-height:inherit}.c-ew__preview-content[_ngcontent-%COMP%]{position:relative;overflow-x:hidden;overflow-y:scroll;min-height:36px;max-height:50vh}.c-ew__preview-content--disabled[_ngcontent-%COMP%]{pointer-events:none;color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__accent[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview[_ngcontent-%COMP%]   .color__primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__label-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__container[_ngcontent-%COMP%]{border-radius:8px;position:fixed;z-index:2;top:0;left:0;right:0;bottom:0;width:100%;height:100%;align-items:self-start;justify-content:center;display:flex}.c-ew__dialog[_ngcontent-%COMP%]{flex-direction:column;display:flex;max-width:800px;width:100vw;margin-top:24px;min-height:calc(calc(100vh - 24px - 52px - 24px) + 52px);max-height:calc(calc(100vh - 24px - 52px - 24px) + 52px);padding:0}@media (max-width:600px){.c-ew__dialog[_ngcontent-%COMP%]{margin-top:0;min-height:calc(calc(100vh - 52px) + 52px);max-height:calc(calc(100vh - 52px) + 52px)}}.c-ew__dialog[_ngcontent-%COMP%]   .mat-dialog-actions[_ngcontent-%COMP%]{padding:16px}.c-ew__dialog-content[_ngcontent-%COMP%]{position:relative;background:#e9eaec}"],data:{animation:[Po]},changeDetection:0}),t}(ae),or=["fieldComponent"],rr=function(e){function t(t,n){return e.call(this,t,n)||this}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.visibleInEditUI$=this.settings$.pipe(Object(I.a)((function(e){return!1!==e.VisibleInEditUI})))},t.prototype.ngOnDestroy=function(){e.prototype.ngOnDestroy.call(this)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-hidden-wrapper"]],viewQuery:function(e,t){var n;1&e&&E.Gc(or,!0,E.Q),2&e&&E.xc(n=E.bc())&&(t.fieldComponent=n.first)},features:[E.xb],decls:4,vars:3,consts:[[3,"hidden"],["fieldComponent",""]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.fc(1,"async"),E.Ob(2,null,1),E.Rb()),2&e&&E.kc("hidden",!(!0===E.gc(1,1,t.visibleInEditUI$)))},pipes:[D.b],styles:[""],changeDetection:0}),t}(ae),cr=["fieldComponent"],sr=["backdrop"],lr=["dialog"];function dr(e,t){if(1&e&&(E.Sb(0,"mat-icon",25),E.Nc(1),E.Rb()),2&e){var n=E.ec().ngIf;E.kc("matTooltip",n.preview.url),E.Ab(1),E.Pc(" ",n.preview.icon," ")}}function ur(e,t){if(1&e&&E.Nb(0,"mat-icon",26),2&e){var n=E.ec().ngIf;E.kc("matTooltip",n.preview.url)("svgIcon",n.preview.icon)}}function pr(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",30),E.ac("click",(function(){return E.Ac(n),E.ec(3).expandDialog()})),E.fc(1,"translate"),E.Nb(2,"mat-icon",31),E.Rb()}if(2&e){var i=E.ec(2).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.Default.Fullscreen"))("disabled",i.disabled)}}function fr(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",30),E.ac("click",(function(){return E.Ac(n),E.ec(3).openPagePicker()})),E.fc(1,"translate"),E.Nb(2,"mat-icon",32),E.Rb()}if(2&e){var i=E.ec(2).ngIf;E.kc("matTooltip",E.gc(1,2,"Fields.Hyperlink.Default.PageTip"))("disabled",i.disabled)}}var gr=function(e){return{"c-ew__preview-suffix-text--disabled":e}};function br(e,t){if(1&e&&(E.Sb(0,"div",27),E.Sb(1,"div",28),E.Nc(2),E.fc(3,"translate"),E.Rb(),E.Lc(4,pr,3,4,"button",29),E.Lc(5,fr,3,4,"button",29),E.Rb()),2&e){var n=E.ec().ngIf;E.Ab(1),E.kc("ngClass",E.oc(6,gr,n.disabled)),E.Ab(1),E.Pc(" ",n.adamButton?E.gc(3,4,"Fields.Hyperlink.AdamFileManager.Hint"):""," "),E.Ab(2),E.kc("ngIf",n.adamButton),E.Ab(1),E.kc("ngIf",n.pageButton)}}function hr(e,t){if(1&e&&(E.Sb(0,"div",33),E.Sb(1,"div",34),E.Nc(2),E.Rb(),E.Sb(3,"div",35),E.Sb(4,"a",36),E.Sb(5,"span"),E.Nc(6),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&e){var n=E.ec().ngIf;E.Ab(2),E.Oc(n.value),E.Ab(2),E.kc("href",n.preview.url,E.Dc)("matTooltip",n.preview.url),E.Ab(2),E.Oc(n.preview.floatingText)}}function mr(e,t){1&e&&(E.Sb(0,"div",37),E.Sb(1,"span"),E.Nc(2),E.fc(3,"translate"),E.Rb(),E.Rb()),2&e&&(E.Ab(2),E.Oc(E.gc(3,1,"Fields.Hyperlink.Default.Sponsor")))}var vr=function(e,t){return{"c-ew__preview--disabled":e,"c-ew__preview--last-in-group":t}},yr=function(e,t){return{"icon-before-input":e,"thumbnail-before-input--disabled":t}},wr=function(e){return{"background-image":e}},xr=function(e){return{"mat-form-field-invalid":e}},_r=function(e){return{"mat-error":e}};function Cr(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",11),E.Sb(1,"div",12),E.Sb(2,"div",13),E.ac("click",(function(){return E.Ac(n),E.ec().expandDialog()})),E.fc(3,"translate"),E.Lc(4,dr,2,2,"mat-icon",14),E.Lc(5,ur,1,2,"mat-icon",15),E.Rb(),E.Sb(6,"div",16),E.Sb(7,"div",17),E.Sb(8,"mat-form-field",18),E.Sb(9,"input",19),E.ac("change",(function(e){return E.Ac(n),E.ec().setValue(e)}))("blur",(function(){return E.Ac(n),E.ec().control.markAsTouched()}))("keyup",(function(e){return E.Ac(n),E.ec().setValue(e)})),E.fc(10,"translate"),E.Rb(),E.Lc(11,br,6,8,"div",20),E.Sb(12,"mat-label",0),E.Nc(13),E.Rb(),E.Rb(),E.Lc(14,hr,7,4,"div",21),E.Rb(),E.Sb(15,"div",22),E.Nb(16,"app-field-helper-text",23),E.Lc(17,mr,4,3,"div",24),E.Rb(),E.Rb(),E.Rb(),E.Rb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngClass",E.pc(27,vr,i.disabled,a.config.field.isLastInGroup)),E.Ab(1),E.kc("matTooltip",E.gc(3,23,"Fields.Hyperlink.Default.Fullscreen"))("matTooltipDisabled",i.disabled)("ngClass",E.pc(30,yr,i.value&&!i.preview.isImage,i.disabled))("ngStyle",E.oc(33,wr,i.value&&i.preview.isImage?i.preview.thumbnailUrl:"")),E.Ab(2),E.kc("ngIf",i.value&&!i.preview.isImage&&i.preview.isKnownType),E.Ab(1),E.kc("ngIf",i.value&&!i.preview.isImage&&!i.preview.isKnownType),E.Ab(3),E.kc("ngClass",E.oc(35,xr,i.invalid&&i.touched)),E.Ab(1),E.kc("matTooltip",E.gc(10,25,"Fields.Hyperlink.Default.Tooltip"))("placeholder",i.placeholder)("disabled",i.disabled)("value",i.value)("config",a.config)("elementType","input"),E.Ab(2),E.kc("ngIf",i.adamButton||i.pageButton),E.Ab(1),E.kc("ngClass",E.oc(37,_r,i.invalid&&i.touched)),E.Ab(1),E.Qc(" ",i.label," ",i.required?"*":""," "),E.Ab(1),E.kc("ngIf",i.preview.floatingText),E.Ab(2),E.kc("config",a.config)("group",a.group)("hyperlinkDefaultWrapperFix",!0),E.Ab(1),E.kc("ngIf",i.adamButton)}}var Or=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},kr=function(e){return{bottomPixels:e}},Sr=function(e,t){return{value:e,params:t}},Mr=function(e,t,n,i,a,o,r,c,s,l,d){return{value:e,preview:t,label:n,placeholder:i,invalid:a,touched:o,required:r,disabled:c,adamButton:s,pageButton:l,showValidation:d}},Ir=function(e){function t(t,n,i,a,r,c){var s=e.call(this,t,n)||this;return s.fileTypeService=i,s.dnnBridgeService=a,s.zone=r,s.editRoutingService=c,s.preview$=new o.a({url:"",thumbnailUrl:"",thumbnailPreviewUrl:"",floatingText:"",isImage:!1,isKnownType:!1,icon:""}),s}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){var t=this;e.prototype.ngOnInit.call(this),this.subscription.add(this.value$.subscribe((function(e){t.setLink(e)}))),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid),this.adamButton$=this.settings$.pipe(Object(I.a)((function(e){var t;return null===(t=e.Buttons)||void 0===t?void 0:t.includes("adam")}))),this.pageButton$=this.settings$.pipe(Object(I.a)((function(e){var t;return null===(t=e.Buttons)||void 0===t?void 0:t.includes("page")})))},t.prototype.ngAfterViewInit=function(){this.dropzoneDraggingHelper=new Uo.a(this.zone),this.dropzoneDraggingHelper.attach(this.backdropRef.nativeElement),this.dropzoneDraggingHelper.attach(this.dialogRef.nativeElement)},t.prototype.ngOnDestroy=function(){this.dropzoneDraggingHelper.detach(),this.preview$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.prototype.setValue=function(e){var t=e.target.value;this.control.value!==t&&(this.control.patchValue(t),this.control.markAsDirty())},t.prototype.expandDialog=function(){this.control.disabled||this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.prototype.openPagePicker=function(){var e=this.settings$.value;this.dnnBridgeService.open("pagepicker",{CurrentValue:this.control.value,FileFilter:null!=e.FileFilter?e.FileFilter:"",Paths:null!=e.Paths?e.Paths:""},this.pagePickerCallback.bind(this))},t.prototype.pagePickerCallback=function(e){e&&this.control.patchValue("page:"+e.id)},t.prototype.setLink=function(e){var t=this;e&&this.dnnBridgeService.getUrlOfId(e,this.config.entity.header.ContentTypeName,this.config.entity.header.Guid,this.config.field.name).subscribe((function(e){if(e){var n=e.toLowerCase(),i={url:e,floatingText:n.includes("file:")||n.includes("page:")?".../"+e.substring(e.lastIndexOf("/")+1,e.length):"",thumbnailUrl:t.thumbnailUrl(e,1,!0),thumbnailPreviewUrl:t.thumbnailUrl(e,2,!1),isImage:t.fileTypeService.isImage(e),isKnownType:t.fileTypeService.isKnownType(e),icon:t.fileTypeService.getIconClass(e)};t.preview$.next(i)}}))},t.prototype.thumbnailUrl=function(e,t,n){1===t&&(e+="?w=80&h=80&mode=crop"),2===t&&(e+="?w=500&h=400&mode=max");var i=n?'"':"";return"url("+i+e+i+")"},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(ue.a),E.Mb(Qt.a),E.Mb(E.A),E.Mb(he.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-hyperlink-default-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&(E.Gc(cr,!0,E.Q),E.Sc(sr,!0),E.Sc(lr,!0)),2&e&&(E.xc(n=E.bc())&&(t.fieldComponent=n.first),E.xc(n=E.bc())&&(t.backdropRef=n.first),E.xc(n=E.bc())&&(t.dialogRef=n.first))},features:[E.xb],decls:34,vars:58,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["backdrop",""],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["dialog",""],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","u-border-radius-bottom","u-add-scrollbar","u-hide-scrollbar"],["fieldComponent",""],["class","c-hyperlink-default-field-preview",4,"ngIf"],[1,"c-hyperlink-default-field-preview"],["fxLayout","row","fxLayoutAlign","start start",1,"c-ew__preview",3,"ngClass"],[1,"thumbnail-before-input",3,"matTooltip","matTooltipDisabled","ngClass","ngStyle","click"],["matTooltipPosition","right",3,"matTooltip",4,"ngIf"],["matTooltipPosition","right",3,"matTooltip","svgIcon",4,"ngIf"],["fxFlex","auto",1,"c-ew__preview-field--short"],[1,"hyperlink-input-link-wrapper"],["appearance","standard","color","accent",3,"ngClass"],["matInput","","matTooltipPosition","above","appPasteClipboardImage","",3,"matTooltip","placeholder","disabled","value","config","elementType","change","blur","keyup"],["matSuffix","","fxLayoutAlign","center center",4,"ngIf"],["class","hyperlink-floating","fxHide","","fxShow.gt-xs","",4,"ngIf"],[1,"c__helper-wrapper"],[1,"c__helper-wrapper--left",3,"config","group","hyperlinkDefaultWrapperFix"],["align","end","class","c-ew__preview-field-hint c__helper-wrapper--right","fxHide","","fxShow.gt-xs","",4,"ngIf"],["matTooltipPosition","right",3,"matTooltip"],["matTooltipPosition","right",3,"matTooltip","svgIcon"],["matSuffix","","fxLayoutAlign","center center"],["fxHide","","fxShow.gt-xs","",1,"c-ew__preview-suffix-text",3,"ngClass"],["mat-icon-button","","class","c-ew__preview-suffix-icon","appClickStopPropagation","",3,"matTooltip","disabled","click",4,"ngIf"],["mat-icon-button","","appClickStopPropagation","",1,"c-ew__preview-suffix-icon",3,"matTooltip","disabled","click"],["svgIcon","apple"],["svgIcon","sitemap"],["fxHide","","fxShow.gt-xs","",1,"hyperlink-floating"],[1,"hyperlink-floating__value"],[1,"hyperlink-floating__url-box"],["target","_blank","tabindex","-1",1,"hyperlink-floating__url",3,"href","matTooltip"],["align","end","fxHide","","fxShow.gt-xs","",1,"c-ew__preview-field-hint","c__helper-wrapper--right"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.fc(1,"async"),E.Sb(2,"div",1,2),E.ac("click",(function(){return t.closeDialog()})),E.Rb(),E.Sb(4,"div",3,4),E.Sb(6,"div",0),E.fc(7,"async"),E.Sb(8,"mat-card",5),E.Sb(9,"button",6),E.ac("click",(function(){return t.closeDialog()})),E.fc(10,"translate"),E.Sb(11,"mat-icon"),E.Nc(12,"arrow_back"),E.Rb(),E.Rb(),E.Sb(13,"span",7),E.Nc(14),E.fc(15,"async"),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div"),E.Nb(17,"div"),E.fc(18,"async"),E.Sb(19,"div",8),E.fc(20,"async"),E.Ob(21,null,9),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Lc(23,Cr,18,39,"div",10),E.fc(24,"async"),E.fc(25,"async"),E.fc(26,"async"),E.fc(27,"async"),E.fc(28,"async"),E.fc(29,"async"),E.fc(30,"async"),E.fc(31,"async"),E.fc(32,"async"),E.fc(33,"async")),2&e&&(E.kc("ngClass",E.gc(1,7,t.open$)?"c-ew__container":"u-display-none"),E.Ab(6),E.kc("ngClass",E.oc(39,Or,E.gc(7,9,t.open$))),E.Ab(3),E.kc("matTooltip",E.gc(10,11,"Form.Buttons.Return.Tip")),E.Ab(5),E.Oc(E.gc(15,13,t.label$)),E.Ab(3),E.kc("@itemShrinkAnimation",E.gc(18,15,t.open$)?"closed":"open"),E.Ab(2),E.kc("@contentExpandAnimation",E.pc(43,Sr,E.gc(20,17,t.open$)?"expanded":"closed",E.oc(41,kr,t.calculateBottomPixels()))),E.Ab(4),E.kc("ngIf",E.wc(46,Mr,[E.gc(24,19,t.value$),E.gc(25,21,t.preview$),E.gc(26,23,t.label$),E.gc(27,25,t.placeholder$),E.gc(28,27,t.invalid$),t.control.touched,E.gc(29,29,t.required$),E.gc(30,31,t.disabled$),E.gc(31,33,t.adamButton$),E.gc(32,35,t.pageButton$),E.gc(33,37,t.showValidation$)])))},directives:[D.k,me.a,j.c,ti.a,V.a,j.b,ve.a,ye.a,D.m,D.n,me.c,j.a,ft.c,Rt.b,we,ft.g,Ct,ft.h,me.b,xe.a],pipes:[D.b,z.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding-top:12px}.c-ew__preview-field--short[_ngcontent-%COMP%]{width:1%;padding:0 0 0 8px;margin-top:-4px}.c-ew__preview-field-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.44);font-size:12px}.c-ew__preview--disabled[_ngcontent-%COMP%]   .c-ew__preview-field-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input[_ngcontent-%COMP%]{background-color:rgba(29,39,61,.08);width:78px;height:78px;border-radius:4px;border:1px solid rgba(0,0,0,.2);cursor:pointer;background-repeat:no-repeat;background-position:50%}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input.icon-before-input[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input.icon-before-input[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:56px;height:56px;font-size:56px;line-height:56px;color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input--disabled[_ngcontent-%COMP%]{cursor:default}.c-ew__preview[_ngcontent-%COMP%]   .thumbnail-before-input--disabled[_ngcontent-%COMP%]   .c-ew__preview-field-hint[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview-suffix-text[_ngcontent-%COMP%]{font-size:12px;line-height:14px;color:#4dabf7;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:text}.c-ew__preview-suffix-text--disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}@media (min-width:601px){.c-ew__preview-suffix-icon[_ngcontent-%COMP%]{top:0!important}}@media (max-width:600px){.c-ew__preview-suffix-icon[_ngcontent-%COMP%]{top:10px!important}}.c__helper-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.c__helper-wrapper--left[_ngcontent-%COMP%]{flex:auto;width:1%}.c__helper-wrapper--right[_ngcontent-%COMP%]{flex:0 0 auto;padding-top:.54166667em;padding-left:12px;line-height:16px}"],data:{animation:[Po]},changeDetection:0}),t}(ae),Ar=["fieldComponent"],Pr=["backdrop"],Tr=["dialog"];function Rr(e,t){if(1&e&&(E.Sb(0,"div",22),E.Sb(1,"div",23),E.Nb(2,"mat-icon",24),E.Sb(3,"div",25),E.Nc(4),E.Rb(),E.Rb(),E.Rb()),2&e){var n=E.ec().$implicit;E.Ab(4),E.Oc(n.Name)}}function $r(e,t){if(1&e&&(E.Sb(0,"mat-icon"),E.Nc(1),E.Rb()),2&e){var n=E.ec(3).$implicit;E.Ab(1),E.Oc(n._icon)}}function Lr(e,t){if(1&e&&E.Nb(0,"mat-icon",29),2&e){var n=E.ec(3).$implicit;E.kc("svgIcon",n._icon)}}function Er(e,t){if(1&e&&(E.Sb(0,"div",23),E.Lc(1,$r,2,1,"mat-icon",21),E.Lc(2,Lr,1,1,"mat-icon",28),E.Sb(3,"div",25),E.Nc(4),E.Rb(),E.Rb()),2&e){var n=E.ec(2).$implicit;E.Ab(1),E.kc("ngIf",n._isMaterialIcon),E.Ab(1),E.kc("ngIf",!n._isMaterialIcon),E.Ab(2),E.Oc(n.Name)}}function Dr(e,t){if(1&e&&(E.Sb(0,"div",30),E.Nb(1,"img",31),E.Rb()),2&e){var n=E.ec(2).$implicit;E.Ab(1),E.mc("alt","",n.Id,":",n.Name,""),E.lc("src","",n.FullPath,"?w=78&h=78&mode=crop",E.Dc)}}function zr(e,t){if(1&e&&(E.Sb(0,"div"),E.Lc(1,Er,5,3,"div",26),E.Lc(2,Dr,2,3,"div",27),E.Rb()),2&e){var n=E.ec().$implicit;E.Ab(1),E.kc("ngIf","image"!==n.Type),E.Ab(1),E.kc("ngIf","image"===n.Type)}}function Fr(e,t){if(1&e&&(E.Qb(0),E.Lc(1,Rr,5,1,"div",20),E.Lc(2,zr,3,2,"div",21),E.Pb()),2&e){var n=t.$implicit;E.Ab(1),E.kc("ngIf",n.IsFolder),E.Ab(1),E.kc("ngIf",!n.IsFolder)}}var Nr=function(e,t,n,i,a){return{"mat-caption":e,"mat-empty":t,"mat-error":n,color__primary:i,"color__label-disabled":a}},jr=function(){return{enterDuration:360}},Vr=function(e,t){return{"c-ew__preview--invalid":e,"c-ew__preview--disabled":t}};function Gr(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",11),E.Sb(1,"mat-label",12),E.Nc(2),E.Rb(),E.Sb(3,"div",13),E.ac("click",(function(){return E.Ac(n),E.ec().expandDialog()})),E.Sb(4,"div",0),E.Sb(5,"div",14),E.Lc(6,Fr,3,2,"ng-container",15),E.Rb(),E.Rb(),E.Rb(),E.Sb(7,"div",16),E.Sb(8,"div",17),E.Nb(9,"app-field-helper-text",18),E.Rb(),E.Sb(10,"div",19),E.Sb(11,"span"),E.Nc(12),E.fc(13,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngClass",E.sc(13,Nr,i.itemsNumber>0,0===i.itemsNumber,i.invalid&&!a.config.field.disabled,!i.invalid&&!a.config.field.disabled,a.config.field.disabled)),E.Ab(1),E.Qc(" ",i.label," ",i.required?"*":""," "),E.Ab(1),E.kc("matRippleAnimation",E.nc(19,jr))("ngClass",E.pc(20,Vr,i.invalid,a.config.field.disabled)),E.Ab(1),E.kc("ngClass",i.value?"c-ew__preview-container":"c-ew__preview-container--empty"),E.Ab(2),E.kc("ngForOf",i.items)("ngForTrackBy",a.trackByFn),E.Ab(3),E.kc("config",a.config)("group",a.group),E.Ab(3),E.Oc(E.gc(13,11,"Fields.Hyperlink.Default.Sponsor"))}}var Br=function(e){return{"c-ew__dialog-header mat-elevation-z2":e}},qr=function(e){return{bottomPixels:e}},Ur=function(e,t){return{value:e,params:t}},Hr=function(e,t,n,i,a,o,r){return{value:e,label:t,required:n,invalid:i,items:a,itemsNumber:o,showValidation:r}},Qr=function(e){function t(t,n,i,a){var r=e.call(this,t,n)||this;return r.zone=i,r.editRoutingService=a,r.adamItems$=new o.a([]),r}return Object(i.d)(t,e),t.prototype.ngOnInit=function(){e.prototype.ngOnInit.call(this),this.open$=this.editRoutingService.isExpanded(this.config.field.index,this.config.entity.entityGuid)},t.prototype.ngAfterViewInit=function(){var e=this;this.dropzoneDraggingHelper=new Uo.a(this.zone),this.dropzoneDraggingHelper.attach(this.backdropRef.nativeElement),this.dropzoneDraggingHelper.attach(this.dialogRef.nativeElement),this.subscription.add(this.config.adam.items$.subscribe((function(t){e.adamItems$.next(t)})))},t.prototype.ngOnDestroy=function(){this.dropzoneDraggingHelper.detach(),this.adamItems$.complete(),e.prototype.ngOnDestroy.call(this)},t.prototype.calculateBottomPixels=function(){return window.innerWidth>600?"100px":"50px"},t.prototype.trackByFn=function(e,t){return t.Id},t.prototype.expandDialog=function(){this.config.field.disabled||this.editRoutingService.expand(!0,this.config.field.index,this.config.entity.entityGuid)},t.prototype.closeDialog=function(){this.editRoutingService.expand(!1,this.config.field.index,this.config.entity.entityGuid)},t.\u0275fac=function(e){return new(e||t)(E.Mb(ne.a),E.Mb(ie.a),E.Mb(E.A),E.Mb(he.a))},t.\u0275cmp=E.Gb({type:t,selectors:[["app-hyperlink-library-expandable-wrapper"]],viewQuery:function(e,t){var n;1&e&&(E.Gc(Ar,!0,E.Q),E.Sc(Pr,!0),E.Sc(Tr,!0)),2&e&&(E.xc(n=E.bc())&&(t.fieldComponent=n.first),E.xc(n=E.bc())&&(t.backdropRef=n.first),E.xc(n=E.bc())&&(t.dialogRef=n.first))},features:[E.xb],decls:31,vars:48,consts:[[3,"ngClass"],[1,"c-ew__backdrop",3,"click"],["backdrop",""],["fxLayout","column",1,"c-ew__dialog","mat-elevation-z24","u-border-radius"],["dialog",""],["fxLayout","row",1,"mat-elevation-z0"],["mat-icon-button","","fxLayoutAlign","center center",1,"back-arrow",3,"matTooltip","click"],["fxLayoutAlign","center center",1,"title","mat-display-1"],[1,"c-ew__dialog-content","c-ew__dialog-content--empty","u-border-radius-bottom","u-add-scrollbar","u-hide-scrollbar"],["fieldComponent",""],["class","c-ew__preview-holder",4,"ngIf"],[1,"c-ew__preview-holder"],[1,"c-ew__preview-label","c-ew__color--primary",3,"ngClass"],["matRipple","",1,"c-ew__preview","mat-ripple",3,"matRippleAnimation","ngClass","click"],["fxLayout","row","fxLayoutAlign","start start","fxLayoutGap","2px",1,"c-ew__preview-content"],[4,"ngFor","ngForOf","ngForTrackBy"],["fxLayout","row","fxLayoutAlign","start start",1,"mat-caption","c-ew__preview-hint"],[1,"c__helper-wrapper--left"],[3,"config","group"],["fxHide","","fxShow.gt-xs","",1,"c__helper-wrapper--right","c-ew__preview-hint-text"],["fxLayout","row","fxLayoutAlign","start start",4,"ngIf"],[4,"ngIf"],["fxLayout","row","fxLayoutAlign","start start"],[1,"adam-browse-background-icon"],["svgIcon","folder"],[1,"adam-short-label","mat-caption"],["class","adam-browse-background-icon",4,"ngIf"],["class","adam-browse-background-image",4,"ngIf"],[3,"svgIcon",4,"ngIf"],[3,"svgIcon"],[1,"adam-browse-background-image"],["data-dz-thumbnail","",3,"alt","src"]],template:function(e,t){1&e&&(E.Sb(0,"div",0),E.fc(1,"async"),E.Sb(2,"div",1,2),E.ac("click",(function(){return t.closeDialog()})),E.Rb(),E.Sb(4,"div",3,4),E.Sb(6,"div",0),E.fc(7,"async"),E.Sb(8,"mat-card",5),E.Sb(9,"button",6),E.ac("click",(function(){return t.closeDialog()})),E.fc(10,"translate"),E.Sb(11,"mat-icon"),E.Nc(12,"arrow_back"),E.Rb(),E.Rb(),E.Sb(13,"span",7),E.Nc(14),E.fc(15,"async"),E.Rb(),E.Rb(),E.Rb(),E.Sb(16,"div"),E.Nb(17,"div"),E.fc(18,"async"),E.Sb(19,"div",8),E.fc(20,"async"),E.Ob(21,null,9),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Lc(23,Gr,14,23,"div",10),E.fc(24,"async"),E.fc(25,"async"),E.fc(26,"async"),E.fc(27,"async"),E.fc(28,"async"),E.fc(29,"async"),E.fc(30,"async")),2&e&&(E.kc("ngClass",E.gc(1,7,t.open$)?"c-ew__container":"u-display-none"),E.Ab(6),E.kc("ngClass",E.oc(33,Br,E.gc(7,9,t.open$))),E.Ab(3),E.kc("matTooltip",E.gc(10,11,"Form.Buttons.Return.Tip")),E.Ab(5),E.Oc(E.gc(15,13,t.label$)),E.Ab(3),E.kc("@itemShrinkAnimation",E.gc(18,15,t.open$)?"closed":"open"),E.Ab(2),E.kc("@contentExpandAnimation",E.pc(37,Ur,E.gc(20,17,t.open$)?"expanded":"closed",E.oc(35,qr,t.calculateBottomPixels()))),E.Ab(4),E.kc("ngIf",E.uc(40,Hr,E.gc(24,19,t.value$),E.gc(25,21,t.label$),E.gc(26,23,t.required$),E.gc(27,25,t.invalid$),E.gc(28,27,t.adamItems$).slice(0,9),E.gc(29,29,t.adamItems$).length,E.gc(30,31,t.showValidation$))))},directives:[D.k,me.a,j.c,ti.a,V.a,j.b,ve.a,ye.a,D.m,ft.g,tn.q,j.d,D.l,Ct,me.b],pipes:[D.b,z.d],styles:[".c-ew__preview[_ngcontent-%COMP%]{padding:0 0 12px;border-bottom:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]:hover:not(.c-ew__preview--disabled):not(.c-ew__preview--invalid){padding:0 0 11px;border-bottom:2px solid rgba(0,0,0,.4);transition:none}.c-ew__preview--invalid[_ngcontent-%COMP%]{padding:0 0 11px;border-bottom:2px solid #b00030;transition:none}.c-ew__preview--disabled[_ngcontent-%COMP%]{border:none;cursor:default;padding:0 0 13px;background-image:linear-gradient(90deg,rgba(0,0,0,.2) 0,rgba(0,0,0,.2) 33%,transparent 0);background-position:bottom;background-size:4px 1px;background-repeat:repeat-x}.c-ew__preview[_ngcontent-%COMP%]{position:relative;min-height:37px;max-height:119px;cursor:pointer}.c-ew__preview-holder[_ngcontent-%COMP%]{position:relative;margin-top:calc(26px + 12px)}.c-ew__preview-label[_ngcontent-%COMP%]{top:-26px;position:absolute;z-index:1;pointer-events:none;font-size:12px;line-height:14px}.c-ew__preview-label[_ngcontent-%COMP%]:not(.mat-error){color:rgba(29,39,61,.44)}.c-ew__preview-container[_ngcontent-%COMP%]{overflow:hidden;height:100%;align-content:center}.c-ew__preview-content[_ngcontent-%COMP%]{overflow:hidden}.c-ew__preview-hint[_ngcontent-%COMP%]{width:100%}.c-ew__preview-hint-text[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview--disabled[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%], .c-ew__preview--disabled[_ngcontent-%COMP%]   .c-ew__preview-hint-text[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview--disabled[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]{opacity:.5}.c-ew__preview[_ngcontent-%COMP%]   .c-ew__color--accent[_ngcontent-%COMP%]{color:#0087f4}.c-ew__preview[_ngcontent-%COMP%]   .c-ew__color--primary[_ngcontent-%COMP%]{color:rgba(29,39,61,.44)}.c-ew__preview[_ngcontent-%COMP%]   .color__label-disabled[_ngcontent-%COMP%]{color:rgba(29,39,61,.24)}.c-ew__preview[_ngcontent-%COMP%]   mat-empty[_ngcontent-%COMP%]{height:48px;padding:24px 0 0}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%]{height:78px;width:78px;text-align:center;border-radius:4px;border:1px solid rgba(0,0,0,.2);display:flex;flex-direction:column;align-items:center;justify-content:center}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]{height:78px;width:78px;border-radius:4px;border:1px solid rgba(0,0,0,.2)}.c-ew__preview[_ngcontent-%COMP%]   .adam-browse-background-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:4px}.c__helper-wrapper[_ngcontent-%COMP%]{display:flex;width:100%}.c__helper-wrapper--left[_ngcontent-%COMP%]{flex:auto;width:1%}.c__helper-wrapper--right[_ngcontent-%COMP%]{flex:0 0 auto;padding-top:.54166667em;padding-left:12px;line-height:16px}.adam-short-label[_ngcontent-%COMP%]{max-width:80%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"],data:{animation:[Po]},changeDetection:0}),t}(ae),Wr=function(){function e(e,t){this.resolver=e,this.container=t,this.components={"app-adam-attach-wrapper":it,"app-collapsible-field-wrapper":ko,"app-collapsible-wrapper":_o,"app-dropzone-wrapper":lt,"app-eav-localization-wrapper":Ao,"app-entity-expandable-wrapper":qo,"app-expandable-wrapper":ar,"app-hidden-wrapper":rr,"app-hyperlink-default-expandable-wrapper":Ir,"app-hyperlink-library-expandable-wrapper":Qr,"boolean-default":St,"boolean-tristate":Pt,"custom-default":Tt,"custom-json-editor":Et,"datetime-default":ln,"empty-default":dn,"entity-content-blocks":Wn,"entity-default":qn,"entity-query":Jn,"external-web-component":en,"hyperlink-default":vi,"hyperlink-library":wi,"number-default":Ci,"string-default":Ai,"string-dropdown":Vi,"string-dropdown-query":$i,"string-font-icon-picker":Qi,"string-template-picker":ea,"string-url-path":ia}}return e.prototype.ngOnInit=function(){var e=this;this.container.clear(),this.config.forEach((function(t){Object(R.a)("create controlConfiguration",t),e.createFieldOrGroup(e.container,t)}))},e.prototype.createFieldOrGroup=function(e,t){t.field.fieldGroup?this.createGroupComponents(e,t):(Object(R.a)("create createFieldOrGroup:",t.field.inputType),this.createComponent(e,t))},e.prototype.createGroupComponents=function(e,t){var n=this;t.field.wrappers&&(e=this.createComponentWrappers(e,t,t.field.wrappers)),t.field.fieldGroup.forEach((function(t){n.createFieldOrGroup(e,t)}))},e.prototype.createComponent=function(e,t){var n;t.field.wrappers&&(e=this.createComponentWrappers(e,t,t.field.wrappers)),Object(R.a)("EavFieldDirective createComponent inputType:",t.field.inputType),n=this.readComponentType(t.field.isExternal?Z.a.ExternalWebComponent:t.field.inputType);var i=Reflect.getMetadata("inputTypeAnnotations",n);if(i){i.wrapper&&(e=this.createComponentWrappers(e,t,i.wrapper));var a=this.resolver.resolveComponentFactory(n),o=e.createComponent(a);return Object.assign(o.instance,{group:this.group,config:t}),o}return null},e.prototype.readComponentType=function(e){var t=this.components[e];return void 0===t?(console.error("Missing component class for: "+e),Tt):t},e.prototype.createComponentWrappers=function(e,t,n){var i=this;return n.forEach((function(n){e=i.createWrapper(e,t,n)})),e},e.prototype.createWrapper=function(e,t,n){var i=this.readComponentType(n),a=this.resolver.resolveComponentFactory(i),o=e.createComponent(a);return Object.assign(o.instance,{group:this.group,config:t}),o.instance.fieldComponent},e.\u0275fac=function(t){return new(t||e)(E.Mb(E.j),E.Mb(E.Q))},e.\u0275dir=E.Hb({type:e,selectors:[["","appEavField",""]],inputs:{config:"config",group:"group"}}),e}(),Kr=function(){function e(e){this.formBuilder=e,this.config=[],this.formSubmit=new E.n,this.formValueChange=new E.n,this.form=new Y.f({}),this.subscription=new X.a}return e.prototype.ngOnInit=function(){var e=this;this.createControlsInFormGroup(this.config),this.subscription.add(this.form.valueChanges.subscribe((function(t){e.formValueChange.emit(t)})))},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.submitOutside=function(){Object(R.a)("form save"),this.formSubmit.emit()},e.prototype.patchValue=function(e,t){this.form.patchValue(e,{emitEvent:t})},e.prototype.valueIsChanged=function(e){var t,n,a=!1,o=Object.keys(e);try{for(var r=Object(i.h)(o),c=r.next();!c.done;c=r.next()){var s=c.value;if(e[s]!==this.form.value[s]){a=!0;break}}}catch(l){t={error:l}}finally{try{c&&!c.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}return Object(R.a)("VALUECHANGED:",a,"VALUES:",e,"FORM VALUES:",this.form.value),a},e.prototype.createControlsInFormGroup=function(e){var t=this;try{return e.forEach((function(e){var n=e.field;n.fieldGroup?t.createControlsInFormGroup(n.fieldGroup):t.form.addControl(e.field.name,t.createControl(e))})),this.form}catch(n){throw console.error("Error creating form controls: "+n+"\nFieldConfig: "+e),n}},e.prototype.createControl=function(e){try{var t=e.field;return this.formBuilder.control({disabled:t.disabled,value:t.initialValue},t.validation)}catch(n){throw console.error("Error creating form control: "+n+"\nConfig: "+e),n}},e.\u0275fac=function(t){return new(t||e)(E.Mb(Y.d))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-eav-form"]],inputs:{config:"config"},outputs:{formSubmit:"formSubmit",formValueChange:"formValueChange"},decls:2,vars:3,consts:[[1,"dynamic-form",3,"formGroup"],["appEavField","",3,"config","group"]],template:function(e,t){1&e&&(E.Sb(0,"form",0),E.Ob(1,1),E.Rb()),2&e&&(E.kc("formGroup",t.form),E.Ab(1),E.kc("config",t.config)("group",t.form))},directives:[Y.v,Y.n,Y.g,Wr],styles:[".dynamic-form[_ngcontent-%COMP%]{margin-bottom:8px}"],changeDetection:0}),e}(),Xr=n("V06R");function Yr(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div"),E.Sb(1,"app-eav-form",1),E.ac("formSubmit",(function(){return E.Ac(n),E.ec().submit()}))("formValueChange",(function(e){return E.Ac(n),E.ec().formValueChange(e)})),E.fc(2,"async"),E.Rb(),E.Rb()}if(2&e){var i=E.ec();E.Ab(1),E.kc("config",E.gc(2,1,i.itemFields$))}}var Zr=function(){function e(e,t,n,i,a,o){this.languageInstanceService=e,this.itemService=t,this.contentTypeService=n,this.eavService=i,this.actions$=a,this.buildFieldsService=o,this.itemFormValueChange=new E.n,this.subscription=new X.a}return e.prototype.ngOnInit=function(){var e=this;this.subscription.add(this.languageInstanceService.getDefaultLanguage(this.formId).subscribe((function(t){e.defaultLanguage=t}))),this.subscription.add(this.languageInstanceService.getCurrentLanguage(this.formId).subscribe((function(t){e.currentLanguage=t,e.setFormValues()})));var t=Nt.a.getContentTypeId(this.item);this.contentType$=this.contentTypeService.getContentTypeById(t),this.itemFields$=this.buildFieldsService.buildFields(this.contentType$,this.item,this.formId,this.currentLanguage,this.defaultLanguage)},e.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},e.prototype.ngOnChanges=function(e){null!=e.item&&this.setFormValues()},e.prototype.formSaveObservable=function(){var e=this;return this.actions$.pipe(Object(a.e)(K.a),Object(A.a)((function(t){return 0===e.item.entity.id?e.item.entity.guid===t.item.entity.guid:e.item.entity.id===t.item.entity.id})))},e.prototype.formValueChange=function(e){this.itemService.updateItemAttributesValues(this.item.entity.id,e,this.currentLanguage,this.defaultLanguage,this.item.entity.guid),this.itemFormValueChange.emit()},e.prototype.submit=function(){(this.form.form.valid||this.checkAreAllControlsDisabled()||this.item.header.Group&&this.item.header.Group.SlotCanBeEmpty)&&this.eavService.saveItem(this.item)},e.prototype.checkAreAllControlsDisabled=function(){var e,t,n=!0,a=Object.keys(this.form.form.controls);try{for(var o=Object(i.h)(a),r=o.next();!r.done;r=o.next())if(!this.form.form.controls[r.value].disabled){n=!1;break}}catch(c){e={error:c}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.setFormValues=function(){var e=this;if(this.form){var t={};Object.keys(this.item.entity.attributes).forEach((function(n){t[n]=aa.a.translate(e.currentLanguage,e.defaultLanguage,e.item.entity.attributes[n],null)})),this.form.valueIsChanged(t)&&this.form.patchValue(t,!1),this.eavService.formValueChange$.next({formId:this.formId,entityGuid:this.item.entity.guid,entityValues:t})}},e.\u0275fac=function(t){return new(t||e)(E.Mb(ra.a),E.Mb(oa.a),E.Mb(Ht),E.Mb(ne.a),E.Mb(a.a),E.Mb(Xr.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-item-edit-form"]],viewQuery:function(e,t){var n;1&e&&E.Sc(Kr,!0),2&e&&E.xc(n=E.bc())&&(t.form=n.first)},inputs:{item:"item",formId:"formId"},outputs:{itemFormValueChange:"itemFormValueChange"},features:[E.yb],decls:2,vars:3,consts:[[4,"ngIf"],[3,"config","formSubmit","formValueChange"]],template:function(e,t){1&e&&(E.Lc(0,Yr,3,3,"div",0),E.fc(1,"async")),2&e&&E.kc("ngIf",E.gc(1,1,t.contentType$))},directives:[D.m,Kr],pipes:[D.b],styles:[""],changeDetection:0}),e}(),Jr=function(){function e(){}return e.Show="show",e.Hide="hide",e.Branch="branch",e}();function ec(e,t){return e.key<t.key?-1:e.key>t.key?1:0}var tc=n("39Ct"),nc=n("sEIs"),ic=n("GuwJ"),ac=function(e){return{"mat-list-item-focus":e}},oc=function(){function e(e,t){this.dialogRef=e,this.data=t,this.Modes=Jr}return e.prototype.ngOnInit=function(){this.publishMode=this.data},e.prototype.setMode=function(e){this.dialogRef.close(e)},e.\u0275fac=function(t){return new(t||e)(E.Mb($a.g),E.Mb($a.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-save-status-dialog"]],decls:35,vars:33,consts:[[1,"mat-card__header"],[1,"mat-card__title"],[1,"mat-card__description"],["toggle",""],[3,"ngClass","click"],["matListIcon","","color","accent"],["matLine","",1,"mat-list-item__title"],["matLine","",1,"mat-list-item__body"],["matListIcon","","color","accent","svgIcon","draft-branch"]],template:function(e,t){1&e&&(E.Sb(0,"mat-card"),E.Sb(1,"div",0),E.Sb(2,"div",1),E.Nc(3),E.fc(4,"translate"),E.Rb(),E.Sb(5,"div",2),E.Nc(6),E.fc(7,"translate"),E.Rb(),E.Rb(),E.Sb(8,"mat-nav-list",3),E.Sb(9,"mat-list-item",4),E.ac("click",(function(){return t.setMode(t.Modes.Show)})),E.Sb(10,"mat-icon",5),E.Nc(11,"visibility"),E.Rb(),E.Sb(12,"div",6),E.Nc(13),E.fc(14,"translate"),E.Rb(),E.Sb(15,"div",7),E.Nc(16),E.fc(17,"translate"),E.Rb(),E.Rb(),E.Sb(18,"mat-list-item",4),E.ac("click",(function(){return t.setMode(t.Modes.Hide)})),E.Sb(19,"mat-icon",5),E.Nc(20,"visibility_off"),E.Rb(),E.Sb(21,"div",6),E.Nc(22),E.fc(23,"translate"),E.Rb(),E.Sb(24,"div",7),E.Nc(25),E.fc(26,"translate"),E.Rb(),E.Rb(),E.Sb(27,"mat-list-item",4),E.ac("click",(function(){return t.setMode(t.Modes.Branch)})),E.Nb(28,"mat-icon",8),E.Sb(29,"div",6),E.Nc(30),E.fc(31,"translate"),E.Rb(),E.Sb(32,"div",7),E.Nc(33),E.fc(34,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&e&&(E.Ab(3),E.Oc(E.gc(4,11,"SaveMode.Dialog.Title")),E.Ab(3),E.Oc(E.gc(7,13,"SaveMode.Dialog.Intro")),E.Ab(3),E.kc("ngClass",E.oc(27,ac,t.publishMode===t.Modes.Show)),E.Ab(4),E.Oc(E.gc(14,15,"SaveMode.Dialog.Show.Title")),E.Ab(3),E.Oc(E.gc(17,17,"SaveMode.Dialog.Show.Body")),E.Ab(2),E.kc("ngClass",E.oc(29,ac,t.publishMode===t.Modes.Hide)),E.Ab(4),E.Oc(E.gc(23,19,"SaveMode.Dialog.Hide.Title")),E.Ab(3),E.Oc(E.gc(26,21,"SaveMode.Dialog.Hide.Body")),E.Ab(2),E.kc("ngClass",E.oc(31,ac,t.publishMode===t.Modes.Branch)),E.Ab(3),E.Oc(E.gc(31,23,"SaveMode.Dialog.Branch.Title")),E.Ab(3),E.Oc(E.gc(34,25,"SaveMode.Dialog.Branch.Body")))},directives:[ti.a,Da.e,Da.c,D.k,me.a,ye.a,Da.b,tn.j],pipes:[z.d],styles:[".mat-list-item-focus[_ngcontent-%COMP%]{background:rgba(0,0,0,.04)}"],changeDetection:0}),e}(),rc=function(){function e(e,t){var n=this;this.ngZone=e,this.header=t,this.moveThreshold=2,this.stopClick=!1,this.eventListeners=[],this.ngZone.runOutsideAngular((function(){var e=n.checkIfMouseMoved.bind(n);document.addEventListener("mouseup",e,{passive:!0}),n.eventListeners.push({element:document,type:"mouseup",listener:e})}))}return e.prototype.lngButtonDown=function(e){var t=this;this.ngZone.runOutsideAngular((function(){t.saveInitialPosition(e)}))},e.prototype.lngButtonClick=function(e){var t=this;this.ngZone.runOutsideAngular((function(){t.doMove(e)}))},e.prototype.stopClickIfMouseMoved=function(){return this.stopClick},e.prototype.destroy=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),e.eventListeners=null}))},e.prototype.saveInitialPosition=function(e){this.stopClick=!1,this.positionX=e.pageX,this.positionY=e.pageY},e.prototype.checkIfMouseMoved=function(e){this.positionX&&this.positionY?(this.stopClick=Math.abs(this.positionX+this.positionY-(e.pageX+e.pageY))>this.moveThreshold,this.positionX=null,this.positionY=null):this.stopClick=!1},e.prototype.doMove=function(e){if(!this.stopClick){var t=e.target,n=t.getBoundingClientRect().left,i=t.getBoundingClientRect().width,a=this.header.getBoundingClientRect().left,o=this.header.getBoundingClientRect().width;this.header.scrollLeft+=n+i/2-(a+o/2)}},e}();function cc(e){return e.substring(0,e.indexOf("(")>0?e.indexOf("(")-1:100).toLocaleUpperCase()}var sc=function(){function e(e,t,n){var i=this;this.ngZone=e,this.header=t,this.areButtonsDisabled=n,this.eventListeners=[],this.ngZone.runOutsideAngular((function(){var e=i.registerScroll.bind(i);i.header.addEventListener("pointerdown",e,{passive:!0}),i.headerDownListener={element:i.header,type:"pointerdown",listener:e}}))}return e.prototype.destroy=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.headerDownListener.element.removeEventListener(e.headerDownListener.type,e.headerDownListener.listener),e.headerDownListener=null,e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),e.eventListeners=null})),this.ngZone=null,this.header=null,this.areButtonsDisabled=null},e.prototype.registerScroll=function(e){if(!this.areButtonsDisabled()&&0===e.button){window.getSelection().removeAllRanges(),this.oldScrollBehavior=getComputedStyle(this.header).getPropertyValue("scroll-behavior"),this.header.style.scrollBehavior="auto",this.positionX=e.pageX;var t=this.doScroll.bind(this),n=this.removeScroll.bind(this);document.addEventListener("pointermove",t,{passive:!0}),document.addEventListener("pointerup",n,{passive:!0}),document.addEventListener("pointerleave",n,{passive:!0}),this.eventListeners.push({element:document,type:"pointermove",listener:t},{element:document,type:"pointerup",listener:n},{element:document,type:"pointerleave",listener:n})}},e.prototype.removeScroll=function(){this.header.style.scrollBehavior=this.oldScrollBehavior,this.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),this.eventListeners.splice(0,this.eventListeners.length)},e.prototype.doScroll=function(e){var t=e.pageX;t<this.positionX?this.header.scrollLeft+=this.positionX-t:t>this.positionX&&(this.header.scrollLeft+=-(t-this.positionX)),this.positionX=t},e}(),lc=function(){function e(e,t,n,i){var a=this;this.ngZone=e,this.header=t,this.leftShadow=n,this.rightShadow=i,this.hidden="hidden",this.eventListeners=[],this.ngZone.runOutsideAngular((function(){a.calculateShadows();var e=a.calculateShadows.bind(a);a.header.addEventListener("scroll",e,{passive:!0}),window.addEventListener("resize",e,{passive:!0}),a.eventListeners.push({element:a.header,type:"scroll",listener:e},{element:window,type:"resize",listener:e})}))}return e.prototype.destroy=function(){var e=this;this.ngZone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener),e=null})),e.eventListeners=null})),this.ngZone=null,this.header=null,this.leftShadow=null,this.rightShadow=null},e.prototype.calculateShadows=function(){this.maxScrollLeft=this.header.scrollWidth-this.header.clientWidth,0===this.maxScrollLeft?this.hideBoth():0===this.header.scrollLeft?this.hideLeft():this.header.scrollLeft===this.maxScrollLeft?this.hideRight():this.showBoth()},e.prototype.hideBoth=function(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.add(this.hidden)},e.prototype.hideLeft=function(){this.leftShadow.classList.add(this.hidden),this.rightShadow.classList.remove(this.hidden)},e.prototype.hideRight=function(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.add(this.hidden)},e.prototype.showBoth=function(){this.leftShadow.classList.remove(this.hidden),this.rightShadow.classList.remove(this.hidden)},e}(),dc=["scrollable"],uc=["leftShadow"],pc=["rightShadow"];function fc(e,t){if(1&e){var n=E.Tb();E.Sb(0,"button",9),E.ac("mousedown",(function(e){return E.Ac(n),E.ec(2).lngButtonMouseDown(e)}))("click",(function(e){E.Ac(n);var i=t.$implicit;return E.ec(2).lngButtonClick(e,i)})),E.Nc(1),E.Rb()}if(2&e){var i=t.$implicit,a=E.ec().ngIf,o=E.ec();E.kc("disabled",o.disabled&&a.currentLanguage!==i.key)("color",a.currentLanguage===i.key?"accent":"white")("matTooltip",i.name)("matTooltipDisabled",o.disabled),E.Ab(1),E.Pc(" ",i.buttonText," ")}}function gc(e,t){if(1&e&&(E.Sb(0,"div",1),E.Nb(1,"div",2,3),E.Nb(3,"div",4,5),E.Sb(5,"div",6,7),E.fc(7,"translate"),E.Lc(8,fc,2,5,"button",8),E.fc(9,"async"),E.Rb(),E.Rb()),2&e){var n=E.ec();E.Ab(5),E.kc("matTooltip",E.gc(7,3,"Message.CantSwitchLanguage"))("matTooltipDisabled",!n.disabled),E.Ab(3),E.kc("ngForOf",E.gc(9,5,n.languageButtons$))}}var bc=function(e){return{currentLanguage:e}},hc=function(){function e(e,t,n){this.languageService=e,this.languageInstanceService=t,this.ngZone=n}return e.prototype.ngOnInit=function(){this.languageButtons$=this.languageService.entities$.pipe(Object(I.a)((function(e){return n=[],i={},(t=e).forEach((function(e){var t=cc(e.name);i[t]?i[t]++:i[t]=1})),t.forEach((function(e){var t=cc(e.name);n.push({name:e.name,key:e.key,buttonText:i[t]>1?t+" ("+e.key+")":t})})),n;var t,n,i}))),this.currentLanguage$=this.languageInstanceService.getCurrentLanguage(this.formId)},e.prototype.ngAfterViewInit=function(){this.showShadowsService=new lc(this.ngZone,this.headerRef.nativeElement,this.leftShadowRef.nativeElement,this.rightShadowRef.nativeElement),this.mouseScrollHelper=new sc(this.ngZone,this.headerRef.nativeElement,this.areButtonsDisabled.bind(this)),this.centerSelectedService=new rc(this.ngZone,this.headerRef.nativeElement)},e.prototype.ngOnDestroy=function(){this.centerSelectedService.destroy(),this.mouseScrollHelper.destroy(),this.showShadowsService.destroy()},e.prototype.lngButtonMouseDown=function(e){this.centerSelectedService.lngButtonDown(e)},e.prototype.lngButtonClick=function(e,t){this.disabled||(this.centerSelectedService.lngButtonClick(e),this.centerSelectedService.stopClickIfMouseMoved()||this.languageInstanceService.updateCurrentLanguage(this.formId,t.key))},e.prototype.areButtonsDisabled=function(){return this.disabled},e.\u0275fac=function(t){return new(t||e)(E.Mb(Ea.a),E.Mb(ra.a),E.Mb(E.A))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-eav-language-switcher"]],viewQuery:function(e,t){var n;1&e&&(E.Sc(dc,!0),E.Sc(uc,!0),E.Sc(pc,!0)),2&e&&(E.xc(n=E.bc())&&(t.headerRef=n.first),E.xc(n=E.bc())&&(t.leftShadowRef=n.first),E.xc(n=E.bc())&&(t.rightShadowRef=n.first))},inputs:{formId:"formId",disabled:"disabled"},decls:2,vars:5,consts:[["class","scrollable__overlay",4,"ngIf"],[1,"scrollable__overlay"],[1,"scrollable__overlay--left-shadow"],["leftShadow",""],[1,"scrollable__overlay--right-shadow"],["rightShadow",""],[1,"scrollable","lang-switch",3,"matTooltip","matTooltipDisabled"],["scrollable",""],["mat-flat-button","","class","lang-switch__button",3,"disabled","color","matTooltip","matTooltipDisabled","mousedown","click",4,"ngFor","ngForOf"],["mat-flat-button","",1,"lang-switch__button",3,"disabled","color","matTooltip","matTooltipDisabled","mousedown","click"]],template:function(e,t){1&e&&(E.Lc(0,gc,10,7,"div",0),E.fc(1,"async")),2&e&&E.kc("ngIf",E.oc(3,bc,E.gc(1,1,t.currentLanguage$)))},directives:[D.m,ve.a,D.l,V.a],pipes:[D.b,z.d],styles:['.scrollable__overlay[_ngcontent-%COMP%]{position:relative;height:100%}.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{content:"";position:absolute;top:0;display:block;z-index:1;pointer-events:none;height:100%;width:80px;background-image:linear-gradient(90deg,#fff 8px,hsla(0,0%,100%,0))}@media (max-width:600px){.scrollable__overlay--left-shadow[_ngcontent-%COMP%], .scrollable__overlay--right-shadow[_ngcontent-%COMP%]{width:24px}}.scrollable__overlay--right-shadow[_ngcontent-%COMP%]{right:0;background-image:linear-gradient(270deg,#fff 8px,hsla(0,0%,100%,0))}.scrollable[_ngcontent-%COMP%]{overflow:hidden;scroll-behavior:smooth;height:100%}.lang-switch[_ngcontent-%COMP%]{display:flex}.lang-switch__button[_ngcontent-%COMP%]{height:100%;flex-shrink:0;border-radius:0;margin-left:0!important;color:rgba(0,0,0,.4);border-bottom:none;font-size:12px;line-height:54px;padding:0 6px;background-color:#fff!important}.lang-switch__button.mat-accent[_ngcontent-%COMP%]{color:#2680eb;border-bottom:2px solid #2680eb;background-color:inherit}.hidden[_ngcontent-%COMP%]{visibility:hidden}'],changeDetection:0}),e}();function mc(e,t){1&e&&(E.Sb(0,"div",7),E.Nc(1),E.fc(2,"translate"),E.Rb()),2&e&&(E.Ab(1),E.Oc(E.gc(2,1,"ItemCard.CopyHint")))}function vc(e,t){if(1&e&&E.Nb(0,"app-eav-language-switcher",8),2&e){var n=E.ec();E.kc("formId",n.formId)("disabled",!n.formsAreValid&&!n.allControlsAreDisabled)}}var yc=function(){function e(e,t){this.dialog=e,this.languageService=t,this.closeDialog=new E.n,this.setPublishMode=new E.n,this.hasLanguages$=this.languageService.entities$.pipe(Object(I.a)((function(e){return e.length>0})))}return e.prototype.ngOnInit=function(){},e.prototype.close=function(){this.closeDialog.emit()},e.prototype.openSaveStatusDialog=function(){var e=this,t=this.dialog.open(oc,{panelClass:"c-save-status-dialog",autoFocus:!1,width:"350px",data:this.publishMode});t.keydownEvents().subscribe((function(e){83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&e.preventDefault()})),t.afterClosed().subscribe((function(t){null!=t&&e.setPublishMode.emit(t)}))},e.\u0275fac=function(t){return new(t||e)(E.Mb($a.b),E.Mb(Ea.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-multi-item-edit-form-header"]],inputs:{formId:"formId",isCopy:"isCopy",formsAreValid:"formsAreValid",allControlsAreDisabled:"allControlsAreDisabled",isParentDialog:"isParentDialog",publishMode:"publishMode"},outputs:{closeDialog:"closeDialog",setPublishMode:"setPublishMode"},decls:17,vars:18,consts:[[1,"header"],["mat-icon-button","",1,"header__exit-button",3,"matTooltip","click"],["class","header__copy",4,"ngIf"],[1,"header__langs"],[3,"formId","disabled",4,"ngIf"],["mat-button","",1,"header__publish-button",3,"matTooltip","click"],[1,"header__publish-mode"],[1,"header__copy"],[3,"formId","disabled"]],template:function(e,t){1&e&&(E.Sb(0,"mat-card",0),E.Sb(1,"button",1),E.ac("click",(function(){return t.close()})),E.fc(2,"translate"),E.Sb(3,"mat-icon"),E.Nc(4),E.Rb(),E.Rb(),E.Lc(5,mc,3,3,"div",2),E.Sb(6,"div",3),E.Lc(7,vc,1,2,"app-eav-language-switcher",4),E.fc(8,"async"),E.Rb(),E.Sb(9,"button",5),E.ac("click",(function(){return t.openSaveStatusDialog()})),E.fc(10,"translate"),E.Sb(11,"span",6),E.Nc(12),E.fc(13,"translate"),E.Sb(14,"b"),E.Nc(15),E.fc(16,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb()),2&e&&(E.Ab(1),E.kc("matTooltip",E.gc(2,7,t.isParentDialog?"Form.Buttons.Exit.Tip":"Form.Buttons.Return.Tip")),E.Ab(3),E.Oc(t.isParentDialog?"clear":"arrow_back"),E.Ab(1),E.kc("ngIf",t.isCopy),E.Ab(2),E.kc("ngIf",E.gc(8,9,t.hasLanguages$)),E.Ab(2),E.kc("matTooltip",E.gc(10,11,"SaveMode."+t.publishMode+".Tip")),E.Ab(3),E.Pc(" ",E.gc(13,13,"SaveMode.Label")," "),E.Ab(3),E.Oc(E.hc(16,15,"SaveMode."+t.publishMode,"").toUpperCase()))},directives:[ti.a,V.a,ve.a,ye.a,D.m,hc],pipes:[z.d,D.b],styles:[".header[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px;border-bottom-left-radius:0;border-bottom-right-radius:0;height:52px;z-index:1;box-shadow:0 2px 5px rgba(0,0,0,.26)}@media (max-width:600px){.header[_ngcontent-%COMP%]{border-radius:0}}.header__exit-button[_ngcontent-%COMP%]{width:30px;height:30px;flex-shrink:0;line-height:30px}.header__exit-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px!important}.header__copy[_ngcontent-%COMP%]{cursor:default}.header__langs[_ngcontent-%COMP%]{margin-left:12px;flex-grow:1;overflow:hidden;height:100%}.header__publish-button[_ngcontent-%COMP%]{margin-right:-6px;padding:0 10px;height:30px;line-height:32px;flex-shrink:0}.header__publish-mode[_ngcontent-%COMP%]{font-weight:400}"],changeDetection:0}),e}();function wc(e,t){if(1&e&&(E.Sb(0,"div",6),E.Sb(1,"textarea",7),E.Nc(2),E.fc(3,"json"),E.Rb(),E.Rb()),2&e){var n=E.ec().ngIf;E.Ab(2),E.Oc(E.gc(3,1,n.items))}}var xc=function(e){return{"debug-enabled":e}};function _c(e,t){if(1&e){var n=E.Tb();E.Qb(0),E.Sb(1,"mat-card",1),E.Sb(2,"div",2),E.Sb(3,"button",3),E.ac("click",(function(){return E.Ac(n),E.ec().toggleDebugInfo()})),E.fc(4,"translate"),E.Sb(5,"mat-icon"),E.Nc(6,"offline_bolt"),E.Rb(),E.Rb(),E.Sb(7,"div"),E.Nc(8),E.Rb(),E.Sb(9,"button",4),E.Sb(10,"mat-icon"),E.Nc(11,"offline_bolt"),E.Rb(),E.Rb(),E.Rb(),E.Lc(12,wc,4,3,"div",5),E.Rb(),E.Pb()}if(2&e){var i=t.ngIf,a=E.ec();E.Ab(1),E.kc("ngClass",E.oc(6,xc,i.showDebugInfo)),E.Ab(2),E.kc("matTooltip",E.gc(4,4,"General.Buttons.Debug")),E.Ab(5),E.Pc("2sxc ",a.sxcVer,""),E.Ab(4),E.kc("ngIf",i.showDebugInfo)}}var Cc=function(e,t){return{showDebugInfo:e,items:t}},Oc=function(){function e(e){this.itemService=e,this.debugInfoOpened=new E.n,this.sxcVer=sxcVersion.substring(0,sxcVersion.lastIndexOf(".")),this.showDebugInfo$=new o.a(!1)}return e.prototype.ngOnInit=function(){this.items$=this.itemService.selectAllItems()},e.prototype.ngOnDestroy=function(){this.showDebugInfo$.complete()},e.prototype.toggleDebugInfo=function(){this.showDebugInfo$.next(!this.showDebugInfo$.value),this.debugInfoOpened.emit(this.showDebugInfo$.value)},e.\u0275fac=function(t){return new(t||e)(E.Mb(oa.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-multi-item-edit-form-debug"]],outputs:{debugInfoOpened:"debugInfoOpened"},decls:3,vars:8,consts:[[4,"ngIf"],["fxLayout","column","fxLayoutAlign","center start",3,"ngClass"],["fxLayout","row","fxLayoutAlign","space-between center",1,"debug-buttons-container"],["mat-icon-button","",3,"matTooltip","click"],["mat-icon-button","",1,"hidden"],["class","debug-info-container",4,"ngIf"],[1,"debug-info-container"],["readonly","",1,"debug-dump"]],template:function(e,t){1&e&&(E.Lc(0,_c,13,8,"ng-container",0),E.fc(1,"async"),E.fc(2,"async")),2&e&&E.kc("ngIf",E.pc(5,Cc,E.gc(1,1,t.showDebugInfo$),E.gc(2,3,t.items$)))},directives:[D.m,ti.a,j.c,j.b,D.k,me.a,V.a,ve.a,ye.a],pipes:[D.b,z.d,D.f],styles:[".mat-card[_ngcontent-%COMP%]{padding:0;margin:0;border-top-left-radius:0;border-top-right-radius:0;height:52px;z-index:1;width:100%}@media (max-width:600px){.mat-card[_ngcontent-%COMP%]{border-radius:0}}.mat-card.debug-enabled[_ngcontent-%COMP%]{height:auto}.debug-buttons-container[_ngcontent-%COMP%]{padding:17px 16px 15px;height:52px;width:100%}.debug-info-container[_ngcontent-%COMP%]{margin:0 16px 16px!important;width:calc(100% - 2 * 16px);height:300px;position:relative}.debug-dump[_ngcontent-%COMP%]{width:calc(100% - 10px);margin:0;padding:10px 0 10px 10px;border:0;height:calc(100% - 20px);resize:none;background-color:rgba(29,39,61,.04)}.mat-icon-button[_ngcontent-%COMP%]{margin-right:12px;width:30px;height:30px;line-height:30px}.mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px!important}.hidden[_ngcontent-%COMP%]{visibility:hidden}"],changeDetection:0}),e}(),kc=["slideable"];function Sc(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div"),E.Sb(1,"app-item-edit-form",16),E.ac("itemFormValueChange",(function(){return E.Ac(n),E.ec(3).formValueChange()})),E.Rb(),E.Rb()}if(2&e){var i=t.$implicit,a=E.ec(3);E.Ab(1),E.kc("item",i)("formId",a.formId)}}function Mc(e,t){if(1&e){var n=E.Tb();E.Sb(0,"app-multi-item-edit-form-debug",17),E.ac("debugInfoOpened",(function(e){return E.Ac(n),E.ec(3).debugInfoOpened(e)})),E.Rb()}}var Ic=function(e){return{"u-display-none":e}},Ac=function(e,t,n){return{"debug-enabled":e,"debug-info-is-open":t,"hide-header-height-fix":n}},Pc=function(e,t,n){return{"mat-fab--compact":e,"mat-fab--extended":t,"mat-fab--disabled":n}};function Tc(e,t){if(1&e){var n=E.Tb();E.Sb(0,"div",2),E.Sb(1,"div",3),E.Sb(2,"app-multi-item-edit-form-header",4),E.ac("closeDialog",(function(){return E.Ac(n),E.ec(2).closeDialog()}))("setPublishMode",(function(e){return E.Ac(n),E.ec(2).setPublishMode(e)})),E.Rb(),E.Rb(),E.Sb(3,"div",5),E.Sb(4,"div",6),E.Sb(5,"div",7),E.Sb(6,"div",8),E.Sb(7,"div",9,10),E.Lc(9,Sc,2,2,"div",11),E.Rb(),E.Rb(),E.Rb(),E.Sb(10,"div",12),E.Sb(11,"div",13),E.Sb(12,"button",14),E.ac("click",(function(){return E.Ac(n),E.ec(2).saveAll(!0)})),E.fc(13,"translate"),E.Sb(14,"mat-icon"),E.Nc(15,"done"),E.Rb(),E.Nc(16),E.fc(17,"translate"),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Rb(),E.Lc(18,Mc,1,0,"app-multi-item-edit-form-debug",15),E.Rb()}if(2&e){var i=E.ec().ngIf,a=E.ec();E.Ab(1),E.kc("ngClass",E.oc(19,Ic,i.hideHeader)),E.Ab(1),E.kc("formId",a.formId)("isCopy",i.isCopy)("formsAreValid",i.formsAreValid)("allControlsAreDisabled",i.allControlsAreDisabled)("isParentDialog",a.isParentDialog)("publishMode",i.publishMode),E.Ab(2),E.kc("ngClass",E.qc(21,Ac,i.debugEnabled,i.debugInfoIsOpen,i.hideHeader)),E.Ab(3),E.kc("ngClass",i.slide),E.Ab(2),E.kc("ngForOf",i.items)("ngForTrackBy",a.trackByFn),E.Ab(3),E.kc("matTooltip",E.gc(13,15,"Form.Buttons.Save.Tip"))("ngClass",E.qc(25,Pc,i.reduceSaveButton,!i.reduceSaveButton,!i.formsAreValid&&!i.allControlsAreDisabled)),E.Ab(4),E.Pc(" ",i.reduceSaveButton?"":E.gc(17,17,"Form.Buttons.Save").toUpperCase()," "),E.Ab(2),E.kc("ngIf",i.debugEnabled)}}function Rc(e,t){if(1&e&&(E.Qb(0),E.Lc(1,Tc,19,29,"div",1),E.Pb()),2&e){var n=t.ngIf;E.Ab(1),E.kc("ngIf",n.eavConfigLoaded)}}var $c=function(e,t,n,i,a,o,r,c,s,l,d){return{items:e,isCopy:t,formsAreValid:n,allControlsAreDisabled:i,publishMode:a,reduceSaveButton:o,debugEnabled:r,debugInfoIsOpen:c,hideHeader:s,slide:l,eavConfigLoaded:d}},Lc=function(){function e(e,t,n,a,r,c,s,l,d,u,p,f,g,b,h,m,v){var y=this;this.dialogRef=e,this.actions$=t,this.changeDetectorRef=n,this.contentTypeService=a,this.globalConfigService=r,this.eavService=c,this.featureService=s,this.inputTypeService=l,this.itemService=d,this.languageService=u,this.languageInstanceService=p,this.snackBar=f,this.translate=g,this.validationMessagesService=b,this.loadIconsService=h,this.route=m,this.editRoutingService=v,this.isParentDialog=function(e){var t,n,a,o,r=0;try{for(var c=Object(i.h)(e.snapshot.pathFromRoot),s=c.next();!s.done;s=c.next()){var l=s.value;if(!(l.url.length<=0))try{for(var d=(a=void 0,Object(i.h)(l.url)),u=d.next();!u.done;u=d.next())"edit"===u.value.path&&r++}catch(p){a={error:p}}finally{try{u&&!u.done&&(o=d.return)&&o.call(d)}finally{if(a)throw a.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return 1===r}(this.route),this.formId=Math.floor(99999*Math.random()),this.isCopy$=new o.a(!1),this.formsAreValid$=new o.a(!1),this.allControlsAreDisabled$=new o.a(!0),this.publishMode$=new o.a("hide"),this.reduceSaveButton$=new o.a(!1),this.hideHeader$=this.languageInstanceService.getHideHeader(this.formId),this.debugEnabled$=this.globalConfigService.getDebugEnabled().pipe(Object(O.a)((function(e){y.debugInfoIsOpen$.value&&!e&&y.debugInfoIsOpen$.next(!1)}))),this.debugInfoIsOpen$=new o.a(!1),this.eavConfigLoaded$=new o.a(!1),this.formErrors=[],this.formsAreDirty={},this.formSaveAllObservables$=[],this.createMode=!1,this.formIsSaved=!1,this.subscriptions=[],this.editRoutingService.init(this.route,this.formId),this.loadIconsService.load()}return e.prototype.ngOnInit=function(){this.fetchFormData()},e.prototype.ngAfterViewChecked=function(){this.attachAllSaveFormObservables(),this.changeDetectorRef.detectChanges(),this.initSlider()},e.prototype.ngOnDestroy=function(){this.isCopy$.complete(),this.reduceSaveButton$.complete(),this.debugInfoIsOpen$.complete(),this.formsAreValid$.complete(),this.allControlsAreDisabled$.complete(),this.publishMode$.complete(),this.eavConfigLoaded$.complete(),this.subscriptions.forEach((function(e){e.unsubscribe()})),this.languageInstanceService.removeLanguageInstance(this.formId),this.isParentDialog&&(this.languageInstanceService.clearCache(),this.languageService.clearCache(),this.itemService.clearCache(),this.inputTypeService.clearCache(),this.featureService.clearCache(),this.contentTypeService.clearCache())},e.prototype.closeDialog=function(e){this.dialogRef.disableClose?this.snackBarYouHaveUnsavedChanges():this.dialogRef.close(this.createMode?e:void 0)},e.prototype.setPublishMode=function(e){null==this.eavService.eavConfig.versioningOptions[e]&&(e=Object.keys(this.eavService.eavConfig.versioningOptions)[0]),this.publishMode$.next(e)},e.prototype.trackByFn=function(e,t){return 0===t.entity.id?t.entity.guid:t.entity.id},e.prototype.formValueChange=function(){this.checkFormsState(),this.formErrors=[]},e.prototype.saveAll=function(e){var t=this;this.eavService.forceConnectorSave$.next(),setTimeout((function(){if(t.formsAreValid$.value||t.allControlsAreDisabled$.value)t.itemEditFormRefs.forEach((function(e){e.form.submitOutside()})),Object(R.a)("saveAll",e),t.snackBar.open(t.translate.instant("Message.Saving"),null,{duration:2e3}),e&&(t.formIsSaved=!0);else{t.calculateAllValidationMessages();var n=[];t.formErrors.forEach((function(e){Object.keys(e).forEach((function(t){n.push({field:t,message:e[t]})}))})),t.snackBar.openFromComponent(N,{data:{fieldErrors:n},duration:5e3})}}),100)},e.prototype.debugInfoOpened=function(e){this.debugInfoIsOpen$.next(e)},e.prototype.fetchFormData=function(){var e=this,t=Object($.b)(this.route.snapshot.params.items),n=JSON.stringify(t.items);this.eavService.fetchFormData(n).subscribe((function(t){setTimeout((function(){e.reduceSaveButton$.next(!0)}),5e3),e.itemService.loadItems(t.Items),e.inputTypeService.addInputTypes(t.InputTypes),e.contentTypeService.addContentTypes(t.ContentTypes),e.featureService.loadFeatures(t.Features),e.eavService.setEavConfig(t.Context),e.eavConfigLoaded$.next(!0);var n=e.eavService.eavConfig.lang.split("-")[0];if(e.translate.use(n),e.isParentDialog){var a=e.eavService.eavConfig.langs,o=Object.keys(a).map((function(e){return{key:e,name:a[e]}})),r=function(e,t){var n,a,o;if(0===t.length)return t;var r=[],c=[];try{for(var s=Object(i.h)(t),l=s.next();!l.done;l=s.next()){var d=l.value;d.key===e?o=d:d.key.startsWith(e.split("-")[0])?r.push(d):c.push(d)}}catch(u){n={error:u}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(n)throw n.error}}return r.sort(ec),c.sort(ec),o?Object(i.g)([o],r,c):Object(i.g)(r,c)}(e.eavService.eavConfig.langPri,o);e.languageService.loadLanguages(r)}if(e.languageInstanceService.addLanguageInstance(e.formId,e.eavService.eavConfig.lang,e.eavService.eavConfig.langPri,e.eavService.eavConfig.lang,!1),e.setPublishMode(t.DraftShouldBranch?Jr.Branch:t.IsPublished?Jr.Show:Jr.Hide),e.eavService.eavConfig.lang!==e.eavService.eavConfig.langPri&&!e.itemService.valuesExistInDefaultLanguage(t.Items.map((function(e){return 0===e.Entity.Id?e.Entity.Guid:e.Entity.Id})),e.eavService.eavConfig.langPri,e.inputTypeService,e.contentTypeService)){e.languageInstanceService.updateCurrentLanguage(e.formId,e.eavService.eavConfig.langPri);var c=e.translate.instant("Message.SwitchedLanguageToDefault",{language:e.eavService.eavConfig.langPri});e.snackBar.open(c,null,{duration:5e3})}e.items$=e.itemService.selectItemsByIdList(t.Items.map((function(e){return 0===e.Entity.Id?e.Entity.Guid:e.Entity.Id}))).pipe(Object(k.a)(0)),e.items$.pipe(Object(S.a)(1)).subscribe((function(t){0===(null==t?void 0:t[0].entity.id)&&(e.createMode=!0,null!=t[0].header.DuplicateEntity&&e.isCopy$.next(!0))})),e.languageChangeSubscribe(),e.dialogBackdropClickSubscribe(),e.saveFormMessagesSubscribe(),e.formSetValueChangeSubscribe()}))},e.prototype.initSlider=function(){var e=this;null!=this.slideableRef&&null==this.slide$&&(this.slide$=Object(r.a)(this.languageInstanceService.getCurrentLanguage(this.formId).pipe(Object(M.a)(),Object(I.a)((function(t){var n,a=Object(i.f)(t,2),o=a[0],r=a[1];return e.languageService.entities$.pipe(Object(S.a)(1)).subscribe((function(e){n=e})),n.findIndex((function(e){return e.key===o}))>n.findIndex((function(e){return e.key===r}))?"previous":"next"}))),Object(c.a)(this.slideableRef.nativeElement,"animationend").pipe(Object(A.a)((function(e){return"move-next"===e.animationName||"move-previous"===e.animationName})),Object(I.a)((function(){return""})),Object(k.a)(0))))},e.prototype.languageChangeSubscribe=function(){var e=this;this.subscriptions.push(this.languageInstanceService.getCurrentLanguage(this.formId).subscribe((function(t){e.formErrors=[]})))},e.prototype.dialogBackdropClickSubscribe=function(){var e=this;this.subscriptions.push(Object(c.a)(window,"beforeunload").subscribe((function(t){e.dialogRef.disableClose&&(t.preventDefault(),t.returnValue="",e.snackBarYouHaveUnsavedChanges())}))),this.dialogRef.backdropClick().subscribe((function(t){e.closeDialog()})),this.dialogRef.keydownEvents().subscribe((function(t){27===t.keyCode?e.closeDialog():(navigator.platform.match("Mac")?t.metaKey:t.ctrlKey)&&83===t.keyCode&&(t.preventDefault(),e.saveAll(!1))}))},e.prototype.saveFormMessagesSubscribe=function(){var e=this;this.subscriptions.push(this.actions$.pipe(Object(a.e)(K.c)).subscribe((function(t){e.itemService.updateItemId(t.data),Object(R.a)("success END: ",t.data),e.snackBar.open(e.translate.instant("Message.Saved"),null,{duration:2e3}),e.dialogRef.disableClose=!1,e.formIsSaved&&e.closeDialog(t.data)}))),this.subscriptions.push(this.actions$.pipe(Object(a.e)(K.b)).subscribe((function(t){Object(R.a)("error END",t.error),e.snackBar.open("Error",null,{duration:2e3})})))},e.prototype.formSetValueChangeSubscribe=function(){var e=this;this.subscriptions.push(this.eavService.formValueChange$.pipe(Object(A.a)((function(t){return t.formId===e.formId}))).subscribe((function(t){e.checkFormsState()})))},e.prototype.checkFormsState=function(){var e,t,n=this;if((null===(e=this.itemEditFormRefs)||void 0===e?void 0:e.length)>0&&(null===(t=this.itemEditFormRefs)||void 0===t?void 0:t.first.currentLanguage)){var i=!0,a=!0;this.formsAreDirty[this.itemEditFormRefs.first.currentLanguage]=!1,this.itemEditFormRefs.forEach((function(e){!0!==e.form.form.invalid||e.item.header.Group&&!1!==e.item.header.Group.SlotCanBeEmpty||(i=!1),e.form.form.dirty&&(n.formsAreDirty[e.currentLanguage]=!0),e.checkAreAllControlsDisabled()||(a=!1)})),this.formsAreValid$.value!==i&&this.formsAreValid$.next(i),this.allControlsAreDisabled$.value!==a&&this.allControlsAreDisabled$.next(a)}this.dialogRef.disableClose=this.areFormsDirtyAnyLanguage()},e.prototype.areFormsDirtyAnyLanguage=function(){var e,t,n=!1,a=Object.keys(this.formsAreDirty);try{for(var o=Object(i.h)(a),r=o.next();!r.done;r=o.next())if(!0===this.formsAreDirty[r.value]){n=!0;break}}catch(c){e={error:c}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return n},e.prototype.calculateAllValidationMessages=function(){var e,t=this;this.formErrors=[],null===(e=this.itemEditFormRefs)||void 0===e||e.forEach((function(e){e.form.form.invalid&&t.formErrors.push(t.validationMessagesService.validateForm(e.form.form,!1))}))},e.prototype.attachAllSaveFormObservables=function(){var e,t=this;0===this.formSaveAllObservables$.length&&(null===(e=this.itemEditFormRefs)||void 0===e||e.forEach((function(e){t.formSaveAllObservables$.push(e.formSaveObservable())})),this.formSaveAllObservables$.length>0&&(this.saveFormSubscribe(),this.checkFormsState()))},e.prototype.saveFormSubscribe=function(){var e=this;this.subscriptions.push(m.apply(void 0,Object(i.g)(this.formSaveAllObservables$)).pipe(Object(P.a)((function(t){Object(R.a)("ZIP ACTIONS ITEM: ",W.create(t[0].item));var n=[];return t.forEach((function(e){var t=W.create(e.item);Object.keys(t.Entity.Attributes).length>0&&n.push(t)})),e.eavService.saveFormData(JSON.stringify({Items:n,IsPublished:e.publishMode$.value===Jr.Show,DraftShouldBranch:e.publishMode$.value===Jr.Branch})).pipe(Object(I.a)((function(t){e.eavService.saveItemSuccess(t)})),Object(O.a)((function(e){return Object(R.a)("working")})))})),Object(T.a)((function(t){return Object(C.a)(e.eavService.saveItemError(t))}))).subscribe())},e.prototype.snackBarYouHaveUnsavedChanges=function(){var e=this,t=this.snackBar.openFromComponent(G,{data:{save:!1},duration:5e3});t.onAction().subscribe((function(){t.containerInstance.snackBarConfig.data.save?e.saveAll(!0):(e.dialogRef.disableClose=!1,e.closeDialog())}))},e.\u0275fac=function(t){return new(t||e)(E.Mb($a.g),E.Mb(a.a),E.Mb(E.h),E.Mb(Ht),E.Mb(bn.a),E.Mb(ne.a),E.Mb(ge),E.Mb(zt.a),E.Mb(oa.a),E.Mb(Ea.a),E.Mb(ra.a),E.Mb(L.b),E.Mb(z.e),E.Mb(ie.a),E.Mb(tc.a),E.Mb(nc.a),E.Mb(he.a))},e.\u0275cmp=E.Gb({type:e,selectors:[["app-multi-item-edit-form"]],viewQuery:function(e,t){var n;1&e&&(E.Sc(kc,!0),E.Sc(Zr,!0)),2&e&&(E.xc(n=E.bc())&&(t.slideableRef=n.first),E.xc(n=E.bc())&&(t.itemEditFormRefs=n))},decls:13,vars:35,consts:[[4,"ngIf"],["mat-dialog-container","","style","position: relative","appToggleDebug","",4,"ngIf"],["mat-dialog-container","","appToggleDebug","",2,"position","relative"],["mat-dialog-actions","",1,"form-header-container",3,"ngClass"],[1,"multi-item-edit-form-header",3,"formId","isCopy","formsAreValid","allControlsAreDisabled","isParentDialog","publishMode","closeDialog","setPublishMode"],[2,"position","relative"],["mat-dialog-content","",1,"u-hide-scrollbar",3,"ngClass"],[1,"mdc-layout-grid"],[1,"mdc-layout-grid__inner"],[1,"mdc-layout-grid__cell--span-12",3,"ngClass"],["slideable",""],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"c-multi-item-dialog__save-container"],[1,"c-multi-item-dialog__save-button"],["mat-fab","",1,"mat-elevation-z24",3,"matTooltip","ngClass","click"],["mat-dialog-actions","",3,"debugInfoOpened",4,"ngIf"],[3,"item","formId","itemFormValueChange"],["mat-dialog-actions","",3,"debugInfoOpened"]],template:function(e,t){1&e&&(E.Nb(0,"router-outlet"),E.Lc(1,Rc,2,1,"ng-container",0),E.fc(2,"async"),E.fc(3,"async"),E.fc(4,"async"),E.fc(5,"async"),E.fc(6,"async"),E.fc(7,"async"),E.fc(8,"async"),E.fc(9,"async"),E.fc(10,"async"),E.fc(11,"async"),E.fc(12,"async")),2&e&&(E.Ab(1),E.kc("ngIf",E.wc(23,$c,[E.gc(2,1,t.items$),E.gc(3,3,t.isCopy$),E.gc(4,5,t.formsAreValid$),E.gc(5,7,t.allControlsAreDisabled$),E.gc(6,9,t.publishMode$),E.gc(7,11,t.reduceSaveButton$),E.gc(8,13,t.debugEnabled$),E.gc(9,15,t.debugInfoIsOpen$),E.gc(10,17,t.hideHeader$),E.gc(11,19,t.slide$),E.gc(12,21,t.eavConfigLoaded$)])))},directives:[nc.e,D.m,ic.a,$a.c,D.k,me.a,yc,$a.e,D.l,V.a,ve.a,ye.a,Zr,Oc],pipes:[D.b,z.d],styles:["@-webkit-keyframes move-next{0%{transform:translateX(0)}49%{transform:translateX(-800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}@keyframes move-next{0%{transform:translateX(0)}49%{transform:translateX(-800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}@-webkit-keyframes move-previous{0%{transform:translateX(0)}49%{transform:translateX(800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(-800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}@keyframes move-previous{0%{transform:translateX(0)}49%{transform:translateX(800px);-webkit-animation-timing-function:step-end;animation-timing-function:step-end}50%{transform:translate(-800px);-webkit-animation-timing-function:ease-out;animation-timing-function:ease-out}to{transform:translateX(0)}}.next[_ngcontent-%COMP%]{-webkit-animation:move-next .2s ease-in;animation:move-next .2s ease-in}.previous[_ngcontent-%COMP%]{-webkit-animation:move-previous .2s ease-in;animation:move-previous .2s ease-in}.multi-item-edit-form-header[_ngcontent-%COMP%]{width:100%}.mat-dialog-content[_ngcontent-%COMP%]{margin:0;padding:0;max-height:calc(100vh - 24px - 52px - 24px)}@media (max-width:600px){.mat-dialog-content[_ngcontent-%COMP%]{max-height:calc(100vh - 52px)}}.mat-dialog-content.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 24px - 52px - 24px) + 52px)!important}@media (max-width:600px){.mat-dialog-content.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 52px) + 52px)!important}}.mat-dialog-content.debug-enabled[_ngcontent-%COMP%]{max-height:calc(100vh - 24px - 52px - 52px - 24px)}@media (max-width:600px){.mat-dialog-content.debug-enabled[_ngcontent-%COMP%]{max-height:calc(100vh - 52px - 52px)}}.mat-dialog-content.debug-enabled.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 24px - 52px - 52px - 24px) + 52px)!important}@media (max-width:600px){.mat-dialog-content.debug-enabled.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 52px - 52px) + 52px)!important}}.mat-dialog-content.debug-enabled.debug-info-is-open[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 24px - 52px - 52px - 24px) - calc(300px + 16px))}@media (max-width:600px){.mat-dialog-content.debug-enabled.debug-info-is-open[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 52px - 52px) - calc(300px + 16px))}}.mat-dialog-content.debug-enabled.debug-info-is-open.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 24px - 52px - 52px - 24px) - calc(300px + 16px) + 52px)!important}@media (max-width:600px){.mat-dialog-content.debug-enabled.debug-info-is-open.hide-header-height-fix[_ngcontent-%COMP%]{max-height:calc(calc(100vh - 52px - 52px) - calc(300px + 16px) + 52px)!important}}.mat-dialog-actions[_ngcontent-%COMP%]{padding:0;margin-bottom:0;z-index:1}.c-multi-item-dialog__save-container[_ngcontent-%COMP%]{z-index:1;position:absolute;bottom:14px;right:24px}@media (max-width:600px){.c-multi-item-dialog__save-container[_ngcontent-%COMP%]{bottom:4px}}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab[_ngcontent-%COMP%]{border-radius:16px 0;overflow:hidden}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab[_ngcontent-%COMP%]    .mat-button-wrapper{padding:0;font-size:14px;height:20px;line-height:20px}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;line-height:20px}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--compact[_ngcontent-%COMP%]{height:48px;width:48px;transition:width 1s}@media (max-width:600px){.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--compact[_ngcontent-%COMP%]{height:42px;width:42px}}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--extended[_ngcontent-%COMP%]{height:48px;width:200px;transition:width 1s}@media (max-width:600px){.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--extended[_ngcontent-%COMP%]{height:42px;width:170px}}.c-multi-item-dialog__save-button[_ngcontent-%COMP%]   .mat-fab--disabled[_ngcontent-%COMP%]{color:rgba(0,0,0,.26);background-color:rgba(29,39,61,.12)}.mdc-layout-grid[_ngcontent-%COMP%]{padding:16px}@media (max-width:600px){.mdc-layout-grid[_ngcontent-%COMP%]{padding:8px 0 0}}"],changeDetection:0}),e}()},kfUh:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("D57K"),a=function(){function e(e){this.zone=e,this.eventListeners=[]}return e.prototype.attach=function(e){var t=this;this.zone.runOutsideAngular((function(){function n(){!function(e){var t,n;try{for(var a=Object(i.h)(e),o=a.next();!o.done;o=a.next())clearTimeout(o.value)}catch(r){t={error:r}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}e.splice(0,e.length)}(windowBodyTimeouts),document.body.classList.add(draggingClass)}function a(){document.body.classList.remove(draggingClass)}e.addEventListener("dragover",n,{passive:!0}),e.addEventListener("drop",a,{passive:!0}),t.eventListeners.push({element:e,type:"dragover",listener:n},{element:e,type:"drop",listener:a})}))},e.prototype.detach=function(){var e=this;this.zone.runOutsideAngular((function(){e.eventListeners.forEach((function(e){e.element.removeEventListener(e.type,e.listener)}))}))},e}()},lnqP:function(e,t,n){"use strict";var i=n("gFym"),a=n("SEb4");t.a=function(e,t,n){var o=t(e);return Object(a.a)(e)?o:Object(i.a)(o,n(e))}},mY74:function(e,t,n){"use strict";var i=n("fw2E");t.a=i.a.Uint8Array},qd5q:function(e,t,n){"use strict";var i=n("NUo7"),a=Object.prototype.propertyIsEnumerable,o=Object.getOwnPropertySymbols;t.a=o?function(e){return null==e?[]:(e=Object(e),function(t,n){for(var i=-1,o=null==t?0:t.length,r=0,c=[];++i<o;){var s=t[i];a.call(e,s)&&(c[r++]=s)}return c}(o(e)))}:i.a},qzOT:function(e,t){var n;!function(e){!function(t){var n="object"==typeof global?global:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),i=a(e);function a(e,t){return function(n,i){"function"!=typeof e[n]&&Object.defineProperty(e,n,{configurable:!0,writable:!0,value:i}),t&&t(n,i)}}void 0===n.Reflect?n.Reflect=e:i=a(n.Reflect,i),function(e){var t=Object.prototype.hasOwnProperty,n="function"==typeof Symbol,i=n&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",a=n&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,r={__proto__:[]}instanceof Array,c=!o&&!r,s={create:o?function(){return T(Object.create(null))}:r?function(){return T({__proto__:null})}:function(){return T({})},has:c?function(e,n){return t.call(e,n)}:function(e,t){return t in e},get:c?function(e,n){return t.call(e,n)?e[n]:void 0}:function(e,t){return e[t]}},l=Object.getPrototypeOf(Function),d="object"==typeof process&&process.env&&"true"===process.env.REFLECT_METADATA_USE_MAP_POLYFILL,u=d||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var e={},t=[],n=function(){function e(e,t,n){this._index=0,this._keys=e,this._values=t,this._selector=n}return e.prototype["@@iterator"]=function(){return this},e.prototype[a]=function(){return this},e.prototype.next=function(){var e=this._index;if(e>=0&&e<this._keys.length){var n=this._selector(this._keys[e],this._values[e]);return e+1>=this._keys.length?(this._index=-1,this._keys=t,this._values=t):this._index++,{value:n,done:!1}}return{value:void 0,done:!0}},e.prototype.throw=function(e){throw this._index>=0&&(this._index=-1,this._keys=t,this._values=t),e},e.prototype.return=function(e){return this._index>=0&&(this._index=-1,this._keys=t,this._values=t),{value:e,done:!0}},e}();return function(){function t(){this._keys=[],this._values=[],this._cacheKey=e,this._cacheIndex=-2}return Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),t.prototype.has=function(e){return this._find(e,!1)>=0},t.prototype.get=function(e){var t=this._find(e,!1);return t>=0?this._values[t]:void 0},t.prototype.set=function(e,t){var n=this._find(e,!0);return this._values[n]=t,this},t.prototype.delete=function(t){var n=this._find(t,!1);if(n>=0){for(var i=this._keys.length,a=n+1;a<i;a++)this._keys[a-1]=this._keys[a],this._values[a-1]=this._values[a];return this._keys.length--,this._values.length--,t===this._cacheKey&&(this._cacheKey=e,this._cacheIndex=-2),!0}return!1},t.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=e,this._cacheIndex=-2},t.prototype.keys=function(){return new n(this._keys,this._values,i)},t.prototype.values=function(){return new n(this._keys,this._values,o)},t.prototype.entries=function(){return new n(this._keys,this._values,r)},t.prototype["@@iterator"]=function(){return this.entries()},t.prototype[a]=function(){return this.entries()},t.prototype._find=function(e,t){return this._cacheKey!==e&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=e)),this._cacheIndex<0&&t&&(this._cacheIndex=this._keys.length,this._keys.push(e),this._values.push(void 0)),this._cacheIndex},t}();function i(e,t){return e}function o(e,t){return t}function r(e,t){return[e,t]}}():Map,p=d||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function e(){this._map=new u}return Object.defineProperty(e.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),e.prototype.has=function(e){return this._map.has(e)},e.prototype.add=function(e){return this._map.set(e,e),this},e.prototype.delete=function(e){return this._map.delete(e)},e.prototype.clear=function(){this._map.clear()},e.prototype.keys=function(){return this._map.keys()},e.prototype.values=function(){return this._map.values()},e.prototype.entries=function(){return this._map.entries()},e.prototype["@@iterator"]=function(){return this.keys()},e.prototype[a]=function(){return this.keys()},e}():Set,f=new(d||"function"!=typeof WeakMap?function(){var e=s.create(),n=i();return function(){function e(){this._key=i()}return e.prototype.has=function(e){var t=a(e,!1);return void 0!==t&&s.has(t,this._key)},e.prototype.get=function(e){var t=a(e,!1);return void 0!==t?s.get(t,this._key):void 0},e.prototype.set=function(e,t){return a(e,!0)[this._key]=t,this},e.prototype.delete=function(e){var t=a(e,!1);return void 0!==t&&delete t[this._key]},e.prototype.clear=function(){this._key=i()},e}();function i(){var t;do{t="@@WeakMap@@"+r()}while(s.has(e,t));return e[t]=!0,t}function a(e,i){if(!t.call(e,n)){if(!i)return;Object.defineProperty(e,n,{value:s.create()})}return e[n]}function o(e,t){for(var n=0;n<t;++n)e[n]=255*Math.random()|0;return e}function r(){var e,t=(e=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(e)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(e)):o(new Uint8Array(e),e):o(new Array(e),e));t[6]=79&t[6]|64,t[8]=191&t[8]|128;for(var n="",i=0;i<16;++i){var a=t[i];4!==i&&6!==i&&8!==i||(n+="-"),a<16&&(n+="0"),n+=a.toString(16).toLowerCase()}return n}}():WeakMap);function g(e,t,n){var i=f.get(e);if(w(i)){if(!n)return;i=new u,f.set(e,i)}var a=i.get(t);if(w(a)){if(!n)return;a=new u,i.set(t,a)}return a}function b(e,t,n){var i=g(t,n,!1);return!w(i)&&!!i.has(e)}function h(e,t,n){var i=g(t,n,!1);if(!w(i))return i.get(e)}function m(e,t,n,i){g(n,i,!0).set(e,t)}function v(e,t){var n=[],i=g(e,t,!1);if(w(i))return n;for(var o=function(e){var t=M(e,a);if(!k(t))throw new TypeError;var n=t.call(e);if(!_(n))throw new TypeError;return n}(i.keys()),r=0;;){var c=I(o);if(!c)return n.length=r,n;var s=c.value;try{n[r]=s}catch(l){try{A(o)}finally{throw l}}r++}}function y(e){if(null===e)return 1;switch(typeof e){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===e?1:6;default:return 6}}function w(e){return void 0===e}function x(e){return null===e}function _(e){return"object"==typeof e?null!==e:"function"==typeof e}function C(e){var t=function(e,t){switch(y(e)){case 0:case 1:case 2:case 3:case 4:case 5:return e}var n=3===t?"string":5===t?"number":"default",a=M(e,i);if(void 0!==a){var o=a.call(e,n);if(_(o))throw new TypeError;return o}return function(e,t){if("string"===t){var n=e.toString;if(k(n)&&!_(a=n.call(e)))return a;if(k(i=e.valueOf)&&!_(a=i.call(e)))return a}else{var i;if(k(i=e.valueOf)&&!_(a=i.call(e)))return a;var a,o=e.toString;if(k(o)&&!_(a=o.call(e)))return a}throw new TypeError}(e,"default"===n?"number":n)}(e,3);return"symbol"==typeof t?t:function(e){return""+e}(t)}function O(e){return Array.isArray?Array.isArray(e):e instanceof Object?e instanceof Array:"[object Array]"===Object.prototype.toString.call(e)}function k(e){return"function"==typeof e}function S(e){return"function"==typeof e}function M(e,t){var n=e[t];if(null!=n){if(!k(n))throw new TypeError;return n}}function I(e){var t=e.next();return!t.done&&t}function A(e){var t=e.return;t&&t.call(e)}function P(e){var t=Object.getPrototypeOf(e);if("function"!=typeof e||e===l)return t;if(t!==l)return t;var n=e.prototype,i=n&&Object.getPrototypeOf(n);if(null==i||i===Object.prototype)return t;var a=i.constructor;return"function"!=typeof a||a===e?t:a}function T(e){return e.__=void 0,delete e.__,e}e("decorate",(function(e,t,n,i){if(w(n)){if(!O(e))throw new TypeError;if(!S(t))throw new TypeError;return function(e,t){for(var n=e.length-1;n>=0;--n){var i=(0,e[n])(t);if(!w(i)&&!x(i)){if(!S(i))throw new TypeError;t=i}}return t}(e,t)}if(!O(e))throw new TypeError;if(!_(t))throw new TypeError;if(!_(i)&&!w(i)&&!x(i))throw new TypeError;return x(i)&&(i=void 0),function(e,t,n,i){for(var a=e.length-1;a>=0;--a){var o=(0,e[a])(t,n,i);if(!w(o)&&!x(o)){if(!_(o))throw new TypeError;i=o}}return i}(e,t,n=C(n),i)})),e("metadata",(function(e,t){return function(n,i){if(!_(n))throw new TypeError;if(!w(i)&&!function(e){switch(y(e)){case 3:case 4:return!0;default:return!1}}(i))throw new TypeError;m(e,t,n,i)}})),e("defineMetadata",(function(e,t,n,i){if(!_(n))throw new TypeError;return w(i)||(i=C(i)),m(e,t,n,i)})),e("hasMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=C(n)),function e(t,n,i){if(b(t,n,i))return!0;var a=P(n);return!x(a)&&e(t,a,i)}(e,t,n)})),e("hasOwnMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=C(n)),b(e,t,n)})),e("getMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=C(n)),function e(t,n,i){if(b(t,n,i))return h(t,n,i);var a=P(n);return x(a)?void 0:e(t,a,i)}(e,t,n)})),e("getOwnMetadata",(function(e,t,n){if(!_(t))throw new TypeError;return w(n)||(n=C(n)),h(e,t,n)})),e("getMetadataKeys",(function(e,t){if(!_(e))throw new TypeError;return w(t)||(t=C(t)),function e(t,n){var i=v(t,n),a=P(t);if(null===a)return i;var o=e(a,n);if(o.length<=0)return i;if(i.length<=0)return o;for(var r=new p,c=[],s=0,l=i;s<l.length;s++)r.has(f=l[s])||(r.add(f),c.push(f));for(var d=0,u=o;d<u.length;d++){var f;r.has(f=u[d])||(r.add(f),c.push(f))}return c}(e,t)})),e("getOwnMetadataKeys",(function(e,t){if(!_(e))throw new TypeError;return w(t)||(t=C(t)),v(e,t)})),e("deleteMetadata",(function(e,t,n){if(!_(t))throw new TypeError;w(n)||(n=C(n));var i=g(t,n,!1);if(w(i))return!1;if(!i.delete(e))return!1;if(i.size>0)return!0;var a=f.get(t);return a.delete(n),a.size>0||f.delete(t),!0}))}(i)}()}(n||(n={}))}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.02/ng-edit/multi-item-edit-form-component.65c853ca93acfbd45412.js.map