"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["common"],{1657:(v,m,t)=>{t.d(m,{E:()=>d});var e=t(9148),o=t(5060),l=t(6256),u=t(3840),h=t(4824),c=t(8136),r=t(4601);function s(p,_){if(1&p){const g=e.RV6();e.j41(0,"div",2),e.bIt("click",function(){e.eBV(g);const I=e.XpG();return e.Njj(I.openLightspeedFeatureInfo())}),e.j41(1,"mat-icon",3),e.EFF(2," bolt "),e.k0s()()}}function a(p,_){1&p&&(e.j41(0,"mat-icon",5),e.EFF(1," bolt "),e.k0s())}function n(p,_){1&p&&(e.j41(0,"mat-icon",6),e.EFF(1," bolt "),e.k0s())}function i(p,_){if(1&p){const g=e.RV6();e.j41(0,"div",4),e.bIt("click",function(){e.eBV(g);const I=e.XpG();return e.Njj(I.openLightspeed())}),e.DNE(1,a,2,0,"mat-icon",5)(2,n,2,0,"mat-icon",6),e.k0s()}if(2&p){const g=e.XpG();e.ZvI("eav-grid-action-button ",g.appHasLightSpeed?"":"disabled",""),e.Y8G("tippy",g.appHasLightSpeed?g.lightSpeed.Title:"Not yet configured for LightSpeed"),e.R7$(),e.vxM(g.appLightSpeedEnabled?1:2)}}let d=(()=>{class p{constructor(){this.features=(0,e.WQX)(h.t),this.lightSpeedEnabled=this.features.isEnabled[c.T.LightSpeed]}get appHasLightSpeed(){return null!=this.lightSpeed?.Id}get appLightSpeedEnabled(){return 1==this.lightSpeed?.IsEnabled}openLightspeed(){this.params.onOpenLightspeed(this.lightSpeedOwner)}openLightspeedFeatureInfo(){this.params.openLightspeedFeatureInfo()}static{this.\u0275fac=function(f){return new(f||p)}}static{this.\u0275cmp=e.VBU({type:p,selectors:[["app-lightspeed-action"]],inputs:{lightSpeedOwner:"lightSpeedOwner",params:"params",lightSpeed:"lightSpeed"},standalone:!0,features:[e.aNF],decls:2,vars:1,consts:[["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled"],["matRipple","",3,"class","tippy"],["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled",3,"click"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false"],["matRipple","",3,"click","tippy"],["matBadgeSize","small","matBadge","\u2705","matBadgePosition","below after","aria-hidden","false"],["matBadgeSize","small","matBadge","\u26d4","matBadgePosition","below after","aria-hidden","false"]],template:function(f,I){1&f&&e.DNE(0,s,3,0,"div",0)(1,i,3,5,"div",1),2&f&&e.vxM(I.lightSpeedEnabled()?1:0)},dependencies:[r.e,u.m_,u.An,l.Y,l.k,o.pZ,o.r6],encapsulation:2})}}return p})()},8713:(v,m,t)=>{t.d(m,{g:()=>l});var e=t(52),o=t(334);class l{static getLightSpeedEditParams(h){return{items:[o.c.newMetadata(h,e.YX.appMetadata.LightSpeed.ContentTypeName,e.YX.metadata.app,!0)]}}}},8362:(v,m,t)=>{t.d(m,{l:()=>h});var e=t(271),o=t(1772),l=t(6474),u=t(9148);let h=(()=>{class c extends l.D{getStack(s,a,n,i=!1){return this.http.get(this.apiUrl(o.u+"GetStack"),{params:{appId:this.appId,part:s,...a&&{key:a},...n&&{view:n}}}).pipe((0,e.T)(d=>{if(!i)return d;for(const p of d)p._value=JSON.stringify(p.Value);return d}))}static{this.\u0275fac=(()=>{let s;return function(n){return(s||(s=u.xGo(c)))(n||c)}})()}static{this.\u0275prov=u.jDH({token:c,factory:c.\u0275fac})}}return c})()},1423:(v,m,t)=>{t.d(m,{g:()=>r});var e=t(5060),o=t(2938),l=t(4601),u=t(4038),h=t(5081),c=t(9148);let r=(()=>{class s{constructor(){this.clipboard=(0,o.d)(h.W)}agInit(n){this.value=n.value}refresh(n){return!0}copy(n){n=u.i.tryParse(n)??n,this.clipboard.copyToClipboard(n)}static{this.\u0275fac=function(i){return new(i||s)}}static{this.\u0275cmp=c.VBU({type:s,selectors:[["app-analyze-settings-value"]],standalone:!0,features:[c.aNF],decls:3,vars:2,consts:[["matRipple","",1,"value-box","highlight",3,"click","tippy"],[1,"value"]],template:function(i,d){1&i&&(c.j41(0,"div",0),c.bIt("click",function(){return d.copy(d.value)}),c.j41(1,"span",1),c.EFF(2),c.k0s()()),2&i&&(c.Y8G("tippy",d.value),c.R7$(2),c.JRh(d.value))},dependencies:[e.pZ,e.r6,l.e],styles:[".value-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.value-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}"]})}}return s})()},1191:(v,m,t)=>{t.d(m,{O:()=>g});var e=t(9148),o=t(4175),l=t(3777),u=t(7941),h=t(3840),c=t(852),r=t(2938),s=t(9914),a=t(5081),n=t(7993),i=t(3347);function d(f,I){if(1&f&&(e.j41(0,"div",1)(1,"div",2),e.EFF(2),e.nI1(3,"translate"),e.k0s(),e.j41(4,"div",3)(5,"span"),e.EFF(6),e.nI1(7,"translate"),e.k0s()()()),2&f){const D=e.XpG();e.R7$(2),e.SpI("",e.bMT(3,2,"Features.Status"),":"),e.R7$(4),e.JRh(e.bMT(7,4,D.feature().isEnabled?"Features.Active":"Features.NotActive"))}}function p(f,I){if(1&f){const D=e.RV6();e.j41(0,"div",1)(1,"div",2),e.EFF(2,"GUID:"),e.k0s(),e.j41(3,"div",8)(4,"span",4),e.bIt("click",function(){e.eBV(D);const E=e.XpG();return e.Njj(E.clipboard.copyToClipboard(E.feature().guid))}),e.EFF(5),e.k0s()()()}if(2&f){const D=e.XpG();e.R7$(5),e.JRh(D.feature().guid)}}function _(f,I){if(1&f){const D=e.RV6();e.j41(0,"button",9),e.bIt("click",function(){e.eBV(D);const E=e.XpG();return e.Njj(E.dialog.close())}),e.EFF(1,"Close"),e.k0s()}}let g=(()=>{class f{constructor(D,C,E){this.dialogSpecs=D,this.dialog=C,this.snackBar=E,this.specs=(0,e.hFB)(),this.mySpecs=(0,n.bo)("mySpecs",()=>this.dialogSpecs??this.specs()),this.feature=(0,n.bo)("feature",()=>this.mySpecs().feature),this.clipboard=(0,r.d)(a.W)}static{this.\u0275fac=function(C){return new(C||f)(e.rXU(u.Vh,8),e.rXU(u.CP),e.rXU(i.UG))}}static{this.\u0275cmp=e.VBU({type:f,selectors:[["app-feature-details-dialog"]],inputs:{specs:[1,"specs"]},standalone:!0,features:[e.aNF],decls:27,vars:10,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"click"],["align","end"],["target","_blank","mat-raised-button","","color","accent",1,"eav-card-action-button",3,"href"],["mat-raised-button","",1,"eav-card-action-button"],[1,"eav-info-row__value","eav_click"],["mat-raised-button","",1,"eav-card-action-button",3,"click"]],template:function(C,E){1&C&&(e.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),e.EFF(3),e.k0s()(),e.j41(4,"mat-card-content"),e.nrm(5,"p",0),e.nI1(6,"safeHtml"),e.j41(7,"div",1)(8,"div",2),e.EFF(9,"ID:"),e.k0s(),e.j41(10,"div",3)(11,"span",4),e.bIt("click",function(){return E.clipboard.copyToClipboard(E.feature().nameId)}),e.EFF(12),e.k0s()()(),e.DNE(13,d,8,6,"div",1)(14,p,6,1,"div",1),e.j41(15,"div",1)(16,"div",2),e.EFF(17,"Security Rating:"),e.k0s(),e.j41(18,"div",3)(19,"span"),e.EFF(20),e.k0s()()()(),e.j41(21,"mat-card-actions",5)(22,"a",6)(23,"mat-icon"),e.EFF(24,"open_in_new"),e.k0s(),e.EFF(25," Find out more "),e.k0s(),e.DNE(26,_,2,0,"button",7),e.k0s()()),2&C&&(e.R7$(3),e.JRh(E.feature().name),e.R7$(2),e.Y8G("innerHtml",e.bMT(6,8,E.feature().description),e.npT),e.R7$(7),e.JRh(E.feature().nameId),e.R7$(),e.vxM(E.mySpecs().showStatus?13:-1),e.R7$(),e.vxM(E.mySpecs().showGuid?14:-1),e.R7$(6),e.JRh(E.feature().security.Impact+": "+E.feature().security.Message),e.R7$(2),e.Y8G("href",E.feature().link,e.B4B),e.R7$(4),e.vxM(0!=E.mySpecs().showClose?26:-1))},dependencies:[l.Hu,l.RN,l.YY,l.m2,l.MM,l.dh,o.Hl,o.It,o.$z,h.m_,h.An,s.$,c.h,c.D9],encapsulation:2})}}return f})()},3583:(v,m,t)=>{t.d(m,{U:()=>u});var e=t(1772),o=t(6474),l=t(9148);let u=(()=>{class h extends o.D{getAll(){return this.http.get(this.apiUrl(e.u+"list"),{params:{zoneId:this.zoneId}})}getInheritable(){return this.http.get(this.apiUrl(e.u+"InheritableApps"),{params:{zoneId:this.zoneId}})}getPendingApps(){return this.http.get(this.apiUrl(e.u+"GetPendingApps"),{params:{zoneId:this.zoneId}})}create(r,s,a){return this.http.post(this.apiUrl(e.u+"app"),{},{params:{zoneId:this.zoneId,name:r,...null!=s&&{inheritAppId:s},...null!=a&&{templateId:a}}})}installPendingApps(r){return this.http.post(this.apiUrl(e.u+"InstallPendingApps"),r,{params:{zoneId:this.zoneId}})}delete(r){return this.http.delete(this.apiUrl(e.u+"app"),{params:{zoneId:this.zoneId,appId:r.toString()}})}flushCache(r){return this.http.get(this.apiUrl(e.u+"flushcache"),{params:{zoneId:this.zoneId,appId:r.toString()}})}static{this.\u0275fac=(()=>{let r;return function(a){return(r||(r=l.xGo(h)))(a||h)}})()}static{this.\u0275prov=l.jDH({token:h,factory:h.\u0275fac})}}return h})()},3992:(v,m,t)=>{t.d(m,{b:()=>n});var e=t(271),o=t(3550),l=t(6474),u=t(9148);let n=(()=>{class i extends l.D{saveFeatures(p){return this.http.post(this.apiUrl("admin/feature/SaveNew"),p)}getLicenses(){return this.http.get(this.apiUrl("sys/license/Summary"))}uploadLicense(p){const _=new FormData;return _.append("File",p),this.http.post(this.apiUrl("sys/license/Upload"),_).pipe((0,e.T)(g=>({Success:g.Success,Messages:[{MessageType:g.Success?o.G1.Success:o.G1.Error,Text:`License ${g.Success?"uploaded":"upload failed"}: ${g.Message}`}]})))}retrieveLicense(){return this.http.get(this.apiUrl("sys/license/Retrieve"))}static{this.\u0275fac=(()=>{let p;return function(g){return(p||(p=u.xGo(i)))(g||i)}})()}static{this.\u0275prov=u.jDH({token:i,factory:i.\u0275fac})}}return i})()},7130:(v,m,t)=>{t.d(m,{U:()=>h});var e=t(1772),o=t(6474),l=t(9148);const u="admin/zone/";let h=(()=>{class c extends o.D{getLanguages(){return this.http.get(this.apiUrl(u+"GetLanguages"))}toggleLanguage(s,a){return this.http.get(this.apiUrl(u+"SwitchLanguage"),{params:{cultureCode:s,enable:a.toString()}})}getSystemInfo(){return this.http.get(this.apiUrl(u+"GetSystemInfo"))}getLanguagesPermissions(){return this.http.get(this.apiUrl(e.u+"languages"),{params:{appId:this.appId}})}static{this.\u0275fac=(()=>{let s;return function(n){return(s||(s=l.xGo(c)))(n||c)}})()}static{this.\u0275prov=l.jDH({token:c,factory:c.\u0275fac})}}return c})()},753:(v,m,t)=>{t.r(m),t.d(m,{contentItemsRoutes:()=>r});var e=t(3454),o=t(5544),l=t(9204);const u={name:"IMPORT_CONTENT_ITEM_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,l.A)(function*(){const{ImportContentItemComponent:s}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("common"),t.e("projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-ca2267")]).then(t.bind(t,6754));return s})()},h={name:"CONTENT_ITEMS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,l.A)(function*(){const{ContentItemsComponent:s}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-node_modules_angular_material_fesm2022_menu_mjs"),t.e("default-node_modules_angular_material_fesm2022_slide-toggle_mjs"),t.e("default-projects_eav-ui_src_app_content-export_services_content-export_service_ts-projects_ea-1f4231"),t.e("common"),t.e("projects_eav-ui_src_app_content-items_content-items_component_ts-projects_eav-ui_src_app_shar-cb00d9")]).then(t.bind(t,7730));return s})()};var c=t(1195);const r=[{path:"",component:o.DialogEntryComponent,data:{dialog:h},children:[...e.H.getRoutes(),{path:"export/:contentTypeStaticName",loadChildren:()=>t.e("projects_eav-ui_src_app_content-export_content-export_routing_ts").then(t.bind(t,4350)).then(s=>s.ContentExportRoutes)},{path:"export/:contentTypeStaticName/:selectedIds",loadChildren:()=>t.e("projects_eav-ui_src_app_content-export_content-export_routing_ts").then(t.bind(t,4350)).then(s=>s.ContentExportRoutes)},{path:"import",component:o.DialogEntryComponent,data:{dialog:u}},{path:":contentTypeStaticName/import",loadChildren:()=>t.e("projects_eav-ui_src_app_content-import_content-import_routing_ts").then(t.bind(t,3031)).then(s=>s.contentImportRoutes),data:{title:"Import Items"}},...c.RD]}]},336:(v,m,t)=>{t.d(m,{F:()=>a});var e=t(4600),o=t(6647),l=t(271),u=t(5959),h=t(693),c=t(9234),r=t(6474),s=t(9148);let a=(()=>{class n extends r.D{getAll(d){return this.http.get(this.apiUrl(c.Gg),{params:{appId:this.appId,contentType:d}})}getColumns(d){return this.http.get(this.apiUrl(u.z),{params:{appId:this.appId,staticName:d}})}importItem(d){return(0,e.H)((0,h.n)(d)).pipe((0,o.n)(p=>this.http.post(this.apiUrl(c.gb+"upload"),{AppId:this.appId,ContentBase64:p})),(0,l.T)(p=>({Success:p,Messages:[]})))}static{this.\u0275fac=(()=>{let d;return function(_){return(d||(d=s.xGo(n)))(_||n)}})()}static{this.\u0275prov=s.jDH({token:n,factory:n.\u0275fac})}}return n})()},5733:(v,m,t)=>{t.r(m),t.d(m,{contentTypeFieldsRoutes:()=>s});var e=t(3454),o=t(2437),l=t(5544),u=t(9204);const h={name:"CONTENT_TYPE_FIELDS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,u.A)(function*(){const{ContentTypeFieldsComponent:a}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_services_clipboard_service_ts-node_modules_angular_mat-15cf82"),t.e("default-node_modules_angular_material_fesm2022_menu_mjs"),t.e("default-projects_eav-ui_src_app_features_feature-icon-text_feature-icon-text_component_ts-pro-46e349"),t.e("default-projects_eav-ui_src_app_app-administration_constants_field-name_patterns_ts-projects_-231ca0"),t.e("projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts")]).then(t.bind(t,5715));return a})()},c={name:"EDIT_CONTENT_TYPE_FIELDS_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,u.A)(function*(){const{EditContentTypeFieldsComponent:a}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_app-administration_constants_field-name_patterns_ts-projects_-231ca0"),t.e("projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-6790f5")]).then(t.bind(t,4099));return a})()};var r=t(1195);const s=[{path:"",component:l.DialogEntryComponent,data:{dialog:h},children:[{path:"add/:contentTypeStaticName",component:l.DialogEntryComponent,data:{dialog:c}},{path:"update/:contentTypeStaticName/:id/:editMode",component:l.DialogEntryComponent,data:{dialog:c}},...e.H.getRoutes(),o.k.route,...r.RD]}]},6068:(v,m,t)=>{t.d(m,{g:()=>e.g});var e=t(4029)},6740:(v,m,t)=>{t.d(m,{z:()=>o});const o=t(6619).c.production?[]:["ViewController"]},8857:(v,m,t)=>{t.d(m,{a:()=>s});var e=t(2434),o=t(4435),l=t(6740),u=t(6953),h=t(8275);const c={all:!0,constructor:!1,markTouched:!1,set:!1,disable:!1,getErrors:!0,fields:[...l.z,"minValue"]},r="ValidationMessage.";class s{constructor(n,i="unknown",d=!1){this.control=n,this.name=i,this.moreDisabled=d,this.log=(0,o.T)({UiControl:s},c),this.#t={jsonWarning:`${r}JsonWarning`,formulaWarning:`${r}NotValid`},this.control??={dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1},this.log.extendName(`[${i}]`),this.log.aIfInList("fields",this.name,{moreDisabled:d},"constructor")}static emptyControl(){return new s({dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1})}get dirty(){return this.control.dirty}get invalid(){return this.control.invalid}get touched(){return this.control.touched}get disabled(){return this.control.disabled||this.moreDisabled}get touchedAndInvalid(){return this.control.touched&&this.control.invalid}markTouched(){this.log.aIfInList("fields",this.name,null,"markTouched"),s.markTouched(this.control)}setIfChanged(n){this.log.aIfInList("fields",this.name,{before:this.control.value,newValue:n},"setIfChanged"),!(0,e.A)(n,this.control.value)&&this.set(n)}set(n){const i=this.control,d=i.value;this.log.aIfInList("fields",this.name,{before:d,newValue:n},"set"),i.touched||i.markAsTouched(),!i.dirty&&!u.$.fieldValuesAreEqual(d,n)&&i.markAsDirty(),i.patchValue(n)}disable(n){this.log.aIfInList("fields",this.name,null,`disable: ${n}`),s.disable(this.control,n)}static markTouched(n){n.touched||(n.markAsTouched(),n.updateValueAndValidity())}static disable(n,i){n.disabled!==i&&(i?n.disable():n.enable())}getErrors(n){const i=this.control,d=this.log.fnIfInList("getErrors","fields",n.fieldName,{control:i,config:n});if(!i.invalid)return d.r("","valid");if(!i.dirty&&!i.touched)return d.r("","not dirty or touched");for(const p of Object.keys(i.errors)){const _="formulaError"===p?i.errors.formulaMessage??h.n.validationMessages[p]?.(n):h.n.validationMessages[p]?.(n);if(_)return d.r(_,"error found")}return d.r("","no error")}#t;getWarnings(){const n=this.control;if(null==n._warning$.value||!n.dirty&&!n.touched)return"";let i="";for(const d of Object.keys(n._warning$.value))if(i="formulaWarning"===d?n._warning$.value.formulaMessage??this.#t[d]:this.#t[d],i)break;return i}}},6953:(v,m,t)=>{t.d(m,{$:()=>o});var e=t(3826);class o{static fieldValuesAreEqual(u,h){return!!(u===h||"number"==typeof u&&"number"==typeof h&&isNaN(u)&&isNaN(h)||Array.isArray(u)&&Array.isArray(h)&&e.a.arraysEqual(u,h))}static getItemValuesChanges(u,h){const c={};for(const r of Object.keys(h)){const s=h[r];o.fieldValuesAreEqual(s,u[r])||(c[r]=s)}return 0===Object.keys(c).length?void 0:c}}},8275:(v,m,t)=>{t.d(m,{n:()=>l});var e=t(8857);const o="ValidationMessage.";let l=(()=>{class u{static{this.validationMessages={required:c=>c?`${o}Required`:`${o}RequiredShort`,min:c=>c?`${o}Min`:`${o}NotValid`,max:c=>c?`${o}Max`:`${o}NotValid`,minNoItems:c=>c?`${o}MinNoItems`:`${o}NotValid`,maxNoItems:c=>c?`${o}MaxNoItems`:`${o}NotValid`,pattern:c=>c?`${o}Pattern`:`${o}NotValid`,decimals:c=>c?`${o}Decimals`:`${o}NotValid`,jsonError:c=>c?`${o}JsonError`:`${o}NotValid`,formulaError:c=>`${o}NotValid`}}static validateForm(c){const r={};for(const[s,a]of Object.entries(c.controls))if(e.a.markTouched(a),a.invalid)for(const n of Object.keys(a.errors))if(r[s]=this.validationMessages[n]?.(void 0),r[s])break;return r}}return u})()},7903:(v,m,t)=>{t.r(m),t.d(m,{importRoutes:()=>u});var e=t(5544),o=t(9204);const u=[{path:"",component:e.DialogEntryComponent,data:{dialog:{name:"IMPORT_APP_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,o.A)(function*(){const{ImportAppComponent:h}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("projects_eav-ui_src_app_import-app_import-app_component_ts")]).then(t.bind(t,781));return h})()}}}]},9669:(v,m,t)=>{t.d(m,{y:()=>u});var e=t(6474),o=t(9148);const l="cms/contentgroup/";let u=(()=>{class h extends e.D{getItems(r){return this.http.get(this.apiUrl(l+"replace"),{params:{appId:this.appId,guid:r.guid,part:r.part,index:r.index.toString()}})}saveItem(r){return this.http.post(this.apiUrl(l+"replace"),{},{params:{guid:r.guid,part:r.part,index:r.index.toString(),entityId:r.id.toString(),add:`${r.add}`}})}removeItem(r,s){return this.http.delete(this.apiUrl("cms/list/delete"),{params:{index:s,parent:r.guid,fields:r.part}})}getList(r){return this.http.get(this.apiUrl(l+"itemlist"),{params:{appId:this.appId,guid:r.guid,part:r.part}})}saveList(r,s){return this.http.post(this.apiUrl(l+"itemlist"),s,{params:{appId:this.appId,guid:r.guid,part:r.part}})}getHeader(r){return this.http.get(this.apiUrl(l+"header"),{params:{appId:this.appId,guid:r.guid}})}static{this.\u0275fac=(()=>{let r;return function(a){return(r||(r=o.xGo(h)))(a||h)}})()}static{this.\u0275prov=o.jDH({token:h,factory:h.\u0275fac})}}return h})()},8801:(v,m,t)=>{t.d(m,{K:()=>c});var e=t(9148);const l="area, base, br, col, embed, hr, img, input, link, meta, param, source, track, wbr".split(",").map(r=>r.trim().toLocaleLowerCase());class u{constructor(s,a,n,i,d,p,_){this.monaco=s,this.filename=a,this.snippets=p,this.tooltips=_,this.globalCache=this.createGlobalCache(s),this.defineThemes(this.globalCache,this.monaco),this.cachedValue=n,this.editorInstance=this.createInstance(this.monaco,a,n,i,d),this.completionItemProviders=this.addSnippets(this.monaco,this.editorInstance),this.resizeObserver=this.createResizeObserver(i,this.editorInstance),this.restoreState(this.globalCache,this.editorInstance),this.addEvents(this.editorInstance)}destroy(){this.saveState(this.globalCache,this.editorInstance),this.resizeObserver.disconnect(),this.completionItemProviders.forEach(s=>s.dispose()),this.jsTypingsLib?.dispose(),this.editorInstance.getModel().dispose(),this.editorInstance.dispose()}updateValue(s){this.cachedValue!==s&&(this.cachedValue=s,this.editorInstance.getModel().setValue(s))}focus(){this.editorInstance.focus()}onValueChange(s){this.valueChangedCallback=s}onFocus(s){this.focusedCallback=s}onBlur(s){this.blurredCallback=s}insertSnippet(s){this.editorInstance.getContribution("snippetController2").insert(s)}setSnippets(s){this.snippets=s}setTooltips(s){this.tooltips=s}setJsonSchema(s){const a=this.editorInstance.getModel().uri.toString(),n=this.monaco.languages.json.jsonDefaults.diagnosticsOptions,i=n.schemas?.some(_=>_.fileMatch[0]===a)??!1,d="link"===s?.type?{uri:s.value,fileMatch:[a]}:"raw"===s?.type?{uri:a,fileMatch:[a],schema:JSON.parse(s.value)}:void 0;if(!i&&!d)return;const p={...n,enableSchemaRequest:!0,schemas:i&&!d?n.schemas.filter(_=>_.fileMatch[0]!==a):i?n.schemas.map(_=>_.fileMatch[0]===a?d:_):[...n.schemas??[],d]};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(p)}setJsonComments(s){if(!s)return;const a={...this.monaco.languages.json.jsonDefaults.diagnosticsOptions,comments:s};this.monaco.languages.json.jsonDefaults.setDiagnosticsOptions(a)}setJsDiagnostics(s){if(!s)return;const a={...this.monaco.languages.typescript.javascriptDefaults.getDiagnosticsOptions(),...s};this.monaco.languages.typescript.javascriptDefaults.setDiagnosticsOptions(a)}setJsTypings(s){s?this.jsTypingsLib=this.monaco.languages.typescript.javascriptDefaults.addExtraLib(s,`js-typings-${this.filename}`):this.jsTypingsLib?.dispose()}createGlobalCache(s){return null==s._2sxc&&(s._2sxc={themesAreDefined:!1,savedStates:{}}),s._2sxc}defineThemes(s,a){s.themesAreDefined||(s.themesAreDefined=!0,a.editor.defineTheme("2sxc-dark",{base:"vs-dark",inherit:!0,rules:[{token:"metatag.cs",foreground:"ffff00"}],colors:{}}))}createInstance(s,a,n,i,d){const p=s.editor.create(i,d),_=s.Uri.file(a),g=s.editor.createModel(n,void 0,_);return p.setModel(g),p}saveState(s,a){const n=a.getModel().uri.toString(),i=JSON.stringify(a.saveViewState());null==s.savedStates[n]?s.savedStates[n]={viewState:i}:s.savedStates[n].viewState=i}restoreState(s,a){const n=a.getModel().uri.toString(),i=s.savedStates[n];if(null==i)return;const d=JSON.parse(i.viewState);a.restoreViewState(d)}addSnippets(s,a){return[s.languages.registerCompletionItemProvider(a.getModel().getLanguageId(),{triggerCharacters:[">"],provideCompletionItems:(i,d)=>{if(a.getModel()!==i)return{suggestions:[]};const p=i.getValueInRange({startLineNumber:d.lineNumber,startColumn:1,endLineNumber:d.lineNumber,endColumn:d.column});if(">"!==p[p.length-1])return{suggestions:[]};const g=p.lastIndexOf("<");if(-1===g)return{suggestions:[]};const f=p.substring(g);let I=0;if(Array.from(f).forEach(P=>{'"'===P&&I++}),I%2!=0)return{suggestions:[]};if(f.startsWith("</"))return{suggestions:[]};if(f.indexOf(">")!==f.length-1)return{suggestions:[]};let D=f.indexOf(" ");if(-1===D&&(D=f.indexOf(">")),-1===D)return{suggestions:[]};const C=f.substring(1,D);return C?l.includes(C.toLocaleLowerCase())?{suggestions:[]}:/[a-zA-Z0-9_-]/.test(C)?{suggestions:[{label:`</${C}>`,kind:s.languages.CompletionItemKind.Snippet,insertText:`$0</${C}>`,insertTextRules:s.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:d.lineNumber,endLineNumber:d.lineNumber,startColumn:d.column,endColumn:d.column}}]}:{suggestions:[]}:{suggestions:[]}}}),s.languages.registerCompletionItemProvider(a.getModel().getLanguageId(),{provideCompletionItems:(i,d)=>{if(null==this.snippets||a.getModel()!==i)return{suggestions:[]};const p=i.getWordUntilPosition(d);return{suggestions:this.snippets.map(g=>g.content?{label:g.name,kind:s.languages.CompletionItemKind.Snippet,documentation:`${g.title??""}\n${g.help??""}\n${g.links??""}`,insertText:g.content,insertTextRules:s.languages.CompletionItemInsertTextRule.InsertAsSnippet,range:{startLineNumber:d.lineNumber,endLineNumber:d.lineNumber,startColumn:p.startColumn,endColumn:p.endColumn}}:void 0).filter(g=>!!g)}}}),s.languages.registerHoverProvider(a.getModel().getLanguageId(),{provideHover:(i,d)=>{if(null==this.tooltips||a.getModel()!==i)return;const p=i.getWordAtPosition(d);if(!p)return;const _=this.tooltips.find(g=>g.Term===p.word);return _?{contents:_.Help.map(g=>({value:g})),range:{startLineNumber:d.lineNumber,endLineNumber:d.lineNumber,startColumn:p.startColumn,endColumn:p.endColumn}}:void 0}})]}createResizeObserver(s,a){const n=new ResizeObserver(()=>{a.layout()});return n.observe(s),n}addEvents(s){s.getModel().onDidChangeContent(()=>{const a=s.getModel().getValue();a!==this.cachedValue&&(this.cachedValue=a,this.valueChangedCallback?.(a))}),s.onDidFocusEditorWidget(()=>{this.focusedCallback?.()}),s.onDidBlurEditorWidget(()=>{this.blurredCallback?.()})}}const h=["editor"];let c=(()=>{class r{constructor(){this.autoFocus=!1,this.valueChanged=new e.bkB,this.focused=new e.bkB,this.blurred=new e.bkB}ngAfterViewInit(){window.require.config({paths:{vs:["https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.46.0/min/vs"]}}),window.require(["vs/editor/editor.main"],a=>{this.monaco=a,this.createEditor(this.autoFocus)})}ngOnChanges(a){null!=a.filename&&null!=this.monacoInstance&&(this.monacoInstance.destroy(),this.createEditor(!0)),null!=a.value&&this.monacoInstance?.updateValue(this.value),null!=a.jsonSchema&&this.monacoInstance?.setJsonSchema(this.jsonSchema),null!=a.jsonComments&&this.monacoInstance?.setJsonComments(this.jsonComments),null!=a.snippets&&this.monacoInstance?.setSnippets(this.snippets),null!=a.tooltips&&this.monacoInstance?.setTooltips(this.tooltips),null!=a.jsTypings&&this.monacoInstance?.setJsTypings(this.jsTypings),null!=a.jsDiagnostics&&this.monacoInstance?.setJsDiagnostics(this.jsDiagnostics)}insertSnippet(a){this.monacoInstance?.insertSnippet(a),this.monacoInstance?.focus()}ngOnDestroy(){this.monacoInstance?.destroy()}createEditor(a){this.monacoInstance=new u(this.monaco,this.filename,this.value,this.editorRef.nativeElement,this.options,this.snippets,this.tooltips),this.monacoInstance.setJsonSchema(this.jsonSchema),this.monacoInstance.setJsonComments(this.jsonComments),this.monacoInstance.setJsTypings(this.jsTypings),this.monacoInstance.setJsDiagnostics(this.jsDiagnostics),this.monacoInstance.onValueChange(n=>{this.valueChanged.emit(n)}),this.monacoInstance.onFocus(()=>{this.focused.emit()}),this.monacoInstance.onBlur(()=>{this.blurred.emit()}),a&&this.monacoInstance.focus()}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-monaco-editor"]],viewQuery:function(n,i){if(1&n&&e.GBs(h,5),2&n){let d;e.mGM(d=e.lsd())&&(i.editorRef=d.first)}},inputs:{filename:"filename",value:"value",snippets:"snippets",tooltips:"tooltips",options:"options",jsonSchema:"jsonSchema",jsonComments:"jsonComments",jsTypings:"jsTypings",jsDiagnostics:"jsDiagnostics",autoFocus:"autoFocus"},outputs:{valueChanged:"valueChanged",focused:"focused",blurred:"blurred"},standalone:!0,features:[e.OA$,e.aNF],decls:2,vars:0,consts:[["editor",""],[1,"editor"]],template:function(n,i){1&n&&e.nrm(0,"div",1,0)},styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%;overflow:hidden}.editor[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}"]})}}return r})()},318:(v,m,t)=>{t.r(m),t.d(m,{replaceContentRoutes:()=>h});var e=t(5544),o=t(9204);const l={name:"REPLACE_CONTENT_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,o.A)(function*(){const{ReplaceContentComponent:c}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_autocomplete_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb")]).then(t.bind(t,4513));return c})()};var u=t(1195);const h=[{path:"",component:e.DialogEntryComponent,data:{dialog:l},children:[...u.Ed]}]},5544:(v,m,t)=>{t.r(m),t.d(m,{DialogEntryComponent:()=>c});var e=t(4435),o=t(8873),l=t(9148),u=t(7941),h=t(2159);let c=(()=>{class r{#t;#e;constructor(a,n,i,d,p,_){this.matDialog=a,this.viewContainerRef=n,this.router=i,this.route=d,this.context=p,this.changeDetectorRef=_,this.log=(0,e.T)({DialogEntryComponent:r});const g=this.router.getCurrentNavigation();this.#t=g?.extras?.state||{}}ngOnInit(){const a=this.log.fn("ngOnInit"),n=this.route.snapshot.data.dialog;if(null==n)throw new Error("Could not find config for dialog. Did you forget to add DialogConfig to route data?");a.a("Open dialog: "+n.name,{id:this.context.id,context:this.context}),n.getComponent().then(i=>{const d=this.matDialog;d._dialogAnimatingOpen&&d._lastDialogRef?d._lastDialogRef.afterOpened().subscribe(()=>this.openDialogComponent(n,i)):this.openDialogComponent(n,i)})}ngOnDestroy(){this.#e.close()}openDialogComponent(a,n){this.log.a(`Open dialog(initContext: ${a.initContext})`,{name:a.name,"Contextid:":this.context.log.svcId,"Context:":this.context}),a.initContext&&this.context.init(this.route),this.#e=this.matDialog.open(n,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:this.#t,panelClass:["dialog-panel",`dialog-panel-${a.panelSize}`,a.showScrollbar?"show-scrollbar":"no-scrollbar",...a.panelClass?a.panelClass:[]],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.#e.afterClosed().subscribe(i=>{this.log.a("Dialog was closed - name:"+a.name,{data:i});const d=i;if(null==d?.navigateUrl)if(this.route.pathFromRoot.length<=3)try{window.parent.$2sxc.totalPopup.close()}catch{}else this.router.navigate(["./"],this.route.snapshot.url.length>0?{relativeTo:this.route.parent,state:i}:{relativeTo:this.route.parent.parent,state:i});else this.router.navigate([d.navigateUrl])}),this.changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||r)(l.rXU(u.bZ),l.rXU(l.c1b),l.rXU(h.Ix),l.rXU(h.nX),l.rXU(o.o),l.rXU(l.gRc))}}static{this.\u0275cmp=l.VBU({type:r,selectors:[["app-dialog-entry"]],standalone:!0,features:[l.Jv_([o.o]),l.aNF],decls:0,vars:0,template:function(n,i){},encapsulation:2})}}return r})()},4038:(v,m,t)=>{t.d(m,{i:()=>e});class e{static tryParse(l){try{return JSON.parse(l)}catch{}}}},3518:(v,m,t)=>{function e(o,l,u=0){const c=o.length===u+1?l:e.bind(this,o,l,u+1),r=o[u],s="string"==typeof r.test?r.test:null,a="function"==typeof r.test?r.test:null,n=window;null!=s&&n[s]||null!=a&&a()?l():window.require([r.src],i=>{i&&!n[s]&&(n[s]=i),c()})}t.d(m,{P:()=>e})},1477:(v,m,t)=>{function e(o){try{const l=o?.Api;if(!l)return;const h={...window.$2sxc.env.header,appApi:l};window.$2sxc.env.load(h)}catch{}}t.d(m,{W:()=>e})},6666:(v,m,t)=>{t.d(m,{F:()=>e});const e={App:"App",Site:"Site",Global:"Global"}},3826:(v,m,t)=>{t.d(m,{a:()=>e});class e{static boolEquals(l,u){return l===u}static stringEquals(l,u){return l===u}static valueEquals(l,u){return l===u}static objectsEqual(l,u){if(null==l||null==u)return l===u;const h=l,c=u,r=Object.keys(h),s=Object.keys(c);return r.length===s.length&&r.every(n=>!!c.hasOwnProperty(n)&&h[n]===c[n])}static arraysEqual(l,u){return null==l||null==u?l===u:l.length===u.length&&l.every((c,r)=>l[r]===u[r])}static distinct(l,u,h){return h.indexOf(l)===u}}},2785:(v,m,t)=>{t.d(m,{o:()=>c});var e=t(7567),o=t(8172),l=t(334),u=t(6474),h=t(9148);let c=(()=>{class r extends u.D{openCodeFile(a,n,i){const d=e.Y.Develop,p={items:[{Path:a,...null!=i&&l.c.editId(i)}]},_={...this.buildHashParam(o.Q$,d),...this.buildHashParam(o.P3,n.toString()),...this.buildHashParam(o.Ul,JSON.stringify(p.items))},g=this.buildFullUrl(_);window.open(g,"_blank")}openQueryDesigner(a){const n=e.Y.PipelineDesigner,i={items:[l.c.editId(a)]},d={...this.buildHashParam(o.Q$,n),...this.buildHashParam(o.Xw,a.toString()),...this.buildHashParam(o.Ul,JSON.stringify(i.items))},p=this.buildFullUrl(d);window.open(p,"_blank")}openAppsManagement(a,n){const i={...n&&{tab:n}},d={...this.buildHashParam(o.v4,a.toString()),...this.buildHashParam(o.Q$,e.Y.Zone),...Object.keys(i).length?this.buildHashParam(o.z0,JSON.stringify(i)):""},p=this.buildFullUrl(d);window.open(p,"_blank")}openAppAdministration(a,n,i,d){const p={...i&&{tab:i},...d&&{scope:d}},_={...this.buildHashParam(o.v4,a.toString()),...this.buildHashParam(o.K7,n.toString()),...this.buildHashParam(o.Q$,e.Y.App),...Object.keys(p).length?this.buildHashParam(o.z0,JSON.stringify(p)):""},g=this.buildFullUrl(_);window.open(g,"_blank")}buildSharedHashParams(){return{...this.buildHashParam(o.v4,this.zoneId),...this.buildHashParam(o.K7,this.appId),...this.buildHashParam(o.Zm,this.context.moduleId?.toString()),...this.buildHashParam(o.p$,this.context.contentBlockId?.toString()),...this.buildHashParam(o.h9),...sessionStorage.getItem(o.tn)?this.buildHashParam(o.tn):{}}}buildHashParam(a,n){const i=a.replace(o.Pl,""),d=n??sessionStorage.getItem(a),p=encodeURIComponent(d);return{[i]:p}}buildFullUrl(a){const n=sessionStorage.getItem(o.zX),i=new URL(n),d=i.origin+i.pathname+i.search,p={...this.buildSharedHashParams(),...a};return d+Object.entries(p).reduce((g,[f,I])=>`${g}&${f}=${I}`,"").replace("&","#")}static{this.\u0275fac=(()=>{let a;return function(i){return(a||(a=h.xGo(r)))(i||r)}})()}static{this.\u0275prov=h.jDH({token:r,factory:r.\u0275fac})}}return r})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.02.00/dist/ng-edit/common.0abcb980ec64e390.js.map