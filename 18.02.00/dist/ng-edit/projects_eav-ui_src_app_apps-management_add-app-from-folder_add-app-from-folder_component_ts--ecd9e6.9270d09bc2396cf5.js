"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--ecd9e6"],{8242:(A,g,e)=>{e.r(g),e.d(g,{AddAppFromFolderComponent:()=>l});var t=e(9148),p=e(4175),f=e(7941),v=e(2938),r=e(8136),C=e(5469),h=e(4824),u=e(1828),x=e(251),c=e(7037),_=e(3583),d=e(3840),m=e(4601);let F=(()=>{class o{agInit(n){this.name=n.value,this.tooltip=n.tooltipGetter(n.data)}refresh(n){return!0}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-app-name-show"]],standalone:!0,features:[t.aNF],decls:5,vars:2,consts:[[1,"name-box"],[1,"info-icon",3,"tippy"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"span"),t.EFF(2),t.k0s(),t.j41(3,"mat-icon",1),t.EFF(4,"info"),t.k0s()()),2&i&&(t.R7$(2),t.JRh(a.name),t.R7$(),t.Y8G("tippy",a.tooltip))},dependencies:[d.m_,d.An,m.e],styles:[".name-box[_ngcontent-%COMP%]{display:flex;align-items:center}.info-icon[_ngcontent-%COMP%]{margin-left:7px;margin-bottom:3px}"]})}}return o})(),I=(()=>{class o{agInit(n){this.params=n}refresh(n){return!0}onChange(n){this.params.onChange(this.params.data,n.currentTarget.checked)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-checkbox-cell"]],standalone:!0,features:[t.aNF],decls:2,vars:2,consts:[[1,"checkbox-box"],["type","checkbox",1,"checkbox-input",3,"change","disabled","checked"]],template:function(i,a){1&i&&(t.j41(0,"div",0)(1,"input",1),t.bIt("change",function(y){return a.onChange(y)}),t.k0s()()),2&i&&(t.R7$(),t.Y8G("disabled",a.params.isDisabled)("checked",a.params.value))},styles:[".checkbox-box[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.checkbox-input[_ngcontent-%COMP%]{height:15px;width:15px}"]})}}return o})();var P=e(3347),M=e(9841);function R(o,s){1&o&&(t.j41(0,"p"),t.EFF(1," Nothing to show. All apps in the 2sxc folder are already installed. "),t.k0s())}function D(o,s){if(1&o&&(t.j41(0,"div"),t.nrm(1,"ag-grid-angular",8),t.k0s()),2&o){const n=t.XpG();t.R7$(),t.Y8G("rowData",n.pendingApps())("gridOptions",n.gridOptions)}}let l=(()=>{class o{#t;constructor(n,i){this.dialog=n,this.snackBar=i,this.hostClass="dialog-component",this.gridOptions=this.buildGridOptions(),this.installing=!1,this.pendingApps=(0,t.vPA)([]),this.features=(0,t.WQX)(h.t),this.#t=this.features.isEnabled[r.T.AppSyncWithSiteFiles],this.appsListService=(0,v.d)(_.U)}ngOnInit(){this.appsListService.getPendingApps().subscribe(n=>{this.pendingApps.set(n)})}closeDialog(){this.dialog.close()}onChange(n,i){const a=this.pendingApps();i?a.push(n):a.splice(a.indexOf(n),1),this.pendingApps.set(a)}install(){this.installing=!0,this.snackBar.open("Installing",void 0,{duration:2e3}),this.appsListService.installPendingApps(this.pendingApps()).subscribe({error:()=>{this.installing=!1,this.snackBar.open("Failed to install app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.installing=!1,this.snackBar.open("Installed app",void 0,{duration:2e3}),this.closeDialog()}})}buildGridOptions(){return{...x.C,columnDefs:[{field:"",width:40,cellClass:"no-outline",sortable:!0,cellRenderer:I,cellRendererParams:()=>({isDisabled:!this.#t(),onChange:(a,E)=>this.onChange(a,E)})},{...u.r.ItemsText,field:"Name",flex:1,sort:"asc",cellRenderer:F,cellRendererParams:{tooltipGetter:a=>`Server folder: ${a.ServerFolder}\nFolder: ${a.Folder}\nVersion: ${a.Version}\nDescription: ${a.Description}`}}]}}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(f.CP),t.rXU(P.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-add-app-from-folder"]],hostVars:1,hostBindings:function(i,a){2&i&&t.Mr5("className",a.hostClass)},standalone:!0,features:[t.aNF],decls:15,vars:4,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"featureNameId"],["align","end"],["type","button","mat-raised-button","",3,"click"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"],[1,"ag-theme-material","eav-grid",3,"rowData","gridOptions"]],template:function(i,a){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Add App from Folder"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"app-feature-text-info",4),t.j41(6,"p"),t.EFF(7," Select an app from the apps-folder which has been copied there (or git-cloned) but not installed yet. "),t.k0s(),t.DNE(8,R,2,0,"p")(9,D,2,2,"div"),t.k0s(),t.j41(10,"mat-dialog-actions",5)(11,"button",6),t.bIt("click",function(){return a.closeDialog()}),t.EFF(12," Cancel "),t.k0s(),t.j41(13,"button",7),t.bIt("click",function(){return a.install()}),t.EFF(14," Install "),t.k0s()()()),2&i){let E,y;t.R7$(5),t.Y8G("featureNameId","AppSyncWithSiteFiles"),t.R7$(3),t.vxM(0==(null==(E=a.pendingApps())?null:E.length)?8:-1),t.R7$(),t.vxM((null==(y=a.pendingApps())?null:y.length)>0?9:-1),t.R7$(4),t.Y8G("disabled",0===a.pendingApps().length||a.installing)}},dependencies:[f.E7,p.Hl,p.$z,C.L,c.p,M.xs],styles:[".eav-grid[_ngcontent-%COMP%]{height:200px;width:auto}"]})}}return o})()},8136:(A,g,e)=>{e.d(g,{T:()=>t});const t={AppSyncWithSiteFiles:"AppSyncWithSiteFiles",WysiwygPasteFormatted:"WysiwygPasteFormatted",PasteImageFromClipboard:"PasteImageFromClipboard",EditUiShowNotes:"EditUiShowNotes",EditUiShowMetadataFor:"EditUiShowMetadataFor",NoSponsoredByToSic:"NoSponsoredByToSic",EditUiTranslateWithGoogle:"EditUiTranslateWithGoogle",LightSpeed:"LightSpeedOutputCache",ContentSecurityPolicy:"ContentSecurityPolicy",PermissionsByLanguage:"PermissionsByLanguage",ContentTypeFieldsReuseDefinitions:"ContentTypeFieldsReuseDefinitions",AppExportAssetsAdvanced:"AppExportAssetsAdvanced",PickerUiCheckbox:"PickerUiCheckbox",PickerUiRadio:"PickerUiRadio",PickerSourceCsv:"PickerSourceCsv",PickerSourceAppAssets:"PickerSourceAppAssets",PickerFormulas:"PickerFormulas",PickerUiMoreInfo:"PickerUiMoreInfo"}},5469:(A,g,e)=>{e.d(g,{L:()=>x});var t=e(9148),p=e(3840),f=e(852),v=e(4601),r=e(7993),C=e(6838);const h=["*"];function u(c,_){if(1&c){const d=t.RV6();t.j41(0,"div",1),t.nI1(1,"translate"),t.bIt("click",function(){t.eBV(d);const F=t.XpG();return t.Njj(F.openDialog())}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s(),t.j41(4,"div",2)(5,"div",3),t.EFF(6),t.nI1(7,"translate"),t.k0s(),t.j41(8,"div",4),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.SdG(11),t.k0s()()}if(2&c){const d=t.XpG();t.Y8G("tippy",t.i5U(1,7,"Features.Tooltip",d.feature())),t.R7$(2),t.ZvI("icon icon-",d.icon(),""),t.R7$(),t.JRh(d.icon()),t.R7$(3),t.JRh(t.bMT(7,10,"Features.FeatureNotActivated")),t.R7$(3),t.JRh(t.bMT(10,12,"Features.ClickToFindOutMore"))}}let x=(()=>{class c extends C.x{constructor(){super(),this.asInfo=(0,t.hFB)(!1),this.icon=(0,r.bo)("icon",()=>this.asInfo()?"info":"warning")}static{this.\u0275fac=function(m){return new(m||c)}}static{this.\u0275cmp=t.VBU({type:c,selectors:[["app-feature-text-info"]],inputs:{asInfo:[1,"asInfo"]},standalone:!0,features:[t.Vt3,t.aNF],ngContentSelectors:h,decls:1,vars:1,consts:[[1,"feature-text-info",3,"tippy"],[1,"feature-text-info",3,"click","tippy"],[1,"feature-text-info-content"],[1,"feature-text-info-title"],[1,"feature-text-info-subtitle"]],template:function(m,F){1&m&&(t.NAR(),t.DNE(0,u,12,14,"div",0)),2&m&&t.vxM(F.show()?0:-1)},dependencies:[p.m_,p.An,f.h,f.D9,v.e],styles:[".feature-text-info[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:flex-start;cursor:pointer;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px;padding:5px;margin-bottom:10px}.feature-text-info-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;justify-content:center;margin-left:10px}.feature-text-info-title[_ngcontent-%COMP%]{font-size:large}.feature-text-info-subtitle[_ngcontent-%COMP%]{font-size:medium}.icon[_ngcontent-%COMP%]{font-size:45px;height:fit-content;width:fit-content}.icon-warning[_ngcontent-%COMP%]{color:red}"]})}}return c})()},5943:(A,g,e)=>{e.d(g,{N:()=>v});var t=e(6474),p=e(9148);let v=(()=>{class r extends t.D{getFeatureDetails(h){return this.http.get(this.apiUrl("admin/feature/details"),{params:{nameId:h}})}static{this.\u0275fac=(()=>{let h;return function(x){return(h||(h=p.xGo(r)))(x||r)}})()}static{this.\u0275prov=p.jDH({token:r,factory:r.\u0275fac})}}return r})()},6838:(A,g,e)=>{e.d(g,{x:()=>R,j:()=>D});var t=e(9148),p=e(7941),f=e(7993),v=e(4175),r=e(3777),C=e(3840),h=e(852),u=e(2938),x=e(4601),c=e(9914),_=e(5081),d=e(5943),m=e(3347);function F(l,o){if(1&l){const s=t.RV6();t.j41(0,"div",1)(1,"div",2),t.EFF(2,"ID:"),t.k0s(),t.j41(3,"div",7)(4,"span",8),t.bIt("click",function(){const i=t.eBV(s),a=t.XpG(2);return t.Njj(a.clipboard.copyToClipboard(i))}),t.EFF(5),t.k0s()()()}if(2&l){const s=o;t.R7$(4),t.Y8G("tippy",s),t.R7$(),t.JRh(s)}}function I(l,o){if(1&l){const s=t.RV6();t.j41(0,"mat-card")(1,"mat-card-header")(2,"mat-card-title"),t.EFF(3),t.k0s()(),t.j41(4,"mat-card-content"),t.nrm(5,"p",0),t.nI1(6,"safeHtml"),t.j41(7,"div",1)(8,"div",2),t.EFF(9),t.nI1(10,"translate"),t.k0s(),t.j41(11,"div",3)(12,"span"),t.EFF(13),t.nI1(14,"translate"),t.k0s()()(),t.DNE(15,F,6,2,"div",1),t.k0s(),t.j41(16,"mat-card-actions",4)(17,"a",5)(18,"mat-icon"),t.EFF(19,"open_in_new"),t.k0s(),t.EFF(20),t.nI1(21,"translate"),t.k0s(),t.j41(22,"button",6),t.bIt("click",function(){t.eBV(s);const i=t.XpG();return t.Njj(i.dialog.close())}),t.EFF(23),t.nI1(24,"translate"),t.k0s()()()}if(2&l){let s;const n=o;t.R7$(3),t.JRh(n.name),t.R7$(2),t.Y8G("innerHtml",t.bMT(6,8,n.description),t.npT),t.R7$(4),t.SpI("",t.bMT(10,10,"Features.Status"),":"),t.R7$(4),t.JRh(t.bMT(14,12,n.isEnabled?"Features.Active":"Features.NotActive")),t.R7$(2),t.vxM((s=n.nameId)?15:-1,s),t.R7$(2),t.Y8G("href",n.link,t.B4B),t.R7$(3),t.SpI(" ",t.bMT(21,14,"Features.FindOutMore")," "),t.R7$(3),t.SpI(" ",t.bMT(24,16,"Features.Close")," ")}}let P=(()=>{class l{#t;constructor(s,n,i){this.dialogData=s,this.dialog=n,this.snackBar=i,this.#t=(0,u.d)(d.N),this.featureDetails=(0,f.KX)("feature",null),this.clipboard=(0,u.d)(_.W),this.#t.getFeatureDetails(this.dialogData).subscribe(a=>this.featureDetails.set(a))}static{this.\u0275fac=function(n){return new(n||l)(t.rXU(p.Vh),t.rXU(p.CP),t.rXU(m.UG))}}static{this.\u0275cmp=t.VBU({type:l,selectors:[["app-feature-info-dialog"]],standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[3,"innerHtml"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],["align","end"],["target","_blank","mat-raised-button","","color","accent",1,"eav-card-action-button",3,"href"],["mat-raised-button","",1,"eav-card-action-button",3,"click"],[1,"eav-info-row__value","eav_click"],[3,"click","tippy"]],template:function(n,i){if(1&n&&t.DNE(0,I,25,18,"mat-card"),2&n){let a;t.vxM((a=i.featureDetails())?0:-1,a)}},dependencies:[r.Hu,r.RN,r.YY,r.m2,r.MM,r.dh,v.Hl,v.It,v.$z,C.m_,C.An,h.h,h.D9,x.e,c.$],encapsulation:2})}}return l})();var M=e(4824);let R=(()=>{class l{#t;#e;#n;#a;constructor(){this.featureNameId=t.hFB.required(),this.showIf=(0,t.hFB)(!1),this.#t=(0,t.WQX)(p.bZ),this.#e=(0,t.WQX)(t.c1b),this.#n=(0,t.WQX)(t.gRc),this.#a=(0,t.WQX)(M.t),this.feature=(0,f.bo)("feature",()=>this.#a.getCurrent(this.featureNameId())),this.show=(0,f.bo)("show",()=>{const s=this.feature();return null!=s&&this.showIf()==(s?.isEnabled??!1)})}openDialog(){D(this.#t,this.featureNameId(),this.#e,this.#n)}static{this.\u0275fac=function(n){return new(n||l)}}static{this.\u0275dir=t.FsC({type:l,inputs:{featureNameId:[1,"featureNameId"],showIf:[1,"showIf"]}})}}return l})();function D(l,o,s,n){l.open(P,{autoFocus:!1,data:o,viewContainerRef:s,width:"400px"}),n?.markForCheck()}},1772:(A,g,e)=>{e.d(g,{I:()=>h,u:()=>C});var t=e(6647),p=e(9452),f=e(3550),v=e(6474),r=e(9148);const C="admin/app/";let h=(()=>{class u extends v.D{importApp(c,_,d=!1){const m=new FormData;return m.append("File",c),m.append("Name",_??""),this.http.post(this.apiUrl(C+"Import"),m,{params:{zoneId:this.zoneId}}).pipe((0,t.n)(F=>{if(d&&F.Messages[0]?.MessageType===f.G1.Warning){const I=prompt(F.Messages[0].Text+" Would you like to install it using another folder name?");if(I)return this.importApp(c,I,!0)}return(0,p.of)(F)}))}static{this.\u0275fac=(()=>{let c;return function(d){return(c||(c=r.xGo(u)))(d||u)}})()}static{this.\u0275prov=r.jDH({token:u,factory:u.\u0275fac})}}return u})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.02.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_add-app-from-folder_add-app-from-folder_component_ts--ecd9e6.9270d09bc2396cf5.js.map