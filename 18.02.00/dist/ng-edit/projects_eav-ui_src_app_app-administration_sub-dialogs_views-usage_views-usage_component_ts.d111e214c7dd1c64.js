"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts"],{2570:(P,f,a)=>{a.d(f,{y:()=>b});var e=a(6474),m=a(9148);const u="admin/view/",C=u+"all",v=u+"delete",h=u+"import",I=u+"polymorphism",c=u+"usage";let b=(()=>{class p extends e.D{getAll(){return this.http.get(this.apiUrl(C),{params:{appId:this.appId}})}delete(r){return this.http.get(this.apiUrl(v),{params:{appId:this.appId,Id:r.toString()}})}import(r){const g=new FormData;return g.append("File",r),this.http.post(this.apiUrl(h),g,{params:{appId:this.appId,zoneId:this.zoneId}})}export(r){const g=this.apiUrl(u+"json")+"?appId="+this.appId+"&viewId="+r;window.open(g,"_blank","")}getPolymorphism(){return this.http.get(this.apiUrl(I),{params:{appId:this.appId}})}getUsage(r){return this.http.get(this.apiUrl(c),{params:{appId:this.appId,guid:r}})}static{this.\u0275fac=(()=>{let r;return function(w){return(r||(r=m.xGo(p)))(w||p)}})()}static{this.\u0275prov=m.jDH({token:p,factory:p.\u0275fac})}}return p})()},8267:(P,f,a)=>{a.r(f),a.d(f,{ViewsUsageComponent:()=>_});var e=a(9148),m=a(2159),u=a(251),C=a(2570),v=a(4175),h=a(3840),I=a(2938),c=a(1828),b=a(4601),p=a(7037);function U(i){const o=i.data;return`ID: ${o.Block.Id}\nGUID: ${o.Block.Guid}`}function r(i){const o=i.data;if(null!=o.Module)return`ID: ${o.Module.Id}\nUsageId: ${o.Module.UsageId}\nTitle: ${o.Module.Title}`}function g(i){return((null!=i.value?"id-action no-padding":"")+" no-outline").split(" ")}function w(i){const o=i.data;if(null!=o.PageId)return`ID: ${o.PageId}`}function M(i){return((null!=i.value?"id-action no-padding":"")+" no-outline").split(" ")}function x(i){return(null!=i.value?"primary-action highlight":"no-outline").split(" ")}function G(i){null!=i.value&&window.open(i.data.Url,"_blank")}function j(i){const o=i.value;if(null!=o)return`\n    <div style="height: 100%;display: flex;align-items: center;">\n      ${o.IsVisible?'<span class="material-symbols-outlined">visibility</span>':'<span class="material-symbols-outlined">visibility_off</span>'}\n      ${o.IsDeleted?'<span style="margin-left: 8px;" class="material-symbols-outlined">delete</span>':""}\n    </div>\n  `}var D=a(5060),k=a(5081);function T(i,o){if(1&i){const t=e.RV6();e.j41(0,"div",1),e.bIt("click",function(){e.eBV(t);const n=e.XpG();return e.Njj(n.clipboard.copyToClipboard(n.tooltip))}),e.j41(1,"span",2),e.EFF(2),e.k0s(),e.j41(3,"mat-icon",3),e.EFF(4,"file_copy"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("tippy",t.tooltip),e.R7$(2),e.JRh(t.id)}}let F=(()=>{class i{constructor(){this.clipboard=(0,I.d)(k.W)}agInit(t){if(this.tooltip=t.value,null==this.tooltip)return;const s=this.tooltip.split("\n")[0];this.id=s.split(" ")[1]}refresh(t){return!0}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-views-usage-id"]],standalone:!0,features:[e.aNF],decls:1,vars:1,consts:[["matRipple","",1,"id-box","highlight",3,"tippy"],["matRipple","",1,"id-box","highlight",3,"click","tippy"],[1,"id"],[1,"icon"]],template:function(s,n){1&s&&e.DNE(0,T,5,2,"div",0),2&s&&e.vxM(n.id?0:-1)},dependencies:[D.pZ,D.r6,h.m_,h.An,b.e],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]})}}return i})();var V=a(4456),y=a(3804);let E=(()=>{class i{constructor(){this.isVisible="",this.isDeleted=""}agInit(t){this.filterParams=t}isFilterActive(){return""!==this.isVisible||""!==this.isDeleted}doesFilterPass(t){let s=!1,n=!1;const l=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:t.node.data,getValue:B=>t.node.data[B],node:t.node});return null!=l&&(s=""===this.isVisible||null!=l.IsVisible&&l.IsVisible.toString()===this.isVisible,n=""===this.isDeleted||null!=l.IsDeleted&&l.IsDeleted.toString()===this.isDeleted,s&&n)}getModel(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}}setModel(t){this.isVisible=t?t.isVisible:"",this.isDeleted=t?t.isDeleted:""}afterGuiAttached(t){}filterChanged(){this.filterParams.filterChangedCallback()}static{this.\u0275fac=function(s){return new(s||i)}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-views-usage-status-filter"]],standalone:!0,features:[e.aNF],decls:18,vars:2,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(s,n){1&s&&(e.j41(0,"div",0),e.EFF(1,"Visible"),e.k0s(),e.j41(2,"mat-radio-group",1),e.mxI("ngModelChange",function(l){return e.DH7(n.isVisible,l)||(n.isVisible=l),l}),e.bIt("ngModelChange",function(){return n.filterChanged()}),e.j41(3,"mat-radio-button",2),e.EFF(4,"All"),e.k0s(),e.j41(5,"mat-radio-button",3),e.EFF(6,"Visible"),e.k0s(),e.j41(7,"mat-radio-button",4),e.EFF(8,"Hidden"),e.k0s()(),e.j41(9,"div",0),e.EFF(10,"Deleted"),e.k0s(),e.j41(11,"mat-radio-group",1),e.mxI("ngModelChange",function(l){return e.DH7(n.isDeleted,l)||(n.isDeleted=l),l}),e.bIt("ngModelChange",function(){return n.filterChanged()}),e.j41(12,"mat-radio-button",2),e.EFF(13,"All"),e.k0s(),e.j41(14,"mat-radio-button",3),e.EFF(15,"Is deleted"),e.k0s(),e.j41(16,"mat-radio-button",4),e.EFF(17,"Is not deleted"),e.k0s()()),2&s&&(e.R7$(2),e.R50("ngModel",n.isVisible),e.R7$(9),e.R50("ngModel",n.isDeleted))},dependencies:[y.Wk,y.VT,y._g,V.YN,V.BC,V.vS],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}}return i})();var A=a(7941),R=a(9841);let _=(()=>{class i{constructor(t,s){this.dialog=t,this.route=s,this.gridOptions=this.buildGridOptions(),this.viewUsage=(0,e.vPA)(void 0),this.viewTooltip=(0,e.vPA)(void 0),this.data=(0,e.vPA)(void 0),this.viewsService=(0,I.d)(C.y)}ngOnInit(){const t=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(t).subscribe(s=>{const n=s[0];this.viewUsage.set(n),this.viewTooltip.set(`ID: ${n.Id}\nGUID: ${n.Guid}`);const l=function O(i){const o=[];for(const t of i.Blocks){0===t.Modules.length&&o.push({Block:{Id:t.Id,Guid:t.Guid}});for(const s of t.Modules)o.push({Block:{Id:t.Id,Guid:t.Guid},Module:s,PageId:s.Page.Id,Name:s.Page.Name,Url:s.Page.Url,Language:s.Page.CultureCode,Status:{IsVisible:s.Page.Visible,IsDeleted:s.IsDeleted}})}return o}(n);this.data.set(l)})}closeDialog(){this.dialog.close()}buildGridOptions(){return{...u.C,columnDefs:[{...c.r.Id,field:"Block",valueGetter:U,cellRenderer:F},{...c.r.Number,field:"Module",width:80,valueGetter:r,cellClass:g,cellRenderer:F},{...c.r.Number,field:"Page",valueGetter:w,cellClass:M,cellRenderer:F},{...c.r.TextWide,field:"Name",sort:"asc",cellClass:x,onCellClicked:G},{...c.r.ItemsText,field:"Language",width:90},{field:"Status",width:80,cellClass:"icon no-outline".split(" "),filter:E,cellRenderer:j}]}}static{this.\u0275fac=function(s){return new(s||i)(e.rXU(A.CP),e.rXU(m.nX))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["app-views-usage"]],standalone:!0,features:[e.aNF],decls:19,vars:4,consts:[[1,"nav-component-wrapper"],["mat-mdc-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description"],["href","https://go.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","gridOptions"],[1,"grid-more-actions-box"]],template:function(s,n){if(1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.EFF(4),e.k0s(),e.j41(5,"button",4),e.bIt("click",function(){return n.closeDialog()}),e.j41(6,"mat-icon"),e.EFF(7,"close"),e.k0s()()()(),e.j41(8,"p",5),e.EFF(9," This shows where this view is being used. Read about the "),e.j41(10,"a",6),e.EFF(11,"connections between DNN and 2sxc Views"),e.k0s(),e.EFF(12," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),e.j41(13,"em"),e.EFF(14,"Before you get confused about some things you see here, do read the FAQ on that page."),e.k0s()(),e.nrm(15,"router-outlet"),e.j41(16,"div",7),e.nrm(17,"ag-grid-angular",8)(18,"div",9),e.k0s()()),2&s){let d;e.R7$(3),e.Y8G("tippy",n.viewTooltip()),e.R7$(),e.SpI("View: ",null==(d=n.viewUsage())?null:d.Name,""),e.R7$(13),e.Y8G("rowData",n.data())("gridOptions",n.gridOptions)}},dependencies:[v.Hl,v.iY,h.m_,h.An,m.n3,p.p,R.xs,b.e],encapsulation:2})}}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.02.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.d111e214c7dd1c64.js.map