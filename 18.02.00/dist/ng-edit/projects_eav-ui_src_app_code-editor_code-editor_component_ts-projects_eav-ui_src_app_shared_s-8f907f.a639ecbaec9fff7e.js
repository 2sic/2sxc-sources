"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_component_ts-projects_eav-ui_src_app_shared_s-8f907f"],{2934:(U,P,r)=>{r.r(P),r.d(P,{CodeEditorComponent:()=>ne});var I=r(316),t=r(9148),T=r(4175),g=r(3840),$=r(1134),F=r(436),f=r(1873),X=r(1870),x=r(6647),y=r(9452),w=r(8537),D=r(2938),B=r(6068),O=r(2760),W=r(8801),k=r(3176),M=r(8172),R=r(9333),j=r(4601),G=r(5699),C=r(3826),N=r(8873),Q=r(3347);function d(o,p){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&o){const e=t.XpG();t.R7$(),t.Lme('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function h(o,p){if(1&o&&t.EFF(0),2&o){const e=t.XpG(2);t.SpI(' You are editing "',e.snackBarData.edition,'" edition. ')}}function u(o,p){1&o&&t.EFF(0," You may be editing an edition which is not the one you see. ")}function L(o,p){if(1&o&&(t.j41(0,"div"),t.DNE(1,h,1,1),t.EFF(2),t.DNE(3,u,1,0),t.EFF(4," See "),t.j41(5,"a",3),t.EFF(6,"docs"),t.k0s(),t.EFF(7,". "),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.vxM(e.snackBarData.edition?1:-1),t.R7$(),t.Lme(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.R7$(),t.vxM(e.snackBarData.edition?-1:3)}}function q(o,p){if(1&o){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.openCodeBehind())}),t.EFF(1," Open code-behind file "),t.k0s()}}let tt=(()=>{class o{constructor(e,i){this.snackRef=e,this.snackBarData=i}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(Q.TQ),t.rXU(Q.ht))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-and-edition-warnings"]],standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[[1,"messages"],[1,"actions"],["mat-button","","color","primary"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(i,n){1&i&&(t.j41(0,"div",0),t.DNE(1,d,3,2)(2,L,8,4,"div"),t.k0s(),t.j41(3,"div",1),t.DNE(4,q,2,0,"button",2),t.k0s()),2&i&&(t.R7$(),t.vxM(n.snackBarData.codeFile?1:-1),t.R7$(),t.vxM(n.snackBarData.otherEditions?2:-1),t.R7$(2),t.vxM(n.snackBarData.codeFile?4:-1))},dependencies:[T.Hl,T.$z],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]})}}return o})();const Y={Templates:"Templates",Snippets:"Snippets"};let pt=(()=>{class o{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275pipe=t.EJ8({name:"objectToArray",type:o,pure:!0,standalone:!0})}}return o})();var et=r(852),ot=r(5060),z=r(4981),ct=r(9914);function dt(o,p){if(1&o){const e=t.RV6();t.j41(0,"mat-icon",9),t.bIt("click",function(){t.eBV(e);const n=t.XpG().$implicit,s=t.XpG(5);return t.Njj(s.toggleMore(n.key))}),t.EFF(1),t.k0s()}if(2&o){const e=t.XpG().$implicit,i=t.XpG(5);t.R7$(),t.SpI(" ",i.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function _t(o,p){if(1&o&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.k0s()()),2&o){const e=p.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name)}}function ht(o,p){if(1&o&&(t.j41(0,"div",8),t.nrm(1,"div",10),t.nI1(2,"safeHtml"),t.Z7z(3,_t,3,2,"div",null,t.fX1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.help),t.npT),t.R7$(2),t.Dyx(e.links)}}function ut(o,p){if(1&o&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.k0s()()),2&o){const e=p.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name)}}function mt(o,p){if(1&o&&(t.j41(0,"div",13),t.nrm(1,"div",10),t.nI1(2,"safeHtml"),t.Z7z(3,ut,3,2,"div",null,t.fX1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.help),t.npT),t.R7$(2),t.Dyx(e.links)}}function gt(o,p){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",4)(2,"div",12),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(7);return t.Njj(s.addSnippet(n.snip))}),t.EFF(3),t.k0s(),t.j41(4,"mat-icon",7),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(7);return t.Njj(s.toggleInfo(n.key))}),t.EFF(5,"info"),t.k0s()(),t.DNE(6,mt,5,3,"div",13),t.k0s()}if(2&o){const e=p.$implicit,i=t.XpG(7);t.R7$(2),t.Y8G("tippy",e.snip),t.R7$(),t.SpI(" ",e.label," "),t.R7$(3),t.vxM(i.toggledInfos.includes(e.key)?6:-1)}}function ft(o,p){if(1&o&&(t.Z7z(0,gt,7,3,"div",null,t.fX1),t.nI1(2,"objectToArray")),2&o){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.more))}}function Ct(o,p){if(1&o){const e=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.addSnippet(n.snip))}),t.EFF(3),t.k0s(),t.DNE(4,dt,2,1,"mat-icon",6),t.j41(5,"mat-icon",7),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.toggleInfo(n.key))}),t.EFF(6,"info"),t.k0s()(),t.DNE(7,ht,5,3,"div",8)(8,ft,3,2),t.k0s()}if(2&o){const e=p.$implicit,i=t.XpG(5);t.R7$(2),t.Y8G("tippy",e.snip),t.R7$(),t.SpI(" ",e.label," "),t.R7$(),t.vxM(e.more?4:-1),t.R7$(3),t.vxM(i.toggledInfos.includes(e.key)?7:-1),t.R7$(),t.vxM(i.toggledMores.includes(e.key)?8:-1)}}function vt(o,p){if(1&o&&(t.Z7z(0,Ct,9,5,"div",3,t.fX1),t.nI1(2,"objectToArray")),2&o){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.value))}}function yt(o,p){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",2),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.toggleFolder(n.key))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.DNE(7,vt,3,2),t.k0s()}if(2&o){const e=p.$implicit,i=t.XpG(2).$implicit,n=t.XpG();t.R7$(),t.Y8G("tippyTranslate","SourceEditorSnippets."+i.key+"."+e.key+".Help"),t.R7$(2),t.SpI(" ",n.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(t.bMT(6,4,"SourceEditorSnippets."+i.key+"."+e.key+".Title")),t.R7$(2),t.vxM(n.toggledFolders.includes(e.key)?7:-1)}}function bt(o,p){if(1&o&&(t.Z7z(0,yt,8,6,"div",null,t.fX1),t.nI1(2,"keyvalue")),2&o){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.value))}}function Tt(o,p){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",1),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.toggleSection(n.key))}),t.j41(2,"mat-icon"),t.EFF(3),t.k0s(),t.j41(4,"span"),t.EFF(5),t.nI1(6,"translate"),t.k0s()(),t.DNE(7,bt,3,2),t.k0s()}if(2&o){const e=p.$implicit,i=t.XpG();t.R7$(),t.Y8G("tippyTranslate","SourceEditorSnippets."+e.key+".Help"),t.R7$(2),t.SpI(" ",i.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(t.bMT(6,4,"SourceEditorSnippets."+e.key+".Title")),t.R7$(2),t.vxM(i.toggledSections.includes(e.key)?7:-1)}}let Ft=(()=>{class o{constructor(){this.insertSnippet=new t.bkB,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){z.f.toggleInArray(e,this.toggledSections)}toggleFolder(e){z.f.toggleInArray(e,this.toggledFolders)}toggleInfo(e){z.f.toggleInArray(e,this.toggledInfos)}toggleMore(e){z.f.toggleInArray(e,this.toggledMores)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],["tippyShowDelay","750",1,"collapsible-header","section",3,"click","tippyTranslate"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"click","tippyTranslate"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"click","tippy"],["tippy","Show More","tippyShowDelay","750"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],[1,"snippet-help"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"click","tippy"],[1,"snippet-help","snippet-help-more"]],template:function(i,n){1&i&&(t.j41(0,"div",0),t.Z7z(1,Tt,8,6,"div",null,t.fX1),t.nI1(3,"keyvalue"),t.k0s()),2&i&&(t.R7$(),t.Dyx(t.bMT(3,0,n.snippets)))},dependencies:[g.m_,g.An,ot.pZ,ot.r6,I.lG,et.h,et.D9,pt,R.c,j.e,ct.$],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]})}}return o})();function st(o){if(!o)return[];const p=[];for(const e of o){let i=p;const n=e.Path.split("/"),s=n[n.length-1];let a="";for(let l=0;l<n.length;l++){const c=n[l];a+=l?`/${c}`:c;const m=i.find(_=>_.name===c);if(m)i=m.children;else{const _={depth:l,name:c,pathFromRoot:a,isShared:e.Shared,isFolder:c!==s,...c!==s&&{children:[]}};i.push(_),i=_.children}}}return p}let It=(()=>{class o{transform(e){return null==e||e.sort((i,n)=>i.isFolder<n.isFolder?1:i.isFolder>n.isFolder?-1:0),e}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275pipe=t.EJ8({name:"sortItems",type:o,pure:!0,standalone:!0})}}return o})(),xt=(()=>{class o{constructor(e){this.sanitizer=e}transform(e,i){let n;return n=i?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${n}px;`)}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(F.up,16))}}static{this.\u0275pipe=t.EJ8({name:"depthPadding",type:o,pure:!0,standalone:!0})}}return o})();var J=r(1034);const at=o=>({item:o}),St=o=>({active:o}),Mt=o=>({"app-shared-root":o});function Pt(o,p){1&o&&t.eu8(0)}function Ot(o,p){if(1&o&&t.DNE(0,Pt,1,0,"ng-container",6),2&o){const e=p.$implicit;t.XpG();const i=t.sdS(6);t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.eq3(2,at,e))}}function kt(o,p){if(1&o){const e=t.RV6();t.j41(0,"div",8),t.nI1(1,"depthPadding"),t.bIt("click",function(){t.eBV(e);const n=t.XpG().item,s=t.XpG();return t.Njj(s.openTemplate(n.pathFromRoot,n.isShared))}),t.EFF(2),t.k0s()}if(2&o){const e=t.XpG().item,i=t.XpG();t.Aen(t.i5U(1,5,e.depth,e.isFolder)),t.Y8G("ngClass",t.eq3(8,St,i.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.R7$(2),t.SpI(" ",e.name," ")}}function wt(o,p){1&o&&t.eu8(0)}function Dt(o,p){if(1&o&&t.DNE(0,wt,1,0,"ng-container",6),2&o){const e=p.$implicit;t.XpG(4);const i=t.sdS(6);t.Y8G("ngTemplateOutlet",i)("ngTemplateOutletContext",t.eq3(2,at,e))}}function Rt(o,p){if(1&o&&(t.Z7z(0,Dt,1,4,"ng-container",null,t.fX1),t.nI1(2,"sortItems")),2&o){const e=t.XpG(2).item;t.Dyx(t.bMT(2,0,e.children))}}function At(o,p){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",9),t.nI1(2,"depthPadding"),t.bIt("click",function(){t.eBV(e);const n=t.XpG().item,s=t.XpG();return t.Njj(s.toggleItem(n.pathFromRoot,n.isShared))}),t.j41(3,"div",10)(4,"mat-icon"),t.EFF(5),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",11),t.bIt("click",function(){t.eBV(e);const n=t.XpG().item,s=t.XpG();return t.Njj(s.addFile(n.pathFromRoot,n.isShared))}),t.j41(9,"mat-icon"),t.EFF(10,"add"),t.k0s()()(),t.DNE(11,Rt,3,2),t.k0s()}if(2&o){const e=t.XpG().item,i=t.XpG();t.R7$(),t.Aen(t.i5U(2,7,e.depth+1,e.isFolder)),t.Y8G("ngClass",t.eq3(10,Mt,e.depth<0)),t.R7$(2),t.Y8G("tippy",e.name),t.R7$(2),t.SpI(" ",i.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(e.name),t.R7$(4),t.vxM(i.isToggled(e.pathFromRoot,e.isShared)?11:-1)}}function jt(o,p){if(1&o&&t.DNE(0,kt,3,10,"div",7)(1,At,12,12,"div"),2&o){const e=p.item;t.vxM(e.isFolder?-1:0),t.R7$(),t.vxM(e.isFolder?1:-1)}}let $t=(()=>{class o{constructor(){this.openView=new t.bkB,this.createTemplate=new t.bkB,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function Et(o){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:st(o.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:st(o.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const i=e.view?.previousValue;i&&this.toggleItem(i.FileName,i.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,i){return(i?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,i){this.openView.emit({key:e,shared:i})}toggleItem(e,i){z.f.toggleInArray(e,i?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,i){this.createTemplate.emit({folder:e,isShared:i})}showFileInTree(e,i){if(null==e)return;const n=i?this.toggledItemsShared:this.toggledItemsApp;if(n.includes(e))return;const s=["",...e.split("/")];let a="";for(const l of s)a=a?`${a}/${l}`:l,!n.includes(a)&&this.toggleItem(a,i)}static{this.\u0275fac=function(i){return new(i||o)}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},standalone:!0,features:[t.OA$,t.aNF],decls:19,vars:3,consts:[["fileOrFolder",""],["menu","matMenu"],[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tippyShowDelay","750",1,"file",3,"style","ngClass","tippy"],["tippyShowDelay","750",1,"file",3,"click","ngClass","tippy"],[1,"folder-name-wrapper",3,"click","ngClass"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(i,n){if(1&i){const s=t.RV6();t.j41(0,"div",2)(1,"div"),t.Z7z(2,Ot,1,4,"ng-container",null,t.fX1),t.nI1(4,"sortItems"),t.DNE(5,jt,2,2,"ng-template",null,0,t.C5r),t.k0s(),t.j41(7,"div",3)(8,"button",4)(9,"mat-icon"),t.EFF(10,"add"),t.k0s()(),t.j41(11,"mat-menu",null,1)(13,"button",5),t.bIt("click",function(){return t.eBV(s),t.Njj(n.addFile("",!1))}),t.j41(14,"span"),t.EFF(15,"App"),t.k0s()(),t.j41(16,"button",5),t.bIt("click",function(){return t.eBV(s),t.Njj(n.addFile("",!0))}),t.j41(17,"span"),t.EFF(18,"Shared (global)"),t.k0s()()()()()}if(2&i){const s=t.sdS(12);t.R7$(2),t.Dyx(t.bMT(4,1,n.tree)),t.R7$(6),t.Y8G("matMenuTriggerFor",s)}},dependencies:[I.T3,I.YU,g.m_,g.An,T.Hl,T.iY,J.Cn,J.kk,J.fb,J.Cp,xt,It,R.c,j.e],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]})}}return o})();var Vt=r(9686),rt=r(271),Bt=r(5959),Gt=r(1726),Nt=r(6474);let Xt=(()=>{class o extends Nt.D{constructor(e){super(),this.translate=e}getTooltips(e){return this.http.get(this.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,rt.T)(i=>{const n=this.filterAwayNotNeededSnippetsList(i.snippets,e),s=this.extractInputTypeSnippets(n),a=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:a}}))}filterAwayNotNeededSnippetsList(e,i){const n=["@","["],s=l=>l.Type.indexOf("Razor")>-1?0:1,a=[];for(const l of e){const c=n.indexOf(l.set[0]);(-1===c||c===s(i))&&(c===s(i)&&(l.set=l.set.substring(1)),a.push(l))}return a}extractInputTypeSnippets(e){const i=[],n=[];for(const l of e)"\\"===l.set[0]?(l.set=l.set.substring(1),n.push(l)):i.push(l);return{standardArray:i,inputTypeSnippets:this.catalogInputTypeSnippets(n)}}catalogInputTypeSnippets(e){const i={};for(const n of e)void 0===i[n.subset]&&(i[n.subset]=[]),i[n.subset].push(n);return i}initSnippetsWithConfig(e,i,n){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),i.TypeContent&&this.loadContentType(s.Content.Fields,i.TypeContent,"Content",i,n),i.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,i.TypeContentPresentation,"Content.Presentation",i,n),i.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),i.TypeList&&this.loadContentType(s.List.Fields,i.TypeList,"Header",i,n),i.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,i.TypeListPresentation,"Header.Presentation",i,n)):delete s.List,i.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",i,n),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",i,n)),s}makeTree(e){const i={};for(const n of e){void 0===i[n.set]&&(i[n.set]={}),void 0===i[n.set][n.subset]&&(i[n.set][n.subset]=[]);const s={key:n.name,label:this.label(n.set,n.subset,n.name),snip:n.content,help:n.help||this.help(n.set,n.subset,n.name),links:this.linksList(n.links)};i[n.set][n.subset].push(s)}return i}label(e,i,n){const s=this.getHelpKey(e,i,n,".Key");let a=this.translate.instant(s);return a===s&&(a=n),a}getHelpKey(e,i,n,s){return"SourceEditorSnippets."+e+"."+i+"."+n+s}help(e,i,n){const s=this.getHelpKey(e,i,n,".Help");let a=this.translate.instant(s);return a===s&&(a=""),a}linksList(e){if(!e)return null;const i=[],n=e.split("\n");for(const s of n){const a=s.split(":");if(3===a.length){const l={name:a[0].trim(),url:a[1].trim()+":"+a[2].trim()};i.push(l)}}return 0===i.length?null:i}loadContentType(e,i,n,s,a){this.getFields(s.AppId,i).subscribe(l=>{for(const c of l){const m=c.StaticName;e[m]={key:m,label:m,snip:this.valuePlaceholder(n,m,s),help:c.Metadata.merged.Notes||" ("+c.Type.toLowerCase()+") "};const _=(0,Vt.A)(e[m]);this.attachSnippets(e,n,m,c.InputType,_,a)}if(l.length){const c=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let m=0;m<c.length;m++)e[c[m]]={key:c[m],label:c[m],snip:this.valuePlaceholder(n,c[m],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+c[m]+".Help")}}})}valuePlaceholder(e,i,n){return n.Type.indexOf("Razor")>-1?"@"+e+"."+i:"["+e.replace(".",":")+":"+i+"]"}getFields(e,i){return this.http.get(this.apiUrl(Bt.z),{params:{appid:e.toString(),staticName:i}}).pipe((0,rt.T)(n=>{n=n.filter(s=>s.Type!==Gt.O.Empty);for(const s of n){if(!s.Metadata)continue;const a=s.Metadata;a.merged={...a.All,...a[s.Type],...a[s.InputType]}}return n}))}attachSnippets(e,i,n,s,a,l){let c=l[s];if(s.indexOf("-")){const _=s.substring(0,s.indexOf("-"));if(_){const S=l[_];S&&(c=c?c.concat(S):S)}}if(!c)return;void 0===e[n].more&&(e[n].more={});const m=e[n].more;for(let _=0;_<c.length;_++)try{m[n+"-"+c[_].name]=Object.assign({},a,{key:n+" - "+c[_].name,label:c[_].name,snip:this.localizeGenericSnippet(c[_].content,i,n),collapse:!0})}finally{}}localizeGenericSnippet(e,i,n){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+i+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+n+"$2")}static{this.\u0275fac=function(i){return new(i||o)(t.KVO(et.c$))}}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}}return o})();var Ut=r(9996),Wt=r(2159),zt=r(7941);const Ht=o=>({"sxc-dark":o}),lt=o=>({active:o}),Kt=(o,p,e)=>({active:o,modified:p,loading:e});function Yt(o,p){1&o&&(t.j41(0,"mat-icon",13),t.EFF(1,"share"),t.k0s())}function Jt(o,p){1&o&&(t.j41(0,"mat-icon",16),t.EFF(1,"circle"),t.k0s())}function Zt(o,p){1&o&&t.nrm(0,"mat-spinner",17)}function Qt(o,p){if(1&o){const e=t.RV6();t.j41(0,"div",11),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.openView(n.viewKey))}),t.j41(1,"div",12),t.DNE(2,Yt,2,0,"mat-icon",13),t.j41(3,"span",14),t.EFF(4),t.k0s()(),t.j41(5,"div",15),t.DNE(6,Jt,2,0,"mat-icon",16)(7,Zt,1,0,"mat-spinner",17),t.j41(8,"mat-icon",18),t.bIt("click",function(){const n=t.eBV(e).$implicit,s=t.XpG(2);return t.Njj(s.closeEditor(n.viewKey))}),t.EFF(9,"close"),t.k0s()()()}if(2&o){const e=p.$implicit;t.Y8G("ngClass",t.sMw(6,Kt,e.isActive,e.isModified,e.isLoading)),t.R7$(),t.Y8G("tippy",e.label),t.R7$(),t.vxM(e.viewKey.shared?2:-1),t.R7$(2),t.JRh(e.label),t.R7$(2),t.vxM(e.isModified?6:-1),t.R7$(),t.vxM(e.isLoading?7:-1)}}function qt(o,p){if(1&o&&(t.j41(0,"div",7),t.Z7z(1,Qt,10,10,"div",10,t.fX1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Dyx(e.tabs())}}function te(o,p){if(1&o){const e=t.RV6();t.j41(0,"app-monaco-editor",19),t.bIt("valueChanged",function(n){let s;t.eBV(e);const a=t.XpG();return t.Njj(a.codeChanged(n,null==(s=a.active())?null:s.viewKey))}),t.k0s()}if(2&o){let e,i,n,s;const a=t.XpG();t.Y8G("filename",null==(e=a.active())?null:e.view.FileName)("value",null==(i=a.active())?null:i.view.Code)("options",a.monacoOptions)("snippets",null==(n=a.active())?null:n.editorSnipps)("tooltips",null==(s=a.active())?null:s.tooltips)("autoFocus",!0)}}function ee(o,p){if(1&o){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.save())}),t.j41(1,"mat-icon"),t.EFF(2,"done"),t.k0s()()}}let ne=(()=>{class o extends k.${#e;#o;#s;#n;#t;#i;constructor(e,i,n,s,a,l){super(),this.context=e,this.route=i,this.snackBar=n,this.zone=s,this.matDialog=a,this.viewContainerRef=l,this.Explorers=Y,this.activeExplorer=Y.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.#e=(0,D.d)(Ut.F),this.#o=(0,D.d)(Xt),this.#s=(0,D.d)(F.hE),this.templates=(0,t.vPA)([]),this.activeView=(0,t.vPA)(void 0),this.#n=(0,t.vPA)([]),this.#t=(0,t.vPA)([]),this.active=(0,t.EWP)(()=>{const _=this.activeView();return this.#t().find(S=>C.a.objectsEqual(S.viewKey,_))}),this.tabs=(0,t.EWP)(()=>{const _=this.#n(),S=this.activeView(),A=this.#t();return _.map(E=>{const v=A.find(b=>C.a.objectsEqual(b.viewKey,E));return{viewKey:E,label:v?.view?.FileName??E.key,isActive:C.a.objectsEqual(E,S),isModified:v?.view?.Code!==v?.savedCode,isLoading:null==v?.view}})}),this.context.init(this.route);const c=JSON.parse(sessionStorage.getItem(M.Ul)),m="true"===sessionStorage.getItem(M.P3);c.forEach(_=>{_.Path.startsWith("/")&&(_.Path=_.Path.substring(1)),_.IsShared??=m}),this.#i=c,(0,t.QZP)(()=>{const _=this.templates(),S=this.#n();if(0===_.length)return;let A=this.#t();const E=S.filter(v=>!A.some(b=>C.a.objectsEqual(b.viewKey,v)));0!==E.length&&((0,f.p)(E.map(v=>{const b={viewKey:v};A=[...A,b];const V=this.#e.get(v.key,v.shared,this.#i).pipe((0,X.u)()),H=V.pipe((0,x.n)(K=>this.#o.getSnippets(K))),Z=V.pipe((0,x.n)(K=>this.#o.getTooltips(K.Extension.substring(1))));return(0,f.p)([(0,y.of)(v),V,H,Z])})).subscribe(v=>{let b=this.#t();v.forEach(([V,H,Z,K])=>{const it=b.findIndex(oe=>C.a.objectsEqual(oe.viewKey,V));if(it<0)return;const ie={viewKey:V,view:H,explorerSnipps:Z.sets,editorSnipps:Z.list,tooltips:K,savedCode:H.Code};b=[...b.slice(0,it),ie,...b.slice(it+1)],this.#a(V,H,_)}),this.#t.set(b)}),this.#t.set(A))},{allowSignalWrites:!0}),(0,t.QZP)(()=>{const _=this.activeView(),S=this.#t();if(!S)return;const A=S.find(V=>C.a.objectsEqual(V.viewKey,_)),E="Code Editor",v=null==A?E:`${A.view?.FileName} - ${E}`;v!==this.#s.getTitle()&&(console.log("newTitle",v),this.#s.setTitle(v))})}ngOnInit(){const e=this.#i.map(i=>({key:i.EntityId?.toString()??i.Path,shared:i.IsShared}));this.activeView.set(e[0]),this.#n.set(e),this.#r(),this.#e.getAll().subscribe(i=>{this.templates.set(i)})}ngOnDestroy(){super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const i={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.matDialog.open(B.g,{autoFocus:!1,data:i,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.#e.create(s.name,e.isShared,s.templateKey).subscribe(()=>{this.#e.getAll().subscribe(a=>{this.templates.set(a)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,i){let n=this.#t();const s=n.findIndex(c=>C.a.objectsEqual(c.viewKey,i)),a=n[s],l={...a,view:{...a.view,Code:e}};n=[...n.slice(0,s),l,...n.slice(s+1)],this.#t.set(n)}openView(e){e=this.#t().find(s=>!C.a.objectsEqual(s.viewKey,e)&&s.view?.FileName===e.key&&s.view?.IsShared===e.shared)?.viewKey??e;const i=this.activeView();C.a.objectsEqual(i,e)||this.activeView.set(e);const n=this.#n();if(!n.some(s=>C.a.objectsEqual(s,e))){const s=[...n,e];this.#n.set(s)}}closeEditor(e){const i=this.#n(),n=i.filter(a=>!C.a.objectsEqual(a,e)),s=this.activeView();if(C.a.objectsEqual(s,e)){const a=i[i.findIndex(l=>C.a.objectsEqual(l,s))-1]??n[0];this.activeView.set(a)}this.#n.set(n)}save(e){e??=this.activeView();const i=this.#t().find(s=>C.a.objectsEqual(s.viewKey,e));if(null==i?.view)return;this.snackBar.open("Saving...");const n=i.view.Code;this.#e.save(e.key,e.shared,i.view,this.#i).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let a=[...this.#t()];const l=a.findIndex(_=>C.a.objectsEqual(_.viewKey,e));if(l<0)return;const m={...a[l],savedCode:n};a=[...a.slice(0,l),m,...a.slice(l+1)],this.#t.set(a),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>this.snackBar.open("Failed",null,{duration:2e3})})}#a(e,i,n){const s=i.FileName,a=s.indexOf("/")>-1?s.lastIndexOf("/")+1:0,l=0===a?"":s.substring(0,a),c=s.substring(a),_=c.substring(0,c.length-i.Extension.length)+".code"+i.Extension,S=n.find(E=>E.Path===l+_&&E.Shared===i.IsShared),A=n.filter(E=>E.Path.endsWith(c)&&E.Shared===i.IsShared).length-1;if(S||A){const E={fileName:c,codeFile:S?.Path,edition:this.#i.find(b=>b.EntityId?.toString()===e.key&&b.IsShared===i.IsShared&&b.Path===i.FileName)?.Edition,otherEditions:A,openCodeBehind:!1},v=this.snackBar.openFromComponent(tt,{data:E,duration:1e4});v.onAction().subscribe(()=>{v.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:S?.Path,shared:S?.Shared})})}}#r(){this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,w.R)(window,"beforeunload").subscribe(e=>{this.#t().some(n=>null!=n.view&&n.view.Code!==n.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscriptions.add((0,w.R)(window,"keydown").subscribe(e=>{(0,O.J)(e)&&(e.preventDefault(),this.zone.run(()=>this.save()))}))})}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(N.o),t.rXU(Wt.nX),t.rXU(Q.UG),t.rXU(t.SKi),t.rXU(zt.bZ),t.rXU(t.c1b))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-editor"]],viewQuery:function(i,n){if(1&i&&t.GBs(W.K,5),2&i){let s;t.mGM(s=t.lsd())&&(n.monacoEditorRef=s.first)}},standalone:!0,features:[t.Vt3,t.aNF],decls:14,vars:17,consts:[["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"click","ngClass"],["tippy","Snippets",1,"button",3,"click","ngClass"],[3,"openView","createTemplate","hidden","view","templates"],[3,"insertSnippet","hidden","snippets"],[1,"editor-group"],[1,"tabs-container","fancy-scrollbar-dark"],[3,"filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S"],[1,"tab",3,"ngClass"],[1,"tab",3,"click","ngClass"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],[1,"icon-shared"],[1,"tab-label"],[1,"tab-actions-container"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[3,"valueChanged","filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(i,n){if(1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.bIt("click",function(){return n.toggleExplorer(n.Explorers.Templates)}),t.j41(3,"mat-icon"),t.EFF(4,"file_copy"),t.k0s()(),t.j41(5,"div",3),t.bIt("click",function(){return n.toggleExplorer(n.Explorers.Snippets)}),t.j41(6,"mat-icon"),t.EFF(7,"code"),t.k0s()()(),t.j41(8,"app-code-templates",4),t.bIt("openView",function(a){return n.openView(a)})("createTemplate",function(a){return n.createTemplate(a)}),t.k0s(),t.j41(9,"app-code-snippets",5),t.bIt("insertSnippet",function(a){return n.insertSnippet(a)}),t.k0s(),t.j41(10,"div",6),t.DNE(11,qt,3,0,"div",7)(12,te,1,6,"app-monaco-editor",8),t.k0s(),t.DNE(13,ee,3,0,"button",9),t.k0s()),2&i){let s,a,l;t.Y8G("ngClass",t.eq3(11,Ht,"2sxc-dark"===n.monacoOptions.theme)),t.R7$(2),t.Y8G("ngClass",t.eq3(13,lt,n.activeExplorer===n.Explorers.Templates)),t.R7$(3),t.Y8G("ngClass",t.eq3(15,lt,n.activeExplorer===n.Explorers.Snippets)),t.R7$(3),t.Y8G("hidden",n.activeExplorer!==n.Explorers.Templates)("view",null==(s=n.active())?null:s.view)("templates",n.templates()),t.R7$(),t.Y8G("hidden",n.activeExplorer!==n.Explorers.Snippets)("snippets",null==(a=n.active())?null:a.explorerSnipps),t.R7$(2),t.vxM(n.tabs().length>0?11:-1),t.R7$(),t.vxM(null!=(l=n.active())&&l.view?12:-1),t.R7$(),t.vxM(n.activeView()?13:-1)}},dependencies:[I.YU,g.m_,g.An,$t,Ft,$.D6,$.LG,W.K,T.Hl,T.Sr,R.c,j.e,G.V],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]})}}return o})()},5699:(U,P,r)=>{r.d(P,{V:()=>T});var I=r(9431),t=r(9148);let T=(()=>{class g{constructor(F){this.globalConfigService=F}onClick(F){(navigator.platform.match("Mac")?F.metaKey:F.ctrlKey)&&F.shiftKey&&F.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static{this.\u0275fac=function(f){return new(f||g)(t.rXU(I.B))}}static{this.\u0275dir=t.FsC({type:g,selectors:[["","appToggleDebug",""]],hostBindings:function(f,X){1&f&&t.bIt("click",function(y){return X.onClick(y)})},standalone:!0})}}return g})()},5959:(U,P,r)=>{r.d(P,{h:()=>C,z:()=>$});var I=r(271),t=r(5445),T=r(6474),g=r(9148);const $="admin/field/all",O=t.X6+"SetTitle",R="admin/field/GetSharedFields";let C=(()=>{class N extends T.D{paramsAppId(d={}){return{params:{appid:this.appId,...d}}}typeListRetrieve(){return this.http.get(this.apiUrl("admin/field/DataTypes"),this.paramsAppId())}getInputTypesList(){return this.http.get(this.apiUrl("admin/field/InputTypes"),this.paramsAppId()).pipe((0,I.T)(d=>d.map(u=>({dataType:u.Type.substring(0,u.Type.indexOf("-")),inputType:u.Type,label:u.Label,description:u.Description,isDefault:u.IsDefault,isObsolete:u.IsObsolete,isRecommended:u.IsRecommended,obsoleteMessage:u.ObsoleteMessage,icon:u.IsDefault?"star":u.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl("admin/field/ReservedNames"))}getFields(d){return this.http.get(this.apiUrl($),this.paramsAppId({staticName:d})).pipe((0,I.T)(h=>{if(h)for(const u of h){if(!u.Metadata)continue;const L=u.Metadata;L.merged={...L.All,...L[u.Type],...L[u.InputType]}}return h}))}getShareableFields(){return this.http.get(this.apiUrl(R),this.paramsAppId())}getShareableFieldsFor(d){return this.#e(R,d)}getAncestors(d){return this.#e("admin/field/GetAncestors",d)}getDescendants(d){return this.#e("admin/field/GetDescendants",d)}#e(d,h){return this.http.get(this.apiUrl(d),this.paramsAppId({attributeId:h}))}addInheritedField(d,h,u,L){return this.http.post(this.apiUrl("admin/field/AddInheritedField"),null,this.paramsAppId({contentTypeId:d.toString(),sourceType:h,sourceField:u,name:L}))}share(d,h=!0){return this.http.post(this.apiUrl("admin/field/Share"),null,{params:{appid:this.appId,attributeId:d.toString(),share:h}})}inherit(d,h){return this.http.post(this.apiUrl("admin/field/Inherit"),null,{params:{appid:this.appId,attributeId:d.toString(),inheritMetadataOf:h}})}reOrder(d,h){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.appId,contentTypeId:h.Id.toString(),order:JSON.stringify(d)}})}setTitle(d,h){return this.http.post(this.apiUrl(O),null,{params:{appid:this.appId,contentTypeId:h.Id.toString(),attributeId:d.Id.toString()}})}rename(d,h,u){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.appId,contentTypeId:h.toString(),attributeId:d.toString(),newName:u}})}delete(d,h){if(d.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.appId,contentTypeId:h.Id.toString(),attributeId:d.Id.toString()}})}add(d,h){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.appId,ContentTypeId:h.toString(),Id:d.Id.toString(),Type:d.Type,InputType:d.InputType,StaticName:d.StaticName,IsTitle:d.IsTitle.toString(),Index:d.SortOrder.toString()}})}updateInputType(d,h,u){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.appId,attributeId:d,field:h,inputType:u}})}static{this.\u0275fac=(()=>{let d;return function(u){return(d||(d=g.xGo(N)))(u||N)}})()}static{this.\u0275prov=g.jDH({token:N,factory:N.\u0275fac})}}return N})()},1726:(U,P,r)=>{r.d(P,{O:()=>I});const I={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},9234:(U,P,r)=>{r.d(P,{Gg:()=>D,Tr:()=>B,gb:()=>w});var I=r(1567),t=r(6647),T=r(6301),g=r(271),$=r(2938),F=r(4435),f=r(6474),X=r(4839),x=r(9148);const y={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},w="admin/entity/",D="admin/entity/list";let B=(()=>{class O extends f.D{constructor(){super(...arguments),this.log=(0,F.T)({EntityService:O},y),this.queryService=(0,$.d)(X.c)}getEntities$(k){return this.log.fnIf("getEntities"),k.pipe((0,I.p)(M=>null!=M),(0,t.n)(M=>this.getAvailableEntities(M.contentTypeName).pipe((0,T.t)(1))))}getAvailableEntities(k,M){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[k],itemIds:M,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,g.T)(j=>j.Default))}delete(k,M,R,j,G,C){return this.log.fnIf("delete",{appId:k,contentType:M,entityId:R,force:j,parentId:G,parent}),this.http.delete(this.apiUrl(w+"delete"),{params:{contentType:M,id:R.toString(),appId:k,force:j.toString(),...G&&{parentId:G.toString()},...G&&C&&{parentField:C}}})}static{this.\u0275fac=(()=>{let k;return function(R){return(k||(k=x.xGo(O)))(R||O)}})()}static{this.\u0275prov=x.jDH({token:O,factory:O.\u0275fac})}}return O})()},4839:(U,P,r)=>{r.d(P,{c:()=>F});var I=r(4435),t=r(8873),T=r(9148),g=r(6443);const $={all:!1,getAvailableEntities:!1,getEntities:!1};let F=(()=>{class f{constructor(x,y){this.http=x,this.context=y,this.log=(0,I.T)({QueryService:f},$)}getFromQuery(x,y,w,D){this.log.fnIf("getAvailableEntities",{queryUrl:x,params:y,fields:w,entitiesFilter:D});const B=!!y,M=(((y?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(B?`&${y}`:"")+"&$select="+(w??"")).substring(1);return this.http.post(`app/auto/query/${x}?${M}`,{Guids:D})}getEntities({contentTypes:x,itemIds:y,fields:w,log:D}){this.log.fnIf("getEntities",{log:D,contentTypes:x,itemIds:y,fields:w});const O=("&typeNames="+(x?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(y?.join(",")??"")+"&$select="+(w??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${O}`,{})}static{this.\u0275fac=function(y){return new(y||f)(T.KVO(g.Qq),T.KVO(t.o))}}static{this.\u0275prov=T.jDH({token:f,factory:f.\u0275fac})}}return f})()},4979:(U,P,r)=>{r.d(P,{V:()=>T});var I=r(7092),t=r(9148);let T=(()=>{class g{constructor(){this.subscriptions=new I.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(f){return new(f||g)}}static{this.\u0275prov=t.jDH({token:g,factory:g.\u0275fac})}}return g})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.02.00/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_component_ts-projects_eav-ui_src_app_shared_s-8f907f.a639ecbaec9fff7e.js.map