"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-ca2267"],{7693:(M,c,t)=>{t.d(c,{X:()=>l,g:()=>h});var o=t(271),_=t(6474),r=t(9148);const l="admin/type/",e="admin/type/scopes";let h=(()=>{class I extends _.D{retrieveContentType(u){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.appId,contentTypeId:u}})}retrieveContentTypes(u){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.appId,scope:u}})}getScopes(){return this.http.get(this.apiUrl(e),{params:{appId:this.appId}}).pipe((0,o.T)(u=>{const A=u.old;return Object.keys(A).map(O=>({name:A[O],value:O}))}))}getScopesV2(){return this.http.get(this.apiUrl(e),{params:{appId:this.appId}}).pipe((0,o.T)(u=>u.scopes))}save(u){return this.http.post(this.apiUrl("admin/type/save"),u,{params:{appid:this.appId}})}delete(u){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:u.StaticName}})}import(u){const A=new FormData;for(const m of u)A.append("File",m);return this.http.post(this.apiUrl("admin/type/import"),A,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(u){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:u}})}static{this.\u0275fac=(()=>{let u;return function(m){return(u||(u=r.xGo(I)))(m||I)}})()}static{this.\u0275prov=r.jDH({token:I,factory:I.\u0275fac})}}return I})()},1475:(M,c,t)=>{t.d(c,{j:()=>l});var o=t(8624),_=t(6474),r=t(9148);let l=(()=>{class a extends _.D{getContentInfo(e){return this.http.get(this.apiUrl(o.Q+"Get"),{params:{appid:this.appId,zoneId:this.zoneId,scope:e}})}exportParts(e,d,n){const s=this.apiUrl(o.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+e.join(";")+"&entityIdsString="+d.join(";")+"&templateIdsString="+n.join(";");window.open(s,"_blank","")}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=r.xGo(a)))(n||a)}})()}static{this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac})}}return a})()},320:(M,c,t)=>{t.d(c,{t:()=>l});var o=t(1772),_=t(6474),r=t(9148);let l=(()=>{class a extends _.D{getAppInfo(){return this.http.get(this.apiUrl(o.u+"Statistics"),{params:{appid:this.appId,zoneId:this.zoneId}})}exportAppUrl(){return`${this.apiUrl(`${o.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:e,resetAppGuid:d,withFiles:n}){return this.http.get(this.apiUrl(o.u+"SaveData"),{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:e.toString(),resetAppGuid:d.toString(),withPortalFiles:n.toString()}})}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=r.xGo(a)))(n||a)}})()}static{this.\u0275prov=r.jDH({token:a,factory:a.\u0275fac})}}return a})()},8624:(M,c,t)=>{t.d(c,{Q:()=>l,S:()=>a});var o=t(1772),_=t(6474),r=t(9148);const l="admin/appParts/";let a=(()=>{class i extends _.D{importAppParts(d){const n=new FormData;return n.append("File",d),this.http.post(this.apiUrl(l+"Import"),n,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(d){return this.http.post(this.apiUrl(o.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:d.toString()}})}static{this.\u0275fac=(()=>{let d;return function(s){return(d||(d=r.xGo(i)))(s||i)}})()}static{this.\u0275prov=r.jDH({token:i,factory:i.\u0275fac})}}return i})()},5445:(M,c,t)=>{t.d(c,{Cu:()=>i.Cu,JL:()=>i.JL,Mk:()=>i.Mk,X6:()=>_.X,ei:()=>i.ei,gs:()=>_.g,tr:()=>o.t,vN:()=>i.vN,xR:()=>i.xR,y0:()=>e.y});var o=t(1479),_=t(7693),i=(t(1475),t(320),t(8624),t(6460)),e=t(2570)},6460:(M,c,t)=>{t.d(c,{Cu:()=>I,JL:()=>v,Mk:()=>g,ei:()=>h,vN:()=>u,xR:()=>A});var o=t(4600),_=t(6647),r=t(271),l=t(693),a=t(9234),i=t(6474),e=t(9148);const g="admin/query/Run",h="admin/query/DebugStream",I="admin/query/Save",v="admin/query/Get",u="admin/query/DataSources";let A=(()=>{class m extends i.D{getAll(P){return this.http.get(this.apiUrl(a.Gg),{params:{appId:this.appId,contentType:P}})}importQuery(P){return(0,o.H)((0,l.n)(P)).pipe((0,_.n)(y=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:y})),(0,r.T)(y=>({Success:y,Messages:[]})))}clonePipeline(P){return this.http.get(this.apiUrl("admin/query/Clone"),{params:{Id:P.toString(),appId:this.appId}})}delete(P){return this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:P.toString()}})}static{this.\u0275fac=(()=>{let P;return function(T){return(P||(P=e.xGo(m)))(T||m)}})()}static{this.\u0275prov=e.jDH({token:m,factory:m.\u0275fac})}}return m})()},2570:(M,c,t)=>{t.d(c,{y:()=>n});var o=t(6474),_=t(9148);const r="admin/view/",l=r+"all",a=r+"delete",i=r+"import",e=r+"polymorphism",d=r+"usage";let n=(()=>{class s extends o.D{getAll(){return this.http.get(this.apiUrl(l),{params:{appId:this.appId}})}delete(h){return this.http.get(this.apiUrl(a),{params:{appId:this.appId,Id:h.toString()}})}import(h){const I=new FormData;return I.append("File",h),this.http.post(this.apiUrl(i),I,{params:{appId:this.appId,zoneId:this.zoneId}})}export(h){const I=this.apiUrl(r+"json")+"?appId="+this.appId+"&viewId="+h;window.open(I,"_blank","")}getPolymorphism(){return this.http.get(this.apiUrl(e),{params:{appId:this.appId}})}getUsage(h){return this.http.get(this.apiUrl(d),{params:{appId:this.appId,guid:h}})}static{this.\u0275fac=(()=>{let h;return function(v){return(h||(h=_.xGo(s)))(v||s)}})()}static{this.\u0275prov=_.jDH({token:s,factory:s.\u0275fac})}}return s})()},6754:(M,c,t)=>{t.r(c),t.d(c,{ImportContentItemComponent:()=>i});var o=t(7941),_=t(2938),r=t(3550),l=t(336),a=t(9148);let i=(()=>{class e{constructor(n){this.uploadType=r.HL.ContentItem,this.contentItemsService=(0,_.d)(l.F),n.title??="Import Single Item",n.description??="Select an item file (json) from your computer to import.",n.allowedFileTypes??="json",n.upload$??=s=>this.contentItemsService.importItem(s[0])}static{this.\u0275fac=function(s){return new(s||e)(a.rXU(o.Vh))}}static{this.\u0275cmp=a.VBU({type:e,selectors:[["app-import-content-item"]],standalone:!0,features:[a.aNF],decls:1,vars:1,consts:[[3,"uploadType"]],template:function(s,g){1&s&&a.nrm(0,"app-file-upload-dialog",0),2&s&&a.Y8G("uploadType",g.uploadType)},dependencies:[r.jj],encapsulation:2})}}return e})()},1772:(M,c,t)=>{t.d(c,{I:()=>e,u:()=>i});var o=t(6647),_=t(9452),r=t(3550),l=t(6474),a=t(9148);const i="admin/app/";let e=(()=>{class d extends l.D{importApp(s,g,h=!1){const I=new FormData;return I.append("File",s),I.append("Name",g??""),this.http.post(this.apiUrl(i+"Import"),I,{params:{zoneId:this.zoneId}}).pipe((0,o.n)(v=>{if(h&&v.Messages[0]?.MessageType===r.G1.Warning){const u=prompt(v.Messages[0].Text+" Would you like to install it using another folder name?");if(u)return this.importApp(s,u,!0)}return(0,_.of)(v)}))}static{this.\u0275fac=(()=>{let s;return function(h){return(s||(s=a.xGo(d)))(h||d)}})()}static{this.\u0275prov=a.jDH({token:d,factory:d.\u0275fac})}}return d})()},5959:(M,c,t)=>{t.d(c,{h:()=>T,z:()=>a});var o=t(271),_=t(5445),r=t(6474),l=t(9148);const a="admin/field/all",v=_.X6+"SetTitle",O="admin/field/GetSharedFields";let T=(()=>{class f extends r.D{paramsAppId(p={}){return{params:{appid:this.appId,...p}}}typeListRetrieve(){return this.http.get(this.apiUrl("admin/field/DataTypes"),this.paramsAppId())}getInputTypesList(){return this.http.get(this.apiUrl("admin/field/InputTypes"),this.paramsAppId()).pipe((0,o.T)(p=>p.map(D=>({dataType:D.Type.substring(0,D.Type.indexOf("-")),inputType:D.Type,label:D.Label,description:D.Description,isDefault:D.IsDefault,isObsolete:D.IsObsolete,isRecommended:D.IsRecommended,obsoleteMessage:D.ObsoleteMessage,icon:D.IsDefault?"star":D.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl("admin/field/ReservedNames"))}getFields(p){return this.http.get(this.apiUrl(a),this.paramsAppId({staticName:p})).pipe((0,o.T)(E=>{if(E)for(const D of E){if(!D.Metadata)continue;const U=D.Metadata;U.merged={...U.All,...U[D.Type],...U[D.InputType]}}return E}))}getShareableFields(){return this.http.get(this.apiUrl(O),this.paramsAppId())}getShareableFieldsFor(p){return this.#t(O,p)}getAncestors(p){return this.#t("admin/field/GetAncestors",p)}getDescendants(p){return this.#t("admin/field/GetDescendants",p)}#t(p,E){return this.http.get(this.apiUrl(p),this.paramsAppId({attributeId:E}))}addInheritedField(p,E,D,U){return this.http.post(this.apiUrl("admin/field/AddInheritedField"),null,this.paramsAppId({contentTypeId:p.toString(),sourceType:E,sourceField:D,name:U}))}share(p,E=!0){return this.http.post(this.apiUrl("admin/field/Share"),null,{params:{appid:this.appId,attributeId:p.toString(),share:E}})}inherit(p,E){return this.http.post(this.apiUrl("admin/field/Inherit"),null,{params:{appid:this.appId,attributeId:p.toString(),inheritMetadataOf:E}})}reOrder(p,E){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.appId,contentTypeId:E.Id.toString(),order:JSON.stringify(p)}})}setTitle(p,E){return this.http.post(this.apiUrl(v),null,{params:{appid:this.appId,contentTypeId:E.Id.toString(),attributeId:p.Id.toString()}})}rename(p,E,D){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.appId,contentTypeId:E.toString(),attributeId:p.toString(),newName:D}})}delete(p,E){if(p.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.appId,contentTypeId:E.Id.toString(),attributeId:p.Id.toString()}})}add(p,E){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.appId,ContentTypeId:E.toString(),Id:p.Id.toString(),Type:p.Type,InputType:p.InputType,StaticName:p.StaticName,IsTitle:p.IsTitle.toString(),Index:p.SortOrder.toString()}})}updateInputType(p,E,D){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.appId,attributeId:p,field:E,inputType:D}})}static{this.\u0275fac=(()=>{let p;return function(D){return(p||(p=l.xGo(f)))(D||f)}})()}static{this.\u0275prov=l.jDH({token:f,factory:f.\u0275fac})}}return f})()},693:(M,c,t)=>{function o(r){return new Promise((l,a)=>{const i=new FileReader;i.readAsDataURL(r),i.onload=()=>{l(i.result.split(",")[1])},i.onerror=e=>{a(e)}})}function _(r){return new Promise((l,a)=>{const i=new FileReader;i.readAsText(r),i.onload=()=>{l(i.result)},i.onerror=e=>{a(e)}})}t.d(c,{d:()=>_,n:()=>o})},9234:(M,c,t)=>{t.d(c,{Gg:()=>h,Tr:()=>I,gb:()=>g});var o=t(1567),_=t(6647),r=t(6301),l=t(271),a=t(2938),i=t(4435),e=t(6474),d=t(4839),n=t(9148);const s={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},g="admin/entity/",h="admin/entity/list";let I=(()=>{class v extends e.D{constructor(){super(...arguments),this.log=(0,i.T)({EntityService:v},s),this.queryService=(0,a.d)(d.c)}getEntities$(A){return this.log.fnIf("getEntities"),A.pipe((0,o.p)(m=>null!=m),(0,_.n)(m=>this.getAvailableEntities(m.contentTypeName).pipe((0,r.t)(1))))}getAvailableEntities(A,m){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[A],itemIds:m,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,l.T)(P=>P.Default))}delete(A,m,O,P,y,T){return this.log.fnIf("delete",{appId:A,contentType:m,entityId:O,force:P,parentId:y,parent}),this.http.delete(this.apiUrl(g+"delete"),{params:{contentType:m,id:O.toString(),appId:A,force:P.toString(),...y&&{parentId:y.toString()},...y&&T&&{parentField:T}}})}static{this.\u0275fac=(()=>{let A;return function(O){return(A||(A=n.xGo(v)))(O||v)}})()}static{this.\u0275prov=n.jDH({token:v,factory:v.\u0275fac})}}return v})()},4839:(M,c,t)=>{t.d(c,{c:()=>i});var o=t(4435),_=t(8873),r=t(9148),l=t(6443);const a={all:!1,getAvailableEntities:!1,getEntities:!1};let i=(()=>{class e{constructor(n,s){this.http=n,this.context=s,this.log=(0,o.T)({QueryService:e},a)}getFromQuery(n,s,g,h){this.log.fnIf("getAvailableEntities",{queryUrl:n,params:s,fields:g,entitiesFilter:h});const I=!!s,m=(((s?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(I?`&${s}`:"")+"&$select="+(g??"")).substring(1);return this.http.post(`app/auto/query/${n}?${m}`,{Guids:h})}getEntities({contentTypes:n,itemIds:s,fields:g,log:h}){this.log.fnIf("getEntities",{log:h,contentTypes:n,itemIds:s,fields:g});const v=("&typeNames="+(n?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(s?.join(",")??"")+"&$select="+(g??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${v}`,{})}static{this.\u0275fac=function(s){return new(s||e)(r.KVO(l.Qq),r.KVO(_.o))}}static{this.\u0275prov=r.jDH({token:e,factory:e.\u0275fac})}}return e})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.02.00/dist/ng-edit/projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts-pr-ca2267.8b23820f299dac2e.js.map