"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts"],{9262:(v,u,p)=>{p.r(u),p.d(u,{WebApiRestApiComponent:()=>d});var h=p(316),o=p(4456),E=p(4175),C=p(3777),A=p(3840),I=p(5175),D=p(2159),f=p(5797),P=p(2938),g=p(9996),M=p(7037),l=p(8471),e=p(9148),t=p(4950),s=p(5060);function a(r,c){if(1&r&&(e.j41(0,"mat-option",3),e.EFF(1),e.k0s()),2&r){const n=c.$implicit;e.Y8G("value",n.path),e.R7$(),e.SpI(" ",n.name," ")}}function i(r,c){1&r&&e.Z7z(0,a,2,2,"mat-option",3,e.fX1),2&r&&e.Dyx(c.sort())}let d=(()=>{class r{#e;#t;constructor(n){this.fb=n,this.#e=(0,P.d)(g.F),this.#t=(0,P.d)(l.c),this.webApis$=new f.t(void 0)}ngOnInit(){this.fetchWebApis(),this.webApiTypeForm=this.fb.group({webApiType:[""]})}fetchWebApis(){this.#e.getWebApis().subscribe(n=>{this.webApis$.next(n);const _=this.#t.url.split("/");var m=_[_.length-1].replace("%252F","/");const T=n.find(R=>R.path===m);T&&this.webApiTypeForm.get("webApiType").setValue(T.path)})}openRestApi(n){n&&this.#t.navParentFirstChild([encodeURIComponent(n)])}static{this.\u0275fac=function(_){return new(_||r)(e.rXU(o.ok))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","webApiType",3,"valueChange"],[3,"value"]],template:function(_,O){if(1&_&&(e.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e.EFF(3,"Endpoint"),e.k0s(),e.j41(4,"mat-select",2),e.bIt("valueChange",function(T){return O.openRestApi(T)}),e.DNE(5,i,2,0),e.nI1(6,"async"),e.k0s()()(),e.nrm(7,"router-outlet")),2&_){let m;e.Y8G("formGroup",O.webApiTypeForm),e.R7$(5),e.vxM((m=e.bMT(6,2,O.webApis$))?5:-1,m)}},dependencies:[I.Ve,t.rl,t.nJ,I.VO,s.wT,E.Hl,C.Hu,A.m_,o.X1,o.qT,o.BC,o.cb,o.j4,o.JD,h.Jj,D.n3,M.p],encapsulation:2})}}return r})()},9996:(v,u,p)=>{p.d(u,{F:()=>M});var h=p(271),o=p(6474),E=p(9148);const A="admin/AppFiles/asset";let M=(()=>{class l extends o.D{get(t,s,a){return this.http.get(this.apiUrl(A),{params:{appId:this.appId,global:s,...this.templateIdOrPath(t,s,a)}}).pipe((0,h.T)(i=>{if("auto"===i.Type.toLocaleLowerCase())switch(i.Extension.toLocaleLowerCase()){case".cs":case".cshtml":i.Type="Razor";break;case".html":case".css":case".js":i.Type="Token"}return i}))}save(t,s,a,i){return this.http.post(this.apiUrl(A),a,{params:{appId:this.appId,global:s,...this.templateIdOrPath(t,s,i)}})}getAll(t){return this.http.get(this.apiUrl("admin/AppFiles/AppFiles"),{params:{appId:this.appId,...t&&{mask:t}}}).pipe((0,h.T)(({Files:s})=>(s.forEach(a=>{a.Shared??=!1}),s)))}getWebApis(){return this.http.get(this.apiUrl("admin/ApiExplorer/AppApiFiles"),{params:{appId:this.appId}}).pipe((0,h.T)(({files:t})=>(t.forEach(s=>{s.isShared??=!1,s.isCompiled??=!1}),t))).pipe((0,h.T)(t=>t.map(a=>{const i=a.path.lastIndexOf("/"),d=a.path.lastIndexOf("."),r=a.path.substring(0,i),c=a.path.substring(i+1,d);return{path:a.path,folder:r,name:c,isShared:a.isShared,endpointPath:a.endpointPath,isCompiled:a.isCompiled,edition:a.edition}})))}getWebApiDetails(t){return this.http.get(this.apiUrl("admin/ApiExplorer/inspect"),{params:{appId:this.appId,zoneId:this.zoneId,path:t}})}getPredefinedTemplates(t,s){return this.http.get(this.apiUrl("admin/AppFiles/GetTemplates"),{params:{...t&&{purpose:t},...s&&{type:s}}})}getPreview(t,s,a){return this.http.get(this.apiUrl("admin/AppFiles/preview"),{params:{appId:this.appId,path:t,templateKey:a,global:s}})}create(t,s,a){return this.http.post(this.apiUrl("admin/AppFiles/create"),{},{params:{appId:this.appId,global:s,purpose:"auto",path:t,templateKey:a}})}templateIdOrPath(t,s,a){if(/^[0-9]*$/g.test(t)){const i=a.find(d=>d.EntityId?.toString()===t&&d.IsShared===s)?.Path;return{templateId:t,...null!=i&&{path:i}}}return{path:t}}static{this.\u0275fac=(()=>{let t;return function(a){return(t||(t=E.xGo(l)))(a||l)}})()}static{this.\u0275prov=E.jDH({token:l,factory:l.\u0275fac})}}return l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.02.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts.0e77908ded93f1b2.js.map