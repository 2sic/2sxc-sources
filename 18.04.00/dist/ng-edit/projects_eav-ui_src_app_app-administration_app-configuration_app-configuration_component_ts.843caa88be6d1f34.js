"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_app-configuration_app-configuration_component_ts"],{708:(P,T,a)=>{a.r(T),a.d(T,{AppConfigurationComponent:()=>Ct});var d=a(316),t=a(9148),F=a(6256),E=a(4175),C=a(3777),k=a(3840),R=a(2159),G=a(4205),b=a(2938),A=a(6545),_=a(336),$=a(8136),s=a(5469),u=a(4824),f=a(2437),m=a(52),B=a(4601),y=a(3216),j=a(6666),v=a(334),I=a(8471),M=a(8873),X=a(2785),z=a(8713),N=a(5445),V=a(6474);let Y=(()=>{class o extends V.D{getAppInternals(e){return this.getSignal("admin/appinternals/get",{params:{appid:this.appId}},e)}static{this.\u0275fac=(()=>{let e;return function(n){return(e||(e=t.xGo(o)))(n||o)}})()}static{this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}}return o})();var O=a(4699);const L={Settings:"Settings",Resources:"Resources"};var U=a(3454),H=a(5081),D=a(3347);function W(o,g){if(1&o){const e=t.RV6();t.j41(0,"mat-card",0)(1,"mat-card-header",1)(2,"mat-card-title"),t.EFF(3,"Configuration"),t.k0s(),t.j41(4,"mat-icon"),t.EFF(5,"redeem"),t.k0s()(),t.j41(6,"mat-card-content"),t.nrm(7,"p"),t.j41(8,"div",2)(9,"div",3),t.EFF(10,"Name:"),t.k0s(),t.j41(11,"div",4)(12,"span",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clipboard.copyToClipboard(n.contentItem()[0].DisplayName))}),t.EFF(13),t.k0s()()(),t.j41(14,"div",2)(15,"div",3),t.EFF(16,"Folder:"),t.k0s(),t.j41(17,"div",4)(18,"span",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clipboard.copyToClipboard(n.contentItem()[0].Folder))}),t.EFF(19),t.k0s()()(),t.j41(20,"div",2)(21,"div",3),t.EFF(22,"Version:"),t.k0s(),t.j41(23,"div",4)(24,"span",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clipboard.copyToClipboard(n.contentItem()[0].Version))}),t.EFF(25),t.k0s()()(),t.j41(26,"div",2)(27,"div",3),t.EFF(28,"For"),t.k0s(),t.j41(29,"div",4)(30,"b"),t.EFF(31,"2sxc: "),t.k0s(),t.j41(32,"span",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clipboard.copyToClipboard(n.contentItem()[0].RequiredVersion))}),t.EFF(33),t.k0s(),t.j41(34,"b"),t.EFF(35," DNN: "),t.k0s(),t.j41(36,"span",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clipboard.copyToClipboard(n.contentItem()[0].RequiredDnnVersion))}),t.EFF(37),t.k0s(),t.j41(38,"b"),t.EFF(39," Oqt: "),t.k0s(),t.j41(40,"span",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.clipboard.copyToClipboard(n.contentItem()[0].RequiredOqtaneVersion))}),t.EFF(41),t.k0s()()()(),t.nrm(42,"div",6),t.j41(43,"mat-card-actions",7),t.nrm(44,"app-docs-link-helper",8),t.j41(45,"button",9),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.edit())}),t.j41(46,"mat-icon",10),t.EFF(47,"edit"),t.k0s(),t.j41(48,"span"),t.EFF(49,"Edit"),t.k0s()(),t.j41(50,"a",11)(51,"button",12)(52,"mat-icon",10),t.EFF(53,"local_offer"),t.k0s(),t.j41(54,"span"),t.EFF(55,"Metadata"),t.k0s()()()()()}if(2&o){let e,i,n,r,l,c,p,x;const h=t.XpG();t.R7$(12),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(h.formatValue(null==(e=h.contentItem()[0])?null:e.DisplayName)),t.R7$(5),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(h.formatValue(null==(i=h.contentItem()[0])?null:i.Folder)),t.R7$(5),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.JRh(h.formatValue(null==(n=h.contentItem()[0])?null:n.Version)),t.R7$(7),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",h.formatValue(null==(r=h.contentItem()[0])?null:r.RequiredVersion)," "),t.R7$(3),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",h.formatValue(null==(l=h.contentItem()[0])?null:l.RequiredDnnVersion)," "),t.R7$(3),t.Y8G("tippy","Click to copy to clipboard"),t.R7$(),t.SpI(" ",h.formatValue(null==(c=h.contentItem()[0])?null:c.RequiredOqtaneVersion)," "),t.R7$(3),t.Y8G("link","https://docs.2sxc.org/basics/app/configuration.html"),t.R7$(2),t.Y8G("matBadge",(null==(p=h.appSettingsInternal()())||null==p.EntityLists?null:p.EntityLists.ToSxcContentApp.length)||null),t.R7$(4),t.Y8G("href",h.urlToOpenMetadata(),t.B4B),t.R7$(2),t.Y8G("matBadge",(null==(x=h.appSettingsInternal()())?null:x.MetadataList.Items.length)||null)}}let Q=(()=>{class o{#o;#e;#n;constructor(e,i){this.context=e,this.snackBar=i,this.dialogSettings=t.hFB.required(),this.#o=(0,b.d)(Y),this.#e=(0,b.d)(_.F),this.#n=(0,b.d)(I.c),this.contentItem=this.#e.getAllSig(m.YX.contentTypes.appConfiguration,void 0),this.#i=(0,t.vPA)(0),this.appSettingsInternal=(0,t.EWP)(()=>(this.#i(),this.#o.getAppInternals(void 0))),this.clipboard=(0,b.d)(H.W)}#i;ngOnInit(){this.#n.doOnDialogClosed(()=>{this.#i.update(e=>e+1)})}ngOnDestroy(){this.snackBar.dismiss()}#s(e){return"#"+this.#n.urlSubRoute(e)}edit(){const e=m.YX.contentTypes.appConfiguration;this.#e.getAll(e).subscribe(i=>{let n;if(i.length<1)throw new Error(`Found no settings for type ${e}`);if(i.length>1)throw new Error(`Found too many settings for type ${e}`);n={items:[v.c.editId(i[0].Id)]};const r=(0,y.s)(n);this.#n.navParentFirstChild([`edit/${r}`])})}urlToOpenMetadata(){return this.#s(U.H.getUrlApp(this.context.appId,`Metadata for App: ${this.dialogSettings().Context.App.Name} (${this.context.appId})`))}formatValue(e){return""===e?"-":e??"-"}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(M.o),t.rXU(D.UG))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-app-configuration-card"]],inputs:{dialogSettings:[1,"dialogSettings"]},standalone:!0,features:[t.aNF],decls:1,vars:1,consts:[[1,"eav-card"],[1,"eav-card-header"],[1,"eav-info-row"],[1,"eav-info-row__label"],[1,"eav-info-row__value"],[3,"click","tippy"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],["mat-button","",1,"eav-button__with-icon",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],[3,"href"],["mat-button","",1,"eav-button__with-icon"]],template:function(i,n){1&i&&t.DNE(0,W,56,16,"mat-card",0),2&i&&t.vxM(n.contentItem()?0:-1)},dependencies:[C.Hu,C.RN,C.YY,C.m2,C.MM,C.dh,k.m_,k.An,E.Hl,E.$z,F.Y,F.k,B.e,A.d],styles:[".eav-card-space-div[_ngcontent-%COMP%]{min-height:30px}"]})}}return o})();var J=a(7941);function K(o,g){1&o&&t.EFF(0," This is the Global App. Anything configured here will affect all Sites and Apps in this installation. ")}function Z(o,g){1&o&&t.EFF(0," This is the Primary App of this Site. You can also configure sitewide settings and resources here. ")}function q(o,g){if(1&o&&(t.j41(0,"div",2),t.DNE(1,K,1,0)(2,Z,1,0),t.EFF(3," See "),t.j41(4,"a",6),t.EFF(5,"docs"),t.k0s(),t.EFF(6,". "),t.k0s()),2&o){const e=t.XpG(2);t.R7$(),t.vxM(e.isGlobal?1:-1),t.R7$(),t.vxM(e.isPrimary?2:-1)}}function tt(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"button",22),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.systemSettings,n.SystemSettingsScopes.App))}),t.j41(5,"mat-icon",23),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"button",24),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customSettings,"edit"))}),t.j41(9,"mat-icon",23),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"button",25),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customSettings,"config"))}),t.j41(12,"mat-icon",23),t.EFF(13,"dns"),t.k0s()()()()}if(2&o){let e,i,n;const r=t.XpG(2);t.R7$(5),t.Y8G("matBadge",(null==(e=r.viewModelSig())?null:e.systemSettingsCount)||null),t.R7$(4),t.Y8G("matBadge",(null==(i=r.viewModelSig())?null:i.customSettingsCount)||null),t.R7$(3),t.Y8G("matBadge",(null==(n=r.viewModelSig())?null:n.customSettingsFieldsCount)||null)}}function et(o,g){1&o&&t.eu8(0)}function nt(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"button",26),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.systemSettings,n.SystemSettingsScopes.Site))}),t.j41(5,"mat-icon",23),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"button",27),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customSettings,"edit"))}),t.j41(9,"mat-icon",23),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"button",28),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customSettings,"config"))}),t.j41(12,"mat-icon",23),t.EFF(13,"dns"),t.k0s()()()(),t.DNE(14,et,1,0,"ng-container",29)}if(2&o){let e,i,n;t.XpG();const r=t.sdS(67),l=t.XpG();t.R7$(5),t.Y8G("matBadge",(null==(e=l.viewModelSig())?null:e.systemSettingsCount)||null),t.R7$(4),t.Y8G("matBadge",(null==(i=l.viewModelSig())?null:i.customSettingsCount)||null),t.R7$(3),t.Y8G("matBadge",(null==(n=l.viewModelSig())?null:n.customSettingsFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",r)}}function it(o,g){1&o&&t.eu8(0)}function ot(o,g){1&o&&t.eu8(0)}function at(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"button",30),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.systemSettings,n.SystemSettingsScopes.App))}),t.j41(5,"mat-icon",23),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"button",31),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.settings))}),t.j41(9,"mat-icon",23),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",17)(12,"button",32)(13,"mat-icon",23),t.EFF(14,"dns"),t.k0s()()()()(),t.DNE(15,it,1,0,"ng-container",29)(16,ot,1,0,"ng-container",29)}if(2&o){let e,i,n;t.XpG();const r=t.sdS(67),l=t.sdS(69),c=t.XpG();t.R7$(2),t.JRh(c.dialogSettings.Context.App.Name),t.R7$(3),t.Y8G("matBadge",(null==(e=c.viewModelSig())?null:e.systemSettingsCount)||null),t.R7$(4),t.Y8G("matBadge",(null==(i=c.viewModelSig())?null:i.customSettingsCount)||null),t.R7$(2),t.Y8G("href",c.urlToConfig(c.eavConstants.contentTypes.settings),t.B4B),t.R7$(2),t.Y8G("matBadge",(null==(n=c.viewModelSig())?null:n.customSettingsFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",l),t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function st(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"button",33),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.systemResources,n.SystemSettingsScopes.App))}),t.j41(5,"mat-icon",23),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"button",34),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customResources,"edit"))}),t.j41(9,"mat-icon",23),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"button",35),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customResources,"config"))}),t.j41(12,"mat-icon",23),t.EFF(13,"dns"),t.k0s()()()()}if(2&o){let e,i,n;const r=t.XpG(2);t.R7$(5),t.Y8G("matBadge",(null==(e=r.viewModelSig())?null:e.systemResourcesCount)||null),t.R7$(4),t.Y8G("matBadge",(null==(i=r.viewModelSig())?null:i.customResourcesCount)||null),t.R7$(3),t.Y8G("matBadge",(null==(n=r.viewModelSig())?null:n.customResourcesFieldsCount)||null)}}function lt(o,g){1&o&&t.eu8(0)}function rt(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"button",36),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.systemResources,n.SystemSettingsScopes.Site))}),t.j41(5,"mat-icon",23),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"button",37),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customResources,"edit"))}),t.j41(9,"mat-icon",23),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"button",38),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.fixContentType(n.eavConstants.contentTypes.customResources,"config"))}),t.j41(12,"mat-icon",23),t.EFF(13,"dns"),t.k0s()()()(),t.DNE(14,lt,1,0,"ng-container",29)}if(2&o){let e,i,n;t.XpG();const r=t.sdS(67),l=t.XpG();t.R7$(5),t.Y8G("matBadge",(null==(e=l.viewModelSig())?null:e.systemResourcesCount)||null),t.R7$(4),t.Y8G("matBadge",(null==(i=l.viewModelSig())?null:i.customResourcesCount)||null),t.R7$(3),t.Y8G("matBadge",(null==(n=l.viewModelSig())?null:n.customResourcesFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",r)}}function ct(o,g){1&o&&t.eu8(0)}function dt(o,g){1&o&&t.eu8(0)}function pt(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2),t.k0s(),t.j41(3,"td")(4,"button",39),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.systemResources,n.SystemSettingsScopes.App))}),t.j41(5,"mat-icon",23),t.EFF(6,"edit"),t.k0s()()(),t.j41(7,"td")(8,"button",40),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.edit(n.eavConstants.contentTypes.resources))}),t.j41(9,"mat-icon",23),t.EFF(10,"edit"),t.k0s()(),t.j41(11,"a",17)(12,"button",41)(13,"mat-icon",23),t.EFF(14,"dns"),t.k0s()()()()(),t.DNE(15,ct,1,0,"ng-container",29)(16,dt,1,0,"ng-container",29)}if(2&o){let e,i,n;t.XpG();const r=t.sdS(67),l=t.sdS(69),c=t.XpG();t.R7$(2),t.JRh(c.dialogSettings.Context.App.Name),t.R7$(3),t.Y8G("matBadge",(null==(e=c.viewModelSig())?null:e.systemResourcesCount)||null),t.R7$(4),t.Y8G("matBadge",(null==(i=c.viewModelSig())?null:i.customResourcesCount)||null),t.R7$(2),t.Y8G("href",c.urlToConfig(c.eavConstants.contentTypes.resources),t.B4B),t.R7$(2),t.Y8G("matBadge",(null==(n=c.viewModelSig())?null:n.customResourcesFieldsCount)||null),t.R7$(2),t.Y8G("ngTemplateOutlet",l),t.R7$(),t.Y8G("ngTemplateOutlet",r)}}function mt(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Global"),t.k0s(),t.j41(3,"td")(4,"button",42),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openGlobalSettings())}),t.j41(5,"mat-icon"),t.EFF(6,"open_in_new"),t.k0s()()()()}}function ut(o,g){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"th"),t.EFF(2,"Site"),t.k0s(),t.j41(3,"td")(4,"button",43),t.bIt("click",function(){t.eBV(e);const n=t.XpG(2);return t.Njj(n.openSiteSettings())}),t.j41(5,"mat-icon"),t.EFF(6,"open_in_new"),t.k0s()()()()}}function gt(o,g){1&o&&t.EFF(0," (not on Global App) ")}function _t(o,g){1&o&&t.EFF(0," (not on Content) ")}function ft(o,g){if(1&o&&t.DNE(0,gt,1,0)(1,_t,1,0),2&o){const e=t.XpG(2);t.vxM(e.isGlobal?0:-1),t.R7$(),t.vxM(e.isApp?1:-1)}}function ht(o,g){if(1&o&&(t.DNE(0,q,7,2,"div",2),t.j41(1,"div",3)(2,"mat-card",4)(3,"mat-card-header",5)(4,"mat-card-title"),t.EFF(5,"Settings"),t.k0s(),t.j41(6,"mat-icon"),t.EFF(7,"settings"),t.k0s()(),t.j41(8,"mat-card-content")(9,"p"),t.EFF(10,' Settings are things like SQL-connection strings, default "items-to-show" numbers and similar. If necessary, settings like a link to an RSS-Feed could be different in each language. '),t.j41(11,"a",6),t.EFF(12,"docs"),t.k0s()(),t.j41(13,"table",7)(14,"thead")(15,"tr"),t.nrm(16,"th"),t.j41(17,"th"),t.EFF(18,"System Settings"),t.k0s(),t.j41(19,"th"),t.EFF(20,"Custom Settings"),t.k0s()()(),t.j41(21,"tbody"),t.DNE(22,tt,14,3,"tr")(23,nt,15,4)(24,at,17,7),t.k0s()()(),t.nrm(25,"div",8),t.j41(26,"mat-card-actions",9),t.nrm(27,"app-docs-link-helper",10),t.j41(28,"a",11)(29,"button",12)(30,"mat-icon",13),t.EFF(31,"manage_search"),t.k0s(),t.j41(32,"span"),t.EFF(33,"Analyze Combined Settings"),t.k0s()()()()(),t.j41(34,"mat-card",4)(35,"mat-card-header",5)(36,"mat-card-title"),t.EFF(37,"Language Resources (i18n)"),t.k0s(),t.j41(38,"mat-icon"),t.EFF(39,"translate"),t.k0s()(),t.j41(40,"mat-card-content")(41,"p"),t.EFF(42," Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual views and such, and should not be used for App-Settings. "),t.j41(43,"a",6),t.EFF(44,"docs"),t.k0s()(),t.j41(45,"table",7)(46,"thead")(47,"tr"),t.nrm(48,"th"),t.j41(49,"th"),t.EFF(50,"System Resources"),t.k0s(),t.j41(51,"th"),t.EFF(52,"Custom Resources"),t.k0s()()(),t.j41(53,"tbody"),t.DNE(54,st,14,3,"tr")(55,rt,15,4)(56,pt,17,7),t.k0s()()(),t.nrm(57,"div",8),t.j41(58,"mat-card-actions",9),t.nrm(59,"app-docs-link-helper",10),t.j41(60,"a",11)(61,"button",14)(62,"mat-icon",13),t.EFF(63,"manage_search"),t.k0s(),t.j41(64,"span"),t.EFF(65,"Analyze Combined Resources"),t.k0s()()()()(),t.DNE(66,mt,7,0,"ng-template",null,0,t.C5r)(68,ut,7,0,"ng-template",null,1,t.C5r),t.k0s(),t.j41(70,"div",3),t.nrm(71,"app-app-configuration-card",15),t.j41(72,"mat-card",4)(73,"mat-card-header",5)(74,"mat-card-title"),t.EFF(75,"Performance"),t.k0s(),t.j41(76,"mat-icon"),t.EFF(77,"bolt"),t.k0s()(),t.j41(78,"mat-card-content")(79,"p"),t.EFF(80,"LightSpeed Output Cache to speed up page by 50-90%"),t.k0s(),t.nrm(81,"app-feature-text-info",16),t.k0s(),t.nrm(82,"div",8),t.j41(83,"mat-card-actions",9),t.nrm(84,"app-docs-link-helper",10),t.j41(85,"a",17)(86,"button",18)(87,"mat-icon",19),t.EFF(88,"bolt"),t.k0s(),t.j41(89,"span"),t.EFF(90,"Edit LightSpeed"),t.k0s()()()()(),t.j41(91,"mat-card",4)(92,"mat-card-header",5)(93,"mat-card-title"),t.EFF(94,"Security"),t.k0s(),t.j41(95,"mat-icon"),t.EFF(96,"local_police"),t.k0s()(),t.j41(97,"mat-card-content")(98,"p"),t.EFF(99,"ContentSecurityPolicy (CSP) features in this App - for maximum control."),t.k0s(),t.nrm(100,"app-feature-text-info",16),t.k0s(),t.nrm(101,"div",8),t.j41(102,"mat-card-actions",9),t.nrm(103,"app-docs-link-helper",10),t.k0s()(),t.j41(104,"mat-card",4)(105,"mat-card-header",5)(106,"mat-card-title"),t.EFF(107,"Permissions"),t.k0s(),t.j41(108,"mat-icon"),t.EFF(109,"person"),t.k0s()(),t.j41(110,"mat-card-content")(111,"p"),t.EFF(112,"Give access to the entire app (all data). Use with care."),t.k0s()(),t.nrm(113,"div",8),t.j41(114,"mat-card-actions",9),t.nrm(115,"app-docs-link-helper",10),t.j41(116,"a",11)(117,"button",18)(118,"mat-icon",19),t.EFF(119,"person"),t.k0s(),t.j41(120,"span"),t.EFF(121," Edit Permissions "),t.DNE(122,ft,2,2),t.k0s()()(),t.nrm(123,"app-docs-link-helper",10),t.j41(124,"a",11)(125,"button",20)(126,"mat-icon",21),t.EFF(127," person "),t.k0s(),t.j41(128,"span"),t.EFF(129,"Language Permissions"),t.k0s()()()()()()),2&o){let e;const i=t.XpG();t.vxM(i.isGlobal||i.isPrimary?0:-1),t.R7$(22),t.vxM(i.isGlobal?22:-1),t.R7$(),t.vxM(i.isPrimary?23:-1),t.R7$(),t.vxM(i.isApp?24:-1),t.R7$(3),t.Y8G("link","https://go.2sxc.org/settings"),t.R7$(),t.Y8G("href",i.urlToAnalyze(i.AnalyzeParts.Settings),t.B4B),t.R7$(26),t.vxM(i.isGlobal?54:-1),t.R7$(),t.vxM(i.isPrimary?55:-1),t.R7$(),t.vxM(i.isApp?56:-1),t.R7$(3),t.Y8G("link","https://go.2sxc.org/settings"),t.R7$(),t.Y8G("href",i.urlToAnalyze(i.AnalyzeParts.Resources),t.B4B),t.R7$(11),t.Y8G("dialogSettings",i.dialogSettings),t.R7$(10),t.Y8G("featureNameId","LightSpeedOutputCache")("asInfo",!0),t.R7$(3),t.Y8G("link","https://go.2sxc.org/lightspeed"),t.R7$(),t.Y8G("href","#"+i.getLightSpeedLink(),t.B4B),t.R7$(),t.FS9("disabled",!i.lightSpeedEnabled()),t.R7$(),t.Y8G("matBadge",(null==(e=i.viewModelSig())?null:e.appLightSpeedCount)||null),t.R7$(13),t.Y8G("featureNameId","ContentSecurityPolicy")("asInfo",!0),t.R7$(3),t.Y8G("link","https://go.2sxc.org/csp"),t.R7$(12),t.Y8G("link","https://docs.2sxc.org/basics/app/permissions.html"),t.R7$(),t.Y8G("href",i.urlToOpenPermissions(),t.B4B),t.R7$(),t.Y8G("disabled",!i.dialogSettings.Context.Enable.AppPermissions),t.R7$(),t.Y8G("matBadge",i.dialogSettings.Context.App.Permissions.Count||null),t.R7$(4),t.vxM(i.dialogSettings.Context.Enable.AppPermissions?-1:122),t.R7$(),t.Y8G("link","https://patrons.2sxc.org/features/feat/PermissionsByLanguage"),t.R7$(),t.Y8G("href",i.urlToOpenLanguagePermissions(i.langPermsEnabled()),t.B4B),t.R7$(2),t.Y8G("matBadgeHidden",i.langPermsEnabled())}}let Ct=(()=>{class o{#o;#e;#n;#i;#s;#t;#l;constructor(e,i,n,r,l){this.context=e,this.snackBar=i,this.matDialog=n,this.viewContainerRef=r,this.changeDetectorRef=l,this.#o=(0,b.d)(X.o),this.#e=(0,b.d)(N.gs),this.eavConstants=m.YX,this.AnalyzeParts=L,this.SystemSettingsScopes=m.Sq,this.AppScopes=j.F,this.appSettingsInternal$=new G.B,this.appStateAdvanced=!1,this.features=(0,t.WQX)(u.t),this.lightSpeedEnabled=this.features.isEnabled[$.T.LightSpeed],this.cspEnabled=this.features.isEnabled[$.T.ContentSecurityPolicy],this.langPermsEnabled=this.features.isEnabled[$.T.PermissionsByLanguage],this.#n=(0,b.d)(Y),this.#i=(0,b.d)(_.F),this.#s=(0,b.d)(O.L),this.#t=(0,b.d)(I.c),this.#l=(0,t.vPA)(0),this.appIn=(0,t.EWP)(()=>(this.#l(),this.#n.getAppInternals(void 0))),this.viewModelSig=(0,t.EWP)(()=>{const c=this.appIn()();if(!c)return null;const p=c?.EntityLists,x=m.YX.appMetadata.LightSpeed.ContentTypeName;return{appLightSpeedCount:c.MetadataList.Items.filter(S=>S._Type.Name===x).length,systemSettingsCount:this.isPrimary?p.SettingsSystem.filter(S=>S.SettingsEntityScope===m.Sq.Site).length:p.SettingsSystem.filter(S=>!S.SettingsEntityScope).length,customSettingsCount:p.AppSettings?.length,customSettingsFieldsCount:c.FieldAll.AppSettings?.length,systemResourcesCount:this.isPrimary?p.ResourcesSystem.filter(S=>S.SettingsEntityScope===m.Sq.Site).length:p.ResourcesSystem.filter(S=>!S.SettingsEntityScope).length,customResourcesCount:p.AppResources?.length,customResourcesFieldsCount:c?.FieldAll.AppResources?.length}})}ngOnInit(){this.#t.doOnDialogClosed(()=>{this.#l.update(e=>e+1)}),this.#s.getCurrent$().subscribe(e=>{this.dialogSettings=e;const i=e.Context.App.SettingsScope;this.isGlobal=i===j.F.Global,this.isPrimary=i===j.F.Site,this.isApp=i===j.F.App})}ngOnDestroy(){this.snackBar.dismiss()}#a(e){return"#"+this.#t.urlSubRoute(e)}edit(e,i){this.#i.getAll(e).subscribe(n=>{let r,l;switch(e){case m.YX.contentTypes.systemSettings:case m.YX.contentTypes.systemResources:const c=n.filter(p=>i===m.Sq.App?!p.SettingsEntityScope:p.SettingsEntityScope===m.Sq.Site);if(c.length>1)l=`Found too many settings for type ${e}`;else{const p=c[0];r={items:[null==p?v.c.newFromType(e,{...i===m.Sq.Site&&{SettingsEntityScope:m.Sq.Site}}):v.c.editId(p.Id)]}}break;case m.YX.contentTypes.customSettings:case m.YX.contentTypes.customResources:if(n.length>1)l=`Found too many settings for type ${e}`;else{const p=n[0];r={items:[null==p?v.c.newFromType(e):v.c.editId(p.Id)]}}break;default:n.length<1?l=`Found no settings for type ${e}`:n.length>1?l=`Found too many settings for type ${e}`:r={items:[v.c.editId(n[0].Id)]}}if(l)this.#t.navParentFirstChild(["message/e"],{queryParams:{error:l}});else{const c=(0,y.s)(r);this.#t.navParentFirstChild([`edit/${c}`])}})}urlToEdit(e,i){this.#i.getAll(e).subscribe(n=>{let r,l;switch(e){case m.YX.contentTypes.systemSettings:case m.YX.contentTypes.systemResources:const c=n.filter(p=>i===m.Sq.App?!p.SettingsEntityScope:p.SettingsEntityScope===m.Sq.Site);if(c.length>1)l=`Found too many settings for type ${e}`;else{const p=c[0];r={items:[null==p?v.c.newFromType(e,{...i===m.Sq.Site&&{SettingsEntityScope:m.Sq.Site}}):v.c.editId(p.Id)]}}break;case m.YX.contentTypes.customSettings:case m.YX.contentTypes.customResources:if(n.length>1)l=`Found too many settings for type ${e}`;else{const p=n[0];r={items:[null==p?v.c.newFromType(e):v.c.editId(p.Id)]}}break;default:n.length<1?l=`Found no settings for type ${e}`:n.length>1?l=`Found too many settings for type ${e}`:r={items:[v.c.editId(n[0].Id)]}}return l?(this.#t.navParentFirstChild(["message/e"],{queryParams:{error:l}}),""):this.#a(`edit/${(0,y.s)(r)}`)})}getLightSpeedLink(){const e=z.g.getLightSpeedEditParams(this.context.appId),n=`edit/${(0,y.s)(e)}`;return this.#t.urlSubRoute(n)}openSiteSettings(){const e=this.dialogSettings.Context.Site.PrimaryApp;this.#o.openAppAdministration(e.ZoneId,e.AppId,"app")}openGlobalSettings(){const e=this.dialogSettings.Context.System.PrimaryApp;this.#o.openAppAdministration(e.ZoneId,e.AppId,"app")}config(e){this.#t.navParentFirstChild([`fields/${e}`])}urlToConfig(e){return this.#a(`fields/${e}`)}urlToOpenPermissions(){return this.#a(f.k.getUrlApp(this.context.appId))}urlToOpenLanguagePermissions(e){return e?this.#a("language-permissions"):this.#a("edit-language-permissions")}urlToAnalyze(e){return this.#a(`analyze/${e}`)}fixContentType(e,i){this.#e.retrieveContentTypes(m.YX.scopes.configuration.value).subscribe(n=>{n.some(l=>l.Name===e)?"edit"===i?this.edit(e):"config"===i&&this.config(e):this.#e.save({StaticName:"",Name:e,Description:"",Scope:m.YX.scopes.configuration.value,ChangeStaticName:!1,NewStaticName:""}).subscribe(c=>{c&&("edit"===i?this.edit(e):"config"===i&&this.config(e))})})}static{this.\u0275fac=function(i){return new(i||o)(t.rXU(M.o),t.rXU(D.UG),t.rXU(J.bZ),t.rXU(t.c1b),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-app-configuration"]],standalone:!0,features:[t.aNF],decls:2,vars:1,consts:[["goToGlobal",""],["goToSite",""],[1,"alert","alert-info","scope-info"],[1,"eav-cards-box"],[1,"eav-card"],[1,"eav-card-header"],["href","https://go.2sxc.org/settings","target","_blank"],[1,"eav-settings-and-resources-table"],[1,"eav-card-space-div"],["align","start"],[3,"link","label","icon"],[3,"href"],["mat-button","","tippy","See the result of combining all settings",1,"eav-button__with-icon"],[1,"eav-icon"],["mat-button","","tippy","See the result of combining all resources",1,"eav-button__with-icon"],[3,"dialogSettings"],[3,"featureNameId","asInfo"],[1,"default-link",3,"href"],["mat-button","",1,"eav-button__with-icon",3,"disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadge"],["mat-button","",1,"eav-button__with-icon"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false",1,"eav-icon",3,"matBadgeHidden"],["mat-icon-button","","tippy","Edit global system settings",3,"click"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge"],["mat-icon-button","","tippy","Edit custom global settings",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom global settings",3,"click"],["mat-icon-button","","tippy","Edit site system settings",3,"click"],["mat-icon-button","","tippy","Edit custom site settings",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom site settings",3,"click"],[4,"ngTemplateOutlet"],["mat-icon-button","","tippy","Edit app system settings",3,"click"],["mat-icon-button","","tippy","Edit custom app settings",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom app settings"],["mat-icon-button","","tippy","Edit global system resources",3,"click"],["mat-icon-button","","tippy","Edit custom global resources",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom global resources",3,"click"],["mat-icon-button","","tippy","Edit site system resources",3,"click"],["mat-icon-button","","tippy","Edit custom site resources",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom site resources",3,"click"],["mat-icon-button","","tippy","Edit app system resources",3,"click"],["mat-icon-button","","tippy","Edit custom app resources",3,"click"],["mat-icon-button","","tippy","Configure fields of the custom app resources"],["mat-icon-button","","tippy","Go to global",3,"click"],["mat-icon-button","","tippy","Go to site",3,"click"]],template:function(i,n){1&i&&(t.DNE(0,ht,130,29),t.nrm(1,"router-outlet")),2&i&&t.vxM(n.viewModelSig()?0:-1)},dependencies:[C.Hu,C.RN,C.YY,C.m2,C.MM,C.dh,k.m_,k.An,E.Hl,E.$z,E.iY,F.Y,F.k,d.T3,Q,s.L,R.n3,B.e,A.d],styles:[".eav-settings-and-resources-table[_ngcontent-%COMP%]{width:100%}.eav-settings-and-resources-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:center}.eav-settings-and-resources-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left}"]})}}return o})()},6256:(P,T,a)=>{a.d(T,{Y:()=>A,k:()=>b});var d=a(9148),t=a(5060),F=a(2102),E=a(316);let C=0;const k="mat-badge-content",R=new Set;let G=(()=>{class _{static{this.\u0275fac=function(u){return new(u||_)}}static{this.\u0275cmp=d.VBU({type:_,selectors:[["ng-component"]],standalone:!0,features:[d.aNF],decls:0,vars:0,template:function(u,f){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-app-error));color:var(--mat-badge-text-color, var(--mat-app-on-error));font-family:var(--mat-badge-text-font, var(--mat-app-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-app-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-app-corner-full))}.cdk-high-contrast-active .mat-badge-content{outline:solid 1px;border-radius:0}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color);color:var(--mat-badge-disabled-state-text-color, var(--mat-app-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, unset);min-height:var(--mat-badge-small-size-container-size, unset);line-height:var(--mat-badge-legacy-small-size-container-size);padding:var(--mat-badge-small-size-container-padding);font-size:var(--mat-badge-small-size-text-size);margin:var(--mat-badge-small-size-container-offset)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, unset);min-height:var(--mat-badge-container-size, unset);line-height:var(--mat-badge-legacy-container-size);padding:var(--mat-badge-container-padding);font-size:var(--mat-badge-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-container-offset)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, unset);min-height:var(--mat-badge-large-size-container-size, unset);line-height:var(--mat-badge-legacy-large-size-container-size);padding:var(--mat-badge-large-size-container-padding);font-size:var(--mat-badge-large-size-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-large-size-container-offset)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset)}"],encapsulation:2,changeDetection:0})}}return _})(),b=(()=>{class _{get color(){return this._color}set color(s){this._setColor(s),this._color=s}get content(){return this._content}set content(s){this._updateRenderedContent(s)}get description(){return this._description}set description(s){this._updateDescription(s)}constructor(s,u,f,m,B){this._ngZone=s,this._elementRef=u,this._ariaDescriber=f,this._renderer=m,this._animationMode=B,this._color="primary",this.overlap=!0,this.position="above after",this.size="medium",this._id=C++,this._isInitialized=!1,this._interactivityChecker=(0,d.WQX)(F.Z7),this._document=(0,d.WQX)(E.qQ);const y=(0,d.WQX)(d.o8S);if(!R.has(y)){R.add(y);const j=(0,d.a0P)(G,{environmentInjector:(0,d.WQX)(d.uvJ)});y.onDestroy(()=>{R.delete(y),j.destroy()})}}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const s=this._renderer.createElement("span"),u="mat-badge-active";return s.setAttribute("id",`mat-badge-content-${this._id}`),s.setAttribute("aria-hidden","true"),s.classList.add(k),"NoopAnimations"===this._animationMode&&s.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(s),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{s.classList.add(u)})}):s.classList.add(u),s}_updateRenderedContent(s){const u=`${s??""}`.trim();this._isInitialized&&u&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=u),this._content=u}_updateDescription(s){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!s||this._isHostInteractive())&&this._removeInlineDescription(),this._description=s,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,s):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(s){const u=this._elementRef.nativeElement.classList;u.remove(`mat-badge-${this._color}`),s&&u.add(`mat-badge-${s}`)}_clearExistingBadges(){const s=this._elementRef.nativeElement.querySelectorAll(`:scope > .${k}`);for(const u of Array.from(s))u!==this._badgeElement&&u.remove()}static{this.\u0275fac=function(u){return new(u||_)(d.rXU(d.SKi),d.rXU(d.aKT),d.rXU(F.vr),d.rXU(d.sFG),d.rXU(d.bc$,8))}}static{this.\u0275dir=d.FsC({type:_,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(u,f){2&u&&d.AVh("mat-badge-overlap",f.overlap)("mat-badge-above",f.isAbove())("mat-badge-below",!f.isAbove())("mat-badge-before",!f.isAfter())("mat-badge-after",f.isAfter())("mat-badge-small","small"===f.size)("mat-badge-medium","medium"===f.size)("mat-badge-large","large"===f.size)("mat-badge-hidden",f.hidden||!f.content)("mat-badge-disabled",f.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",d.L39],disabled:[2,"matBadgeDisabled","disabled",d.L39],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",d.L39]},standalone:!0,features:[d.GFd]})}}return _})(),A=(()=>{class _{static{this.\u0275fac=function(u){return new(u||_)}}static{this.\u0275mod=d.$C({type:_})}static{this.\u0275inj=d.G2t({imports:[F.Pd,t.yE,t.yE]})}}return _})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.04.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_app-configuration_app-configuration_component_ts.843caa88be6d1f34.js.map