"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts"],{7693:(O,u,t)=>{t.d(u,{X:()=>l,g:()=>v});var e=t(9148),h=t(271),c=t(6474);const l="admin/type/",_="admin/type/get",a="admin/type/list",o="admin/type/scopes";let v=(()=>{class n extends c.D{retrieveContentType(i){return this.getHttpApiUrl(_,{params:{appId:this.appId,contentTypeId:i}})}retrieveContentTypeSig(i,m){return this.getSignal(_,{params:{appId:this.appId,contentTypeId:i}},m)}retrieveContentTypes(i){return this.getHttpApiUrl(a,{params:{appId:this.appId,scope:i}})}retrieveContentTypesSig(i,m){return this.getSignal(a,{params:{appId:this.appId,scope:i}},m)}getScopes(){return this.getHttpApiUrl(o,{params:{appId:this.appId}}).pipe((0,h.T)(i=>{const m=i.old;return Object.keys(m).map(M=>({name:m[M],value:M}))}))}getScopesSig(i){const m=this.getSignal(o,{params:{appId:this.appId}},i);return(0,e.EWP)(()=>{const M=m();if(!M||!M.old)return[];const D=M.old;return Object.keys(D).map(I=>({name:D[I],value:I}))})}getScopesV2(){return this.getHttpApiUrl(o,{params:{appId:this.appId}}).pipe((0,h.T)(i=>i.scopes))}save(i){return this.http.post(this.apiUrl("admin/type/save"),i,{params:{appid:this.appId}})}delete(i){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:i.StaticName}})}import(i){const m=new FormData;for(const E of i)m.append("File",E);return this.http.post(this.apiUrl("admin/type/import"),m,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(i){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceStaticName:i}})}static{this.\u0275fac=(()=>{let i;return function(E){return(i||(i=e.xGo(n)))(E||n)}})()}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}}return n})()},1475:(O,u,t)=>{t.d(u,{j:()=>_});var e=t(6474),h=t(8624),c=t(9148);let _=(()=>{class a extends e.D{getContentInfo(d,p){return this.getSignal("admin/appParts/get",{params:{appid:this.appId,zoneId:this.zoneId,scope:d}},p)}exportParts(d,p,s){const g=this.apiUrl(h.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+d.join(";")+"&entityIdsString="+p.join(";")+"&templateIdsString="+s.join(";");window.open(g,"_blank","")}static{this.\u0275fac=(()=>{let d;return function(s){return(d||(d=c.xGo(a)))(s||a)}})()}static{this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac})}}return a})()},320:(O,u,t)=>{t.d(u,{t:()=>a});var e=t(1772),h=t(6474),c=t(9148);let a=(()=>{class o extends h.D{getAppInfo(p){return this.getSignal("admin/app/Statistics",{params:{appid:this.appId,zoneId:this.zoneId}},p)}exportAppUrl(){return`${this.apiUrl(`${e.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:p,resetAppGuid:s,withFiles:g}){return this.getHttpApiUrl("admin/app/SaveData",{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:p.toString(),resetAppGuid:s.toString(),withPortalFiles:g.toString()}})}static{this.\u0275fac=(()=>{let p;return function(g){return(p||(p=c.xGo(o)))(g||o)}})()}static{this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac})}}return o})()},8624:(O,u,t)=>{t.d(u,{Q:()=>l,S:()=>_});var e=t(1772),h=t(6474),c=t(9148);const l="admin/appParts/";let _=(()=>{class a extends h.D{importAppParts(d){const p=new FormData;return p.append("File",d),this.http.post(this.apiUrl(l+"Import"),p,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(d){return this.http.post(this.apiUrl(e.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:d.toString()}})}static{this.\u0275fac=(()=>{let d;return function(s){return(d||(d=c.xGo(a)))(s||a)}})()}static{this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac})}}return a})()},5445:(O,u,t)=>{t.d(u,{Cu:()=>a.Cu,JL:()=>a.JL,Mk:()=>a.Mk,X6:()=>h.X,ei:()=>a.ei,gs:()=>h.g,tr:()=>e.t,vN:()=>a.vN,xR:()=>a.xR,y0:()=>o.y});var e=t(1479),h=t(7693),a=(t(1475),t(320),t(8624),t(6460)),o=t(2570)},6460:(O,u,t)=>{t.d(u,{Cu:()=>n,JL:()=>r,Mk:()=>g,ei:()=>v,vN:()=>i,xR:()=>m});var e=t(4600),h=t(6647),c=t(271),l=t(693),_=t(9234),a=t(6474),o=t(9148);const g="admin/query/Run",v="admin/query/DebugStream",n="admin/query/Save",r="admin/query/Get",i="admin/query/DataSources";let m=(()=>{class E extends a.D{getAll(D){return this.getHttpApiUrl(_.Gg,{params:{appId:this.appId,contentType:D}})}getAllSig(D,I){return this.getSignal(_.Gg,{params:{appId:this.appId,contentType:D}},I)}importQuery(D){return(0,e.H)((0,l.n)(D)).pipe((0,h.n)(I=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:I})),(0,c.T)(I=>({Success:I,Messages:[]})))}clonePipeline(D){return this.getHttpApiUrl("admin/query/Clone",{params:{Id:D.toString(),appId:this.appId}})}delete(D){return this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:D.toString()}})}static{this.\u0275fac=(()=>{let D;return function(y){return(D||(D=o.xGo(E)))(y||E)}})()}static{this.\u0275prov=o.jDH({token:E,factory:E.\u0275fac})}}return E})()},2570:(O,u,t)=>{t.d(u,{y:()=>p});var e=t(6474),h=t(9148);let p=(()=>{class s extends e.D{getAll(){return this.getSignal("admin/view/all",{params:{appId:this.appId}})}delete(v){return this.getHttpApiUrl("admin/view/delete",{params:{appId:this.appId,Id:v.toString()}})}import(v){const n=new FormData;return n.append("File",v),this.http.post(this.apiUrl("admin/view/import"),n,{params:{appId:this.appId,zoneId:this.zoneId}})}export(v){const n=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+v;window.open(n,"_blank","")}getPolymorphism(){return this.getSignal("admin/view/polymorphism",{params:{appId:this.appId}})}getUsage(v){return this.getSignal("admin/view/usage",{params:{appId:this.appId,guid:v}})}static{this.\u0275fac=(()=>{let v;return function(r){return(v||(v=h.xGo(s)))(r||s)}})()}static{this.\u0275prov=h.jDH({token:s,factory:s.\u0275fac})}}return s})()},7756:(O,u,t)=>{t.r(u),t.d(u,{AppsManagementNavComponent:()=>B});var e=t(9148),h=t(4175),c=t(3840),l=t(7049),_=t(9552),a=t(2159),o=t(3011),d=t(2938),p=t(5445),s=t(1808),g=t(5699),v=t(8471),n=t(8873);const r=[{name:"System",path:"system",icon:"settings",tippy:"System Info",child:[{name:"Register",path:"registration",icon:"how_to_reg",tippy:"Register this System on 2sxc Patrons"}]},{name:"Apps",path:"list",icon:"star",tippy:"Apps"},{name:"Languages",path:"languages",icon:"translate",tippy:"Languages"},{name:"Extensions / Features",path:"license",icon:"tune",tippy:"Extensions and Features"}];var i=t(7941),m=t(7912);const E=["sidenav"],M=(P,T)=>T.path;function D(P,T){if(1&P&&(e.j41(0,"mat-icon",13),e.EFF(1,"chevron_right"),e.k0s(),e.EFF(2)),2&P){const A=e.XpG().$implicit;e.R7$(2),e.SpI(" ",A," ")}}function I(P,T){if(1&P&&(e.qex(0),e.DNE(1,D,3,1),e.bVm()),2&P){const A=T.last;e.R7$(),e.vxM(A?1:-1)}}function y(P,T){}function R(P,T){1&P&&e.nrm(0,"app-nav-item-list",10),2&P&&e.Y8G("navItem",T.$implicit)}let B=(()=>{class P{#t;#e;constructor(A,f,C){this.dialog=A,this.context=f,this.media=C,this.#t=(0,e.WQX)(p.tr),this.zoneId=this.context.zoneId,this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=r,this.#e=(0,d.d)(v.c)}ngOnInit(){this.fetchDialogSettings(),this.#e.doOnDialogClosed(()=>this.fetchDialogSettings()),this.smallScreen.addEventListener("change",A=>(this.sidenav.opened=!A.matches,this.sidenav.mode=A.matches?"over":"side"))}closeDialog(){this.dialog.close()}fetchDialogSettings(){this.#t.getShared$(0).subscribe()}static{this.\u0275fac=function(f){return new(f||P)(e.rXU(i.CP),e.rXU(n.o),e.rXU(m.DY))}}static{this.\u0275cmp=e.VBU({type:P,selectors:[["app-apps-management-nav"]],viewQuery:function(f,C){if(1&f&&e.GBs(E,5),2&f){let U;e.mGM(U=e.lsd())&&(C.sidenav=U.first)}},standalone:!0,features:[e.aNF],decls:26,vars:4,consts:[["emptyTemplate",""],["sidenav",""],["appToggleDebug",""],[1,"toolbar-container"],[1,"menu-container",3,"click"],[3,"separator"],[4,"xngBreadcrumbItem"],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],[3,"navItem"],[1,"sideNav-bottom-info"],[1,"container-content"],[1,"breadcrumb-icon"]],template:function(f,C){if(1&f){const U=e.RV6();e.j41(0,"mat-toolbar",2)(1,"div",3)(2,"mat-icon",4),e.bIt("click",function(){e.eBV(U);const x=e.sdS(17);return e.Njj(x.opened=!x.opened)}),e.EFF(3,"menu"),e.k0s(),e.j41(4,"div")(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"xng-breadcrumb",5),e.DNE(8,I,2,1,"ng-container",6),e.k0s(),e.DNE(9,y,0,0,"ng-template",null,0,e.C5r),e.k0s(),e.nrm(11,"span",7),e.j41(12,"button",8),e.bIt("click",function(){return e.eBV(U),e.Njj(C.closeDialog())}),e.j41(13,"mat-icon"),e.EFF(14,"close"),e.k0s()()(),e.j41(15,"mat-sidenav-container",2)(16,"mat-sidenav",9,1),e.Z7z(18,R,1,1,"app-nav-item-list",10,M),e.j41(20,"div",11)(21,"p"),e.EFF(22,"use Burger icon to show/hide menu"),e.k0s()()(),e.j41(23,"mat-sidenav-content")(24,"div",12),e.nrm(25,"router-outlet"),e.k0s()()()}if(2&f){const U=e.sdS(10);e.R7$(6),e.SpI(" Manage Zone ",C.zoneId," "),e.R7$(),e.Y8G("separator",U),e.R7$(9),e.Y8G("mode",C.smallScreen.matches?"over":"side")("opened",C.sideNavOpened),e.R7$(2),e.Dyx(C.navItems)}},dependencies:[_.s5,_.KQ,c.m_,c.An,o._S,o.Dg,o._Y,h.Hl,h.iY,l.vg,l.LG,l.US,l.El,a.n3,s.a,g.V],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]   .mat-icon-admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}  .mat-drawer-container{background-color:transparent!important}"]})}}return P})()},1772:(O,u,t)=>{t.d(u,{I:()=>o,u:()=>a});var e=t(6647),h=t(9452),c=t(3550),l=t(6474),_=t(9148);const a="admin/app/";let o=(()=>{class d extends l.D{importApp(s,g,v=!1){const n=new FormData;return n.append("File",s),n.append("Name",g??""),this.http.post(this.apiUrl(a+"Import"),n,{params:{zoneId:this.zoneId}}).pipe((0,e.n)(r=>{if(v&&r.Messages[0]?.MessageType===c.G1.Warning){const i=prompt(r.Messages[0].Text+" Would you like to install it using another folder name?");if(i)return this.importApp(s,i,!0)}return(0,h.of)(r)}))}static{this.\u0275fac=(()=>{let s;return function(v){return(s||(s=_.xGo(d)))(v||d)}})()}static{this.\u0275prov=_.jDH({token:d,factory:d.\u0275fac})}}return d})()},693:(O,u,t)=>{function e(c){return new Promise((l,_)=>{const a=new FileReader;a.readAsDataURL(c),a.onload=()=>{l(a.result.split(",")[1])},a.onerror=o=>{_(o)}})}function h(c){return new Promise((l,_)=>{const a=new FileReader;a.readAsText(c),a.onload=()=>{l(a.result)},a.onerror=o=>{_(o)}})}t.d(u,{d:()=>h,n:()=>e})},8471:(O,u,t)=>{t.d(u,{c:()=>s});var e=t(2159),h=t(1567),c=t(3037),l=t(271),_=t(5057),a=t(4435),o=t(4979),d=t(9148);const p={doOnDialogClosed:!0};let s=(()=>{class g extends o.V{constructor(n,r){super(),this.router=n,this.route=r,this.log=(0,a.T)({DialogRoutingService:g},p)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(n){return this.route.snapshot.paramMap.get(n)}getParams(n){const r=this.route.snapshot.paramMap;return n.reduce((i,m)=>(i[m]=r.get(m),i),{})}getQueryParam(n){return this.route.snapshot.queryParamMap.get(n)}getQueryParams(n){const r=this.route.snapshot.queryParamMap;return n.reduce((i,m)=>(i[m]=r.get(m),i),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(n){const r=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>n())),r.end()}urlSubRoute(n){const r=this.router.createUrlTree([n],{relativeTo:this.route});return this.router.serializeUrl(r)}navPath(n,r){return this.router.navigate([n],r)}navRelative(n,r){return this.router.navigate(n,{...r,relativeTo:this.route})}navParentFirstChild(n,r){return this.router.navigate(n,{...r,relativeTo:this.route.parent.firstChild})}childDialogClosed$(){return this.router.events.pipe((0,h.p)(n=>n instanceof e.wF),(0,c.Z)(!!this.route.snapshot.firstChild),(0,l.T)(()=>!!this.route.snapshot.firstChild),(0,_.J)(),(0,h.p)(([n,r])=>n&&!r))}static{this.\u0275fac=function(r){return new(r||g)(d.KVO(e.Ix),d.KVO(e.nX))}}static{this.\u0275prov=d.jDH({token:g,factory:g.\u0275fac})}}return g})()},9234:(O,u,t)=>{t.d(u,{Gg:()=>v,Tr:()=>n,gb:()=>g});var e=t(1567),h=t(6647),c=t(6301),l=t(271),_=t(2938),a=t(4435),o=t(6474),d=t(4839),p=t(9148);const s={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},g="admin/entity/",v="admin/entity/list";let n=(()=>{class r extends o.D{constructor(){super(...arguments),this.log=(0,a.T)({EntityService:r},s),this.queryService=(0,_.d)(d.c)}getEntities$(m){return this.log.fnIf("getEntities"),m.pipe((0,e.p)(E=>null!=E),(0,h.n)(E=>this.getAvailableEntities(E.contentTypeName).pipe((0,c.t)(1))))}getAvailableEntities(m,E){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[m],itemIds:E,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,l.T)(D=>D.Default))}delete(m,E,M,D,I,y){return this.log.fnIf("delete",{appId:m,contentType:E,entityId:M,force:D,parentId:I,parent}),this.http.delete(this.apiUrl(g+"delete"),{params:{contentType:E,id:M.toString(),appId:m,force:D.toString(),...I&&{parentId:I.toString()},...I&&y&&{parentField:y}}})}static{this.\u0275fac=(()=>{let m;return function(M){return(m||(m=p.xGo(r)))(M||r)}})()}static{this.\u0275prov=p.jDH({token:r,factory:r.\u0275fac})}}return r})()},4839:(O,u,t)=>{t.d(u,{c:()=>a});var e=t(4435),h=t(8873),c=t(9148),l=t(6443);const _={all:!1,getAvailableEntities:!1,getEntities:!1};let a=(()=>{class o{constructor(p,s){this.http=p,this.context=s,this.log=(0,e.T)({QueryService:o},_)}getFromQuery(p,s,g,v){this.log.fnIf("getAvailableEntities",{queryUrl:p,params:s,fields:g,entitiesFilter:v});const n=!!s,E=(((s?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(n?`&${s}`:"")+"&$select="+(g??"")).substring(1);return this.http.post(`app/auto/query/${p}?${E}`,{Guids:v})}getEntities({contentTypes:p,itemIds:s,fields:g,log:v}){this.log.fnIf("getEntities",{log:v,contentTypes:p,itemIds:s,fields:g});const r=("&typeNames="+(p?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(s?.join(",")??"")+"&$select="+(g??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${r}`,{})}static{this.\u0275fac=function(s){return new(s||o)(c.KVO(l.Qq),c.KVO(h.o))}}static{this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac})}}return o})()},4979:(O,u,t)=>{t.d(u,{V:()=>c});var e=t(7092),h=t(9148);let c=(()=>{class l{constructor(){this.subscriptions=new e.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275prov=h.jDH({token:l,factory:l.\u0275fac})}}return l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.04.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.426c046f13a67e38.js.map