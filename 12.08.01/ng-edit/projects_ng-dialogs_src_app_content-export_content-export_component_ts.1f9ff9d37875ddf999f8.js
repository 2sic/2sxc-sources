(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_content-export_content-export_component_ts"],{41:function(e,t,n){"use strict";n.r(t),n.d(t,{ContentExportComponent:function(){return C}});var o=n(4762),a=n(8512),r=n(3148),i=n(1785),s=n(2935),l=n(1282),c=n(3653),g=n(2887),u=n(2832),p=n(1116),d=n(1041),f=n(3070),m=n(3841),h=n(7064),Z=n(7436),x=n(4369);function v(e,t){if(1&e&&(i.TgZ(0,"mat-option",24),i._uU(1),i.qZA()),2&e){var n=t.$implicit;i.Q6J("value",n.key),i.xp6(1),i.Oqu(n.key)}}function T(e,t){if(1&e&&(i.TgZ(0,"mat-radio-button",25),i._uU(1),i.qZA()),2&e){var n=i.oxw(2);i.xp6(1),i.hij(" Export selected ",n.itemIds.length," items ")}}function A(e,t){if(1&e){var n=i.EpF();i.TgZ(0,"form",5,6),i.TgZ(2,"div",7),i.TgZ(3,"div"),i.TgZ(4,"mat-form-field",8),i.TgZ(5,"mat-label"),i._uU(6,"Languages"),i.qZA(),i.TgZ(7,"mat-select",9),i.NdJ("ngModelChange",function(e){return i.CHM(n),i.oxw().formValues.language=e}),i.TgZ(8,"mat-option",10),i._uU(9,"All"),i.qZA(),i.YNc(10,v,2,2,"mat-option",11),i.qZA(),i.qZA(),i.qZA(),i.TgZ(11,"div"),i.TgZ(12,"p",12),i._uU(13,"Export data"),i.qZA(),i.TgZ(14,"mat-radio-group",13),i.NdJ("ngModelChange",function(e){return i.CHM(n),i.oxw().formValues.recordExport=e}),i.TgZ(15,"mat-radio-button",14),i._uU(16,"No, just export blank data schema (for new data import) "),i.qZA(),i.TgZ(17,"mat-radio-button",15),i._uU(18,"Yes, export all content-items"),i.qZA(),i.YNc(19,T,2,1,"mat-radio-button",16),i.qZA(),i.qZA(),i.TgZ(20,"div"),i.TgZ(21,"p",12),i._uU(22,"Value references to other languages"),i.qZA(),i.TgZ(23,"mat-radio-group",17),i.NdJ("ngModelChange",function(e){return i.CHM(n),i.oxw().formValues.languageReferences=e}),i.TgZ(24,"mat-radio-button",18),i._uU(25,"Keep references to other languages (for re-import) "),i.qZA(),i.TgZ(26,"mat-radio-button",19),i._uU(27,"Replace references with values"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(28,"div"),i.TgZ(29,"p",12),i._uU(30,"File / page references"),i.qZA(),i.TgZ(31,"mat-radio-group",20),i.NdJ("ngModelChange",function(e){return i.CHM(n),i.oxw().formValues.resourcesReferences=e}),i.TgZ(32,"mat-radio-button",18),i._uU(33,"Keep references (for re-import, for example Page:4711) "),i.qZA(),i.TgZ(34,"mat-radio-button",19),i._uU(35,"Replace references with real URLs (for example /Portals/0...) "),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.TgZ(36,"div",21),i.TgZ(37,"button",22),i.NdJ("click",function(){return i.CHM(n),i.oxw().closeDialog()}),i._uU(38,"Cancel"),i.qZA(),i.TgZ(39,"button",23),i.NdJ("click",function(){return i.CHM(n),i.oxw().exportContent()}),i._uU(40," Export Data "),i.qZA(),i.qZA(),i.qZA()}if(2&e){var o=i.MAs(1),a=i.oxw();i.xp6(7),i.Q6J("ngModel",a.formValues.language),i.xp6(3),i.Q6J("ngForOf",a.languages),i.xp6(4),i.Q6J("ngModel",a.formValues.recordExport),i.xp6(5),i.Q6J("ngIf",a.hasIdList),i.xp6(4),i.Q6J("ngModel",a.formValues.languageReferences)("disabled","Blank"===a.formValues.recordExport),i.xp6(8),i.Q6J("ngModel",a.formValues.resourcesReferences)("disabled","Blank"===a.formValues.recordExport),i.xp6(8),i.Q6J("disabled",!o.form.valid)}}var C=function(){function e(e,t,n,o,r){this.dialogRef=e,this.route=t,this.contentExportService=n,this.appDialogConfigService=o,this.contentTypesService=r,this.hostClass="dialog-component",this.hasIdList=!1,this.loading$=new a.X(!1),this.contentType$=new a.X(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");var i=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!i,this.hasIdList&&(this.itemIds=i.split(",").map(function(e){return parseInt(e,10)}))}return e.prototype.ngOnInit=function(){var e=this;this.loading$.next(!0);var t=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),n=this.appDialogConfigService.getDialogSettings();(0,r.D)([t,n]).subscribe(function(t){var n=(0,o.CR)(t,2),a=n[1];e.contentType$.next(n[0]);var r=a.Context.Language.All;e.languages=Object.keys(r).map(function(e){return{key:e,name:r[e]}}),e.formValues={defaultLanguage:a.Context.Language.Primary,contentTypeStaticName:e.contentTypeStaticName,language:"",recordExport:e.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},e.loading$.next(!1)})},e.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.loading$.complete()},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.exportContent=function(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&"Selection"===this.formValues.recordExport?this.itemIds:null)},e.\u0275fac=function(t){return new(t||e)(i.Y36(s.so),i.Y36(l.gz),i.Y36(c.i),i.Y36(g.K),i.Y36(u.s))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(e,t){2&e&&i.Ikx("className",t.hostClass)},decls:11,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/help","target","_blank"],["class","dialog-form",4,"ngIf"],[1,"dialog-form"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["name","Language",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"field-label"],["name","RecordExport",3,"ngModel","ngModelChange"],["value","Blank"],["value","All"],["value","Selection",4,"ngIf"],["name","LanguageReferences",3,"ngModel","disabled","ngModelChange"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",3,"ngModel","disabled","ngModelChange"],[1,"dialog-form-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["value","Selection"]],template:function(e,t){var n;1&e&&(i.TgZ(0,"div",0),i.TgZ(1,"div",1),i._uU(2),i.ALo(3,"async"),i.qZA(),i.qZA(),i.TgZ(4,"p",2),i._uU(5," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),i.TgZ(6,"a",3),i._uU(7,"https://2sxc.org/help"),i.qZA(),i._uU(8," for more instructions.\n"),i.qZA(),i.YNc(9,A,41,9,"form",4),i.ALo(10,"async")),2&e&&(i.xp6(2),i.hij("Export ",null==(n=i.lcZ(3,2,t.contentType$))?null:n.Name,""),i.xp6(7),i.Q6J("ngIf",!1===i.lcZ(10,4,t.loading$)))},directives:[s.uh,p.O5,d._Y,d.JL,d.F,f.KE,f.hX,m.gD,d.JJ,d.On,h.ey,p.sg,Z.VQ,Z.U0,x.lW],pipes:[p.Ov],styles:[".field-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px;font-size:14px}"]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/12.08.00/ng-edit/projects_ng-dialogs_src_app_content-export_content-export_component_ts.1f9ff9d37875ddf999f8.js.map