"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts"],{9042:function(L,v,o){o.r(v),o.d(v,{ViewsUsageComponent:function(){return Q}});var g=o(8069),c=o(8047),I=o(1276),p=o(6317),T=o(9119),V=o(5388),e=o(7133),b=o(2528),f=o(6362),M=o(1130),h=o(785),m=o(5590);function x(i,n){if(1&i){var a=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){return e.CHM(a),e.oxw().copy()}),e.TgZ(1,"span",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",3),e._uU(4,"file_copy"),e.qZA(),e.qZA()}if(2&i){var t=e.oxw();e.Q6J("tippy",t.tooltip),e.xp6(2),e.Oqu(t.id)}}var A=function(){var i=function(){function n(a){(0,g.Z)(this,n),this.snackBar=a}return(0,c.Z)(n,[{key:"agInit",value:function(t){if(this.tooltip=t.value,null!=this.tooltip){var s=this.tooltip.split("\n")[0];this.id=s.split(" ")[1]}}},{key:"refresh",value:function(t){return!0}},{key:"copy",value:function(){(0,V.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(b.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","","class","id-box highlight",3,"tippy","click",4,"ngIf"],["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(a,t){1&a&&e.YNc(0,x,5,2,"div",0),2&a&&e.Q6J("ngIf",t.id)},directives:[f.O5,M.wG,h.$,m.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),i}(),C=o(8390),w=o(587),D=function(){var i=function(){function n(){(0,g.Z)(this,n),this.isVisible="",this.isDeleted=""}return(0,c.Z)(n,[{key:"agInit",value:function(t){this.params=t}},{key:"isFilterActive",value:function(){return""!==this.isVisible||""!==this.isDeleted}},{key:"doesFilterPass",value:function(t){var s=!1,l=!1,r=this.params.valueGetter(t.node);return null!=r&&(s=""===this.isVisible||null!=r.IsVisible&&r.IsVisible.toString()===this.isVisible,l=""===this.isDeleted||null!=r.IsDeleted&&r.IsDeleted.toString()===this.isDeleted,s&&l)}},{key:"getModel",value:function(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}}},{key:"setModel",value:function(t){this.isVisible=t?t.isVisible:"",this.isDeleted=t?t.isDeleted:""}},{key:"afterGuiAttached",value:function(t){}},{key:"filterChanged",value:function(){this.params.filterChangedCallback()}}]),n}();return i.\u0275fac=function(a){return new(a||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(a,t){1&a&&(e.TgZ(0,"div",0),e._uU(1,"Visible"),e.qZA(),e.TgZ(2,"mat-radio-group",1),e.NdJ("ngModelChange",function(l){return t.isVisible=l})("ngModelChange",function(){return t.filterChanged()}),e.TgZ(3,"mat-radio-button",2),e._uU(4,"All"),e.qZA(),e.TgZ(5,"mat-radio-button",3),e._uU(6,"Visible"),e.qZA(),e.TgZ(7,"mat-radio-button",4),e._uU(8,"Hidden"),e.qZA(),e.qZA(),e.TgZ(9,"div",0),e._uU(10,"Deleted"),e.qZA(),e.TgZ(11,"mat-radio-group",1),e.NdJ("ngModelChange",function(l){return t.isDeleted=l})("ngModelChange",function(){return t.filterChanged()}),e.TgZ(12,"mat-radio-button",2),e._uU(13,"All"),e.qZA(),e.TgZ(14,"mat-radio-button",3),e._uU(15,"Is deleted"),e.qZA(),e.TgZ(16,"mat-radio-button",4),e._uU(17,"Is not deleted"),e.qZA(),e.qZA()),2&a&&(e.xp6(2),e.Q6J("ngModel",t.isVisible),e.xp6(9),e.Q6J("ngModel",t.isDeleted))},directives:[C.VQ,w.JJ,w.On,C.U0],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),i}(),F=o(6559);function O(i){var n=i.data;return"ID: ".concat(n.Block.Id,"\nGUID: ").concat(n.Block.Guid)}function P(i){var n=i.data;if(null!=n.Module)return"ID: ".concat(n.Module.Id,"\nUsageId: ").concat(n.Module.UsageId,"\nTitle: ").concat(n.Module.Title)}function G(i){return null==i.value?"no-outline":"id-action no-padding no-outline"}function N(i){var n=i.data;if(null!=n.PageId)return"ID: ".concat(n.PageId)}function S(i){return null==i.value?"no-outline":"id-action no-padding no-outline"}function k(i){return null==i.value?"no-outline":"primary-action highlight"}function $(i){null!=i.value&&window.open(i.data.Url,"_blank")}function J(i){var n=i.value;if(null!=n)return'\n    <div style="height: 100%;display: flex;align-items: center;">\n      '.concat(n.IsVisible?'<span class="material-icons-outlined">visibility</span>':'<span class="material-icons-outlined">visibility_off</span>',"\n      ").concat(n.IsDeleted?'<span style="margin-left: 8px;" class="material-icons-outlined">delete</span>':"","\n    </div>\n  ")}var U=o(5106),y=o(5758),Z=o(2977),R=o(7317),j=o(1350),Q=function(){var i=function(){function n(a,t,s){(0,g.Z)(this,n),this.dialogRef=a,this.route=t,this.viewsService=s,this.viewUsage$=new p.X(null),this.viewTooltip$=new p.X(""),this.data$=new p.X(null),this.modules=I.F$,this.gridOptions=Object.assign(Object.assign({},T.f),{frameworkComponents:{viewsUsageIdComponent:A,viewsUsageStatusFilterComponent:D},columnDefs:[{headerName:"Block",field:"Block",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:O},{headerName:"Module",field:"Module",width:76,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:P,cellClass:G},{headerName:"Page",field:"PageId",width:70,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:N,cellClass:S},{headerName:"Name",field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",cellClass:k,onCellClicked:$},{headerName:"Language",field:"Language",width:90,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Status",field:"Status",width:80,cellClass:"icon no-outline",filter:"viewsUsageStatusFilterComponent",cellRenderer:J}]})}return(0,c.Z)(n,[{key:"ngOnInit",value:function(){var t=this,s=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(s).subscribe(function(l){var r=l[0];t.viewUsage$.next(r);var d="ID: ".concat(r.Id,"\nGUID: ").concat(r.Guid);t.viewTooltip$.next(d);var u=function B(i){var t,n=[],a=(0,U.Z)(i.Blocks);try{for(a.s();!(t=a.n()).done;){var s=t.value;0===s.Modules.length&&n.push({Block:{Id:s.Id,Guid:s.Guid}});var r,l=(0,U.Z)(s.Modules);try{for(l.s();!(r=l.n()).done;){var d=r.value;n.push({Block:{Id:s.Id,Guid:s.Guid},Module:d,PageId:d.Page.Id,Name:d.Page.Name,Url:d.Page.Url,Language:d.Page.CultureCode,Status:{IsVisible:d.Page.Visible,IsDeleted:d.IsDeleted}})}}catch(u){l.e(u)}finally{l.f()}}}catch(u){a.e(u)}finally{a.f()}return n}(r);t.data$.next(u)})}},{key:"ngOnDestroy",value:function(){this.viewUsage$.complete(),this.viewTooltip$.complete(),this.data$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}}]),n}();return i.\u0275fac=function(a){return new(a||i)(e.Y36(y.so),e.Y36(Z.gz),e.Y36(F.h))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage"]],decls:22,vars:11,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description"],["href","http://r.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"]],template:function(a,t){var s;1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.ALo(4,"async"),e._uU(5),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return t.closeDialog()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"p",5),e._uU(11," This shows where this view is being used. Read about the "),e.TgZ(12,"a",6),e._uU(13,"connections between DNN and 2sxc Views"),e.qZA(),e._uU(14," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),e.TgZ(15,"em"),e._uU(16,"Before you get confused about some things you see here, do read the FAQ on that page."),e.qZA(),e.qZA(),e._UZ(17,"router-outlet"),e.TgZ(18,"div",7),e._UZ(19,"ag-grid-angular",8),e.ALo(20,"async"),e._UZ(21,"div",9),e.qZA(),e.qZA()),2&a&&(e.xp6(3),e.Q6J("tippy",e.lcZ(4,5,t.viewTooltip$)),e.xp6(2),e.hij("View: ",null==(s=e.lcZ(6,7,t.viewUsage$))?null:s.Name,""),e.xp6(14),e.Q6J("rowData",e.lcZ(20,9,t.data$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[y.uh,h.$,R.lW,m.Hw,Z.lC,j.N8],pipes:[f.Ov],styles:[""]}),i}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.602384cb3e947b3f.js.map