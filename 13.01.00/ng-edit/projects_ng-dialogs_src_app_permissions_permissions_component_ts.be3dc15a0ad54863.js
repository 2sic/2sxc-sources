"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{5620:function(I,f,t){t.r(f),t.d(f,{PermissionsComponent:function(){return W}});var y=t(2090),v=t(8069),r=t(8047),s=t(1276),g=t(2977),O=t(6317),A=t(7714),P=t(116),D=t(4874),u=t(635),p=t(679),a=t(5578),c=t(9119),C=t(1825),E=t(5137),e=t(7133),k=t(1130),b=t(785),M=t(5590),U=function(){var l=function(){function d(){(0,v.Z)(this,d)}return(0,r.Z)(d,[{key:"agInit",value:function(n){this.params=n}},{key:"refresh",value:function(n){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),d}();return l.\u0275fac=function(i){return new(i||l)},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return n.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.qZA(),e.qZA())},directives:[k.wG,b.$,M.Hw],styles:[""]}),l}(),F=t(7170),x=t(5758),R=t(2528),B=t(7317),j=t(1350),N=t(6362),W=function(){var l=function(){function d(i,n,o,m,h){(0,v.Z)(this,d),this.dialogRef=i,this.router=n,this.route=o,this.permissionsService=m,this.snackBar=h,this.permissions$=new O.X(null),this.modules=s.F$,this.gridOptions=Object.assign(Object.assign({},c.f),{frameworkComponents:{idFieldComponent:a.m,permissionsActionsComponent:U},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(Z){return"ID: ".concat(Z.Id,"\nGUID: ").concat(Z.Guid)}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new A.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("type"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key")}return(0,r.Z)(d,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var n=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(o){n.permissions$.next(o)})}},{key:"editPermission",value:function(n){var m,h,o=this;if(null==n){var T=null===(m=Object.values(C.Z.metadata).find(function(G){return G.type===o.targetType}))||void 0===m?void 0:m.target;h={items:[{ContentTypeName:C.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:T},this.keyType===C.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===C.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===C.Z.keyTypes.string&&{String:this.key})}]}}else h={items:[{EntityId:n.data.Id}]};var _=(0,E.f)(h);this.router.navigate(["edit/".concat(_)],{relativeTo:this.route})}},{key:"deletePermission",value:function(n){var o=this;!confirm("Delete '".concat(n.Title,"' (").concat(n.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(n.Id).subscribe(function(){o.snackBar.open("Deleted",null,{duration:2e3}),o.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var n=this;this.subscription.add(this.router.events.pipe((0,P.h)(function(o){return o instanceof g.m2}),(0,D.O)(!!this.route.snapshot.firstChild),(0,u.U)(function(){return!!n.route.snapshot.firstChild}),(0,p.G)(),(0,P.h)(function(o){var m=(0,y.Z)(o,2);return m[0]&&!m[1]})).subscribe(function(){n.fetchPermissions()}))}}]),d}();return l.\u0275fac=function(i){return new(i||l)(e.Y36(x.so),e.Y36(g.F0),e.Y36(g.gz),e.Y36(F.q),e.Y36(R.ux))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return n.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,3,n.permissions$))("modules",n.modules)("gridOptions",n.gridOptions))},directives:[x.uh,B.lW,b.$,M.Hw,g.lC,j.N8],pipes:[N.Ov],styles:[""]}),l}()},5578:function(I,f,t){t.d(f,{m:function(){return D}});var y=t(8069),v=t(8047),r=t(5388),s=t(7133),g=t(2528),O=t(1130),A=t(785),P=t(5590),D=function(){var u=function(){function p(a){(0,y.Z)(this,p),this.snackBar=a}return(0,v.Z)(p,[{key:"agInit",value:function(c){this.id=c.value,this.tooltip=c.tooltipGetter(c.data)}},{key:"refresh",value:function(c){return!0}},{key:"copy",value:function(){(0,r.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),p}();return u.\u0275fac=function(a){return new(a||u)(s.Y36(g.ux))},u.\u0275cmp=s.Xpm({type:u,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(a,c){1&a&&(s.TgZ(0,"div",0),s.NdJ("click",function(){return c.copy()}),s.TgZ(1,"span",1),s._uU(2),s.qZA(),s.TgZ(3,"mat-icon",2),s._uU(4,"file_copy"),s.qZA(),s.qZA()),2&a&&(s.Q6J("tippy",c.tooltip),s.xp6(2),s.Oqu(c.id))},directives:[O.wG,A.$,P.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),u}()},5388:function(I,f,t){function y(v){var r=document.createElement("textarea");r.value=v,r.setAttribute("readonly",""),r.style.position="absolute",r.style.left="-9999px",document.body.appendChild(r);var s=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);r.select(),document.execCommand("copy"),document.body.removeChild(r),s&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(s))}t.d(f,{v:function(){return y}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_permissions_permissions_component_ts.be3dc15a0ad54863.js.map