"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_content-export_content-export_component_ts"],{4482:function(K,p,n){n.r(p),n.d(p,{ContentExportComponent:function(){return b}});var x=n(2090),T=n(8069),M=n(8047),m=n(6317),Z=n(1640),A=n(6886),O=n(5005),D=n(6488),e=n(7133),d=n(5758),P=n(2977),c=n(6362),g=n(587),f=n(4770),U=n(1434),I=n(1130),C=n(8390),L=n(7317);function y(l,s){if(1&l&&(e.TgZ(0,"mat-option",24),e._uU(1),e.qZA()),2&l){var t=s.$implicit;e.Q6J("value",t.key),e.xp6(1),e.Oqu(t.key)}}function R(l,s){if(1&l&&(e.TgZ(0,"mat-radio-button",25),e._uU(1),e.qZA()),2&l){var t=e.oxw(2);e.xp6(1),e.hij(" Export selected ",t.itemIds.length," items ")}}function B(l,s){if(1&l){var t=e.EpF();e.TgZ(0,"form",5,6),e.TgZ(2,"div",7),e.TgZ(3,"div"),e.TgZ(4,"mat-form-field",8),e.TgZ(5,"mat-label"),e._uU(6,"Languages"),e.qZA(),e.TgZ(7,"mat-select",9),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().formValues.language=r}),e.TgZ(8,"mat-option",10),e._uU(9,"All"),e.qZA(),e.YNc(10,y,2,2,"mat-option",11),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"div"),e.TgZ(12,"p",12),e._uU(13,"Export data"),e.qZA(),e.TgZ(14,"mat-radio-group",13),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().formValues.recordExport=r}),e.TgZ(15,"mat-radio-button",14),e._uU(16,"No, just export blank data schema (for new data import) "),e.qZA(),e.TgZ(17,"mat-radio-button",15),e._uU(18,"Yes, export all content-items"),e.qZA(),e.YNc(19,R,2,1,"mat-radio-button",16),e.qZA(),e.qZA(),e.TgZ(20,"div"),e.TgZ(21,"p",12),e._uU(22,"Value references to other languages"),e.qZA(),e.TgZ(23,"mat-radio-group",17),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().formValues.languageReferences=r}),e.TgZ(24,"mat-radio-button",18),e._uU(25,"Keep references to other languages (for re-import) "),e.qZA(),e.TgZ(26,"mat-radio-button",19),e._uU(27,"Replace references with values"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(28,"div"),e.TgZ(29,"p",12),e._uU(30,"File / page references"),e.qZA(),e.TgZ(31,"mat-radio-group",20),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().formValues.resourcesReferences=r}),e.TgZ(32,"mat-radio-button",18),e._uU(33,"Keep references (for re-import, for example Page:4711) "),e.qZA(),e.TgZ(34,"mat-radio-button",19),e._uU(35,"Replace references with real URLs (for example /Portals/0...) "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(36,"div",21),e.TgZ(37,"button",22),e.NdJ("click",function(){return e.CHM(t),e.oxw().closeDialog()}),e._uU(38,"Cancel"),e.qZA(),e.TgZ(39,"button",23),e.NdJ("click",function(){return e.CHM(t),e.oxw().exportContent()}),e._uU(40," Export Data "),e.qZA(),e.qZA(),e.qZA()}if(2&l){var o=e.MAs(1),a=e.oxw();e.xp6(7),e.Q6J("ngModel",a.formValues.language),e.xp6(3),e.Q6J("ngForOf",a.languages),e.xp6(4),e.Q6J("ngModel",a.formValues.recordExport),e.xp6(5),e.Q6J("ngIf",a.hasIdList),e.xp6(4),e.Q6J("ngModel",a.formValues.languageReferences)("disabled","Blank"===a.formValues.recordExport),e.xp6(8),e.Q6J("ngModel",a.formValues.resourcesReferences)("disabled","Blank"===a.formValues.recordExport),e.xp6(8),e.Q6J("disabled",!o.form.valid)}}var b=function(){var l=function(){function s(t,o,a,_,r){(0,T.Z)(this,s),this.dialogRef=t,this.route=o,this.contentExportService=a,this.appDialogConfigService=_,this.contentTypesService=r,this.hostClass="dialog-component",this.hasIdList=!1,this.loading$=new m.X(!1),this.contentType$=new m.X(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName");var i=this.route.snapshot.paramMap.get("selectedIds");this.hasIdList=!!i,this.hasIdList&&(this.itemIds=i.split(",").map(function(u){return parseInt(u,10)}))}return(0,M.Z)(s,[{key:"ngOnInit",value:function(){var o=this;this.loading$.next(!0);var a=this.contentTypesService.retrieveContentType(this.contentTypeStaticName),_=this.appDialogConfigService.getDialogSettings();(0,Z.D)([a,_]).subscribe(function(r){var i=(0,x.Z)(r,2),E=i[1];o.contentType$.next(i[0]);var h=E.Context.Language.All;o.languages=Object.keys(h).map(function(v){return{key:v,name:h[v]}}),o.formValues={defaultLanguage:E.Context.Language.Primary,contentTypeStaticName:o.contentTypeStaticName,language:"",recordExport:o.hasIdList?"Selection":"All",languageReferences:"Link",resourcesReferences:"Link"},o.loading$.next(!1)})}},{key:"ngOnDestroy",value:function(){this.contentType$.complete(),this.loading$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"exportContent",value:function(){this.contentExportService.exportContent(this.formValues,this.hasIdList&&"Selection"===this.formValues.recordExport?this.itemIds:null)}}]),s}();return l.\u0275fac=function(t){return new(t||l)(e.Y36(d.so),e.Y36(P.gz),e.Y36(D.i),e.Y36(A.K),e.Y36(O.s))},l.\u0275cmp=e.Xpm({type:l,selectors:[["app-content-export"]],hostVars:1,hostBindings:function(t,o){2&t&&e.Ikx("className",o.hostClass)},decls:11,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/help","target","_blank"],["class","dialog-form",4,"ngIf"],[1,"dialog-form"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["name","Language",3,"ngModel","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"field-label"],["name","RecordExport",3,"ngModel","ngModelChange"],["value","Blank"],["value","All"],["value","Selection",4,"ngIf"],["name","LanguageReferences",3,"ngModel","disabled","ngModelChange"],["value","Link"],["value","Resolve"],["name","ResourcesReferences",3,"ngModel","disabled","ngModelChange"],[1,"dialog-form-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],["value","Selection"]],template:function(t,o){var a;1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e._uU(2),e.ALo(3,"async"),e.qZA(),e.qZA(),e.TgZ(4,"p",2),e._uU(5," This will generate an XML file which you can edit in Excel. If you just want to import new data, use this to export the schema that you can then fill in using Excel. Please visit "),e.TgZ(6,"a",3),e._uU(7,"https://2sxc.org/help"),e.qZA(),e._uU(8," for more instructions.\n"),e.qZA(),e.YNc(9,B,41,9,"form",4),e.ALo(10,"async")),2&t&&(e.xp6(2),e.hij("Export ",null==(a=e.lcZ(3,2,o.contentType$))?null:a.Name,""),e.xp6(7),e.Q6J("ngIf",!1===e.lcZ(10,4,o.loading$)))},directives:[d.uh,c.O5,g._Y,g.JL,g.F,f.KE,f.hX,U.gD,g.JJ,g.On,I.ey,c.sg,C.VQ,C.U0,L.lW],pipes:[c.Ov],styles:[".field-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px;font-size:14px}"]}),l}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_content-export_content-export_component_ts.46f84952c7a27d01.js.map