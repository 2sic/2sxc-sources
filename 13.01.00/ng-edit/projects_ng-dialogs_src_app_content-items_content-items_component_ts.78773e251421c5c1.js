"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_content-items_content-items_component_ts","projects_ng-dialogs_src_app_shared_directives_click-stop-propagation_directive_ts"],{2386:function(Q,M,l){l.r(M),l.d(M,{ContentItemsComponent:function(){return Ze}});var I=l(5106),C=l(2090),c=l(8069),d=l(8047),b=l(1276),f=l(2977),m=l(6317),v=l(7714),Z=l(116),k=l(9295),x=l(4874),A=l(635),F=l(679),y=l(7338),D=l(5005),N=l(6488),U=l(9702),z=l(9230),lt=l(1361),t=l(7133),R=l(4770),tt=l(4683),_=l(587),st=["valueInput"],ut=function(){var i=function(){function r(){(0,c.Z)(this,r),this.filter="",this.idFilterString=""}return(0,d.Z)(r,[{key:"agInit",value:function(e){this.params=e}},{key:"isFilterActive",value:function(){return""!==this.filter||this.idFilter.length>0}},{key:"doesFilterPass",value:function(e){var o,a=this;if(""!==this.filter){var s=this.params.valueGetter(e.node);if(null==s||!s.some(function(p){return!!p&&p.includes(a.filter)}))return!1}if(this.idFilter.length>0){var u=null===(o=e.data[this.params.colDef.headerName])||void 0===o?void 0:o[0];if(null==u||!this.idFilter.includes(u.Id))return!1}return!0}},{key:"getModel",value:function(){if(this.isFilterActive())return{filterType:"entity",filter:this.filter,idFilter:this.idFilter}}},{key:"setModel",value:function(e){var a,o,s,u;this.filter=null!==(a=null==e?void 0:e.filter)&&void 0!==a?a:"",this.idFilter=null!==(o=null==e?void 0:e.idFilter)&&void 0!==o?o:[],this.idFilterString=null!==(u=null===(s=null==e?void 0:e.idFilter)||void 0===s?void 0:s.join(","))&&void 0!==u?u:""}},{key:"afterGuiAttached",value:function(e){this.valueInputRef.nativeElement.focus()}},{key:"updateIdFilter",value:function(){this.idFilter=this.idFilterString.split(",").map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)})}},{key:"filterChanged",value:function(){this.params.filterChangedCallback()}}]),r}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-entity-filter"]],viewQuery:function(n,e){var a;1&n&&t.Gf(st,5),2&n&&t.iGM(a=t.CRH())&&(e.valueInputRef=a.first)},decls:9,vars:2,consts:[["appearance","standard","color","accent"],["matInput","","type","text",3,"ngModel","ngModelChange"],["valueInput",""]],template:function(n,e){1&n&&(t.TgZ(0,"mat-form-field",0),t.TgZ(1,"mat-label"),t._uU(2,"Value"),t.qZA(),t.TgZ(3,"input",1,2),t.NdJ("ngModelChange",function(o){return e.filter=o})("ngModelChange",function(){return e.filterChanged()}),t.qZA(),t.qZA(),t.TgZ(5,"mat-form-field",0),t.TgZ(6,"mat-label"),t._uU(7,"IDs (comma separated)"),t.qZA(),t.TgZ(8,"input",1),t.NdJ("ngModelChange",function(o){return e.idFilterString=o})("ngModelChange",function(){return e.updateIdFilter(),e.filterChanged()}),t.qZA(),t.qZA()),2&n&&(t.xp6(3),t.Q6J("ngModel",e.filter),t.xp6(5),t.Q6J("ngModel",e.idFilterString))},directives:[R.KE,R.hX,tt.Nt,_.Fj,_.JJ,_.On],styles:["[_nghost-%COMP%]{display:block;padding:16px 12px 2px}.mat-form-field[_ngcontent-%COMP%]{display:block;width:150px}"]}),i}(),ct=l(5578),pt=l(9119),T=l(1825),dt=l(8254),mt=l(5738),H=l(5137),V=l(1130),w=l(785),K=l(5590),L=l(2796),gt=function(){var i=function(){function r(){(0,c.Z)(this,r)}return(0,d.Z)(r,[{key:"agInit",value:function(e){this.params=e,this.item=e.data}},{key:"refresh",value:function(e){return!0}},{key:"clone",value:function(){this.params.onClone(this.item)}},{key:"export",value:function(){this.params.onExport(this.item)}},{key:"deleteItem",value:function(){this.params.onDelete(this.item)}}]),r}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-items-actions"]],decls:17,vars:2,consts:[[1,"actions-component"],["matRipple","","tippy","Copy",1,"like-button","highlight",3,"click"],["matRipple","","tippy","Export",1,"like-button","highlight",3,"click"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"disabled","click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.NdJ("click",function(){return e.clone()}),t.TgZ(2,"mat-icon"),t._uU(3,"file_copy"),t.qZA(),t.qZA(),t.TgZ(4,"div",2),t.NdJ("click",function(){return e.export()}),t.TgZ(5,"mat-icon"),t._uU(6,"cloud_download"),t.qZA(),t.qZA(),t.TgZ(7,"div",3),t.TgZ(8,"mat-icon"),t._uU(9,"more_horiz"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-menu",4,5),t.TgZ(12,"button",6),t.NdJ("click",function(){return e.deleteItem()}),t.TgZ(13,"mat-icon"),t._uU(14,"delete"),t.qZA(),t.TgZ(15,"span"),t._uU(16,"Delete"),t.qZA(),t.qZA(),t.qZA()),2&n){var a=t.MAs(11);t.xp6(7),t.Q6J("matMenuTriggerFor",a),t.xp6(5),t.Q6J("disabled",e.item._EditInfo.ReadOnly)}},directives:[V.wG,w.$,K.Hw,L.p6,L.VK,L.OP],styles:[""]}),i}(),O=l(6362);function ft(i,r){if(1&i&&(t.TgZ(0,"span",2),t._uU(1),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Oqu(n.entities)}}var _t=function(){var i=function(){function r(){(0,c.Z)(this,r)}return(0,d.Z)(r,[{key:"agInit",value:function(e){!Array.isArray(e.value)||(this.encodedValue=this.htmlEncode(e.value.join(", ")),e.colDef.allowMultiValue&&(this.entities=e.value.length))}},{key:"refresh",value:function(e){return!0}},{key:"htmlEncode",value:function(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}]),r}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-items-entity"]],decls:3,vars:3,consts:[[3,"tippy"],["class","more-entities",4,"ngIf"],[1,"more-entities"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,ft,2,1,"span",1),t._uU(2),t.qZA()),2&n&&(t.Q6J("tippy",e.encodedValue),t.xp6(1),t.Q6J("ngIf",e.entities),t.xp6(1),t.hij(" ",e.encodedValue,"\n"))},directives:[w.$,O.O5],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]}),i}(),ht=l(178),vt=function(r){return{"hide-until-row-hover":r}};function yt(i,r){if(1&i){var n=t.EpF();t.TgZ(0,"div",4),t.NdJ("click",function(){return t.CHM(n),t.oxw().openMetadata()}),t.TgZ(1,"mat-icon",5),t._uU(2),t.qZA(),t.qZA()}if(2&i){var e=t.oxw();t.Q6J("ngClass",t.VKq(5,vt,!e.metadataCount&&!e.value.metadata))("tippy",e.metadataTooltip),t.xp6(1),t.Q6J("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.xp6(1),t.hij(" ",e.value.metadata?"loyalty":"local_offer"," ")}}function Ct(i,r){if(1&i&&(t.TgZ(0,"div",6),t.TgZ(1,"mat-icon",7),t._uU(2),t.qZA(),t.qZA()),2&i){var n=t.oxw();t.xp6(1),t.Q6J("matBadge",n.metadataCount)("matBadgeHidden",!n.metadataCount),t.xp6(1),t.hij(" ",n.value.metadata?"loyalty":"local_offer"," ")}}var Tt=function(){var i=function(){function r(){(0,c.Z)(this,r)}return(0,d.Z)(r,[{key:"agInit",value:function(e){var a,o;this.value=e.value,this.params=e,this.item=e.data,this.readOnly=this.item._EditInfo.ReadOnly,this.metadataCount=null!==(o=null===(a=this.item.Metadata)||void 0===a?void 0:a.length)&&void 0!==o?o:0,this.metadataTooltip=this.item.For?"This item is metadata for:"+"\nType: ".concat(this.item.For.Target)+(this.item.For.Number?"\nNumber: ".concat(this.item.For.Number):"")+(this.item.For.String?"\nString: ".concat(this.item.For.String):"")+(this.item.For.Guid?"\nGuid: ".concat(this.item.For.Guid):"")+(this.item.For.Title?"\nTitle: ".concat(this.item.For.Title):""):"This item is not metadata.",this.metadataTooltip+="\n\nThis item has ".concat(this.metadataCount>0?this.metadataCount:"no"," other metadata ").concat(1===this.metadataCount?"item":"items"," attached to it.")}},{key:"refresh",value:function(e){return!0}},{key:"openMetadata",value:function(){this.params.onOpenMetadata(this.item)}}]),r}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-items-status"]],decls:6,vars:4,consts:[[1,"actions-component"],[1,"like-button","icon",3,"tippy"],["class","like-button highlight","matRipple","",3,"ngClass","tippy","click",4,"ngIf"],["class","like-button disabled",4,"ngIf"],["matRipple","",1,"like-button","highlight",3,"ngClass","tippy","click"],["matBadgeColor","accent","matBadgeSize","small",3,"matBadge","matBadgeHidden"],[1,"like-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true",3,"matBadge","matBadgeHidden"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"mat-icon"),t._uU(3),t.qZA(),t.qZA(),t.YNc(4,yt,3,7,"div",2),t.YNc(5,Ct,3,3,"div",3),t.qZA()),2&n&&(t.xp6(1),t.Q6J("tippy",e.value.published?"Published":"Not published"),t.xp6(2),t.Oqu(e.value.published?"visibility":"visibility_off"),t.xp6(1),t.Q6J("ngIf",!e.readOnly),t.xp6(1),t.Q6J("ngIf",e.readOnly&&!(!e.metadataCount&&!e.value.metadata)))},directives:[w.$,K.Hw,O.O5,V.wG,O.mk,ht.k],styles:[".hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]}),i}(),et=l(8390),Zt=function(){var i=function(){function r(){(0,c.Z)(this,r),this.published="",this.metadata="",this.hasMetadata=""}return(0,d.Z)(r,[{key:"agInit",value:function(e){this.params=e}},{key:"isFilterActive",value:function(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata}},{key:"doesFilterPass",value:function(e){var a,o,s,u=this.params.valueGetter(e.node);return a=""===this.published||null!=u.published&&u.published.toString()===this.published,o=""===this.metadata||null!=u.metadata&&u.metadata.toString()===this.metadata,s=""===this.hasMetadata||null!=u.hasMetadata&&u.hasMetadata.toString()===this.hasMetadata,a&&o&&s}},{key:"getModel",value:function(){if(this.isFilterActive())return{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}}},{key:"setModel",value:function(e){this.published=e?e.published:"",this.metadata=e?e.metadata:"",this.hasMetadata=e?e.hasMetadata:""}},{key:"afterGuiAttached",value:function(e){}},{key:"filterChanged",value:function(){this.params.filterChangedCallback()}}]),r}();return i.\u0275fac=function(n){return new(n||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-pub-meta-filter"]],decls:27,vars:3,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t._uU(1,"Published"),t.qZA(),t.TgZ(2,"mat-radio-group",1),t.NdJ("ngModelChange",function(o){return e.published=o})("ngModelChange",function(){return e.filterChanged()}),t.TgZ(3,"mat-radio-button",2),t._uU(4,"All"),t.qZA(),t.TgZ(5,"mat-radio-button",3),t._uU(6,"Published"),t.qZA(),t.TgZ(7,"mat-radio-button",4),t._uU(8,"Not published"),t.qZA(),t.qZA(),t.TgZ(9,"div",0),t._uU(10,"Is Metadata"),t.qZA(),t.TgZ(11,"mat-radio-group",1),t.NdJ("ngModelChange",function(o){return e.metadata=o})("ngModelChange",function(){return e.filterChanged()}),t.TgZ(12,"mat-radio-button",2),t._uU(13,"All"),t.qZA(),t.TgZ(14,"mat-radio-button",3),t._uU(15,"Is metadata"),t.qZA(),t.TgZ(16,"mat-radio-button",4),t._uU(17,"Is not metadata"),t.qZA(),t.qZA(),t.TgZ(18,"div",0),t._uU(19,"Has Metadata"),t.qZA(),t.TgZ(20,"mat-radio-group",1),t.NdJ("ngModelChange",function(o){return e.hasMetadata=o})("ngModelChange",function(){return e.filterChanged()}),t.TgZ(21,"mat-radio-button",2),t._uU(22,"All"),t.qZA(),t.TgZ(23,"mat-radio-button",3),t._uU(24,"Has metadata"),t.qZA(),t.TgZ(25,"mat-radio-button",4),t._uU(26,"Has no metadata"),t.qZA(),t.qZA()),2&n&&(t.xp6(2),t.Q6J("ngModel",e.published),t.xp6(9),t.Q6J("ngModel",e.metadata),t.xp6(9),t.Q6J("ngModel",e.hasMetadata))},directives:[et.VQ,_.JJ,_.On,et.U0],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),i}(),$=l(5656),nt=l(6170),bt=l(6646),j=l(6562),q=l(8977),It=l(7854),it=l(9670),kt=l(8598),at=l(803),At=l(8398);function xt(i){return function(r){if(!r.value)return null;var n=i.controls.keyType.value,e=r.value.toString();switch(n){case T.Z.keyTypes.number:return/^[0-9]+$/.test(e)?null:{patternWholeNumber:!0};case T.Z.keyTypes.guid:var o=["{","}"].some(function(p){return e.includes(p)}),s=e.substring(o?1:0,o?e.length-1:e.length);return(0,At.M)().test(s)?null:{patternGuid:!0};default:return null}}}var G=l(5758),Dt=l(1434),Ot=l(3135),Ft=l(491),Et=l(6623),ot=l(7317);function Nt(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=r.$implicit;t.Q6J("value",n.type),t.xp6(1),t.hij(" ",n.label," ")}}function Pt(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=t.oxw(2).ngIf;t.Q6J("value",n.formValues.targetType),t.xp6(1),t.hij(" ",n.formValues.targetType," ")}}function Ut(i,r){if(1&i&&(t.TgZ(0,"mat-select",24),t.YNc(1,Nt,2,2,"mat-option",12),t.YNc(2,Pt,2,2,"mat-option",25),t.qZA()),2&i){var n=t.oxw().ngIf,e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.targetTypeOptions),t.xp6(1),t.Q6J("ngIf",n.unknownTargetType)}}function Jt(i,r){1&i&&t._UZ(0,"input",27)}function St(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),t.qZA()),2&i&&t.Q6J("isError",!1)}function Qt(i,r){if(1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1),t.qZA()),2&i){var n=t.oxw().ngIf;t.Q6J("isError",!1),t.xp6(1),t.Oqu(n.targetTypeHint)}}function Rt(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," This field is required "),t.qZA()),2&i&&t.Q6J("isError",!0)}function wt(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," Must be a whole number "),t.qZA()),2&i&&t.Q6J("isError",!0)}function $t(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=r.$implicit;t.Q6J("value",n),t.xp6(1),t.hij(" ",n," ")}}function qt(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," This field is required "),t.qZA()),2&i&&t.Q6J("isError",!0)}function Gt(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=r.$implicit;t.Q6J("value",n.StaticName),t.xp6(1),t.hij(" ",n.Label," ")}}function Yt(i,r){if(1&i&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Content Type"),t.qZA(),t.TgZ(3,"mat-select",29),t.YNc(4,Gt,2,2,"mat-option",12),t.qZA(),t.qZA()),2&i){var n=t.oxw().ngIf;t.xp6(3),t.Q6J("placeholder",n.contentTypes.length?"":"No items found"),t.xp6(1),t.Q6J("ngForOf",n.contentTypes)}}function Bt(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=r.$implicit;t.Q6J("value",n.value),t.xp6(1),t.hij(" ",n.name," ")}}function Kt(i,r){if(1&i&&(t.TgZ(0,"mat-form-field",7),t.TgZ(1,"mat-label"),t._uU(2,"Scope"),t.qZA(),t.TgZ(3,"mat-select",30),t.YNc(4,Bt,2,2,"mat-option",12),t.TgZ(5,"mat-option",26),t._uU(6,"Other..."),t.qZA(),t.qZA(),t.qZA()),2&i){var n=t.oxw().ngIf,e=t.oxw();t.xp6(3),t.Q6J("placeholder",n.scopeOptions.length?"":"No items found"),t.xp6(1),t.Q6J("ngForOf",n.scopeOptions),t.xp6(1),t.Q6J("value",e.dropdownInsertValue)}}function jt(i,r){1&i&&t.GkF(0)}function Ht(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=r.$implicit;t.Q6J("value",n.Guid),t.xp6(1),t.AsE(" ",n.Title," (",n.Id,") ")}}function Vt(i,r){if(1&i&&(t.TgZ(0,"mat-select",36),t.YNc(1,Ht,2,3,"mat-option",12),t.qZA()),2&i){var n=t.oxw(3).ngIf;t.Q6J("placeholder",n.contentItems.length?"":"No items found"),t.xp6(1),t.Q6J("ngForOf",n.contentItems)}}function Lt(i,r){1&i&&t._UZ(0,"input",37)}function Wt(i,r){if(1&i&&(t.ynx(0),t.YNc(1,Vt,2,2,"mat-select",34),t.YNc(2,Lt,1,0,"input",35),t.BQk()),2&i){var n=t.oxw(2).ngIf;t.xp6(1),t.Q6J("ngIf",n.guidedKey),t.xp6(1),t.Q6J("ngIf",!n.guidedKey)}}function Xt(i,r){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){var n=r.$implicit;t.Q6J("value",n.StaticName),t.xp6(1),t.hij(" ",n.Label," ")}}function zt(i,r){if(1&i&&(t.TgZ(0,"mat-select",36),t.YNc(1,Xt,2,2,"mat-option",12),t.qZA()),2&i){var n=t.oxw(3).ngIf;t.Q6J("placeholder",n.contentTypes.length?"":"No items found"),t.xp6(1),t.Q6J("ngForOf",n.contentTypes)}}function te(i,r){1&i&&t._UZ(0,"input",37)}function ee(i,r){if(1&i&&(t.ynx(0),t.YNc(1,zt,2,2,"mat-select",34),t.YNc(2,te,1,0,"input",35),t.BQk()),2&i){var n=t.oxw(2).ngIf;t.xp6(1),t.Q6J("ngIf",n.guidedKey),t.xp6(1),t.Q6J("ngIf",!n.guidedKey)}}function ne(i,r){1&i&&t.GkF(0)}function ie(i,r){if(1&i&&(t.ynx(0),t.YNc(1,ne,1,0,"ng-container",38),t.BQk()),2&i){t.oxw(2);var n=t.MAs(39);t.xp6(1),t.Q6J("ngTemplateOutlet",n)}}function ae(i,r){if(1&i&&(t.ynx(0,31),t.YNc(1,Wt,3,2,"ng-container",32),t.YNc(2,ee,3,2,"ng-container",32),t.YNc(3,ie,2,1,"ng-container",33),t.BQk()),2&i){var n=t.oxw().ngIf,e=t.oxw();t.Q6J("ngSwitch",n.formValues.targetType),t.xp6(1),t.Q6J("ngSwitchCase",e.eavConstants.metadata.entity.type),t.xp6(1),t.Q6J("ngSwitchCase",e.eavConstants.metadata.contentType.type)}}function oe(i,r){1&i&&t._UZ(0,"input",37)}function re(i,r){1&i&&t._UZ(0,"input",40)}function le(i,r){if(1&i&&(t.YNc(0,oe,1,0,"input",35),t.YNc(1,re,1,0,"input",39)),2&i){var n=t.oxw().ngIf,e=t.oxw();t.Q6J("ngIf",n.formValues.keyType!==e.eavConstants.keyTypes.number),t.xp6(1),t.Q6J("ngIf",n.formValues.keyType===e.eavConstants.keyTypes.number)}}var rt=function(r){return{active:r}};function se(i,r){if(1&i){var n=t.EpF();t.TgZ(0,"div",41),t.TgZ(1,"button",42),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).toggleGuidedKey(!0)}),t.TgZ(2,"mat-icon"),t._uU(3,"search"),t.qZA(),t.qZA(),t.TgZ(4,"button",43),t.NdJ("click",function(){return t.CHM(n),t.oxw(2).toggleGuidedKey(!1)}),t.TgZ(5,"mat-icon"),t._uU(6,"text_fields"),t.qZA(),t.qZA(),t.qZA()}if(2&i){var e=t.oxw().ngIf;t.xp6(1),t.Q6J("ngClass",t.VKq(2,rt,e.guidedKey)),t.xp6(3),t.Q6J("ngClass",t.VKq(4,rt,!e.guidedKey))}}function ue(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," This field is required "),t.qZA()),2&i&&t.Q6J("isError",!0)}function ce(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," Must be a whole number "),t.qZA()),2&i&&t.Q6J("isError",!0)}function pe(i,r){1&i&&(t.TgZ(0,"app-field-hint",28),t._uU(1," Must be a valid GUID "),t.qZA()),2&i&&t.Q6J("isError",!0)}function de(i,r){if(1&i){var n=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t._uU(3,"Create Metadata"),t.qZA(),t.qZA(),t.TgZ(4,"p",3),t._uU(5," This is a special operation to add an item which is metadata for another item, see "),t.TgZ(6,"a",4),t._uU(7,"docs"),t.qZA(),t._uU(8,". "),t.qZA(),t.TgZ(9,"form",5),t.TgZ(10,"div",6),t.TgZ(11,"mat-form-field",7),t.TgZ(12,"mat-label"),t._uU(13,"Target"),t.qZA(),t.YNc(14,Ut,3,2,"mat-select",8),t.YNc(15,Jt,1,0,"input",9),t.qZA(),t.YNc(16,St,2,1,"app-field-hint",10),t.YNc(17,Qt,2,2,"app-field-hint",10),t.YNc(18,Rt,2,1,"app-field-hint",10),t.YNc(19,wt,2,1,"app-field-hint",10),t.TgZ(20,"mat-form-field",7),t.TgZ(21,"mat-label"),t._uU(22,"Key type"),t.qZA(),t.TgZ(23,"mat-select",11),t.YNc(24,$t,2,2,"mat-option",12),t.qZA(),t.qZA(),t.YNc(25,qt,2,1,"app-field-hint",10),t.YNc(26,Yt,5,2,"mat-form-field",13),t.YNc(27,Kt,7,3,"mat-form-field",13),t.TgZ(28,"app-field-hint"),t._uU(29," The scope should almost never be changed - "),t.TgZ(30,"a",14),t._uU(31,"see help"),t.qZA(),t.qZA(),t.TgZ(32,"mat-form-field",7),t.TgZ(33,"mat-label"),t._uU(34,"Key"),t.qZA(),t.YNc(35,jt,1,0,"ng-container",15),t.YNc(36,ae,4,3,"ng-template",null,16,t.W1O),t.YNc(38,le,2,2,"ng-template",null,17,t.W1O),t.YNc(40,se,7,6,"div",18),t.qZA(),t.YNc(41,ue,2,1,"app-field-hint",10),t.YNc(42,ce,2,1,"app-field-hint",10),t.YNc(43,pe,2,1,"app-field-hint",10),t.qZA(),t.TgZ(44,"div",19),t.TgZ(45,"mat-slide-toggle",20),t.NdJ("change",function(p){return t.CHM(n),t.oxw().toggleGuidedMode(p)}),t._uU(46),t.qZA(),t._UZ(47,"div",21),t.TgZ(48,"button",22),t.NdJ("click",function(){return t.CHM(n),t.oxw().closeDialog()}),t._uU(49,"Cancel"),t.qZA(),t.TgZ(50,"button",23),t.NdJ("click",function(){return t.CHM(n),t.oxw().confirm()}),t._uU(51," Confirm "),t.qZA(),t.qZA(),t.qZA(),t.BQk()}if(2&i){var e=r.ngIf,a=t.MAs(37),o=t.MAs(39),s=t.oxw();t.xp6(9),t.Q6J("formGroup",s.form),t.xp6(5),t.Q6J("ngIf",e.guidedMode),t.xp6(1),t.Q6J("ngIf",!e.guidedMode),t.xp6(1),t.Q6J("ngIf",s.form.controls.targetType.touched&&!s.form.controls.targetType.invalid&&e.unknownTargetType),t.xp6(1),t.Q6J("ngIf",e.targetTypeHint),t.xp6(1),t.Q6J("ngIf",s.form.controls.targetType.touched&&(null==s.form.controls.targetType.errors?null:s.form.controls.targetType.errors.required)),t.xp6(1),t.Q6J("ngIf",s.form.controls.targetType.touched&&(null==s.form.controls.targetType.errors?null:s.form.controls.targetType.errors.pattern)),t.xp6(5),t.Q6J("ngForOf",e.keyTypeOptions),t.xp6(1),t.Q6J("ngIf",s.form.controls.keyType.touched&&(null==s.form.controls.keyType.errors?null:s.form.controls.keyType.errors.required)),t.xp6(1),t.Q6J("ngIf",e.guidedMode&&e.formValues.targetType===s.eavConstants.metadata.entity.type),t.xp6(1),t.Q6J("ngIf",e.guidedMode&&(e.formValues.targetType===s.eavConstants.metadata.entity.type||e.formValues.targetType===s.eavConstants.metadata.contentType.type)),t.xp6(8),t.Q6J("ngIf",e.guidedMode)("ngIfThen",a)("ngIfElse",o),t.xp6(5),t.Q6J("ngIf",e.guidedMode&&e.guidedKeyExists),t.xp6(1),t.Q6J("ngIf",s.form.controls.key.touched&&(null==s.form.controls.key.errors?null:s.form.controls.key.errors.required)),t.xp6(1),t.Q6J("ngIf",s.form.controls.key.touched&&(null==s.form.controls.key.errors?null:s.form.controls.key.errors.patternWholeNumber)),t.xp6(1),t.Q6J("ngIf",s.form.controls.key.touched&&(null==s.form.controls.key.errors?null:s.form.controls.key.errors.patternGuid)),t.xp6(2),t.Q6J("tippy",e.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",e.guidedMode),t.xp6(1),t.hij(" ",e.guidedMode?"Guided":"Manual"," "),t.xp6(4),t.Q6J("disabled",!s.form.valid)}}var me=function(){var i=function(){function r(n,e,a,o){(0,c.Z)(this,r),this.dialogRef=n,this.context=e,this.contentItemsService=a,this.contentTypesService=o,this.hostClass="dialog-component",this.eavConstants=T.Z,this.dropdownInsertValue=it.G}return(0,d.Z)(r,[{key:"ngOnInit",value:function(){var e=this;this.subscription=new v.w0,this.targetTypeOptions=Object.values(T.Z.metadata).map(function(o){return Object.assign({},o)}),this.keyTypeOptions=Object.values(T.Z.keyTypes),this.keyTypeOptions$=new m.X([]),this.scopeOptions$=new m.X([]),this.guidedMode$=new m.X(!0),this.contentItems$=new m.X([]),this.contentTypes$=new m.X([]),this.guidedKey$=new m.X(!0),this.fetchScopes(),this.form=new _.cw({}),this.form.addControl("targetType",new _.NI(T.Z.metadata.entity.type,[_.kI.required,_.kI.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new _.NI(T.Z.metadata.entity.keyType,[_.kI.required])),this.form.addControl("contentTypeForContentItems",new _.NI(null)),this.form.addControl("scopeForContentTypes",new _.NI(T.Z.scopes.default.value)),this.form.addControl("key",new _.NI(null,[_.kI.required,xt(this.form)])),this.subscription.add(this.form.controls.scopeForContentTypes.valueChanges.pipe((0,x.O)(this.form.controls.scopeForContentTypes.value),(0,q.x)()).subscribe(function(o){null!=e.form.controls.contentTypeForContentItems.value&&e.form.controls.contentTypeForContentItems.patchValue(null),o===it.G?(o=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||T.Z.scopes.default.value,e.scopeOptions$.value.some(function(u){return u.value===o})||e.scopeOptions$.next([{name:o,value:o}].concat((0,nt.Z)(e.scopeOptions$.value))),e.form.controls.scopeForContentTypes.patchValue(o)):e.fetchContentTypes(o)})),this.subscription.add((0,bt.T)(this.form.controls.targetType.valueChanges.pipe((0,q.x)()),this.form.controls.keyType.valueChanges.pipe((0,q.x)())).subscribe(function(){e.guidedKey$.next(!0),null!=e.form.getRawValue().key&&e.form.patchValue({key:null})})),this.subscription.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,x.O)(this.form.controls.contentTypeForContentItems.value),(0,q.x)()).subscribe(function(o){var s=e.form.getRawValue();s.targetType===T.Z.metadata.entity.type&&null!=s.key&&e.form.patchValue({key:null}),e.contentItemsService.getAll(o).subscribe(function(p){e.contentItems$.next(p)})}));var a=this.form.valueChanges.pipe((0,x.O)(this.form.getRawValue()),(0,A.U)(function(){return e.form.getRawValue()}),(0,q.x)($.iX.objectsEqual));this.subscription.add((0,j.a)([a,this.guidedMode$]).subscribe(function(o){var s=(0,C.Z)(o,2),u=s[0],p=s[1],h=e.targetTypeOptions.find(function(S){return S.type===u.targetType}),g=p&&h?[h.keyType]:(0,nt.Z)(e.keyTypeOptions);$.iX.arraysEqual(g,e.keyTypeOptions$.value)||e.keyTypeOptions$.next(g);var E={};e.keyTypeOptions$.value.includes(u.keyType)||(E.keyType=e.keyTypeOptions$.value[0]);var P=p&&u.targetType===T.Z.metadata.app.type;P&&u.key!==e.context.appId&&(E.key=e.context.appId),Object.keys(E).length&&e.form.patchValue(E),$.iX.disableControl(e.form.controls.keyType,p&&e.keyTypeOptions$.value.length<=1),$.iX.disableControl(e.form.controls.key,P)})),this.templateVars$=(0,j.a)([(0,j.a)([this.guidedMode$,this.keyTypeOptions$,this.scopeOptions$,this.contentItems$,this.contentTypes$]),(0,j.a)([a,this.guidedKey$])]).pipe((0,A.U)(function(o){var Y,s=(0,C.Z)(o,2),u=(0,C.Z)(s[0],5),p=u[0],h=u[1],g=u[2],E=u[3],P=u[4],J=(0,C.Z)(s[1],2),S=J[0],W=J[1];return{guidedMode:p,unknownTargetType:!e.targetTypeOptions.some(function(X){return X.type===S.targetType}),targetTypeHint:p&&(null===(Y=e.targetTypeOptions.find(function(X){return X.type===S.targetType}))||void 0===Y?void 0:Y.hint),keyTypeOptions:h,scopeOptions:g,guidedKey:W,guidedKeyExists:[T.Z.metadata.entity.type,T.Z.metadata.contentType.type].includes(S.targetType),formValues:S,contentItems:E,contentTypes:P}}))}},{key:"ngOnDestroy",value:function(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(e){this.dialogRef.close(e)}},{key:"toggleGuidedKey",value:function(e){this.guidedKey$.next(e)}},{key:"toggleGuidedMode",value:function(e){this.guidedMode$.next(e.checked)}},{key:"confirm",value:function(){var e,a,o=this.form.getRawValue(),s={target:null!==(a=null===(e=this.targetTypeOptions.find(function(u){return u.type===o.targetType}))||void 0===e?void 0:e.target)&&void 0!==a?a:o.targetType.toString(),keyType:o.keyType,key:o.keyType===T.Z.keyTypes.guid?o.key.replace(/{|}/g,""):o.key.toString()};this.closeDialog(s)}},{key:"fetchContentTypes",value:function(e){var a=this;this.contentTypesService.retrieveContentTypes(e).subscribe(function(o){a.contentTypes$.next(o)})}},{key:"fetchScopes",value:function(){var e=this;this.contentTypesService.getScopes().subscribe(function(a){e.scopeOptions$.next(a)})}}]),r}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(G.so),t.Y36(kt._),t.Y36(at.l),t.Y36(It.sF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(n,e){2&n&&t.Ikx("className",e.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","http://r.2sxc.org/metadata","target","_blank"],[1,"dialog-form",3,"formGroup"],[1,"dialog-form-content","fancy-scrollbar-light"],["appearance","standard","color","accent"],["formControlName","targetType","required","",4,"ngIf"],["matInput","","type","number","min","0","formControlName","targetType","required","",4,"ngIf"],[3,"isError",4,"ngIf"],["formControlName","keyType","required",""],[3,"value",4,"ngFor","ngForOf"],["appearance","standard","color","accent",4,"ngIf"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],[4,"ngIf","ngIfThen","ngIfElse"],["specialKeyInputs",""],["defaultKeyInput",""],["matSuffix","","class","selection-suffix",4,"ngIf"],[1,"dialog-form-actions"],["color","accent",3,"tippy","checked","change"],[1,"spacer"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"disabled","click"],["formControlName","targetType","required",""],[3,"value",4,"ngIf"],[3,"value"],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","contentTypeForContentItems",3,"placeholder"],["formControlName","scopeForContentTypes",3,"placeholder"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["formControlName","key","required","",3,"placeholder",4,"ngIf"],["matInput","","type","text","formControlName","key","required","",4,"ngIf"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required","",4,"ngIf"],["matInput","","type","number","formControlName","key","required",""],["matSuffix","",1,"selection-suffix"],["mat-icon-button","","type","button","tippy","Pick existing value",3,"ngClass","click"],["mat-icon-button","","type","button","tippy","Manual entry",3,"ngClass","click"]],template:function(n,e){1&n&&(t.YNc(0,de,52,22,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.templateVars$))},directives:[O.O5,G.uh,_._Y,_.JL,_.sg,R.KE,R.hX,Dt.gD,_.JJ,_.u,_.Q7,O.sg,Ot.Y,Ft.E,Et.Rr,w.$,ot.lW,V.ey,tt.Nt,_.qQ,_.wV,_.Fj,O.RF,O.n9,O.ED,O.tP,R.R9,O.mk,K.Hw],pipes:[O.Ov],styles:[".dialog-form-content[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]:not(:first-of-type){margin-top:8px}"]}),i}(),ge=l(8130),fe=l(2528),_e=l(5469),he=l(1350),ve=l(1529),ye=l(845);function Ce(i,r){1&i&&(t._UZ(0,"div",14),t.ALo(1,"safeHtml")),2&i&&t.Q6J("innerHTML",t.lcZ(1,1,r.ngIf),t.oJD)}function Te(i,r){if(1&i){var n=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){return t.CHM(n),t.oxw().debugFilter()}),t.TgZ(1,"mat-icon"),t._uU(2,"filter_list"),t.qZA(),t.TgZ(3,"span"),t._uU(4,"Filter"),t.qZA(),t.qZA()}}var Ze=function(){var i=function(){function r(n,e,a,o,s,u,p,h,g,E,P,J){(0,c.Z)(this,r),this.dialogRef=n,this.contentTypesService=e,this.router=a,this.route=o,this.contentItemsService=s,this.entitiesService=u,this.contentExportService=p,this.snackBar=h,this.globalConfigService=g,this.dialog=E,this.viewContainerRef=P,this.changeDetectorRef=J,this.contentType$=new m.X(null),this.items$=new m.X(null),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.modules=b.F$,this.gridOptions=Object.assign(Object.assign({},pt.f),{frameworkComponents:{pubMetaFilterComponent:Zt,booleanFilterComponent:lt.U,entityFilterComponent:ut,idFieldComponent:ct.m,contentItemsStatusComponent:Tt,contentItemsActionsComponent:gt,contentItemsEntityComponent:_t}}),this.gridApi$=new m.X(null),this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName"),this.subscription=new v.w0}return(0,d.Z)(r,[{key:"ngOnInit",value:function(){this.fetchContentType(),this.fetchItems(),this.fetchColumns(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.contentType$.complete(),this.items$.complete(),this.gridApi$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"onGridReady",value:function(e){this.gridApi$.next(e.api)}},{key:"fetchContentType",value:function(){var e=this;this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(function(a){e.contentType$.next(a)})}},{key:"fetchItems",value:function(){var e=this;this.contentItemsService.getAll(this.contentTypeStaticName).subscribe(function(a){e.items$.next(a)})}},{key:"fetchColumns",value:function(){var e=this;this.contentItemsService.getColumns(this.contentTypeStaticName).subscribe(function(a){var o=e.buildColumnDefs(a),s=function Mt(i,r){var n,e;if(i){var a;"="===i.charAt(i.length-1)&&(i=atob(i));try{a=JSON.parse(i)}catch(u){console.error("Can't parse JSON with filters from url:",i)}if(a){var o={};if(a.IsPublished||a.IsMetadata){var s={filterType:"pub-meta",published:null!==(n=a.IsPublished)&&void 0!==n?n:"",metadata:null!==(e=a.IsMetadata)&&void 0!==e?e:"",hasMetadata:""};o.Status=s}return Object.entries(a).filter(function(u){var h=(0,C.Z)(u,2)[0];return"IsPublished"!==h&&"IsMetadata"!==h}).forEach(function(u){var E,p=(0,C.Z)(u,2),h=p[0],g=p[1],P=r.find(function(B){return B.headerName===h});if("entityFilterComponent"!==(null==P?void 0:P.filter)){if("string"==typeof g)o[h]={filterType:"text",type:"equals",filter:g};else if("number"==typeof g)o[h]={filterType:"number",type:"equals",filter:g,filterTo:null};else if("boolean"==typeof g){var Y={filterType:"boolean",filter:g.toString()};o[h]=Y}}else{var J={filterType:"entity",filter:"string"==typeof(g=null!==(E=$.iX.tryParse(g))&&void 0!==E?E:g)?g:void 0,idFilter:"number"==typeof g?[g]:Array.isArray(g)?g.filter(function(B){return"number"==typeof B}):void 0};o[h]=J}}),o}}}(sessionStorage.getItem(dt.JA),o);e.gridApi$.value?e.setColumnDefs(o,s):e.gridApi$.pipe((0,Z.h)(function(u){return null!=u}),(0,k.q)(1)).subscribe(function(u){e.setColumnDefs(o,s)})})}},{key:"setColumnDefs",value:function(e,a){this.gridApi$.value.setColumnDefs(e),a&&((0,mt.P)("Will try to apply filter:",a),this.gridApi$.value.setFilterModel(a))}},{key:"openMetadata",value:function(e){var a=z.U.getUrlEntity(e.Guid,"Metadata for Entity: ".concat(e._Title," (").concat(e.Id,")"),this.contentTypeStaticName);this.router.navigate([a],{relativeTo:this.route})}},{key:"editItem",value:function(e){var a=null==e?void 0:e.data,s=(0,H.f)({items:[null==a?{ContentTypeName:this.contentTypeStaticName}:{EntityId:a.Id}]});this.router.navigate(["edit/".concat(s)],{relativeTo:this.route})}},{key:"exportContent",value:function(){var e=this.gridApi$.value.getFilterModel(),a=Object.keys(e).length>0,o=[];a&&this.gridApi$.value.forEachNodeAfterFilterAndSort(function(s){o.push(s.data.Id)}),this.router.navigate(["export/".concat(this.contentTypeStaticName).concat(o.length>0?"/".concat(o):"")],{relativeTo:this.route})}},{key:"filesDropped",value:function(e){var a=e[0];switch(a.name.substring(a.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.importContent(e);break;case"json":this.importItem(e)}}},{key:"importContent",value:function(e){var a={files:e};this.router.navigate(["".concat(this.contentTypeStaticName,"/import")],{relativeTo:this.route,state:a})}},{key:"importItem",value:function(e){this.router.navigate(["import"],{relativeTo:this.route,state:{files:e}})}},{key:"createMetadata",value:function(){var e=this;this.dialog.open(me,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().pipe((0,k.q)(1)).subscribe(function(o){if(null!=o){var s={items:[{ContentTypeName:e.contentTypeStaticName,For:Object.assign(Object.assign(Object.assign({Target:o.target},o.keyType===T.Z.keyTypes.guid&&{Guid:o.key}),o.keyType===T.Z.keyTypes.number&&{Number:parseInt(o.key,10)}),o.keyType===T.Z.keyTypes.string&&{String:o.key})}]},u=(0,H.f)(s);e.router.navigate(["edit/".concat(u)],{relativeTo:e.route}),e.changeDetectorRef.markForCheck()}})}},{key:"debugFilter",value:function(){console.warn("Current filter:",this.gridApi$.value.getFilterModel()),alert("Check console for filter information")}},{key:"refreshOnChildClosed",value:function(){var e=this;this.subscription.add(this.router.events.pipe((0,Z.h)(function(a){return a instanceof f.m2}),(0,x.O)(!!this.route.snapshot.firstChild),(0,A.U)(function(){return!!e.route.snapshot.firstChild}),(0,F.G)(),(0,Z.h)(function(a){var o=(0,C.Z)(a,2);return o[0]&&!o[1]})).subscribe(function(){e.fetchItems()}))}},{key:"buildColumnDefs",value:function(e){var s,a=[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:function(g){return"".concat(g.data._EditInfo.ReadOnly?"disabled":""," id-action no-padding no-outline")},cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(g){return"ID: ".concat(g.Id,"\nRepoID: ").concat(g._RepositoryId,"\nGUID: ").concat(g.Guid)}}},{headerName:"Status",field:"Status",width:82,headerClass:"dense",cellClass:"secondary-action no-padding",filter:"pubMetaFilterComponent",cellRenderer:"contentItemsStatusComponent",valueGetter:this.valueGetterStatus,cellRendererParams:{onOpenMetadata:this.openMetadata.bind(this)}},{headerName:"Item (Entity)",field:"_Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,filter:"agTextColumnFilter",onCellClicked:this.editItem.bind(this)},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:this.valueGetterUsage},{cellClass:"secondary-action no-padding",width:122,cellRenderer:"contentItemsActionsComponent",pinned:"right",cellRendererParams:{onClone:this.clone.bind(this),onExport:this.export.bind(this),onDelete:this.delete.bind(this)}}],o=(0,I.Z)(e);try{for(o.s();!(s=o.n()).done;){var u=s.value,p={headerName:u.StaticName,field:u.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(u.Type){case U.Q.Entity:try{p.allowMultiValue=u.Metadata.Entity.AllowMultiValue}catch(h){p.allowMultiValue=!0}p.cellRenderer="contentItemsEntityComponent",p.valueGetter=this.valueGetterEntityField,p.filter="entityFilterComponent";break;case U.Q.DateTime:try{p.useTimePicker=u.Metadata.DateTime.UseTimePicker}catch(h){p.useTimePicker=!1}p.valueGetter=this.valueGetterDateTime,p.filter="agTextColumnFilter";break;case U.Q.Boolean:p.valueGetter=this.valueGetterBoolean,p.filter="booleanFilterComponent";break;case U.Q.Number:p.filter="agNumberColumnFilter";break;default:p.filter="agTextColumnFilter"}a.push(p)}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"clone",value:function(e){var o=(0,H.f)({items:[{ContentTypeName:this.contentTypeStaticName,DuplicateEntity:e.Id}]});this.router.navigate(["edit/".concat(o)],{relativeTo:this.route})}},{key:"export",value:function(e){this.contentExportService.exportEntity(e.Id,this.contentTypeStaticName,!0)}},{key:"delete",value:function(e){var a=this;!confirm("Delete '".concat(e._Title,"' (").concat(e._RepositoryId,")?"))||(this.snackBar.open("Deleting..."),this.entitiesService.delete(this.contentTypeStaticName,e._RepositoryId,!1).subscribe({next:function(){a.snackBar.open("Deleted",null,{duration:2e3}),a.fetchItems()},error:function(s){a.snackBar.dismiss(),confirm("".concat(s.error.ExceptionMessage,"\n\nDo you want to force delete '").concat(e._Title,"' (").concat(e._RepositoryId,")?"))&&(a.snackBar.open("Deleting..."),a.entitiesService.delete(a.contentTypeStaticName,e._RepositoryId,!0).subscribe(function(){a.snackBar.open("Deleted",null,{duration:2e3}),a.fetchItems()}))}}))}},{key:"valueGetterStatus",value:function(e){var a=e.data;return{published:a.IsPublished,metadata:!!a.For,hasMetadata:!!a.Metadata&&a.Metadata.length>0}}},{key:"valueGetterUsage",value:function(e){var a=e.data;return"".concat(a._Used," / ").concat(a._Uses)}},{key:"valueGetterEntityField",value:function(e){var a=e.data[e.colDef.field];return 0===a.length?null:a.map(function(o){return o.Title})}},{key:"valueGetterDateTime",value:function(e){var a=e.data[e.colDef.field];return a?e.colDef.useTimePicker?a.replace("T"," ").replace("Z",""):a.split("T")[0]:null}},{key:"valueGetterBoolean",value:function(e){var a=e.data[e.colDef.field];return"boolean"!=typeof a?null:a.toString()}}]),r}();return i.\u0275fac=function(n){return new(n||i)(t.Y36(G.so),t.Y36(D.s),t.Y36(f.F0),t.Y36(f.gz),t.Y36(at.l),t.Y36(ge.g),t.Y36(N.i),t.Y36(fe.ux),t.Y36(y.bE),t.Y36(G.uw),t.Y36(t.s_b),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-content-items"]],decls:41,vars:15,consts:[["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"innerHTML",4,"ngIf"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","gridReady","filesDropped"],[1,"grid-more-actions-box"],["mat-button","","tippy","Export xml list",3,"click"],["mat-button","","tippy","Import xml list",3,"click"],["mat-button","","tippy","Import single json item",3,"click"],["mat-button","","tippy","Create metadata",3,"click"],["mat-button","","color","accent","tippy","Print filter to console",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"click"],[3,"innerHTML"],["mat-button","","color","accent","tippy","Print filter to console",3,"click"]],template:function(n,e){var a,o;1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div"),t._uU(4),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"button",3),t.NdJ("click",function(){return e.closeDialog()}),t.TgZ(7,"mat-icon"),t._uU(8,"close"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t._UZ(9,"router-outlet"),t.YNc(10,Ce,2,3,"div",4),t.ALo(11,"async"),t.TgZ(12,"div",5),t.TgZ(13,"ag-grid-angular",6),t.NdJ("gridReady",function(u){return e.onGridReady(u)})("filesDropped",function(u){return e.filesDropped(u)}),t.ALo(14,"async"),t.qZA(),t.TgZ(15,"div",7),t.TgZ(16,"button",8),t.NdJ("click",function(){return e.exportContent()}),t.TgZ(17,"mat-icon"),t._uU(18,"cloud_download"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Data"),t.qZA(),t.qZA(),t.TgZ(21,"button",9),t.NdJ("click",function(){return e.importContent()}),t.TgZ(22,"mat-icon"),t._uU(23,"cloud_upload"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Data"),t.qZA(),t.qZA(),t.TgZ(26,"button",10),t.NdJ("click",function(){return e.importItem()}),t.TgZ(27,"mat-icon"),t._uU(28,"cloud_upload"),t.qZA(),t.TgZ(29,"span"),t._uU(30,"Item"),t.qZA(),t.qZA(),t.TgZ(31,"button",11),t.NdJ("click",function(){return e.createMetadata()}),t.TgZ(32,"mat-icon"),t._uU(33,"local_offer"),t.qZA(),t.TgZ(34,"span"),t._uU(35,"Create Metadata"),t.qZA(),t.qZA(),t.YNc(36,Te,5,0,"button",12),t.ALo(37,"async"),t.qZA(),t.TgZ(38,"button",13),t.NdJ("click",function(){return e.editItem(null)}),t.TgZ(39,"mat-icon"),t._uU(40,"add"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.hij("",null==(a=t.lcZ(5,7,e.contentType$))?null:a.Name," Data"),t.xp6(6),t.Q6J("ngIf",null==(o=t.lcZ(11,9,e.contentType$))||null==o.Properties?null:o.Properties.ListInstructions),t.xp6(3),t.Q6J("rowData",t.lcZ(14,11,e.items$))("modules",e.modules)("gridOptions",e.gridOptions)("allowedFileTypes","xml,json"),t.xp6(23),t.Q6J("ngIf",t.lcZ(37,13,e.debugEnabled$)))},directives:[_e.D,G.uh,ot.lW,w.$,K.Hw,f.lC,O.O5,he.N8,ve.z],pipes:[O.Ov,ye.z],styles:[""]}),i}()},3135:function(Q,M,l){l.d(M,{Y:function(){return F}});var I=l(8069),C=l(8047),c=l(7133),d=l(6362),b=l(4770);function f(y,D){1&y&&c.GkF(0)}function m(y,D){if(1&y&&(c.TgZ(0,"mat-hint"),c.YNc(1,f,1,0,"ng-container",3),c.qZA()),2&y){c.oxw();var N=c.MAs(4);c.xp6(1),c.Q6J("ngTemplateOutlet",N)}}function v(y,D){1&y&&c.GkF(0)}function Z(y,D){if(1&y&&(c.TgZ(0,"mat-error"),c.YNc(1,v,1,0,"ng-container",3),c.qZA()),2&y){c.oxw();var N=c.MAs(4);c.xp6(1),c.Q6J("ngTemplateOutlet",N)}}function k(y,D){1&y&&c.Hsn(0)}var x=function(D){return{"hint-box__short":D}},A=["*"],F=function(){var y=function(){function D(){(0,I.Z)(this,D),this.isError=!1,this.isShort=!0}return(0,C.Z)(D,[{key:"toggleIsShort",value:function(){this.isShort=!this.isShort}}]),D}();return y.\u0275fac=function(N){return new(N||y)},y.\u0275cmp=c.Xpm({type:y,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:A,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(N,U){1&N&&(c.F$t(),c.TgZ(0,"div",0),c.NdJ("click",function(){return U.toggleIsShort()}),c.YNc(1,m,2,1,"mat-hint",1),c.YNc(2,Z,2,1,"mat-error",1),c.qZA(),c.YNc(3,k,1,0,"ng-template",null,2,c.W1O)),2&N&&(c.Q6J("ngClass",c.VKq(4,x,U.isShort))("ngSwitch",U.isError),c.xp6(1),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0))},directives:[d.mk,d.RF,d.n9,b.bx,d.tP,b.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),y}()},5578:function(Q,M,l){l.d(M,{m:function(){return Z}});var I=l(8069),C=l(8047),c=l(5388),d=l(7133),b=l(2528),f=l(1130),m=l(785),v=l(5590),Z=function(){var k=function(){function x(A){(0,I.Z)(this,x),this.snackBar=A}return(0,C.Z)(x,[{key:"agInit",value:function(F){this.id=F.value,this.tooltip=F.tooltipGetter(F.data)}},{key:"refresh",value:function(F){return!0}},{key:"copy",value:function(){(0,c.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),x}();return k.\u0275fac=function(A){return new(A||k)(d.Y36(b.ux))},k.\u0275cmp=d.Xpm({type:k,selectors:[["app-id-field"]],decls:5,vars:2,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(A,F){1&A&&(d.TgZ(0,"div",0),d.NdJ("click",function(){return F.copy()}),d.TgZ(1,"span",1),d._uU(2),d.qZA(),d.TgZ(3,"mat-icon",2),d._uU(4,"file_copy"),d.qZA(),d.qZA()),2&A&&(d.Q6J("tippy",F.tooltip),d.xp6(2),d.Oqu(F.id))},directives:[f.wG,m.$,v.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),k}()},8398:function(Q,M,l){function I(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}l.d(M,{M:function(){return I}})},491:function(Q,M,l){l.d(M,{E:function(){return d}});var I=l(8069),C=l(8047),c=l(7133),d=function(){var b=function(){function f(){(0,I.Z)(this,f)}return(0,C.Z)(f,[{key:"onClick",value:function(v){v.stopPropagation()}}]),f}();return b.\u0275fac=function(m){return new(m||b)},b.\u0275dir=c.lG2({type:b,selectors:[["","appClickStopPropagation",""]],hostBindings:function(m,v){1&m&&c.NdJ("click",function(k){return v.onClick(k)})}}),b}()},5469:function(Q,M,l){l.d(M,{D:function(){return b}});var I=l(8069),C=l(8047),c=l(7338),d=l(7133),b=function(){var f=function(){function m(v){(0,I.Z)(this,m),this.globalConfigService=v}return(0,C.Z)(m,[{key:"onClick",value:function(Z){(navigator.platform.match("Mac")?Z.metaKey:Z.ctrlKey)&&Z.shiftKey&&Z.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}]),m}();return f.\u0275fac=function(v){return new(v||f)(d.Y36(c.bE))},f.\u0275dir=d.lG2({type:f,selectors:[["","appToggleDebug",""]],hostBindings:function(v,Z){1&v&&d.NdJ("click",function(x){return Z.onClick(x)})}}),f}()},5388:function(Q,M,l){function I(C){var c=document.createElement("textarea");c.value=C,c.setAttribute("readonly",""),c.style.position="absolute",c.style.left="-9999px",document.body.appendChild(c);var d=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);c.select(),document.execCommand("copy"),document.body.removeChild(c),d&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(d))}l.d(M,{v:function(){return I}})},845:function(Q,M,l){l.d(M,{z:function(){return b}});var I=l(8069),C=l(8047),c=l(7133),d=l(318),b=function(){var f=function(){function m(v){(0,I.Z)(this,m),this.sanitizer=v}return(0,C.Z)(m,[{key:"transform",value:function(Z){return this.sanitizer.bypassSecurityTrustHtml(Z)}}]),m}();return f.\u0275fac=function(v){return new(v||f)(c.Y36(d.H7,16))},f.\u0275pipe=c.Yjl({name:"safeHtml",type:f,pure:!0}),f}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.01.00/ng-edit/projects_ng-dialogs_src_app_content-items_content-items_component_ts.78773e251421c5c1.js.map