"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_edit_form_form-config_service_ts-projects_eav-ui_src_app_edit-b26668"],{4202:(T,P,e)=>{e.d(P,{u:()=>f});const f={BooleanDefault:"boolean-default",BooleanTristate:"boolean-tristate",CustomDefault:"custom-default",CustomGps:"custom-gps",CustomJsonEditor:"custom-json-editor",DateTimeDefault:"datetime-default",DefaultSuffix:"-default",EmptyDefault:"empty-default",EmptyEnd:"empty-end",EmptyMessage:"empty-message",EntityContentBlocks:"entity-content-blocks",EntityDefault:"entity-default",EntityQuery:"entity-query",ExternalWebComponent:"external-web-component",HyperlinkDefault:"hyperlink-default",HyperlinkLibrary:"hyperlink-library",NumberDefault:"number-default",NumberDropdown:"number-dropdown",StringDefault:"string-default",StringDropdown:"string-dropdown",StringDropdownQuery:"string-dropdown-query",StringFontIconPicker:"string-font-icon-picker",StringJson:"string-json",StringTemplatePicker:"string-template-picker",StringUrlPath:"string-url-path",StringWysiwyg:"string-wysiwyg",EntityPicker:"entity-picker",StringPicker:"string-picker",NumberPicker:"number-picker",Unknown:"unknown"}},4981:(T,P,e)=>{e.d(P,{f:()=>f});class f{static toggleInArray(g,h){const _=h.indexOf(g);return-1===_?h.push(g):h.splice(_,1),h}}},7796:(T,P,e)=>{e.d(P,{W:()=>g});var f=e(64173),p=e(67993);class g{constructor(_,n,i,o,d,E,M,y,r,a,u,x){this.name=_,this.config=n,this.group=i,this.settings=o,this.basics=d,this.ui=E,this.uiValue=M,this.translationState=y,this.isOpen=r,this.#e=(0,p.KX)("requiredFeatures",[]),this.#n=this.setting("requiredFeatures"),this.requiredFeatures=(0,p.bo)("requiredFeatures",()=>{const t=[...this.#e(),...this.#n()??[]];return Array.from(new Set(t))}),this.#t=a,(0,f.QZ)(()=>{const t=this.requiredFeatures();if(0!=t.length)for(const v of t)u.requireFeature(v,`Used in field ${this.name}`)},{injector:x})}get pickerData(){if(this.#t)return this.#t;throw new Error(`PickerData was not initialized for the field: ${this.name}`)}#t;setting(_){return(0,p.bo)(_,()=>this.settings()[_])}settingExt(_){return(0,p.bo)(_,()=>this.settings()[_])}#e;#n;requireFeature(_){const n=this.#e();n.includes(_)||this.#e.set([...n,_])}}},8265:(T,P,e)=>{e.d(P,{S:()=>n});var f=e(44444),p=e(38172),g=e(34435),h=e(68873),_=e(32093);let n=(()=>{class i{constructor(){this.log=(0,g.Tq)({FormConfigService:i}),this.configSignal=(0,f.vPA)(null),this.context=(0,f.WQX)(h.o),this.languageService=(0,f.WQX)(_.A)}initFormConfig(d,E,M,y,r,a,u,x){this.settings=x,this.languages={initial:d.Language.Current,primary:d.Language.Primary,list:d.Language.List};const t=sessionStorage.getItem(p.p2),D=(t?JSON.parse(t):null)?.save,m=null==D?{mode:!0}:"false"===D||!1===D?{mode:!1}:{mode:!0,path:D};this.config={zoneId:this.context.zoneId,appId:this.context.appId,appRoot:d.App.Url,appSharedRoot:d.App.SharedUrl,moduleId:this.context.moduleId?.toString(),partOfPage:sessionStorage.getItem(p.h9)??p.bO,portalRoot:d.Site.Url,tabId:this.context.tabId?.toString(),systemRoot:window.location.pathname.split("/dist/")[0]+"/",versioningOptions:this.getVersioningOptions("true"===sessionStorage.getItem(p.h9),sessionStorage.getItem(p.Hh)),formId:E,isParentDialog:M,itemGuids:y,createMode:r,isCopy:a,enableHistory:u,enableFormulaSave:d.Enable.FormulaSave??!1,removeEditRestrictions:d.Enable.OverrideEditRestrictions??!1,dialogContext:d,settings:x,save:m},this.configSignal.set(this.config),this.language=this.languageService.getSignal(this.config.formId)}getVersioningOptions(d,E){const M={show:!0,hide:!0,branch:!0};if(!d)return M;const y=E||"";switch(y){case"":case"DraftOptional":return M;case"DraftRequired":return{branch:!0,hide:!0};case"DraftForbidden":return{show:!0};default:return console.error(`Invalid versioning requirements: ${y}`),{}}}get language$(){return this._language$??=this.languageService.getLanguage$(this.config.formId)}static#t=this.\u0275fac=function(E){return new(E||i)};static#e=this.\u0275prov=f.jDH({token:i,factory:i.\u0275fac})}return i})()},13050:(T,P,e)=>{e.d(P,{im:()=>g,bT:()=>h.b,X3:()=>o,Nt:()=>f.N,M5:()=>_,SX:()=>E,b:()=>M.b});var f=e(41573),p=e(47314);class g{static getDefaultSettings(r,a,u){const t={...r.flatten(a.Metadata)};return t.Description??="",t.EditInstructions??="",t.Features??="",t.Label??="",t.ListInstructions??="",t.Notes??="",t.Icon??="",t.Link??="",t._itemTitle=this.getTitle(a,r),t._slotCanBeEmpty=u.IsEmptyAllowed??!1,t._slotIsEmpty=u.IsEmpty??!1,t}static getTitle(r,a){try{const u=r.Metadata.find(t=>"ContentType"===t.Type.Name||"xx ContentType"===t.Type.Name);let x=u?new p.U(u.Attributes.Label,a).currentOrDefault?.value:null;return x=x||r.Name,x}catch{return r.Name}}}var h=e(95443);let _=(()=>{class y{static#t=this.defaultIcon="file";static#e=this.customExtensions={doc:"file-word",docx:"file-word",xls:"file-excel",xlsx:"file-excel",ppt:"file-powerpoint",pptx:"file-powerpoint",pdf:"file-pdf",mp3:"file-audio",avi:"file-video",mpg:"file-video",mpeg:"file-video",mov:"file-video",mp4:"file-video",zip:"file-archive",rar:"file-archive",txt:"file-text",html:"file-code",css:"file-code",xml:"file-code",xsl:"file-code"};static#n=this.matExtensions={vcf:"person"};static getExtension(a){return a.substring(a.lastIndexOf(".")+1).toLocaleLowerCase()}static getIconClass(a){const u=this.getExtension(a);return this.matExtensions[u]||this.customExtensions[u]||this.defaultIcon}static isKnownType(a){return null!=this.matExtensions[this.getExtension(a)]}static isImage(a){return this.isImgRegex().test(a)}static isImgRegex(){return/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:jpg|jpeg|gif|png|webp))(?:\?([^#]*))?(?:#(.*))?/i}}return y})();var n=e(4202),i=e(34435);class o{constructor(r,a,u,x){this.name=r,this.inputType=a,this.settings=u,this.itemHeader=x,this.log=(0,i.Tq)({FieldDefaults:o})}getDefaultOrPrefillValue(r){const a=this.inputType,u=this.name,x=this.settings,t=this.itemHeader,v=this.log.fn("parseDefaultValue",{name:u,inputType:a,settings:x,itemHeader:t,onlyPrefill:r}),D=t?.Prefill?.[u];if(r&&void 0===D)return v.rNull("only prefill, but no prefill data found");let m=D?.toString()??x.DefaultValue;switch(v.values({defaultValue:m}),a){case n.u.BooleanDefault:return"true"===m?.toLowerCase();case n.u.BooleanTristate:return null!=m&&""!==m?"true"===m.toLowerCase():null;case n.u.DateTimeDefault:return null!=m&&""!==m?new Date(m).toJSON():null;case n.u.NumberDefault:case n.u.NumberDropdown:case n.u.NumberPicker:return null!=m&&""!==m?isNaN(Number(m))?null:Number(m):null;case n.u.EntityDefault:case n.u.EntityQuery:case n.u.EntityContentBlocks:case n.u.EntityPicker:if(null==m||""===m)return[];if(m.includes("{")&&(m=m.replace(/[\{\}]/g,'"')),m.includes(",")&&!m.includes("[")){const S=m.split(",").map(b=>b.trim());m=JSON.stringify(S)}return m.startsWith("[")?JSON.parse(m):[m.replace(/"/g,"")];default:return m??""}}}e(67419);class E{static removeFromStart(r,a){if(!r)return r;for(;r.substring(0,1)===a;)r=r.substring(1);return r}static removeFromEnd(r,a){if(!r)return r;for(;r.substring(r.length-1,r.length)===a;)r=r.substring(0,r.length-1);return r}static cleanBadPath(r){if(!r)return r;const a="_";return r.replace(/[\?<>\\:\*\|":]/g,a).replace(/[\x00-\x1f\x80-\x9f]/g,a).replace(/^\.+$/,a).replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,a).replace(/[\. ]+$/,a)}static sanitizePath(r){return r&&(r=this.removeFromStart(r,"/"),r=this.removeFromEnd(r,"/"),r=this.removeFromStart(r,"\\"),r=this.removeFromEnd(r,"\\"),this.cleanBadPath(r))}static sanitizeName(r){return r?this.sanitizePath(r).replace(/\//g,"_"):r}}var M=e(73412)},16632:(T,P,e)=>{e.d(P,{r:()=>h});var f=e(98503),p=e(67993),g=e(34435);class h{constructor(n){this.#t=(0,p.KX)("cache",{}),this.#e=(0,p.bo)("list",()=>Object.values(this.#t())),this.getId=i=>i.id,this.sanitizeAdd=i=>i,this.#n=new f.K("item"),this.log=n??(0,g.Tq)({SignalStoreBase:h}),this.log.a("SignalStoreBase created"),this.name=this.log.name}#t;#e;get cache(){return this.#t}get list(){return this.#e}add(n){const i=this.log.fn("add",{item:n});if(!n)return i.end("item is null");this.#t.set({...this.#t(),[this.getId(n)]:this.sanitizeAdd(n)}),i.end("added")}addMany(n){var i=this.log.fn("addMany",{items:n});if(!n||0==n.length)return i.end("items is null or empty");const o=n.reduce((d,E)=>({...d,[this.getId(E)]:this.sanitizeAdd(E)}),{...this.#t()});this.#t.set(o),i.end("added")}update(n,i){const o=this.log.fn("update",{id:n,item:i});if(!n||!i)return o.end("id or item is null");const d=this.get(n);if(!d)return o.end(`Item with id ${n} not found in store`);const E={...d,...i};this.#t.set({...this.#t(),[n]:E}),o.end("updated")}remove(n){const i=this.log.fn("remove",{id:n}),{[n]:o,...d}=this.#t();this.#t.set(d),i.end("removed")}clearCache(){const n=this.log.fn("clearCache");this.#t.set({}),n.end("cleared")}get(n){const i=this.#t()[n];return this.log.a(`get(${n}) - `+(null==i?"not":"")+"found"),i}getAll(){const n=this.#e();return this.log.a(`getAll() - found ${n.length} items`),n}getMany(n){const i=this.log.fn("getMany",{ids:n}),o=n.map(d=>this.#t()[d]).filter(d=>null!=d);return i.r(o,`found ${o.length} items`)}getSignal(n){const i=this.#n.getOrCreateWithInfo(n,()=>this.get(n));return this.log.a(`getSignal(${n})`,{isNew:i.isNew}),i.signal}#n;getManySignal(n){const i=(0,p.bo)("getMany",()=>n.map(o=>this.get(o)).filter(o=>null!=o));return this.log.a("getManySignal()",{ids:n}),i}getAllSignal(){const n=this.#e;return this.log.a(`getAllSignal() - found ${n().length} items`),n}}},32093:(T,P,e)=>{e.d(P,{A:()=>M});var f=e(70271),p=e(86301),g=e(34435),h=e(48021),_=e(98503),n=e(13050),i=e(89964),o=e(79868),d=e(44444);const E={getReader:!1,getLanguage:!1,getReaderSignal:!1};let M=(()=>{class y extends i.k{constructor(){super((0,g.Tq)({FormLanguageService:y},E)),this.getId=a=>a.formId,this.sanitizeAdd=a=>({...o.N.empty,initial:a.current,...a}),this.#t=new _.K("entityReader"),this.#e=new _.K("hideHeader")}addForm(a,u,x,t){this.add({formId:a,current:x,initial:x,primary:u,hideHeader:t})}setCurrent(a,u){this.update(a,{current:u})}getEntityReader(a){const u=this.log.fnIf("getReader",{formId:a}),x=this.#t.getOrCreateWithInfo(a,()=>{const t=this.getSignal(a)()??o.N.empty();return this.log.fnIf("getReaderSignal",{language:t}),new n.bT(t)});return u.rSilent(x.signal,`isNew: ${x.isNew}`)}#t;getLanguage$(a){return this.cache$.pipe((0,f.T)(u=>u[a]),(0,h.J)(u=>u),(0,p.t)(1))}getHideHeaderSignal(a){return this.#e.getOrCreate(a,()=>this.cache()[a]?.hideHeader??!1)}#e;updateHideHeader(a,u){this.update(a,{hideHeader:u})}static#n=this.\u0275fac=function(u){return new(u||y)};static#i=this.\u0275prov=d.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},41573:(T,P,e)=>{e.d(P,{N:()=>y});var f=e(44444),p=e(64173),g=e(34435),h=e(4979),_=e(7796),n=e(8265);const i={all:!1,initSignal:!1,watchAllFields:!0},d=/\[.*?\]/gi,M=/[\[\]]/gi;let y=(()=>{class u extends h.V{#t;#e;constructor(t){super(),this.injector=t,this.log=(0,g.Tq)({FieldMask:u},i),this.#t=(0,f.WQX)(_.W),this.#e=(0,f.WQX)(n.S),this.result=(0,f.vPA)(""),this.#n=this.#t.group.controls,this.#i=this.#t.config,this.#s=!1,this.#a=(0,f.vPA)((0,f.vPA)("")),this.#r=(0,p.EW)(()=>this.#a()()),this.#l=(0,p.EW)(()=>this.#g(this.#r())),this.log.a("constructor")}#n;#i;#s;#a;#r;#l;initPreClean(t){return this.log.a("initPreClean"),this.preClean=t,this}init(t,v,D=!1){return this.initSignal(t,(0,f.vPA)(v))}initSignal(t,v){this.log.extendName(`-${t}`);const D=this.log.fnIf("initSignal",{name:t,mask:v});return this.#a.set(v),this.#c(),D.r(this,"first result:"+this.result())}logChanges(){const t=this.log.enabled?this.log:(0,g.Tq)({FieldMask:u});return(0,p.QZ)(()=>t.a(`Mask '${this.#r()}' value changed to: ${this.result()}`),{injector:this.injector}),this}#c(){this.#h(),this.#o()}#u(){if(!r(this.#r()))return this.#r();let t=function a(u){return u.replace(/\[([^\]]+)\]/g,(x,t)=>`[${t.toLowerCase()}]`)}(this.#r());null!=this.#e&&(t=t.replace("[app:appid]",this.#e.config.appId.toString()).replace("[app:zoneid]",this.#e.config.zoneId.toString())),null!=this.#i&&(t=t.replace("[guid]",this.#i.entityGuid).replace("[data:guid]",this.#i.entityGuid).replace("[id]",this.#i.entityId.toString()).replace("[data:id]",this.#i.entityId.toString()));const v=this.#l().data;return v&&v.forEach((D,m)=>{const S=this.#n?.[D]?.value??"",b=this.preClean(D,S);t=t.replace("[data:"+D.toLowerCase()+"]",b),t=t.replace("["+D.toLowerCase()+"]",b)}),t}#g(t){if(!t||!r(t))return{};const v=t.match(d);return v?{data:v.map(m=>m.replace(M,""))}:{}}preClean(t,v){return v}#o(){const t=this.#u();this.result.set(t)}#h(){const t=this.log.fnIf("watchAllFields"),v=this.#l().data;if(!v)return t.end("no data placeholders");const D=v.map(m=>this.#n[m]).filter(m=>null!=m);if(0==D.length)return t.end("no fields to watch");D.forEach(m=>this.subscriptions.add(m.valueChanges.subscribe(S=>this.#o()))),t.end()}static#d=this.\u0275fac=function(v){return new(v||u)(f.KVO(f.zZn))};static#f=this.\u0275prov=f.jDH({token:u,factory:u.\u0275fac})}return u})();function r(u){return(u??"").includes("[")}},47314:(T,P,e)=>{e.d(P,{U:()=>_});var f=e(34435),p=e(79868),g=e(89274);const h={all:!1,constructor:!1};class _{constructor(i,o){this.log=(0,f.Tq)({FieldReader:_},h),this.#t=!0,this.log.fnIf("constructor",{field:i,language:o}),this.#e=i,this.#i="string"==typeof o?{current:o,primary:o}:o,this.#n=i?.Values??[],this.#t=!i||!i.Values||0===i.Values.length}#t;#e;#n;#i;get current(){return this.ofLanguage(this.#i)}get currentOrDefault(){return this.#t?null:this.current??this.ofLanguage(p.N.bothPrimary(this.#i))}get currentOrDefaultOrAny(){return this.#t?null:this.currentOrDefault??this.#n[0]??null}ofLanguage(i){return this.#t?null:this.#n.filter(o=>new g.Y(o.dimensions,i).hasCurrent)[0]??null}get hasPrimary(){if(this.#t)return!1;const i=this.#i.primary;return this.#n.filter(o=>o.dimensions.find(d=>d.dimCode===i||"*"===d.dimCode)).length>0}get hasCurrentReadonly(){return!this.#t&&this.#n.filter(i=>new g.Y(i.dimensions,this.#i).hasCurrentReadOnly).length>0}get hasEditableValues(){return!this.#t&&this.#s().length>0}countEditable(){return this.#s().length}countEditableWithContents(){return this.#s().filter(i=>""!=i.value&&null!=i.value)?.length}#s(i){return this.#t?[]:(i??=this.#i,this.#n.filter(o=>new g.Y(o.dimensions,i).hasCurrentWrite))}get currentEditable(){if(this.#t)return null;const i=this.#i.current;return this.#n.find(o=>o.dimensions.find(d=>d.dimCode===i))??null}isEditableOrReadonlyTranslationExist(){return!this.#t&&this.#s().length>0}}},48021:(T,P,e)=>{e.d(P,{A:()=>n,J:()=>_});var f=e(95682),p=e(91817),g=e(70271),h=e(92434);function _(i){return(0,f.F)((0,p.F)(),(0,g.T)(i),(0,p.F)())}function n(i){return(0,f.F)((0,p.F)(h.A),(0,g.T)(i),(0,p.F)(h.A))}},67419:(T,P,e)=>{e.d(P,{C:()=>J});var f=e(64334),p=e(87945),g=e(44444),h=e(64173),_=e(34456),n=e(81863),i=e(31016),o=e(93840),d=e(59791),E=e(90852),M=e(12938),y=e(34601),r=e(4981),a=e(54839),t=e(99293),v=e(87698);const D=l=>({page:l});function m(l,O){1&l&&t.eu8(0)}function S(l,O){if(1&l&&t.DNE(0,m,1,0,"ng-container",9),2&l){const s=O.$implicit;t.XpG(2);const c=t.sdS(15);t.Y8G("ngTemplateOutlet",c)("ngTemplateOutletContext",t.eq3(2,D,s))}}function b(l,O){if(1&l&&(t.j41(0,"ul"),t.Z7z(1,S,1,4,"ng-container",null,t.fX1),t.k0s()),2&l){const s=t.XpG();t.R7$(),t.Dyx(s.tree())}}function A(l,O){1&l&&(t.j41(0,"li")(1,"div",10),t.nrm(2,"div",11),t.j41(3,"div"),t.EFF(4,"No results"),t.k0s()()())}function k(l,O){if(1&l&&(t.j41(0,"span",15),t.EFF(1),t.k0s()),2&l){const s=t.XpG().$implicit;t.Y8G("tippy",s.path),t.R7$(),t.SpI("",s.path,"\xa0>\xa0")}}function L(l,O){1&l&&(t.j41(0,"mat-icon",18),t.EFF(1,"visibility_off"),t.k0s())}function j(l,O){1&l&&(t.j41(0,"mat-icon",18),t.EFF(1,"cancel"),t.k0s())}function $(l,O){if(1&l){const s=t.RV6();t.j41(0,"li")(1,"div",10),t.nrm(2,"div",11),t.j41(3,"div",12),t.bIt("click",function(){const C=g.eBV(s).$implicit,I=t.XpG(2);return g.Njj(I.select(C))}),t.j41(4,"div",13),t.nrm(5,"mat-icon",14),t.nVh(6,k,2,2,"span",15),t.j41(7,"span",16),t.EFF(8),t.k0s()(),t.j41(9,"div",17),t.nVh(10,L,2,0,"mat-icon",18),t.nVh(11,j,2,0,"mat-icon",18),t.k0s()()()()}if(2&l){const s=O.$implicit,c=t.XpG(2);t.R7$(3),t.Y8G("ngClass",s.id===c.selected?"selected":""),t.R7$(3),t.vxM(s.path?6:-1),t.R7$(),t.Y8G("tippy",s.name),t.R7$(),t.JRh(s.name),t.R7$(2),t.vxM(s.isNavigation?-1:10),t.R7$(),t.vxM(s.isClickable?-1:11)}}function B(l,O){if(1&l&&(t.j41(0,"ul"),t.nVh(1,A,5,0,"li"),t.Z7z(2,$,12,6,"li",null,t.fX1),t.k0s()),2&l){const s=t.XpG();t.R7$(),t.vxM(0===s.filteredSearch().length?1:-1),t.R7$(),t.Dyx(s.filteredSearch())}}function U(l,O){1&l&&t.nrm(0,"div",11)}function w(l,O){if(1&l){const s=t.RV6();t.j41(0,"mat-icon",20),t.bIt("click",function(){g.eBV(s);const C=t.XpG().page,I=t.XpG();return g.Njj(I.toggle(C.id))}),t.EFF(1),t.k0s()}if(2&l){const s=t.XpG().page,c=t.XpG();t.R7$(),t.SpI(" ",c.toggled.includes(s.id)?"keyboard_arrow_down":"keyboard_arrow_right"," ")}}function N(l,O){1&l&&(t.j41(0,"mat-icon",18),t.EFF(1,"visibility_off"),t.k0s())}function W(l,O){1&l&&(t.j41(0,"mat-icon",18),t.EFF(1,"cancel"),t.k0s())}function K(l,O){1&l&&t.eu8(0)}function V(l,O){if(1&l&&t.DNE(0,K,1,0,"ng-container",9),2&l){const s=O.$implicit;t.XpG(3);const c=t.sdS(15);t.Y8G("ngTemplateOutlet",c)("ngTemplateOutletContext",t.eq3(2,D,s))}}function X(l,O){if(1&l&&(t.j41(0,"ul"),t.Z7z(1,V,1,4,"ng-container",null,t.fX1),t.k0s()),2&l){const s=t.XpG().page;t.R7$(),t.Dyx(s.children)}}function H(l,O){if(1&l){const s=t.RV6();t.j41(0,"li")(1,"div",10),t.nVh(2,U,1,0,"div",11),t.nVh(3,w,2,1,"mat-icon",19),t.j41(4,"div",12),t.bIt("click",function(){const C=g.eBV(s).page,I=t.XpG();return g.Njj(I.select(C))}),t.j41(5,"div",13),t.nrm(6,"mat-icon",14),t.j41(7,"span"),t.EFF(8),t.k0s()(),t.j41(9,"div",17),t.nVh(10,N,2,0,"mat-icon",18),t.nVh(11,W,2,0,"mat-icon",18),t.k0s()()(),t.nVh(12,X,3,0,"ul"),t.k0s()}if(2&l){const s=O.page,c=t.XpG();t.R7$(2),t.vxM(0===s.children.length?2:-1),t.R7$(),t.vxM(s.children.length>0?3:-1),t.R7$(),t.Y8G("ngClass",s.id===c.selected?"selected":""),t.R7$(4),t.JRh(s.name),t.R7$(2),t.vxM(s.isVisible?-1:10),t.R7$(),t.vxM(s.isClickable?-1:11),t.R7$(),t.vxM(s.children.length>0&&c.toggled.includes(s.id)?12:-1)}}let G=(()=>{class l{constructor(s,c,C){this.dialogData=s,this.dialog=c,this.translate=C,this.filterText=(0,g.vPA)(""),this.searchItems=(0,g.vPA)([]),this.tree=(0,g.vPA)([]),this.filteredSearch=(0,h.EW)(()=>{const I=this.filterText();return this.searchItems().filter(R=>R.name.toLocaleLowerCase().includes(I.toLocaleLowerCase()))}),this.queryService=(0,M.d)(a.c)}ngOnInit(){this.selected=this.parseSelectedPageId(),this.toggled=[],this.fetchPages()}setFilter(s){this.filterText.set(s)}select(s){null!=s.id&&((!s.isClickable||!s.isNavigation)&&!window.confirm(this.translate.instant("Fields.Hyperlink.PagePicker.HiddenOrSystemPageWarning"))||this.closeDialog(s.id))}toggle(s){r.f.toggleInArray(s,this.toggled)}closeDialog(s){if(null==s)return void this.dialog.close();const c=this.searchItems().find(I=>I.id===s),C={id:c.id.toString(),name:c.name};this.dialog.close(C)}fetchPages(){const s="Default";this.queryService.getFromQuery("System.Pages/Default","includehidden=true",null).subscribe({next:C=>{if(!C)return void console.error(this.translate.instant("Fields.Picker.QueryErrorNoData"));if(!C[s])return void console.error(this.translate.instant("Fields.Picker.QueryStreamNotFound")+" "+s);const I=C[s],F=function u(l){return l?l.map(s=>{let c=s.Path.trim().replace(/\\/g,"/").replace(/\/\//g,"/");return c.startsWith("/")&&(c=c.substring(1)),c=c.split("/").slice(0,-1).join(" > "),{id:s.Id,name:s.Name,path:c,isNavigation:s.IsNavigation,isClickable:s.IsClickable}}):[]}(I);this.searchItems.set(F);const R=function x(l){if(!l)return[];const O=l.map(c=>({children:[],id:c.Id,name:c.Name,parentId:c.ParentId,isNavigation:c.IsNavigation,isClickable:c.IsClickable})),s=[];for(const c of O){if(-1===c.parentId){s.push(c);continue}const C=O.find(I=>I.id===c.parentId);C?C.children.push(c):s.push(c)}return s}(I);this.tree.set(R)},error:C=>{console.error(C),console.error(`${this.translate.instant("Fields.Picker.QueryError")} - ${C.data}`)}})}parseSelectedPageId(){const s="page:";let c=this.dialogData.group.controls[this.dialogData.config.fieldName].value;if("string"==typeof c&&(c=c.trim().toLocaleLowerCase(),c.startsWith(s)))try{return parseInt(c.split(s)[1],10)}catch{return}}static#t=this.\u0275fac=function(c){return new(c||l)(t.rXU(n.e),t.rXU(n.k),t.rXU(E.c$))};static#e=this.\u0275cmp=t.VBU({type:l,selectors:[["app-page-picker"]],decls:17,vars:6,consts:[["pageAndChildren",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"page-search-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","ngModel"],[1,"page-tree-box"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-row"],[1,"no-toggle"],[1,"page-label",3,"click","ngClass"],[1,"page-icon-and-text"],["svgIcon","file",1,"page-icon"],[1,"page-path",3,"tippy"],[1,"page-name",3,"tippy"],[1,"page-icons"],[1,"page-visible-clickable-icon"],[1,"page-toggle"],[1,"page-toggle",3,"click"]],template:function(c,C){if(1&c){const I=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t.EFF(9,"Search"),t.k0s(),t.j41(10,"input",7),t.bIt("ngModelChange",function(R){return g.eBV(I),g.Njj(C.setFilter(R))}),t.k0s()()(),t.j41(11,"div",8),t.nVh(12,b,3,0,"ul"),t.nVh(13,B,4,1,"ul"),t.k0s(),t.DNE(14,H,13,7,"ng-template",null,0,t.C5r),t.k0s(),t.nrm(16,"mat-dialog-actions"),t.k0s()}2&c&&(t.R7$(3),t.JRh(t.bMT(4,4,"Fields.Hyperlink.PagePicker.Title")),t.R7$(7),t.Y8G("ngModel",C.filterText()),t.R7$(2),t.vxM(C.filterText()?-1:12),t.R7$(),t.vxM(C.filterText()?13:-1))},dependencies:[i.M,v.j,v.M,d.fS,d.fg,_.YN,_.me,_.BC,_.vS,p.T3,p.YU,o.m_,o.An,n.M,E.h,E.D9,y.e],styles:[".page-picker-title[_ngcontent-%COMP%]{margin:0}.page-search-box[_ngcontent-%COMP%]{margin-bottom:16px;width:40%}.page-tree-box[_ngcontent-%COMP%]{height:82%;max-width:100%;overflow:auto}.page-tree-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:8px;margin:0}.page-tree-box[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding-left:0}.page-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px}.no-toggle[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block;flex-shrink:0}.page-toggle[_ngcontent-%COMP%]{cursor:pointer;flex-shrink:0}.page-icon[_ngcontent-%COMP%]{margin-right:4px;flex-shrink:0}.page-visible-clickable-icon[_ngcontent-%COMP%]{margin-left:4px;flex-shrink:0}.page-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding:4px 4px 4px 2px;border-radius:4px;width:100%}.page-label[_ngcontent-%COMP%]   .page-icon-and-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-label[_ngcontent-%COMP%]   .page-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.page-label[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#a2a7b1;text-overflow:ellipsis;max-width:270px;white-space:nowrap;overflow:hidden;padding-right:.5em}.page-label[_ngcontent-%COMP%]   .page-name[_ngcontent-%COMP%]{text-overflow:ellipsis;max-width:225px;white-space:nowrap;overflow:hidden}.page-label[_ngcontent-%COMP%]:hover{background-color:#06599a;color:#fff}.page-label[_ngcontent-%COMP%]:hover   .page-path[_ngcontent-%COMP%]{color:#c7cad0}.page-label.selected[_ngcontent-%COMP%]{background-color:#002753;color:#fff}.page-label.selected[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#c7cad0}"]})}return l})();class J{static open(O,s,c,C,I,F){c.open(G,{autoFocus:!1,data:{config:O,group:s},viewContainerRef:C,height:"80%",width:"650px"}).afterClosed().pipe((0,f.s)(1)).subscribe(Y=>{F(Y)}),I.markForCheck()}}},79868:(T,P,e)=>{e.d(P,{N:()=>f});class f{static bothPrimary(h){return{current:h.primary,primary:h.primary}}static diffCurrent(h,_){return{current:_,primary:h.primary}}static empty(){return{current:"",primary:"",initial:""}}}},89274:(T,P,e)=>{e.d(P,{Y:()=>f});class f{constructor(g,h){this.dimensions=g,this.language=h}get hasCurrentWrite(){return!!this.dimensions.find(h=>h.dimCode===this.language.current||this.language.current===this.language.primary&&"*"===h.dimCode)}get hasCurrentReadOnly(){const g=`~${this.language.current}`;return void 0!==this.dimensions.find(h=>h.dimCode===g)}get hasCurrent(){return!!this.dimensions.find(h=>h.dimCode===this.language.current||h.dimCode===`~${this.language.current}`||this.language.current===this.language.primary&&"*"===h.dimCode)}}},89964:(T,P,e)=>{e.d(P,{k:()=>h});var f=e(49074),p=e(16632),g=e(48021);class h extends p.r{#t=(0,f.br)(this.cache);#e=(0,f.br)(this.list);get cache$(){return this.#t}get list$(){return this.#e}getList$(){return this.list$}getMany$(n){return this.cache$.pipe((0,g.J)(i=>n.map(o=>i[o]).filter(o=>null!=o)))}}},95443:(T,P,e)=>{e.d(P,{b:()=>h});var f=e(34435),p=e(47314);const g={all:!1,constructor:!1};class h{constructor(n,i){this.log=(0,f.Tq)({EntityReader:h},g),this.log.fnIf("constructor",{current:n,primary:i}),"string"==typeof n?(this.current=n,this.primary=i):(this.current=n.current,this.primary=n.primary)}getBestValue(n,i=null){return new p.U(n,this).currentOrDefaultOrAny?.value??i}flatten(n){if(null==n)return{};const i=Array.isArray(n)?n:[n];if(0===i.length||null==i[0])return{};const o={};for(const d of i)if("@All"!==d.Type.Id)for(const[E,M]of Object.entries(d.Attributes)){const y=this.getBestValue(M);o[E]=y}for(const d of i)if("@All"===d.Type.Id)for(const[E,M]of Object.entries(d.Attributes)){const y=this.getBestValue(M);null!=o[E]&&(null==y||""===y)||(o[E]=y)}return o}currentValues(n){return Object.entries(n).reduce((o,[d,E])=>(o[d]=this.getBestValue(E),o),{})}}}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.03/dist/ng-edit/default-projects_eav-ui_src_app_edit_form_form-config_service_ts-projects_eav-ui_src_app_edit-b26668.a53581d4f53e04ca.js.map