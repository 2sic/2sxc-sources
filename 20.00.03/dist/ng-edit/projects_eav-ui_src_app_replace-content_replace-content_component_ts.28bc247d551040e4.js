"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_replace-content_replace-content_component_ts"],{4513:(L,v,n)=>{n.r(v),n.d(v,{ReplaceContentComponent:()=>U});var c=n(84344),r=n(37580),d=n(34456),_=n(79771),P=n(84175),R=n(31403),I=n(81863),W=n(31016),O=n(93840),T=n(59791),B=n(29658),p=n(12938),F=n(13620),o=n(59669),i=n(43216),m=n(70334),l=n(60852),D=n(67993),t=n(99293),e=n(44444),s=n(3347),g=n(87698),M=n(23731),S=n(88622);function y(E,N){if(1&E&&(t.j41(0,"mat-option",15),t.EFF(1),t.k0s()),2&E){const h=N.$implicit;t.Y8G("value",h.label),t.R7$(),t.JRh(h.label)}}let U=(()=>{class E{#e;#t;constructor(h,u){this.dialog=h,this.snackBar=u,this.hostClass="dialog-component",this.#e=(0,p.d)(o.y),this.#t=(0,p.d)(l.c),this.#o=(0,F.C)(this.#t.getParams(["guid","part","index"]),a=>({guid:a.guid,part:a.part,index:parseInt(a.index,10)})),this.isAddMode=(0,D.KX)("isAddMode",!!this.#t.getQueryParam("add")),this.filterText=(0,r.geq)(""),this.#n=(0,D.KX)("options",[]),this.options=(0,D.bo)("filteredOptions",()=>{const a=this.filterText().toLocaleLowerCase();return this.#n().filter(f=>f.label.toLocaleLowerCase().includes(a))}),this.hasSelection=(0,D.bo)("isMatch",()=>this.options().map(a=>a.label).includes(this.filterText()))}#o;#i;#n;ngOnInit(){this.#a(!1,null),this.#t.doOnDialogClosed(()=>{const u=this.#t.router.getCurrentNavigation().extras?.state,a=u?.[Object.keys(u)[0]];this.#a(!0,a)})}closeDialog(){this.dialog.close()}select(h){this.filterText.set(h.option.value)}copySelected(){const h=this.#s(),u={items:[m.c.copy(this.#i,h.id)]},a=(0,i.s)(u);this.#t.navRelative([`edit/${a}`])}save(){this.snackBar.open("Saving...");const h=this.#s();this.#e.saveItem(h).subscribe(()=>{this.snackBar.open("Saved",null,{duration:2e3}),this.closeDialog()})}#a(h,u){const a=this.#s();this.#e.getItemsPromise(a).then(f=>{const A=Object.entries(f.Items).map(([C,K])=>({id:parseInt(C,10),label:`${K} (${C})`}));if(this.#n.set(A),!a.add&&!h||null!=u){const C=h?u:f.SelectedId,K=this.#n().find(j=>j.id===C)?.label||"";this.filterText.set(K)}this.#i=f.ContentTypeName})}#s(){const h=this.filterText();return{id:this.#n().find(f=>f.label===h)?.id??null,...this.#o,add:this.isAddMode()}}static#r=this.\u0275fac=function(u){return new(u||E)(t.rXU(I.k),t.rXU(s.UG))};static#l=this.\u0275cmp=t.VBU({type:E,selectors:[["app-replace-content"]],hostVars:1,hostBindings:function(u,a){2&u&&t.Avn("className",a.hostClass)},inputs:{filterText:[1,"filterText"]},outputs:{filterText:"filterTextChange"},decls:25,vars:10,consts:[["auto","matAutocomplete"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"eav-options-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","matAutocomplete","ngModel"],[3,"optionSelected","hideSingleSelectionIndicator"],["itemSize","48","minBufferPx","500","maxBufferPx","1000"],[3,"value",4,"cdkVirtualFor","cdkVirtualForOf"],["mat-icon-button","","tippy","Copy",3,"click","disabled"],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],[3,"value"]],template:function(u,a){if(1&u){const f=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.k0s()(),t.j41(4,"div",4),t.nrm(5,"router-outlet"),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"div",5)(9,"mat-form-field",6)(10,"mat-label"),t.EFF(11,"Choose item"),t.k0s(),t.j41(12,"input",7),t.mxI("ngModelChange",function(C){return e.eBV(f),t.DH7(a.filterText,C)||(a.filterText=C),e.Njj(C)}),t.k0s(),t.j41(13,"mat-autocomplete",8,0),t.bIt("optionSelected",function(C){return e.eBV(f),e.Njj(a.select(C))}),t.j41(15,"cdk-virtual-scroll-viewport",9),t.DNE(16,y,2,2,"mat-option",10),t.k0s()()(),t.j41(17,"button",11),t.bIt("click",function(){return e.eBV(f),e.Njj(a.copySelected())}),t.j41(18,"mat-icon"),t.EFF(19,"file_copy"),t.k0s()()()(),t.j41(20,"mat-dialog-actions",12)(21,"button",13),t.bIt("click",function(){return e.eBV(f),e.Njj(a.closeDialog())}),t.EFF(22,"Cancel"),t.k0s(),t.j41(23,"button",14),t.bIt("click",function(){return e.eBV(f),e.Njj(a.save())}),t.EFF(24,"Save"),t.k0s()()()}if(2&u){const f=t.sdS(14);t.R7$(3),t.JRh(a.isAddMode()?"Add Existing Item":"Replace Content Item"),t.R7$(4),t.SpI("",a.isAddMode()?"Select a content-item to add to this list.":"By replacing a content-item you can make other content appear in the slot of the original content."," "),t.R7$(5),t.Y8G("matAutocomplete",f),t.R50("ngModel",a.filterText),t.R7$(),t.Y8G("hideSingleSelectionIndicator",!0),t.R7$(2),t.xc7("height",a.options().length<6?48*a.options().length:240,"px"),t.R7$(),t.Y8G("cdkVirtualForOf",a.options()),t.R7$(),t.Y8G("disabled",!a.hasSelection()),t.R7$(6),t.Y8G("disabled",!a.hasSelection())}},dependencies:[B.n3,W.M,g.j,g.M,T.fS,T.fg,_.jL,_.$3,M.M,_.pN,d.YN,d.me,d.BC,d.vS,c.d6,c.yg,c.E$,R.M,P.Hl,P.$z,S.M,O.m_,O.An,I.M],styles:[".eav-options-box[_ngcontent-%COMP%]{display:flex;align-items:flex-end}"]})}return E})()},4979:(L,v,n)=>{n.d(v,{V:()=>d});var c=n(27092),r=n(44444);let d=(()=>{class _{constructor(){this.subscriptions=new c.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(I){return new(I||_)};static#t=this.\u0275prov=r.jDH({token:_,factory:_.\u0275fac})}return _})()},13620:(L,v,n)=>{function c(d,_){return _(d)}function r(d,_){return _(d)}n.d(v,{C:()=>c,z:()=>r})},60852:(L,v,n)=>{n.d(v,{c:()=>B});var c=n(29658),r=n(51567),d=n(63037),_=n(70271),P=n(5057),R=n(98764),I=n(34435),W=n(4979),O=n(44444);const T={doOnDialogClosed:!0};let B=(()=>{class p extends W.V{constructor(o,i){super(),this.router=o,this.route=i,this.log=(0,I.Tq)({DialogRoutingService:p},T)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}get urlSegments(){return this.router.url.split("/")}getParam(o){return this.route.snapshot.paramMap.get(o)}getParams(o){const i=this.route.snapshot.paramMap;return o.reduce((m,l)=>(m[l]=i.get(l),m),{})}getQueryParam(o){return this.route.snapshot.queryParamMap.get(o)}getQueryParams(o){const i=this.route.snapshot.queryParamMap;return o.reduce((m,l)=>(m[l]=i.get(l),m),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(o){const i=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(m=>(i.a("Dialog closed",{data:m}),o()))),i.end()}doOnDialogClosedWithData(o){const i=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.#e().subscribe(({state:m})=>{i.a("Dialog closed",{state:m}),o(m)})),i.end()}urlSubRoute(o){const i=this.router.createUrlTree([o],{relativeTo:this.route});return this.router.serializeUrl(i)}navPath(o,i){return this.router.navigate([o],i)}navRelative(o,i){return this.router.navigate(o,{...i,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,r.p)(o=>o instanceof c.wF),(0,d.Z)(!!this.route.snapshot.firstChild),(0,_.T)(()=>!!this.route.snapshot.firstChild),(0,P.J)(),(0,r.p)(([o,i])=>o&&!i))}#e(){return this.router.events.pipe((0,r.p)(o=>o instanceof c.wF),(0,R.M)(o=>{const i=this.log.fn("childDialogClosed$",{event:o,firstChild:this.route.snapshot.firstChild,snapShot:this.route.snapshot,state:this.router.getCurrentNavigation()?.extras.state});i.a("NavigationEnd",{event:o}),i.end()}),(0,d.Z)(!!this.route.snapshot.firstChild),(0,_.T)(()=>({hasChildNow:!!this.route.snapshot.firstChild,state:this.router.getCurrentNavigation()?.extras.state})),(0,P.J)(),(0,r.p)(([o,i])=>o.hasChildNow&&!i.hasChildNow),(0,_.T)(([o,i])=>({hadChildBefore:o.hasChildNow,hasChildNow:i.hasChildNow,state:i.state})))}static#t=this.\u0275fac=function(i){return new(i||p)(O.KVO(c.Ix),O.KVO(c.nX))};static#o=this.\u0275prov=O.jDH({token:p,factory:p.\u0275fac})}return p})()},93840:(L,v,n)=>{n.d(v,{An:()=>i,m_:()=>m});var c=n(99293),r=n(44444),d=n(37580),_=n(27092),P=n(64334),R=n(50069),I=n(8126);const W=["*"],O=new r.nKC("MAT_ICON_DEFAULT_OPTIONS"),T=new r.nKC("mat-icon-location",{providedIn:"root",factory:function B(){const l=(0,r.WQX)(r.qQL),D=l?l.location:null;return{getPathname:()=>D?D.pathname+D.search:""}}}),p=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],F=p.map(l=>`[${l}]`).join(", "),o=/^url\(['"]?#(.*?)['"]?\)$/;let i=(()=>{class l{_elementRef=(0,r.WQX)(c.aKT);_iconRegistry=(0,r.WQX)(R.M);_location=(0,r.WQX)(T);_errorHandler=(0,r.WQX)(r.zcH);_defaultColor;get color(){return this._color||this._defaultColor}set color(t){this._color=t}_color;inline=!1;get svgIcon(){return this._svgIcon}set svgIcon(t){t!==this._svgIcon&&(t?this._updateSvgIcon(t):this._svgIcon&&this._clearSvgElement(),this._svgIcon=t)}_svgIcon;get fontSet(){return this._fontSet}set fontSet(t){const e=this._cleanupFontValue(t);e!==this._fontSet&&(this._fontSet=e,this._updateFontIconClasses())}_fontSet;get fontIcon(){return this._fontIcon}set fontIcon(t){const e=this._cleanupFontValue(t);e!==this._fontIcon&&(this._fontIcon=e,this._updateFontIconClasses())}_fontIcon;_previousFontSetClass=[];_previousFontIconClass;_svgName;_svgNamespace;_previousPath;_elementsWithExternalReferences;_currentIconFetch=_.yU.EMPTY;constructor(){const t=(0,r.WQX)(new d.ES_("aria-hidden"),{optional:!0}),e=(0,r.WQX)(O,{optional:!0});e&&(e.color&&(this.color=this._defaultColor=e.color),e.fontSet&&(this.fontSet=e.fontSet)),t||this._elementRef.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(t){if(!t)return["",""];const e=t.split(":");switch(e.length){case 1:return["",e[0]];case 2:return e;default:throw Error(`Invalid icon name: "${t}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const t=this._elementsWithExternalReferences;if(t&&t.size){const e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(t){this._clearSvgElement();const e=this._location.getPathname();this._previousPath=e,this._cacheChildrenWithExternalReferences(t),this._prependPathToReferences(e),this._elementRef.nativeElement.appendChild(t)}_clearSvgElement(){const t=this._elementRef.nativeElement;let e=t.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();e--;){const s=t.childNodes[e];(1!==s.nodeType||"svg"===s.nodeName.toLowerCase())&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const t=this._elementRef.nativeElement,e=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>t.classList.remove(s)),e.forEach(s=>t.classList.add(s)),this._previousFontSetClass=e,this.fontIcon!==this._previousFontIconClass&&!e.includes("mat-ligature-font")&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(t){return"string"==typeof t?t.trim().split(" ")[0]:t}_prependPathToReferences(t){const e=this._elementsWithExternalReferences;e&&e.forEach((s,g)=>{s.forEach(M=>{g.setAttribute(M.name,`url('${t}#${M.value}')`)})})}_cacheChildrenWithExternalReferences(t){const e=t.querySelectorAll(F),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let g=0;g<e.length;g++)p.forEach(M=>{const S=e[g],y=S.getAttribute(M),U=y?y.match(o):null;if(U){let E=s.get(S);E||(E=[],s.set(S,E)),E.push({name:M,value:U[1]})}})}_updateSvgIcon(t){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),t){const[e,s]=this._splitIconName(t);e&&(this._svgNamespace=e),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,e).pipe((0,P.s)(1)).subscribe(g=>this._setSvgElement(g),g=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${e}:${s}! ${g.message}`))})}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=c.VBU({type:l,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(e,s){2&e&&(c.BMQ("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),c.HbH(s.color?"mat-"+s.color:""),c.AVh("mat-icon-inline",s.inline)("mat-icon-no-color","primary"!==s.color&&"accent"!==s.color&&"warn"!==s.color))},inputs:{color:"color",inline:[2,"inline","inline",d.L39],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],ngContentSelectors:W,decls:1,vars:0,template:function(e,s){1&e&&(c.NAR(),c.SdG(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color, inherit)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0})}return l})(),m=(()=>{class l{static \u0275fac=function(e){return new(e||l)};static \u0275mod=c.$C({type:l});static \u0275inj=r.G2t({imports:[I.M,I.M]})}return l})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.03/dist/ng-edit/projects_eav-ui_src_app_replace-content_replace-content_component_ts.28bc247d551040e4.js.map