"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts"],{320:(A,u,t)=>{t.d(u,{t:()=>s});var e=t(1772),m=t(6474),c=t(1659);let s=(()=>{class o extends m.D{getAppInfo(i){return this.getSignal("admin/app/Statistics",{params:{appid:this.appId,zoneId:this.zoneId}},i)}exportAppUrl(){return`${this.apiUrl(`${e.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:i,resetAppGuid:a,withFiles:h}){return this.getHttpApiUrl("admin/app/SaveData",{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:i.toString(),resetAppGuid:a.toString(),withPortalFiles:h.toString()}})}static{this.\u0275fac=(()=>{let i;return function(h){return(i||(i=c.xGo(o)))(h||o)}})()}static{this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac})}}return o})()},693:(A,u,t)=>{function e(c){return new Promise((l,_)=>{const s=new FileReader;s.readAsDataURL(c),s.onload=()=>{l(s.result.split(",")[1])},s.onerror=o=>{_(o)}})}function m(c){return new Promise((l,_)=>{const s=new FileReader;s.readAsText(c),s.onload=()=>{l(s.result)},s.onerror=o=>{_(o)}})}t.d(u,{d:()=>m,n:()=>e})},1475:(A,u,t)=>{t.d(u,{j:()=>_});var e=t(6474),m=t(8624),c=t(1659);let _=(()=>{class s extends e.D{getContentInfo(d,i){return this.getSignal("admin/appParts/get",{params:{appid:this.appId,zoneId:this.zoneId,scope:d}},i)}exportParts(d,i,a){const h=this.apiUrl(m.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+d.join(";")+"&entityIdsString="+i.join(";")+"&templateIdsString="+a.join(";");window.open(h,"_blank","")}static{this.\u0275fac=(()=>{let d;return function(a){return(d||(d=c.xGo(s)))(a||s)}})()}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac})}}return s})()},1772:(A,u,t)=>{t.d(u,{I:()=>o,u:()=>s});var e=t(6647),m=t(9452),c=t(3550),l=t(6474),_=t(1659);const s="admin/app/";let o=(()=>{class d extends l.D{importApp(a,h,v=!1){const n=new FormData;return n.append("File",a),n.append("Name",h??""),this.http.post(this.apiUrl(s+"Import"),n,{params:{zoneId:this.zoneId}}).pipe((0,e.n)(p=>{if(v&&p.Messages[0]?.MessageType===c.G1.Warning){const r=prompt(p.Messages[0].Text+" Would you like to install it using another folder name?");if(r)return this.importApp(a,r,!0)}return(0,m.of)(p)}))}static{this.\u0275fac=(()=>{let a;return function(v){return(a||(a=_.xGo(d)))(v||d)}})()}static{this.\u0275prov=_.jDH({token:d,factory:d.\u0275fac})}}return d})()},2570:(A,u,t)=>{t.d(u,{y:()=>i});var e=t(6474),m=t(1659);let i=(()=>{class a extends e.D{getAll(){return this.getSignal("admin/view/all",{params:{appId:this.appId}})}delete(v){return this.getHttpApiUrl("admin/view/delete",{params:{appId:this.appId,Id:v.toString()}})}import(v){const n=new FormData;return n.append("File",v),this.http.post(this.apiUrl("admin/view/import"),n,{params:{appId:this.appId,zoneId:this.zoneId}})}export(v){const n=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+v;window.open(n,"_blank","")}getPolymorphism(){return this.getSignal("admin/view/polymorphism",{params:{appId:this.appId}})}getUsage(v){return this.getSignal("admin/view/usage",{params:{appId:this.appId,guid:v}})}static{this.\u0275fac=(()=>{let v;return function(p){return(v||(v=m.xGo(a)))(p||a)}})()}static{this.\u0275prov=m.jDH({token:a,factory:a.\u0275fac})}}return a})()},4839:(A,u,t)=>{t.d(u,{c:()=>s});var e=t(4435),m=t(8873),c=t(1659),l=t(6443);const _={all:!1,getAvailableEntities:!1,getEntities:!1};let s=(()=>{class o{constructor(i,a){this.http=i,this.context=a,this.log=(0,e.Tq)({QueryService:o},_)}getFromQuery(i,a,h,v){this.log.fnIf("getAvailableEntities",{queryUrl:i,params:a,fields:h,entitiesFilter:v});const n=!!a,I=(((a?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(n?`&${a}`:"")+"&$select="+(h??"")).substring(1);return this.http.post(`app/auto/query/${i}?${I}`,{Guids:v})}getEntities({contentTypes:i,itemIds:a,fields:h,log:v}){this.log.fnIf("getEntities",{log:v,contentTypes:i,itemIds:a,fields:h});const p=("&typeNames="+(i?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(a?.join(",")??"")+"&$select="+(h??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${p}`,{})}static{this.\u0275fac=function(a){return new(a||o)(c.KVO(l.Qq),c.KVO(m.o))}}static{this.\u0275prov=c.jDH({token:o,factory:o.\u0275fac})}}return o})()},4979:(A,u,t)=>{t.d(u,{V:()=>c});var e=t(7092),m=t(1659);let c=(()=>{class l{constructor(){this.subscriptions=new e.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(o){return new(o||l)}}static{this.\u0275prov=m.jDH({token:l,factory:l.\u0275fac})}}return l})()},5445:(A,u,t)=>{t.d(u,{Cu:()=>s.Cu,JL:()=>s.JL,Mk:()=>s.Mk,X6:()=>m.X,ei:()=>s.ei,gs:()=>m.g,tr:()=>e.t,vN:()=>s.vN,xR:()=>s.xR,y0:()=>o.y});var e=t(1479),m=t(7693),s=(t(1475),t(320),t(8624),t(6460)),o=t(2570)},6460:(A,u,t)=>{t.d(u,{Cu:()=>g,JL:()=>I,Mk:()=>p,ei:()=>r,vN:()=>P,xR:()=>C});var e=t(6443),m=t(4600),c=t(6647),l=t(271),_=t(693),s=t(4435),o=t(9234),d=t(6474),i=t(1659);const a={all:!0,getAll:!1,getAllSig:!0,getAllRes:!0,importQuery:!1,clonePipeline:!1,delete:!1,update:!1},p="admin/query/Run",r="admin/query/DebugStream",g="admin/query/Save",I="admin/query/Get",P="admin/query/DataSources";let C=(()=>{class D extends d.D{constructor(){super(...arguments),this.log=(0,s.Tq)({PipelinesService:D},a)}getAll(M){return this.log.fnIf("getAll").r(this.getHttpApiUrl(o.Gg,{params:{appId:this.appId,contentType:M}}))}getAllSig(M,y){const E=this.log.fnIf("getAllSig"),O=this.getSignal(o.Gg,{params:{appId:this.appId,contentType:M}},y);return E.r(O)}getAllRes(M,y){const E=this.log.fnIf("getAllRes"),O=(0,e.fx)(()=>({url:o.Gg,params:{appId:this.appId,contentType:M}}),{defaultValue:y});return E.r(O)}importQuery(M){const y=this.log.fnIf("importQuery"),E=(0,m.H)((0,_.n)(M)).pipe((0,c.n)(O=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:O})),(0,l.T)(O=>({Success:O,Messages:[]})));return y.r(E)}clonePipeline(M){const y=this.log.fnIf("clonePipeline"),E=this.getHttpApiUrl("admin/query/Clone",{params:{Id:M.toString(),appId:this.appId}});return y.r(E)}delete(M){const y=this.log.fnIf("delete"),E=this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:M.toString()}});return y.r(E)}static{this.\u0275fac=(()=>{let M;return function(E){return(M||(M=i.xGo(D)))(E||D)}})()}static{this.\u0275prov=i.jDH({token:D,factory:D.\u0275fac})}}return D})()},7693:(A,u,t)=>{t.d(u,{X:()=>l,g:()=>v});var e=t(1659),m=t(271),c=t(6474);const l="admin/type/",_="admin/type/get",s="admin/type/list",o="admin/type/scopes";let v=(()=>{class n extends c.D{retrieveContentType(r){return this.getHttpApiUrl(_,{params:{appId:this.appId,contentTypeId:r}})}getTypeSig(r,g){return this.getSignal(_,{params:{appId:this.appId,contentTypeId:r}},g)}retrieveContentTypes(r){return this.getHttpApiUrl(s,{params:{appId:this.appId,scope:r}})}getTypesSig(r,g){return this.getSignal(s,{params:{appId:this.appId,scope:r}},g)}getScopes(){return this.getHttpApiUrl(o,{params:{appId:this.appId}}).pipe((0,m.T)(r=>{const g=r.old;return Object.keys(g).map(P=>({name:g[P],value:P}))}))}getScopesSig(r){const g=this.getSignal(o,{params:{appId:this.appId}},r);return(0,e.EWP)(()=>{const P=g();if(!P||!P.old)return[];const C=P.old;return Object.keys(C).map(D=>({name:C[D],value:D}))})}getScopesV2(){return this.getHttpApiUrl(o,{params:{appId:this.appId}}).pipe((0,m.T)(r=>r.scopes))}save(r){return this.http.post(this.apiUrl("admin/type/save"),r,{params:{appid:this.appId}})}delete(r){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:r.NameId}})}import(r){const g=new FormData;for(const I of r)g.append("File",I);return this.http.post(this.apiUrl("admin/type/import"),g,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(r){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceNameId:r}})}static{this.\u0275fac=(()=>{let r;return function(I){return(r||(r=e.xGo(n)))(I||n)}})()}static{this.\u0275prov=e.jDH({token:n,factory:n.\u0275fac})}}return n})()},7756:(A,u,t)=>{t.r(u),t.d(u,{AppsManagementNavComponent:()=>y});var e=t(1659),m=t(4175),c=t(3840),l=t(7049),_=t(9552),s=t(2159),o=t(3011),d=t(2938),i=t(5445),a=t(1808),h=t(5699),v=t(8471),n=t(8873);const p=[{name:"System",path:"system",icon:"settings",tippy:"System Info",child:[{name:"Register",path:"registration",icon:"how_to_reg",tippy:"Register this System on 2sxc Patrons"}]},{name:"Apps",path:"list",icon:"star",tippy:"Apps"},{name:"Languages",path:"languages",icon:"translate",tippy:"Languages"},{name:"Extensions / Features",path:"license",icon:"tune",tippy:"Extensions and Features"}];var r=t(7941),g=t(7912);const I=["sidenav"],P=(E,O)=>O.path;function C(E,O){if(1&E&&(e.j41(0,"mat-icon",13),e.EFF(1,"chevron_right"),e.k0s(),e.EFF(2)),2&E){const f=e.XpG().$implicit;e.R7$(2),e.SpI(" ",f," ")}}function D(E,O){if(1&E&&(e.qex(0),e.DNE(1,C,3,1),e.bVm()),2&E){const f=O.last;e.R7$(),e.vxM(f?1:-1)}}function R(E,O){}function M(E,O){1&E&&e.nrm(0,"app-nav-item-list",10),2&E&&e.Y8G("navItem",O.$implicit)}let y=(()=>{class E{#t;#e;constructor(f,T,U){this.dialog=f,this.context=T,this.media=U,this.#t=(0,e.WQX)(i.tr),this.zoneId=this.context.zoneId,this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=p,this.#e=(0,d.d)(v.c)}ngOnInit(){this.fetchDialogSettings(),this.#e.doOnDialogClosed(()=>this.fetchDialogSettings()),this.smallScreen.addEventListener("change",f=>(this.sidenav.opened=!f.matches,this.sidenav.mode=f.matches?"over":"side"))}closeDialog(){this.dialog.close()}fetchDialogSettings(){this.#t.getShared$(0).subscribe()}static{this.\u0275fac=function(T){return new(T||E)(e.rXU(r.CP),e.rXU(n.o),e.rXU(g.DY))}}static{this.\u0275cmp=e.VBU({type:E,selectors:[["app-apps-management-nav"]],viewQuery:function(T,U){if(1&T&&e.GBs(I,5),2&T){let x;e.mGM(x=e.lsd())&&(U.sidenav=x.first)}},decls:26,vars:4,consts:[["emptyTemplate",""],["sidenav",""],["appToggleDebug",""],[1,"toolbar-container"],[1,"menu-container",3,"click"],[3,"separator"],[4,"xngBreadcrumbItem"],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],[3,"navItem"],[1,"sideNav-bottom-info"],[1,"container-content"],[1,"breadcrumb-icon"]],template:function(T,U){if(1&T){const x=e.RV6();e.j41(0,"mat-toolbar",2)(1,"div",3)(2,"mat-icon",4),e.bIt("click",function(){e.eBV(x);const B=e.sdS(17);return e.Njj(B.opened=!B.opened)}),e.EFF(3,"menu"),e.k0s(),e.j41(4,"div")(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"xng-breadcrumb",5),e.DNE(8,D,2,1,"ng-container",6),e.k0s(),e.DNE(9,R,0,0,"ng-template",null,0,e.C5r),e.k0s(),e.nrm(11,"span",7),e.j41(12,"button",8),e.bIt("click",function(){return e.eBV(x),e.Njj(U.closeDialog())}),e.j41(13,"mat-icon"),e.EFF(14,"close"),e.k0s()()(),e.j41(15,"mat-sidenav-container",2)(16,"mat-sidenav",9,1),e.Z7z(18,M,1,1,"app-nav-item-list",10,P),e.j41(20,"div",11)(21,"p"),e.EFF(22,"use Burger icon to show/hide menu"),e.k0s()()(),e.j41(23,"mat-sidenav-content")(24,"div",12),e.nrm(25,"router-outlet"),e.k0s()()()}if(2&T){const x=e.sdS(10);e.R7$(6),e.SpI(" Manage Zone ",U.zoneId," "),e.R7$(),e.Y8G("separator",x),e.R7$(9),e.Y8G("mode",U.smallScreen.matches?"over":"side")("opened",U.sideNavOpened),e.R7$(2),e.Dyx(U.navItems)}},dependencies:[_.s5,_.KQ,c.m_,c.An,o._S,o.Dg,o._Y,m.Hl,m.iY,l.vg,l.LG,l.US,l.El,s.n3,a.a,h.V],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]   .mat-icon-admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}  .mat-drawer-container{background-color:transparent!important}"]})}}return E})()},8471:(A,u,t)=>{t.d(u,{c:()=>a});var e=t(2159),m=t(1567),c=t(3037),l=t(271),_=t(5057),s=t(4435),o=t(4979),d=t(1659);const i={doOnDialogClosed:!0};let a=(()=>{class h extends o.V{constructor(n,p){super(),this.router=n,this.route=p,this.log=(0,s.Tq)({DialogRoutingService:h},i)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}get urlSegments(){return this.router.url.split("/")}getParam(n){return this.route.snapshot.paramMap.get(n)}getParams(n){const p=this.route.snapshot.paramMap;return n.reduce((r,g)=>(r[g]=p.get(g),r),{})}getQueryParam(n){return this.route.snapshot.queryParamMap.get(n)}getQueryParams(n){const p=this.route.snapshot.queryParamMap;return n.reduce((r,g)=>(r[g]=p.get(g),r),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(n){const p=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>n())),p.end()}urlSubRoute(n){const p=this.router.createUrlTree([n],{relativeTo:this.route});return this.router.serializeUrl(p)}navPath(n,p){return this.router.navigate([n],p)}navRelative(n,p){return this.router.navigate(n,{...p,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,m.p)(n=>n instanceof e.wF),(0,c.Z)(!!this.route.snapshot.firstChild),(0,l.T)(()=>!!this.route.snapshot.firstChild),(0,_.J)(),(0,m.p)(([n,p])=>n&&!p))}static{this.\u0275fac=function(p){return new(p||h)(d.KVO(e.Ix),d.KVO(e.nX))}}static{this.\u0275prov=d.jDH({token:h,factory:h.\u0275fac})}}return h})()},8624:(A,u,t)=>{t.d(u,{Q:()=>l,S:()=>_});var e=t(1772),m=t(6474),c=t(1659);const l="admin/appParts/";let _=(()=>{class s extends m.D{importAppParts(d){const i=new FormData;return i.append("File",d),this.http.post(this.apiUrl(l+"Import"),i,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(d){return this.http.post(this.apiUrl(e.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:d.toString()}})}static{this.\u0275fac=(()=>{let d;return function(a){return(d||(d=c.xGo(s)))(a||s)}})()}static{this.\u0275prov=c.jDH({token:s,factory:s.\u0275fac})}}return s})()},9234:(A,u,t)=>{t.d(u,{Gg:()=>v,Tr:()=>n,gb:()=>h});var e=t(1567),m=t(6647),c=t(6301),l=t(271),_=t(2938),s=t(4435),o=t(6474),d=t(4839),i=t(1659);const a={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},h="admin/entity/",v="admin/entity/list";let n=(()=>{class p extends o.D{constructor(){super(...arguments),this.log=(0,s.Tq)({EntityService:p},a),this.queryService=(0,_.d)(d.c)}getEntities$(g){return this.log.fnIf("getEntities"),g.pipe((0,e.p)(I=>null!=I),(0,m.n)(I=>this.getAvailableEntities(I.contentTypeName).pipe((0,c.t)(1))))}getAvailableEntities(g,I){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[g],itemIds:I,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,l.T)(C=>C.Default))}delete(g,I,P,C,D,R){return this.log.fnIf("delete",{appId:g,contentType:I,entityId:P,force:C,parentId:D,parent}),this.http.delete(this.apiUrl(h+"delete"),{params:{contentType:I,id:P.toString(),appId:g,force:C.toString(),...D&&{parentId:D.toString()},...D&&R&&{parentField:R}}})}static{this.\u0275fac=(()=>{let g;return function(P){return(g||(g=i.xGo(p)))(P||p)}})()}static{this.\u0275prov=i.jDH({token:p,factory:p.\u0275fac})}}return p})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.03/dist/ng-edit/projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.c7e25db5e52d5d26.js.map