"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"],{1134:(b,D,s)=>{s.d(D,{D6:()=>C,LG:()=>g});var t=s(1659),e=s(316),f=s(4646);const c=["determinateSpinner"];function v(h,R){if(1&h&&(t.qSk(),t.j41(0,"svg",11),t.nrm(1,"circle",12),t.k0s()),2&h){const i=t.XpG();t.BMQ("viewBox",i._viewBox()),t.R7$(),t.xc7("stroke-dasharray",i._strokeCircumference(),"px")("stroke-dashoffset",i._strokeCircumference()/2,"px")("stroke-width",i._circleStrokeWidth(),"%"),t.BMQ("r",i._circleRadius())}}const m=new t.nKC("mat-progress-spinner-default-options",{providedIn:"root",factory:function _(){return{diameter:o}}}),o=100;let g=(()=>{class h{_elementRef=(0,t.WQX)(t.aKT);_noopAnimations;get color(){return this._color||this._defaultColor}set color(i){this._color=i}_color;_defaultColor="primary";_determinateCircle;constructor(){const i=(0,t.WQX)(t.bc$,{optional:!0}),l=(0,t.WQX)(m);this._noopAnimations="NoopAnimations"===i&&!!l&&!l._forceAnimations,this.mode="mat-spinner"===this._elementRef.nativeElement.nodeName.toLowerCase()?"indeterminate":"determinate",l&&(l.color&&(this.color=this._defaultColor=l.color),l.diameter&&(this.diameter=l.diameter),l.strokeWidth&&(this.strokeWidth=l.strokeWidth))}mode;get value(){return"determinate"===this.mode?this._value:0}set value(i){this._value=Math.max(0,Math.min(100,i||0))}_value=0;get diameter(){return this._diameter}set diameter(i){this._diameter=i||0}_diameter=o;get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(i){this._strokeWidth=i||0}_strokeWidth;_circleRadius(){return(this.diameter-10)/2}_viewBox(){const i=2*this._circleRadius()+this.strokeWidth;return`0 0 ${i} ${i}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return"determinate"===this.mode?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static \u0275fac=function(l){return new(l||h)};static \u0275cmp=t.VBU({type:h,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(l,d){if(1&l&&t.GBs(c,5),2&l){let M;t.mGM(M=t.lsd())&&(d._determinateCircle=M.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(l,d){2&l&&(t.BMQ("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow","determinate"===d.mode?d.value:null)("mode",d.mode),t.HbH("mat-"+d.color),t.xc7("width",d.diameter,"px")("height",d.diameter,"px")("--mdc-circular-progress-size",d.diameter+"px")("--mdc-circular-progress-active-indicator-width",d.diameter+"px"),t.AVh("_mat-animation-noopable",d._noopAnimations)("mdc-circular-progress--indeterminate","indeterminate"===d.mode))},inputs:{color:"color",mode:"mode",value:[2,"value","value",t.Udg],diameter:[2,"diameter","diameter",t.Udg],strokeWidth:[2,"strokeWidth","strokeWidth",t.Udg]},exportAs:["matProgressSpinner"],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(l,d){if(1&l&&(t.DNE(0,v,2,8,"ng-template",null,0,t.C5r),t.j41(2,"div",2,1),t.qSk(),t.j41(4,"svg",3),t.nrm(5,"circle",4),t.k0s()(),t.joV(),t.j41(6,"div",5)(7,"div",6)(8,"div",7),t.eu8(9,8),t.k0s(),t.j41(10,"div",9),t.eu8(11,8),t.k0s(),t.j41(12,"div",10),t.eu8(13,8),t.k0s()()()),2&l){const M=t.sdS(1);t.R7$(4),t.BMQ("viewBox",d._viewBox()),t.R7$(),t.xc7("stroke-dasharray",d._strokeCircumference(),"px")("stroke-dashoffset",d._strokeDashOffset(),"px")("stroke-width",d._circleStrokeWidth(),"%"),t.BMQ("r",d._circleRadius()),t.R7$(4),t.Y8G("ngTemplateOutlet",M),t.R7$(2),t.Y8G("ngTemplateOutlet",M),t.R7$(2),t.Y8G("ngTemplateOutlet",M)}},dependencies:[e.T3],styles:[".mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0;position:relative;direction:ltr;transition:opacity 250ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width, 4px)}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none !important}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1;animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color, var(--mat-sys-primary))}@media(forced-colors: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}"],encapsulation:2,changeDetection:0})}return h})(),C=(()=>{class h{static \u0275fac=function(l){return new(l||h)};static \u0275mod=t.$C({type:h});static \u0275inj=t.G2t({imports:[f.yE]})}return h})()},2987:(b,D,s)=>{s.d(D,{n:()=>m});var t=s(271),e=s(3037),f=s(4205),c=s(1659),v=s(6443);let m=(()=>{class _{constructor(u){this.http=u,this.installSettingsSubject=new f.B,this.settings$=this.installSettingsSubject.asObservable(),this.settings$.pipe((0,t.T)(()=>!0),(0,e.Z)(!1)).subscribe()}loadGettingStarted(u){this.http.get(`sys/install/InstallSettings?isContentApp=${u}`).subscribe(g=>this.installSettingsSubject.next(g))}static{this.\u0275fac=function(g){return new(g||_)(c.KVO(v.Qq))}}static{this.\u0275prov=c.jDH({token:_,factory:_.\u0275fac})}}return _})()},3140:(b,D,s)=>{s.d(D,{J:()=>f});var t=s(7092),e=s(1659);let f=(()=>{class c{constructor(){this.subscriptions=new t.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(_){return new(_||c)}}static{this.\u0275dir=e.FsC({type:c})}}return c})()},3176:(b,D,s)=>{s.d(D,{$:()=>f});var t=s(7092),e=s(1659);let f=(()=>{class c{constructor(){this.subscriptions=new t.yU}ngOnDestroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(_){return new(_||c)}}static{this.\u0275cmp=e.VBU({type:c,selectors:[["app-base-component"]],decls:0,vars:0,template:function(_,o){},encapsulation:2})}}return c})()},3550:(b,D,s)=>{s.d(D,{jj:()=>J,G1:()=>U,HL:()=>k});var t=s(316),e=s(1659),f=s(4175),c=s(7941),v=s(1134),m=s(8537),_=s(1567),o=s(271),u=s(8764),g=s(6647),T=s(1318),C=s(9452),h=s(4334),R=s(2938),i=s(4575),l=s(9914),d=s(8873),M=s(2987),x=s(4147),S=s(3176);const U={Warning:0,Success:1,Error:2},k={App:0,AppPart:1,ContentType:2,ContentItem:3,Query:4,View:5};var A=s(3347),B=s(436);const I=["installerWindow"],w=(a,y,r)=>({"sxc-message-warning":a,"sxc-message-success":y,"sxc-message-error":r});function j(a,y){1&a&&e.nrm(0,"mat-spinner",6)}function W(a,y){1&a&&(e.j41(0,"div"),e.EFF(1,"Select or drop file"),e.k0s())}function $(a,y){if(1&a&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&a){const r=y.$implicit;e.R7$(),e.JRh(r.name)}}function L(a,y){if(1&a){const r=e.RV6();e.j41(0,"button",14),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.toggleShowAppCatalog())}),e.EFF(1," Get recommended Apps from Catalog "),e.k0s()}if(2&a){const r=e.XpG();e.Y8G("disabled",r.uploading())}}function G(a,y){1&a&&(e.j41(0,"div",15),e.EFF(1," Upload succeeded. See the messages below for more information. "),e.k0s())}function K(a,y){1&a&&(e.j41(0,"div",16),e.EFF(1," Upload failed. See the messages below for more information. "),e.k0s())}function N(a,y){if(1&a&&(e.j41(0,"div",17),e.EFF(1),e.k0s()),2&a){const r=y.$implicit,p=e.XpG(2);e.Y8G("ngClass",e.sMw(2,w,r.MessageType===p.FileUploadMessageTypes.Warning,r.MessageType===p.FileUploadMessageTypes.Success,r.MessageType===p.FileUploadMessageTypes.Error)),e.R7$(),e.SpI(" ",r.Text," ")}}function X(a,y){if(1&a&&(e.j41(0,"div",11),e.DNE(1,G,2,0,"div",15)(2,K,2,0,"div",16),e.Z7z(3,N,2,6,"div",17,e.fX1),e.k0s()),2&a){const r=e.XpG();e.R7$(),e.vxM(r.result().Success?1:-1),e.R7$(),e.vxM(r.result().Success?-1:2),e.R7$(),e.Dyx(r.result().Messages)}}function V(a,y){if(1&a&&e.nrm(0,"iframe",18,1),2&a){const r=e.XpG(2);e.Y8G("src",r.remoteInstallerUrl,e.f$h)}}function H(a,y){if(1&a&&(e.j41(0,"div",19),e.nrm(1,"mat-progress-spinner",20),e.j41(2,"span"),e.EFF(3),e.k0s()()),2&a){const r=e.XpG(2);e.R7$(),e.Y8G("mode","indeterminate"),e.R7$(2),e.SpI("Installing ",null==r.currentPackage?null:r.currentPackage.displayName,"..")}}function z(a,y){if(1&a&&e.DNE(0,V,2,1,"iframe",18)(1,H,4,2,"div",19),2&a){const r=e.XpG();e.vxM(r.ready?0:-1),e.R7$(),e.vxM(r.showProgress?1:-1)}}function Q(a,y){if(1&a){const r=e.RV6();e.j41(0,"button",21),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.closeDialog())}),e.EFF(1,"Cancel"),e.k0s(),e.j41(2,"button",22),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.upload())}),e.EFF(3," Upload "),e.k0s()}if(2&a){const r=e.XpG();e.R7$(2),e.Y8G("disabled",!r.files().length||r.uploading()||!!r.result())}}function Y(a,y){if(1&a){const r=e.RV6();e.j41(0,"button",23),e.bIt("click",function(){e.eBV(r);const n=e.XpG();return e.Njj(n.closeDialog(!0))}),e.EFF(1,"Close"),e.k0s()}}let J=(()=>{class a extends S.${constructor(r,p,n,E,O,F){super(),this.dialogData=r,this.dialog=p,this.snackBar=n,this.sanitizer=E,this.context=O,this.changeDetectorRef=F,this.hostClass="dialog-component",this.uploadType=(0,e.hFB)(),this.uploading=(0,e.vPA)(!1),this.showAppCatalog=(0,e.vPA)(!1),this.result=(0,e.vPA)(void 0),this.files=(0,e.vPA)([]),this.FileUploadMessageTypes=U,this.UploadTypes=k,this.showProgress=!1,this.remoteInstallerUrl="",this.ready=!1,this.installerService=(0,R.d)(x.e),this.installSettingsService=(0,R.d)(M.n),this.alreadyProcessing=!1,this.messages$=(0,m.R)(window,"message").pipe((0,_.p)(()=>!this.alreadyProcessing),(0,_.p)(P=>"https://2sxc.org"===P.origin),(0,o.T)(P=>{try{return JSON.parse(P.data)}catch(Z){return void console.error("error procesing message. Message was "+P.data,Z)}}),(0,_.p)(P=>P&&Number(P.moduleId)===this.context.moduleId)),this.subscriptions.add(this.installSettingsService.settings$.subscribe(P=>{this.settings=P,this.remoteInstallerUrl=this.sanitizer.bypassSecurityTrustResourceUrl(P.remoteUrl),this.ready=!0}))}ngOnInit(){null!=this.dialogData.files&&this.filesDropped(this.dialogData.files),this.installSettingsService.loadGettingStarted(!1),this.subscriptions.add(this.messages$.pipe((0,_.p)(r=>"specs"===r.action),(0,u.M)(()=>{const r=this.installerWindow.nativeElement,p={action:"specs",data:{installedApps:this.settings.installedApps,rules:this.settings.installedApps.map(E=>({target:"guid",appGuid:E.guid,mode:"f",url:""}))}},n=JSON.stringify(p);r.contentWindow.postMessage(n,"*"),console.log("debug: just sent specs message:"+n,p,r)})).subscribe()),this.subscriptions.add(this.messages$.pipe((0,_.p)(r=>"install"===r.action),(0,o.T)(r=>Object.values(r.packages)),(0,_.p)(r=>{const n=`Do you want to install these packages?\n\n${r.reduce((E,O)=>`${E} - ${O.displayName}\n`,"")}\nThis takes about 10 seconds per package. Don't reload the page while it's installing.`;return confirm(n)}),(0,g.n)(r=>(this.alreadyProcessing=!0,this.showProgress=!0,this.changeDetectorRef.detectChanges(),this.installerService.installPackages(r,p=>this.currentPackage=p))),(0,u.M)(()=>{this.showProgress=!1,this.changeDetectorRef.detectChanges(),alert("Installation complete \u{1f44d}"),window.top.location.reload()}),(0,T.W)(r=>(console.error("Error: ",r),this.showProgress=!1,this.alreadyProcessing=!1,this.changeDetectorRef.detectChanges(),alert(`An error occurred: Package ${this.currentPackage.displayName}\n\n${r.error?.Message??r.error?.message??""}\n\n${r.message}\n\nPlease try again later or check how to manually install content-templates: https://azing.org/2sxc/r/0O4OymoA`),(0,C.of)(r)))).subscribe())}ngOnDestroy(){super.ngOnDestroy()}closeDialog(r){this.dialog.close(r)}filesDropped(r){this.setFiles(r),this.upload()}filesChanged(r){const n=Array.from(r.target.files);this.setFiles(n)}upload(){this.uploading.set(!0),this.subscriptions.add(this.dialogData.upload$(this.files()).pipe((0,h.s)(1)).subscribe({next:r=>{this.uploading.set(!1),this.result.set(r)},error:()=>{this.uploading.set(!1),this.result.set(void 0),this.snackBar.open("Upload failed. Please check console for more information",void 0,{duration:3e3})}}))}toggleShowAppCatalog(){this.showAppCatalog.set(!this.showAppCatalog())}setFiles(r){this.dialogData.multiple||(r=r.slice(0,1)),this.files.set(r)}static{this.\u0275fac=function(p){return new(p||a)(e.rXU(c.Vh),e.rXU(c.CP),e.rXU(A.UG),e.rXU(B.up),e.rXU(d.o),e.rXU(e.gRc))}}static{this.\u0275cmp=e.VBU({type:a,selectors:[["app-file-upload-dialog"]],viewQuery:function(p,n){if(1&p&&e.GBs(I,5),2&p){let E;e.mGM(E=e.lsd())&&(n.installerWindow=E.first)}},hostVars:1,hostBindings:function(p,n){2&p&&e.Mr5("className",n.hostClass)},inputs:{uploadType:[1,"uploadType"]},features:[e.Vt3],decls:21,vars:15,consts:[["fileInput",""],["installerWindow",""],["appDragAndDrop","",1,"eav-dialog",3,"filesDropped","allowedFileTypes"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title",3,"innerHtml"],[1,"eav-dialog-content"],["mode","indeterminate","diameter","20","color","accent"],[3,"innerHtml"],["mat-raised-button","","tippy","Open file browser",3,"click","disabled"],["type","file","multiple","",1,"hide",3,"change"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button",3,"disabled"],[1,"eav-result-container"],["align","end"],["mat-raised-button","","color","accent"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button",3,"click","disabled"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],[1,"eav-app-catalog-iframe",3,"src"],[1,"eav-progress"],[3,"mode"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click","disabled"],["mat-raised-button","","color","accent",3,"click"]],template:function(p,n){if(1&p){const E=e.RV6();e.j41(0,"div",2),e.bIt("filesDropped",function(F){return e.eBV(E),e.Njj(n.filesDropped(F))}),e.j41(1,"div",3),e.nrm(2,"div",4),e.nI1(3,"safeHtml"),e.k0s(),e.j41(4,"div",5),e.DNE(5,j,1,0,"mat-spinner",6),e.nrm(6,"p",7),e.nI1(7,"safeHtml"),e.j41(8,"div")(9,"button",8),e.bIt("click",function(){e.eBV(E);const F=e.sdS(14);return e.Njj(F.click())}),e.DNE(10,W,2,0,"div"),e.Z7z(11,$,2,1,"div",null,e.fX1),e.k0s(),e.j41(13,"input",9,0),e.bIt("change",function(F){return e.eBV(E),e.Njj(n.filesChanged(F))}),e.k0s(),e.DNE(15,L,2,1,"button",10),e.k0s(),e.DNE(16,X,5,2,"div",11)(17,z,2,2),e.k0s(),e.j41(18,"mat-dialog-actions",12),e.DNE(19,Q,4,1)(20,Y,2,0,"button",13),e.k0s()()}if(2&p){let E,O;e.Y8G("allowedFileTypes",n.dialogData.allowedFileTypes),e.R7$(2),e.Y8G("innerHtml",e.bMT(3,11,n.dialogData.title),e.npT),e.R7$(3),e.vxM(n.uploading()?5:-1),e.R7$(),e.Y8G("innerHtml",e.bMT(7,13,n.dialogData.description),e.npT),e.R7$(3),e.Y8G("disabled",n.uploading()),e.R7$(),e.vxM(n.files().length?-1:10),e.R7$(),e.Dyx(n.files()),e.R7$(4),e.vxM(n.uploadType()==n.UploadTypes.App?15:-1),e.R7$(),e.vxM(n.result()?16:-1),e.R7$(),e.vxM(n.uploadType()==n.UploadTypes.App&&n.showAppCatalog()?17:-1),e.R7$(2),e.vxM(null!=(E=n.result())&&E.Success?-1:19),e.R7$(),e.vxM(null!=(O=n.result())&&O.Success?20:-1)}},dependencies:[t.YU,c.hM,c.E7,v.D6,v.LG,l.$,i.S,f.Hl,f.$z],styles:[".eav-result-container[_ngcontent-%COMP%]{margin-top:16px}.eav-app-catalog-button[_ngcontent-%COMP%]{margin-left:12px}.eav-app-catalog-iframe[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:500px;border:none}.eav-progress[_ngcontent-%COMP%]{position:absolute;left:0;top:0;height:100%;width:100%;background:#fffc;display:flex;justify-content:center;flex-direction:column;text-align:center}.eav-progress[_ngcontent-%COMP%]   mat-progress-spinner[_ngcontent-%COMP%]{margin:0 auto}.eav-progress[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{line-height:48px}"]})}}return a})()},4147:(b,D,s)=>{s.d(D,{e:()=>v});var t=s(6647),e=s(9452),f=s(1659),c=s(6443);let v=(()=>{class m{constructor(o){this.http=o}installPackages(o,u){return o.reduce((g,T)=>g.pipe((0,t.n)(()=>T.url?(u(T),this.http.post(`sys/install/RemotePackage?packageUrl=${T.url}`,{})):(0,e.of)(!0))),(0,e.of)(!0))}static{this.\u0275fac=function(u){return new(u||m)(f.KVO(c.Qq))}}static{this.\u0275prov=f.jDH({token:m,factory:m.\u0275fac})}}return m})()},4575:(b,D,s)=>{s.d(D,{S:()=>v});var t=s(1659),e=s(8537),f=s(3140),c=s(3347);let v=(()=>{class m extends f.J{constructor(o,u,g){super(),this.zone=u,this.snackBar=g,this.markStyle=(0,t.hFB)("outline"),this.allowedFileTypes=(0,t.hFB)(""),this.filesDropped=(0,t.CGW)(),this.dropAreaClass="eav-droparea",this.markStyleClass=(0,t.vPA)(""),this.dragClass="eav-dragover",this.timeouts=[],this.element=o.nativeElement}ngOnInit(){this.markStyleClass.set(`eav-droparea-${this.markStyle()}`),this.element.classList.add(this.dropAreaClass,this.markStyleClass()),this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,e.R)(this.element,"dragover").subscribe(o=>{o.preventDefault(),o.stopPropagation(),this.clearTimeouts(),this.element.classList.add(this.dragClass)})),this.subscriptions.add((0,e.R)(this.element,"dragleave").subscribe(o=>{o.preventDefault(),o.stopPropagation(),this.timeouts.push(window.setTimeout(()=>{this.element.classList.remove(this.dragClass)},50))}))})}ngOnDestroy(){this.clearTimeouts(),this.element.classList.remove(this.dropAreaClass,this.markStyleClass(),this.dragClass),super.ngOnDestroy()}onDrop(o){o.preventDefault(),o.stopPropagation(),this.clearTimeouts(),this.element.classList.remove(this.dragClass);let g=Array.from(o.dataTransfer.files);g=this.filterTypes(g,this.allowedFileTypes()),g.length>0&&this.filesDropped.emit(g)}clearTimeouts(){for(const o of this.timeouts)clearTimeout(o);this.timeouts=[]}filterTypes(o,u){if(""===u)return o;const g=u.split(",").map(C=>C.toLocaleLowerCase()),T=o.filter(C=>{const h=C.name.lastIndexOf(".");if(h<=0)return!1;const R=C.name.substring(h+1).toLocaleLowerCase();return g.includes(R)});if(o.length!==T.length){const C=this.allowedFileTypes().replace(/\,/g,", ");this.snackBar.open(T.length?"Some files were filtered out. This drop location only accepts file types: "+C:"This drop location only accepts file types: "+C,null,{duration:5e3})}return T}static{this.\u0275fac=function(u){return new(u||m)(t.rXU(t.aKT),t.rXU(t.SKi),t.rXU(c.UG))}}static{this.\u0275dir=t.FsC({type:m,selectors:[["","appDragAndDrop",""]],hostBindings:function(u,g){1&u&&t.bIt("drop",function(C){return g.onDrop(C)})},inputs:{markStyle:[1,"markStyle"],allowedFileTypes:[1,"allowedFileTypes"]},outputs:{filesDropped:"filesDropped"},features:[t.Vt3]})}}return m})()},8537:(b,D,s)=>{s.d(D,{R:()=>g});var t=s(2645),e=s(3942),f=s(1365),c=s(8830),v=s(1530),m=s(8067);const _=["addListener","removeListener"],o=["addEventListener","removeEventListener"],u=["on","off"];function g(i,l,d,M){if((0,v.T)(d)&&(M=d,d=void 0),M)return g(i,l,d).pipe((0,m.I)(M));const[x,S]=function R(i){return(0,v.T)(i.addEventListener)&&(0,v.T)(i.removeEventListener)}(i)?o.map(U=>k=>i[U](l,k,d)):function C(i){return(0,v.T)(i.addListener)&&(0,v.T)(i.removeListener)}(i)?_.map(T(i,l)):function h(i){return(0,v.T)(i.on)&&(0,v.T)(i.off)}(i)?u.map(T(i,l)):[];if(!x&&(0,c.X)(i))return(0,f.Z)(U=>g(U,l,d))((0,t.Tg)(i));if(!x)throw new TypeError("Invalid event target");return new e.c(U=>{const k=(...A)=>U.next(1<A.length?A:A[0]);return x(k),()=>S(k)})}function T(i,l){return d=>M=>i[d](l,M)}},9914:(b,D,s)=>{s.d(D,{$:()=>f});var t=s(1659),e=s(436);let f=(()=>{class c{constructor(m){this.sanitizer=m}transform(m){return this.sanitizer.bypassSecurityTrustHtml(m)}static{this.\u0275fac=function(_){return new(_||c)(t.rXU(e.up,16))}}static{this.\u0275pipe=t.EJ8({name:"safeHtml",type:c,pure:!0})}}return c})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.03/dist/ng-edit/default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts.312e73aa4b6f2b79.js.map