(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_-88708f","projects_ng-dialogs_src_app_shared_directives_click-stop-propagation_directive_ts"],{3979:function(t,n,e){"use strict";e.r(n),e.d(n,{ExportAppPartsComponent:function(){return O}});var o=e(4762),i=e(8512),p=e(1305),c=e(9996),r=e(9529),s=e(5803),a=e(1785),l=e(2935),u=e(3466),f=e(2832),g=e(1116),d=e(3070),h=e(3841),x=e(1041),_=e(7064),Z=e(4369),m=e(7512),T=e(7307),v=e(1271),A=e(7110),y=e(994);function C(t,n){if(1&t&&(a.TgZ(0,"mat-option",10),a._uU(1),a.qZA()),2&t){var e=n.$implicit;a.Q6J("value",e.value),a.xp6(1),a.hij(" ",e.name," ")}}function q(t,n){if(1&t&&(a.TgZ(0,"li",20),a.TgZ(1,"div",21),a.TgZ(2,"mat-checkbox",22),a.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),a.TgZ(3,"span",23),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){var e=n.$implicit;a.xp6(2),a.Q6J("ngModel",e._export),a.xp6(2),a.AsE("",e.Name," (",e.Id,")")}}function b(t,n){if(1&t&&(a.TgZ(0,"ul",25),a.TgZ(1,"p",26),a._uU(2,"Templates"),a.qZA(),a.YNc(3,q,5,3,"li",19),a.qZA()),2&t){var e=a.oxw().$implicit;a.xp6(3),a.Q6J("ngForOf",e.Templates)}}function k(t,n){if(1&t&&(a.TgZ(0,"li",20),a.TgZ(1,"div",21),a.TgZ(2,"mat-checkbox",22),a.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),a.TgZ(3,"span",23),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){var e=n.$implicit;a.xp6(2),a.Q6J("ngModel",e._export),a.xp6(2),a.AsE("",e.Title," (",e.Id,")")}}function I(t,n){if(1&t&&(a.TgZ(0,"ul",25),a.TgZ(1,"p",26),a._uU(2,"Entities"),a.qZA(),a.YNc(3,k,5,3,"li",19),a.qZA()),2&t){var e=a.oxw().$implicit;a.xp6(3),a.Q6J("ngForOf",e.Entities)}}function J(t,n){if(1&t&&(a.TgZ(0,"li",20),a.TgZ(1,"div",21),a.TgZ(2,"mat-checkbox",22),a.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),a.TgZ(3,"span",23),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.YNc(5,b,4,1,"ul",24),a.YNc(6,I,4,1,"ul",24),a.qZA()),2&t){var e=n.$implicit;a.xp6(2),a.Q6J("ngModel",e._export),a.xp6(2),a.AsE("",e.Name," (",e.Id,")"),a.xp6(1),a.Q6J("ngIf",e.Templates.length>0),a.xp6(1),a.Q6J("ngIf",e.Entities.length>0)}}function S(t,n){if(1&t&&(a.TgZ(0,"li",20),a.TgZ(1,"div",21),a.TgZ(2,"mat-checkbox",22),a.NdJ("ngModelChange",function(t){return n.$implicit._export=t}),a.TgZ(3,"span",23),a._uU(4),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&t){var e=n.$implicit;a.xp6(2),a.Q6J("ngModel",e._export),a.xp6(2),a.AsE("",e.Name," (",e.Id,")")}}function w(t,n){if(1&t&&(a.TgZ(0,"div"),a.TgZ(1,"ul",17),a.TgZ(2,"p",18),a._uU(3,"Content Types"),a.qZA(),a.YNc(4,J,7,5,"li",19),a.qZA(),a.TgZ(5,"ul",17),a.TgZ(6,"p",18),a._uU(7,"Templates Without Content Types"),a.qZA(),a.YNc(8,S,5,3,"li",19),a.qZA(),a.qZA()),2&t){var e=a.oxw(2);a.xp6(4),a.Q6J("ngForOf",e.contentInfo.ContentTypes),a.xp6(4),a.Q6J("ngForOf",e.contentInfo.TemplatesWithoutContentTypes)}}function M(t,n){if(1&t){var e=a.EpF();a.ynx(0),a.TgZ(1,"div",1),a.TgZ(2,"div",2),a._uU(3,"Export Content and Templates from this App"),a.qZA(),a.qZA(),a.TgZ(4,"p",3),a._uU(5," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),a.TgZ(6,"a",4),a._uU(7,"2sxc Help"),a.qZA(),a._uU(8,". "),a.qZA(),a.TgZ(9,"div",5),a.TgZ(10,"div",6),a.TgZ(11,"mat-form-field",7),a.TgZ(12,"mat-label"),a._uU(13,"Scope"),a.qZA(),a.TgZ(14,"mat-select",8),a.NdJ("ngModelChange",function(t){return a.CHM(e),a.oxw().changeScope(t)}),a.YNc(15,C,2,2,"mat-option",9),a.TgZ(16,"mat-option",10),a._uU(17,"Other..."),a.qZA(),a.qZA(),a.TgZ(18,"button",11),a.TgZ(19,"mat-icon",12),a.NdJ("click",function(){return a.CHM(e),a.oxw().unlockScope()}),a._uU(20),a.qZA(),a.qZA(),a.qZA(),a.TgZ(21,"app-field-hint"),a._uU(22," The scope should almost never be changed - "),a.TgZ(23,"a",13),a._uU(24,"see help"),a.qZA(),a.qZA(),a.qZA(),a.YNc(25,w,9,2,"div",0),a.qZA(),a.TgZ(26,"div",14),a.TgZ(27,"button",15),a.NdJ("click",function(){return a.CHM(e),a.oxw().closeDialog()}),a._uU(28," Cancel "),a.qZA(),a.TgZ(29,"button",16),a.NdJ("click",function(){return a.CHM(e),a.oxw().exportAppParts()}),a._uU(30," Export "),a.qZA(),a.qZA(),a.BQk()}if(2&t){var o=n.ngIf,i=a.oxw();a.xp6(14),a.Q6J("ngModel",i.exportScope)("disabled",i.lockScope),a.xp6(1),a.Q6J("ngForOf",i.scopeOptions),a.xp6(1),a.Q6J("value",i.dropdownInsertValue),a.xp6(2),a.Q6J("tippy",i.lockScope?"Unlock":"Lock"),a.xp6(2),a.hij(" ",i.lockScope?"lock":"lock_open"," "),a.xp6(5),a.Q6J("ngIf",i.contentInfo),a.xp6(2),a.Q6J("disabled",o.loading||o.isExporting),a.xp6(2),a.Q6J("disabled",o.loading||o.isExporting)}}var O=function(){function t(t,n,e){this.dialogRef=t,this.exportAppPartsService=n,this.contentTypesService=e,this.hostClass="dialog-component",this.exportScope=s.Z.scopes.default.value,this.lockScope=!0,this.dropdownInsertValue=r.G,this.loading$=new i.X(!1),this.isExporting$=new i.X(!1),this.templateVars$=(0,p.aj)([this.loading$,this.isExporting$]).pipe((0,c.U)(function(t){var n=(0,o.CR)(t,2);return{loading:n[0],isExporting:n[1]}}))}return t.prototype.ngOnInit=function(){this.fetchScopes(),this.fetchContentInfo()},t.prototype.ngOnDestroy=function(){this.loading$.complete(),this.isExporting$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.exportAppParts=function(){this.isExporting$.next(!0);var t=this.selectedContentTypes().map(function(t){return t.Id}),n=this.selectedTemplates().map(function(t){return t.Id}),e=this.selectedEntities().map(function(t){return t.Id});e=e.concat(n),this.exportAppPartsService.exportParts(t,e,n),this.isExporting$.next(!1)},t.prototype.changeScope=function(t){t===r.G&&(t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||s.Z.scopes.default.value,this.scopeOptions.find(function(n){return n.value===t})||this.scopeOptions.unshift({name:t,value:t})),this.exportScope=t,this.fetchContentInfo()},t.prototype.unlockScope=function(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=s.Z.scopes.default.value,this.fetchContentInfo())},t.prototype.fetchScopes=function(){var t=this;this.loading$.next(!0),this.contentTypesService.getScopes().subscribe(function(n){t.scopeOptions=n,t.loading$.next(!1)})},t.prototype.fetchContentInfo=function(){var t=this;this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe(function(n){t.contentInfo=n,t.loading$.next(!1)})},t.prototype.selectedContentTypes=function(){return this.contentInfo.ContentTypes.filter(function(t){return t._export})},t.prototype.selectedEntities=function(){var t,n,e=[];try{for(var i=(0,o.XA)(this.contentInfo.ContentTypes),p=i.next();!p.done;p=i.next())e=e.concat(p.value.Entities.filter(function(t){return t._export}))}catch(c){t={error:c}}finally{try{p&&!p.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e},t.prototype.selectedTemplates=function(){var t,n,e=[];try{for(var i=(0,o.XA)(this.contentInfo.ContentTypes),p=i.next();!p.done;p=i.next())e=e.concat(p.value.Templates.filter(function(t){return t._export}))}catch(c){t={error:c}}finally{try{p&&!p.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}return e.concat(this.contentInfo.TemplatesWithoutContentTypes.filter(function(t){return t._export}))},t.\u0275fac=function(n){return new(n||t)(a.Y36(l.so),a.Y36(u.T),a.Y36(f.s))},t.\u0275cmp=a.Xpm({type:t,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(t,n){2&t&&a.Ikx("className",n.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-description"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","type","button","matSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],[1,"dialog-component-actions"],["mat-raised-button","",3,"disabled","click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"content-info__list","content-info__base"],[1,"content-info__title"],["class","content-info__item",4,"ngFor","ngForOf"],[1,"content-info__item"],[1,"option-box"],[3,"ngModel","ngModelChange"],[1,"option-box__text"],["class","content-info__list",4,"ngIf"],[1,"content-info__list"],[1,"content-info__subtitle"]],template:function(t,n){1&t&&(a.YNc(0,M,31,9,"ng-container",0),a.ALo(1,"async")),2&t&&a.Q6J("ngIf",a.lcZ(1,1,n.templateVars$))},directives:[g.O5,l.uh,d.KE,d.hX,h.gD,x.JJ,x.On,g.sg,_.ey,Z.lW,d.R9,m.$,T.Hw,v.E,A.Y,y.oG],pipes:[g.Ov],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.content-info__base[_ngcontent-%COMP%]{padding:0}.content-info__item[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:2px}.option-box[_ngcontent-%COMP%]{margin:8px 0}.option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"]}),t}()},1271:function(t,n,e){"use strict";e.d(n,{E:function(){return i}});var o=e(1785),i=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,n){1&t&&o.NdJ("click",function(t){return n.onClick(t)})}}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.00.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_-88708f.aee096bae7bfc94f5dcf.js.map