(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_edit-content-type_edit-content-typ-5bccd7","projects_ng-dialogs_src_app_shared_directives_click-stop-propagation_directive_ts"],{2198:function(t,e,n){"use strict";n.r(e),n.d(e,{EditContentTypeComponent:function(){return I}});var o=n(4762),i=n(8512),a=n(1305),c=n(878),p=n(9996),s=n(9529),r=n(5803),l=/(^[A-Za-z][A-Za-z0-9]+$)|(^@[A-Za-z][A-Za-z0-9-]*$)/,u=n(1785),d=n(2935),g=n(1282),h=n(2832),f=n(3589),m=n(1116),y=n(1041),T=n(3070),Z=n(9550),v=n(6489),S=n(3841),x=n(7064),A=n(4369),b=n(7512),N=n(7307),_=n(1271),k=n(7110);function $(t,e){1&t&&(u.TgZ(0,"app-field-hint",23),u._uU(1,"This field is required"),u.qZA()),2&t&&u.Q6J("isError",!0)}function q(t,e){if(1&t&&(u.TgZ(0,"app-field-hint",23),u._uU(1),u.qZA()),2&t){var n=u.oxw(4);u.Q6J("isError",!0),u.xp6(1),u.Oqu(n.contentTypeNameError)}}function C(t,e){if(1&t&&(u.ynx(0),u.YNc(1,$,2,1,"app-field-hint",22),u.YNc(2,q,2,2,"app-field-hint",22),u.BQk()),2&t){u.oxw();var n=u.MAs(8);u.xp6(1),u.Q6J("ngIf",n.errors.required),u.xp6(1),u.Q6J("ngIf",n.errors.pattern)}}function w(t,e){if(1&t&&(u.TgZ(0,"mat-option",13),u._uU(1),u.qZA()),2&t){var n=e.$implicit;u.Q6J("value",n.value),u.xp6(1),u.hij(" ",n.name," ")}}function J(t,e){if(1&t&&(u.TgZ(0,"div",7),u.TgZ(1,"h3"),u._uU(2,"Shared Content Type (Ghost)"),u.qZA(),u.TgZ(3,"p"),u._uU(4,"Note: this can't be edited in the UI, for now if you really know what you're doing, do it in the DB"),u.qZA(),u.TgZ(5,"p"),u._uU(6),u.qZA(),u.qZA()),2&t){var n=u.oxw(2).ngIf;u.xp6(6),u.hij("Uses Type Definition of: ",n.contentType.SharedDefId,"")}}function M(t,e){if(1&t){var n=u.EpF();u.TgZ(0,"form",4,5),u.NdJ("ngSubmit",function(){return u.CHM(n),u.oxw(2).save()}),u.TgZ(2,"div",6),u.TgZ(3,"div",7),u.TgZ(4,"mat-form-field",8),u.TgZ(5,"mat-label"),u._uU(6,"Name"),u.qZA(),u.TgZ(7,"input",9,10),u.NdJ("ngModelChange",function(t){return u.CHM(n),u.oxw(2).changeContentTypeName(t)}),u.qZA(),u.qZA(),u.YNc(9,C,3,2,"ng-container",2),u.qZA(),u.TgZ(10,"mat-accordion"),u.TgZ(11,"mat-expansion-panel"),u.TgZ(12,"mat-expansion-panel-header"),u.TgZ(13,"mat-panel-title"),u._uU(14,"Advanced"),u.qZA(),u._UZ(15,"mat-panel-description"),u.qZA(),u.TgZ(16,"div",7),u.TgZ(17,"mat-form-field",8),u.TgZ(18,"mat-label"),u._uU(19,"Scope"),u.qZA(),u.TgZ(20,"mat-select",11),u.NdJ("ngModelChange",function(t){return u.CHM(n),u.oxw(2).changeScope(t)}),u.YNc(21,w,2,2,"mat-option",12),u.TgZ(22,"mat-option",13),u._uU(23,"Other..."),u.qZA(),u.qZA(),u.TgZ(24,"button",14),u.TgZ(25,"mat-icon",15),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).unlockScope()}),u._uU(26),u.qZA(),u.qZA(),u.qZA(),u.TgZ(27,"app-field-hint"),u._uU(28," The scope should almost never be changed - "),u.TgZ(29,"a",16),u._uU(30,"see help"),u.qZA(),u.qZA(),u.qZA(),u.TgZ(31,"div",7),u.TgZ(32,"mat-form-field",8),u.TgZ(33,"mat-label"),u._uU(34,"Static Name"),u.qZA(),u._UZ(35,"input",17),u.qZA(),u.qZA(),u.YNc(36,J,7,1,"div",18),u.qZA(),u.qZA(),u.qZA(),u.TgZ(37,"div",19),u.TgZ(38,"button",20),u.NdJ("click",function(){return u.CHM(n),u.oxw(2).closeDialog()}),u._uU(39,"Cancel"),u.qZA(),u.TgZ(40,"button",21),u._uU(41," Save "),u.qZA(),u.qZA(),u.qZA()}if(2&t){var o=u.MAs(1),i=u.MAs(8),a=u.oxw().ngIf,c=u.oxw();u.xp6(7),u.Q6J("pattern",c.contentTypeNamePattern)("ngModel",a.contentType.Name),u.xp6(2),u.Q6J("ngIf",i.touched&&i.errors),u.xp6(1),u.Q6J("@.disabled",a.disableAnimation),u.xp6(10),u.Q6J("ngModel",a.contentType.Scope)("disabled",a.lockScope),u.xp6(1),u.Q6J("ngForOf",a.scopeOptions),u.xp6(1),u.Q6J("value",c.dropdownInsertValue),u.xp6(2),u.Q6J("tippy",a.lockScope?"Unlock":"Lock"),u.xp6(2),u.hij(" ",a.lockScope?"lock":"lock_open"," "),u.xp6(9),u.Q6J("ngModel",a.contentType.StaticName),u.xp6(1),u.Q6J("ngIf",a.contentType.SharedDefId),u.xp6(4),u.Q6J("disabled",!o.form.valid||a.loading)}}function U(t,e){if(1&t&&(u.ynx(0),u.YNc(1,M,42,13,"form",3),u.BQk()),2&t){var n=e.ngIf;u.xp6(1),u.Q6J("ngIf",n.contentType)}}var I=function(){function t(t,e,n,c){this.dialogRef=t,this.route=e,this.contentTypesService=n,this.snackBar=c,this.hostClass="dialog-component",this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName"),this.contentTypeNamePattern=l,this.contentTypeNameError="Standard letters and numbers are allowed. Must start with a letter.",this.dropdownInsertValue=s.G,this.contentType$=new i.X(null),this.lockScope$=new i.X(!0),this.scopeOptions$=new i.X(null),this.disableAnimation$=new i.X(!0),this.loading$=new i.X(!1),this.templateVars$=(0,a.aj)([this.contentType$,this.lockScope$,this.scopeOptions$,this.disableAnimation$,this.loading$]).pipe((0,p.U)(function(t){var e=(0,o.CR)(t,5);return{contentType:e[0],lockScope:e[1],scopeOptions:e[2],disableAnimation:e[3],loading:e[4]}})),this.scope=this.route.snapshot.parent.paramMap.get("scope")}return t.prototype.ngOnInit=function(){var t=this,e=this.contentTypeStaticName?this.contentTypesService.retrieveContentType(this.contentTypeStaticName).pipe((0,p.U)(function(t){return(0,o.pi)((0,o.pi)({},t),{ChangeStaticName:!1,NewStaticName:t.StaticName})})):(0,c.of)({StaticName:"",Name:"",Description:"",Scope:this.scope,ChangeStaticName:!1,NewStaticName:""}),n=this.contentTypesService.getScopes();(0,a.aj)([e,n]).subscribe(function(e){var n,i=(0,o.CR)(e,2),a=i[1];t.contentType$.next(i[0]);var c=(0,o.ev)([],(0,o.CR)(null!==(n=t.scopeOptions$.value)&&void 0!==n?n:[]));a.forEach(function(t){c.some(function(e){return e.value===t.value})||c.push(t)}),c.some(function(e){return e.value===t.scope})||c.push({name:t.scope,value:t.scope}),t.scopeOptions$.next(c)})},t.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.lockScope$.complete(),this.scopeOptions$.complete(),this.disableAnimation$.complete(),this.loading$.complete()},t.prototype.ngAfterViewInit=function(){var t=this;setTimeout(function(){return t.disableAnimation$.next(!1)})},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.changeContentTypeName=function(t){this.contentType$.next((0,o.pi)((0,o.pi)({},this.contentType$.value),{Name:t}))},t.prototype.changeScope=function(t){t===s.G&&(t=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||r.Z.scopes.default.value,this.scopeOptions$.value.some(function(e){return e.value===t})||this.scopeOptions$.next((0,o.ev)([{name:t,value:t}],(0,o.CR)(this.scopeOptions$.value)))),this.contentType$.next((0,o.pi)((0,o.pi)({},this.contentType$.value),{Scope:t}))},t.prototype.unlockScope=function(){this.lockScope$.next(!this.lockScope$.value),this.lockScope$.value&&this.contentType$.next((0,o.pi)((0,o.pi)({},this.contentType$.value),{Scope:this.scope}))},t.prototype.save=function(){var t=this;this.loading$.next(!0),this.snackBar.open("Saving..."),this.contentTypesService.save(this.contentType$.value).subscribe(function(e){t.loading$.next(!1),t.snackBar.open("Saved",null,{duration:2e3}),t.closeDialog()}),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},t.\u0275fac=function(e){return new(e||t)(u.Y36(d.so),u.Y36(g.gz),u.Y36(h.s),u.Y36(f.ux))},t.\u0275cmp=u.Xpm({type:t,selectors:[["app-edit-content-type"]],hostVars:1,hostBindings:function(t,e){2&t&&u.Ikx("className",e.hostClass)},decls:5,vars:4,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],["class","dialog-form",3,"ngSubmit",4,"ngIf"],[1,"dialog-form",3,"ngSubmit"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["matInput","","type","text","required","","name","Name",3,"pattern","ngModel","ngModelChange"],["name","ngModel"],["name","Scope",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mat-icon-button","","type","button","matSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matInput","","type","text","name","StaticName","disabled","",3,"ngModel"],["class","edit-input",4,"ngIf"],[1,"dialog-form-actions"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[3,"isError",4,"ngIf"],[3,"isError"]],template:function(t,e){1&t&&(u.TgZ(0,"div",0),u.TgZ(1,"div",1),u._uU(2),u.qZA(),u.qZA(),u.YNc(3,U,2,1,"ng-container",2),u.ALo(4,"async")),2&t&&(u.xp6(2),u.Oqu(e.contentTypeStaticName?"Edit Content Type":"New Content Type"),u.xp6(1),u.Q6J("ngIf",u.lcZ(4,2,e.templateVars$)))},directives:[d.uh,m.O5,y._Y,y.JL,y.F,T.KE,T.hX,Z.Nt,y.Fj,y.Q7,y.c5,y.JJ,y.On,v.pp,v.ib,v.yz,v.yK,v.u4,S.gD,m.sg,x.ey,A.lW,T.R9,b.$,N.Hw,_.E,k.Y],pipes:[m.Ov],styles:[".edit-input[_ngcontent-%COMP%], .mat-accordion[_ngcontent-%COMP%]{padding-bottom:8px}.mat-accordion[_ngcontent-%COMP%]{display:block}"]}),t}()},1271:function(t,e,n){"use strict";n.d(e,{E:function(){return i}});var o=n(1785),i=function(){function t(){}return t.prototype.onClick=function(t){t.stopPropagation()},t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=o.lG2({type:t,selectors:[["","appClickStopPropagation",""]],hostBindings:function(t,e){1&t&&o.NdJ("click",function(t){return e.onClick(t)})}}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.00.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_edit-content-type_edit-content-typ-5bccd7.826434d588b4e5e10bbf.js.map