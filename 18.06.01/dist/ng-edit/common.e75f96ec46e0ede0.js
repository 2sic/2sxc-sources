"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["common"],{1657:(v,l,t)=>{t.d(l,{E:()=>r});var n=t(7580),e=t(6256),a=t(4646),d=t(3840),m=t(8136),u=t(9001),s=t(4601);function p(h,f){if(1&h){const C=n.RV6();n.j41(0,"div",2),n.bIt("click",function(){n.eBV(C);const P=n.XpG();return n.Njj(P.openLightspeedFeatureInfo())}),n.j41(1,"mat-icon",3),n.EFF(2," bolt "),n.k0s()()}}function c(h,f){if(1&h&&(n.j41(0,"a",5)(1,"mat-icon",6),n.EFF(2," bolt "),n.k0s()()),2&h){const C=n.XpG(2);n.Y8G("href","#"+C.params().lightSpeedLink(C.lightSpeedOwner()),n.B4B)}}function o(h,f){if(1&h&&(n.j41(0,"a",5)(1,"mat-icon",7),n.EFF(2," bolt "),n.k0s()()),2&h){const C=n.XpG(2);n.Y8G("href","#"+C.params().lightSpeedLink(C.lightSpeedOwner()),n.B4B)}}function i(h,f){if(1&h&&(n.j41(0,"div",4),n.DNE(1,c,3,1,"a",5)(2,o,3,1,"a",5),n.k0s()),2&h){const C=n.XpG();n.ZvI("eav-grid-action-button ",C.appHasLightSpeed?"":"disabled",""),n.Y8G("tippy",C.appHasLightSpeed?C.lightSpeed().Title:"Not yet configured for LightSpeed"),n.R7$(),n.vxM(C.appLightSpeedEnabled?1:2)}}let r=(()=>{class h{constructor(){this.lightSpeedOwner=n.hFB.required(),this.params=n.hFB.required(),this.lightSpeed=n.hFB.required(),this.features=(0,n.WQX)(u.D),this.lightSpeedEnabled=this.features.isEnabled[m.T.LightSpeed]}get appHasLightSpeed(){return null!=this.lightSpeed()?.Id}get appLightSpeedEnabled(){return 1==this.lightSpeed()?.IsEnabled}openLightspeedFeatureInfo(){this.params().openLightspeedFeatureInfo()}static{this.\u0275fac=function(I){return new(I||h)}}static{this.\u0275cmp=n.VBU({type:h,selectors:[["app-lightspeed-action"]],inputs:{lightSpeedOwner:[1,"lightSpeedOwner"],params:[1,"params"],lightSpeed:[1,"lightSpeed"]},decls:2,vars:1,consts:[["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled"],["matRipple","",3,"class","tippy"],["tippy","Lightspeed is disabled",1,"eav-grid-action-button","disabled",3,"click"],["matBadgeSize","small","matBadge","\u{1f48e}","matBadgePosition","below after","aria-hidden","false"],["matRipple","",3,"tippy"],[1,"default-link",3,"href"],["matBadgeSize","small","matBadge","\u2705","matBadgePosition","below after","aria-hidden","false"],["matBadgeSize","small","matBadge","\u26d4","matBadgePosition","below after","aria-hidden","false"]],template:function(I,P){1&I&&n.DNE(0,p,3,0,"div",0)(1,i,3,5,"div",1),2&I&&n.vxM(P.lightSpeedEnabled()?1:0)},dependencies:[s.e,d.m_,d.An,e.Y,e.k,a.pZ,a.r6],encapsulation:2})}}return h})()},8713:(v,l,t)=>{t.d(l,{g:()=>a});var n=t(52),e=t(334);class a{static getLightSpeedEditParams(m){return{items:[e.c.newMetadata(m,n.YX.appMetadata.LightSpeed.ContentTypeName,n.YX.metadata.app,!0)]}}}},7703:(v,l,t)=>{t.d(l,{s:()=>e,w:()=>n});const n=/^[A-Za-z][A-Za-z0-9]+$/,e="Standard letters and numbers are allowed. Must start with a letter."},1902:(v,l,t)=>{t.r(l),t.d(l,{CopilotPageComponent:()=>U});var f,n=t(316),e=t(7580),a=t(4175),d=t(3777),m=t(3840),u=t(5175),s=t(271),p=t(4334),c=t(2938),o=t(8873),i=t(6301),r=t(4435),h=t(6443);let C=(()=>{class E{static{this.webApiEditions="admin/code/getEditions"}static{this.webApiGeneratedCode="admin/code/generateDataModels"}constructor(g,_){this.http=g,this.context=_,this.log=(0,r.Tq)({CopilotService:E}),this.specs=this.#e()}getEditions(){return this.specs.pipe((0,s.T)(g=>g.editions))}getDefaultEdition(){return this.specs.pipe((0,s.T)(g=>g.editions.find(_=>_.isDefault)))}getGenerators(){return this.specs.pipe((0,s.T)(g=>g.generators))}#e(){return this.http.get(f.webApiEditions,{params:{appId:this.context.appId.toString()}}).pipe((0,s.T)(g=>{const _=this.#t(g.editions),y=g.editions.map(D=>{const T=D==_;return{...D,isDefault:T,description:(D.description||"no description provided")+(T?" \u2705":""),label:`/${D.name}/AppCode/Data`.replace(/\/\//g,"/")}});return{...g,editions:y}}),(0,i.t)(1))}#t(g){return g.find(_=>_.isDefault)??g.find(_=>""===_.name)??g[0]}static{this.\u0275fac=function(_){return new(_||E)(e.KVO(h.Qq),e.KVO(o.o))}}static{this.\u0275prov=e.jDH({token:E,factory:E.\u0275fac})}}return E})();f=C;var I=t(3347),P=t(4950),A=t(4646);function R(E,O){if(1&E&&(e.j41(0,"mat-option",9)(1,"strong"),e.EFF(2),e.k0s(),e.nrm(3,"br"),e.EFF(4),e.k0s()),2&E){const g=O.$implicit;e.Y8G("value",g.name),e.R7$(2),e.Lme("",g.name," v",g.version,""),e.R7$(2),e.SpI(" ",g.description," ")}}function M(E,O){1&E&&e.nrm(0,"mat-hint",10),2&E&&e.Y8G("innerHTML",O.descriptionHtml,e.npT)}function S(E,O){if(1&E){const g=e.RV6();e.j41(0,"mat-form-field",3)(1,"mat-label"),e.EFF(2,"Generator"),e.k0s(),e.j41(3,"mat-select",8),e.mxI("valueChange",function(y){e.eBV(g);const D=e.XpG();return e.DH7(D.selectedGenerator,y)||(D.selectedGenerator=y),e.Njj(y)}),e.j41(4,"mat-select-trigger"),e.EFF(5),e.k0s(),e.Z7z(6,R,5,4,"mat-option",9,e.fX1),e.k0s(),e.DNE(8,M,1,1,"mat-hint",10),e.nI1(9,"async"),e.k0s(),e.nrm(10,"br")}if(2&E){let g;const _=e.XpG();e.R7$(3),e.R50("value",_.selectedGenerator),e.R7$(2),e.SpI(" ",_.selectedGenerator," "),e.R7$(),e.Dyx(O.sort()),e.R7$(2),e.vxM((g=e.bMT(9,3,_.selectedGenerator$))?8:-1,g)}}function L(E,O){if(1&E&&(e.j41(0,"mat-option",9)(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3),e.k0s()),2&E){const g=O.$implicit;e.Y8G("value",g.name),e.R7$(2),e.JRh(g.label),e.R7$(),e.SpI(" (",g.description,") ")}}function x(E,O){if(1&E){const g=e.RV6();e.j41(0,"mat-form-field",3)(1,"mat-label"),e.EFF(2,"Select an Edition to generate code for"),e.k0s(),e.j41(3,"mat-select",8),e.mxI("valueChange",function(y){e.eBV(g);const D=e.XpG();return e.DH7(D.selectedEdition,y)||(D.selectedEdition=y),e.Njj(y)}),e.Z7z(4,L,4,3,"mat-option",9,e.fX1),e.k0s(),e.j41(6,"mat-hint"),e.EFF(7," Editions are managed in the "),e.j41(8,"code"),e.EFF(9,"/App_Data/app.json"),e.k0s(),e.EFF(10," file. See "),e.j41(11,"a",11),e.EFF(12,"docs"),e.k0s(),e.EFF(13,". "),e.k0s()()}if(2&E){const g=e.XpG();e.R7$(3),e.R50("value",g.selectedEdition),e.R7$(),e.Dyx(O.sort())}}let j=(()=>{class E{constructor(g,_,y){this.http=g,this.context=_,this.snackBar=y,this.outputType=(0,e.hFB)(),this.title=(0,e.hFB)("Copilot Generator"),this.copilotSvc=(0,c.d)(C),this.webApiGeneratedCode="admin/code/generateDataModels",this.editions$=this.copilotSvc.getEditions(),this.generators$=this.copilotSvc.getGenerators().pipe((0,s.T)(D=>D.filter(T=>T.outputType===this.outputType()))),this.selectedGenerator$=this.generators$.pipe((0,s.T)(D=>D.find(T=>T.name===this.selectedGenerator))),this.selectedGenerator="",this.selectedEdition=""}ngOnInit(){this.generators$.pipe((0,p.s)(1)).subscribe(g=>{this.selectedGenerator=g[0]?.name??""}),this.copilotSvc.specs.pipe((0,p.s)(1)).subscribe(g=>{this.selectedEdition=g.editions.find(_=>_.isDefault)?.name??""})}autoGeneratedCode(){this.http.get(this.webApiGeneratedCode,{params:{appId:this.context.appId.toString(),edition:this.selectedEdition,generator:this.selectedGenerator}}).subscribe(g=>{console.log(g),this.snackBar.open(g.message+`\n (this took ${g.timeTaken}ms)`,null,{duration:5e3})})}static{this.\u0275fac=function(_){return new(_||E)(e.rXU(h.Qq),e.rXU(o.o),e.rXU(I.UG))}}static{this.\u0275cmp=e.VBU({type:E,selectors:[["app-copilot-generator"]],inputs:{outputType:[1,"outputType"],title:[1,"title"]},decls:21,vars:7,consts:[[1,"eav-cards-box"],[1,"eav-card"],[1,"eav-card-header"],["color","accent",1,"eav-mat-form-field"],[1,"eav-card-space-div"],["align","end"],["mat-button","",1,"eav-button__with-icon",3,"click"],[1,"eav-icon"],["required","",3,"valueChange","value"],[3,"value"],[3,"innerHTML"],["href","https://go.2sxc.org/app-json","target","_blank"]],template:function(_,y){if(1&_&&(e.j41(0,"div",0)(1,"mat-card",1)(2,"mat-card-header",2)(3,"mat-card-title"),e.EFF(4),e.k0s(),e.j41(5,"mat-icon"),e.EFF(6,"support_agent"),e.k0s()(),e.j41(7,"mat-card-content"),e.nrm(8,"br"),e.DNE(9,S,11,5),e.nI1(10,"async"),e.nrm(11,"br"),e.DNE(12,x,14,1,"mat-form-field",3),e.nI1(13,"async"),e.k0s(),e.nrm(14,"div",4),e.j41(15,"mat-card-actions",5)(16,"button",6),e.bIt("click",function(){return y.autoGeneratedCode()}),e.j41(17,"mat-icon",7),e.EFF(18,"code"),e.k0s(),e.j41(19,"span"),e.EFF(20,"Generate Code"),e.k0s()()()()()),2&_){let D,T;e.R7$(4),e.JRh(y.title()),e.R7$(5),e.vxM((D=e.bMT(10,3,y.generators$))?9:-1,D),e.R7$(3),e.vxM((T=e.bMT(13,5,y.editions$))?12:-1,T)}},dependencies:[u.Ve,P.rl,P.nJ,P.MV,u.VO,u.$2,A.wT,a.Hl,a.$z,d.Hu,d.RN,d.YY,d.m2,d.MM,d.dh,m.m_,m.An,n.MD,n.Jj],encapsulation:2})}}return E})();var F=t(2159);let U=(()=>{class E{constructor(g){this.data=g.snapshot.data}static{this.\u0275fac=function(_){return new(_||E)(e.rXU(F.nX))}}static{this.\u0275cmp=e.VBU({type:E,selectors:[["app-data-copilot"]],decls:6,vars:4,consts:[[1,"outer-container"],[3,"outputType","title"]],template:function(_,y){1&_&&(e.j41(0,"div",0)(1,"h1"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s()(),e.nrm(5,"app-copilot-generator",1)),2&_&&(e.R7$(2),e.JRh(y.data.heading),e.R7$(2),e.SpI(" ",y.data.intro," "),e.R7$(),e.Y8G("outputType",y.data.outputType)("title",y.data.title))},dependencies:[j],styles:[".outer-container[_ngcontent-%COMP%]{padding:10px 20px}"]})}}return E})()},2620:(v,l,t)=>{t.d(l,{y:()=>n});class n{refresh(a){return!0}}},8362:(v,l,t)=>{t.d(l,{l:()=>m});var n=t(7580),e=t(271),a=t(1772),d=t(6474);let m=(()=>{class u extends d.D{getStackSig(p,c,o,i=!1){const r=(0,n.vPA)([]);return this.getAndWrite(a.u+"GetStack",{params:{appId:this.appId,part:p,...c&&{key:c},...o&&{view:o}}},r),(0,n.EWP)(()=>i?r().map(h=>({...h,_value:JSON.stringify(h.Value)})):r())}getStack(p,c,o,i=!1){return this.getHttp(a.u+"GetStack",{params:{appId:this.appId,part:p,...c&&{key:c},...o&&{view:o}}}).pipe((0,e.T)(r=>{if(!i)return r;for(const h of r)h._value=JSON.stringify(h.Value);return r}))}static{this.\u0275fac=(()=>{let p;return function(o){return(p||(p=n.xGo(u)))(o||u)}})()}static{this.\u0275prov=n.jDH({token:u,factory:u.\u0275fac})}}return u})()},1423:(v,l,t)=>{t.d(l,{g:()=>s});var n=t(4646),e=t(2938),a=t(4601),d=t(4038),m=t(5081),u=t(7580);let s=(()=>{class p{constructor(){this.clipboard=(0,e.d)(m.W)}agInit(o){this.value=o.value}refresh(o){return!0}copy(o){o=d.i.tryParse(o)??o,this.clipboard.copyToClipboard(o)}static{this.\u0275fac=function(i){return new(i||p)}}static{this.\u0275cmp=u.VBU({type:p,selectors:[["app-analyze-settings-value"]],decls:3,vars:2,consts:[["matRipple","",1,"value-box","highlight",3,"click","tippy"],[1,"value"]],template:function(i,r){1&i&&(u.j41(0,"div",0),u.bIt("click",function(){return r.copy(r.value)}),u.j41(1,"span",1),u.EFF(2),u.k0s()()),2&i&&(u.Y8G("tippy",r.value),u.R7$(2),u.JRh(r.value))},dependencies:[n.pZ,n.r6,a.e],styles:[".value-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.value-box[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{width:100%;text-overflow:ellipsis;overflow:hidden}"]})}}return p})()},3583:(v,l,t)=>{t.d(l,{U:()=>c});var n=t(6474),e=t(7580);const u="admin/app/app";let c=(()=>{class o extends n.D{getAll(){return this.getSignal("admin/app/list",{params:{zoneId:this.zoneId}})}getInheritable(){return this.getSignal("admin/app/InheritableApps",{params:{zoneId:this.zoneId}})}getPendingApps(){return this.getSignal("admin/app/GetPendingApps",{params:{zoneId:this.zoneId}})}create(r,h,f){return this.http.post(this.apiUrl(u),{},{params:{zoneId:this.zoneId,name:r,...null!=h&&{inheritAppId:h},...null!=f&&{templateId:f}}})}installPendingApps(r){return this.http.post(this.apiUrl("admin/app/InstallPendingApps"),r,{params:{zoneId:this.zoneId}})}delete(r){return this.http.delete(this.apiUrl(u),{params:{zoneId:this.zoneId,appId:r.toString()}})}flushCache(r){return this.getHttpApiUrl("admin/app/flushcache",{params:{zoneId:this.zoneId,appId:r.toString()}})}static{this.\u0275fac=(()=>{let r;return function(f){return(r||(r=e.xGo(o)))(f||o)}})()}static{this.\u0275prov=e.jDH({token:o,factory:o.\u0275fac})}}return o})()},3992:(v,l,t)=>{t.d(l,{b:()=>c});var n=t(271),e=t(3550),a=t(6474),d=t(7580);const s="sys/license/Summary";let c=(()=>{class o extends a.D{saveFeatures(r){return this.http.post(this.apiUrl("admin/feature/SaveNew"),r)}getLicenses(){return this.getHttpApiUrl(s)}getLicensesSig(){return this.getSignal(s)}uploadLicense(r){const h=new FormData;return h.append("File",r),this.http.post(this.apiUrl("sys/license/Upload"),h).pipe((0,n.T)(f=>({Success:f.Success,Messages:[{MessageType:f.Success?e.G1.Success:e.G1.Error,Text:`License ${f.Success?"uploaded":"upload failed"}: ${f.Message}`}]})))}retrieveLicense(){return this.getHttpApiUrl("sys/license/Retrieve")}static{this.\u0275fac=(()=>{let r;return function(f){return(r||(r=d.xGo(o)))(f||o)}})()}static{this.\u0275prov=d.jDH({token:o,factory:o.\u0275fac})}}return o})()},7130:(v,l,t)=>{t.d(l,{U:()=>s});var n=t(6474),e=t(7580);let s=(()=>{class p extends n.D{getLanguage(o){return this.getSignal("admin/zone/GetLanguages",{},o)}toggleLanguage(o,i){return this.getHttpApiUrl("admin/zone/SwitchLanguage",{params:{cultureCode:o,enable:i.toString()}})}getSystemInfo(o){return this.getSignal("admin/zone/GetSystemInfo",{},o)}getLanguagesPermissions(o){return this.getSignal("admin/app/languages",{params:{appId:this.appId}},o)}static{this.\u0275fac=(()=>{let o;return function(r){return(o||(o=e.xGo(p)))(r||p)}})()}static{this.\u0275prov=e.jDH({token:p,factory:p.\u0275fac})}}return p})()},4350:(v,l,t)=>{t.r(l),t.d(l,{ContentExportRoutes:()=>d});var n=t(5544),e=t(9204);const d=[{path:"",component:n.DialogEntryComponent,data:{dialog:{name:"EXPORT_CONTENT_TYPE_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,e.A)(function*(){const{ContentExportComponent:m}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_content-export_content-export_component_ts")]).then(t.bind(t,5727));return m})()}}}]},6360:(v,l,t)=>{t.d(l,{D:()=>p});var n=t(6474),e=t(7580);let p=(()=>{class c extends n.D{exportContent(i,r){const h=r?"&selectedids="+r.join():"",f=this.apiUrl("admin/entity/Download")+"?appId="+this.appId+"&language="+i.language+"&defaultLanguage="+i.defaultLanguage+"&contentType="+i.contentTypeStaticName+"&recordExport="+i.recordExport+"&resourcesReferences="+i.resourcesReferences+"&languageReferences="+i.languageReferences+h;window.open(f,"_blank","")}exportJson(i){const r=this.apiUrl("admin/type/Json")+"?appId="+this.appId+"&name="+i;window.open(r,"_blank","")}exportEntity(i,r,h){const f=this.apiUrl("admin/entity/Json")+"?appId="+this.appId+"&id="+i+"&prefix="+r+"&withMetadata="+h;window.open(f,"_blank","")}static{this.\u0275fac=(()=>{let i;return function(h){return(i||(i=e.xGo(c)))(h||c)}})()}static{this.\u0275prov=e.jDH({token:c,factory:c.\u0275fac})}}return c})()},3031:(v,l,t)=>{t.r(l),t.d(l,{contentImportRoutes:()=>d});var n=t(5544),e=t(9204);const d=[{path:"",component:n.DialogEntryComponent,data:{dialog:{name:"IMPORT_CONTENT_TYPE_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,e.A)(function*(){const{ContentImportComponent:m}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("projects_eav-ui_src_app_content-import_content-import_component_ts")]).then(t.bind(t,2795));return m})()}}}]},753:(v,l,t)=>{t.r(l),t.d(l,{contentItemsRoutes:()=>s});var n=t(3454),e=t(5544),a=t(9204);const d={name:"IMPORT_CONTENT_ITEM_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,a.A)(function*(){const{ImportContentItemComponent:p}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("projects_eav-ui_src_app_content-items_import-content-item_import-content-item_component_ts")]).then(t.bind(t,6754));return p})()},m={name:"CONTENT_ITEMS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,a.A)(function*(){const{ContentItemsComponent:p}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("default-projects_eav-ui_src_app_shared_services_service-base_ts-node_modules_angular_material-ffa7b3"),t.e("default-node_modules_angular_material_fesm2022_slide-toggle_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_content-items_content-items_component_ts")]).then(t.bind(t,7730));return p})()};var u=t(1195);const s=[{path:"",component:e.DialogEntryComponent,data:{dialog:m},children:[...n.H.getRoutes(),{path:"export/:contentTypeStaticName",loadChildren:()=>t.e("common").then(t.bind(t,4350)).then(p=>p.ContentExportRoutes)},{path:"export/:contentTypeStaticName/:selectedIds",loadChildren:()=>t.e("common").then(t.bind(t,4350)).then(p=>p.ContentExportRoutes)},{path:"import",component:e.DialogEntryComponent,data:{dialog:d}},{path:":contentTypeStaticName/import",loadChildren:()=>t.e("common").then(t.bind(t,3031)).then(p=>p.contentImportRoutes),data:{title:"Import Items"}},...u.RD]}]},4007:(v,l,t)=>{t.d(l,{D:()=>a,y:()=>e});var n=t(1726);function e(d){return{[n.O.Boolean]:"toggle_on",[n.O.Custom]:"extension",[n.O.DateTime]:"today",[n.O.Empty]:"crop_free",[n.O.Entity]:"share",[n.O.Hyperlink]:"link",[n.O.Number]:"dialpad",[n.O.String]:"text_fields"}[d]??"device_unknown"}function a(d){return{[n.O.Boolean]:"Boolean (yes/no)",[n.O.Custom]:"Custom - ui-tools or custom types",[n.O.DateTime]:"Date and/or time",[n.O.Empty]:"Empty - for form-titles etc.",[n.O.Entity]:"Entity (other content-items)",[n.O.Hyperlink]:"Link / file reference",[n.O.Number]:"Number",[n.O.String]:"Text / string"}[d]??"device_unknown"}},5733:(v,l,t)=>{t.r(l),t.d(l,{contentTypeFieldsRoutes:()=>p});var n=t(1195),e=t(3454),a=t(2437),d=t(5544),m=t(9204);const s={name:"EDIT_CONTENT_TYPE_FIELDS_DIALOG",initContext:!1,panelSize:"medium",panelClass:null,getComponent:()=>(0,m.A)(function*(){const{EditContentTypeFieldsComponent:c}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("common"),t.e("projects_eav-ui_src_app_content-type-fields_edit-content-type-fields_edit-content-type-fields-974b18")]).then(t.bind(t,4099));return c})()},p=[{path:"",component:d.DialogEntryComponent,data:{dialog:{name:"CONTENT_TYPE_FIELDS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:()=>(0,m.A)(function*(){const{ContentTypeFieldsComponent:c}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-projects_eav-ui_src_app_shared_ag-grid_column-definitions_ts-projects_eav-ui_src_app_-3cb379"),t.e("default-projects_eav-ui_src_app_shared_services_clipboard_service_ts-node_modules_angular_mat-15cf82"),t.e("default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"),t.e("default-projects_eav-ui_src_app_shared_services_service-base_ts-node_modules_angular_material-ffa7b3"),t.e("default-projects_eav-ui_src_app_features_feature-icon-text_feature-icon-text_component_ts-pro-5596fb"),t.e("common"),t.e("projects_eav-ui_src_app_content-type-fields_content-type-fields_component_ts")]).then(t.bind(t,5715));return c})()}},children:[{path:"add/:contentTypeStaticName",component:d.DialogEntryComponent,data:{dialog:s}},{path:"update/:contentTypeStaticName/:id/:editMode",component:d.DialogEntryComponent,data:{dialog:s}},...e.H.getRoutes(),a.k.route,...n.RD]}]},5160:(v,l,t)=>{t.d(l,{O:()=>a});var n=t(7580),e=t(4456);let a=(()=>{class d{constructor(){this.appReservedNames=(0,n.hFB)({})}validate(u){if(!u.value)return null;const s=u.value.toLocaleLowerCase(),p=Object.keys(this.appReservedNames()).find(c=>c.toLocaleLowerCase()===s);return p?{reservedNames:this.appReservedNames()[p]}:null}static mergeReserved(u,s){const p={};return s.forEach(c=>{p[c.StaticName]="this field already exists"}),{...u,...p}}static{this.\u0275fac=function(s){return new(s||d)}}static{this.\u0275dir=n.FsC({type:d,selectors:[["","appReservedNames",""]],inputs:{appReservedNames:[1,"appReservedNames"]},features:[n.Jv_([{provide:e.cz,useExisting:d,multi:!0}])]})}}return d})()},6068:(v,l,t)=>{t.d(l,{g:()=>n.g});var n=t(4029)},6740:(v,l,t)=>{t.d(l,{z:()=>e});const e=t(6619).c.production?[]:["ViewController"]},8857:(v,l,t)=>{t.d(l,{a:()=>p});var n=t(2434),e=t(4435),a=t(6740),d=t(6953),m=t(8275);const u={all:!0,constructor:!1,markTouched:!1,set:!1,disable:!1,getErrors:!0,fields:[...a.z,"*"]},s="ValidationMessage.";class p{constructor(o,i="unknown",r=!1){this.control=o,this.name=i,this.moreDisabled=r,this.log=(0,e.Tq)({UiControl:p},u),this.#t={jsonWarning:`${s}JsonWarning`,formulaWarning:`${s}NotValid`},this.control??={dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1},this.log.extendName(`[${i}]`),this.log.aIfInList("fields",this.name,{moreDisabled:r},"constructor")}static emptyControl(){return new p({dirty:!1,invalid:!1,touched:!1,value:null,disabled:!1})}get dirty(){return this.control.dirty}get invalid(){return this.control.invalid}get touched(){return this.control.touched}get disabled(){return this.control.disabled||this.moreDisabled}get touchedAndInvalid(){return this.control.touched&&this.control.invalid}markTouched(){this.log.aIfInList("fields",this.name,null,"markTouched"),p.markTouched(this.control)}setIfChanged(o){this.log.aIfInList("fields",this.name,{before:this.control.value,newValue:o},"setIfChanged"),!(0,n.A)(o,this.control.value)&&this.#e(o)}#e(o){const i=this.control,r=i.value;this.log.aIfInList("fields",this.name,{before:r,newValue:o},"set"),i.touched||i.markAsTouched(),!i.dirty&&!d.$.fieldValuesAreEqual(r,o)&&i.markAsDirty(),i.patchValue(o)}disable(o){this.log.aIfInList("fields",this.name,null,`disable: ${o}`),p.disable(this.control,o)}static markTouched(o){o.touched||(o.markAsTouched(),o.updateValueAndValidity())}static disable(o,i){o.disabled!==i&&(i?o.disable():o.enable())}getErrors(){const o=this.control,i=o.errors,r=this.log.fnIfInList("getErrors","fields",this.name,{control:o,name:this.name});if(!o.invalid)return r.r("","valid");if(!o.dirty&&!o.touched)return r.r("","not dirty or touched");for(const h of Object.keys(i)){const f="formulaError"===h?o.errors.formulaMessage??m.n.messages[h]?.(!0):m.n.messages[h]?.(!0);if(f)return r.r(f,"error found")}return r.r("","no error")}#t;getWarnings(){const o=this.control;if(null==o._warning||!o.dirty&&!o.touched)return"";let i="";for(const r of Object.keys(o._warning))if(i="formulaWarning"===r?o._warning.formulaMessage??this.#t[r]:this.#t[r],i)break;return i}}},6953:(v,l,t)=>{t.d(l,{$:()=>e});var n=t(3826);class e{static fieldValuesAreEqual(d,m){return!!(d===m||"number"==typeof d&&"number"==typeof m&&isNaN(d)&&isNaN(m)||Array.isArray(d)&&Array.isArray(m)&&n.a.arraysEqual(d,m))}static getItemValuesChanges(d,m){const u={};for(const s of Object.keys(m)){const p=m[s];e.fieldValuesAreEqual(p,d[s])||(u[s]=p)}return 0===Object.keys(u).length?void 0:u}}},8275:(v,l,t)=>{t.d(l,{n:()=>d});var n=t(8857);const e="ValidationMessage.",a="ValidationMessage.NotValid";let d=(()=>{class m{static{this.messages={required:s=>s?`${e}Required`:`${e}RequiredShort`,min:s=>s?`${e}Min`:a,max:s=>s?`${e}Max`:a,minNoItems:s=>s?`${e}MinNoItems`:a,maxNoItems:s=>s?`${e}MaxNoItems`:a,pattern:s=>s?`${e}Pattern`:a,decimals:s=>s?`${e}Decimals`:a,jsonError:s=>s?`${e}JsonError`:a,formulaError:s=>a}}static validateForm(s){const p={};for(const[c,o]of Object.entries(s.controls))if(n.a.markTouched(o),o.invalid)for(const i of Object.keys(o.errors))if(p[c]=this.messages[i]?.(!1),p[c])break;return p}}return m})()},7903:(v,l,t)=>{t.r(l),t.d(l,{importRoutes:()=>d});var n=t(5544),e=t(9204);const d=[{path:"",component:n.DialogEntryComponent,data:{dialog:{name:"IMPORT_APP_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,e.A)(function*(){const{ImportAppComponent:m}=yield Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("projects_eav-ui_src_app_import-app_import-app_component_ts")]).then(t.bind(t,781));return m})()}}}]},6860:(v,l,t)=>{t.r(l),t.d(l,{historyRoutes:()=>d});var n=t(5544),e=t(9204);const d=[{path:"",component:n.DialogEntryComponent,data:{dialog:{name:"ITEM_HISTORY_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,e.A)(function*(){const{ItemHistoryComponent:m}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-projects_eav-ui_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-node_modules_angular_material_fesm2022_expansion_mjs"),t.e("projects_eav-ui_src_app_item-history_item-history_component_ts")]).then(t.bind(t,9642));return m})()},title:"Item History"}}]},9669:(v,l,t)=>{t.d(l,{y:()=>d});var n=t(6474),e=t(7580);const a="cms/contentgroup/";let d=(()=>{class m extends n.D{getItems(s){return this.getHttpApiUrl(a+"replace",{params:{appId:this.appId,guid:s.guid,part:s.part,index:s.index.toString()}})}saveItem(s){return this.http.post(this.apiUrl(a+"replace"),{},{params:{guid:s.guid,part:s.part,index:s.index.toString(),entityId:s.id.toString(),add:`${s.add}`}})}removeItem(s,p){return this.http.delete(this.apiUrl("cms/list/delete"),{params:{index:p,parent:s.guid,fields:s.part}})}getList(s){return this.getHttpApiUrl(a+"itemlist",{params:{appId:this.appId,guid:s.guid,part:s.part}})}saveList(s,p){return this.http.post(this.apiUrl(a+"itemlist"),p,{params:{appId:this.appId,guid:s.guid,part:s.part}})}getHeader(s,p){return this.getSignal(a+"header",{params:{appId:this.appId,guid:s.guid}},p)}static{this.\u0275fac=(()=>{let s;return function(c){return(s||(s=e.xGo(m)))(c||m)}})()}static{this.\u0275prov=e.jDH({token:m,factory:m.\u0275fac})}}return m})()},318:(v,l,t)=>{t.r(l),t.d(l,{replaceContentRoutes:()=>m});var n=t(5544),e=t(9204);const a={name:"REPLACE_CONTENT_DIALOG",initContext:!0,panelSize:"medium",panelClass:null,getComponent:()=>(0,e.A)(function*(){const{ReplaceContentComponent:u}=yield Promise.all([t.e("default-node_modules_angular_forms_fesm2022_forms_mjs"),t.e("default-node_modules_angular_material_fesm2022_input_mjs"),t.e("default-node_modules_angular_material_fesm2022_autocomplete_mjs"),t.e("common"),t.e("projects_eav-ui_src_app_replace-content_replace-content_component_ts-node_modules_rxjs_dist_e-178ebb")]).then(t.bind(t,4513));return u})()};var d=t(1195);const m=[{path:"",component:n.DialogEntryComponent,data:{dialog:a},children:[...d.Ed]}]},5544:(v,l,t)=>{t.r(l),t.d(l,{DialogEntryComponent:()=>u});var n=t(4435),e=t(8873),a=t(7580),d=t(7941),m=t(2159);let u=(()=>{class s{#e;#t;constructor(c,o,i,r,h,f,C){this.matDialog=c,this.viewContainerRef=o,this.router=i,this.route=r,this.context=h,this.changeDetectorRef=f,this.injector=C,this.log=(0,n.Tq)({DialogEntryComponent:s});const I=this.router.getCurrentNavigation();this.#e=I?.extras?.state||{}}ngOnInit(){const c=this.log.fn("ngOnInit"),o=this.route.snapshot.data.dialog;if(null==o)throw new Error("Could not find config for dialog. Did you forget to add DialogConfig to route data?");c.a("Open dialog: "+o.name,{id:this.context.id,context:this.context}),o.getComponent(this.injector).then(i=>{const r=this.matDialog;r._dialogAnimatingOpen&&r._lastDialogRef?r._lastDialogRef.afterOpened().subscribe(()=>this.openDialogComponent(o,i)):this.openDialogComponent(o,i)})}ngOnDestroy(){this.#t.close()}openDialogComponent(c,o){this.log.a(`Open dialog(initContext: ${c.initContext})`,{name:c.name,"Contextid:":this.context.log.svcId,"Context:":this.context}),c.initContext&&this.context.init(this.route),this.#t=this.matDialog.open(o,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:this.#e,panelClass:["dialog-panel",`dialog-panel-${c.panelSize}`,c.showScrollbar?"show-scrollbar":"no-scrollbar",...c.panelClass?c.panelClass:[]],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.#t.afterClosed().subscribe(i=>{this.log.a("Dialog was closed - name:"+c.name,{data:i});const r=i;if(null==r?.navigateUrl)if(this.route.pathFromRoot.length<=3)try{window.parent.$2sxc.totalPopup.close()}catch{}else this.router.navigate(["./"],this.route.snapshot.url.length>0?{relativeTo:this.route.parent,state:i}:{relativeTo:this.route.parent.parent,state:i});else this.router.navigate([r.navigateUrl])}),this.changeDetectorRef.markForCheck()}static{this.\u0275fac=function(o){return new(o||s)(a.rXU(d.bZ),a.rXU(a.c1b),a.rXU(m.Ix),a.rXU(m.nX),a.rXU(e.o),a.rXU(a.gRc),a.rXU(a.zZn))}}static{this.\u0275cmp=a.VBU({type:s,selectors:[["app-dialog-entry"]],features:[a.Jv_([e.o])],decls:0,vars:0,template:function(o,i){},encapsulation:2})}}return s})()},9417:(v,l,t)=>{function n(){return/^[a-f0-9]{8}(?:-[a-f0-9]{4}){3}-[a-f0-9]{12}$/i}t.d(l,{L:()=>n})},4038:(v,l,t)=>{t.d(l,{i:()=>n});class n{static tryParse(a){try{return JSON.parse(a)}catch{}}}},3518:(v,l,t)=>{function n(e,a,d=0){const u=e.length===d+1?a:n.bind(this,e,a,d+1),s=e[d],p="string"==typeof s.test?s.test:null,c="function"==typeof s.test?s.test:null,o=window;null!=p&&o[p]||null!=c&&c()?a():window.require([s.src],i=>{i&&!o[p]&&(o[p]=i),u()})}t.d(l,{P:()=>n})},1477:(v,l,t)=>{function n(e){try{const a=e?.Api;if(!a)return;const m={...window.$2sxc.env.header,appApi:a};window.$2sxc.env.load(m)}catch{}}t.d(l,{W:()=>n})},6666:(v,l,t)=>{t.d(l,{F:()=>n});const n={App:"App",Site:"Site",Global:"Global"}},2785:(v,l,t)=>{t.d(l,{o:()=>u});var n=t(7567),e=t(8172),a=t(334),d=t(6474),m=t(7580);let u=(()=>{class s extends d.D{openCodeFile(c,o,i){const r=n.Y.Develop,h={items:[{Path:c,...null!=i&&a.c.editId(i)}]},f={...this.buildHashParam(e.Q$,r),...this.buildHashParam(e.P3,o.toString()),...this.buildHashParam(e.Ul,JSON.stringify(h.items))},C=this.buildFullUrl(f);window.open(C,"_blank")}openQueryDesigner(c){const o=n.Y.PipelineDesigner,i={items:[a.c.editId(c)]},r={...this.buildHashParam(e.Q$,o),...this.buildHashParam(e.Xw,c.toString()),...this.buildHashParam(e.Ul,JSON.stringify(i.items))},h=this.buildFullUrl(r);window.open(h,"_blank")}openAppsManagement(c,o){const i={...o&&{tab:o}},r={...this.buildHashParam(e.v4,c.toString()),...this.buildHashParam(e.Q$,n.Y.Zone),...Object.keys(i).length?this.buildHashParam(e.z0,JSON.stringify(i)):""},h=this.buildFullUrl(r);window.open(h,"_blank")}openAppAdministration(c,o,i,r){const h={...i&&{tab:i},...r&&{scope:r}},f={...this.buildHashParam(e.v4,c.toString()),...this.buildHashParam(e.K7,o.toString()),...this.buildHashParam(e.Q$,n.Y.App),...Object.keys(h).length?this.buildHashParam(e.z0,JSON.stringify(h)):""},C=this.buildFullUrl(f);window.open(C,"_blank")}buildSharedHashParams(){return{...this.buildHashParam(e.v4,this.zoneId),...this.buildHashParam(e.K7,this.appId),...this.buildHashParam(e.Zm,this.context.moduleId?.toString()),...this.buildHashParam(e.p$,this.context.contentBlockId?.toString()),...this.buildHashParam(e.h9),...sessionStorage.getItem(e.tn)?this.buildHashParam(e.tn):{}}}buildHashParam(c,o){const i=c.replace(e.Pl,""),r=o??sessionStorage.getItem(c),h=encodeURIComponent(r);return{[i]:h}}buildFullUrl(c){const o=sessionStorage.getItem(e.zX),i=new URL(o),r=i.origin+i.pathname+i.search,h={...this.buildSharedHashParams(),...c};return r+Object.entries(h).reduce((C,[I,P])=>`${C}&${I}=${P}`,"").replace("&","#")}static{this.\u0275fac=(()=>{let c;return function(i){return(c||(c=m.xGo(s)))(i||s)}})()}static{this.\u0275prov=m.jDH({token:s,factory:s.\u0275fac})}}return s})()},3143:(v,l,t)=>{t.d(l,{$:()=>d});var n=t(9923),e=t(819);const a=(m,u)=>(m.push(u),m);function d(){return(0,e.N)((m,u)=>{(0,n.T)(a,[])(m).subscribe(u)})}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.07.00/dist/ng-edit/common.e75f96ec46e0ede0.js.map