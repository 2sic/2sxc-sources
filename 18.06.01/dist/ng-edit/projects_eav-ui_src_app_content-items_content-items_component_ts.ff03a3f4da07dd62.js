"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_content-items_content-items_component_ts"],{6360:(R,b,o)=>{o.d(b,{D:()=>g});var t=o(6474),l=o(9148);let g=(()=>{class T extends t.D{exportContent(_,C){const y=C?"&selectedids="+C.join():"",s=this.apiUrl("admin/entity/Download")+"?appId="+this.appId+"&language="+_.language+"&defaultLanguage="+_.defaultLanguage+"&contentType="+_.contentTypeStaticName+"&recordExport="+_.recordExport+"&resourcesReferences="+_.resourcesReferences+"&languageReferences="+_.languageReferences+y;window.open(s,"_blank","")}exportJson(_){const C=this.apiUrl("admin/type/Json")+"?appId="+this.appId+"&name="+_;window.open(C,"_blank","")}exportEntity(_,C,y){const s=this.apiUrl("admin/entity/Json")+"?appId="+this.appId+"&id="+_+"&prefix="+C+"&withMetadata="+y;window.open(s,"_blank","")}exportDataBundle(_){const C=this.apiUrl("admin/type/JsonBundleExport")+"?appId="+this.appId+"&exportConfiguration="+_+"&indentation=1";window.open(C,"_blank","")}static{this.\u0275fac=(()=>{let _;return function(y){return(_||(_=l.xGo(T)))(y||T)}})()}static{this.\u0275prov=l.jDH({token:T,factory:T.\u0275fac})}}return T})()},7730:(R,b,o)=>{o.r(b),o.d(b,{ContentItemsComponent:()=>Ce});var t=o(9148),l=o(4175),m=o(7941),p=o(3840),E=o(2159),h=o(2938),g=o(7693),T=o(6360),M=o(3454),_=o(1183),C=o(1828),y=o(1960),s=o(4456),d=o(3804),v=o(4950),D=o(7984);const k=["valueInput"];let x=(()=>{class a{constructor(){this.filter="",this.idFilterString="",this.idFilter=[]}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.filter||this.idFilter.length>0}doesFilterPass(e){if(""!==this.filter){const i=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:r=>e.node.data[r],node:e.node});if(null==i||!i.some(r=>!!r&&r.includes(this.filter)))return!1}if(this.idFilter.length>0){const n=e.data[this.filterParams.colDef.headerName];if(null==n||!this.idFilter.some(i=>n.some(r=>r.Id===i)))return!1}return!0}getModel(){return this.isFilterActive()?{filterType:"entity",filter:this.filter,idFilter:this.idFilter}:void 0}setModel(e){this.filter=e?.filter??"",this.idFilter=e?.idFilter??[],this.idFilterString=e?.idFilter?.join(",")??""}afterGuiAttached(e){this.valueInputRef.nativeElement.focus()}updateIdFilter(){this.idFilter=this.idFilterString.split(",").map(e=>parseInt(e,10)).filter(e=>!isNaN(e))}filterChanged(){this.filterParams.filterChangedCallback()}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-entity-filter"]],viewQuery:function(n,i){if(1&n&&t.GBs(k,5),2&n){let r;t.mGM(r=t.lsd())&&(i.valueInputRef=r.first)}},standalone:!0,features:[t.aNF],decls:9,vars:2,consts:[["valueInput",""],["color","accent",1,"eav-mat-form-field"],["matInput","","type","text",3,"ngModelChange","ngModel"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"mat-form-field",1)(1,"mat-label"),t.EFF(2,"Value"),t.k0s(),t.j41(3,"input",2,0),t.mxI("ngModelChange",function(f){return t.eBV(r),t.DH7(i.filter,f)||(i.filter=f),t.Njj(f)}),t.bIt("ngModelChange",function(){return t.eBV(r),t.Njj(i.filterChanged())}),t.k0s()(),t.j41(5,"mat-form-field",1)(6,"mat-label"),t.EFF(7,"IDs (comma separated)"),t.k0s(),t.j41(8,"input",2),t.mxI("ngModelChange",function(f){return t.eBV(r),t.DH7(i.idFilterString,f)||(i.idFilterString=f),t.Njj(f)}),t.bIt("ngModelChange",function(){return t.eBV(r),i.updateIdFilter(),t.Njj(i.filterChanged())}),t.k0s()()}2&n&&(t.R7$(3),t.R50("ngModel",i.filter),t.R7$(5),t.R50("ngModel",i.idFilterString))},dependencies:[s.YN,s.me,s.BC,s.vS,d.Wk,v.RG,v.rl,v.nJ,D.fS,D.fg],styles:["[_nghost-%COMP%]{display:block;padding:16px 12px 2px}.mat-mdc-form-field[_ngcontent-%COMP%]{display:block;width:175px}"]})}}return a})();var N=o(251),w=o(8172),et=o(4575),$=o(4601),nt=o(5699),S=o(1726),G=o(3216),at=o(4435),P=o(334),it=o(7037),ot=o(9914),st=o(8471),rt=o(6817),lt=o(9431),dt=o(7993),j=o(5060),A=o(1034);function ct(a,c){if(1&a){const e=t.RV6();t.j41(0,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.do("delete"))}),t.j41(1,"mat-icon"),t.EFF(2,"delete"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Delete"),t.k0s()()}if(2&a){const e=t.XpG();t.Y8G("disabled",e.item._EditInfo.DisableDelete)}}let pt=(()=>{class a{agInit(e){this.params=e,this.item=e.data}refresh(e){return!0}do(e){this.params.do(e,this.item)}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-data-bundle-actions"]],standalone:!0,features:[t.aNF],decls:13,vars:2,consts:[["menu","matMenu"],[1,"actions-component"],["matRipple","","tippy","Clone",1,"eav-grid-action-button","default-link","highlight",3,"href"],["matRipple","","tippy","Export",1,"eav-grid-action-button","highlight",3,"click"],["matRipple","","tippy","More",1,"eav-grid-action-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["matMenuContent",""],["mat-menu-item","",3,"click","disabled"]],template:function(n,i){if(1&n){const r=t.RV6();t.j41(0,"div",1)(1,"a",2)(2,"mat-icon"),t.EFF(3,"file_copy"),t.k0s()(),t.j41(4,"div",3),t.bIt("click",function(){return t.eBV(r),t.Njj(i.do("export"))}),t.j41(5,"mat-icon"),t.EFF(6,"cloud_download"),t.k0s()(),t.j41(7,"div",4)(8,"mat-icon"),t.EFF(9,"more_horiz"),t.k0s()()(),t.j41(10,"mat-menu",5,0),t.DNE(12,ct,5,1,"ng-template",6),t.k0s()}if(2&n){const r=t.sdS(11);t.R7$(),t.Y8G("href",i.params.urlTo("clone",i.item),t.B4B),t.R7$(6),t.Y8G("matMenuTriggerFor",r)}},dependencies:[j.pZ,j.r6,p.m_,p.An,A.Cn,A.kk,A.fb,A.z8,A.Cp,$.e],encapsulation:2})}}return a})();function mt(a,c){if(1&a&&(t.j41(0,"span",1),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.R7$(),t.JRh(e.entities)}}let ut=(()=>{class a{agInit(e){Array.isArray(e.value)&&(this.encodedValue=this.htmlEncode(e.value.join(", ")),e.colDef.allowMultiValue&&(this.entities=e.value.length))}refresh(e){return!0}htmlEncode(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-content-items-entity"]],standalone:!0,features:[t.aNF],decls:3,vars:3,consts:[[3,"tippy"],[1,"more-entities"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.DNE(1,mt,2,1,"span",1),t.EFF(2),t.k0s()),2&n&&(t.Y8G("tippy",i.encodedValue),t.R7$(),t.vxM(i.entities?1:-1),t.R7$(),t.SpI(" ",i.encodedValue,"\n"))},dependencies:[$.e],styles:[".more-entities[_ngcontent-%COMP%]{padding:0 8px;border-radius:10px;border:1px solid rgba(29,39,61,.44);-webkit-user-select:none;user-select:none}"]})}}return a})();var U=o(316),Y=o(6256);const ht=a=>({"hide-until-row-hover":a});function gt(a,c){if(1&a&&(t.j41(0,"a",2)(1,"mat-icon",4),t.EFF(2),t.k0s()()),2&a){const e=t.XpG();t.Y8G("tippy",e.metadataTooltip)("href",e.params.urlTo("openMetadata",e.item),t.B4B)("ngClass",t.eq3(6,ht,!e.metadataCount&&!e.value.metadata)),t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}function ft(a,c){if(1&a&&(t.j41(0,"div",3)(1,"mat-icon",5),t.EFF(2),t.k0s()()),2&a){const e=t.XpG();t.R7$(),t.Y8G("matBadge",e.metadataCount)("matBadgeHidden",!e.metadataCount),t.R7$(),t.SpI("",e.value.metadata?"loyalty":"local_offer"," ")}}let _t=(()=>{class a{agInit(e){this.params=e,this.value=e.value,this.item=e.data,this.disableMetadata=this.item._EditInfo.DisableMetadata,this.metadataCount=this.item.Metadata?.length??0;const n=this.item.For;this.metadataTooltip=n?`This item is metadata for:\nTarget: ${n.Target}\nTargetType: ${n.TargetType}`+(n.KeyNumber?`\nNumber: ${n.KeyNumber}`:"")+(n.KeyString?`\nString: ${n.KeyString}`:"")+(n.KeyGuid?`\nGuid: ${n.KeyGuid}`:"")+(n.Title?`\nTitle: ${n.Title}`:""):"This item is not metadata.",this.metadataTooltip+=`\n\nThis item has ${this.metadataCount>0?this.metadataCount:"no"} other metadata ${1===this.metadataCount?"item":"items"} attached to it.`}refresh(e){return!0}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-content-items-status"]],standalone:!0,features:[t.aNF],decls:6,vars:3,consts:[[1,"actions-component"],[1,"eav-grid-action-button","icon",3,"tippy"],["matRipple","",1,"eav-grid-action-button","default-link","highlight",3,"tippy","href","ngClass"],[1,"eav-grid-action-button","disabled"],["matBadgeColor","accent","matBadgeSize","small","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"],["matBadgeColor","accent","matBadgeSize","small","matBadgeDisabled","true","matBadgePosition","below after","aria-hidden","false",3,"matBadge","matBadgeHidden"]],template:function(n,i){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"mat-icon"),t.EFF(3),t.k0s()(),t.DNE(4,gt,3,8,"a",2)(5,ft,3,3,"div",3),t.k0s()),2&n&&(t.R7$(),t.Y8G("tippy",i.value.published?"Published":"Not published"),t.R7$(2),t.JRh(i.value.published?"visibility":"visibility_off"),t.R7$(),t.vxM(i.disableMetadata?i.disableMetadata&&(i.metadataCount||i.value.metadata)?5:-1:4))},dependencies:[p.m_,p.An,j.pZ,j.r6,U.YU,Y.Y,Y.k,$.e],styles:[".hide-until-row-hover[_ngcontent-%COMP%]{visibility:hidden}  .ag-row-hover .hide-until-row-hover{visibility:visible}"]})}}return a})();var Ct=o(4038),H=o(5175),W=o(8827),B=o(5797),X=o(3037),V=o(1817),vt=o(3617),J=o(271),z=o(9999),Tt=o(5445),Z=o(8857),bt=o(3176),Et=o(3758),Q=o(5858),I=o(52),Mt=o(9333),Ft=o(8021),Dt=o(3826),It=o(8873),q=o(336),Rt=o(9417);function kt(a){return c=>{if(!c.value)return null;const e=a.controls.keyType.value,n=c.value.toString();switch(e){case I.YX.keyTypes.number:return/^[0-9]+$/.test(n)?null:{patternWholeNumber:!0};case I.YX.keyTypes.guid:const r=["{","}"].some(F=>n.includes(F)),u=n.substring(r?1:0,r?n.length-1:n.length);return(0,Rt.L)().test(u)?null:{patternGuid:!0};default:return null}}}const tt=a=>({active:a});function xt(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e.targetType),t.R7$(),t.SpI(" ",e.label," ")}}function Pt(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=t.XpG(2);t.Y8G("value",e.formValues.targetType),t.R7$(),t.SpI(" ",e.formValues.targetType," ")}}function Ot(a,c){if(1&a&&(t.j41(0,"mat-select",8),t.Z7z(1,xt,2,2,"mat-option",12,t.fX1),t.DNE(3,Pt,2,2,"mat-option",12),t.k0s()),2&a){const e=t.XpG(),n=t.XpG();t.R7$(),t.Dyx(n.targetTypeOptions),t.R7$(2),t.vxM(e.unknownTargetType?3:-1)}}function jt(a,c){1&a&&t.nrm(0,"input",9)}function Bt(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," Warning: you entered an unknown target type. This may work or may not. Please be sure you know what you're doing "),t.k0s()),2&a&&t.Y8G("isError",!1)}function $t(a,c){if(1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1),t.k0s()),2&a){const e=t.XpG();t.Y8G("isError",!1),t.R7$(),t.JRh(e.targetTypeHint)}}function Gt(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&a&&t.Y8G("isError",!0)}function At(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&a&&t.Y8G("isError",!0)}function Nt(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function St(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&a&&t.Y8G("isError",!0)}function Ut(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e.NameId),t.R7$(),t.SpI(" ",e.Label," ")}}function Vt(a,c){if(1&a&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Content Type"),t.k0s(),t.j41(3,"mat-select",19),t.Z7z(4,Ut,2,2,"mat-option",12,t.fX1),t.k0s()()),2&a){const e=t.XpG();t.R7$(3),t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function zt(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e.value),t.R7$(),t.SpI(" ",e.name," ")}}function Lt(a,c){if(1&a&&(t.j41(0,"mat-form-field",7)(1,"mat-label"),t.EFF(2,"Scope"),t.k0s(),t.j41(3,"mat-select",20),t.Z7z(4,zt,2,2,"mat-option",12,t.fX1),t.j41(6,"mat-option",12),t.EFF(7,"Other..."),t.k0s()()()),2&a){const e=t.XpG(),n=t.XpG();t.R7$(3),t.Y8G("placeholder",e.scopeOptions.length?"":"No items found"),t.R7$(),t.Dyx(e.scopeOptions),t.R7$(2),t.Y8G("value",n.dropdownInsertValue)}}function Xt(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e.Guid),t.R7$(),t.Lme(" ",e.Title," (",e.Id,") ")}}function Kt(a,c){if(1&a&&(t.j41(0,"mat-select",21),t.Z7z(1,Xt,2,3,"mat-option",12,t.fX1),t.k0s()),2&a){const e=t.XpG(3);t.Y8G("placeholder",e.contentItems.length?"":"No items found"),t.R7$(),t.Dyx(e.contentItems)}}function wt(a,c){1&a&&t.nrm(0,"input",22)}function Yt(a,c){if(1&a&&t.DNE(0,Kt,3,1,"mat-select",21)(1,wt,1,0,"input",22),2&a){const e=t.XpG(2);t.vxM(e.guidedKey?0:1)}}function Ht(a,c){if(1&a&&(t.j41(0,"mat-option",12),t.EFF(1),t.k0s()),2&a){const e=c.$implicit;t.Y8G("value",e.NameId),t.R7$(),t.SpI(" ",e.Label," ")}}function Wt(a,c){if(1&a&&(t.j41(0,"mat-select",21),t.Z7z(1,Ht,2,2,"mat-option",12,t.fX1),t.k0s()),2&a){const e=t.XpG(3);t.Y8G("placeholder",e.contentTypes.length?"":"No items found"),t.R7$(),t.Dyx(e.contentTypes)}}function Jt(a,c){1&a&&t.nrm(0,"input",22)}function Zt(a,c){if(1&a&&t.DNE(0,Wt,3,1,"mat-select",21)(1,Jt,1,0,"input",22),2&a){const e=t.XpG(2);t.vxM(e.guidedKey?0:1)}}function Qt(a,c){1&a&&t.eu8(0)}function qt(a,c){if(1&a&&t.DNE(0,Qt,1,0,"ng-container",23),2&a){t.XpG(2);const e=t.sdS(39);t.Y8G("ngTemplateOutlet",e)}}function te(a,c){if(1&a&&t.DNE(0,Yt,2,1)(1,Zt,2,1)(2,qt,1,1,"ng-container"),2&a){let e;const n=t.XpG(),i=t.XpG();t.vxM((e=n.formValues.targetType)===i.eavConstants.metadata.entity.targetType?0:e===i.eavConstants.metadata.contentType.targetType?1:2)}}function ee(a,c){1&a&&t.nrm(0,"input",22)}function ne(a,c){1&a&&t.nrm(0,"input",24)}function ae(a,c){if(1&a&&t.DNE(0,ee,1,0,"input",22)(1,ne,1,0,"input",24),2&a){const e=t.XpG(),n=t.XpG();t.vxM(e.formValues.keyType!==n.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(e.formValues.keyType===n.eavConstants.keyTypes.number?1:-1)}}function ie(a,c){1&a&&t.nrm(0,"input",22)}function oe(a,c){1&a&&t.nrm(0,"input",24)}function se(a,c){if(1&a&&t.DNE(0,ie,1,0,"input",22)(1,oe,1,0,"input",24),2&a){const e=t.XpG(),n=t.XpG();t.vxM(e.formValues.keyType!==n.eavConstants.keyTypes.number?0:-1),t.R7$(),t.vxM(e.formValues.keyType===n.eavConstants.keyTypes.number?1:-1)}}function re(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",14)(1,"button",25),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleGuidedKey(!0))}),t.j41(2,"mat-icon",26),t.EFF(3,"search"),t.k0s()(),t.j41(4,"button",27),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.toggleGuidedKey(!1))}),t.j41(5,"mat-icon",26),t.EFF(6,"text_fields"),t.k0s()()()}if(2&a){const e=t.XpG();t.R7$(),t.Y8G("ngClass",t.eq3(2,tt,e.guidedKey)),t.R7$(3),t.Y8G("ngClass",t.eq3(4,tt,!e.guidedKey))}}function le(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," This field is required "),t.k0s()),2&a&&t.Y8G("isError",!0)}function de(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a whole number "),t.k0s()),2&a&&t.Y8G("isError",!0)}function ce(a,c){1&a&&(t.j41(0,"app-field-hint",10),t.EFF(1," Must be a valid GUID "),t.k0s()),2&a&&t.Y8G("isError",!0)}function pe(a,c){if(1&a){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3,"Create Metadata"),t.k0s()(),t.j41(4,"div",4)(5,"p"),t.EFF(6," This is a special operation to add an item which is metadata for another item, see "),t.j41(7,"a",5),t.EFF(8,"docs"),t.k0s(),t.EFF(9,". "),t.k0s(),t.j41(10,"form",6)(11,"mat-form-field",7)(12,"mat-label"),t.EFF(13,"Target"),t.k0s(),t.DNE(14,Ot,4,1,"mat-select",8)(15,jt,1,0,"input",9),t.k0s(),t.DNE(16,Bt,2,1,"app-field-hint",10)(17,$t,2,2,"app-field-hint",10)(18,Gt,2,1,"app-field-hint",10)(19,At,2,1,"app-field-hint",10),t.j41(20,"mat-form-field",7)(21,"mat-label"),t.EFF(22,"Key type"),t.k0s(),t.j41(23,"mat-select",11),t.Z7z(24,Nt,2,2,"mat-option",12,t.fX1),t.k0s()(),t.DNE(26,St,2,1,"app-field-hint",10)(27,Vt,6,1,"mat-form-field",7)(28,Lt,8,2,"mat-form-field",7),t.j41(29,"app-field-hint"),t.EFF(30," The scope should almost never be changed - "),t.j41(31,"a",13),t.EFF(32,"see help"),t.k0s()(),t.j41(33,"mat-form-field",7)(34,"mat-label"),t.EFF(35,"Key"),t.k0s(),t.DNE(36,te,3,1)(37,ae,2,2)(38,se,2,2,"ng-template",null,0,t.C5r)(40,re,7,6,"div",14),t.k0s(),t.DNE(41,le,2,1,"app-field-hint",10)(42,de,2,1,"app-field-hint",10)(43,ce,2,1,"app-field-hint",10),t.k0s()(),t.j41(44,"mat-dialog-actions",15)(45,"mat-slide-toggle",16),t.bIt("change",function(i){t.eBV(e);const r=t.XpG();return t.Njj(r.toggleGuidedMode(i))}),t.EFF(46),t.k0s(),t.j41(47,"div")(48,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.closeDialog())}),t.EFF(49,"Cancel"),t.k0s(),t.j41(50,"button",18),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.confirm())}),t.EFF(51,"Confirm"),t.k0s()()()()}if(2&a){const e=c,n=t.XpG();t.R7$(10),t.Y8G("formGroup",n.form),t.R7$(4),t.vxM(e.guidedMode?14:-1),t.R7$(),t.vxM(e.guidedMode?-1:15),t.R7$(),t.vxM(n.form.controls.targetType.touched&&!n.form.controls.targetType.invalid&&e.unknownTargetType?16:-1),t.R7$(),t.vxM(e.targetTypeHint?17:-1),t.R7$(),t.vxM(n.form.controls.targetType.touched&&null!=n.form.controls.targetType.errors&&n.form.controls.targetType.errors.required?18:-1),t.R7$(),t.vxM(n.form.controls.targetType.touched&&null!=n.form.controls.targetType.errors&&n.form.controls.targetType.errors.pattern?19:-1),t.R7$(5),t.Dyx(e.keyTypeOptions),t.R7$(2),t.vxM(n.form.controls.keyType.touched&&null!=n.form.controls.keyType.errors&&n.form.controls.keyType.errors.required?26:-1),t.R7$(),t.vxM(e.guidedMode&&e.formValues.targetType===n.eavConstants.metadata.entity.targetType?27:-1),t.R7$(),t.vxM(!e.guidedMode||e.formValues.targetType!==n.eavConstants.metadata.entity.targetType&&e.formValues.targetType!==n.eavConstants.metadata.contentType.targetType?-1:28),t.R7$(8),t.vxM(e.guidedMode?36:37),t.R7$(4),t.vxM(e.guidedMode&&e.guidedKeyExists?40:-1),t.R7$(),t.vxM(n.form.controls.key.touched&&null!=n.form.controls.key.errors&&n.form.controls.key.errors.required?41:-1),t.R7$(),t.vxM(n.form.controls.key.touched&&null!=n.form.controls.key.errors&&n.form.controls.key.errors.patternWholeNumber?42:-1),t.R7$(),t.vxM(n.form.controls.key.touched&&null!=n.form.controls.key.errors&&n.form.controls.key.errors.patternGuid?43:-1),t.R7$(2),t.Y8G("tippy",e.guidedMode?"Guided mode helps you select options that work":"Manual mode is for advanced uses and allows you to insert any values")("checked",e.guidedMode),t.R7$(),t.SpI(" ",e.guidedMode?"Guided":"Manual"," "),t.R7$(4),t.Y8G("disabled",!n.form.valid)}}let me=(()=>{class a extends bt.${constructor(e,n){super(),this.dialog=e,this.context=n,this.hostClass="dialog-component",this.eavConstants=I.YX,this.dropdownInsertValue=Q.O,this.contentItemsService=(0,h.d)(q.F),this.contentTypesService=(0,h.d)(Tt.gs)}ngOnInit(){this.targetTypeOptions=Object.values(I.YX.metadata).map(n=>({...n})),this.keyTypeOptions=Object.values(I.YX.keyTypes),this.keyTypeOptions$=new B.t([]),this.scopeOptions$=new B.t([]),this.guidedMode$=new B.t(!0),this.contentItems$=new B.t([]),this.contentTypes$=new B.t([]),this.guidedKey$=new B.t(!0),this.fetchScopes(),this.form=new s.J3({}),this.form.addControl("targetType",new s.hs(I.YX.metadata.entity.targetType,[s.k0.required,s.k0.pattern(/^[0-9]+$/)])),this.form.addControl("keyType",new s.hs(I.YX.metadata.entity.keyType,[s.k0.required])),this.form.addControl("contentTypeForContentItems",new s.hs(null)),this.form.addControl("scopeForContentTypes",new s.hs(I.YX.scopes.default.value)),this.form.addControl("key",new s.hs(null,[s.k0.required,kt(this.form)])),this.subscriptions.add(this.form.controls.scopeForContentTypes.valueChanges.pipe((0,X.Z)(this.form.controls.scopeForContentTypes.value),(0,V.F)()).subscribe(n=>{null!=this.form.controls.contentTypeForContentItems.value&&this.form.controls.contentTypeForContentItems.patchValue(null),n===Q.O?(n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||I.YX.scopes.default.value,this.scopeOptions$.value.some(i=>i.value===n)||this.scopeOptions$.next([{name:n,value:n},...this.scopeOptions$.value]),this.form.controls.scopeForContentTypes.patchValue(n)):this.fetchContentTypes(n)})),this.subscriptions.add((0,vt.h)(this.form.controls.targetType.valueChanges.pipe((0,V.F)()),this.form.controls.keyType.valueChanges.pipe((0,V.F)())).subscribe(()=>{this.guidedKey$.next(!0),null!=this.form.getRawValue().key&&this.form.patchValue({key:null})})),this.subscriptions.add(this.form.controls.contentTypeForContentItems.valueChanges.pipe((0,X.Z)(this.form.controls.contentTypeForContentItems.value),(0,V.F)()).subscribe(n=>{const i=this.form.getRawValue();i.targetType===I.YX.metadata.entity.targetType&&null!=i.key&&this.form.patchValue({key:null}),this.contentItemsService.getAll(n).subscribe(r=>{this.contentItems$.next(r)})}));const e=this.form.valueChanges.pipe((0,X.Z)(this.form.getRawValue()),(0,J.T)(()=>this.form.getRawValue()),(0,Ft.A)(n=>n));this.subscriptions.add((0,z.z)([e,this.guidedMode$]).subscribe(([n,i])=>{const r=this.targetTypeOptions.find(L=>L.targetType===n.targetType),u=i&&r?[r.keyType]:[...this.keyTypeOptions];Dt.a.arraysEqual(u,this.keyTypeOptions$.value)||this.keyTypeOptions$.next(u);const f={};this.keyTypeOptions$.value.includes(n.keyType)||(f.keyType=this.keyTypeOptions$.value[0]);const F=i&&n.targetType===I.YX.metadata.app.targetType;F&&n.key!==this.context.appId&&(f.key=this.context.appId),Object.keys(f).length&&this.form.patchValue(f),Z.a.disable(this.form.controls.keyType,i&&this.keyTypeOptions$.value.length<=1),Z.a.disable(this.form.controls.key,F)})),this.viewModel$=(0,z.z)([(0,z.z)([this.guidedMode$,this.keyTypeOptions$,this.scopeOptions$,this.contentItems$,this.contentTypes$]),(0,z.z)([e,this.guidedKey$])]).pipe((0,J.T)(([[n,i,r,u,f],[F,O]])=>({guidedMode:n,unknownTargetType:!this.targetTypeOptions.some(K=>K.targetType===F.targetType),targetTypeHint:n&&this.targetTypeOptions.find(K=>K.targetType===F.targetType)?.hint,keyTypeOptions:i,scopeOptions:r,guidedKey:O,guidedKeyExists:[I.YX.metadata.entity.targetType,I.YX.metadata.contentType.targetType].includes(F.targetType),formValues:F,contentItems:u,contentTypes:f})))}ngOnDestroy(){this.guidedMode$.complete(),this.keyTypeOptions$.complete(),this.contentItems$.complete(),this.contentTypes$.complete(),this.guidedKey$.complete(),super.ngOnDestroy()}closeDialog(e){this.dialog.close(e)}toggleGuidedKey(e){this.guidedKey$.next(e)}toggleGuidedMode(e){this.guidedMode$.next(e.checked)}confirm(){const e=this.form.getRawValue(),n={target:this.targetTypeOptions.find(i=>i.targetType===e.targetType)?.target,targetType:e.targetType,keyType:e.keyType,key:e.keyType===I.YX.keyTypes.guid?e.key.replace(/{|}/g,""):e.key.toString()};this.closeDialog(n)}fetchContentTypes(e){this.contentTypesService.retrieveContentTypes(e).subscribe(n=>{this.contentTypes$.next(n)})}fetchScopes(){this.contentTypesService.getScopes().subscribe(e=>{this.scopeOptions$.next(e)})}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(m.CP),t.rXU(It.o))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-create-metadata-dialog"]],hostVars:1,hostBindings:function(n,i){2&n&&t.Mr5("className",i.hostClass)},standalone:!0,features:[t.Vt3,t.aNF],decls:2,vars:3,consts:[["defaultKeyInput",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://go.2sxc.org/metadata","target","_blank"],[3,"formGroup"],["color","accent",2,"width","100%","margin-bottom","8px"],["formControlName","targetType","required",""],["matInput","","type","number","min","0","formControlName","targetType","required",""],[3,"isError"],["formControlName","keyType","required",""],[3,"value"],["href","https://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matTextSuffix","",1,"eav-selection-suffix"],[1,"eav-dialog-actions"],["color","accent",3,"change","tippy","checked"],["mat-raised-button","","type","button",3,"click"],["mat-raised-button","","type","button","color","accent",3,"click","disabled"],["formControlName","contentTypeForContentItems",3,"placeholder"],["formControlName","scopeForContentTypes",3,"placeholder"],["formControlName","key","required","",3,"placeholder"],["matInput","","type","text","formControlName","key","required",""],[4,"ngTemplateOutlet"],["matInput","","type","number","formControlName","key","required",""],["mat-icon-button","","type","button","tippy","Pick existing value",1,"eav-selection-suffix-button",3,"click","ngClass"],[1,"eav-icon"],["mat-icon-button","","type","button","tippy","Manual entry",1,"eav-selection-suffix-button",3,"click","ngClass"]],template:function(n,i){if(1&n&&(t.DNE(0,pe,52,19,"div",1),t.nI1(1,"async")),2&n){let r;t.vxM((r=t.bMT(1,1,i.viewModel$))?0:-1,r)}},dependencies:[s.YN,s.qT,s.me,s.Q0,s.BC,s.cb,s.YS,s.VZ,s.X1,s.j4,s.JD,v.RG,v.rl,v.nJ,v.yw,H.Ve,H.VO,j.wT,j.Sy,D.fS,D.fg,U.T3,l.Hl,l.$z,l.iY,U.YU,p.m_,p.An,m.E7,W.mV,W.sG,U.Jj,Et.F,Mt.c,$.e],encapsulation:2})}}return a})(),ue=(()=>{class a{constructor(){this.published="",this.metadata="",this.hasMetadata=""}agInit(e){this.filterParams=e}isFilterActive(){return""!==this.published||""!==this.metadata||""!==this.hasMetadata}doesFilterPass(e){let n=!1,i=!1,r=!1;const f=this.filterParams.valueGetter({api:this.filterParams.api,colDef:this.filterParams.colDef,column:this.filterParams.column,columnApi:this.filterParams.columnApi,context:this.filterParams.context,data:e.node.data,getValue:F=>e.node.data[F],node:e.node});return n=""===this.published||null!=f.published&&f.published.toString()===this.published,i=""===this.metadata||null!=f.metadata&&f.metadata.toString()===this.metadata,r=""===this.hasMetadata||null!=f.hasMetadata&&f.hasMetadata.toString()===this.hasMetadata,n&&i&&r}getModel(){return this.isFilterActive()?{filterType:"pub-meta",published:this.published,metadata:this.metadata,hasMetadata:this.hasMetadata}:void 0}setModel(e){this.published=e?e.published:"",this.metadata=e?e.metadata:"",this.hasMetadata=e?e.hasMetadata:""}afterGuiAttached(e){}filterChanged(){this.filterParams.filterChangedCallback()}static{this.\u0275fac=function(n){return new(n||a)}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-pub-meta-filter"]],standalone:!0,features:[t.aNF],decls:27,vars:3,consts:[[1,"title"],[3,"ngModelChange","ngModel"],["value",""],["value","true"],["value","false"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.EFF(1,"Published"),t.k0s(),t.j41(2,"mat-radio-group",1),t.mxI("ngModelChange",function(u){return t.DH7(i.published,u)||(i.published=u),u}),t.bIt("ngModelChange",function(){return i.filterChanged()}),t.j41(3,"mat-radio-button",2),t.EFF(4,"All"),t.k0s(),t.j41(5,"mat-radio-button",3),t.EFF(6,"Published"),t.k0s(),t.j41(7,"mat-radio-button",4),t.EFF(8,"Not published"),t.k0s()(),t.j41(9,"div",0),t.EFF(10,"Is Metadata"),t.k0s(),t.j41(11,"mat-radio-group",1),t.mxI("ngModelChange",function(u){return t.DH7(i.metadata,u)||(i.metadata=u),u}),t.bIt("ngModelChange",function(){return i.filterChanged()}),t.j41(12,"mat-radio-button",2),t.EFF(13,"All"),t.k0s(),t.j41(14,"mat-radio-button",3),t.EFF(15,"Is metadata"),t.k0s(),t.j41(16,"mat-radio-button",4),t.EFF(17,"Is not metadata"),t.k0s()(),t.j41(18,"div",0),t.EFF(19,"Has Metadata"),t.k0s(),t.j41(20,"mat-radio-group",1),t.mxI("ngModelChange",function(u){return t.DH7(i.hasMetadata,u)||(i.hasMetadata=u),u}),t.bIt("ngModelChange",function(){return i.filterChanged()}),t.j41(21,"mat-radio-button",2),t.EFF(22,"All"),t.k0s(),t.j41(23,"mat-radio-button",3),t.EFF(24,"Has metadata"),t.k0s(),t.j41(25,"mat-radio-button",4),t.EFF(26,"Has no metadata"),t.k0s()()),2&n&&(t.R7$(2),t.R50("ngModel",i.published),t.R7$(9),t.R50("ngModel",i.metadata),t.R7$(9),t.R50("ngModel",i.hasMetadata))},dependencies:[d.Wk,d.VT,d._g,s.YN,s.BC,s.vS],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-mdc-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]})}}return a})();var he=o(3347),ge=o(9841);function fe(a,c){1&a&&(t.nrm(0,"div",5),t.nI1(1,"safeHtml")),2&a&&t.Y8G("innerHTML",t.bMT(1,1,c),t.npT)}function _e(a,c){if(1&a){const e=t.RV6();t.j41(0,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.debugFilter())}),t.j41(1,"mat-icon",11),t.EFF(2,"filter_list"),t.k0s(),t.j41(3,"span"),t.EFF(4,"Filter"),t.k0s()()}}let Ce=(()=>{class a{#i;#l;#o;#d;#e;constructor(e,n,i,r,u){this.dialog=e,this.snackBar=n,this.matDialog=i,this.viewContainerRef=r,this.changeDetectorRef=u,this.log=(0,at.T)({ContentItemsComponent:a}),this.isDebug=(0,t.WQX)(lt.B).isDebug,this.#i=(0,h.d)(rt.R),this.#l=(0,h.d)(T.D),this.#o=(0,h.d)(q.F),this.#d=(0,h.d)(g.g),this.#e=(0,h.d)(st.c),this.gridOptions={...N.C,onFilterChanged:f=>this.#s.update(F=>F+1)},this.#s=(0,t.vPA)(0),this.#n=(0,t.vPA)(null),this.#t=this.#e.getParam("contentTypeStaticName"),this.contentType=this.#d.retrieveContentTypeSig(this.#t,void 0),this.#r=(0,t.vPA)(0),this.items=(0,t.EWP)(()=>(this.#r(),this.#o.getAllSig(this.#t,void 0))),this.urlToExportContent=(0,dt.bo)("urlToExportContent",()=>{const f=this.#n();if(!f)return"";this.#s();const F=Object.keys(f.getFilterModel()).length>0,O=[];return F&&f.forEachNodeAfterFilterAndSort(L=>O.push(L.data.Id)),this.#a(`export/${this.#t}${O.length>0?`/${O.join(",")}`:""}`)}),(0,t.QZP)(()=>this.fetchColumns())}#s;#n;#t;#r;ngOnInit(){this.urlToExportContent(),this.#e.doOnDialogClosed(()=>this.fetchItems())}closeDialog(){this.dialog.close()}onGridReady(e){this.#n.set(e.api),this.urlToExportContent()}fetchItems(){this.#r.update(e=>e+1)}fetchColumns(){this.#o.getColumns(this.#t).subscribe(e=>{const n=e.filter(u=>!u.IsEphemeral),i=this.#m(n),r=function yt(a,c){if(!a)return;let e;"="===a.charAt(a.length-1)&&(a=atob(a));try{e=JSON.parse(a)}catch{console.error("Can't parse JSON with filters from url:",a)}if(!e)return;const n={};return(e.IsPublished||e.IsMetadata)&&(n.Status={filterType:"pub-meta",published:e.IsPublished??"",metadata:e.IsMetadata??"",hasMetadata:""}),Object.entries(e).filter(([i,r])=>"IsPublished"!==i&&"IsMetadata"!==i).forEach(([i,r])=>{if(c.find(f=>f.headerName===i)?.filter!==x){if("string"==typeof r)n[i]={filterType:"text",type:"equals",filter:r};else if("number"==typeof r)n[i]={filterType:"number",type:"equals",filter:r,filterTo:null};else if("boolean"==typeof r){const f={filterType:"boolean",filter:r.toString()};n[i]=f}}else{const f={filterType:"entity",filter:"string"==typeof(r=Ct.i.tryParse(r)??r)?r:void 0,idFilter:"number"==typeof r?[r]:Array.isArray(r)?r.filter(F=>"number"==typeof F):void 0};n[i]=f}}),n}(sessionStorage.getItem(w.bo),i);this.#n()&&this.setColumnDefs(i,r)})}setColumnDefs(e,n){this.#n().setColumnDefs(e),n&&(this.log.a("Will try to apply filter:",n),this.#n().setFilterModel(n))}#a(e){return"#"+this.#e.urlSubRoute(e)}#c(e){return this.#e.urlSubRoute(M.H.getUrlEntity(e.Guid,`Metadata for Entity: ${e._Title} (${e.Id})`,this.#t))}editItem(e){const n={items:[null==e?P.c.newFromType(this.#t):P.c.editId(e.Id)]},i=(0,G.s)(n);this.#e.navRelative([`edit/${i}`])}#p(e){return this.#a(`edit/${(0,G.s)({items:[null==e?P.c.newFromType(this.#t):P.c.editId(e.Id)]})}`)}urlToNewItem(e){return this.#a(`edit/${(0,G.s)({items:[null==e?P.c.newFromType(this.#t):P.c.editId(e.Id)]})}`)}filesDropped(e){const n=e[0];switch(n.name.substring(n.name.lastIndexOf(".")+1).toLocaleLowerCase()){case"xml":this.urlToImportContent(e);break;case"json":this.importItem(e)}}urlToImportContent(e){return this.#a(`${this.#t}${e?`/${e.map(n=>n.name).join(",")}`:""}/import`)}importItem(e){this.#e.navRelative(["import"],{state:{files:e}})}urlToImportItem(){return this.#a("import")}createMetadata(){this.matDialog.open(me,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(n=>{if(null==n)return;const i={items:[P.c.newMetadataFromInfo(this.#t,n)]},r=(0,G.s)(i);this.#e.navRelative([`edit/${r}`]),this.changeDetectorRef.markForCheck()})}debugFilter(){console.warn("Current filter:",this.#n().getFilterModel()),this.snackBar.open("Check console for filter information",void 0,{duration:3e3})}#m(e){const n=[{...C.r.IdWithDefaultRenderer,cellClass:i=>("id-action no-padding no-outline "+(i.data._EditInfo.ReadOnly?"disabled":"")).split(" "),cellRendererParams:C.r.idFieldParamsTooltipGetter()},{field:"Status",width:82,headerClass:"dense",cellClass:"secondary-action no-padding".split(" "),filter:ue,valueGetter:i=>{const r=i.data;return{published:r.IsPublished,metadata:!!r.For,hasMetadata:!!r.Metadata&&r.Metadata.length>0}},cellRenderer:_t,cellRendererParams:{urlTo:(i,r)=>"#"+this.#c(r)}},{...C.r.TextWidePrimary,headerName:"Item (Entity)",field:"_Title",flex:2,cellRenderer:i=>_.f.cellLink(this.#p(i.data),i.data.Title)},{headerName:"Stats",headerTooltip:"Used by others / uses others",field:"_Used",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:i=>`${i.data._Used} / ${i.data._Uses}`},{...C.r.ActionsPinnedRight3,cellRenderer:pt,cellRendererParams:{urlTo:(r,u)=>"#"+this.#u(u),do:(r,u)=>{switch(r){case"export":this.export(u);break;case"delete":this.delete(u)}}}}];for(const i of e){const r={headerName:i.StaticName,field:i.StaticName,flex:2,minWidth:250,cellClass:"no-outline",sortable:!0};switch(i.Type){case S.O.Entity:r.allowMultiValue=i.Metadata?.Entity?.AllowMultiValue??!0,r.cellRenderer=ut,r.valueGetter=this.valueGetterEntityField,r.filter=x;break;case S.O.DateTime:r.useTimePicker=i.Metadata?.DateTime?.UseTimePicker??!1,r.valueGetter=this.valueGetterDateTime,r.filter="agTextColumnFilter";break;case S.O.Boolean:r.valueGetter=this.valueGetterBoolean,r.filter=y.y;break;case S.O.Number:r.filter="agNumberColumnFilter";break;default:r.filter="agTextColumnFilter"}n.push(r)}return n}#u(e){return this.#e.urlSubRoute(`edit/${(0,G.s)({items:[P.c.copy(this.#t,e.Id)]})}`)}export(e){this.#l.exportEntity(e.Id,this.#t,!0)}delete(e){confirm(`Delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.#i.delete(this.#t,e._RepositoryId,!1).subscribe({next:()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()},error:n=>{this.snackBar.dismiss(),confirm(`${n.error.ExceptionMessage}\n\nDo you want to force delete '${e._Title}' (${e._RepositoryId})?`)&&(this.snackBar.open("Deleting..."),this.#i.delete(this.#t,e._RepositoryId,!0).subscribe(()=>{this.snackBar.open("Deleted",null,{duration:2e3}),this.fetchItems()}))}}))}valueGetterEntityField(e){const n=e.data[e.colDef.field];return 0===n.length?null:n.map(i=>i.Title)}valueGetterDateTime(e){const n=e.data[e.colDef.field];return n?e.colDef.useTimePicker?n.replace("T"," ").replace("Z",""):n.split("T")[0]:null}valueGetterBoolean(e){const n=e.data[e.colDef.field];return"boolean"!=typeof n?null:n.toString()}static{this.\u0275fac=function(n){return new(n||a)(t.rXU(m.CP),t.rXU(he.UG),t.rXU(m.bZ),t.rXU(t.c1b),t.rXU(t.gRc))}}static{this.\u0275cmp=t.VBU({type:a,selectors:[["app-content-items"]],standalone:!0,features:[t.aNF],decls:38,vars:10,consts:[["appToggleDebug","",1,"eav-dialog","nav-component-wrapper"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"eav-dialog-content","nav-component-wrapper"],[3,"innerHTML"],[1,"grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"gridReady","filesDropped","rowData","gridOptions","allowedFileTypes"],[1,"eav-dialog-actions"],[1,"eav-dialog-actions-div"],["mat-button","","tippy","Export xml list","tippyPlacement","top",1,"eav-button__with-icon",3,"href"],[1,"eav-icon"],["mat-button","","tippy","Import xml list","tippyPlacement","top",1,"eav-button__with-icon",3,"href"],["mat-button","","tippy","Import single json item","tippyPlacement","top",1,"eav-button__with-icon",3,"href"],["mat-button","","tippy","Create metadata","tippyPlacement","top",1,"eav-button__with-icon",3,"click"],["mat-button","","color","accent","tippy","Print filter to console","tippyPlacement","top",1,"eav-button__with-icon"],["mat-fab","","mat-elevation-z24","","tippy","Add item",1,"grid-fab",3,"href"],["mat-button","","color","accent","tippy","Print filter to console","tippyPlacement","top",1,"eav-button__with-icon",3,"click"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return i.closeDialog()}),t.j41(5,"mat-icon"),t.EFF(6,"close"),t.k0s()()(),t.j41(7,"div",4),t.nrm(8,"router-outlet"),t.DNE(9,fe,2,3,"div",5),t.j41(10,"div",6)(11,"ag-grid-angular",7),t.bIt("gridReady",function(u){return i.onGridReady(u)})("filesDropped",function(u){return i.filesDropped(u)}),t.k0s()()(),t.j41(12,"mat-dialog-actions",8)(13,"div",9)(14,"a",10)(15,"mat-icon",11),t.EFF(16,"cloud_download"),t.k0s(),t.j41(17,"span"),t.EFF(18,"Data"),t.k0s()(),t.j41(19,"a",12)(20,"mat-icon",11),t.EFF(21,"cloud_upload"),t.k0s(),t.j41(22,"span"),t.EFF(23,"Data"),t.k0s()(),t.j41(24,"a",13)(25,"mat-icon",11),t.EFF(26,"cloud_upload"),t.k0s(),t.j41(27,"span"),t.EFF(28,"Item"),t.k0s()(),t.j41(29,"button",14),t.bIt("click",function(){return i.createMetadata()}),t.j41(30,"mat-icon",11),t.EFF(31,"local_offer"),t.k0s(),t.j41(32,"span"),t.EFF(33,"Create Metadata"),t.k0s()(),t.DNE(34,_e,5,0,"button",15),t.k0s(),t.j41(35,"a",16)(36,"mat-icon"),t.EFF(37,"add"),t.k0s()()()()),2&n){let r,u;t.R7$(3),t.SpI("",(null==(r=i.contentType())?null:r.Label)||(null==(r=i.contentType())?null:r.Name)," Data"),t.R7$(6),t.vxM((u=null==(u=i.contentType())||null==u.Properties?null:u.Properties.ListInstructions)?9:-1,u),t.R7$(2),t.Y8G("rowData",i.items()())("gridOptions",i.gridOptions)("allowedFileTypes","xml,json"),t.R7$(3),t.Y8G("href",i.urlToExportContent(),t.B4B),t.R7$(5),t.Y8G("href",i.urlToImportContent(),t.B4B),t.R7$(5),t.Y8G("href",i.urlToImportItem(),t.B4B),t.R7$(10),t.vxM(i.isDebug()?34:-1),t.R7$(),t.Y8G("href",i.urlToNewItem(),t.B4B)}},dependencies:[l.Hl,l.It,l.$z,l.iY,l.FH,p.m_,p.An,E.n3,m.E7,ot.$,et.S,nt.V,it.p,ge.xs,$.e],encapsulation:2})}}return a})()},336:(R,b,o)=>{o.d(b,{F:()=>M});var t=o(4600),l=o(6647),m=o(271),p=o(5959),E=o(693),h=o(9234),g=o(6474),T=o(9148);let M=(()=>{class _ extends g.D{getAll(y){return this.getHttpApiUrl(h.Gg,{params:{appId:this.appId,contentType:y}})}getAllSig(y,s){return this.getSignal(h.Gg,{params:{appId:this.appId,contentType:y}},s)}getColumns(y){return this.getHttpApiUrl(p.z,{params:{appId:this.appId,staticName:y}})}importItem(y){return(0,t.H)((0,E.n)(y)).pipe((0,l.n)(s=>this.http.post(this.apiUrl(h.gb+"upload"),{AppId:this.appId,ContentBase64:s})),(0,m.T)(s=>({Success:s,Messages:[]})))}static{this.\u0275fac=(()=>{let y;return function(d){return(y||(y=T.xGo(_)))(d||_)}})()}static{this.\u0275prov=T.jDH({token:_,factory:_.\u0275fac})}}return _})()},1183:(R,b,o)=>{o.d(b,{f:()=>t});class t{static cellLink(m,p,E){return`<a class="default-link fill-cell ${E}" href="${m}">${p}</a>`}}},3758:(R,b,o)=>{o.d(b,{F:()=>C});var t=o(316),l=o(9148),m=o(4950);const p=["*"],E=y=>({"hint-box__short":y});function h(y,s){1&y&&l.eu8(0)}function g(y,s){if(1&y&&(l.j41(0,"mat-hint"),l.DNE(1,h,1,0,"ng-container",2),l.k0s()),2&y){l.XpG();const d=l.sdS(4);l.R7$(),l.Y8G("ngTemplateOutlet",d)}}function T(y,s){1&y&&l.eu8(0)}function M(y,s){if(1&y&&(l.j41(0,"mat-error"),l.DNE(1,T,1,0,"ng-container",2),l.k0s()),2&y){l.XpG();const d=l.sdS(4);l.R7$(),l.Y8G("ngTemplateOutlet",d)}}function _(y,s){1&y&&l.SdG(0)}let C=(()=>{class y{constructor(){this.isError=(0,l.hFB)(!1),this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static{this.\u0275fac=function(v){return new(v||y)}}static{this.\u0275cmp=l.VBU({type:y,selectors:[["app-field-hint"]],inputs:{isError:[1,"isError"]},standalone:!0,features:[l.aNF],ngContentSelectors:p,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(v,D){if(1&v){const k=l.RV6();l.NAR(),l.j41(0,"div",1),l.bIt("click",function(){return l.eBV(k),l.Njj(D.toggleIsShort())}),l.DNE(1,g,2,1,"mat-hint")(2,M,2,1,"mat-error"),l.k0s(),l.DNE(3,_,1,0,"ng-template",null,0,l.C5r)}if(2&v){let k;l.Y8G("ngClass",l.eq3(2,E,D.isShort)),l.R7$(),l.vxM(!1===(k=D.isError())?1:!0===k?2:-1)}},dependencies:[m.RG,m.MV,m.TL,t.YU,t.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}}return y})()},5858:(R,b,o)=>{o.d(b,{O:()=>t});const t="DROPDOWN_INSERT_VALUE"},9333:(R,b,o)=>{o.d(b,{c:()=>m});var t=o(4435),l=o(9148);let m=(()=>{class p{constructor(){this.log=(0,t.T)({ClickStopPropagationDirective:p}),this.log.a("constructor")}onClick(h){this.log.a("onClick",{event:h}),h.stopPropagation()}static{this.\u0275fac=function(g){return new(g||p)}}static{this.\u0275dir=l.FsC({type:p,selectors:[["","appClickStopPropagation",""]],hostBindings:function(g,T){1&g&&l.bIt("click",function(_){return T.onClick(_)})},standalone:!0})}}return p})()},5699:(R,b,o)=>{o.d(b,{V:()=>m});var t=o(9431),l=o(9148);let m=(()=>{class p{constructor(h){this.globalConfigService=h}onClick(h){(navigator.platform.match("Mac")?h.metaKey:h.ctrlKey)&&h.shiftKey&&h.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}static{this.\u0275fac=function(g){return new(g||p)(l.rXU(t.B))}}static{this.\u0275dir=l.FsC({type:p,selectors:[["","appToggleDebug",""]],hostBindings:function(g,T){1&g&&l.bIt("click",function(_){return T.onClick(_)})},standalone:!0})}}return p})()},1726:(R,b,o)=>{o.d(b,{O:()=>t});const t={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},8471:(R,b,o)=>{o.d(b,{c:()=>_});var t=o(2159),l=o(1567),m=o(3037),p=o(271),E=o(5057),h=o(4435),g=o(4979),T=o(9148);const M={doOnDialogClosed:!0};let _=(()=>{class C extends g.V{constructor(s,d){super(),this.router=s,this.route=d,this.log=(0,h.T)({DialogRoutingService:C},M)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(s){return this.route.snapshot.paramMap.get(s)}getParams(s){const d=this.route.snapshot.paramMap;return s.reduce((v,D)=>(v[D]=d.get(D),v),{})}getQueryParam(s){return this.route.snapshot.queryParamMap.get(s)}getQueryParams(s){const d=this.route.snapshot.queryParamMap;return s.reduce((v,D)=>(v[D]=d.get(D),v),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(s){const d=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>s())),d.end()}urlSubRoute(s){const d=this.router.createUrlTree([s],{relativeTo:this.route});return this.router.serializeUrl(d)}navPath(s,d){return this.router.navigate([s],d)}navRelative(s,d){return this.router.navigate(s,{...d,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,l.p)(s=>s instanceof t.wF),(0,m.Z)(!!this.route.snapshot.firstChild),(0,p.T)(()=>!!this.route.snapshot.firstChild),(0,E.J)(),(0,l.p)(([s,d])=>s&&!d))}static{this.\u0275fac=function(d){return new(d||C)(T.KVO(t.Ix),T.KVO(t.nX))}}static{this.\u0275prov=T.jDH({token:C,factory:C.\u0275fac})}}return C})()},8021:(R,b,o)=>{o.d(b,{A:()=>h,J:()=>E});var t=o(5682),l=o(1817),m=o(271),p=o(2434);function E(g){return(0,t.F)((0,l.F)(),(0,m.T)(g),(0,l.F)())}function h(g){return(0,t.F)((0,l.F)(p.A),(0,m.T)(g),(0,l.F)(p.A))}},3826:(R,b,o)=>{o.d(b,{a:()=>t});class t{static boolEquals(m,p){return m===p}static stringEquals(m,p){return m===p}static valueEquals(m,p){return m===p}static objectsEqual(m,p){if(null==m||null==p)return m===p;const E=m,h=p,g=Object.keys(E),T=Object.keys(h);return g.length===T.length&&g.every(_=>!!h.hasOwnProperty(_)&&E[_]===h[_])}static arraysEqual(m,p){return null==m||null==p?m===p:m.length===p.length&&m.every((h,g)=>m[g]===p[g])}static distinct(m,p,E){return E.indexOf(m)===p}}},6817:(R,b,o)=>{o.d(b,{R:()=>p});var t=o(9234),l=o(6474),m=o(9148);let p=(()=>{class E extends l.D{create(g,T){return this.http.post(`app/auto/data/${g}`,T,{params:{appId:this.appId,zoneId:this.zoneId}})}update(g,T,M){return this.http.post(`app/auto/data/${g}/${T}`,M,{params:{appId:this.appId,zoneId:this.zoneId}})}delete(g,T,M){return this.http.delete(this.apiUrl(t.gb+"delete"),{params:{contentType:g,id:T.toString(),appId:this.appId,force:M.toString()}})}static{this.\u0275fac=(()=>{let g;return function(M){return(g||(g=m.xGo(E)))(M||E)}})()}static{this.\u0275prov=m.jDH({token:E,factory:E.\u0275fac})}}return E})()},6256:(R,b,o)=>{o.d(b,{Y:()=>_,k:()=>M});var t=o(9148),l=o(5060),m=o(2102),p=o(316);let E=0;const h="mat-badge-content",g=new Set;let T=(()=>{class C{static{this.\u0275fac=function(d){return new(d||C)}}static{this.\u0275cmp=t.VBU({type:C,selectors:[["ng-component"]],standalone:!0,features:[t.aNF],decls:0,vars:0,template:function(d,v){},styles:[".mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-app-error));color:var(--mat-badge-text-color, var(--mat-app-on-error));font-family:var(--mat-badge-text-font, var(--mat-app-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-app-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-app-corner-full))}.cdk-high-contrast-active .mat-badge-content{outline:solid 1px;border-radius:0}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color);color:var(--mat-badge-disabled-state-text-color, var(--mat-app-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, unset);min-height:var(--mat-badge-small-size-container-size, unset);line-height:var(--mat-badge-legacy-small-size-container-size);padding:var(--mat-badge-small-size-container-padding);font-size:var(--mat-badge-small-size-text-size);margin:var(--mat-badge-small-size-container-offset)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, unset);min-height:var(--mat-badge-container-size, unset);line-height:var(--mat-badge-legacy-container-size);padding:var(--mat-badge-container-padding);font-size:var(--mat-badge-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-container-offset)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, unset);min-height:var(--mat-badge-large-size-container-size, unset);line-height:var(--mat-badge-legacy-large-size-container-size);padding:var(--mat-badge-large-size-container-padding);font-size:var(--mat-badge-large-size-text-size, var(--mat-app-label-small-size));margin:var(--mat-badge-large-size-container-offset)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset)}"],encapsulation:2,changeDetection:0})}}return C})(),M=(()=>{class C{get color(){return this._color}set color(s){this._setColor(s),this._color=s}get content(){return this._content}set content(s){this._updateRenderedContent(s)}get description(){return this._description}set description(s){this._updateDescription(s)}constructor(s,d,v,D,k){this._ngZone=s,this._elementRef=d,this._ariaDescriber=v,this._renderer=D,this._animationMode=k,this._color="primary",this.overlap=!0,this.position="above after",this.size="medium",this._id=E++,this._isInitialized=!1,this._interactivityChecker=(0,t.WQX)(m.Z7),this._document=(0,t.WQX)(p.qQ);const x=(0,t.WQX)(t.o8S);if(!g.has(x)){g.add(x);const N=(0,t.a0P)(T,{environmentInjector:(0,t.WQX)(t.uvJ)});x.onDestroy(()=>{g.delete(x),N.destroy()})}}isAbove(){return-1===this.position.indexOf("below")}isAfter(){return-1===this.position.indexOf("before")}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){const s=this._renderer.createElement("span"),d="mat-badge-active";return s.setAttribute("id",`mat-badge-content-${this._id}`),s.setAttribute("aria-hidden","true"),s.classList.add(h),"NoopAnimations"===this._animationMode&&s.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(s),"function"==typeof requestAnimationFrame&&"NoopAnimations"!==this._animationMode?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{s.classList.add(d)})}):s.classList.add(d),s}_updateRenderedContent(s){const d=`${s??""}`.trim();this._isInitialized&&d&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=d),this._content=d}_updateDescription(s){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!s||this._isHostInteractive())&&this._removeInlineDescription(),this._description=s,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,s):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(s){const d=this._elementRef.nativeElement.classList;d.remove(`mat-badge-${this._color}`),s&&d.add(`mat-badge-${s}`)}_clearExistingBadges(){const s=this._elementRef.nativeElement.querySelectorAll(`:scope > .${h}`);for(const d of Array.from(s))d!==this._badgeElement&&d.remove()}static{this.\u0275fac=function(d){return new(d||C)(t.rXU(t.SKi),t.rXU(t.aKT),t.rXU(m.vr),t.rXU(t.sFG),t.rXU(t.bc$,8))}}static{this.\u0275dir=t.FsC({type:C,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(d,v){2&d&&t.AVh("mat-badge-overlap",v.overlap)("mat-badge-above",v.isAbove())("mat-badge-below",!v.isAbove())("mat-badge-before",!v.isAfter())("mat-badge-after",v.isAfter())("mat-badge-small","small"===v.size)("mat-badge-medium","medium"===v.size)("mat-badge-large","large"===v.size)("mat-badge-hidden",v.hidden||!v.content)("mat-badge-disabled",v.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",t.L39],disabled:[2,"matBadgeDisabled","disabled",t.L39],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",t.L39]},standalone:!0,features:[t.GFd]})}}return C})(),_=(()=>{class C{static{this.\u0275fac=function(d){return new(d||C)}}static{this.\u0275mod=t.$C({type:C})}static{this.\u0275inj=t.G2t({imports:[m.Pd,l.yE,l.yE]})}}return C})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.06.01/dist/ng-edit/projects_eav-ui_src_app_content-items_content-items_component_ts.ff03a3f4da07dd62.js.map