"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_edit_form_form-config_service_ts-projects_eav-ui_src_app_edit-b26668"],{7796:(T,C,n)=>{n.d(C,{W:()=>t});var p=n(7580),f=n(7993);class t{constructor(m,e,i,c,d,y,D,v,a,r,_,l){this.name=m,this.config=e,this.group=i,this.settings=c,this.basics=d,this.ui=y,this.uiValue=D,this.translationState=v,this.isOpen=a,this.#e=(0,f.KX)("requiredFeatures",[]),this.#n=this.setting("requiredFeatures"),this.requiredFeatures=(0,f.bo)("requiredFeatures",()=>{const g=[...this.#e(),...this.#n()??[]];return Array.from(new Set(g))}),this.#t=r,(0,p.QZP)(()=>{const g=this.requiredFeatures();if(0!=g.length)for(const x of g)_.requireFeature(x,`Used in field ${this.name}`)},{injector:l})}get pickerData(){if(this.#t)return this.#t;throw new Error(`PickerData was not initialized for the field: ${this.name}`)}#t;setting(m){return(0,f.bo)(m,()=>this.settings()[m])}settingExt(m){return(0,f.bo)(m,()=>this.settings()[m])}#e;#n;requireFeature(m){const e=this.#e();e.includes(m)||this.#e.set([...e,m])}}},7419:(T,C,n)=>{n.d(C,{C:()=>X});var p=n(4334),f=n(316),t=n(7580),h=n(4456),m=n(7941),e=n(4950),i=n(3840),c=n(7984),d=n(852),y=n(2938),D=n(4601),v=n(4981),a=n(4839);const l=o=>({page:o});function g(o,O){1&o&&t.eu8(0)}function x(o,O){if(1&o&&t.DNE(0,g,1,0,"ng-container",9),2&o){const s=O.$implicit;t.XpG(2);const u=t.sdS(15);t.Y8G("ngTemplateOutlet",u)("ngTemplateOutletContext",t.eq3(2,l,s))}}function I(o,O){if(1&o&&(t.j41(0,"ul"),t.Z7z(1,x,1,4,"ng-container",null,t.fX1),t.k0s()),2&o){const s=t.XpG();t.R7$(),t.Dyx(s.tree())}}function P(o,O){1&o&&(t.j41(0,"li")(1,"div",10),t.nrm(2,"div",11),t.j41(3,"div"),t.EFF(4,"No results"),t.k0s()()())}function R(o,O){if(1&o&&(t.j41(0,"span",15),t.EFF(1),t.k0s()),2&o){const s=t.XpG().$implicit;t.Y8G("tippy",s.path),t.R7$(),t.SpI("",s.path,"\xa0>\xa0")}}function F(o,O){1&o&&(t.j41(0,"mat-icon",18),t.EFF(1,"visibility_off"),t.k0s())}function A(o,O){1&o&&(t.j41(0,"mat-icon",18),t.EFF(1,"cancel"),t.k0s())}function k(o,O){if(1&o){const s=t.RV6();t.j41(0,"li")(1,"div",10),t.nrm(2,"div",11),t.j41(3,"div",12),t.bIt("click",function(){const E=t.eBV(s).$implicit,M=t.XpG(2);return t.Njj(M.select(E))}),t.j41(4,"div",13),t.nrm(5,"mat-icon",14),t.DNE(6,R,2,2,"span",15),t.j41(7,"span",16),t.EFF(8),t.k0s()(),t.j41(9,"div",17),t.DNE(10,F,2,0,"mat-icon",18)(11,A,2,0,"mat-icon",18),t.k0s()()()()}if(2&o){const s=O.$implicit,u=t.XpG(2);t.R7$(3),t.Y8G("ngClass",s.id===u.selected?"selected":""),t.R7$(3),t.vxM(s.path?6:-1),t.R7$(),t.Y8G("tippy",s.name),t.R7$(),t.JRh(s.name),t.R7$(2),t.vxM(s.isVisible?-1:10),t.R7$(),t.vxM(s.isClickable?-1:11)}}function L(o,O){if(1&o&&(t.j41(0,"ul"),t.DNE(1,P,5,0,"li"),t.Z7z(2,k,12,6,"li",null,t.fX1),t.k0s()),2&o){const s=t.XpG();t.R7$(),t.vxM(0===s.filteredSearch().length?1:-1),t.R7$(),t.Dyx(s.filteredSearch())}}function $(o,O){1&o&&t.nrm(0,"div",11)}function j(o,O){if(1&o){const s=t.RV6();t.j41(0,"mat-icon",20),t.bIt("click",function(){t.eBV(s);const E=t.XpG().page,M=t.XpG();return t.Njj(M.toggle(E.id))}),t.EFF(1),t.k0s()}if(2&o){const s=t.XpG().page,u=t.XpG();t.R7$(),t.SpI(" ",u.toggled.includes(s.id)?"keyboard_arrow_down":"keyboard_arrow_right"," ")}}function w(o,O){1&o&&(t.j41(0,"mat-icon",18),t.EFF(1,"visibility_off"),t.k0s())}function B(o,O){1&o&&(t.j41(0,"mat-icon",18),t.EFF(1,"cancel"),t.k0s())}function N(o,O){1&o&&t.eu8(0)}function U(o,O){if(1&o&&t.DNE(0,N,1,0,"ng-container",9),2&o){const s=O.$implicit;t.XpG(3);const u=t.sdS(15);t.Y8G("ngTemplateOutlet",u)("ngTemplateOutletContext",t.eq3(2,l,s))}}function W(o,O){if(1&o&&(t.j41(0,"ul"),t.Z7z(1,U,1,4,"ng-container",null,t.fX1),t.k0s()),2&o){const s=t.XpG().page;t.R7$(),t.Dyx(s.children)}}function V(o,O){if(1&o){const s=t.RV6();t.j41(0,"li")(1,"div",10),t.DNE(2,$,1,0,"div",11)(3,j,2,1,"mat-icon",19),t.j41(4,"div",12),t.bIt("click",function(){const E=t.eBV(s).page,M=t.XpG();return t.Njj(M.select(E))}),t.j41(5,"div",13),t.nrm(6,"mat-icon",14),t.j41(7,"span"),t.EFF(8),t.k0s()(),t.j41(9,"div",17),t.DNE(10,w,2,0,"mat-icon",18)(11,B,2,0,"mat-icon",18),t.k0s()()(),t.DNE(12,W,3,0,"ul"),t.k0s()}if(2&o){const s=O.page,u=t.XpG();t.R7$(2),t.vxM(0===s.children.length?2:-1),t.R7$(),t.vxM(s.children.length>0?3:-1),t.R7$(),t.Y8G("ngClass",s.id===u.selected?"selected":""),t.R7$(4),t.JRh(s.name),t.R7$(2),t.vxM(s.isVisible?-1:10),t.R7$(),t.vxM(s.isClickable?-1:11),t.R7$(),t.vxM(s.children.length>0&&u.toggled.includes(s.id)?12:-1)}}let K=(()=>{class o{constructor(s,u,E){this.dialogData=s,this.dialog=u,this.translate=E,this.filterText=(0,t.vPA)(""),this.searchItems=(0,t.vPA)([]),this.tree=(0,t.vPA)([]),this.filteredSearch=(0,t.EWP)(()=>{const M=this.filterText();return this.searchItems().filter(b=>b.name.toLocaleLowerCase().includes(M.toLocaleLowerCase()))}),this.queryService=(0,y.d)(a.c)}ngOnInit(){this.selected=this.parseSelectedPageId(),this.toggled=[],this.fetchPages()}setFilter(s){this.filterText.set(s)}select(s){null!=s.id&&((!s.isClickable||!s.isVisible)&&!window.confirm(this.translate.instant("Fields.Hyperlink.PagePicker.HiddenOrSystemPageWarning"))||this.closeDialog(s.id))}toggle(s){v.f.toggleInArray(s,this.toggled)}closeDialog(s){if(null==s)return void this.dialog.close();const u=this.searchItems().find(M=>M.id===s),E={id:u.id.toString(),name:u.name};this.dialog.close(E)}fetchPages(){const s="Default";this.queryService.getFromQuery("System.Pages/Default","includehidden=true",null).subscribe({next:E=>{if(!E)return void console.error(this.translate.instant("Fields.Picker.QueryErrorNoData"));if(!E[s])return void console.error(this.translate.instant("Fields.Picker.QueryStreamNotFound")+" "+s);const M=E[s],S=function r(o){return o?o.map(s=>{let u=s.Path.trim().replace(/\\/g,"/").replace(/\/\//g,"/");return u.startsWith("/")&&(u=u.substring(1)),u=u.split("/").slice(0,-1).join(" > "),{id:s.Id,name:s.Name,path:u,isVisible:s.Visible,isClickable:s.Clickable}}):[]}(M);this.searchItems.set(S);const b=function _(o){if(!o)return[];const O=o.map(u=>({children:[],id:u.Id,name:u.Name,parentId:u.ParentId,isVisible:u.Visible,isClickable:u.Clickable})),s=[];for(const u of O){if(-1===u.parentId){s.push(u);continue}const E=O.find(M=>M.id===u.parentId);E?E.children.push(u):s.push(u)}return s}(M);this.tree.set(b)},error:E=>{console.error(E),console.error(`${this.translate.instant("Fields.Picker.QueryError")} - ${E.data}`)}})}parseSelectedPageId(){const s="page:";let u=this.dialogData.group.controls[this.dialogData.config.fieldName].value;if("string"==typeof u&&(u=u.trim().toLocaleLowerCase(),u.startsWith(s)))try{return parseInt(u.split(s)[1],10)}catch{return}}static{this.\u0275fac=function(u){return new(u||o)(t.rXU(m.Vh),t.rXU(m.CP),t.rXU(d.c$))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-page-picker"]],decls:17,vars:6,consts:[["pageAndChildren",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"page-search-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","ngModel"],[1,"page-tree-box"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-row"],[1,"no-toggle"],[1,"page-label",3,"click","ngClass"],[1,"page-icon-and-text"],["svgIcon","file",1,"page-icon"],[1,"page-path",3,"tippy"],[1,"page-name",3,"tippy"],[1,"page-icons"],[1,"page-visible-clickable-icon"],[1,"page-toggle"],[1,"page-toggle",3,"click"]],template:function(u,E){if(1&u){const M=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"div",3),t.EFF(3),t.nI1(4,"translate"),t.k0s()(),t.j41(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),t.EFF(9,"Search"),t.k0s(),t.j41(10,"input",7),t.bIt("ngModelChange",function(b){return t.eBV(M),t.Njj(E.setFilter(b))}),t.k0s()()(),t.j41(11,"div",8),t.DNE(12,I,3,0,"ul")(13,L,4,1,"ul"),t.k0s(),t.DNE(14,V,13,7,"ng-template",null,0,t.C5r),t.k0s(),t.nrm(16,"mat-dialog-actions"),t.k0s()}2&u&&(t.R7$(3),t.JRh(t.bMT(4,4,"Fields.Hyperlink.PagePicker.Title")),t.R7$(7),t.Y8G("ngModel",E.filterText()),t.R7$(2),t.vxM(E.filterText()?-1:12),t.R7$(),t.vxM(E.filterText()?13:-1))},dependencies:[e.RG,e.rl,e.nJ,c.fS,c.fg,h.YN,h.me,h.BC,h.vS,f.T3,f.YU,i.m_,i.An,m.E7,d.h,d.D9,D.e],styles:[".page-picker-title[_ngcontent-%COMP%]{margin:0}.page-search-box[_ngcontent-%COMP%]{margin-bottom:16px;width:40%}.page-tree-box[_ngcontent-%COMP%]{height:82%;max-width:100%;overflow:auto}.page-tree-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:8px;margin:0}.page-tree-box[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding-left:0}.page-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px}.no-toggle[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block;flex-shrink:0}.page-toggle[_ngcontent-%COMP%]{cursor:pointer;flex-shrink:0}.page-icon[_ngcontent-%COMP%]{margin-right:4px;flex-shrink:0}.page-visible-clickable-icon[_ngcontent-%COMP%]{margin-left:4px;flex-shrink:0}.page-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding:4px 4px 4px 2px;border-radius:4px;width:100%}.page-label[_ngcontent-%COMP%]   .page-icon-and-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-label[_ngcontent-%COMP%]   .page-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.page-label[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#a2a7b1;text-overflow:ellipsis;max-width:270px;white-space:nowrap;overflow:hidden;padding-right:.5em}.page-label[_ngcontent-%COMP%]   .page-name[_ngcontent-%COMP%]{text-overflow:ellipsis;max-width:225px;white-space:nowrap;overflow:hidden}.page-label[_ngcontent-%COMP%]:hover{background-color:#06599a;color:#fff}.page-label[_ngcontent-%COMP%]:hover   .page-path[_ngcontent-%COMP%]{color:#c7cad0}.page-label.selected[_ngcontent-%COMP%]{background-color:#002753;color:#fff}.page-label.selected[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#c7cad0}"]})}}return o})();class X{static open(O,s,u,E,M,S){u.open(K,{autoFocus:!1,data:{config:O,group:s},viewContainerRef:E,height:"80%",width:"650px"}).afterClosed().pipe((0,p.s)(1)).subscribe(G=>{S(G)}),M.markForCheck()}}},8265:(T,C,n)=>{n.d(C,{S:()=>e});var p=n(7580),f=n(8172),t=n(4435),h=n(8873),m=n(2093);let e=(()=>{class i{constructor(){this.log=(0,t.Tq)({FormConfigService:i}),this.configSignal=(0,p.vPA)(null),this.context=(0,p.WQX)(h.o),this.languageService=(0,p.WQX)(m.A)}initFormConfig(d,y,D,v,a,r,_,l){this.settings=l,this.languages={initial:d.Language.Current,primary:d.Language.Primary,list:d.Language.List},this.config={zoneId:this.context.zoneId,appId:this.context.appId,appRoot:d.App.Url,appSharedRoot:d.App.SharedUrl,moduleId:this.context.moduleId?.toString(),partOfPage:sessionStorage.getItem(f.h9)??f.bO,portalRoot:d.Site.Url,tabId:this.context.tabId?.toString(),systemRoot:window.location.pathname.split("/dist/")[0]+"/",versioningOptions:this.getVersioningOptions("true"===sessionStorage.getItem(f.h9),sessionStorage.getItem(f.Hh)),formId:y,isParentDialog:D,itemGuids:v,createMode:a,isCopy:r,enableHistory:_,enableFormulaSave:d.Enable.FormulaSave??!1,removeEditRestrictions:d.Enable.OverrideEditRestrictions??!1,dialogContext:d,settings:l},this.configSignal.set(this.config),this.language=this.languageService.getSignal(this.config.formId)}getVersioningOptions(d,y){const D={show:!0,hide:!0,branch:!0};if(!d)return D;const v=y||"";switch(v){case"":case"DraftOptional":return D;case"DraftRequired":return{branch:!0,hide:!0};case"DraftForbidden":return{show:!0};default:return console.error(`Invalid versioning requirements: ${v}`),{}}}get language$(){return this._language$??=this.languageService.getLanguage$(this.config.formId)}static{this.\u0275fac=function(y){return new(y||i)}}static{this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}}return i})()},2093:(T,C,n)=>{n.d(C,{A:()=>D});var p=n(271),f=n(6301),t=n(4435),h=n(8021),m=n(8503),e=n(3050),i=n(9964),c=n(9868),d=n(7580);const y={getReader:!1,getLanguage:!1,getReaderSignal:!1};let D=(()=>{class v extends i.k{constructor(){super((0,t.Tq)({FormLanguageService:v},y)),this.getId=r=>r.formId,this.sanitizeAdd=r=>({...c.N.empty,initial:r.current,...r}),this.#t=new m.K("entityReader"),this.#e=new m.K("hideHeader")}addForm(r,_,l,g){this.add({formId:r,current:l,initial:l,primary:_,hideHeader:g})}setCurrent(r,_){this.update(r,{current:_})}getEntityReader(r){const _=this.log.fnIf("getReader",{formId:r}),l=this.#t.getOrCreateWithInfo(r,()=>{const g=this.getSignal(r)()??c.N.empty();return this.log.fnIf("getReaderSignal",{language:g}),new e.bT(g)});return _.rSilent(l.signal,`isNew: ${l.isNew}`)}#t;getLanguage$(r){return this.cache$.pipe((0,p.T)(_=>_[r]),(0,h.J)(_=>_),(0,f.t)(1))}getHideHeaderSignal(r){return this.#e.getOrCreate(r,()=>this.cache()[r]?.hideHeader??!1)}#e;updateHideHeader(r,_){this.update(r,{hideHeader:_})}static{this.\u0275fac=function(_){return new(_||v)}}static{this.\u0275prov=d.jDH({token:v,factory:v.\u0275fac,providedIn:"root"})}}return v})()},9868:(T,C,n)=>{n.d(C,{N:()=>p});class p{static bothPrimary(h){return{current:h.primary,primary:h.primary}}static diffCurrent(h,m){return{current:m,primary:h.primary}}static empty(){return{current:"",primary:"",initial:""}}}},9274:(T,C,n)=>{n.d(C,{Y:()=>p});class p{constructor(t,h){this.dimensions=t,this.language=h}get hasCurrentWrite(){return!!this.dimensions.find(h=>h.Value===this.language.current||this.language.current===this.language.primary&&"*"===h.Value)}get hasCurrentReadOnly(){const t=`~${this.language.current}`;return void 0!==this.dimensions.find(h=>h.Value===t)}get hasCurrent(){return!!this.dimensions.find(h=>h.Value===this.language.current||h.Value===`~${this.language.current}`||this.language.current===this.language.primary&&"*"===h.Value)}}},7314:(T,C,n)=>{n.d(C,{U:()=>m});var p=n(9868),f=n(9274),t=n(4435);const h={all:!1,constructor:!1};class m{constructor(i,c){this.log=(0,t.Tq)({FieldReader:m},h),this.#t=!0,this.log.fnIf("constructor",{field:i,language:c}),this.#e=i,this.#i="string"==typeof c?{current:c,primary:c}:c,this.#n=i?.Values??[],this.#t=!i||!i.Values||0===i.Values.length}#t;#e;#n;#i;get current(){return this.ofLanguage(this.#i)}get currentOrDefault(){return this.#t?null:this.current??this.ofLanguage(p.N.bothPrimary(this.#i))}get currentOrDefaultOrAny(){return this.#t?null:this.currentOrDefault??this.#n[0]??null}ofLanguage(i){return this.#t?null:this.#n.filter(c=>new f.Y(c.Dimensions,i).hasCurrent)[0]??null}get hasPrimary(){if(this.#t)return!1;const i=this.#i.primary;return this.#n.filter(c=>c.Dimensions.find(d=>d.Value===i||"*"===d.Value)).length>0}get hasCurrentReadonly(){return!this.#t&&this.#n.filter(i=>new f.Y(i.Dimensions,this.#i).hasCurrentReadOnly).length>0}get hasEditableValues(){return!this.#t&&this.#s().length>0}countEditable(){return this.#s().length}countEditableWithContents(){return this.#s().filter(i=>""!=i.Value&&null!=i.Value)?.length}#s(i){return this.#t?[]:(i??=this.#i,this.#n.filter(c=>new f.Y(c.Dimensions,i).hasCurrentWrite))}get currentEditable(){if(this.#t)return null;const i=this.#i.current;return this.#n.find(c=>c.Dimensions.find(d=>d.Value===i))??null}isEditableOrReadonlyTranslationExist(){return!this.#t&&this.#s().length>0}}},5443:(T,C,n)=>{n.d(C,{b:()=>h});var p=n(4435),f=n(7314);const t={all:!1,constructor:!1};class h{constructor(e,i){this.log=(0,p.Tq)({EntityReader:h},t),this.log.fnIf("constructor",{current:e,primary:i}),"string"==typeof e?(this.current=e,this.primary=i):(this.current=e.current,this.primary=e.primary)}getBestValue(e,i=null){return new f.U(e,this).currentOrDefaultOrAny?.Value??i}flatten(e){if(null==e)return{};const i=Array.isArray(e)?e:[e];if(0===i.length||null==i[0])return{};const c={};for(const d of i)if("@All"!==d.Type.Id)for(const[y,D]of Object.entries(d.Attributes)){const v=this.getBestValue(D);c[y]=v}for(const d of i)if("@All"===d.Type.Id)for(const[y,D]of Object.entries(d.Attributes)){const v=this.getBestValue(D);null!=c[y]&&(null==v||""===v)||(c[y]=v)}return c}currentValues(e){return Object.entries(e).reduce((c,[d,y])=>(c[d]=this.getBestValue(y),c),{})}}},1573:(T,C,n)=>{n.d(C,{N:()=>D});var p=n(7580),f=n(4435),t=n(4979),h=n(7796),m=n(8265);const e={all:!1,initSignal:!1,watchAllFields:!0},c=/\[.*?\]/gi,y=/[\[\]]/gi;let D=(()=>{class r extends t.V{#t;#e;constructor(l){super(),this.injector=l,this.log=(0,f.Tq)({FieldMask:r},e),this.#t=(0,p.WQX)(h.W),this.#e=(0,p.WQX)(m.S),this.result=(0,p.vPA)(""),this.#n=this.#t.group.controls,this.#i=this.#t.config,this.#s=!1,this.#a=(0,p.vPA)((0,p.vPA)("")),this.#r=(0,p.EWP)(()=>this.#a()()),this.#l=(0,p.EWP)(()=>this.#g(this.#r())),this.log.a("constructor")}#n;#i;#s;#a;#r;#l;initPreClean(l){return this.log.a("initPreClean"),this.preClean=l,this}init(l,g,x=!1){return this.initSignal(l,(0,p.vPA)(g))}initSignal(l,g){this.log.extendName(`-${l}`);const x=this.log.fnIf("initSignal",{name:l,mask:g});return this.#a.set(g),this.#c(),x.r(this,"first result:"+this.result())}logChanges(){const l=this.log.enabled?this.log:(0,f.Tq)({FieldMask:r});return(0,p.QZP)(()=>l.a(`Mask '${this.#r()}' value changed to: ${this.result()}`),{injector:this.injector}),this}#c(){this.#h(),this.#o()}#u(){if(!v(this.#r()))return this.#r();let l=function a(r){return r.replace(/\[([^\]]+)\]/g,(_,l)=>`[${l.toLowerCase()}]`)}(this.#r());null!=this.#e&&(l=l.replace("[app:appid]",this.#e.config.appId.toString()).replace("[app:zoneid]",this.#e.config.zoneId.toString())),null!=this.#i&&(l=l.replace("[guid]",this.#i.entityGuid).replace("[data:guid]",this.#i.entityGuid).replace("[id]",this.#i.entityId.toString()).replace("[data:id]",this.#i.entityId.toString()));const g=this.#l().data;return g&&g.forEach((x,I)=>{const P=this.#n?.[x]?.value??"",R=this.preClean(x,P);l=l.replace("[data:"+x.toLowerCase()+"]",R),l=l.replace("["+x.toLowerCase()+"]",R)}),l}#g(l){if(!l||!v(l))return{};const g=l.match(c);return g?{data:g.map(I=>I.replace(y,""))}:{}}preClean(l,g){return g}#o(){const l=this.#u();this.result.set(l)}#h(){const l=this.log.fnIf("watchAllFields"),g=this.#l().data;if(!g)return l.end("no data placeholders");const x=g.map(I=>this.#n[I]).filter(I=>null!=I);if(0==x.length)return l.end("no fields to watch");x.forEach(I=>this.subscriptions.add(I.valueChanges.subscribe(P=>this.#o()))),l.end()}static{this.\u0275fac=function(g){return new(g||r)(p.KVO(p.zZn))}}static{this.\u0275prov=p.jDH({token:r,factory:r.\u0275fac})}}return r})();function v(r){return(r??"").includes("[")}},3050:(T,C,n)=>{n.d(C,{im:()=>t,bT:()=>h.b,X3:()=>c,Nt:()=>p.N,M5:()=>m,SX:()=>y,b:()=>D.b});var p=n(1573),f=n(7314);class t{static getDefaultSettings(a,r,_){const g={...a.flatten(r.Metadata)};return g.Description??="",g.EditInstructions??="",g.Features??="",g.Label??="",g.ListInstructions??="",g.Notes??="",g.Icon??="",g.Link??="",g._itemTitle=this.getTitle(r,a),g._slotCanBeEmpty=_.IsEmptyAllowed??!1,g._slotIsEmpty=_.IsEmpty??!1,g}static getTitle(a,r){try{const _=a.Metadata.find(g=>"ContentType"===g.Type.Name||"xx ContentType"===g.Type.Name);let l=_?new f.U(_.Attributes.Label,r).currentOrDefault?.Value:null;return l=l||a.Name,l}catch{return a.Name}}}var h=n(5443);let m=(()=>{class v{static{this.defaultIcon="file"}static{this.customExtensions={doc:"file-word",docx:"file-word",xls:"file-excel",xlsx:"file-excel",ppt:"file-powerpoint",pptx:"file-powerpoint",pdf:"file-pdf",mp3:"file-audio",avi:"file-video",mpg:"file-video",mpeg:"file-video",mov:"file-video",mp4:"file-video",zip:"file-archive",rar:"file-archive",txt:"file-text",html:"file-code",css:"file-code",xml:"file-code",xsl:"file-code"}}static{this.matExtensions={vcf:"person"}}static getExtension(r){return r.substring(r.lastIndexOf(".")+1).toLocaleLowerCase()}static getIconClass(r){const _=this.getExtension(r);return this.matExtensions[_]||this.customExtensions[_]||this.defaultIcon}static isKnownType(r){return null!=this.matExtensions[this.getExtension(r)]}static isImage(r){return this.isImgRegex().test(r)}static isImgRegex(){return/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:jpg|jpeg|gif|png|webp))(?:\?([^#]*))?(?:#(.*))?/i}}return v})();var e=n(4202),i=n(4435);class c{constructor(a,r,_,l){this.name=a,this.inputType=r,this.settings=_,this.itemHeader=l,this.log=(0,i.Tq)({FieldDefaults:c})}getDefaultOrPrefillValue(a){const r=this.inputType,_=this.name,l=this.settings,g=this.itemHeader,x=this.log.fn("parseDefaultValue",{name:_,inputType:r,settings:l,itemHeader:g,onlyPrefill:a}),I=g?.Prefill?.[_];if(a&&void 0===I)return x.rNull("only prefill, but no prefill data found");let P=I?.toString()??l.DefaultValue;switch(x.values({defaultValue:P}),r){case e.u.BooleanDefault:return"true"===P?.toLowerCase();case e.u.BooleanTristate:return null!=P&&""!==P?"true"===P.toLowerCase():null;case e.u.DateTimeDefault:return null!=P&&""!==P?new Date(P).toJSON():null;case e.u.NumberDefault:case e.u.NumberDropdown:case e.u.NumberPicker:return null!=P&&""!==P?isNaN(Number(P))?null:Number(P):null;case e.u.EntityDefault:case e.u.EntityQuery:case e.u.EntityContentBlocks:case e.u.EntityPicker:if(null==P||""===P)return[];if(P.includes("{")&&(P=P.replace(/[\{\}]/g,'"')),P.includes(",")&&!P.includes("[")){const R=P.split(",").map(F=>F.trim());P=JSON.stringify(R)}return P.startsWith("[")?JSON.parse(P):[P.replace(/"/g,"")];default:return P??""}}}n(7419);class y{static removeFromStart(a,r){if(!a)return a;for(;a.substring(0,1)===r;)a=a.substring(1);return a}static removeFromEnd(a,r){if(!a)return a;for(;a.substring(a.length-1,a.length)===r;)a=a.substring(0,a.length-1);return a}static cleanBadPath(a){if(!a)return a;const r="_";return a.replace(/[\?<>\\:\*\|":]/g,r).replace(/[\x00-\x1f\x80-\x9f]/g,r).replace(/^\.+$/,r).replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,r).replace(/[\. ]+$/,r)}static sanitizePath(a){return a&&(a=this.removeFromStart(a,"/"),a=this.removeFromEnd(a,"/"),a=this.removeFromStart(a,"\\"),a=this.removeFromEnd(a,"\\"),this.cleanBadPath(a))}static sanitizeName(a){return a?this.sanitizePath(a).replace(/\//g,"_"):a}}var D=n(3412)},6632:(T,C,n)=>{n.d(C,{r:()=>h});var p=n(8503),f=n(7993),t=n(4435);class h{constructor(e){this.#t=(0,f.KX)("cache",{}),this.#e=(0,f.bo)("list",()=>Object.values(this.#t())),this.getId=i=>i.id,this.sanitizeAdd=i=>i,this.#n=new p.K("item"),this.log=e??(0,t.Tq)({SignalStoreBase:h}),this.log.a("SignalStoreBase created"),this.name=this.log.name}#t;#e;get cache(){return this.#t}get list(){return this.#e}add(e){const i=this.log.fn("add",{item:e});if(!e)return i.end("item is null");this.#t.set({...this.#t(),[this.getId(e)]:this.sanitizeAdd(e)}),i.end("added")}addMany(e){var i=this.log.fn("addMany",{items:e});if(!e||0==e.length)return i.end("items is null or empty");const c=e.reduce((d,y)=>({...d,[this.getId(y)]:this.sanitizeAdd(y)}),{...this.#t()});this.#t.set(c),i.end("added")}update(e,i){const c=this.log.fn("update",{id:e,item:i});if(!e||!i)return c.end("id or item is null");const d=this.get(e);if(!d)return c.end(`Item with id ${e} not found in store`);const y={...d,...i};this.#t.set({...this.#t(),[e]:y}),c.end("updated")}remove(e){const i=this.log.fn("remove",{id:e}),{[e]:c,...d}=this.#t();this.#t.set(d),i.end("removed")}clearCache(){const e=this.log.fn("clearCache");this.#t.set({}),e.end("cleared")}get(e){const i=this.#t()[e];return this.log.a(`get(${e}) - `+(null==i?"not":"")+"found"),i}getAll(){const e=this.#e();return this.log.a(`getAll() - found ${e.length} items`),e}getMany(e){const i=this.log.fn("getMany",{ids:e}),c=e.map(d=>this.#t()[d]).filter(d=>null!=d);return i.r(c,`found ${c.length} items`)}getSignal(e){const i=this.#n.getOrCreateWithInfo(e,()=>this.get(e));return this.log.a(`getSignal(${e})`,{isNew:i.isNew}),i.signal}#n;getManySignal(e){const i=(0,f.bo)("getMany",()=>e.map(c=>this.get(c)).filter(c=>null!=c));return this.log.a("getManySignal()",{ids:e}),i}getAllSignal(){const e=this.#e;return this.log.a(`getAllSignal() - found ${e().length} items`),e}}},9964:(T,C,n)=>{n.d(C,{k:()=>h});var p=n(9074),f=n(6632),t=n(8021);class h extends f.r{#t=(0,p.br)(this.cache);#e=(0,p.br)(this.list);get cache$(){return this.#t}get list$(){return this.#e}getList$(){return this.list$}getMany$(e){return this.cache$.pipe((0,t.J)(i=>e.map(c=>i[c]).filter(c=>null!=c)))}}},4202:(T,C,n)=>{n.d(C,{u:()=>p});const p={BooleanDefault:"boolean-default",BooleanTristate:"boolean-tristate",CustomDefault:"custom-default",CustomGps:"custom-gps",CustomJsonEditor:"custom-json-editor",DateTimeDefault:"datetime-default",DefaultSuffix:"-default",EmptyDefault:"empty-default",EmptyEnd:"empty-end",EmptyMessage:"empty-message",EntityContentBlocks:"entity-content-blocks",EntityDefault:"entity-default",EntityQuery:"entity-query",ExternalWebComponent:"external-web-component",HyperlinkDefault:"hyperlink-default",HyperlinkLibrary:"hyperlink-library",NumberDefault:"number-default",NumberDropdown:"number-dropdown",StringDefault:"string-default",StringDropdown:"string-dropdown",StringDropdownQuery:"string-dropdown-query",StringFontIconPicker:"string-font-icon-picker",StringJson:"string-json",StringTemplatePicker:"string-template-picker",StringUrlPath:"string-url-path",StringWysiwyg:"string-wysiwyg",EntityPicker:"entity-picker",StringPicker:"string-picker",NumberPicker:"number-picker",Unknown:"unknown"}},4981:(T,C,n)=>{n.d(C,{f:()=>p});class p{static toggleInArray(t,h){const m=h.indexOf(t);-1===m?h.push(t):h.splice(m,1)}}},8021:(T,C,n)=>{n.d(C,{A:()=>e,J:()=>m});var p=n(5682),f=n(1817),t=n(271),h=n(2434);function m(i){return(0,p.F)((0,f.F)(),(0,t.T)(i),(0,f.F)())}function e(i){return(0,p.F)((0,f.F)(h.A),(0,t.T)(i),(0,f.F)(h.A))}}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.07.00/dist/ng-edit/default-projects_eav-ui_src_app_edit_form_form-config_service_ts-projects_eav-ui_src_app_edit-b26668.80274f65f5c1a17d.js.map