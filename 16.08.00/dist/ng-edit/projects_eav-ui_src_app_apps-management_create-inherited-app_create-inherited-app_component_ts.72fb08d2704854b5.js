"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts"],{4591:(P,g,n)=>{n.r(g),n.d(g,{CreateInheritedAppComponent:()=>x});var e=n(8849),p=n(8071),f=n(3839),C=n(9736),A=n(6680),t=n(1699),u=n(6861),E=n(9409),O=n(91),v=n(9851),h=n(6575),o=n(895),s=n(1268),_=n(6355),d=n(257);function m(r,c){if(1&r&&(t.TgZ(0,"mat-option",13),t._uU(1),t.qZA()),2&r){const a=c.$implicit;t.Q6J("value",a.Id),t.xp6(1),t.hij(" ",a.Name," ")}}function M(r,c){1&r&&(t.TgZ(0,"app-field-hint",14),t._uU(1," Required "),t.qZA()),2&r&&t.Q6J("isError",!0)}function T(r,c){if(1&r){const a=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Create inherited App"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"router-outlet"),t.TgZ(7,"p"),t._uU(8," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),t.qZA(),t.TgZ(9,"form",5)(10,"mat-form-field",6)(11,"mat-label"),t._uU(12,"Inherit App"),t.qZA(),t.TgZ(13,"mat-select",7),t.YNc(14,m,2,2,"mat-option",8),t.qZA()(),t.YNc(15,M,2,1,"app-field-hint",9),t.qZA()(),t.TgZ(16,"mat-dialog-actions",10)(17,"button",11),t.NdJ("click",function(){t.CHM(a);const l=t.oxw();return t.KtG(l.closeDialog())}),t._uU(18," Cancel "),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){t.CHM(a);const l=t.oxw();return t.KtG(l.create())}),t._uU(20," Create "),t.qZA()()(),t.BQk()}if(2&r){const a=c.ngIf,i=t.oxw();t.xp6(9),t.Q6J("formGroup",i.form),t.xp6(4),t.Q6J("placeholder",void 0===a.inheritableApps?"Loading...":null===a.inheritableApps||0===a.inheritableApps.length?"No inheritable apps found":""),t.xp6(1),t.Q6J("ngForOf",a.inheritableApps),t.xp6(1),t.Q6J("ngIf",i.form.controls.inheritId.touched&&(null==i.form.controls.inheritId.errors?null:i.form.controls.inheritId.errors.required)),t.xp6(2),t.Q6J("disabled",a.loading),t.xp6(2),t.Q6J("disabled",a.loading||!i.form.valid)}}let x=(()=>{var r;class c{constructor(i,l,I){this.dialogRef=i,this.appsListService=l,this.snackBar=I,this.hostClass="dialog-component",this.form=this.buildForm(),this.loading$=new p.X(!1),this.inheritableApps$=new p.X(void 0),this.viewModel$=(0,f.a)([this.loading$,this.inheritableApps$]).pipe((0,C.U)(([D,b])=>({loading:D,inheritableApps:b})))}ngOnInit(){this.fetchInheritedApps()}ngOnDestroy(){this.loading$.complete(),this.inheritableApps$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const i=this.form.controls.inheritId.value,l=this.inheritableApps$.value.find(I=>I.Id===i).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(l,i).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps$.next(null)},next:i=>{this.inheritableApps$.next(i)}})}buildForm(){return new e.nJ({inheritId:new e.p4(null,[e.kI.required])})}}return(r=c).\u0275fac=function(i){return new(i||r)(t.Y36(u.so),t.Y36(A.A),t.Y36(E.ux))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(i,l){2&i&&t.Ikx("className",l.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"value",4,"ngFor","ngForOf"],[3,"isError",4,"ngIf"],["align","end"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"value"],[3,"isError"]],template:function(i,l){1&i&&(t.YNc(0,T,21,6,"ng-container",0),t.ALo(1,"async")),2&i&&t.Q6J("ngIf",t.lcZ(1,1,l.viewModel$))},dependencies:[O.lC,v.Y,u.H8,h.sg,h.O5,o.lW,e._Y,e.JJ,e.JL,s.KE,s.hX,e.sg,e.u,_.gD,d.ey,h.Ov]}),c})()},9851:(P,g,n)=>{n.d(g,{Y:()=>h});var e=n(1699),p=n(6575),f=n(1268);function C(o,s){1&o&&e.GkF(0)}function A(o,s){if(1&o&&(e.TgZ(0,"mat-hint"),e.YNc(1,C,1,0,"ng-container",3),e.qZA()),2&o){e.oxw();const _=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",_)}}function t(o,s){1&o&&e.GkF(0)}function u(o,s){if(1&o&&(e.TgZ(0,"mat-error"),e.YNc(1,t,1,0,"ng-container",3),e.qZA()),2&o){e.oxw();const _=e.MAs(4);e.xp6(1),e.Q6J("ngTemplateOutlet",_)}}function E(o,s){1&o&&e.Hsn(0)}const O=function(o){return{"hint-box__short":o}},v=["*"];let h=(()=>{var o;class s{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return(o=s).\u0275fac=function(d){return new(d||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:v,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(d,m){1&d&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(){return m.toggleIsShort()}),e.YNc(1,A,2,1,"mat-hint",1),e.YNc(2,u,2,1,"mat-error",1),e.qZA(),e.YNc(3,E,1,0,"ng-template",null,2,e.W1O)),2&d&&(e.Q6J("ngClass",e.VKq(4,O,m.isShort))("ngSwitch",m.isError),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0))},dependencies:[p.mk,p.tP,p.RF,p.n9,f.bx,f.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),s})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.08.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_ts.72fb08d2704854b5.js.map