"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"],{9399:(x,u,s)=>{s.d(u,{U:()=>R});var l=s(6861),p=s(8071),T=s(3839),f=s(9736),v=s(1527),m=s(9097),c=s(5101),e=s(1699),n=s(9409),_=s(6575),g=s(3910),h=s(895),D=s(2849),C=s(9498),E=s(6537);const U=["installerWindow"];function A(i,r){1&i&&e._UZ(0,"mat-spinner",16)}function M(i,r){1&i&&(e.TgZ(0,"div"),e._uU(1,"Select or drop file"),e.qZA())}function y(i,r){if(1&i&&(e.TgZ(0,"div"),e._uU(1),e.qZA()),2&i){const t=r.$implicit;e.xp6(1),e.Oqu(t.name)}}function O(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"button",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.showAppCatalog())}),e._uU(1," Get recommended Apps from Catalog "),e.qZA()}}function I(i,r){1&i&&(e.TgZ(0,"div",22),e._uU(1," Upload succeeded. See the messages below for more information. "),e.qZA())}function F(i,r){1&i&&(e.TgZ(0,"div",23),e._uU(1," Upload failed. See the messages below for more information. "),e.qZA())}const P=function(i,r,t){return{"sxc-message-warning":i,"sxc-message-success":r,"sxc-message-error":t}};function b(i,r){if(1&i&&(e.TgZ(0,"div",24),e._uU(1),e.qZA()),2&i){const t=r.$implicit,a=e.oxw(3);e.Q6J("ngClass",e.kEZ(2,P,t.MessageType===a.FileUploadMessageTypes.Warning,t.MessageType===a.FileUploadMessageTypes.Success,t.MessageType===a.FileUploadMessageTypes.Error)),e.xp6(1),e.hij(" ",t.Text," ")}}function Z(i,r){if(1&i&&(e.TgZ(0,"div",18),e.YNc(1,I,2,0,"div",19),e.YNc(2,F,2,0,"div",20),e.YNc(3,b,2,6,"div",21),e.qZA()),2&i){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",t.result.Success),e.xp6(1),e.Q6J("ngIf",!t.result.Success),e.xp6(1),e.Q6J("ngForOf",t.result.Messages)}}function w(i,r){1&i&&e._UZ(0,"iframe",25,26)}function B(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",28),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.closeDialog())}),e._uU(2,"Cancel"),e.qZA(),e.TgZ(3,"button",29),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.upload())}),e._uU(4," Upload "),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2).ngIf;e.xp6(3),e.Q6J("disabled",!t.files.length||t.uploading||!!t.result)}}function L(i,r){if(1&i){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",30),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(3);return e.KtG(o.closeDialog(!0))}),e._uU(2,"Close"),e.qZA(),e.BQk()}}function S(i,r){if(1&i&&(e.TgZ(0,"mat-dialog-actions",27),e.YNc(1,B,5,1,"ng-container",8),e.YNc(2,L,3,0,"ng-container",8),e.qZA()),2&i){const t=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf",!(null!=t.result&&t.result.Success)),e.xp6(1),e.Q6J("ngIf",null==t.result?null:t.result.Success)}}function K(i,r){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("filesDropped",function(o){e.CHM(t);const d=e.oxw();return e.KtG(d.filesDropped(o))}),e.TgZ(1,"div",2),e._UZ(2,"div",3),e.ALo(3,"safeHtml"),e.qZA(),e.TgZ(4,"div",4),e.YNc(5,A,1,0,"mat-spinner",5),e._UZ(6,"p",6),e.ALo(7,"safeHtml"),e.TgZ(8,"div")(9,"button",7),e.NdJ("click",function(){e.CHM(t);const o=e.MAs(13);return e.KtG(o.click())}),e.YNc(10,M,2,0,"div",8),e.YNc(11,y,2,1,"div",9),e.qZA(),e.TgZ(12,"input",10,11),e.NdJ("change",function(o){e.CHM(t);const d=e.oxw();return e.KtG(d.filesChanged(o))}),e.qZA(),e.YNc(14,O,2,0,"button",12),e.qZA(),e.YNc(15,Z,4,3,"div",13),e.YNc(16,w,2,0,"iframe",14),e.qZA(),e.YNc(17,S,3,2,"mat-dialog-actions",15),e.qZA()}if(2&i){const t=r.ngIf,a=e.oxw();e.Q6J("allowedFileTypes",a.dialogData.allowedFileTypes),e.xp6(2),e.Q6J("innerHtml",e.lcZ(3,11,a.dialogData.title),e.oJD),e.xp6(3),e.Q6J("ngIf",t.uploading),e.xp6(1),e.Q6J("innerHtml",e.lcZ(7,13,a.dialogData.description),e.oJD),e.xp6(3),e.Q6J("disabled",t.uploading),e.xp6(1),e.Q6J("ngIf",!t.files.length),e.xp6(1),e.Q6J("ngForOf",t.files),e.xp6(3),e.Q6J("ngIf",a.uploadType==a.UploadTypes.App),e.xp6(1),e.Q6J("ngIf",t.result),e.xp6(1),e.Q6J("ngIf",a.uploadType==a.UploadTypes.App&&t.showAppCatalog),e.xp6(1),e.Q6J("ngIf",!t.showAppCatalog)}}let R=(()=>{var i;class r extends m.f{constructor(a,o,d){super(),this.dialogData=a,this.dialogRef=o,this.snackBar=d,this.hostClass="dialog-component",this.uploading$=new p.X(!1),this.files$=new p.X([]),this.result$=new p.X(void 0),this.FileUploadMessageTypes=c.D,this.UploadTypes=c.p,this.showAppCatalog$=new p.X(!1)}ngOnInit(){this.subscription.add(this.files$.subscribe(()=>{void 0!==this.result$.value&&this.result$.next(void 0)})),null!=this.dialogData.files&&this.filesDropped(this.dialogData.files),this.viewModel$=(0,T.a)([this.uploading$,this.files$,this.result$,this.showAppCatalog$]).pipe((0,f.U)(([a,o,d,W])=>({uploading:a,files:o,result:d,showAppCatalog:W})))}ngOnDestroy(){this.uploading$.complete(),this.files$.complete(),this.result$.complete(),super.ngOnDestroy()}closeDialog(a){this.dialogRef.close(a)}filesDropped(a){this.setFiles(a),this.upload()}filesChanged(a){const d=Array.from(a.target.files);this.setFiles(d)}upload(){this.uploading$.next(!0),this.subscription.add(this.dialogData.upload$(this.files$.value).pipe((0,v.q)(1)).subscribe({next:a=>{this.uploading$.next(!1),this.result$.next(a)},error:()=>{this.uploading$.next(!1),this.result$.next(void 0),this.snackBar.open("Upload failed. Please check console for more information",void 0,{duration:3e3})}}))}showAppCatalog(){this.showAppCatalog$.next(!this.showAppCatalog$.value)}setFiles(a){this.dialogData.multiple||(a=a.slice(0,1)),this.files$.next(a)}}return(i=r).\u0275fac=function(a){return new(a||i)(e.Y36(l.WI),e.Y36(l.so),e.Y36(n.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-file-upload-dialog"]],viewQuery:function(a,o){if(1&a&&e.Gf(U,5),2&a){let d;e.iGM(d=e.CRH())&&(o.installerWindow=d.first)}},hostVars:1,hostBindings:function(a,o){2&a&&e.Ikx("className",o.hostClass)},inputs:{uploadType:"uploadType"},features:[e.qOj],decls:2,vars:3,consts:[["class","eav-dialog","appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",1,"eav-dialog",3,"allowedFileTypes","filesDropped"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title",3,"innerHtml"],[1,"eav-dialog-content"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[3,"innerHtml"],["mat-raised-button","","tippy","Open file browser",3,"disabled","click"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","file","multiple","",1,"hide",3,"change"],["fileInput",""],["mat-raised-button","","class","eav-app-catalog-button","tippy","Open app catalog",3,"click",4,"ngIf"],["class","eav-result-container",4,"ngIf"],["class","eav-app-catalog-iframe","src","//gettingstarted.2sxc.org/router.aspx?Platform=Dnn&SysVersion=9.6.1&SxcVersion=16.07.01&destination=autoconfigureapp&ModuleId=1197&SiteId=16&ZoneID=17&DefaultLanguage=en-us&CurrentLanguage=en-us&SysGuid=DB92DBFC-0C60-4101-93C6-803C2FE244B6&AppId=&fp=c2b7fabe7d51a0a0f6484d72bc119c8bf2d14b8ad29b30696a9148f9845a766c",4,"ngIf"],["align","end",4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],["mat-raised-button","","tippy","Open app catalog",1,"eav-app-catalog-button",3,"click"],[1,"eav-result-container"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["src","//gettingstarted.2sxc.org/router.aspx?Platform=Dnn&SysVersion=9.6.1&SxcVersion=16.07.01&destination=autoconfigureapp&ModuleId=1197&SiteId=16&ZoneID=17&DefaultLanguage=en-us&CurrentLanguage=en-us&SysGuid=DB92DBFC-0C60-4101-93C6-803C2FE244B6&AppId=&fp=c2b7fabe7d51a0a0f6484d72bc119c8bf2d14b8ad29b30696a9148f9845a766c",1,"eav-app-catalog-iframe"],["installerWindow",""],["align","end"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(a,o){1&a&&(e.YNc(0,K,18,15,"div",0),e.ALo(1,"async")),2&a&&e.Q6J("ngIf",e.lcZ(1,1,o.viewModel$))},dependencies:[_.mk,_.sg,_.O5,g.Ou,h.lW,l.H8,D.z,C.$,_.Ov,E.z],styles:[".eav-result-container[_ngcontent-%COMP%]{margin-top:16px}.eav-app-catalog-button[_ngcontent-%COMP%]{margin-left:12px}.eav-app-catalog-iframe[_ngcontent-%COMP%]{margin-top:16px;width:100%;height:500px;border:none}"]}),r})()},5101:(x,u,s)=>{s.d(u,{D:()=>l,p:()=>p});const l={Warning:0,Success:1,Error:2},p={App:0,AppPart:1,ContentType:2,ContentItem:3,Query:4,View:5}},7503:(x,u,s)=>{s.d(u,{DS:()=>p.D,UR:()=>l.U,pC:()=>p.p});var l=s(9399),p=s(5101)},2849:(x,u,s)=>{s.d(u,{z:()=>v});var l=s(1699),p=s(9016),T=s(9097),f=s(9409);let v=(()=>{var m;class c extends T.f{constructor(n,_,g){super(),this.zone=_,this.snackBar=g,this.markStyle="outline",this.allowedFileTypes="",this.filesDropped=new l.vpe,this.dropAreaClass="eav-droparea",this.dragClass="eav-dragover",this.timeouts=[],this.element=n.nativeElement}ngOnInit(){this.markStyleClass=`eav-droparea-${this.markStyle}`,this.element.classList.add(this.dropAreaClass,this.markStyleClass),this.zone.runOutsideAngular(()=>{this.subscription.add((0,p.R)(this.element,"dragover").subscribe(n=>{n.preventDefault(),n.stopPropagation(),this.clearTimeouts(),this.element.classList.add(this.dragClass)})),this.subscription.add((0,p.R)(this.element,"dragleave").subscribe(n=>{n.preventDefault(),n.stopPropagation(),this.timeouts.push(window.setTimeout(()=>{this.element.classList.remove(this.dragClass)},50))}))})}ngOnDestroy(){this.clearTimeouts(),this.element.classList.remove(this.dropAreaClass,this.markStyleClass,this.dragClass),super.ngOnDestroy()}onDrop(n){n.preventDefault(),n.stopPropagation(),this.clearTimeouts(),this.element.classList.remove(this.dragClass);let g=Array.from(n.dataTransfer.files);g=this.filterTypes(g,this.allowedFileTypes),g.length>0&&this.filesDropped.emit(g)}clearTimeouts(){for(const n of this.timeouts)clearTimeout(n);this.timeouts=[]}filterTypes(n,_){if(""===_)return n;const g=_.split(",").map(D=>D.toLocaleLowerCase()),h=n.filter(D=>{const C=D.name.lastIndexOf(".");if(C<=0)return!1;const E=D.name.substring(C+1).toLocaleLowerCase();return g.includes(E)});if(n.length!==h.length){const D=this.allowedFileTypes.replace(/\,/g,", ");this.snackBar.open(h.length?"Some files were filtered out. This drop location only accepts file types: "+D:"This drop location only accepts file types: "+D,null,{duration:5e3})}return h}}return(m=c).\u0275fac=function(n){return new(n||m)(l.Y36(l.SBq),l.Y36(l.R0b),l.Y36(f.ux))},m.\u0275dir=l.lG2({type:m,selectors:[["","appDragAndDrop",""]],hostBindings:function(n,_){1&n&&l.NdJ("drop",function(h){return _.onDrop(h)})},inputs:{markStyle:"markStyle",allowedFileTypes:"allowedFileTypes"},outputs:{filesDropped:"filesDropped"},features:[l.qOj]}),c})()},6537:(x,u,s)=>{s.d(u,{z:()=>T});var l=s(1699),p=s(6480);let T=(()=>{var f;class v{constructor(c){this.sanitizer=c}transform(c){return this.sanitizer.bypassSecurityTrustHtml(c)}}return(f=v).\u0275fac=function(c){return new(c||f)(l.Y36(p.H7,16))},f.\u0275pipe=l.Yjl({name:"safeHtml",type:f,pure:!0}),v})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.08.00/dist/ng-edit/default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts.590d943d12d2a4be.js.map