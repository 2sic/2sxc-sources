"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts"],{2348:(O,g,e)=>{e.r(g),e.d(g,{CreateAppComponent:()=>F});var n=e(8849),m=e(8071),u=e(3839),h=e(9736);const C=/^[A-Za-z](?:[A-Za-z0-9\s\(\)-]+)*$/;var x=e(6680),t=e(1699),_=e(6861),A=e(9409),T=e(91),o=e(9851),s=e(6575),c=e(895),d=e(9674),f=e(1268);function Z(i,p){1&i&&(t.TgZ(0,"app-field-hint",12),t._uU(1," Required "),t.qZA()),2&i&&t.Q6J("isError",!0)}function E(i,p){if(1&i&&(t.TgZ(0,"app-field-hint",12),t._uU(1),t.qZA()),2&i){const r=t.oxw(3);t.Q6J("isError",!0),t.xp6(1),t.hij(" ",r.appNameError," ")}}function M(i,p){if(1&i&&(t.ynx(0),t.YNc(1,Z,2,1,"app-field-hint",11),t.YNc(2,E,2,2,"app-field-hint",11),t.BQk()),2&i){const r=t.oxw(2);t.xp6(1),t.Q6J("ngIf",null==r.form.controls.name.errors?null:r.form.controls.name.errors.required),t.xp6(1),t.Q6J("ngIf",null==r.form.controls.name.errors?null:r.form.controls.name.errors.pattern)}}function b(i,p){if(1&i){const r=t.EpF();t.ynx(0),t.TgZ(1,"div",1)(2,"div",2)(3,"div",3),t._uU(4,"Create App"),t.qZA()(),t.TgZ(5,"div",4),t._UZ(6,"router-outlet"),t.TgZ(7,"form",5)(8,"mat-form-field",6)(9,"mat-label"),t._uU(10,"Name"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"app-field-hint"),t._uU(13," App name will also be used for the folder "),t.qZA(),t.YNc(14,M,3,2,"ng-container",0),t.qZA()(),t.TgZ(15,"mat-dialog-actions",8)(16,"button",9),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.closeDialog())}),t._uU(17," Cancel "),t.qZA(),t.TgZ(18,"button",10),t.NdJ("click",function(){t.CHM(r);const l=t.oxw();return t.KtG(l.create())}),t._uU(19," Create "),t.qZA()()(),t.BQk()}if(2&i){const r=p.ngIf,a=t.oxw();t.xp6(7),t.Q6J("formGroup",a.form),t.xp6(7),t.Q6J("ngIf",a.form.controls.name.touched),t.xp6(2),t.Q6J("disabled",r.loading),t.xp6(2),t.Q6J("disabled",r.loading||!a.form.valid)}}let F=(()=>{var i;class p{constructor(a,l,J){this.dialogRef=a,this.appsListService=l,this.snackBar=J,this.hostClass="dialog-component",this.appNameError="Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.",this.form=this.buildForm(),this.loading$=new m.X(!1)}ngOnInit(){this.viewModel$=(0,u.a)([this.loading$]).pipe((0,h.U)(([a])=>({loading:a})))}ngOnDestroy(){this.loading$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const a=this.form.controls.name.value?.trim().replace(/\s\s+/g," ");this.snackBar.open("Creating app..."),this.appsListService.create(a).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created app",void 0,{duration:2e3}),this.closeDialog()}})}buildForm(){return new n.nJ({name:new n.p4(null,[n.kI.required,n.kI.pattern(C)])})}}return(i=p).\u0275fac=function(a){return new(a||i)(t.Y36(_.so),t.Y36(x.A),t.Y36(A.ux))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-create-app"]],hostVars:1,hostBindings:function(a,l){2&a&&t.Ikx("className",l.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-form-field"],["matInput","","type","text","formControlName","name"],["align","end"],["type","button","mat-raised-button","",3,"disabled","click"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],[3,"isError",4,"ngIf"],[3,"isError"]],template:function(a,l){1&a&&(t.YNc(0,b,20,4,"ng-container",0),t.ALo(1,"async")),2&a&&t.Q6J("ngIf",t.lcZ(1,1,l.viewModel$))},dependencies:[T.lC,o.Y,_.H8,s.O5,c.lW,n._Y,n.Fj,n.JJ,n.JL,d.Nt,f.KE,f.hX,n.sg,n.u,s.Ov]}),p})()},9851:(O,g,e)=>{e.d(g,{Y:()=>T});var n=e(1699),m=e(6575),u=e(1268);function h(o,s){1&o&&n.GkF(0)}function C(o,s){if(1&o&&(n.TgZ(0,"mat-hint"),n.YNc(1,h,1,0,"ng-container",3),n.qZA()),2&o){n.oxw();const c=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",c)}}function v(o,s){1&o&&n.GkF(0)}function x(o,s){if(1&o&&(n.TgZ(0,"mat-error"),n.YNc(1,v,1,0,"ng-container",3),n.qZA()),2&o){n.oxw();const c=n.MAs(4);n.xp6(1),n.Q6J("ngTemplateOutlet",c)}}function t(o,s){1&o&&n.Hsn(0)}const _=function(o){return{"hint-box__short":o}},A=["*"];let T=(()=>{var o;class s{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}}return(o=s).\u0275fac=function(d){return new(d||o)},o.\u0275cmp=n.Xpm({type:o,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:A,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(d,f){1&d&&(n.F$t(),n.TgZ(0,"div",0),n.NdJ("click",function(){return f.toggleIsShort()}),n.YNc(1,C,2,1,"mat-hint",1),n.YNc(2,x,2,1,"mat-error",1),n.qZA(),n.YNc(3,t,1,0,"ng-template",null,2,n.W1O)),2&d&&(n.Q6J("ngClass",n.VKq(4,_,f.isShort))("ngSwitch",f.isError),n.xp6(1),n.Q6J("ngSwitchCase",!1),n.xp6(1),n.Q6J("ngSwitchCase",!0))},dependencies:[m.mk,m.tP,m.RF,m.n9,u.bx,u.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),s})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/16.08.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts.32f3ab7573171a65.js.map