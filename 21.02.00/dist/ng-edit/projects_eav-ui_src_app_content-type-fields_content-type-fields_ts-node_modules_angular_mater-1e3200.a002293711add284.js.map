{"version":3,"file":"projects_eav-ui_src_app_content-type-fields_content-type-fields_ts-node_modules_angular_mater-1e3200.a002293711add284.js","mappings":"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","names":["ServiceBase","constructor","this","subscriptions","Subscription","ngOnDestroy","destroy","unsubscribe","factory","Éµfac","GridWithHelpComponent","gridWrapper","viewChild","read","ElementRef","agGrid","contentChild","AgGridAngular","dialogAction","MatDialogActions","helpText","input","required","refresh","rowLength","DEFAULT_ROW_HEIGHT","GRID_HEADER_HEIGHT","HELP_CARD_BUFFER","effect","gridWrapperEl","nativeElement","untracked","#updateLayout","agGridEl","dialogActionEl","helpCard","querySelector","setTimeout","classList","toggle","style","flex","dimensions","#calculateDimensions","rowHeight","agGridHeight","sideNavEl","document","dialogEl","maxHeight","clientHeight","dialogHeaderHeight","dialogActionHeight","shouldHideHelp","helpCardHeight","wrapperHeight","offsetHeight","selectors","contentQueries","rf","ctx","dirIndex","i0","description","hint","AgGridHelper","cellLink","link","body","classes","MatFormFieldModule","static","__ngFactoryType__","type","imports","ObserversModule","MatFormField","BidiModule","ctx_r0","dialogData","message","ConfirmDeleteDialogComponent","#snackBar","dialog","hostClass","inject","MatSnackBar","ngOnInit","hasDeleteSnackbar","open","undefined","duration","#watchKeyboardShortcuts","keydownEvents","subscribe","event","isCtrlEnter","preventDefault","close","closeDialog","confirm","dismiss","saveAndClose","MAT_DIALOG_DATA","i1","hostVars","hostBindings","ConfirmDeleteDialogComponent_Conditional_8_Template","title","entityTitle","entityId","MatButtonModule","i2","MatIconModule","i3","SaveCloseButtonFabComponent","SafeHtmlPipe","styles","_c0","_c3","_c4","MAT_CARD_CONFIG","InjectionToken","MatCard","appearance","config","optional","hostAttrs","inputs","exportAs","ngContentSelectors","decls","vars","template","encapsulation","changeDetection","MatCardTitle","MatCardContent","MatCardSubtitle","MatCardActions","align","MatCardHeader","consts","MatCardAvatar","MatCardModule","ErrorStateMatcher","isErrorState","control","form","invalid","touched","submitted","token","providedIn","_ErrorStateTracker","_defaultMatcher","ngControl","_parentFormGroup","_parentForm","_stateChanges","errorState","matcher","updateErrorState","oldState","parent","newState","next","logSpecs","doOnDialogClosed","doOnDialogClosedWithData","DialogRoutingService","router","route","super","log","classLog","snapshot","url","urlSegments","split","getParam","key","paramMap","get","getParams","keys","reduce","acc","getQueryParam","queryParamMap","getQueryParams","state","currentNavigation","extras","callback","l","fnIf","add","childDialogClosed$","data","a","end","#childDialogClosedWithData","urlSubRoute","params","tree","createUrlTree","relativeTo","serializeUrl","navPath","navigate","navRelative","commands","events","pipe","filter","NavigationEnd","startWith","firstChild","map","pairwise","hadChildBefore","hasChildNow","tap","fn","snapShot","prev","curr","_r2","ctx_r2","do","shareText","shareOrInheritIcon","_r4","_r5","field","EditInfo","DisableRename","DisableDelete","IsTitle","ContentTypeFieldsActionsComponent","agInit","disableEdit","DisableEdit","enablePermissions","InputType","InputTypeCatalog","StringWysiwyg","Type","DataTypeCatalog","Hyperlink","enableMetadata","DisableMetadata","metadataCount","Metadata","Object","length","enableImageConfig","imageConfiguration","isRecommended","imgConfigCount","highlightOrDisabled","clickToConfigure","ss","SysSettings","Share","Guid","InheritMetadataOf","verb","_r1","ContentTypeFieldsActionsComponent_Conditional_10_Template","ContentTypeFieldsActionsComponent_Conditional_11_Template","ContentTypeFieldsActionsComponent_ng_template_17_Template","Permissions","Count","menu_r6","MatRippleModule","MatBadgeModule","MatMenuModule","i4","TippyDirective","ContentTypeFieldsDragComponent","isReordering","ContentTypeFieldsDragComponent_Conditional_0_Template","MatProgressSpinnerModule","ContentTypeFieldsSpecialComponent","hasFormulas","HasFormulas","isEphemeral","IsEphemeral","isHidden","All","VisibleInEditUI","disableTranslation","DisableTranslation","disabled","Disabled","Required","ContentTypeFieldsSpecialComponent_Conditional_1_Template","ContentTypeFieldsSpecialComponent_Conditional_2_Template","ContentTypeFieldsSpecialComponent_Conditional_3_Template","ContentTypeFieldsSpecialComponent_Conditional_4_Template","ContentTypeFieldsSpecialComponent_Conditional_5_Template","ContentTypeFieldsSpecialComponent_Conditional_6_Template","ContentTypeFieldsSpecialComponent_Conditional_7_Template","ContentTypeFieldsSpecialComponent_Conditional_8_Template","ContentTypeFieldsSpecialComponent_Conditional_9_Template","ContentTypeFieldsSpecialComponent_Conditional_10_Template","ContentTypeFieldsSpecialComponent_Conditional_11_Template","ContentTypeFieldsSpecialComponent_Conditional_12_Template","ctx_r1","setTitle","isTitle","suitableForTitle","ContentTypeFieldsTitleComponent","value","InputTypeHelpers","isEmpty","onSetTitle","ContentTypeFieldsTitleComponent_Conditional_1_Template","ContentTypeFieldsTitleComponent_Conditional_2_Template","ReadOnly","ContentTypeFieldsTypeComponent","icon","calculateTypeIcon","field_r2","ContentType","Name","field_r3","StaticName","field_r4","field_r6","$implicit","ctx_r6","selectField","fieldNameError","newName_r10","errors","reservedNames","FieldSharingAddMany_td_48_Conditional_6_Conditional_0_Template","FieldSharingAddMany_td_48_Conditional_6_Conditional_1_Template","pattern","$event","item_r9","_r8","newName","FieldSharingAddMany_td_48_Conditional_6_Template","fieldNamePattern","i_r11","item_r12","item_r14","_r13","removeField","FieldSharingAddMany","BaseComponent","#features","#contentTypesFieldsSvc","snackBar","matDialog","viewContainerRef","changeDetectorRef","FeaturesService","transient","ContentTypesFieldsService","ContentTypeFieldsReuseDefinitions","FeatureNames","optionsColumns","selectedColumns","shareableFields","MatTableDataSource","selectedFields","#reservedNamesSystem","getReservedNames","computed","reserved","ReservedNamesValidatorDirective","mergeReserved","existingFields","saving","signalObj","#fieldShareConfigManagement","isEnabled","disableClose","backdropClick","ngForm","dirty","getShareableFieldsPromise","then","fields","splice","indexOf","save","set","of","inheritField","concatMap","addInheritedField","contentType","Id","catchError","_","toArray","openFeatureDialog","viewQuery","NgForm","FieldSharingAddMany_th_29_Template","FieldSharingAddMany_td_30_Template","FieldSharingAddMany_th_32_Template","FieldSharingAddMany_td_33_Template","FieldSharingAddMany_th_35_Template","FieldSharingAddMany_td_36_Template","FieldSharingAddMany_th_38_Template","FieldSharingAddMany_td_39_Template","FieldSharingAddMany_tr_40_Template","FieldSharingAddMany_tr_41_Template","FieldSharingAddMany_th_47_Template","FieldSharingAddMany_td_48_Template","FieldSharingAddMany_th_50_Template","FieldSharingAddMany_td_51_Template","FieldSharingAddMany_th_53_Template","FieldSharingAddMany_td_54_Template","FieldSharingAddMany_tr_55_Template","FieldSharingAddMany_tr_56_Template","ngForm_r15","valid","MatTableModule","i5","FormsModule","i6","i7","MatInputModule","i8","TranslateModule","FeatureTextInfoComponent","FieldHintComponent","i9","i10","SharingOrInheriting","None","Sharing","Inheriting","ShareOrInheritDialogComponent_Case_9_ng_container_8_Template","detailsOrWarning_r3","s_r4","complete","ShareOrInheritDialogComponent_Case_10_Conditional_4_For_2_Template","_forTrack0","inherited","s_r5","ShareOrInheritDialogComponent_Case_10_Conditional_6_For_6_Template","notInherited","ShareOrInheritDialogComponent_Case_10_Conditional_4_Template","ShareOrInheritDialogComponent_Case_10_ng_container_5_Template","ShareOrInheritDialogComponent_Case_10_Conditional_6_Template","features","requiredFeature","field_r7","field_r8","field_r9","row_r11","_r10","guid","ShareOrInheritDialogComponent_Case_11_Case_20_th_11_Template","ShareOrInheritDialogComponent_Case_11_Case_20_td_12_Template","ShareOrInheritDialogComponent_Case_11_Case_20_th_14_Template","ShareOrInheritDialogComponent_Case_11_Case_20_td_15_Template","ShareOrInheritDialogComponent_Case_11_Case_20_th_17_Template","ShareOrInheritDialogComponent_Case_11_Case_20_td_18_Template","ShareOrInheritDialogComponent_Case_11_Case_20_tr_19_Template","ShareOrInheritDialogComponent_Case_11_Case_20_tr_20_Template","_r6","setShare","startInherit","ShareOrInheritDialogComponent_Case_11_Case_19_Template","ShareOrInheritDialogComponent_Case_11_Case_20_Template","sharingOrInheriting","tmp_4_0","field_r12","AttributeId","ShareOrInheritDialogComponent_ng_template_17_Conditional_0_Conditional_0_For_2_Template","_forTrack1","details","ShareOrInheritDialogComponent_ng_template_17_Conditional_0_Conditional_0_Template","ShareOrInheritDialogComponent_ng_template_17_Conditional_0_Conditional_1_Template","ShareOrInheritDialogComponent_ng_template_17_Conditional_0_Template","ShareOrInheritDialogComponent_ng_template_17_Conditional_1_Template","all","ShareOrInheritDialogComponent","signal","initialState","sysS","#inheritsInfo","computedObj","withFieldNames","substring","name","groupBy","g","none","n","inherits","getDescendants","getAncestors","getShareableFieldsFor","share","inherit","ShareOrInheritDialogComponent_Case_9_Template","ShareOrInheritDialogComponent_Case_10_Template","ShareOrInheritDialogComponent_Case_11_Template","ShareOrInheritDialogComponent_ng_template_17_Template","tmp_2_0","NgClass","NgTemplateOutlet","FeatureIconTextComponent","onRowDragEnter","onRowDragEnd","onRowDragMove","onGridReady","onSortChanged","onFilterChanged","gridOptions","sortApplied","filterApplied","ContentTypeFieldsComponent","#dialogRouter","#contentTypesSvc","ContentTypesService","#contentTypeStaticName","#helpTextConst","empty","content","uxHelpText","getType","#buildGridOptions","#rowDragSuppressed","#gridApi","#fetchFields","api","setGridOption","idArray","reOrder","overNode","movingNode","node","newFields","fromIndex","toIndex","reordered","#moveInArray","clearFocusedCell","arr","element","columnStates","getColumnState","some","sort","#suppressRowDrag","filterModel","getFilterModel","fieldsFiltered","shouldSuppress","addSharedField","autoFocus","width","afterClosed","#nameCellRenderer","inputType","endsPreviousGroup","isGroupOpen","isGroupStart","isGroupEnd","getFieldsPromise","#createItemDefinition","metadataType","keyForMdLookup","replace","newItemTypeName","existingMd","ItemIdHelper","editId","newMetadata","eavConstants","metadata","attribute","Prefill","#setTitle","#rename","#delete","isConfirmed","delete","#openPermissions","GoToPermissions","getUrlAttribute","#openImageConfiguration","imgConfig","Error","itemIdentifier","typeName","formUrl","convertFormToUrl","items","#openMetadata","GoToMetadata","#fieldEditUrl","ConfigTypes","t","#inputTypeEditUrl","#shareOrInherit","defaultGridOptions","getRowClass","rowClass","DisableSort","push","columnDefs","rowDrag","cellClass","cellRenderer","cellRendererParams","valueGetter","p","ColumnDefinitions","TextWidePrimary","headerName","ItemsText","minWidth","sortable","headerClass","Notes","ActionsPinnedRight5","ContentTypeFieldsComponent_Conditional_8_Template","tmp_3_0","Label","RouterOutlet","ToggleDebugDirective","SxcGridModule"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/services/service-base.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.html","./projects/eav-ui/src/app/shared/ag-grid/ag-grid-helper.ts","./node_modules/@angular/material/fesm2022/form-field.mjs","./projects/eav-ui/src/app/app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog.ts","./node_modules/@angular/material/fesm2022/card.mjs","./node_modules/@angular/material/fesm2022/_error-options-chunk.mjs","./node_modules/@angular/material/fesm2022/_error-state-chunk.mjs","./projects/eav-ui/src/app/shared/routing/dialog-routing.service.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-actions/content-type-fields-actions.html","./projects/eav-ui/src/app/content-type-fields/content-type-fields-actions/content-type-fields-actions.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-drag/content-type-fields-drag.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-special/content-type-fields-special.html","./projects/eav-ui/src/app/content-type-fields/content-type-fields-special/content-type-fields-special.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-title/content-type-fields-title.html","./projects/eav-ui/src/app/content-type-fields/content-type-fields-title/content-type-fields-title.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-type/content-type-fields-type.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields-type/content-type-fields-type.html","./projects/eav-ui/src/app/content-type-fields/field-sharing-add-many/field-sharing-add-many.html","./projects/eav-ui/src/app/content-type-fields/field-sharing-add-many/field-sharing-add-many.ts","./projects/eav-ui/src/app/content-type-fields/field-sharing-configure/field-sharing-configure.enums.ts","./projects/eav-ui/src/app/content-type-fields/field-sharing-configure/field-sharing-configure.html","./projects/eav-ui/src/app/content-type-fields/field-sharing-configure/field-sharing-configure.ts","./projects/eav-ui/src/app/content-type-fields/content-type-fields.html","./projects/eav-ui/src/app/content-type-fields/content-type-fields.ts"],"sourcesContent":["import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * Base class for services - just to standardize use of subscriptions.\r\n * Has @Injectable() just to allow it ot use the standard OnDestroy interface.\r\n */\r\n@Injectable()\r\nexport abstract class ServiceBase implements OnDestroy {\r\n\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  // TODO: TRY TO GET RID OF THIS. AFAIK it's just used in the mask, which should switch over to signals.\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n","import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { Component, contentChild, effect, ElementRef, input, untracked, viewChild } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\n\r\nexport interface HelpTextConst {\r\n  empty: GridWithHelpInput;\r\n  content: GridWithHelpInput;\r\n}\r\n\r\nexport interface GridWithHelpInput {\r\n  description: string;\r\n  hint: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-grid-with-help',\r\n  imports: [],\r\n  templateUrl: './grid-with-help.html',\r\n  styleUrl: './grid-with-help.scss'\r\n})\r\nexport class GridWithHelpComponent {\r\n  // ViewChild and ContentChild references - Access to DOM elements\r\n  gridWrapper = viewChild(\"gridWrapper\", { read: ElementRef });\r\n  agGrid = contentChild(AgGridAngular, { read: ElementRef });\r\n  dialogAction = contentChild(MatDialogActions, { read: ElementRef });\r\n\r\n  // Input properties - Required data from parent component\r\n  readonly helpText = input.required<GridWithHelpInput>({});\r\n  readonly refresh = input.required<number>();\r\n  readonly rowLength = input.required<number>();\r\n\r\n  // Constants - Fixed values for layout calculations\r\n  readonly DEFAULT_ROW_HEIGHT = 47; // Default height for AG Grid rows in pixels\r\n  readonly GRID_HEADER_HEIGHT = 64; // Height of AG Grid header in pixels\r\n  readonly HELP_CARD_BUFFER = 12;   // Additional buffer space for help card in pixels\r\n\r\n\r\n  // ag-row-even\r\n\r\n  constructor() {\r\n    // Effect that reacts to changes in refresh and rowLength signals\r\n    effect(() => {\r\n      const refresh = this.refresh();\r\n      const rowLength = this.rowLength();\r\n      const gridWrapperEl = this.gridWrapper()?.nativeElement;\r\n\r\n      // Early return if grid wrapper element is not available\r\n      if (!gridWrapperEl) return;\r\n\r\n      // Untracked execution to prevent unnecessary effect re-runs during layout updates\r\n      untracked(() => this.#updateLayout(gridWrapperEl, rowLength));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main layout update method - Handles the dynamic sizing and positioning of grid and help card\r\n   * @param gridWrapperEl - The main container element\r\n   * @param rowLength - Number of rows in the grid\r\n   */\r\n  #updateLayout(gridWrapperEl: HTMLElement, rowLength: number): void {\r\n    // Get references to essential DOM elements\r\n    const agGridEl = this.agGrid()?.nativeElement;\r\n    const dialogActionEl = this.dialogAction()?.nativeElement;\r\n    const helpCard = gridWrapperEl.querySelector('.help-info-card') as HTMLElement;\r\n\r\n    setTimeout(() => {\r\n      helpCard.classList.toggle('center-center', rowLength === 0);\r\n\r\n      // Early return if critical elements are missing\r\n      if (!agGridEl || !dialogActionEl) return;\r\n\r\n      helpCard.style.flex = \"\";\r\n\r\n      // Calculate all necessary dimensions for layout\r\n      const dimensions = this.#calculateDimensions(gridWrapperEl, agGridEl, dialogActionEl, helpCard, rowLength);\r\n\r\n      // Set AG Grid height based on row count and maximum height to prevent overflow\r\n      agGridEl.style.flex = dimensions.rowHeight ? `0 0 ${dimensions.agGridHeight}px` : '0px';\r\n\r\n      // Outer Container for max Size\r\n      const sideNavEl = document.querySelector<HTMLElement>('.mat-sidenav-content'); // with SideNav (settings)\r\n      const dialogEl = document.querySelector<HTMLElement>('.mat-mdc-dialog-container'); // only Dialog (Content)\r\n\r\n      const hasNavComponentWrapper = !!document.querySelector<HTMLElement>('.nav-component-wrapper'); // Check, if sideNav Dialog or Single Dialog \r\n      const outerContainer = hasNavComponentWrapper ? dialogEl : sideNavEl;\r\n\r\n      const maxHeight = outerContainer.clientHeight - dimensions.dialogHeaderHeight - dimensions.dialogActionHeight - 2;\r\n\r\n      agGridEl.style.maxHeight = `${maxHeight}px`;\r\n\r\n      // Determine if help card should be hidden when content exceeds available space\r\n      const shouldHideHelp = dimensions.helpCardHeight + dimensions.agGridHeight + dimensions.dialogActionHeight + dimensions.dialogHeaderHeight > dimensions.wrapperHeight;\r\n\r\n      helpCard.style.flex = \"1 1 auto\";\r\n      // Remove Help card from layout if it should be hidden\r\n      helpCard?.classList.toggle('hidden-help-info-card', shouldHideHelp);\r\n    }, 0);\r\n\r\n  }\r\n\r\n  // Calculate dimensions for AG Grid and help card based on current layout\r\n  #calculateDimensions(gridWrapperEl: HTMLElement, agGridEl: HTMLElement, dialogActionEl: HTMLElement, helpCard: HTMLElement, rowLength: number) {\r\n    const rowHeight = agGridEl.querySelector('.ag-row')?.clientHeight ?? this.DEFAULT_ROW_HEIGHT;\r\n    const agGridHeight = this.GRID_HEADER_HEIGHT + (rowLength * rowHeight);\r\n    const helpCardHeight = helpCard.clientHeight + this.HELP_CARD_BUFFER;\r\n    const dialogActionHeight = dialogActionEl.offsetHeight;\r\n    const dialogHeaderHeight = gridWrapperEl.querySelector('.eav-dialog-header')?.clientHeight ?? 0;\r\n    // Get total available wrapper height\r\n    const wrapperHeight = gridWrapperEl.offsetHeight;\r\n    return {\r\n      rowHeight,\r\n      agGridHeight,\r\n      helpCardHeight,\r\n      dialogActionHeight,\r\n      dialogHeaderHeight,\r\n      wrapperHeight\r\n    };\r\n  }\r\n}\r\n","<div class=\"grid-wrapper-dynamic\" #gridWrapper>\r\n  <ng-content select=\"[eav-dialog-header]\"></ng-content>\r\n  <ng-content select=\"[eav-dialog-content]\"> </ng-content>\r\n  <ng-content select=\"ag-grid-angular\"></ng-content>\r\n  <div class=\"help-info-card\">\r\n    <div class=\"help-info-card-text\">\r\n      <span [innerHTML]=\"helpText().description\"></span>\r\n      <span [innerHTML]=\"helpText().hint\"></span>\r\n    </div>\r\n  </div>\r\n  <ng-content select=\"mat-dialog-actions\"></ng-content>\r\n</div>\r\n","export class AgGridHelper {\r\n  public static cellLink(link: string, body: string, classes?: string): string {\r\n    return `<a class=\"default-link fill-cell ${classes}\" href=\"${link}\">${body}</a>`;\r\n  }\r\n}","import { MatFormField, MatLabel, MatError, MatHint, MatPrefix, MatSuffix } from './_form-field-chunk.mjs';\nexport { MAT_ERROR, MAT_FORM_FIELD, MAT_FORM_FIELD_DEFAULT_OPTIONS, MAT_PREFIX, MAT_SUFFIX, MatFormFieldControl, getMatFormFieldDuplicatedHintError, getMatFormFieldMissingControlError, getMatFormFieldPlaceholderConflictError } from './_form-field-chunk.mjs';\nimport { BidiModule } from '@angular/cdk/bidi';\nimport { ObserversModule } from '@angular/cdk/observers';\nimport * as i0 from '@angular/core';\nimport { NgModule } from '@angular/core';\nimport '@angular/cdk/a11y';\nimport '@angular/cdk/coercion';\nimport '@angular/cdk/platform';\nimport '@angular/common';\nimport 'rxjs';\nimport 'rxjs/operators';\nimport '@angular/cdk/observers/private';\nimport './_animation-chunk.mjs';\nimport '@angular/cdk/layout';\n\nclass MatFormFieldModule {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatFormFieldModule,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.NgModule\n  });\n  static Éµmod = i0.ÉµÉµngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatFormFieldModule,\n    imports: [ObserversModule, MatFormField, MatLabel, MatError, MatHint, MatPrefix, MatSuffix],\n    exports: [MatFormField, MatLabel, MatHint, MatError, MatPrefix, MatSuffix, BidiModule]\n  });\n  static Éµinj = i0.ÉµÉµngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatFormFieldModule,\n    imports: [ObserversModule, MatFormField, BidiModule]\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatFormFieldModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: [ObserversModule, MatFormField, MatLabel, MatError, MatHint, MatPrefix, MatSuffix],\n      exports: [MatFormField, MatLabel, MatHint, MatError, MatPrefix, MatSuffix, BidiModule]\n    }]\n  }]\n});\n\nexport { MatError, MatFormField, MatFormFieldModule, MatHint, MatLabel, MatPrefix, MatSuffix };\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ dialogData.title ?? 'Delete' }} {{ dialogData.entityTitle }} ({{ dialogData.entityId }})\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n\r\n  <div class=\"eav-dialog-content\">\r\n    @if (dialogData.message) {\r\n      <p [innerHtml]=\"dialogData.message | safeHtml\"></p>\r\n    }\r\n  </div>\r\n\r\n  <mat-dialog-actions align=\"end\">\r\n    <app-save-close-button-fab\r\n      [label]=\"'Delete and close (ctrl + enter)'\"\r\n      (action)=\"saveAndClose(true)\"\r\n    />\r\n  </mat-dialog-actions>\r\n</div>","import { Component, HostBinding, inject, Inject, OnInit } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MAT_DIALOG_DATA, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { isCtrlEnter } from '../../../edit/dialog/main/keyboard-shortcuts';\r\nimport { SaveCloseButtonFabComponent } from '../../../shared/modules/save-close-button-fab/save-close-button-fab';\r\nimport { SafeHtmlPipe } from '../../../shared/pipes/safe-html.pipe';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\n\r\n@Component({\r\n  selector: 'app-confirm-delete-dialog',\r\n  templateUrl: './confirm-delete-dialog.html',\r\n  styleUrls: ['./confirm-delete-dialog.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    SafeHtmlPipe,\r\n    MatIconModule,\r\n    MatDialogActions,\r\n    SaveCloseButtonFabComponent,\r\n  ]\r\n})\r\nexport class ConfirmDeleteDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  #snackBar = inject(MatSnackBar);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    public dialog: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    if (this.dialogData.hasDeleteSnackbar)\r\n    this.#snackBar.open('Deleting...', undefined, { duration: 5000 });\r\n    this.#watchKeyboardShortcuts();\r\n  }\r\n\r\n  #watchKeyboardShortcuts(): void {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlEnter(event)) {\r\n        event.preventDefault();\r\n        this.dialog.close(true);\r\n      }\r\n    });\r\n  }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.#snackBar.dismiss();\r\n    confirm\r\n      ? this.dialog.close(confirm)\r\n      : this.dialog.close();\r\n  }\r\n\r\n  saveAndClose(confirm: boolean) {\r\n    this.closeDialog(confirm);\r\n    if (this.dialogData.hasDeleteSnackbar)\r\n      this.#snackBar.dismiss();\r\n  }\r\n}\r\n","import * as i0 from '@angular/core';\nimport { InjectionToken, inject, Component, ViewEncapsulation, ChangeDetectionStrategy, Input, Directive, NgModule } from '@angular/core';\nimport { BidiModule } from '@angular/cdk/bidi';\n\nconst MAT_CARD_CONFIG = new InjectionToken('MAT_CARD_CONFIG');\nclass MatCard {\n  appearance;\n  constructor() {\n    const config = inject(MAT_CARD_CONFIG, {\n      optional: true\n    });\n    this.appearance = config?.appearance || 'raised';\n  }\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCard,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Component\n  });\n  static Éµcmp = i0.ÉµÉµngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCard,\n    isStandalone: true,\n    selector: \"mat-card\",\n    inputs: {\n      appearance: \"appearance\"\n    },\n    host: {\n      properties: {\n        \"class.mat-mdc-card-outlined\": \"appearance === \\\"outlined\\\"\",\n        \"class.mdc-card--outlined\": \"appearance === \\\"outlined\\\"\",\n        \"class.mat-mdc-card-filled\": \"appearance === \\\"filled\\\"\",\n        \"class.mdc-card--filled\": \"appearance === \\\"filled\\\"\"\n      },\n      classAttribute: \"mat-mdc-card mdc-card\"\n    },\n    exportAs: [\"matCard\"],\n    ngImport: i0,\n    template: \"<ng-content></ng-content>\\n\",\n    styles: [\".mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:\\\"\\\";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:\\\"\\\"}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}\\n\"],\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCard,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-card',\n      host: {\n        'class': 'mat-mdc-card mdc-card',\n        '[class.mat-mdc-card-outlined]': 'appearance === \"outlined\"',\n        '[class.mdc-card--outlined]': 'appearance === \"outlined\"',\n        '[class.mat-mdc-card-filled]': 'appearance === \"filled\"',\n        '[class.mdc-card--filled]': 'appearance === \"filled\"'\n      },\n      exportAs: 'matCard',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      template: \"<ng-content></ng-content>\\n\",\n      styles: [\".mat-mdc-card{display:flex;flex-direction:column;box-sizing:border-box;position:relative;border-style:solid;border-width:0;background-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-color:var(--mat-card-elevated-container-color, var(--mat-sys-surface-container-low));border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-elevated-container-elevation, var(--mat-sys-level1))}.mat-mdc-card::after{position:absolute;top:0;left:0;width:100%;height:100%;border:solid 1px rgba(0,0,0,0);content:\\\"\\\";display:block;pointer-events:none;box-sizing:border-box;border-radius:var(--mat-card-elevated-container-shape, var(--mat-sys-corner-medium))}.mat-mdc-card-outlined{background-color:var(--mat-card-outlined-container-color, var(--mat-sys-surface));border-radius:var(--mat-card-outlined-container-shape, var(--mat-sys-corner-medium));border-width:var(--mat-card-outlined-outline-width, 1px);border-color:var(--mat-card-outlined-outline-color, var(--mat-sys-outline-variant));box-shadow:var(--mat-card-outlined-container-elevation, var(--mat-sys-level0))}.mat-mdc-card-outlined::after{border:none}.mat-mdc-card-filled{background-color:var(--mat-card-filled-container-color, var(--mat-sys-surface-container-highest));border-radius:var(--mat-card-filled-container-shape, var(--mat-sys-corner-medium));box-shadow:var(--mat-card-filled-container-elevation, var(--mat-sys-level0))}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:\\\"\\\"}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mat-mdc-card-actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font, var(--mat-sys-title-large-font));line-height:var(--mat-card-title-text-line-height, var(--mat-sys-title-large-line-height));font-size:var(--mat-card-title-text-size, var(--mat-sys-title-large-size));letter-spacing:var(--mat-card-title-text-tracking, var(--mat-sys-title-large-tracking));font-weight:var(--mat-card-title-text-weight, var(--mat-sys-title-large-weight))}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color, var(--mat-sys-on-surface));font-family:var(--mat-card-subtitle-text-font, var(--mat-sys-title-medium-font));line-height:var(--mat-card-subtitle-text-line-height, var(--mat-sys-title-medium-line-height));font-size:var(--mat-card-subtitle-text-size, var(--mat-sys-title-medium-size));letter-spacing:var(--mat-card-subtitle-text-tracking, var(--mat-sys-title-medium-tracking));font-weight:var(--mat-card-subtitle-text-weight, var(--mat-sys-title-medium-weight))}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}\\n\"]\n    }]\n  }],\n  ctorParameters: () => [],\n  propDecorators: {\n    appearance: [{\n      type: Input\n    }]\n  }\n});\nclass MatCardTitle {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardTitle,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardTitle,\n    isStandalone: true,\n    selector: \"mat-card-title, [mat-card-title], [matCardTitle]\",\n    host: {\n      classAttribute: \"mat-mdc-card-title\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardTitle,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: `mat-card-title, [mat-card-title], [matCardTitle]`,\n      host: {\n        'class': 'mat-mdc-card-title'\n      }\n    }]\n  }]\n});\nclass MatCardTitleGroup {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardTitleGroup,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Component\n  });\n  static Éµcmp = i0.ÉµÉµngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardTitleGroup,\n    isStandalone: true,\n    selector: \"mat-card-title-group\",\n    host: {\n      classAttribute: \"mat-mdc-card-title-group\"\n    },\n    ngImport: i0,\n    template: \"<div>\\n  <ng-content\\n      select=\\\"mat-card-title, mat-card-subtitle,\\n      [mat-card-title], [mat-card-subtitle],\\n      [matCardTitle], [matCardSubtitle]\\\"></ng-content>\\n</div>\\n<ng-content select=\\\"[mat-card-image], [matCardImage],\\n                    [mat-card-sm-image], [matCardImageSmall],\\n                    [mat-card-md-image], [matCardImageMedium],\\n                    [mat-card-lg-image], [matCardImageLarge],\\n                    [mat-card-xl-image], [matCardImageXLarge]\\\"></ng-content>\\n<ng-content></ng-content>\\n\",\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardTitleGroup,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-card-title-group',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      host: {\n        'class': 'mat-mdc-card-title-group'\n      },\n      template: \"<div>\\n  <ng-content\\n      select=\\\"mat-card-title, mat-card-subtitle,\\n      [mat-card-title], [mat-card-subtitle],\\n      [matCardTitle], [matCardSubtitle]\\\"></ng-content>\\n</div>\\n<ng-content select=\\\"[mat-card-image], [matCardImage],\\n                    [mat-card-sm-image], [matCardImageSmall],\\n                    [mat-card-md-image], [matCardImageMedium],\\n                    [mat-card-lg-image], [matCardImageLarge],\\n                    [mat-card-xl-image], [matCardImageXLarge]\\\"></ng-content>\\n<ng-content></ng-content>\\n\"\n    }]\n  }]\n});\nclass MatCardContent {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardContent,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardContent,\n    isStandalone: true,\n    selector: \"mat-card-content\",\n    host: {\n      classAttribute: \"mat-mdc-card-content\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardContent,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'mat-card-content',\n      host: {\n        'class': 'mat-mdc-card-content'\n      }\n    }]\n  }]\n});\nclass MatCardSubtitle {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardSubtitle,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardSubtitle,\n    isStandalone: true,\n    selector: \"mat-card-subtitle, [mat-card-subtitle], [matCardSubtitle]\",\n    host: {\n      classAttribute: \"mat-mdc-card-subtitle\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardSubtitle,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: `mat-card-subtitle, [mat-card-subtitle], [matCardSubtitle]`,\n      host: {\n        'class': 'mat-mdc-card-subtitle'\n      }\n    }]\n  }]\n});\nclass MatCardActions {\n  align = 'start';\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardActions,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardActions,\n    isStandalone: true,\n    selector: \"mat-card-actions\",\n    inputs: {\n      align: \"align\"\n    },\n    host: {\n      properties: {\n        \"class.mat-mdc-card-actions-align-end\": \"align === \\\"end\\\"\"\n      },\n      classAttribute: \"mat-mdc-card-actions mdc-card__actions\"\n    },\n    exportAs: [\"matCardActions\"],\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardActions,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'mat-card-actions',\n      exportAs: 'matCardActions',\n      host: {\n        'class': 'mat-mdc-card-actions mdc-card__actions',\n        '[class.mat-mdc-card-actions-align-end]': 'align === \"end\"'\n      }\n    }]\n  }],\n  propDecorators: {\n    align: [{\n      type: Input\n    }]\n  }\n});\nclass MatCardHeader {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardHeader,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Component\n  });\n  static Éµcmp = i0.ÉµÉµngDeclareComponent({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardHeader,\n    isStandalone: true,\n    selector: \"mat-card-header\",\n    host: {\n      classAttribute: \"mat-mdc-card-header\"\n    },\n    ngImport: i0,\n    template: \"<ng-content select=\\\"[mat-card-avatar], [matCardAvatar]\\\"></ng-content>\\n<div class=\\\"mat-mdc-card-header-text\\\">\\n  <ng-content\\n      select=\\\"mat-card-title, mat-card-subtitle,\\n      [mat-card-title], [mat-card-subtitle],\\n      [matCardTitle], [matCardSubtitle]\\\"></ng-content>\\n</div>\\n<ng-content></ng-content>\\n\",\n    changeDetection: i0.ChangeDetectionStrategy.OnPush,\n    encapsulation: i0.ViewEncapsulation.None\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardHeader,\n  decorators: [{\n    type: Component,\n    args: [{\n      selector: 'mat-card-header',\n      encapsulation: ViewEncapsulation.None,\n      changeDetection: ChangeDetectionStrategy.OnPush,\n      host: {\n        'class': 'mat-mdc-card-header'\n      },\n      template: \"<ng-content select=\\\"[mat-card-avatar], [matCardAvatar]\\\"></ng-content>\\n<div class=\\\"mat-mdc-card-header-text\\\">\\n  <ng-content\\n      select=\\\"mat-card-title, mat-card-subtitle,\\n      [mat-card-title], [mat-card-subtitle],\\n      [matCardTitle], [matCardSubtitle]\\\"></ng-content>\\n</div>\\n<ng-content></ng-content>\\n\"\n    }]\n  }]\n});\nclass MatCardFooter {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardFooter,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardFooter,\n    isStandalone: true,\n    selector: \"mat-card-footer\",\n    host: {\n      classAttribute: \"mat-mdc-card-footer\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardFooter,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: 'mat-card-footer',\n      host: {\n        'class': 'mat-mdc-card-footer'\n      }\n    }]\n  }]\n});\nclass MatCardImage {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardImage,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardImage,\n    isStandalone: true,\n    selector: \"[mat-card-image], [matCardImage]\",\n    host: {\n      classAttribute: \"mat-mdc-card-image mdc-card__media\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardImage,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-card-image], [matCardImage]',\n      host: {\n        'class': 'mat-mdc-card-image mdc-card__media'\n      }\n    }]\n  }]\n});\nclass MatCardSmImage {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardSmImage,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardSmImage,\n    isStandalone: true,\n    selector: \"[mat-card-sm-image], [matCardImageSmall]\",\n    host: {\n      classAttribute: \"mat-mdc-card-sm-image mdc-card__media\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardSmImage,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-card-sm-image], [matCardImageSmall]',\n      host: {\n        'class': 'mat-mdc-card-sm-image mdc-card__media'\n      }\n    }]\n  }]\n});\nclass MatCardMdImage {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardMdImage,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardMdImage,\n    isStandalone: true,\n    selector: \"[mat-card-md-image], [matCardImageMedium]\",\n    host: {\n      classAttribute: \"mat-mdc-card-md-image mdc-card__media\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardMdImage,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-card-md-image], [matCardImageMedium]',\n      host: {\n        'class': 'mat-mdc-card-md-image mdc-card__media'\n      }\n    }]\n  }]\n});\nclass MatCardLgImage {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardLgImage,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardLgImage,\n    isStandalone: true,\n    selector: \"[mat-card-lg-image], [matCardImageLarge]\",\n    host: {\n      classAttribute: \"mat-mdc-card-lg-image mdc-card__media\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardLgImage,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-card-lg-image], [matCardImageLarge]',\n      host: {\n        'class': 'mat-mdc-card-lg-image mdc-card__media'\n      }\n    }]\n  }]\n});\nclass MatCardXlImage {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardXlImage,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardXlImage,\n    isStandalone: true,\n    selector: \"[mat-card-xl-image], [matCardImageXLarge]\",\n    host: {\n      classAttribute: \"mat-mdc-card-xl-image mdc-card__media\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardXlImage,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-card-xl-image], [matCardImageXLarge]',\n      host: {\n        'class': 'mat-mdc-card-xl-image mdc-card__media'\n      }\n    }]\n  }]\n});\nclass MatCardAvatar {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardAvatar,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Directive\n  });\n  static Éµdir = i0.ÉµÉµngDeclareDirective({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    type: MatCardAvatar,\n    isStandalone: true,\n    selector: \"[mat-card-avatar], [matCardAvatar]\",\n    host: {\n      classAttribute: \"mat-mdc-card-avatar\"\n    },\n    ngImport: i0\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardAvatar,\n  decorators: [{\n    type: Directive,\n    args: [{\n      selector: '[mat-card-avatar], [matCardAvatar]',\n      host: {\n        'class': 'mat-mdc-card-avatar'\n      }\n    }]\n  }]\n});\n\nconst CARD_DIRECTIVES = [MatCard, MatCardActions, MatCardAvatar, MatCardContent, MatCardFooter, MatCardHeader, MatCardImage, MatCardLgImage, MatCardMdImage, MatCardSmImage, MatCardSubtitle, MatCardTitle, MatCardTitleGroup, MatCardXlImage];\nclass MatCardModule {\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardModule,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.NgModule\n  });\n  static Éµmod = i0.ÉµÉµngDeclareNgModule({\n    minVersion: \"14.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardModule,\n    imports: [MatCard, MatCardActions, MatCardAvatar, MatCardContent, MatCardFooter, MatCardHeader, MatCardImage, MatCardLgImage, MatCardMdImage, MatCardSmImage, MatCardSubtitle, MatCardTitle, MatCardTitleGroup, MatCardXlImage],\n    exports: [MatCard, MatCardActions, MatCardAvatar, MatCardContent, MatCardFooter, MatCardHeader, MatCardImage, MatCardLgImage, MatCardMdImage, MatCardSmImage, MatCardSubtitle, MatCardTitle, MatCardTitleGroup, MatCardXlImage, BidiModule]\n  });\n  static Éµinj = i0.ÉµÉµngDeclareInjector({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: MatCardModule,\n    imports: [BidiModule]\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: MatCardModule,\n  decorators: [{\n    type: NgModule,\n    args: [{\n      imports: CARD_DIRECTIVES,\n      exports: [CARD_DIRECTIVES, BidiModule]\n    }]\n  }]\n});\n\nexport { MAT_CARD_CONFIG, MatCard, MatCardActions, MatCardAvatar, MatCardContent, MatCardFooter, MatCardHeader, MatCardImage, MatCardLgImage, MatCardMdImage, MatCardModule, MatCardSmImage, MatCardSubtitle, MatCardTitle, MatCardTitleGroup, MatCardXlImage };\n","import * as i0 from '@angular/core';\nimport { Injectable } from '@angular/core';\n\nclass ShowOnDirtyErrorStateMatcher {\n  isErrorState(control, form) {\n    return !!(control && control.invalid && (control.dirty || form && form.submitted));\n  }\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: ShowOnDirtyErrorStateMatcher,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Injectable\n  });\n  static Éµprov = i0.ÉµÉµngDeclareInjectable({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: ShowOnDirtyErrorStateMatcher\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: ShowOnDirtyErrorStateMatcher,\n  decorators: [{\n    type: Injectable\n  }]\n});\nclass ErrorStateMatcher {\n  isErrorState(control, form) {\n    return !!(control && control.invalid && (control.touched || form && form.submitted));\n  }\n  static Éµfac = i0.ÉµÉµngDeclareFactory({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: ErrorStateMatcher,\n    deps: [],\n    target: i0.ÉµÉµFactoryTarget.Injectable\n  });\n  static Éµprov = i0.ÉµÉµngDeclareInjectable({\n    minVersion: \"12.0.0\",\n    version: \"21.0.3\",\n    ngImport: i0,\n    type: ErrorStateMatcher,\n    providedIn: 'root'\n  });\n}\ni0.ÉµÉµngDeclareClassMetadata({\n  minVersion: \"12.0.0\",\n  version: \"21.0.3\",\n  ngImport: i0,\n  type: ErrorStateMatcher,\n  decorators: [{\n    type: Injectable,\n    args: [{\n      providedIn: 'root'\n    }]\n  }]\n});\n\nexport { ErrorStateMatcher, ShowOnDirtyErrorStateMatcher };\n","class _ErrorStateTracker {\n  _defaultMatcher;\n  ngControl;\n  _parentFormGroup;\n  _parentForm;\n  _stateChanges;\n  errorState = false;\n  matcher;\n  constructor(_defaultMatcher, ngControl, _parentFormGroup, _parentForm, _stateChanges) {\n    this._defaultMatcher = _defaultMatcher;\n    this.ngControl = ngControl;\n    this._parentFormGroup = _parentFormGroup;\n    this._parentForm = _parentForm;\n    this._stateChanges = _stateChanges;\n  }\n  updateErrorState() {\n    const oldState = this.errorState;\n    const parent = this._parentFormGroup || this._parentForm;\n    const matcher = this.matcher || this._defaultMatcher;\n    const control = this.ngControl ? this.ngControl.control : null;\n    const newState = matcher?.isErrorState(control, parent) ?? false;\n    if (newState !== oldState) {\n      this.errorState = newState;\n      this._stateChanges.next();\n    }\n  }\n}\n\nexport { _ErrorStateTracker };\n","import { Injectable } from '@angular/core';\r\nimport { ActivatedRoute, NavigationEnd, NavigationExtras, Router } from '@angular/router';\r\nimport { filter, map, pairwise, startWith, tap } from 'rxjs';\r\nimport { classLog } from '../logging';\r\nimport { ServiceBase } from '../services/service-base';\r\n\r\nconst logSpecs = {\r\n  doOnDialogClosed: false,\r\n  doOnDialogClosedWithData: true,\r\n};\r\n\r\n/**\r\n * Helper to handle dialog routings, especially:\r\n * 1. handling on-child-closed events (it also takes care of subscriptions)\r\n * 2. accessing the router and route - a very common task when you have dialogs\r\n */\r\n@Injectable()\r\nexport class DialogRoutingService extends ServiceBase {\r\n\r\n  log = classLog({ DialogRoutingService }, logSpecs);\r\n\r\n  constructor(\r\n    public router: Router,\r\n    public route: ActivatedRoute\r\n  ) { super(); }\r\n\r\n  get snapshot() { return this.route.snapshot; }\r\n\r\n  get url() { return this.router.url; }\r\n\r\n  get urlSegments() { return this.router.url.split('/'); }\r\n\r\n  getParam(key: string): string {\r\n    return this.route.snapshot.paramMap.get(key);\r\n  }\r\n\r\n  getParams<K extends string>(keys: K[]): Record<K, string> {\r\n    const paramMap = this.route.snapshot.paramMap;\r\n    return keys.reduce((acc, key) => {\r\n      acc[key] = paramMap.get(key);\r\n      return acc;\r\n    }, {} as Record<string, string>);\r\n  }\r\n\r\n  getQueryParam(key: string): string {\r\n    return this.route.snapshot.queryParamMap.get(key);\r\n  }\r\n\r\n  getQueryParams<K extends string>(keys: K[]): Record<K, string> {\r\n    const queryParamMap = this.route.snapshot.queryParamMap;\r\n    return keys.reduce((acc, key) => {\r\n      acc[key] = queryParamMap.get(key);\r\n      return acc;\r\n    }, {} as Record<string, string>);\r\n  }\r\n\r\n  state<T = any>() { return this.router.currentNavigation().extras?.state as T; }\r\n\r\n  /**\r\n   * Preferred way to register a callback, since the caller doesn't need to worry about subscriptions.\r\n   */\r\n  public doOnDialogClosed(callback: () => void) {\r\n    const l = this.log.fnIf('doOnDialogClosed');\r\n    this.subscriptions.add(\r\n      this.childDialogClosed$().subscribe((data: unknown) => {\r\n        l.a('Dialog closed', { data });\r\n        return callback();\r\n      })\r\n    );\r\n    l.end();\r\n  }\r\n\r\n  public doOnDialogClosedWithData(callback: (data: any) => void) {\r\n    const l = this.log.fnIf('doOnDialogClosedWithData');\r\n    this.subscriptions.add(\r\n      this.#childDialogClosedWithData().subscribe(({ state }) => {\r\n        l.a('Dialog closed', { state });\r\n        callback(state);\r\n      })\r\n    );\r\n    l.end();\r\n  }\r\n\r\n  /**\r\n   * Get the URL for a sub-route of the current route.\r\n   */\r\n  public urlSubRoute(params: string) {\r\n    const tree = this.router.createUrlTree([params], { relativeTo: this.route });\r\n    const routeUrl = this.router.serializeUrl(tree);\r\n    return routeUrl;\r\n  }\r\n\r\n  /**\r\n   * Navigate to a new route.\r\n   * Just looks a bit simpler than the internal array notation.\r\n   */\r\n  public navPath(url: string, extras?: NavigationExtras): Promise<boolean> {\r\n    return this.router.navigate([url], extras);\r\n  }\r\n\r\n  /**\r\n   * Navigate relative to the current route.\r\n   */\r\n  public navRelative(commands: any[], extras?: Omit<NavigationExtras, 'relativeTo'>): Promise<boolean> {\r\n    return this.router.navigate(commands, { ...extras, relativeTo: this.route });\r\n  }\r\n\r\n  public childDialogClosed$() {\r\n    return this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      startWith(!!this.route.snapshot.firstChild),\r\n      map(() => !!this.route.snapshot.firstChild),\r\n      pairwise(),\r\n      filter(([hadChildBefore, hasChildNow]) => hadChildBefore && !hasChildNow),\r\n    )\r\n  }\r\n\r\n  #childDialogClosedWithData() {\r\n    return this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      tap(event => {\r\n        const l = this.log.fn(\"childDialogClosed$\", {\r\n          event,\r\n          firstChild: this.route.snapshot.firstChild,\r\n          snapShot: this.route.snapshot,\r\n          state: this.router.currentNavigation()?.extras.state,\r\n        });\r\n        l.a('NavigationEnd', { event });\r\n        l.end();\r\n      }),\r\n      startWith(!!this.route.snapshot.firstChild),\r\n      map(() => ({\r\n        hasChildNow: !!this.route.snapshot.firstChild,\r\n        state: this.router.currentNavigation()?.extras.state,\r\n      })),\r\n      pairwise(),\r\n      filter(([prev, curr]) => prev.hasChildNow && !curr.hasChildNow),\r\n      map(([prev, curr]) => ({\r\n        hadChildBefore: prev.hasChildNow,\r\n        hasChildNow: curr.hasChildNow,\r\n        state: curr.state\r\n      }))\r\n    );\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <!-- Metadata Button -->\r\n  <div class=\"eav-grid-action-button {{ highlightOrDisabled(enableMetadata) }}\"\r\n    matRipple tippy=\"Metadata\"\r\n    (click)=\"enableMetadata ? do('metadata') : ''\"\r\n  >\r\n    <mat-icon [matBadge]=\"metadataCount\" matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadgeDisabled]=\"!enableMetadata\"\r\n      [matBadgeHidden]=\"!metadataCount\" matBadgePosition=\"below after\" aria-hidden=\"false\"\r\n    >local_offer</mat-icon>\r\n  </div>\r\n\r\n  <!-- Image Config Button -->\r\n  <div class=\"eav-grid-action-button {{ highlightOrDisabled(enableImageConfig) }}\"\r\n    matRipple\r\n    tippy=\"{{ enableImageConfig ? 'Image Configuration' : 'no image configuration for this field' }}\"\r\n    (click)=\"enableImageConfig ? do('image') : ''\">\r\n    <mat-icon [matBadge]=\"imgConfigCount\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!imgConfigCount\" matBadgePosition=\"below after\" aria-hidden=\"false\"\r\n      matBadgeColor=\"accent\" [matBadgeDisabled]=\"!enableImageConfig\"\r\n      >filter_center_focus</mat-icon>\r\n  </div>\r\n\r\n  <!-- Permissions Button -->\r\n  <div class=\"eav-grid-action-button {{ highlightOrDisabled(enablePermissions) }}\"\r\n    matRipple\r\n    tippy=\"{{ enablePermissions ? 'Permissions' : 'no permissions to configure on this field' }}\"\r\n    (click)=\"enablePermissions ? do('permissions') : ''\">\r\n    <mat-icon [matBadge]=\"field.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\" [matBadgeDisabled]=\"!enablePermissions\"\r\n      [matBadgeHidden]=\"!field.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\"\r\n      >person</mat-icon>\r\n  </div>\r\n\r\n\r\n  <!-- Share Button -->\r\n  @if (shareOrInheritIcon() != '') {\r\n    <div class=\"eav-grid-action-button highlight\" matRipple [tippy]=\"shareText()\" (click)=\"do('shareOrInherit')\">\r\n      <mat-icon aria-hidden=\"false\">\r\n        {{ shareOrInheritIcon() }}\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n  @else {\r\n    <div class=\"eav-grid-action-button disabled eav-hover-icon-div\" matRipple [tippy]=\"shareText()\" (click)=\"do('shareOrInherit')\">\r\n      <mat-icon aria-hidden=\"false\" class=\"eav-hover-icon disabled\">\r\n        share\r\n      </mat-icon>\r\n    </div>\r\n  }\r\n\r\n  <!-- More Button -->\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<!-- More Menu -->\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <ng-template matMenuContent>\r\n    <button mat-menu-item [disabled]=\"field.EditInfo.DisableRename\" (click)=\"do('rename')\">\r\n      <mat-icon>text_fields</mat-icon>\r\n      <span>Rename</span>\r\n    </button>\r\n    <button mat-menu-item [disabled]=\"field.EditInfo.DisableDelete || field.IsTitle\" (click)=\"do('delete')\">\r\n      <mat-icon>delete</mat-icon>\r\n      <span>Delete</span>\r\n    </button>\r\n  </ng-template>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { DataTypeCatalog } from '../../shared/fields/data-type-catalog';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { InputTypeCatalog } from '../../shared/fields/input-type-catalog';\r\nimport { ContentTypeFieldsActions, ContentTypeFieldsActionsParams } from './content-type-fields-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-content-type-fields-actions',\r\n    templateUrl: './content-type-fields-actions.html',\r\n    styleUrls: ['./content-type-fields-actions.scss'],\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        MatBadgeModule,\r\n        MatMenuModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class ContentTypeFieldsActionsComponent implements ICellRendererAngularComp {\r\n  field: Field;\r\n  metadataCount: number;\r\n  enablePermissions: boolean;\r\n  enableMetadata: boolean;\r\n\r\n  enableImageConfig: boolean;\r\n  imgConfigCount: number;\r\n  private params: ICellRendererParams & ContentTypeFieldsActionsParams;\r\n\r\n\r\n  agInit(params: ICellRendererParams & ContentTypeFieldsActionsParams): void {\r\n    this.params = params;\r\n    this.field = this.params.data;\r\n    const disableEdit = this.field.EditInfo.DisableEdit;\r\n\r\n    this.enablePermissions = !disableEdit && (this.field.InputType === InputTypeCatalog.StringWysiwyg || this.field.Type === DataTypeCatalog.Hyperlink);\r\n    this.enableMetadata = !this.field.EditInfo.DisableMetadata;\r\n    this.metadataCount = this.field.Metadata ? Object.keys(this.field.Metadata).filter(key => key !== 'merged').length : 0;\r\n\r\n    this.enableImageConfig = !disableEdit && this.field.imageConfiguration.isRecommended;\r\n    this.imgConfigCount = this.field.imageConfiguration.entityId ? 1 : 0;\r\n  }\r\n\r\n  highlightOrDisabled(toggle: boolean): string {\r\n    return toggle ? 'highlight' : 'disabled';\r\n  }\r\n\r\n  // #region Sharing Info for better icons #SharedFieldDefinition\r\n\r\n  shareText(): string {\r\n    const clickToConfigure = 'click to configure sharing';\r\n    const ss = this.field.SysSettings;\r\n    if (!ss) return clickToConfigure;\r\n    return ss.Share\r\n      ? 'shared enabled as ' + this.field.Guid\r\n      : ss.InheritMetadataOf\r\n        ? 'inherits ' + ss.InheritMetadataOf\r\n        : clickToConfigure;\r\n  }\r\n\r\n  shareOrInheritIcon(): string {\r\n    const ss = this.field.SysSettings;\r\n    if (!ss) return '';\r\n    return ss.Share\r\n      ? 'share'\r\n      : ss.InheritMetadataOf ? 'adjust' : '';\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  do(verb: ContentTypeFieldsActions): void {\r\n    this.params.do(verb, this.field);\r\n  }\r\n\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\n\r\nexport interface ContentTypeFieldsDragParams {\r\n  isReordering: () => boolean;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-drag',\r\n  template: `\r\n    @if (isReordering()) {\r\n      <div class=\"spinner-container\">\r\n        <mat-spinner diameter=\"16\"></mat-spinner>\r\n      </div>\r\n    }\r\n  `,\r\n  styles: [`\r\n    .spinner-container {\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      height: 100%;\r\n      width: 100%;\r\n    }\r\n  `],\r\n  imports: [MatProgressSpinnerModule]\r\n})\r\nexport class ContentTypeFieldsDragComponent implements ICellRendererAngularComp {\r\n  private params!: ICellRendererParams & ContentTypeFieldsDragParams;\r\n  \r\n  isReordering!: () => boolean;\r\n\r\n  agInit(params: ICellRendererParams & ContentTypeFieldsDragParams): void {\r\n    this.params = params;\r\n    this.isReordering = params.isReordering;\r\n  }\r\n\r\n  refresh(params: ICellRendererParams & ContentTypeFieldsDragParams): boolean {\r\n    this.params = params;\r\n    return true;\r\n  }\r\n}","<div class=\"icon-container\">\r\n  @if (isHidden) {\r\n    <mat-icon tippy=\"Hidden Field\">visibility_off</mat-icon>\r\n  }\r\n  @else {\r\n    <mat-icon></mat-icon>\r\n  }\r\n\r\n  @if (disabled) {\r\n    <mat-icon tippy=\"Disabled\">edit_off</mat-icon>\r\n  }\r\n  @else {\r\n    <mat-icon></mat-icon>\r\n  }\r\n\r\n  @if (required) {\r\n    <mat-icon tippy=\"Required Field\">asterisk</mat-icon>\r\n  }\r\n  @else {\r\n    <mat-icon></mat-icon>\r\n  }\r\n\r\n  @if (hasFormulas) {\r\n    <mat-icon tippy=\"Has Formulas\">functions</mat-icon>\r\n  }\r\n  @else {\r\n    <mat-icon></mat-icon>\r\n  }\r\n  \r\n  @if (isEphemeral) {\r\n    <mat-icon tippy=\"Ephemeral / Temporary, won't save\">mobiledata_off</mat-icon>\r\n  }\r\n  @else {\r\n    <mat-icon></mat-icon>\r\n  }\r\n\r\n  @if (disableTranslation) {\r\n    <mat-icon tippy=\"No Translation\">public_off</mat-icon>\r\n  }\r\n  @else {\r\n    <mat-icon></mat-icon>\r\n  }\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { Field } from '../../shared/fields/field.model';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-special',\r\n  templateUrl: './content-type-fields-special.html',\r\n  styleUrls: ['./content-type-fields-special.scss'],\r\n  imports: [\r\n    MatIconModule,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class ContentTypeFieldsSpecialComponent implements ICellRendererAngularComp {\r\n  hasFormulas: boolean;\r\n  isEphemeral: boolean;\r\n  isHidden: boolean;\r\n  disableTranslation: boolean;\r\n  disabled: boolean;\r\n  required: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    const field: Field = params.data;\r\n    this.hasFormulas = field.HasFormulas;\r\n    this.isEphemeral = field.IsEphemeral;\r\n    this.isHidden = !field.Metadata.All?.VisibleInEditUI;\r\n    this.disableTranslation = field.Metadata.All?.DisableTranslation || false;\r\n    this.disabled = field.Metadata.All?.Disabled || false;\r\n    this.required = field.Metadata.All?.Required || false;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  @if (!field.EditInfo.ReadOnly) {\r\n    <div\r\n      class=\"eav-grid-action-button highlight {{ isTitle ? '' : suitableForTitle ? 'hover-only' : 'no-button' }}\"\r\n      [attr.disabled]=\"isTitle || !suitableForTitle\"\r\n      matRipple\r\n      tippy=\"Use as title field\"\r\n      (click)=\"setTitle()\"\r\n    >\r\n      <mat-icon>star</mat-icon>\r\n    </div>\r\n  } @else {\r\n    <div class=\"eav-grid-action-button disabled\">\r\n      <mat-icon>{{ isTitle ? 'star' : '' }}</mat-icon>\r\n    </div>\r\n  }\r\n</div>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { InputTypeHelpers } from '../../shared/fields/input-type-helpers';\r\nimport { ContentTypeFieldsTitleParams } from './content-type-fields-title.models';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields-title',\r\n  templateUrl: './content-type-fields-title.html',\r\n  styleUrls: ['./content-type-fields-title.scss'],\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    TippyDirective,\r\n  ]\r\n})\r\nexport class ContentTypeFieldsTitleComponent implements ICellRendererAngularComp {\r\n  isTitle: boolean;\r\n  field: Field;\r\n  suitableForTitle = true;\r\n\r\n  private params: ICellRendererParams & ContentTypeFieldsTitleParams;\r\n\r\n  agInit(params: ICellRendererParams & ContentTypeFieldsTitleParams): void {\r\n    this.params = params;\r\n    this.isTitle = params.value;\r\n    this.field = params.data;\r\n\r\n    this.suitableForTitle = !InputTypeHelpers.isEmpty(this.field.InputType)\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  setTitle(): void {\r\n    if (this.suitableForTitle)\r\n      this.params.onSetTitle(this.field);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { calculateTypeIcon } from '../content-type-fields.helpers';\r\n\r\n@Component({\r\n    selector: 'app-content-type-fields-type',\r\n    templateUrl: './content-type-fields-type.html',\r\n    imports: [\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class ContentTypeFieldsTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  icon: string;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.icon = calculateTypeIcon(this.value);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\" [tippy]=\"value\">\r\n  <mat-icon>{{ icon }}</mat-icon>\r\n</div>\r\n","<div class=\"eav-dialog eav-no-scrollbar\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">{{ 'SharingOrInheriting.TitleAddFieldsWhichInherit' | translate }} (new v18)</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <p>\r\n      Shared fields allow you to compose a content-type using fields which were defined in another content-type. These fields exist on this\r\n      content-type, but use the definition incl. label and all other specs from the original field.\r\n    </p>\r\n    <p>\r\n      This is a bit like <strong>Content-Type Inheritance</strong>, but instead of inheritance we're using <strong>composition</strong>,\r\n      which is much more powerful.\r\n    </p>\r\n    <p>\r\n      {{ 'SharingOrInheriting.PickFieldsToInheritFrom' | translate }}\r\n      <br />\r\n      <em> Note that if this app doesn't have published/shared field definitions, the list below will be empty. </em>\r\n    </p>\r\n    <div class=\"eav-tables-div\">\r\n      <mat-card class=\"eav-table-div-left\">\r\n        <table mat-table [dataSource]=\"shareableFields\">\r\n          <ng-container matColumnDef=\"contentType\">\r\n            <th mat-header-cell *matHeaderCellDef><b>Content Type</b></th>\r\n            <td mat-cell *matCellDef=\"let field\" class=\"eav-table-cell\">{{ field.ContentType.Name }}</td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"name\">\r\n            <th mat-header-cell *matHeaderCellDef><b>Name</b></th>\r\n            <td mat-cell *matCellDef=\"let field\" class=\"eav-table-cell\">{{ field.StaticName }}</td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"type\">\r\n            <th mat-header-cell *matHeaderCellDef><b>Type</b></th>\r\n            <td mat-cell *matCellDef=\"let field\" class=\"eav-table-cell\">{{ field.Type }}</td>\r\n          </ng-container>\r\n\r\n          <ng-container matColumnDef=\"share\">\r\n            <th mat-header-cell *matHeaderCellDef><b>Share</b></th>\r\n            <td mat-cell *matCellDef=\"let field\" class=\"eav-table-cell\">\r\n              <button mat-raised-button type=\"button\" (click)=\"selectField(field)\">Select</button>\r\n            </td>\r\n          </ng-container>\r\n\r\n          <tr mat-header-row *matHeaderRowDef=\"optionsColumns\"></tr>\r\n          <tr mat-row *matRowDef=\"let row; columns: optionsColumns\"></tr>\r\n        </table>\r\n      </mat-card>\r\n\r\n      <mat-card class=\"eav-table-div-right\">\r\n        <form #ngForm=\"ngForm\">\r\n          <table mat-table [dataSource]=\"selectedFields\">\r\n            <ng-container matColumnDef=\"newName\">\r\n              <th mat-header-cell *matHeaderCellDef><b>New Name</b></th>\r\n              <td mat-cell *matCellDef=\"let item; index as i\" class=\"eav-table-cell\">\r\n                <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n                  <mat-label>New Name</mat-label>\r\n                  <input\r\n                    matInput\r\n                    [pattern]=\"fieldNamePattern\"\r\n                    [(ngModel)]=\"item.newName\"\r\n                    [name]=\"'StaticName' + i\"\r\n                    #newName=\"ngModel\"\r\n                    [appReservedNames]=\"reservedNames()\"\r\n                  />\r\n                </mat-form-field>\r\n                @if (newName.errors) {\r\n                  @if (newName.errors.pattern) {\r\n                    <app-field-hint [isError]=\"true\">{{ fieldNameError }}</app-field-hint>\r\n                  }\r\n                  @if (newName.errors.reservedNames) {\r\n                    <app-field-hint [isError]=\"true\">\r\n                      {{ newName.errors.reservedNames }}\r\n                    </app-field-hint>\r\n                  }\r\n                }\r\n              </td>\r\n            </ng-container>\r\n\r\n            <ng-container matColumnDef=\"source\">\r\n              <th mat-header-cell *matHeaderCellDef><b>Source</b></th>\r\n              <td mat-cell *matCellDef=\"let item\" style=\"word-break: break-all\" class=\"eav-table-cell\">\r\n                {{ item.field.ContentType.Name }}/{{ item.field.StaticName }} ({{ item.field.Type }})\r\n              </td>\r\n            </ng-container>\r\n\r\n            <ng-container matColumnDef=\"remove\">\r\n              <th mat-header-cell *matHeaderCellDef><b>Remove</b></th>\r\n              <td mat-cell *matCellDef=\"let item\" class=\"eav-table-cell\">\r\n                <button mat-raised-button type=\"button\" (click)=\"removeField(item)\">Remove</button>\r\n              </td>\r\n            </ng-container>\r\n\r\n            <tr mat-header-row *matHeaderRowDef=\"selectedColumns\"></tr>\r\n            <tr mat-row *matRowDef=\"let row; columns: selectedColumns\"></tr>\r\n          </table>\r\n        </form>\r\n      </mat-card>\r\n    </div>\r\n\r\n    <!-- Show feature warning -->\r\n    <app-feature-text-info [featureNameId]=\"ContentTypeFieldsReuseDefinitions\" [asInfo]=\"true\">\r\n      <em> Even if the feature is not licensed, it will always work but show warnings. </em>\r\n    </app-feature-text-info>\r\n  </div>\r\n  <!-- Save buttons -->\r\n  <mat-dialog-actions align=\"end\">\r\n    <app-save-close-button-fab\r\n      [ngClass]=\"!ngForm.form.valid || selectedFields.data.length == 0 || saving() ? 'disabled' : ''\"\r\n      [disabled]=\"!ngForm.form.valid || selectedFields.data.length == 0 || saving()\"\r\n      (action)=\"save()\"\r\n    />\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { ChangeDetectorRef, Component, HostBinding, Inject, OnInit, ViewChild, ViewContainerRef, computed, inject } from '@angular/core';\r\nimport { FormsModule, NgForm } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { catchError, concatMap, filter, of, toArray } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { fieldNameError, fieldNamePattern } from '../../app-administration/constants/field-name.patterns';\r\nimport { ContentType } from '../../app-administration/models';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeatureTextInfoComponent } from '../../features/feature-text-info/feature-text-info';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { openFeatureDialog } from '../../features/shared/base-feature';\r\nimport { BaseComponent } from '../../shared/components/base';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint';\r\nimport { ContentTypesFieldsService } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { SaveCloseButtonFabComponent } from '../../shared/modules/save-close-button-fab/save-close-button-fab';\r\nimport { signalObj } from '../../shared/signals/signal.utilities';\r\nimport { ReservedNamesValidatorDirective } from '../edit-content-type-fields/reserved-names.directive';\r\n\r\n@Component({\r\n  selector: 'app-field-sharing-add-many',\r\n  templateUrl: './field-sharing-add-many.html',\r\n  styleUrls: ['./field-sharing-add-many.scss'],\r\n  imports: [\r\n    MatCardModule,\r\n    MatTableModule,\r\n    MatButtonModule,\r\n    FormsModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    ReservedNamesValidatorDirective,\r\n    MatDialogActions,\r\n    TranslateModule,\r\n    FeatureTextInfoComponent,\r\n    FieldHintComponent,\r\n    MatIconModule,\r\n    SaveCloseButtonFabComponent,\r\n  ]\r\n})\r\nexport class FieldSharingAddMany extends BaseComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n  @ViewChild('ngForm', { read: NgForm }) private ngForm: NgForm;\r\n\r\n  #features = inject(FeaturesService);\r\n\r\n  #contentTypesFieldsSvc = transient(ContentTypesFieldsService);\r\n\r\n  ContentTypeFieldsReuseDefinitions = FeatureNames.ContentTypeFieldsReuseDefinitions;\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: { contentType: ContentType, existingFields: Field[] },\r\n    protected dialog: MatDialogRef<FieldSharingAddMany>,\r\n    private snackBar: MatSnackBar,\r\n    // All this is just for the feature dialog\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) {\r\n    super();\r\n    this.dialog.disableClose = true;\r\n    this.subscriptions.add(\r\n      this.dialog.backdropClick().subscribe(() => {\r\n        if (this.ngForm.dirty || this.selectedFields.data.length > 0) {\r\n          const confirmed = confirm('You have unsaved changes. Are you sure you want to close this dialog?');\r\n          if (!confirmed) return;\r\n        }\r\n        this.dialog.close();\r\n      })\r\n    );\r\n  }\r\n\r\n  optionsColumns: string[] = ['contentType', 'name', 'type', 'share'];\r\n  selectedColumns: string[] = ['newName', 'source', 'remove'];\r\n\r\n  protected shareableFields = new MatTableDataSource<Field>([]);\r\n  protected selectedFields = new MatTableDataSource<NewNameField>([]);\r\n  protected fieldNamePattern = fieldNamePattern;\r\n  protected fieldNameError = fieldNameError;\r\n  #reservedNamesSystem = this.#contentTypesFieldsSvc.getReservedNames().value;\r\n\r\n  reservedNames = computed(() => {\r\n    const reserved = this.#reservedNamesSystem();\r\n    return ReservedNamesValidatorDirective.mergeReserved(reserved, this.dialogData.existingFields);\r\n  });\r\n\r\n  protected saving = signalObj('saving', false);\r\n\r\n  #fieldShareConfigManagement = this.#features.isEnabled[FeatureNames.ContentTypeFieldsReuseDefinitions];\r\n\r\n  ngOnInit() {\r\n\r\n    this.#contentTypesFieldsSvc.getShareableFieldsPromise().then(fields => {\r\n      this.shareableFields.data = fields;\r\n    });\r\n\r\n  }\r\n\r\n  selectField(field: Field) {\r\n    this.selectedFields.data = [...this.selectedFields.data, { newName: field.StaticName, field }];\r\n  }\r\n\r\n  removeField(field: NewNameField) {\r\n    const selectedFields = this.selectedFields.data;\r\n    selectedFields.splice(selectedFields.indexOf(field), 1);\r\n    this.selectedFields.data = [...selectedFields];\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  // When API gets created we will need to send the selected fields to the API\r\n  save() {\r\n    if (!this.#fieldShareConfigManagement()) {\r\n      openFeatureDialog(this.matDialog, FeatureNames.ContentTypeFieldsReuseDefinitions, this.viewContainerRef, this.changeDetectorRef);\r\n    } else {\r\n      this.saving.set(true);\r\n      this.snackBar.open('Saving...');\r\n      of(...this.selectedFields.data).pipe(\r\n        filter(inheritField => !!inheritField.newName),\r\n        concatMap(inheritField =>\r\n          this.#contentTypesFieldsSvc.addInheritedField(\r\n            this.dialogData.contentType.Id,\r\n            inheritField.field.ContentType.Id,\r\n            inheritField.field.Guid,\r\n            inheritField.newName\r\n          ).pipe(catchError(_ => of(null)))\r\n        ),\r\n        toArray(),\r\n      ).subscribe(_ => {\r\n        this.saving.set(false);\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n        this.dialog.close();\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nexport interface AppSharingFieldsViewModel {\r\n  shareableFields: Field[];\r\n  selectedFields: Field[];\r\n}\r\n\r\ninterface NewNameField {\r\n  newName: string;\r\n  field: Field;\r\n}\r\n","\r\nexport enum SharingOrInheriting {\r\n  None,\r\n  Sharing,\r\n  Inheriting\r\n}\r\n","<div class=\"eav-dialog eav-no-scrollbar\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ title | translate }}\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"dialog.close()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    @switch (initialState) {\r\n      @case (sharingOrInheriting.Sharing) {\r\n        <p>\r\n          This field is published so it can be shared by other Content Types. As such you cannot configure anything here, but just review\r\n          the information.\r\n        </p>\r\n        <div>\r\n          Global Identifier: <strong>{{ dialogData.Guid }}</strong>\r\n        </div>\r\n        <h4>Inherited by</h4>\r\n        <ng-container *ngTemplateOutlet=\"detailsOrWarning\"></ng-container>\r\n      }\r\n      @case (sharingOrInheriting.Inheriting) {\r\n        <p>This field is inheriting it's definition from another previously shared field.</p>\r\n        <h4>Inherits Definition from</h4>\r\n        @if (!features.isEnabled[requiredFeature]()) {\r\n          <ol>\r\n            @for (s of inherited(); track s.complete) {\r\n              <li>{{ s.complete }}</li>\r\n            }\r\n          </ol>\r\n        }\r\n        <ng-container *ngTemplateOutlet=\"detailsOrWarning\"></ng-container>\r\n\r\n        @if (notInherited().length) {\r\n          <h4>Not Inherited Definitions</h4>\r\n          <p>The following definitions are not inherited, so you can specify them on this field:</p>\r\n          <ol>\r\n            @for (s of notInherited(); track s) {\r\n              <li>{{ s }}</li>\r\n            }\r\n          </ol>\r\n        }\r\n      }\r\n      @case (sharingOrInheriting.None) {\r\n        <p>This field is currently not shared or inherited. You can choose to:</p>\r\n        <ul>\r\n          <li>Make it public (<strong>share</strong>) so it can be re-used by other Content Types</li>\r\n          <li>Change it to <strong>inherit</strong> it's definition from another previously shared field</li>\r\n        </ul>\r\n        <br />\r\n        <div>\r\n          <button\r\n            mat-raised-button\r\n            type=\"button\"\r\n            [class]=\"\r\n              'eav-dialog-action-button'\r\n              + (state == sharingOrInheriting.Sharing\r\n                ? ' eav-action-button'\r\n                : '')\"\r\n            (click)=\"setShare()\"\r\n          >\r\n            Share\r\n          </button>\r\n\r\n          <button\r\n            mat-raised-button\r\n            type=\"button\"\r\n            [class]=\"\r\n              'eav-dialog-action-button'\r\n              + (state == sharingOrInheriting.Inheriting\r\n                ? ' eav-action-button'\r\n                : '')\"\r\n            (click)=\"startInherit()\"\r\n          >\r\n            Inherit\r\n          </button>\r\n          @switch (state) {\r\n            @case (sharingOrInheriting.Sharing) {\r\n              <p>This will share the field definition for others to use. Save to complete the operation.</p>\r\n            }\r\n            @case (sharingOrInheriting.Inheriting) {\r\n              <p>\r\n                The following fields have the same data type and share their definitions. Select one to inherit from. Some notes:\r\n                <br />\r\n              </p>\r\n              <ul>\r\n                <li>Inheriting will remove/ignore all current definition of this field such as label, hidden, etc.</li>\r\n                <li>\r\n                  If the field you want to inherit the definition from is missing from this list, it's either a different data type or it's\r\n                  not shared.\r\n                </li>\r\n              </ul>\r\n              <mat-card class=\"my-options-wrapper\">\r\n                <table mat-table [dataSource]=\"shareableFields()\" class=\"mat-elevation-z8\">\r\n                  <!-- Column Definition \"Content Type\" -->\r\n                  <ng-container matColumnDef=\"contentType\">\r\n                    <th mat-header-cell *matHeaderCellDef><b>Content Type</b></th>\r\n                    <td mat-cell *matCellDef=\"let field\">{{ field.ContentType.Name }}</td>\r\n                  </ng-container>\r\n                  <!-- Column Definition \"Name\" -->\r\n                  <ng-container matColumnDef=\"name\">\r\n                    <th mat-header-cell *matHeaderCellDef><b>Name</b></th>\r\n                    <td mat-cell *matCellDef=\"let field\">{{ field.StaticName }}</td>\r\n                  </ng-container>\r\n                  <!-- Column Definition \"Type\" -->\r\n                  <ng-container matColumnDef=\"type\">\r\n                    <th mat-header-cell *matHeaderCellDef><b>Type</b></th>\r\n                    <td mat-cell *matCellDef=\"let field\">{{ field.Type }}</td>\r\n                  </ng-container>\r\n                  <!-- Header Row -->\r\n                  <tr mat-header-row *matHeaderRowDef=\"optionsColumns\"></tr>\r\n                  <!-- Repeater for each row -->\r\n                  <tr\r\n                    mat-row\r\n                    *matRowDef=\"let row; columns: optionsColumns\"\r\n                    [ngClass]=\"{ 'my-selected': guid === row.Guid }\"\r\n                    (click)=\"inheritField(row)\"\r\n                  ></tr>\r\n                </table>\r\n              </mat-card>\r\n            }\r\n          }\r\n        </div>\r\n      }\r\n    }\r\n\r\n    <app-feature-text-info [featureNameId]=\"requiredFeature\" [asInfo]=\"true\">\r\n      <em> Even if the feature is not licensed, it will always work but show warnings. </em>\r\n    </app-feature-text-info>\r\n  </div>\r\n\r\n  <mat-dialog-actions align=\"end\">\r\n    <app-save-close-button-fab\r\n      [ngClass]=\"!(initialState == sharingOrInheriting.None) ? 'disabled' : ''\"\r\n      [disabled]=\"!(initialState == sharingOrInheriting.None)\"\r\n      (action)=\"save()\"\r\n    />\r\n  </mat-dialog-actions>\r\n</div>\r\n\r\n<!-- Reusable part showing a list of ancestors or descendants - or showing a license warning to see more -->\r\n<ng-template #detailsOrWarning>\r\n  @if (features.isEnabled[requiredFeature]()) {\r\n    @if (details().length) {\r\n      <ul>\r\n        @for (field of details(); track field.AttributeId) {\r\n          <li>\r\n            Guid: <strong>{{ field.Guid }}</strong>\r\n            <br />\r\n            Content Type: <strong>{{ field.ContentType.Name }}</strong>\r\n            <br />\r\n            Field: <strong>{{ field.StaticName }}</strong> ({{ field.AttributeId }})\r\n          </li>\r\n        }\r\n      </ul>\r\n    } @else {\r\n      <em> No details available. This field probably does not have any inheriting fields. </em>\r\n    }\r\n  } @else {\r\n    <em>\r\n      You can get more details about the parents by enabling the feature\r\n      <br />\r\n      {{ requiredFeature }}\r\n      <app-feature-icon-text [featureNameId]=\"requiredFeature\"></app-feature-icon-text>.\r\n    </em>\r\n  }\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Inject, signal } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatTableModule } from '@angular/material/table';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport groupBy from 'lodash-es/groupBy';\r\nimport { transient } from '../../../../../core/transient';\r\nimport { FeatureIconTextComponent } from '../../features/feature-icon-text/feature-icon-text';\r\nimport { FeatureNames } from '../../features/feature-names';\r\nimport { FeatureTextInfoComponent } from '../../features/feature-text-info/feature-text-info';\r\nimport { FeaturesService } from '../../features/features.service';\r\nimport { ContentTypesFieldsService } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { classLog } from '../../shared/logging';\r\nimport { SaveCloseButtonFabComponent } from '../../shared/modules/save-close-button-fab/save-close-button-fab';\r\nimport { computedObj, signalObj } from '../../shared/signals/signal.utilities';\r\nimport { SharingOrInheriting } from './field-sharing-configure.enums';\r\n\r\nconst logSpecs = {\r\n  all: true,\r\n  constructor: true,\r\n}\r\n\r\nconst noInheritGuid = '00000000-0000-0000-0000-000000000000';\r\n\r\n@Component({\r\n  selector: 'app-field-sharing-configure',\r\n  templateUrl: './field-sharing-configure.html',\r\n  styleUrls: ['./field-sharing-configure.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatCardModule,\r\n    MatTableModule,\r\n    NgClass,\r\n    NgTemplateOutlet,\r\n    TranslateModule,\r\n    FeatureTextInfoComponent,\r\n    FeatureIconTextComponent,\r\n    MatDialogActions,\r\n    SaveCloseButtonFabComponent,\r\n  ]\r\n})\r\nexport class ShareOrInheritDialogComponent {\r\n\r\n  log = classLog({ ShareOrInheritDialogComponent }, logSpecs);\r\n\r\n  #contentTypesFieldsSvc = transient(ContentTypesFieldsService);\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: Field,\r\n    public features: FeaturesService,\r\n    protected dialog: MatDialogRef<ShareOrInheritDialogComponent>,\r\n  ) {\r\n    const l = this.log.fnIf('constructor', { dialogData });\r\n\r\n    const sysS = dialogData.SysSettings;\r\n    if (sysS) {\r\n      if (sysS.Share)\r\n        this.#contentTypesFieldsSvc.getDescendants(dialogData.Id)\r\n          .then(fields => this.details.set(fields));\r\n      else if (sysS.InheritMetadataOf)\r\n        this.#contentTypesFieldsSvc.getAncestors(dialogData.Id)\r\n          .then(fields => this.details.set(fields));\r\n    }\r\n  }\r\n\r\n  requiredFeature = FeatureNames.ContentTypeFieldsReuseDefinitions;\r\n\r\n  details = signalObj<Field[]>('details', []);\r\n\r\n  optionsColumns: string[] = ['contentType', 'name', 'type'];\r\n  message: string;\r\n  state: SharingOrInheriting = SharingOrInheriting.None;\r\n\r\n  // Constants for the UI\r\n  sharingOrInheriting = SharingOrInheriting;\r\n  guid: string = null;\r\n\r\n  shareableFields = signal<Field[]>(undefined);\r\n\r\n  // Figure out the initial state how at the time of opening the dialog\r\n  initialState: SharingOrInheriting = (() => {\r\n    const sysS = this.dialogData.SysSettings;\r\n    const notConfigured = !sysS || (!sysS.Share && !sysS.InheritMetadataOf);\r\n    return notConfigured\r\n      ? SharingOrInheriting.None\r\n      : sysS.Share\r\n        ? SharingOrInheriting.Sharing\r\n        : SharingOrInheriting.Inheriting;\r\n  })();\r\n\r\n  // Assemble i18n title part, using the current state name\r\n  title: string = 'SharingOrInheriting.Title' + this.sharingOrInheriting[this.initialState];\r\n\r\n  /** Prepare info about inheritance, which is kind of compacted into a string */\r\n  #inheritsInfo = computedObj('inheritsInfo', () => {\r\n    const parts = this.dialogData.SysSettings.InheritMetadataOf.split(',');\r\n    const withFieldNames = parts.map(complete => ({\r\n      complete,\r\n      // Guid, required, could be empty-guid\r\n      guid: complete.substring(0, 36),\r\n      // Field name, optional; only required if it's the no-inherit guid\r\n      name: complete.substring(36),\r\n    }));\r\n    return groupBy(withFieldNames, g => g.guid === noInheritGuid ? 'none' : 'inherits');\r\n  });\r\n\r\n  /** Metadata content-type names which are not inherited */\r\n  notInherited = computedObj('notInherited', () => this.#inheritsInfo().none?.map(n => n.name) ?? []);\r\n\r\n  /** Metadata items which are inherited */\r\n  inherited = computedObj('inherited', () => this.#inheritsInfo().inherits ?? []);\r\n\r\n  setShare() {\r\n    this.guid = null;\r\n    this.state = SharingOrInheriting.Sharing;\r\n  }\r\n\r\n  startInherit() {\r\n    this.guid = null;\r\n    this.state = SharingOrInheriting.Inheriting;\r\n\r\n    // Load possible fields which match the current field type\r\n    this.#contentTypesFieldsSvc.getShareableFieldsFor(this.dialogData.AttributeId)\r\n      .then(fields => this.shareableFields.set(fields));\r\n  }\r\n\r\n  inheritField(field: Field) {\r\n    this.guid = field.Guid;\r\n  }\r\n\r\n  save() {\r\n    if (this.state == SharingOrInheriting.Sharing) {\r\n      this.#contentTypesFieldsSvc.share(this.dialogData.Id)\r\n        .subscribe(() => this.dialog.close());\r\n    } else if (this.state == SharingOrInheriting.Inheriting) {\r\n      this.#contentTypesFieldsSvc.inherit(this.dialogData.Id, this.guid)\r\n        .subscribe(() => this.dialog.close());\r\n    }\r\n  }\r\n\r\n}\r\n","<div appToggleDebug class=\"eav-dialog nav-component-wrapper\">\r\n  <app-grid-with-help style=\"height: 100%\" [helpText]=\"uxHelpText()\" [refresh]=\"refresh()\" [rowLength]=\"fields()?.length\">\r\n    <div class=\"eav-dialog-header\" eav-dialog-header>\r\n      <div class=\"eav-dialog-header__title\">{{ contentType()?.Label || contentType()?.Name }} Fields</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"dialog.close()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n\r\n    @if (fields()?.length > 0) {\r\n      <ag-grid-angular\r\n        class=\"ag-theme-material eav-dialog-content\"\r\n        [rowData]=\"fields()\"\r\n        [gridOptions]=\"gridOptions\"\r\n        (rowDragEnter)=\"onRowDragEnter($event)\"\r\n        (rowDragEnd)=\"onRowDragEnd($event)\"\r\n        (rowDragMove)=\"onRowDragMove($event)\"\r\n        (gridReady)=\"onGridReady($event)\"\r\n        (sortChanged)=\"onSortChanged($event)\"\r\n        (filterChanged)=\"onFilterChanged($event)\"\r\n        [ngClass]=\"{\r\n          'grid-sorted': sortApplied,\r\n          'grid-filtered': filterApplied,\r\n        }\"\r\n      >\r\n      </ag-grid-angular>\r\n    }\r\n    <mat-dialog-actions align=\"end\">\r\n      <!-- @if (isDebug()) { -->\r\n      <button mat-raised-button type=\"button\" (click)=\"addSharedField()\">{{ 'SharingOrInheriting.AddSharedField' | translate }}</button>\r\n      <!-- } -->\r\n      <button\r\n        mat-fab\r\n        mat-elevation-z24\r\n        class=\"grid-fab\"\r\n        tippy=\"Add fields\"\r\n        [disabled]=\"contentType() == null || contentType().EditInfo.ReadOnly\"\r\n        (click)=\"add()\"\r\n      >\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </app-grid-with-help>\r\n</div>\r\n\r\n<router-outlet></router-outlet>\r\n","import { FilterChangedEvent, GridApi, GridOptions, GridReadyEvent, ICellRendererParams, RowClassParams, RowDragEvent, SortChangedEvent } from '@ag-grid-community/core';\r\nimport { NgClass } from '@angular/common';\r\nimport { Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { transient } from '../../../../core';\r\nimport { ContentTypesService } from '../app-administration/services/content-types.service';\r\nimport { ConfirmDeleteDialogComponent } from '../app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog';\r\nimport { GoToMetadata } from '../metadata';\r\nimport { GoToPermissions } from '../permissions/go-to-permissions';\r\nimport { AgGridHelper } from '../shared/ag-grid/ag-grid-helper';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { GridWithHelpComponent, HelpTextConst } from '../shared/ag-grid/grid-with-help/grid-with-help';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../shared/constants/eav.constants';\r\nimport { ToggleDebugDirective } from '../shared/directives/toggle-debug.directive';\r\nimport { ContentTypesFieldsService } from '../shared/fields/content-types-fields.service';\r\nimport { Field } from '../shared/fields/field.model';\r\nimport { InputTypeHelpers } from '../shared/fields/input-type-helpers';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { EditForm, ItemAddIdentifier, ItemEditIdentifier, ItemIdentifier } from '../shared/models/edit-form.model';\r\nimport { ItemIdHelper } from '../shared/models/item-id-helper';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { ContentTypeFieldsActionsComponent } from './content-type-fields-actions/content-type-fields-actions';\r\nimport { ContentTypeFieldsActionsParams } from './content-type-fields-actions/content-type-fields-actions.models';\r\nimport { ContentTypeFieldsDragComponent, ContentTypeFieldsDragParams } from './content-type-fields-drag/content-type-fields-drag';\r\nimport { ContentTypeFieldsSpecialComponent } from './content-type-fields-special/content-type-fields-special';\r\nimport { ContentTypeFieldsTitleComponent } from './content-type-fields-title/content-type-fields-title';\r\nimport { ContentTypeFieldsTitleParams } from './content-type-fields-title/content-type-fields-title.models';\r\nimport { ContentTypeFieldsTypeComponent } from './content-type-fields-type/content-type-fields-type';\r\nimport { FieldSharingAddMany } from './field-sharing-add-many/field-sharing-add-many';\r\nimport { ShareOrInheritDialogComponent } from './field-sharing-configure/field-sharing-configure';\r\n\r\n@Component({\r\n  selector: 'app-content-type-fields',\r\n  templateUrl: './content-type-fields.html',\r\n  styleUrls: ['./content-type-fields.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    NgClass,\r\n    MatDialogActions,\r\n    ToggleDebugDirective,\r\n    SxcGridModule,\r\n    TranslateModule,\r\n    GridWithHelpComponent,\r\n  ]\r\n})\r\nexport class ContentTypeFieldsComponent implements OnInit {\r\n\r\n  #dialogRouter = transient(DialogRoutingService);\r\n  #contentTypesSvc = transient(ContentTypesService);\r\n  #contentTypesFieldsSvc = transient(ContentTypesFieldsService);\r\n\r\n  constructor(\r\n    protected dialog: MatDialogRef<ContentTypeFieldsComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef, // for dependency injection in the dialog\r\n  ) { }\r\n\r\n  #contentTypeStaticName = this.#dialogRouter.getParam('contentTypeStaticName');\r\n\r\n  /** Signal to trigger reloading of data */\r\n  refresh = signal(0);\r\n\r\n  /** Signal to track if reordering is in progress */\r\n  isReordering = signal(false);\r\n\r\n  // UI Help Text for the UX Help Info Card\r\n  #helpTextConst: HelpTextConst = {\r\n    empty: {\r\n      description: '<p><b>This is where you manage Fields</b></p>',\r\n      hint: \"<p>Click the (+) in the bottom right corner to create your first Field (think: column).</p>\"\r\n    },\r\n    content: {\r\n      description: '<p><b>These are the Fields of this Content-Type</b> <br>They are similar to database columns.</p>',\r\n      hint: '<p>Click on the <em>Name</em> to configure it or on the <em>Input</em> to change the type. <br><br>You can also create new fields, share field definitions, manage field metadata/permissions or rename fields.</p>'\r\n    }\r\n  };\r\n\r\n  uxHelpText = computed(() => {\r\n    const data = this.fields();\r\n    return data?.length === 0 ? this.#helpTextConst.empty : this.#helpTextConst.content;\r\n  })\r\n\r\n  contentType = this.#contentTypesSvc.getType(this.#contentTypeStaticName).value;\r\n\r\n  fields = signal<Field[]>(undefined);\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n  sortApplied = false;\r\n  filterApplied = false;\r\n\r\n  #gridApi: GridApi;\r\n  #rowDragSuppressed = false;\r\n\r\n  ngOnInit() {\r\n    this.#fetchFields();\r\n    this.#dialogRouter.doOnDialogClosed(() => this.#fetchFields());\r\n  }\r\n\r\n  onGridReady(params: GridReadyEvent) {\r\n    this.#gridApi = params.api;\r\n  }\r\n\r\n  onRowDragEnter(_: RowDragEvent) {\r\n    this.#gridApi.setGridOption(\"enableCellTextSelection\", false);\r\n  }\r\n\r\n  onRowDragEnd(_: RowDragEvent) {\r\n    this.#gridApi.setGridOption(\"suppressRowDrag\", true);\r\n    this.isReordering.set(true);\r\n\r\n    const idArray = this.fields().map(field => field.Id);\r\n    this.#contentTypesFieldsSvc.reOrder(idArray, this.contentType()).subscribe(() => {\r\n      this.#fetchFields(() => {\r\n        this.#gridApi.setGridOption(\"enableCellTextSelection\", true);\r\n        this.#gridApi.setGridOption(\"suppressRowDrag\", false);\r\n        this.isReordering.set(false);\r\n      });\r\n    });\r\n  }\r\n\r\n  onRowDragMove(event: RowDragEvent) {\r\n    const overNode = event.overNode as { data: Field };\r\n    if (!overNode) return;\r\n    const movingNode = event.node as { data: Field };\r\n    if (movingNode === overNode) return;\r\n\r\n    const newFields = [...this.fields()];\r\n    const fromIndex = newFields.indexOf(movingNode.data);\r\n    const toIndex = newFields.indexOf(overNode.data);\r\n    const reordered = this.#moveInArray(newFields, fromIndex, toIndex);\r\n    this.fields.set(reordered);\r\n    this.#gridApi.clearFocusedCell();\r\n  }\r\n\r\n  #moveInArray(arr: Field[], fromIndex: number, toIndex: number) {\r\n    const element = arr[fromIndex];\r\n    arr.splice(fromIndex, 1);\r\n    arr.splice(toIndex, 0, element);\r\n    return [...arr];\r\n  }\r\n\r\n  onSortChanged(_: SortChangedEvent) {\r\n    const columnStates = this.#gridApi.getColumnState();\r\n    this.sortApplied = columnStates.some(state => state.sort != null);\r\n    this.#suppressRowDrag();\r\n  }\r\n\r\n  onFilterChanged(_: FilterChangedEvent) {\r\n    const filterModel = this.#gridApi.getFilterModel();\r\n    const fieldsFiltered = Object.keys(filterModel);\r\n    this.filterApplied = fieldsFiltered.length > 0;\r\n    this.#suppressRowDrag();\r\n  }\r\n\r\n  #suppressRowDrag() {\r\n    const shouldSuppress = this.sortApplied || this.filterApplied;\r\n\r\n    if (shouldSuppress && !this.#rowDragSuppressed) {\r\n      this.#rowDragSuppressed = true;\r\n      this.#gridApi.setGridOption(\"suppressRowDrag\", true);\r\n    } else if (!shouldSuppress && this.#rowDragSuppressed) {\r\n      this.#rowDragSuppressed = false;\r\n      this.#gridApi.setGridOption(\"suppressRowDrag\", false);\r\n    }\r\n  }\r\n\r\n  add() {\r\n    this.#dialogRouter.navRelative([`add/${this.#contentTypeStaticName}`]);\r\n  }\r\n\r\n  addSharedField() {\r\n    this.matDialog.open(FieldSharingAddMany, {\r\n      autoFocus: false,\r\n      width: '1600px',\r\n      data: { contentType: this.contentType(), existingFields: this.fields() },\r\n      viewContainerRef: this.viewContainerRef, // for dependency injection in the dialog\r\n    }).afterClosed().subscribe(() => this.#fetchFields());\r\n  }\r\n\r\n  #nameCellRenderer(params: Omit<ICellRendererParams, 'data'> & { data: Field }) {\r\n    const inputType = params.data.InputType;\r\n\r\n    if (InputTypeHelpers.endsPreviousGroup(inputType))\r\n      return params.value;\r\n\r\n    let isGroupOpen = false;\r\n    for (const field of this.fields()) {\r\n      if (InputTypeHelpers.isGroupStart(inputType)) {\r\n        isGroupOpen = true;\r\n        continue;\r\n      }\r\n      if (InputTypeHelpers.isGroupEnd(inputType)) {\r\n        isGroupOpen = false;\r\n        continue;\r\n      }\r\n      if (field.StaticName === params.data.StaticName)\r\n        break;\r\n    }\r\n\r\n    return isGroupOpen ? `<span class=\"is-in-group\">${params.value}</span>` : params.value;\r\n  }\r\n\r\n  #fetchFields(callback?: () => void) {\r\n    this.#contentTypesFieldsSvc.getFieldsPromise(this.#contentTypeStaticName).then(fields => {\r\n      this.fields.set(fields);\r\n      if (callback != null)\r\n        callback();\r\n    });\r\n  }\r\n\r\n  #createItemDefinition(field: Field, metadataType: string): ItemAddIdentifier | ItemEditIdentifier {\r\n    // The keys could start with an @ but may not, and in some cases we need it, others we don't\r\n    const keyForMdLookup = metadataType.replace('@', '');\r\n    const newItemTypeName = ('@' + metadataType).replace('@@', '@');\r\n\r\n    // Is an item of this type already loaded? Then just edit it, otherwise request new as Metadata\r\n    const existingMd = field.Metadata[keyForMdLookup];\r\n    return existingMd != null\r\n      ? ItemIdHelper.editId(existingMd.Id) // if defined, return the entity-number to edit\r\n      : {\r\n        ...ItemIdHelper.newMetadata(field.Id, newItemTypeName, eavConstants.metadata.attribute),\r\n        Prefill: { Name: field.StaticName },\r\n      };\r\n  }\r\n\r\n  #setTitle(field: Field) {\r\n    this.snackBar.open('Setting title...');\r\n    this.#contentTypesFieldsSvc.setTitle(field, this.contentType()).subscribe(() => {\r\n      this.snackBar.open('Title set', null, { duration: 2000 });\r\n      this.#fetchFields();\r\n    });\r\n  }\r\n\r\n  #rename(field: Field) {\r\n    this.#dialogRouter.navRelative([`update/${this.#contentTypeStaticName}/${field.Id}/name`]);\r\n  }\r\n\r\n  #delete(field: Field) {\r\n    this.matDialog.open(ConfirmDeleteDialogComponent, {\r\n      autoFocus: false,\r\n      data: {\r\n        entityId: field.Id,\r\n        entityTitle: field.StaticName,\r\n        message: \"Delete Item?\",\r\n        hasDeleteSnackbar: true\r\n      },\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '600px',\r\n    }).afterClosed().subscribe(isConfirmed => {\r\n      if (!isConfirmed) return;\r\n      this.#contentTypesFieldsSvc.delete(field, this.contentType()).subscribe(() => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.#fetchFields();\r\n      });\r\n    })\r\n  }\r\n\r\n  #openPermissions(field: Field) {\r\n    this.#dialogRouter.navRelative([GoToPermissions.getUrlAttribute(field.Id)]);\r\n  }\r\n\r\n  #openImageConfiguration(field: Field) {\r\n    const imgConfig = field.imageConfiguration;\r\n    if (imgConfig?.isRecommended != true)\r\n      throw new Error('This field does not expect to have an image configuration');\r\n\r\n    const itemIdentifier: ItemIdentifier = imgConfig.entityId\r\n      ? ItemIdHelper.editId(imgConfig.entityId)\r\n      : ItemIdHelper.newMetadata(field.Id, imgConfig.typeName, eavConstants.metadata.attribute);\r\n    const formUrl = convertFormToUrl({ items: [itemIdentifier] });\r\n    this.#dialogRouter.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #openMetadata(field: Field) {\r\n    const url = GoToMetadata.getUrlAttribute(\r\n      field.Id,\r\n      `Metadata for Field: ${field.StaticName} (${field.Id})`,\r\n    );\r\n    this.#dialogRouter.navRelative([url]);\r\n  }\r\n\r\n  // Add this method - required for the Name column to generate the edit URL for a field\r\n  #fieldEditUrl(field: Field): string {\r\n    const form: EditForm = {\r\n      items: Object.keys(field.ConfigTypes).map((t) => this.#createItemDefinition(field, t))\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    return '#' + this.#dialogRouter.urlSubRoute(`edit/${formUrl}`);\r\n  }\r\n\r\n  #inputTypeEditUrl(field: Field): string {\r\n    return '#' + this.#dialogRouter.urlSubRoute(`update/${this.#contentTypeStaticName}/${field.Id}/inputType`);\r\n  }\r\n\r\n  #shareOrInherit(field: Field) {\r\n    const shareOrInheritDialogRef = this.matDialog.open(ShareOrInheritDialogComponent, {\r\n      autoFocus: false,\r\n      width: '800px',\r\n      data: field,\r\n      viewContainerRef: this.viewContainerRef, // for dependency injection in the dialog\r\n    });\r\n    shareOrInheritDialogRef.afterClosed().subscribe(() => this.#fetchFields());\r\n  }\r\n\r\n  //#region Grid Options\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      getRowClass(params: RowClassParams) {\r\n        const field: Field = params.data;\r\n        const rowClass: string[] = [];\r\n        if (field.EditInfo.DisableSort) { rowClass.push('disable-row-drag'); }\r\n        if (InputTypeHelpers.isGroupStart(field.InputType)) { rowClass.push('group-start-row'); }\r\n        if (InputTypeHelpers.isGroupEnd(field.InputType)) { rowClass.push('group-end-row'); }\r\n        return rowClass;\r\n      },\r\n      columnDefs: [\r\n        {\r\n          rowDrag: true,\r\n          width: 18,\r\n          cellClass: 'no-select no-padding no-outline'.split(' '),\r\n          cellRenderer: ContentTypeFieldsDragComponent,\r\n          cellRendererParams: (() => ({\r\n            isReordering: () => this.isReordering(),\r\n          } satisfies ContentTypeFieldsDragParams))(),\r\n        },\r\n        {\r\n          field: 'Title',\r\n          width: 42,\r\n          cellClass: 'secondary-action no-padding no-outline'.split(' '),\r\n          valueGetter: (p: { data: Field }) => p.data.IsTitle,\r\n          cellRenderer: ContentTypeFieldsTitleComponent,\r\n          cellRendererParams: (() => ({\r\n            onSetTitle: (field) => this.#setTitle(field),\r\n          } satisfies ContentTypeFieldsTitleParams))(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWidePrimary,\r\n          headerName: 'Name',\r\n          field: 'StaticName',\r\n          cellClass: (p: { data: Field }) => `${p.data.EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' '),\r\n          cellRenderer: (params: ICellRendererParams & { data: Field }) =>\r\n            AgGridHelper.cellLink(\r\n              this.#fieldEditUrl(params.data),\r\n              params.value\r\n            ),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ItemsText,\r\n          field: 'Type',\r\n          width: 70,\r\n          valueGetter: (p: { data: Field }) => p.data.Type,\r\n          cellRenderer: ContentTypeFieldsTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ItemsText,\r\n          headerName: 'Input',\r\n          field: 'InputType',\r\n          width: 160,\r\n          cellClass: (p: { data: Field }) => `${p.data.EditInfo.DisableEdit ? 'no-outline' : 'primary-action highlight'}`.split(' '),\r\n          valueGetter: (p: { data: Field }) => p.data.InputType.substring(p.data.InputType.indexOf('-') + 1),\r\n          cellRenderer: (params: ICellRendererParams & { data: Field }) =>\r\n            AgGridHelper.cellLink(\r\n              this.#inputTypeEditUrl(params.data),\r\n              params.value\r\n            ),\r\n        },\r\n        {\r\n          field: 'Label',\r\n          flex: 2,\r\n          minWidth: 200,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (p: { data: Field }) => p.data.Metadata?.All?.Name,\r\n        },\r\n        {\r\n          field: 'Special',\r\n          width: 22 * 6, // 6 icons, 22px each\r\n          headerClass: 'dense',\r\n          cellClass: 'no-outline',\r\n          cellRenderer: ContentTypeFieldsSpecialComponent,\r\n        },\r\n        {\r\n          field: 'Notes',\r\n          flex: 2,\r\n          minWidth: 250,\r\n          cellClass: 'no-outline',\r\n          sortable: true,\r\n          filter: 'agTextColumnFilter',\r\n          valueGetter: (p: { data: Field }) => p.data.Metadata?.All?.Notes,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight5,\r\n          cellRenderer: ContentTypeFieldsActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            do: (verb, field) => {\r\n              switch (verb) {\r\n                case 'rename': this.#rename(field); break;\r\n                case 'delete': this.#delete(field); break;\r\n                case 'permissions': this.#openPermissions(field); break;\r\n                case 'metadata': this.#openMetadata(field); break;\r\n                case 'shareOrInherit': this.#shareOrInherit(field); break;\r\n                case 'image': this.#openImageConfiguration(field); break;\r\n              }\r\n            }\r\n          } satisfies ContentTypeFieldsActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n\r\n  //#endregion\r\n}"],"x_google_ignoreList":[4,7,8,9]}