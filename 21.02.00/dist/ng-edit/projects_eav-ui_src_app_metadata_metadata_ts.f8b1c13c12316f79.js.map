{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_ts.f8b1c13c12316f79.js","mappings":"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","names":["logSpecs","getAll","getAllLive","getAllOnce","ContentItemsService","HttpServiceBaseSignal","constructor","this","log","classLog","getAllPromise","contentTypeStaticName","fnIf","fetchPromise","webApiEntityList","params","appId","contentType","httpResource","url","apiUrl","refresh","getColumnsPromise","webApiFieldsAll","staticName","importItem","file","from","toBase64","pipe","switchMap","fileBase64","http","post","webApiEntityRoot","AppId","ContentBase64","map","success","Success","Messages","__ngFactoryType__","factory","Éµfac","dropdownInsertValue","i0","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","FieldHintComponent","isError","input","isShort","toggleIsShort","selectors","inputs","ngContentSelectors","_c0","decls","vars","consts","template","rf","ctx","_r1","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","_c1","tmp_2_0","MatFormFieldModule","i1","NgClass","NgTemplateOutlet","styles","GridWithHelpComponent","gridWrapper","viewChild","read","ElementRef","agGrid","contentChild","AgGridAngular","dialogAction","MatDialogActions","helpText","required","rowLength","DEFAULT_ROW_HEIGHT","GRID_HEADER_HEIGHT","HELP_CARD_BUFFER","effect","gridWrapperEl","nativeElement","untracked","#updateLayout","agGridEl","dialogActionEl","helpCard","querySelector","setTimeout","classList","toggle","style","flex","dimensions","#calculateDimensions","rowHeight","agGridHeight","sideNavEl","document","dialogEl","maxHeight","clientHeight","dialogHeaderHeight","dialogActionHeight","shouldHideHelp","helpCardHeight","wrapperHeight","offsetHeight","contentQueries","dirIndex","description","hint","AgGridHelper","cellLink","link","body","classes","ClickStopPropagationDirective","a","onClick","event","stopPropagation","hostBindings","$event","permissionsDialog","name","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","Promise","all","__webpack_require__","e","then","bind","permissionRoutes","path","component","DialogEntryComponent","data","dialog","children","EditRoutes","MetadataActionsComponent","agInit","deleteMetadata","onDelete","MatRippleModule","MatIconModule","i2","TippyDirective","encapsulation","MetadataContentTypeComponent","value","metadata","_Type","Description","scopeOption_r1","MetadataSaveDialogComponent_Conditional_14_For_5_Template","ctx_r1","scopeOptions","length","contentType_r3","NameId","Label","MetadataSaveDialogComponent_Conditional_18_For_2_Template","tmp_1_0","contentTypes","MetadataSaveDialogComponent","#contentTypesService","hostClass","formValid","signal","canSave","computed","guidedContentType","advancedMode","transient","ContentTypesService","scope","eavConstants","scopes","default","getScopesSig","getTypes","ngOnInit","buildForm","#watchKeyboardShortcuts","form","statusChanges","subscribe","set","valid","closeDialog","close","toggleGuidedContentType","toggleAdvancedMode","checked","saveAndClose","formValues","getRawValue","keydownEvents","isCtrlEnter","preventDefault","UntypedFormGroup","addControl","UntypedFormControl","Validators","controls","valueChanges","startWith","distinctUntilChanged","newScope","patchValue","prompt","some","option","hostVars","MetadataSaveDialogComponent_Conditional_14_Template","MetadataSaveDialogComponent_Conditional_18_Template","MetadataSaveDialogComponent_Conditional_19_Template","MetadataSaveDialogComponent_Conditional_27_Template","touched","errors","FormsModule","ReactiveFormsModule","i3","MatSelectModule","i4","i5","MatOptionModule","MatInputModule","i6","MatButtonModule","i7","i8","MatSlideToggleModule","i9","SaveCloseButtonFabComponent","ctx_r0","itemFor","KeyNumber","KeyGuid","KeyString","Title","MetadataComponent_Conditional_11_Conditional_5_Template","MetadataComponent_Conditional_11_Conditional_6_Template","MetadataComponent_Conditional_11_Conditional_7_Template","MetadataComponent_Conditional_11_Conditional_8_Template","Target","TargetType","metadataSet","Items","gridOptions","_r2","createMetadata","recommendation_r5","Icon","Enabled","_r4","$implicit","MetadataComponent_Conditional_15_For_10_Conditional_1_Template","MetadataComponent_Conditional_15_For_10_Conditional_2_Template","fabOpen","_r3","openChange","MetadataComponent_Conditional_15_For_10_Template","recommendations","MetadataComponent","#entitiesSvc","#metadataSvc","#contentItemSvc","#dialogRoutes","snackBar","matDialog","viewContainerRef","changeDetectorRef","EntityEditService","MetadataService","DialogRoutingService","#buildGridOptions","#params","convert","getParams","p","targetType","parseInt","keyType","key","#itemsFromHttp","item","find","i","Guid","For","undefined","#metadataResource","getMetadataLive","#helpTextConst","empty","content","uxHelpText","clone","structuredClone","Recommendations","forEach","r","startsWith","icon","replace","window","atob","filter","Id","Count","title","decodeURIComponent","getParam","console","error","doOnDialogClosed","update","pre","open","recommendation","CreateEmpty","Name","create","calculateItemFor","duration","next","createMetadataForm","openFeatureDialog","MissingFeature","autoFocus","width","afterClosed","items","formUrl","convertFormToUrl","navRelative","markForCheck","temp","ItemIdHelper","constructMetadataInfo","newMetadataFromInfo","#editMetadata","editId","#deleteMetadata","confirmed","entityId","entityTitle","hasDeleteSnackbar","message","DeleteWarning","ConfirmDeleteDialogComponent","isConfirmed","delete","#metadataEditUrl","urlSubRoute","defaultGridOptions","columnDefs","ColumnDefinitions","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWide","field","cellRenderer","onCellClicked","headerName","valueGetter","ActionsPinnedRight1","MetadataComponent_Conditional_10_Template","MetadataComponent_Conditional_11_Template","MetadataComponent_Conditional_12_Template","MetadataComponent_Conditional_14_Template","MetadataComponent_Conditional_15_Template","tmp_5_0","tmp_6_0","tmp_7_0","RouterOutlet","SxcGridModule","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","EcoFabSpeedDialActionsComponent","MatBadgeModule","MatBadgeIconDirective","SafeHtmlPipe","GoToPermissions","route","loadChildren","m","getUrl","getUrlApp","app","toString","getUrlAttribute","id","attribute","getUrlContentType","guid","getUrlEntity","entity","getUrlLanguage","language"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/content-items/services/content-items.service.ts","./projects/eav-ui/src/app/shared/constants/dropdown-insert-value.constant.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.ts","./projects/eav-ui/src/app/shared/ag-grid/grid-with-help/grid-with-help.html","./projects/eav-ui/src/app/shared/ag-grid/ag-grid-helper.ts","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions.routing.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.ts","./projects/eav-ui/src/app/metadata/metadata.html","./projects/eav-ui/src/app/metadata/metadata.ts","./projects/eav-ui/src/app/permissions/go-to-permissions.ts"],"sourcesContent":["import { httpResource } from '@angular/common/http';\r\nimport { Injectable, Signal } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { webApiEntityList, webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBaseSignal } from '../../shared/services/http-service-base-signal';\r\nimport { ContentItem } from '../models/content-item.model';\r\n\r\nconst logSpecs = {\r\n  getAll: true,\r\n  getAllLive: true,\r\n  getAllOnce: true,\r\n\r\n}\r\n@Injectable()\r\nexport class ContentItemsService extends HttpServiceBaseSignal {\r\n\r\n  log = classLog({ ContentItemsService }, logSpecs);\r\n  \r\n  getAllPromise(contentTypeStaticName: string): Promise<ContentItem[]> {\r\n    this.log.fnIf('getAll', { contentTypeStaticName });\r\n    return this.fetchPromise<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  getAllOnce(contentTypeStaticName: string) {\r\n    this.log.fnIf('getAllOnce', { contentTypeStaticName });\r\n    return httpResource<ContentItem[]>(() => {\r\n      return ({\r\n        url: this.apiUrl(webApiEntityList),\r\n        params: { appId: this.appId, contentType: contentTypeStaticName }\r\n      });\r\n    });\r\n  }\r\n\r\n  getAllLive(contentTypeStaticName: string, refresh: Signal<unknown>) {\r\n    this.log.fnIf('getAllLive', { contentTypeStaticName, refresh });\r\n    return httpResource<ContentItem[]>(() => {\r\n      refresh();\r\n      return ({\r\n        url: this.apiUrl(webApiEntityList),\r\n        params: { appId: this.appId, contentType: contentTypeStaticName }\r\n      });\r\n    });\r\n  }\r\n\r\n  getColumnsPromise(contentTypeStaticName: string): Promise<Field[]> {\r\n    return this.fetchPromise<Field[]>(webApiFieldsAll, {\r\n      params: { appId: this.appId, staticName: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  importItem(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.apiUrl(webApiEntityRoot + 'upload'), {\r\n          AppId: this.appId,\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","export const dropdownInsertValue = 'DROPDOWN_INSERT_VALUE' as const;\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError()) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n    selector: 'app-field-hint',\r\n    templateUrl: './field-hint.html',\r\n    styleUrls: ['./field-hint.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        NgClass,\r\n        NgTemplateOutlet\r\n    ]\r\n})\r\nexport class FieldHintComponent {\r\n  isError = input<boolean>(false);\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","import { AgGridAngular } from '@ag-grid-community/angular';\r\nimport { Component, contentChild, effect, ElementRef, input, untracked, viewChild } from '@angular/core';\r\nimport { MatDialogActions } from '@angular/material/dialog';\r\n\r\nexport interface HelpTextConst {\r\n  empty: GridWithHelpInput;\r\n  content: GridWithHelpInput;\r\n}\r\n\r\nexport interface GridWithHelpInput {\r\n  description: string;\r\n  hint: string;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-grid-with-help',\r\n  imports: [],\r\n  templateUrl: './grid-with-help.html',\r\n  styleUrl: './grid-with-help.scss'\r\n})\r\nexport class GridWithHelpComponent {\r\n  // ViewChild and ContentChild references - Access to DOM elements\r\n  gridWrapper = viewChild(\"gridWrapper\", { read: ElementRef });\r\n  agGrid = contentChild(AgGridAngular, { read: ElementRef });\r\n  dialogAction = contentChild(MatDialogActions, { read: ElementRef });\r\n\r\n  // Input properties - Required data from parent component\r\n  readonly helpText = input.required<GridWithHelpInput>({});\r\n  readonly refresh = input.required<number>();\r\n  readonly rowLength = input.required<number>();\r\n\r\n  // Constants - Fixed values for layout calculations\r\n  readonly DEFAULT_ROW_HEIGHT = 47; // Default height for AG Grid rows in pixels\r\n  readonly GRID_HEADER_HEIGHT = 64; // Height of AG Grid header in pixels\r\n  readonly HELP_CARD_BUFFER = 12;   // Additional buffer space for help card in pixels\r\n\r\n\r\n  // ag-row-even\r\n\r\n  constructor() {\r\n    // Effect that reacts to changes in refresh and rowLength signals\r\n    effect(() => {\r\n      const refresh = this.refresh();\r\n      const rowLength = this.rowLength();\r\n      const gridWrapperEl = this.gridWrapper()?.nativeElement;\r\n\r\n      // Early return if grid wrapper element is not available\r\n      if (!gridWrapperEl) return;\r\n\r\n      // Untracked execution to prevent unnecessary effect re-runs during layout updates\r\n      untracked(() => this.#updateLayout(gridWrapperEl, rowLength));\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Main layout update method - Handles the dynamic sizing and positioning of grid and help card\r\n   * @param gridWrapperEl - The main container element\r\n   * @param rowLength - Number of rows in the grid\r\n   */\r\n  #updateLayout(gridWrapperEl: HTMLElement, rowLength: number): void {\r\n    // Get references to essential DOM elements\r\n    const agGridEl = this.agGrid()?.nativeElement;\r\n    const dialogActionEl = this.dialogAction()?.nativeElement;\r\n    const helpCard = gridWrapperEl.querySelector('.help-info-card') as HTMLElement;\r\n\r\n    setTimeout(() => {\r\n      helpCard.classList.toggle('center-center', rowLength === 0);\r\n\r\n      // Early return if critical elements are missing\r\n      if (!agGridEl || !dialogActionEl) return;\r\n\r\n      helpCard.style.flex = \"\";\r\n\r\n      // Calculate all necessary dimensions for layout\r\n      const dimensions = this.#calculateDimensions(gridWrapperEl, agGridEl, dialogActionEl, helpCard, rowLength);\r\n\r\n      // Set AG Grid height based on row count and maximum height to prevent overflow\r\n      agGridEl.style.flex = dimensions.rowHeight ? `0 0 ${dimensions.agGridHeight}px` : '0px';\r\n\r\n      // Outer Container for max Size\r\n      const sideNavEl = document.querySelector<HTMLElement>('.mat-sidenav-content'); // with SideNav (settings)\r\n      const dialogEl = document.querySelector<HTMLElement>('.mat-mdc-dialog-container'); // only Dialog (Content)\r\n\r\n      const hasNavComponentWrapper = !!document.querySelector<HTMLElement>('.nav-component-wrapper'); // Check, if sideNav Dialog or Single Dialog \r\n      const outerContainer = hasNavComponentWrapper ? dialogEl : sideNavEl;\r\n\r\n      const maxHeight = outerContainer.clientHeight - dimensions.dialogHeaderHeight - dimensions.dialogActionHeight - 2;\r\n\r\n      agGridEl.style.maxHeight = `${maxHeight}px`;\r\n\r\n      // Determine if help card should be hidden when content exceeds available space\r\n      const shouldHideHelp = dimensions.helpCardHeight + dimensions.agGridHeight + dimensions.dialogActionHeight + dimensions.dialogHeaderHeight > dimensions.wrapperHeight;\r\n\r\n      helpCard.style.flex = \"1 1 auto\";\r\n      // Remove Help card from layout if it should be hidden\r\n      helpCard?.classList.toggle('hidden-help-info-card', shouldHideHelp);\r\n    }, 0);\r\n\r\n  }\r\n\r\n  // Calculate dimensions for AG Grid and help card based on current layout\r\n  #calculateDimensions(gridWrapperEl: HTMLElement, agGridEl: HTMLElement, dialogActionEl: HTMLElement, helpCard: HTMLElement, rowLength: number) {\r\n    const rowHeight = agGridEl.querySelector('.ag-row')?.clientHeight ?? this.DEFAULT_ROW_HEIGHT;\r\n    const agGridHeight = this.GRID_HEADER_HEIGHT + (rowLength * rowHeight);\r\n    const helpCardHeight = helpCard.clientHeight + this.HELP_CARD_BUFFER;\r\n    const dialogActionHeight = dialogActionEl.offsetHeight;\r\n    const dialogHeaderHeight = gridWrapperEl.querySelector('.eav-dialog-header')?.clientHeight ?? 0;\r\n    // Get total available wrapper height\r\n    const wrapperHeight = gridWrapperEl.offsetHeight;\r\n    return {\r\n      rowHeight,\r\n      agGridHeight,\r\n      helpCardHeight,\r\n      dialogActionHeight,\r\n      dialogHeaderHeight,\r\n      wrapperHeight\r\n    };\r\n  }\r\n}\r\n","<div class=\"grid-wrapper-dynamic\" #gridWrapper>\r\n  <ng-content select=\"[eav-dialog-header]\"></ng-content>\r\n  <ng-content select=\"[eav-dialog-content]\"> </ng-content>\r\n  <ng-content select=\"ag-grid-angular\"></ng-content>\r\n  <div class=\"help-info-card\">\r\n    <div class=\"help-info-card-text\">\r\n      <span [innerHTML]=\"helpText().description\"></span>\r\n      <span [innerHTML]=\"helpText().hint\"></span>\r\n    </div>\r\n  </div>\r\n  <ng-content select=\"mat-dialog-actions\"></ng-content>\r\n</div>\r\n","export class AgGridHelper {\r\n  public static cellLink(link: string, body: string, classes?: string): string {\r\n    return `<a class=\"default-link fill-cell ${classes}\" href=\"${link}\">${body}</a>`;\r\n  }\r\n}","import { Directive, HostListener } from '@angular/core';\r\nimport { classLog } from '../logging';\r\n\r\n@Directive({\r\n  selector: '[appClickStopPropagation]',\r\n})\r\nexport class ClickStopPropagationDirective {\r\n\r\n  log = classLog({ClickStopPropagationDirective});\r\n\r\n  // Log constructor to detect that it was really attached/created\r\n  constructor() {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    this.log.a('onClick', { event });\r\n    event.stopPropagation();\r\n\r\n    // This should never be added here, as it's often on a link, and the default behavior (link open) should happen\r\n    // event.preventDefault();\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { Routes } from '@angular/router';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutes\r\n  },\r\n];\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-actions',\r\n    templateUrl: './metadata-actions.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { MetadataItem } from '../models/metadata.model';\r\n\r\n@Component({\r\n    selector: 'app-metadata-content-type',\r\n    templateUrl: './metadata-content-type.html',\r\n    styleUrls: ['./metadata-content-type.scss'],\r\n    imports: [TippyDirective,]\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","<div class=\"eav-dialog\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      Create Metadata\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content\">\r\n    <p>\r\n      This is a special operation to add an item which as metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </p>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      @if (advancedMode && guidedContentType) {\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Scope</mat-label>\r\n        <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions().length ? 'No items found' : ''\">\r\n          @for (scopeOption of scopeOptions(); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.value\">\r\n            {{ scopeOption.name }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <app-field-hint>\r\n        The scope should almost never be changed -\r\n        <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n      </app-field-hint>\r\n      }\r\n\r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        @if (guidedContentType) {\r\n        <mat-select formControlName=\"contentType\" required\r\n          [placeholder]=\"!contentTypes()?.length ? 'No items found' : ''\">\r\n          @for (contentType of contentTypes(); track contentType) {\r\n          <mat-option [value]=\"contentType.NameId\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n        }\r\n        @if (!guidedContentType) {\r\n        <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n        }\r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n      }\r\n\r\n      <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n        {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n      </mat-slide-toggle>\r\n      \r\n    </form>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    <app-save-close-button-fab\r\n      [ngClass]=\"!canSave() ? 'disabled' : ''\"\r\n      [disabled]=\"!canSave()\"\r\n      (action)=\"saveAndClose()\"\r\n    />\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, HostBinding, OnInit, signal, WritableSignal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { isCtrlEnter } from '../../edit/dialog/main/keyboard-shortcuts';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { SaveCloseButtonFabComponent } from '../../shared/modules/save-close-button-fab/save-close-button-fab';\r\nimport { MetadataSaveFormValues } from './metadata-save-dialog.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-save-dialog',\r\n    templateUrl: './metadata-save-dialog.html',\r\n    styleUrls: ['./metadata-save-dialog.scss'],\r\n    imports: [\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatFormFieldModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        MatSlideToggleModule,\r\n        FieldHintComponent,\r\n        ClickStopPropagationDirective,\r\n        MatDialogActions,\r\n        SaveCloseButtonFabComponent,\r\n    ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  formValid = signal(false);\r\n  protected canSave = computed(() => this.formValid());\r\n\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  #contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  scope = signal(eavConstants.scopes.default.value);\r\n  scopeOptions = this.#contentTypesService.getScopesSig() as WritableSignal<ScopeOption[]>;\r\n\r\n  contentTypes = this.#contentTypesService.getTypes(this.scope).value;\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n    this.#watchKeyboardShortcuts();\r\n\r\n    // Subscribe to form status changes to update signal\r\n    this.form.statusChanges.subscribe(() => {\r\n      this.formValid.set(this.form.valid);\r\n    });\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialog.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  saveAndClose(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n  \r\n  #watchKeyboardShortcuts(): void {\r\n    this.dialog.keydownEvents().subscribe(event => {\r\n      if (isCtrlEnter(event) && this.canSave()) {\r\n        event.preventDefault();\r\n        this.saveAndClose();\r\n      }\r\n    });\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions().some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions.set([newScopeOption, ...this.scopeOptions()]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.scope.set(newScope);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <app-grid-with-help style=\"height: 100%\" [helpText]=\"uxHelpText()\" [refresh]=\"refresh()\" [rowLength]=\"metadataSet()?.Items.length\">\r\n    <div class=\"eav-dialog-header\" eav-dialog-header>\r\n      <div class=\"eav-dialog-header__title\">\r\n        {{ title || 'Metadata' }}\r\n      </div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n\r\n    <div class=\"eav-dialog-content\" eav-dialog-content>\r\n      <p>\r\n        @if (!itemFor()) {\r\n          This item is not metadata for anything else.\r\n        } @else {\r\n          This item is metadata for:\r\n          <br />Target: {{ itemFor().Target }} <br />TargetType: {{ itemFor().TargetType }}\r\n          @if (itemFor().KeyNumber) {\r\n            <br />Key Number: {{ itemFor().KeyNumber }}\r\n          }\r\n          @if (itemFor().KeyGuid) {\r\n            <br />Key Guid: {{ itemFor().KeyGuid }}\r\n          }\r\n          @if (itemFor().KeyString) {\r\n            <br />Key String: {{ itemFor().KeyString }}\r\n          }\r\n          @if (itemFor().Title) {\r\n            <br />Title: {{ itemFor().Title }}\r\n          }\r\n        }\r\n      </p>\r\n    </div>\r\n\r\n    @if (metadataSet()?.Items.length > 0) {\r\n      <ag-grid-angular\r\n        class=\"ag-theme-material eav-dialog-content\"\r\n        [rowData]=\"metadataSet()?.Items\"\r\n        [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    }\r\n\r\n    <mat-dialog-actions align=\"end\">\r\n      @if (recommendations()?.length === 0) {\r\n        <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\" (click)=\"createMetadata()\">\r\n          <mat-icon>add</mat-icon>\r\n        </button>\r\n      }\r\n      @if (recommendations()?.length > 0) {\r\n        <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': fabOpen() }\" (openChange)=\"openChange($event)\">\r\n          <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n            <button mat-fab class=\"grid-fab\">\r\n              <mat-icon class=\"spin180\">{{ fabOpen() ? 'close' : 'add' }}</mat-icon>\r\n            </button>\r\n          </eco-fab-speed-dial-trigger>\r\n          <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n            <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\" (click)=\"createMetadata()\">\r\n              <mat-icon>search</mat-icon>\r\n            </button>\r\n            @for (recommendation of recommendations(); track recommendation) {\r\n              <button\r\n                mat-mini-fab\r\n                class=\"eav-eco-fab-speed-dial-action-button\"\r\n                [attr.label]=\"recommendation.Title\"\r\n                (click)=\"createMetadata(recommendation)\"\r\n              >\r\n                @if (recommendation.Icon && fabOpen()) {\r\n                  <div\r\n                    style=\"color: white; fill: white\"\r\n                    [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n                    matBadgeColor=\"accent\"\r\n                    matBadgeSize=\"small\"\r\n                    [matBadgeIcon]=\"!recommendation.Enabled ? 'diamond' : null\"\r\n                    matBadgePosition=\"below after\"\r\n                    aria-hidden=\"false\"\r\n                  ></div>\r\n                } @else {\r\n                  <mat-icon>add</mat-icon>\r\n                }\r\n              </button>\r\n            }\r\n          </eco-fab-speed-dial-actions>\r\n        </eco-fab-speed-dial>\r\n      }\r\n    </mat-dialog-actions>\r\n  </app-grid-with-help>\r\n</div>\r\n\r\n<router-outlet></router-outlet>\r\n","import { GridOptions, ICellRendererParams } from '@ag-grid-community/core';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { EcoFabSpeedDialActionsComponent, EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent } from '@ecodev/fab-speed-dial';\r\nimport { convert, Of, transient } from '../../../../core';\r\nimport { ConfirmDeleteDialogComponent } from '../app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog';\r\nimport { ConfirmDeleteDialogData } from '../app-administration/sub-dialogs/confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EavForInAdminUi } from '../edit/shared/models/eav';\r\nimport { openFeatureDialog } from '../features/shared/base-feature';\r\nimport { MetadataService } from '../permissions';\r\nimport { AgGridHelper } from '../shared/ag-grid/ag-grid-helper';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { GridWithHelpComponent, HelpTextConst } from '../shared/ag-grid/grid-with-help/grid-with-help';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { MetadataKeyTypes } from '../shared/constants/eav.constants';\r\nimport { MatBadgeIconDirective } from '../shared/directives/mat-badge-icon.directive';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../shared/logging';\r\nimport { EditForm, ItemAddIdentifier } from '../shared/models/edit-form.model';\r\nimport { ItemIdHelper } from '../shared/models/item-id-helper';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog';\r\nimport { MetadataItem, MetadataRecommendation } from './models/metadata.model';\r\n\r\n@Component({\r\n  selector: 'app-metadata',\r\n  templateUrl: './metadata.html',\r\n  styleUrls: ['./metadata.scss'],\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n    MatDialogActions,\r\n    EcoFabSpeedDialComponent,\r\n    NgClass,\r\n    EcoFabSpeedDialTriggerComponent,\r\n    EcoFabSpeedDialActionsComponent,\r\n    MatBadgeModule,\r\n    MatBadgeIconDirective,\r\n    SafeHtmlPipe,\r\n    GridWithHelpComponent,\r\n  ]\r\n})\r\nexport class MetadataComponent implements OnInit {\r\n\r\n  log = classLog({ MetadataComponent });\r\n\r\n  #entitiesSvc = transient(EntityEditService);\r\n  #metadataSvc = transient(MetadataService);\r\n  #contentItemSvc = transient(ContentItemsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) { }\r\n\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  fabOpen = signal(false);\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key', 'title', 'contentTypeStaticName']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as Of<typeof MetadataKeyTypes>,\r\n    key: p.key,\r\n    contentTypeStaticName: p.contentTypeStaticName,\r\n  }));\r\n\r\n\r\n  // Signal to get itemFor - must be _outside_ the computed property, otherwise it regenerates infinitely\r\n  #itemsFromHttp = this.#contentItemSvc.getAllOnce(this.#params.contentTypeStaticName).value;\r\n\r\n  itemFor = computed<EavForInAdminUi | undefined>(() => {\r\n    const item = this.#itemsFromHttp()?.find(i => i.Guid === this.#params.key);\r\n    return (item?.For)\r\n      ? item.For\r\n      : undefined;\r\n  });\r\n\r\n  refresh = signal<number>(0);\r\n  #metadataResource = this.#metadataSvc.getMetadataLive(this.refresh, this.#params.targetType, this.#params.keyType, this.#params.key).value\r\n\r\n\r\n  // UI Help Text for the UX Help Info Card\r\n  #helpTextConst: HelpTextConst = {\r\n    empty: {\r\n      description: '<p><b>This is where you manage Metadata</b></p>',\r\n      hint: \"<p>Click the (+) in the bottom right corner to create your first Metadata for the current item.</p>\"\r\n    },\r\n    content: {\r\n      description: '<p><b>Each row shows Metadata for the current item</b> <br>Metadata describes/configures something, similar to labels you could attach to clothes.</p>',\r\n      hint: '<p>Click on the row to edit the Metadata. <br>You can also create new Metadata.</p>'\r\n    }\r\n  };\r\n\r\n  uxHelpText = computed(() => {\r\n    const data = this.metadataSet()?.Items;\r\n    return data?.length === 0 ? this.#helpTextConst.empty : this.#helpTextConst.content;\r\n  })\r\n\r\n\r\n  metadataSet = computed(() => {\r\n    const metadata = this.#metadataResource();\r\n    if (!metadata) return undefined;\r\n\r\n    const clone = structuredClone(metadata);\r\n\r\n    clone.Recommendations.forEach(r => {\r\n      if (r.Icon?.startsWith('base64:')) {\r\n        let icon = r.Icon.replace('base64:', '');\r\n        icon = window.atob(icon);\r\n        icon = icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n        r.Icon = icon;\r\n      }\r\n    });\r\n    return clone;\r\n  });\r\n\r\n\r\n  recommendations = computed(() => {\r\n    const metadata = this.metadataSet();\r\n    return metadata?.Recommendations.filter(r =>\r\n      metadata?.Items.filter(i => i._Type.Id === r.Id).length < r.Count\r\n    );\r\n  });\r\n\r\n  protected title = (() => {\r\n    try {\r\n      return decodeURIComponent(this.#dialogRoutes.getParam('title') ?? '');\r\n    } catch (e) {\r\n      console.error('Couldn\\'t properly decode title');\r\n      return this.#dialogRoutes.getParam('title') ?? '';\r\n    }\r\n  })();\r\n\r\n  ngOnInit() {\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.refresh.update(pre => pre + 1));\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen.set(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.matDialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.#entitiesSvc.create(recommendation.Id, { For: this.calculateItemFor('dummy').For }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.refresh.update(pre => pre + 1)\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.refresh.update(pre => pre + 1)\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.matDialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [this.calculateItemFor(contentType)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(contentType: string): ItemAddIdentifier {\r\n    const temp = ItemIdHelper.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key);\r\n    return ItemIdHelper.newMetadataFromInfo(contentType, temp);\r\n  }\r\n\r\n\r\n  #editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [ItemIdHelper.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        hasDeleteSnackbar: true,\r\n        message: this.metadataSet().Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.matDialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.#deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.#entitiesSvc.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.refresh.update(pre => pre + 1);\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #metadataEditUrl(metadata: MetadataItem): string {\r\n    const form: EditForm = {\r\n      items: [ItemIdHelper.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    // Use your dialogRoutes service to generate the correct sub-route\r\n    return '#' + this.#dialogRoutes.urlSubRoute(`edit/${formUrl}`);\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<MetadataItem>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          cellRenderer: (params: ICellRendererParams & { data: MetadataItem }) =>\r\n            AgGridHelper.cellLink(\r\n              this.#metadataEditUrl(params.data),\r\n              params.value\r\n            ),\r\n          onCellClicked: (p: { data: MetadataItem }) => this.#editMetadata(p.data),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (p: { data: MetadataItem }) => `${p.data._Type.Name}${p.data._Type.Title !== p.data._Type.Name ? ` (${p.data._Type.Title})` : ''}`,\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            onDelete: (metadata) => this.#deleteMetadata(metadata),\r\n          } satisfies MetadataActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { Route } from '@angular/router';\r\nimport { Of } from '../../../../core';\r\nimport { eavConstants, MetadataKeyTypes } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n"],"x_google_ignoreList":[]}