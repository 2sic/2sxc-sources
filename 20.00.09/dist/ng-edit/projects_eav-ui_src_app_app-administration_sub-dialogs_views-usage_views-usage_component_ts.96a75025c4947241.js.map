{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.96a75025c4947241.js","mappings":"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","names":["blockIdValueGetter","params","data","Block","Id","Guid","moduleIdValueGetter","Module","UsageId","Title","moduleIdClassGetter","value","split","pageIdValueGetter","PageId","pageIdClassGetter","nameClassGetter","onNameClicked","window","open","Url","statusCellRenderer","status","IsVisible","IsDeleted","i0","_r1","ctx_r1","clipboard","copyToClipboard","tooltip","id","ViewsUsageIdComponent","constructor","this","transient","ClipboardService","agInit","idPart","refresh","static","__ngFactoryType__","debug_node_JnOYh9kg","VBU","selectors","decls","vars","consts","template","rf","ctx","ViewsUsageIdComponent_Conditional_0_Template","MatRippleModule","i1","MatIconModule","i2","TippyDirective","styles","ViewsUsageStatusFilterComponent","isVisible","isDeleted","filterParams","isFilterActive","doesFilterPass","visiblePassed","deletedPassed","valueGetter","api","colDef","column","context","node","getValue","field","toString","getModel","filterType","setModel","model","afterGuiAttached","filterChanged","filterChangedCallback","$event","MatRadioModule","FormsModule","buildData","viewUsage","block","Blocks","Modules","length","push","module","Page","Name","Language","CultureCode","Status","Visible","ViewsUsageComponent","dialog","route","gridOptions","buildGridOptions","viewsService","ViewsService","viewGuid","snapshot","paramMap","get","#usage","getUsage","view","computed","usage","undefined","viewUsageName","viewTooltip","closeDialog","close","defaultGridOptions","columnDefs","ColumnDefinitions","cellRenderer","Number","width","cellClass","TextWide","sort","onCellClicked","ItemsText","filter","tmp_0_0","tmp_1_0","tmp_2_0","MatButtonModule","i3","i4","RouterOutlet","SxcGridModule","i5","MatDialogModule","encapsulation"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage-grid.helpers.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage-id/views-usage-id.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage-id/views-usage-id.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage-status-filter/views-usage-status-filter.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage-status-filter/views-usage-status-filter.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage.helpers.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/views-usage/views-usage.component.html"],"sourcesContent":["import { CellClassParams, CellClickedEvent, ICellRendererParams, ValueGetterParams } from '@ag-grid-community/core';\r\nimport { ViewUsageData, ViewUsageDataStatus } from '../../models/view-usage-data.model';\r\n\r\nexport function blockIdValueGetter(params: ValueGetterParams) {\r\n  const data: ViewUsageData = params.data;\r\n  return `ID: ${data.Block.Id}\\nGUID: ${data.Block.Guid}`;\r\n}\r\n\r\nexport function moduleIdValueGetter(params: ValueGetterParams) {\r\n  const data: ViewUsageData = params.data;\r\n  if (data.Module == null) return;\r\n  return `ID: ${data.Module.Id}\\nUsageId: ${data.Module.UsageId}\\nTitle: ${data.Module.Title}`;\r\n}\r\n\r\nexport function moduleIdClassGetter(params: CellClassParams): string[] {\r\n  return `${params.value != null ? 'id-action no-padding' : ''} no-outline`.split(' ');\r\n}\r\n\r\nexport function pageIdValueGetter(params: ValueGetterParams) {\r\n  const data: ViewUsageData = params.data;\r\n  if (data.PageId == null) return;\r\n  return `ID: ${data.PageId}`;\r\n}\r\n\r\nexport function pageIdClassGetter(params: CellClassParams): string[] {\r\n  return `${params.value != null ? 'id-action no-padding' : ''} no-outline`.split(' ');\r\n}\r\n\r\nexport function nameClassGetter(params: CellClassParams): string[] {\r\n  return `${params.value != null ? 'primary-action highlight' : 'no-outline'}`.split(' ');\r\n}\r\n\r\nexport function onNameClicked(params: CellClickedEvent) {\r\n  if (params.value == null) return;\r\n  const data: ViewUsageData = params.data;\r\n  window.open(data.Url, '_blank');\r\n}\r\n\r\nexport function statusCellRenderer(params: ICellRendererParams) {\r\n  const status: ViewUsageDataStatus = params.value;\r\n  if (status == null) return;\r\n  return `\r\n    <div style=\"height: 100%;display: flex;align-items: center;\">\r\n      ${status.IsVisible ? '<span class=\"material-symbols-outlined\">visibility</span>' : '<span class=\"material-symbols-outlined\">visibility_off</span>'}\r\n      ${status.IsDeleted ? '<span style=\"margin-left: 8px;\" class=\"material-symbols-outlined\">delete</span>' : ''}\r\n    </div>\r\n  `;\r\n}\r\n","@if (id) {\r\n  <div matRipple class=\"id-box highlight\" [tippy]=\"tooltip\" (click)=\"clipboard.copyToClipboard(tooltip)\">\r\n    <span class=\"id\">{{ id }}</span>\r\n    <mat-icon class=\"icon\">file_copy</mat-icon>\r\n  </div>\r\n}","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { transient } from '../../../../../../../core/transient';\r\nimport { TippyDirective } from '../../../../shared/directives/tippy.directive';\r\nimport { ClipboardService } from '../../../../shared/services/clipboard.service';\r\n\r\n@Component({\r\n    selector: 'app-views-usage-id',\r\n    templateUrl: './views-usage-id.component.html',\r\n    styleUrls: ['./views-usage-id.component.scss'],\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class ViewsUsageIdComponent implements ICellRendererAngularComp {\r\n  tooltip: string;\r\n  id: string;\r\n\r\n  constructor() { }\r\n\r\n  protected clipboard = transient(ClipboardService);\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.tooltip = params.value;\r\n    if (this.tooltip == null) return;\r\n    const idPart = this.tooltip.split('\\n')[0];\r\n    this.id = idPart.split(' ')[1];\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","import { IFilterAngularComp } from '@ag-grid-community/angular';\r\nimport { IAfterGuiAttachedParams, IDoesFilterPassParams, IFilterParams, ValueGetterParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { MatRadioModule } from '@angular/material/radio';\r\nimport { ViewUsageDataStatus } from '../../../models/view-usage-data.model';\r\nimport { ViewsUsageStatusFilterModel } from './views-usage-status-filter.model';\r\n\r\n@Component({\r\n    selector: 'app-views-usage-status-filter',\r\n    templateUrl: './views-usage-status-filter.component.html',\r\n    styleUrls: ['./views-usage-status-filter.component.scss'],\r\n    imports: [MatRadioModule, FormsModule]\r\n})\r\nexport class ViewsUsageStatusFilterComponent implements IFilterAngularComp {\r\n  isVisible = '';\r\n  isDeleted = '';\r\n\r\n  private filterParams: IFilterParams;\r\n\r\n  agInit(params: IFilterParams) {\r\n    this.filterParams = params;\r\n  }\r\n\r\n  isFilterActive(): boolean {\r\n    return this.isVisible !== '' || this.isDeleted !== '';\r\n  }\r\n\r\n  doesFilterPass(params: IDoesFilterPassParams): boolean {\r\n    let visiblePassed = false;\r\n    let deletedPassed = false;\r\n\r\n    const valueGetterParams: ValueGetterParams = {\r\n      api: this.filterParams.api,\r\n      colDef: this.filterParams.colDef,\r\n      column: this.filterParams.column,\r\n      context: this.filterParams.context,\r\n      data: params.node.data,\r\n      getValue: (field) => params.node.data[field],\r\n      node: params.node,\r\n    };\r\n    const value: ViewUsageDataStatus = this.filterParams.valueGetter(valueGetterParams);\r\n    if (value == null) { return false; }\r\n    if (this.isVisible !== '') {\r\n      visiblePassed = (value.IsVisible == null) ? false : value.IsVisible.toString() === this.isVisible;\r\n    } else {\r\n      visiblePassed = true;\r\n    }\r\n    if (this.isDeleted !== '') {\r\n      deletedPassed = (value.IsDeleted == null) ? false : value.IsDeleted.toString() === this.isDeleted;\r\n    } else {\r\n      deletedPassed = true;\r\n    }\r\n    return visiblePassed && deletedPassed;\r\n  }\r\n\r\n  getModel(): ViewsUsageStatusFilterModel {\r\n    if (!this.isFilterActive()) return;\r\n    return {\r\n      filterType: 'views-usage-status',\r\n      isVisible: this.isVisible,\r\n      isDeleted: this.isDeleted,\r\n    };\r\n  }\r\n\r\n  setModel(model: ViewsUsageStatusFilterModel) {\r\n    this.isVisible = model ? model.isVisible : '';\r\n    this.isDeleted = model ? model.isDeleted : '';\r\n  }\r\n\r\n  afterGuiAttached(params: IAfterGuiAttachedParams) {\r\n  }\r\n\r\n  filterChanged() {\r\n    this.filterParams.filterChangedCallback();\r\n  }\r\n}\r\n","<div class=\"title\">Visible</div>\r\n<mat-radio-group [(ngModel)]=\"isVisible\" (ngModelChange)=\"filterChanged()\">\r\n  <mat-radio-button value=\"\">All</mat-radio-button>\r\n  <mat-radio-button value=\"true\">Visible</mat-radio-button>\r\n  <mat-radio-button value=\"false\">Hidden</mat-radio-button>\r\n</mat-radio-group>\r\n\r\n<div class=\"title\">Deleted</div>\r\n<mat-radio-group [(ngModel)]=\"isDeleted\" (ngModelChange)=\"filterChanged()\">\r\n  <mat-radio-button value=\"\">All</mat-radio-button>\r\n  <mat-radio-button value=\"true\">Is deleted</mat-radio-button>\r\n  <mat-radio-button value=\"false\">Is not deleted</mat-radio-button>\r\n</mat-radio-group>\r\n","import { ViewUsageData } from '../../models/view-usage-data.model';\r\nimport { ViewUsage } from '../../models/view-usage.model';\r\n\r\nexport function buildData(viewUsage: ViewUsage) {\r\n  const data: ViewUsageData[] = [];\r\n  for (const block of viewUsage.Blocks) {\r\n    if (block.Modules.length === 0) {\r\n      data.push({\r\n        Block: { Id: block.Id, Guid: block.Guid },\r\n      });\r\n    }\r\n    for (const module of block.Modules) {\r\n      data.push({\r\n        Block: { Id: block.Id, Guid: block.Guid },\r\n        Module: module,\r\n        PageId: module.Page.Id,\r\n        Name: module.Page.Name,\r\n        Url: module.Page.Url,\r\n        Language: module.Page.CultureCode,\r\n        Status: { IsVisible: module.Page.Visible, IsDeleted: module.IsDeleted },\r\n      });\r\n    }\r\n  }\r\n  return data;\r\n}\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, computed } from '@angular/core';\r\nimport { MatDialogModule, MatDialogRef } from '@angular/material/dialog';\r\nimport { ActivatedRoute, RouterOutlet } from '@angular/router';\r\nimport { defaultGridOptions } from '../../../shared/constants/default-grid-options.constants';\r\nimport { ViewsService } from '../../services/views.service';\r\n// tslint:disable-next-line:max-line-length\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { transient } from '../../../../../../core';\r\nimport { ColumnDefinitions } from '../../../shared/ag-grid/column-definitions';\r\nimport { TippyDirective } from '../../../shared/directives/tippy.directive';\r\nimport { SxcGridModule } from '../../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { blockIdValueGetter, moduleIdClassGetter, moduleIdValueGetter, nameClassGetter, onNameClicked, pageIdClassGetter, pageIdValueGetter, statusCellRenderer } from './views-usage-grid.helpers';\r\nimport { ViewsUsageIdComponent } from './views-usage-id/views-usage-id.component';\r\nimport { ViewsUsageStatusFilterComponent } from './views-usage-status-filter/views-usage-status-filter.component';\r\nimport { buildData } from './views-usage.helpers';\r\n\r\n@Component({\r\n    selector: 'app-views-usage',\r\n    templateUrl: './views-usage.component.html',\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        RouterOutlet,\r\n        SxcGridModule,\r\n        TippyDirective,\r\n        MatDialogModule,\r\n    ]\r\n})\r\nexport class ViewsUsageComponent {\r\n  gridOptions = this.buildGridOptions();\r\n\r\n  private viewsService = transient(ViewsService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<ViewsUsageComponent>,\r\n    private route: ActivatedRoute,\r\n  ) { }\r\n\r\n  viewGuid = this.route.snapshot.paramMap.get('guid');\r\n\r\n  #usage = this.viewsService.getUsage(this.viewGuid).value;\r\n\r\n  view = computed(() => {\r\n    const usage = this.#usage();\r\n    if (usage === undefined)\r\n      return undefined;\r\n\r\n    return {\r\n      viewUsageName: usage[0]?.Name,\r\n      viewTooltip: `ID: ${usage[0].Id}\\nGUID: ${usage[0].Guid}`,\r\n      data: buildData(usage[0]),\r\n    }\r\n  }\r\n  );\r\n\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.Id,\r\n          field: 'Block',\r\n          valueGetter: blockIdValueGetter,\r\n          cellRenderer: ViewsUsageIdComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Number,\r\n          field: 'Module',\r\n          width: 80,\r\n          valueGetter: moduleIdValueGetter,\r\n          cellClass: moduleIdClassGetter,\r\n          cellRenderer: ViewsUsageIdComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Number,\r\n          field: 'Page',\r\n          valueGetter: pageIdValueGetter,\r\n          cellClass: pageIdClassGetter,\r\n          cellRenderer: ViewsUsageIdComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Name',\r\n          sort: 'asc',\r\n          cellClass: nameClassGetter,\r\n          onCellClicked: onNameClicked,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ItemsText,\r\n          field: 'Language',\r\n          width: 90,\r\n        },\r\n        {\r\n          field: 'Status',\r\n          width: 80,\r\n          cellClass: 'icon no-outline'.split(' '),\r\n          filter: ViewsUsageStatusFilterComponent,\r\n          cellRenderer: statusCellRenderer,\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"nav-component-wrapper\">\r\n  <div mat-mdc-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div [tippy]=\"view()?.viewTooltip\">View: {{ view()?.viewUsageName }}</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n  <mat-dialog-content style=\"overflow: hidden; color: black\">\r\n    <p class=\"dialog-description\">\r\n      This shows where this view is being used. Read about the\r\n      <a href=\"https://go.2sxc.org/content-in-dnn\" target=\"_blank\">connections between DNN and 2sxc Views</a>\r\n      to make good decisions if you're doing clean-up or just want to better know what this is all about.\r\n      <em>Before you get confused about some things you see here, do read the FAQ on that page.</em>\r\n    </p>\r\n\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"view()?.data\" [gridOptions]=\"gridOptions\"> </ag-grid-angular>\r\n      <div class=\"grid-more-actions-box\"></div>\r\n    </div>\r\n  </mat-dialog-content>\r\n</div>\r\n"],"x_google_ignoreList":[]}