"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts"],{9042:(k,r,o)=>{o.r(r),o.d(r,{ViewsUsageComponent:()=>S});var v=o(1276),d=o(6317),C=o(9119),w=o(5388),e=o(3184),U=o(2528),u=o(6362),b=o(1130),g=o(785),c=o(5590);function I(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",1),e.NdJ("click",function(){return e.CHM(t),e.oxw().copy()}),e.TgZ(1,"span",2),e._uU(2),e.qZA(),e.TgZ(3,"mat-icon",3),e._uU(4,"file_copy"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("tippy",t.tooltip),e.xp6(2),e.Oqu(t.id)}}let T=(()=>{class i{constructor(t){this.snackBar=t}agInit(t){if(this.tooltip=t.value,null==this.tooltip)return;const n=this.tooltip.split("\n")[0];this.id=n.split(" ")[1]}refresh(t){return!0}copy(){(0,w.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(U.ux))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage-id"]],decls:1,vars:1,consts:[["matRipple","","class","id-box highlight",3,"tippy","click",4,"ngIf"],["matRipple","",1,"id-box","highlight",3,"tippy","click"],[1,"id"],[1,"icon"]],template:function(t,n){1&t&&e.YNc(0,I,5,2,"div",0),2&t&&e.Q6J("ngIf",n.id)},directives:[u.O5,b.wG,g.$,c.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;text-align:end;height:100%;display:flex;align-items:center;justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),i})();var p=o(8390),m=o(587);let V=(()=>{class i{constructor(){this.isVisible="",this.isDeleted=""}agInit(t){this.params=t}isFilterActive(){return""!==this.isVisible||""!==this.isDeleted}doesFilterPass(t){let n=!1,l=!1;const a=this.params.valueGetter(t.node);return null!=a&&(n=""===this.isVisible||null!=a.IsVisible&&a.IsVisible.toString()===this.isVisible,l=""===this.isDeleted||null!=a.IsDeleted&&a.IsDeleted.toString()===this.isDeleted,n&&l)}getModel(){if(this.isFilterActive())return{filterType:"views-usage-status",isVisible:this.isVisible,isDeleted:this.isDeleted}}setModel(t){this.isVisible=t?t.isVisible:"",this.isDeleted=t?t.isDeleted:""}afterGuiAttached(t){}filterChanged(){this.params.filterChangedCallback()}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage-status-filter"]],decls:18,vars:2,consts:[[1,"title"],[3,"ngModel","ngModelChange"],["value",""],["value","true"],["value","false"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e._uU(1,"Visible"),e.qZA(),e.TgZ(2,"mat-radio-group",1),e.NdJ("ngModelChange",function(a){return n.isVisible=a})("ngModelChange",function(){return n.filterChanged()}),e.TgZ(3,"mat-radio-button",2),e._uU(4,"All"),e.qZA(),e.TgZ(5,"mat-radio-button",3),e._uU(6,"Visible"),e.qZA(),e.TgZ(7,"mat-radio-button",4),e._uU(8,"Hidden"),e.qZA()(),e.TgZ(9,"div",0),e._uU(10,"Deleted"),e.qZA(),e.TgZ(11,"mat-radio-group",1),e.NdJ("ngModelChange",function(a){return n.isDeleted=a})("ngModelChange",function(){return n.filterChanged()}),e.TgZ(12,"mat-radio-button",2),e._uU(13,"All"),e.qZA(),e.TgZ(14,"mat-radio-button",3),e._uU(15,"Is deleted"),e.qZA(),e.TgZ(16,"mat-radio-button",4),e._uU(17,"Is not deleted"),e.qZA()()),2&t&&(e.xp6(2),e.Q6J("ngModel",n.isVisible),e.xp6(9),e.Q6J("ngModel",n.isDeleted))},directives:[p.VQ,m.JJ,m.On,p.U0],styles:[".title[_ngcontent-%COMP%]{padding:12px 12px 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;overflow:hidden;padding:12px;width:160px;height:104px}"]}),i})();var y=o(6559);function Z(i){const s=i.data;return`ID: ${s.Block.Id}\nGUID: ${s.Block.Guid}`}function x(i){const s=i.data;if(null!=s.Module)return`ID: ${s.Module.Id}\nUsageId: ${s.Module.UsageId}\nTitle: ${s.Module.Title}`}function M(i){return null==i.value?"no-outline":"id-action no-padding no-outline"}function D(i){const s=i.data;if(null!=s.PageId)return`ID: ${s.PageId}`}function $(i){return null==i.value?"no-outline":"id-action no-padding no-outline"}function A(i){return null==i.value?"no-outline":"primary-action highlight"}function F(i){null!=i.value&&window.open(i.data.Url,"_blank")}function G(i){const s=i.value;if(null!=s)return`\n    <div style="height: 100%;display: flex;align-items: center;">\n      ${s.IsVisible?'<span class="material-icons-outlined">visibility</span>':'<span class="material-icons-outlined">visibility_off</span>'}\n      ${s.IsDeleted?'<span style="margin-left: 8px;" class="material-icons-outlined">delete</span>':""}\n    </div>\n  `}var h=o(5758),f=o(2977),P=o(7317),O=o(1350);let S=(()=>{class i{constructor(t,n,l){this.dialogRef=t,this.route=n,this.viewsService=l,this.viewUsage$=new d.X(null),this.viewTooltip$=new d.X(""),this.data$=new d.X(null),this.modules=v.F$,this.gridOptions=Object.assign(Object.assign({},C.f),{frameworkComponents:{viewsUsageIdComponent:T,viewsUsageStatusFilterComponent:V},columnDefs:[{field:"Block",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:Z},{field:"Module",width:76,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:x,cellClass:M},{field:"Page",width:70,headerClass:"dense",cellRenderer:"viewsUsageIdComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:D,cellClass:$},{field:"Name",flex:2,minWidth:250,sortable:!0,sort:"asc",filter:"agTextColumnFilter",valueGetter:a=>a.data.Name,cellClass:A,onCellClicked:F},{field:"Language",width:90,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:a=>a.data.Language},{field:"Status",width:80,cellClass:"icon no-outline",filter:"viewsUsageStatusFilterComponent",cellRenderer:G,valueGetter:a=>a.data.Status}]})}ngOnInit(){const t=this.route.snapshot.paramMap.get("guid");this.viewsService.getUsage(t).subscribe(n=>{const l=n[0];this.viewUsage$.next(l),this.viewTooltip$.next(`ID: ${l.Id}\nGUID: ${l.Guid}`);const N=function _(i){const s=[];for(const t of i.Blocks){0===t.Modules.length&&s.push({Block:{Id:t.Id,Guid:t.Guid}});for(const n of t.Modules)s.push({Block:{Id:t.Id,Guid:t.Guid},Module:n,PageId:n.Page.Id,Name:n.Page.Name,Url:n.Page.Url,Language:n.Page.CultureCode,Status:{IsVisible:n.Page.Visible,IsDeleted:n.IsDeleted}})}return s}(l);this.data$.next(N)})}ngOnDestroy(){this.viewUsage$.complete(),this.viewTooltip$.complete(),this.data$.complete()}closeDialog(){this.dialogRef.close()}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(h.so),e.Y36(f.gz),e.Y36(y.h))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-views-usage"]],decls:22,vars:11,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],[3,"tippy"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"dialog-description"],["href","http://r.2sxc.org/content-in-dnn","target","_blank"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),e.ALo(4,"async"),e._uU(5),e.ALo(6,"async"),e.qZA(),e.TgZ(7,"button",4),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(8,"mat-icon"),e._uU(9,"close"),e.qZA()()()(),e.TgZ(10,"p",5),e._uU(11," This shows where this view is being used. Read about the "),e.TgZ(12,"a",6),e._uU(13,"connections between DNN and 2sxc Views"),e.qZA(),e._uU(14," to make good decisions if you're doing clean-up or just want to better know what this is all about. "),e.TgZ(15,"em"),e._uU(16,"Before you get confused about some things you see here, do read the FAQ on that page."),e.qZA()(),e._UZ(17,"router-outlet"),e.TgZ(18,"div",7),e._UZ(19,"ag-grid-angular",8),e.ALo(20,"async"),e._UZ(21,"div",9),e.qZA()()),2&t){let l;e.xp6(3),e.Q6J("tippy",e.lcZ(4,5,n.viewTooltip$)),e.xp6(2),e.hij("View: ",null==(l=e.lcZ(6,7,n.viewUsage$))?null:l.Name,""),e.xp6(14),e.Q6J("rowData",e.lcZ(20,9,n.data$))("modules",n.modules)("gridOptions",n.gridOptions)}},directives:[h.uh,g.$,P.lW,c.Hw,f.lC,O.N8],pipes:[u.Ov],styles:[""]}),i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.04.00/ng-edit/projects_ng-dialogs_src_app_app-administration_sub-dialogs_views-usage_views-usage_component_ts.f8695d050f039091.js.map