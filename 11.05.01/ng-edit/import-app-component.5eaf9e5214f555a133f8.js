(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{BM85:function(e,t,i){"use strict";i.r(t),i.d(t,"ImportAppComponent",(function(){return I}));var s=i("1C3z"),n=i("BLjT"),o=i("ZEis"),c=i("8AiQ"),r=i("nYrE"),a=i("9HSk"),p=i("Qc/f");function l(e,t){1&e&&s.Qb(0,"mat-spinner",4)}function m(e,t){1&e&&(s.Vb(0,"span"),s.Oc(1,"Select file"),s.Ub())}function b(e,t){if(1&e&&(s.Vb(0,"span"),s.Oc(1),s.Ub()),2&e){var i=s.hc(2);s.Bb(1),s.Pc(i.importFile.name)}}function g(e,t){if(1&e){var i=s.Wb();s.Vb(0,"div"),s.Vb(1,"p",5),s.Oc(2," Select an app package (zip) from your computer to import an app. New apps can be downloaded on "),s.Vb(3,"a",6),s.Oc(4,"http://2sxc.org/apps"),s.Ub(),s.Oc(5,". For further help visit "),s.Vb(6,"a",7),s.Oc(7,"2sxc Help"),s.Ub(),s.Oc(8,". "),s.Ub(),s.Vb(9,"div"),s.Vb(10,"button",8),s.dc("click",(function(){return s.Dc(i),s.Bc(14).click()})),s.Mc(11,m,2,0,"span",3),s.Mc(12,b,2,1,"span",3),s.Ub(),s.Vb(13,"input",9,10),s.dc("change",(function(e){return s.Dc(i),s.hc().fileChange(e)})),s.Ub(),s.Ub(),s.Vb(15,"div",11),s.Vb(16,"button",12),s.dc("click",(function(){return s.Dc(i),s.hc().closeDialog()})),s.Oc(17,"Cancel"),s.Ub(),s.Vb(18,"button",13),s.dc("click",(function(){return s.Dc(i),s.hc().importApp()})),s.Oc(19,"Import"),s.Ub(),s.Ub(),s.Ub()}if(2&e){var n=s.hc();s.Bb(11),s.nc("ngIf",!n.importFile),s.Bb(1),s.nc("ngIf",n.importFile),s.Bb(6),s.nc("disabled",!n.importFile||n.isImporting)}}function u(e,t){1&e&&(s.Vb(0,"div",19),s.Oc(1," The import has been done. See the messages below for more information. "),s.Ub())}function f(e,t){1&e&&(s.Vb(0,"div",20),s.Oc(1," The import failed. See the messages below for more information. "),s.Ub())}var d=function(e,t,i){return{"sxc-message-warning":e,"sxc-message-success":t,"sxc-message-error":i}};function h(e,t){if(1&e&&(s.Vb(0,"div",21),s.Oc(1),s.Ub()),2&e){var i=t.$implicit;s.nc("ngClass",s.tc(2,d,0==i.MessageType,1==i.MessageType,2==i.MessageType)),s.Bb(1),s.Qc(" ",i.Text," ")}}function v(e,t){if(1&e){var i=s.Wb();s.Tb(0),s.Vb(1,"div",14),s.Mc(2,u,2,0,"div",15),s.Mc(3,f,2,0,"div",16),s.Mc(4,h,2,6,"div",17),s.Ub(),s.Vb(5,"div",11),s.Vb(6,"button",18),s.dc("click",(function(){return s.Dc(i),s.hc().closeDialog()})),s.Oc(7,"Close"),s.Ub(),s.Ub(),s.Sb()}if(2&e){var n=s.hc();s.Bb(2),s.nc("ngIf",n.importResult.Succeeded),s.Bb(1),s.nc("ngIf",!n.importResult.Succeeded),s.Bb(1),s.nc("ngForOf",n.importResult.Messages)}}var I=function(){function e(e,t){this.dialogRef=e,this.importAppService=t,this.hostClass="dialog-component",this.isImporting=!1}return e.prototype.ngOnInit=function(){},e.prototype.importApp=function(e){var t=this;this.isImporting=!0,this.importAppService.importApp(this.importFile,e).subscribe({next:function(e){if(t.isImporting=!1,t.importResult=e,t.importResult&&t.importResult.Messages&&t.importResult.Messages[0]&&0===t.importResult.Messages[0].MessageType){var i=prompt(t.importResult.Messages[0].Text+" Would you like to install it using another folder name?");i&&t.importApp(i)}},error:function(e){t.isImporting=!1}})},e.prototype.fileChange=function(e){this.importFile=e.target.files[0]},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(s.Pb(n.g),s.Pb(o.a))},e.\u0275cmp=s.Jb({type:e,selectors:[["app-import-app"]],hostVars:1,hostBindings:function(e,t){2&e&&s.Yb("className",t.hostClass)},decls:6,vars:3,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-description"],["href","http://2sxc.org/apps"],["href","http://2sxc.org/en/help?tag=import-app","target","_blank"],["mat-raised-button","","matTooltip","Open file browser",3,"click"],["type","file",1,"hide",3,"change"],["fileInput",""],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"dialog-component-content","fancy-scrollbar-light"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],["mat-raised-button","","color","accent",3,"click"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"]],template:function(e,t){1&e&&(s.Vb(0,"div",0),s.Vb(1,"div",1),s.Oc(2,"Import App"),s.Ub(),s.Ub(),s.Mc(3,l,1,0,"mat-spinner",2),s.Mc(4,g,20,3,"div",3),s.Mc(5,v,8,3,"ng-container",3)),2&e&&(s.Bb(3),s.nc("ngIf",t.isImporting),s.Bb(1),s.nc("ngIf",!t.importResult||t.importResult&&!t.importResult.Messages),s.Bb(1),s.nc("ngIf",t.importResult&&t.importResult.Messages&&!t.isImporting))},directives:[n.h,c.m,r.b,a.a,p.a,c.l,c.k],styles:[""]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.05.01/ng-edit/import-app-component.5eaf9e5214f555a133f8.js.map