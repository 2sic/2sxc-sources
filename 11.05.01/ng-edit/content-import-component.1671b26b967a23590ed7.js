(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{kp6J:function(e,t,n){"use strict";n.r(t),n.d(t,"ContentImportComponent",(function(){return k}));var i=n("D57K"),o=n("0ELX"),c=n("1C3z"),a=n("BLjT"),l=n("5/c3"),r=n("i7Fo"),s=n("8AiQ"),b=n("ZSGP"),u=n("9HSk"),f=n("Qc/f"),d=n("+raR");function p(e,t){if(1&e&&(c.Ub(0),c.Qc(1),c.Tb()),2&e){var n=c.ic();c.Bb(1),c.Sc("Step ",n.viewStateSelected," of 3")}}function m(e,t){1&e&&(c.Wb(0,"span"),c.Qc(1,"Select file"),c.Vb())}function g(e,t){if(1&e&&(c.Wb(0,"span"),c.Qc(1),c.Vb()),2&e){var n=c.ic(2);c.Bb(1),c.Rc(n.formValues.file.name)}}function v(e,t){if(1&e){var n=c.Xb();c.Wb(0,"form",9,10),c.Wb(2,"div",11),c.Wb(3,"div"),c.Wb(4,"button",12),c.ec("click",(function(){return c.Fc(n),c.Dc(8).click()})),c.Oc(5,m,2,0,"span",2),c.Oc(6,g,2,1,"span",2),c.Vb(),c.Wb(7,"input",13,14),c.ec("change",(function(e){return c.Fc(n),c.ic().fileChange(e)})),c.Vb(),c.Vb(),c.Wb(9,"div"),c.Wb(10,"p",15),c.Qc(11,"References to pages / files"),c.Vb(),c.Wb(12,"mat-radio-group",16),c.ec("ngModelChange",(function(e){return c.Fc(n),c.ic().formValues.resourcesReferences=e})),c.Wb(13,"mat-radio-button",17),c.Qc(14," Import links as written in the file (for example /Portals/...) "),c.Vb(),c.Wb(15,"mat-radio-button",18),c.Qc(16," Try to resolve paths to references "),c.Vb(),c.Vb(),c.Vb(),c.Wb(17,"div"),c.Wb(18,"p",15),c.Qc(19,"Clear all other entities"),c.Vb(),c.Wb(20,"mat-radio-group",19),c.ec("ngModelChange",(function(e){return c.Fc(n),c.ic().formValues.clearEntities=e})),c.Wb(21,"mat-radio-button",20),c.Qc(22," Keep all entities not found in import "),c.Vb(),c.Wb(23,"mat-radio-button",21),c.Qc(24," Remove all entities not found in import "),c.Vb(),c.Vb(),c.Vb(),c.Wb(25,"p",22),c.Qc(26,"Remember to backup your DNN first!"),c.Vb(),c.Vb(),c.Wb(27,"div",23),c.Wb(28,"button",24),c.ec("click",(function(){return c.Fc(n),c.ic().closeDialog()})),c.Qc(29,"Cancel"),c.Vb(),c.Wb(30,"button",25),c.ec("click",(function(){return c.Fc(n),c.ic().evaluateContent()})),c.Qc(31," Preview Import "),c.Vb(),c.Vb(),c.Vb()}if(2&e){var i=c.ic();c.Bb(5),c.oc("ngIf",!i.formValues.file),c.Bb(1),c.oc("ngIf",i.formValues.file),c.Bb(6),c.oc("ngModel",i.formValues.resourcesReferences),c.Bb(8),c.oc("ngModel",i.formValues.clearEntities),c.Bb(10),c.oc("disabled",!i.formValues.file||!i.formValues.file.name)}}function h(e,t){1&e&&(c.Wb(0,"p",26),c.Qc(1,"Please wait while processing..."),c.Vb())}function V(e,t){if(1&e&&(c.Wb(0,"div",29),c.Wb(1,"p",30),c.Qc(2),c.Vb(),c.Wb(3,"p",30),c.Qc(4,"File contains:"),c.Vb(),c.Wb(5,"ul",31),c.Wb(6,"li"),c.Qc(7),c.Vb(),c.Wb(8,"li"),c.Qc(9),c.Vb(),c.Wb(10,"li"),c.Qc(11),c.Vb(),c.Vb(),c.Wb(12,"p",30),c.Qc(13,"If you press Import, it will:"),c.Vb(),c.Wb(14,"ul",31),c.Wb(15,"li"),c.Qc(16),c.Vb(),c.Wb(17,"li"),c.Qc(18),c.Vb(),c.Wb(19,"li"),c.Qc(20),c.Vb(),c.Wb(21,"li"),c.Qc(22),c.Vb(),c.Vb(),c.Wb(23,"p",22),c.Qc(24,"Note: The import validates much data and may take several minutes."),c.Vb(),c.Vb()),2&e){var n=c.ic(3);c.Bb(2),c.Sc("Try to import file '",n.formValues.file.name,"'"),c.Bb(5),c.Sc("",n.evaluationResult.Detail.DocumentElementsCount," content-items (records/entities)"),c.Bb(2),c.Sc("",n.evaluationResult.Detail.LanguagesInDocumentCount," languages"),c.Bb(2),c.Tc("",n.evaluationResult.Detail.AttributeNamesInDocument.length," columns: ",n.evaluationResult.Detail.AttributeNamesInDocument.join(", "),""),c.Bb(5),c.Sc("Create ",n.evaluationResult.Detail.AmountOfEntitiesCreated," content-items"),c.Bb(2),c.Sc("Update ",n.evaluationResult.Detail.AmountOfEntitiesUpdated," content-items"),c.Bb(2),c.Sc("Delete ",n.evaluationResult.Detail.AmountOfEntitiesDeleted," content-items"),c.Bb(2),c.Tc("Ignore ",n.evaluationResult.Detail.AttributeNamesNotImported.length," columns: ",n.evaluationResult.Detail.AttributeNamesNotImported.join(", "),"")}}function S(e,t){if(1&e&&(c.Wb(0,"div"),c.Wb(1,"i"),c.Qc(2),c.Vb(),c.Vb()),2&e){var n=c.ic().$implicit;c.Bb(2),c.Sc("Details: ",n.ErrorDetail,"")}}function W(e,t){if(1&e&&(c.Wb(0,"div"),c.Wb(1,"i"),c.Qc(2),c.Vb(),c.Vb()),2&e){var n=c.ic().$implicit;c.Bb(2),c.Sc("Line-no: ",n.LineNumber,"")}}function w(e,t){if(1&e&&(c.Wb(0,"div"),c.Wb(1,"i"),c.Qc(2),c.Vb(),c.Vb()),2&e){var n=c.ic().$implicit;c.Bb(2),c.Sc("Line-details: ",n.LineDetail,"")}}function C(e,t){if(1&e&&(c.Wb(0,"li"),c.Wb(1,"div"),c.Qc(2),c.Vb(),c.Oc(3,S,3,1,"div",2),c.Oc(4,W,3,1,"div",2),c.Oc(5,w,3,1,"div",2),c.Vb()),2&e){var n=t.$implicit,i=c.ic(4);c.Bb(2),c.Rc(i.errors[n.ErrorCode]),c.Bb(1),c.oc("ngIf",n.ErrorDetail),c.Bb(1),c.oc("ngIf",n.LineNumber),c.Bb(1),c.oc("ngIf",n.LineDetail)}}function Q(e,t){if(1&e&&(c.Wb(0,"div",29),c.Wb(1,"p",30),c.Qc(2),c.Vb(),c.Wb(3,"ul",31),c.Oc(4,C,6,4,"li",32),c.Vb(),c.Vb()),2&e){var n=c.ic(3);c.Bb(2),c.Sc("Try to import file '",n.formValues.file.name,"'"),c.Bb(2),c.oc("ngForOf",n.evaluationResult.Detail)}}function B(e,t){if(1&e){var n=c.Xb();c.Ub(0),c.Oc(1,V,25,10,"div",27),c.Oc(2,Q,5,2,"div",27),c.Wb(3,"div",28),c.Wb(4,"button",24),c.ec("click",(function(){return c.Fc(n),c.ic(2).back()})),c.Qc(5,"Back"),c.Vb(),c.Wb(6,"button",25),c.ec("click",(function(){return c.Fc(n),c.ic(2).importContent()})),c.Qc(7," Import "),c.Vb(),c.Vb(),c.Tb()}if(2&e){var i=c.ic(2);c.Bb(1),c.oc("ngIf",i.evaluationResult.Succeeded),c.Bb(1),c.oc("ngIf",!i.evaluationResult.Succeeded),c.Bb(4),c.oc("disabled",!i.evaluationResult.Succeeded)}}function O(e,t){if(1&e&&(c.Ub(0),c.Oc(1,B,8,3,"ng-container",2),c.Tb()),2&e){var n=c.ic();c.Bb(1),c.oc("ngIf",n.evaluationResult)}}function I(e,t){1&e&&(c.Wb(0,"p"),c.Qc(1,"Import done."),c.Vb())}function R(e,t){1&e&&(c.Wb(0,"p"),c.Qc(1,"Import failed."),c.Vb())}function y(e,t){if(1&e&&(c.Wb(0,"div",26),c.Oc(1,I,2,0,"p",2),c.Oc(2,R,2,0,"p",2),c.Vb()),2&e){var n=c.ic(2);c.Bb(1),c.oc("ngIf",n.importResult.Succeeded),c.Bb(1),c.oc("ngIf",!n.importResult.Succeeded)}}function D(e,t){if(1&e){var n=c.Xb();c.Wb(0,"div"),c.Oc(1,y,3,2,"div",33),c.Wb(2,"div",28),c.Wb(3,"button",34),c.ec("click",(function(){return c.Fc(n),c.ic().closeDialog()})),c.Qc(4,"Close"),c.Vb(),c.Vb(),c.Vb()}if(2&e){var i=c.ic();c.Bb(1),c.oc("ngIf",i.importResult)}}var k=function(){function e(e,t,n){this.dialogRef=e,this.route=t,this.contentImportService=n,this.hostClass="dialog-component",this.errors={0:"Unknown error occured.",1:"Selected content-type does not exist.",2:"Document is not a valid XML file.",3:"Selected content-type does not match the content-type in the XML file.",4:"The language is not supported.",5:"The document does not specify all languages for all entities.",6:"Language reference cannot be parsed, the language is not supported.",7:"Language reference cannot be parsed, the read-write protection is not supported.",8:"Value cannot be read, because of it has an invalid format."},this.viewStates={waiting:0,default:1,evaluated:2,imported:3},this.viewStateSelected=this.viewStates.default,this.formValues={defaultLanguage:sessionStorage.getItem(o.k),contentType:this.route.snapshot.paramMap.get("contentTypeStaticName"),file:null,resourcesReferences:"Keep",clearEntities:"None"}}return e.prototype.ngOnInit=function(){},e.prototype.evaluateContent=function(){return Object(i.b)(this,void 0,void 0,(function(){var e=this;return Object(i.e)(this,(function(t){switch(t.label){case 0:return this.viewStateSelected=this.viewStates.waiting,[4,this.contentImportService.evaluateContent(this.formValues)];case 1:return[2,t.sent().subscribe((function(t){e.evaluationResult=t,e.viewStateSelected=e.viewStates.evaluated}))]}}))}))},e.prototype.importContent=function(){return Object(i.b)(this,void 0,void 0,(function(){var e=this;return Object(i.e)(this,(function(t){switch(t.label){case 0:return this.viewStateSelected=this.viewStates.waiting,[4,this.contentImportService.importContent(this.formValues)];case 1:return[2,t.sent().subscribe((function(t){e.importResult=t,e.viewStateSelected=e.viewStates.imported}))]}}))}))},e.prototype.back=function(){this.viewStateSelected=this.viewStates.default,this.evaluationResult=void 0},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.fileChange=function(e){this.formValues.file=e.target.files[0]},e.\u0275fac=function(t){return new(t||e)(c.Qb(a.g),c.Qb(l.a),c.Qb(r.a))},e.\u0275cmp=c.Kb({type:e,selectors:[["app-content-import"]],hostVars:1,hostBindings:function(e,t){2&e&&c.Zb("className",t.hostClass)},decls:14,vars:6,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[4,"ngIf"],[1,"dialog-description"],["href","http://2sxc.org/help","target","_blank"],[3,"ngSwitch"],["class","dialog-form",4,"ngSwitchCase"],["class","progress-message",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"dialog-form"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],["mat-raised-button","","matTooltip","Open file browser",3,"click"],["type","file",1,"hide",3,"change"],["fileInput",""],[1,"field-label"],["name","ResourcesReferences",3,"ngModel","ngModelChange"],["value","Keep"],["value","Resolve"],["name","ClearEntities",3,"ngModel","ngModelChange"],["value","None"],["value","All"],[1,"hint"],[1,"dialog-form-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[1,"progress-message"],["class","dialog-component-content fancy-scrollbar-light",4,"ngIf"],[1,"dialog-component-actions"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"evaluation__title"],[1,"evaluation__content"],[4,"ngFor","ngForOf"],["class","progress-message",4,"ngIf"],["mat-raised-button","","color","accent",3,"click"]],template:function(e,t){1&e&&(c.Wb(0,"div",0),c.Wb(1,"div",1),c.Qc(2," Import Content / Data "),c.Oc(3,p,2,1,"ng-container",2),c.Vb(),c.Vb(),c.Wb(4,"p",3),c.Qc(5," This will import content-items into 2sxc. It requires that you already defined the content-type before you try importing, and that you created the import-file using the template provided by the Export. Please visit "),c.Wb(6,"a",4),c.Qc(7,"http://2sxc.org/help"),c.Vb(),c.Qc(8," for more instructions.\n"),c.Vb(),c.Ub(9,5),c.Oc(10,v,32,5,"form",6),c.Oc(11,h,2,0,"p",7),c.Oc(12,O,2,1,"ng-container",8),c.Oc(13,D,5,1,"div",8),c.Tb()),2&e&&(c.Bb(3),c.oc("ngIf",t.viewStateSelected>0),c.Bb(6),c.oc("ngSwitch",t.viewStateSelected),c.Bb(1),c.oc("ngSwitchCase",1),c.Bb(1),c.oc("ngSwitchCase",0),c.Bb(1),c.oc("ngSwitchCase",2),c.Bb(1),c.oc("ngSwitchCase",3))},directives:[a.h,s.m,s.o,s.p,b.u,b.m,b.n,u.a,f.a,d.b,b.l,b.o,d.a,s.l],styles:[".field-label[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0}.mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:8px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px;font-size:14px}.hint[_ngcontent-%COMP%]{margin-top:24px;margin-bottom:16px}.hint[_ngcontent-%COMP%], .progress-message[_ngcontent-%COMP%]{font-size:18px}.evaluation__title[_ngcontent-%COMP%]{font-size:18px;margin:24px 0 0;font-weight:700}.evaluation__content[_ngcontent-%COMP%]{font-size:14px}.evaluation__content[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:2px 0}"]}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.05.00/ng-edit/content-import-component.1671b26b967a23590ed7.js.map