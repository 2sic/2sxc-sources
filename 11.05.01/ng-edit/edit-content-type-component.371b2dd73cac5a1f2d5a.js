(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{YLeX:function(t,e,n){"use strict";n.r(e);var o=n("D57K"),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.d)(e,t),e}(function(){return function(){}}()),i=n("o9tz"),a=/(^[A-Za-z][A-Za-z0-9]+$)|(^@[A-Za-z][A-Za-z0-9-]*$)/,r=n("1C3z"),s=n("BLjT"),p=n("5/c3"),b=n("S36y"),l=n("2pW/"),d=n("8AiQ"),u=n("ZSGP"),f=n("hOvr"),h=n("TDrE"),m=n("FONI"),g=n("LuBX"),y=n("OeRG"),v=n("9HSk"),S=n("Qc/f"),U=n("Uk43"),O=n("Zfm5"),V=n("r4gC");function T(t,e){1&t&&(r.Vb(0,"app-field-hint",25),r.Oc(1,"This field is required"),r.Ub()),2&t&&r.nc("isError",!0)}function k(t,e){if(1&t&&(r.Vb(0,"app-field-hint",25),r.Oc(1),r.Ub()),2&t){var n=r.hc(3);r.nc("isError",!0),r.Bb(1),r.Pc(n.contentTypeNameError)}}function B(t,e){if(1&t&&(r.Tb(0),r.Mc(1,T,2,1,"app-field-hint",24),r.Mc(2,k,2,2,"app-field-hint",24),r.Sb()),2&t){r.hc();var n=r.Bc(8);r.Bb(1),r.nc("ngIf",n.errors.required),r.Bb(1),r.nc("ngIf",n.errors.pattern)}}function M(t,e){if(1&t&&(r.Vb(0,"mat-option",26),r.Oc(1),r.Ub()),2&t){var n=e.$implicit;r.nc("value",n.value),r.Bb(1),r.Qc("",n.name," ")}}function N(t,e){if(1&t){var n=r.Wb();r.Vb(0,"mat-icon",27),r.dc("click",(function(t){return r.Dc(n),r.hc(2).unlockScope(t)})),r.Oc(1,"lock"),r.Ub()}}function C(t,e){if(1&t){var n=r.Wb();r.Vb(0,"mat-icon",27),r.dc("click",(function(t){return r.Dc(n),r.hc(2).unlockScope(t)})),r.Oc(1,"lock_open"),r.Ub()}}function I(t,e){if(1&t&&(r.Vb(0,"div",6),r.Vb(1,"h3"),r.Oc(2,"Shared Content Type (Ghost)"),r.Ub(),r.Vb(3,"p"),r.Oc(4,"Note: this can't be edited in the UI, for now if you really know what you're doing, do it in the DB"),r.Ub(),r.Vb(5,"p"),r.Oc(6),r.Ub(),r.Ub()),2&t){var n=r.hc(2);r.Bb(6),r.Qc("Uses Type Definition of: ",n.contentType.SharedDefId,"")}}function w(t,e){if(1&t){var n=r.Wb();r.Vb(0,"form",3,4),r.Vb(2,"div",5),r.Vb(3,"div",6),r.Vb(4,"mat-form-field",7),r.Vb(5,"mat-label"),r.Oc(6,"Name"),r.Ub(),r.Vb(7,"input",8,9),r.dc("ngModelChange",(function(t){return r.Dc(n),r.hc().contentType.Name=t})),r.Ub(),r.Ub(),r.Mc(9,B,3,2,"ng-container",10),r.Ub(),r.Vb(10,"mat-accordion"),r.Vb(11,"mat-expansion-panel",11),r.Vb(12,"mat-expansion-panel-header"),r.Vb(13,"mat-panel-title"),r.Oc(14,"Advanced"),r.Ub(),r.Qb(15,"mat-panel-description"),r.Ub(),r.Vb(16,"div",6),r.Vb(17,"mat-form-field",7),r.Vb(18,"mat-label"),r.Oc(19,"Description"),r.Ub(),r.Qb(20,"input",12),r.Ub(),r.Ub(),r.Vb(21,"div",6),r.Vb(22,"mat-form-field",7),r.Vb(23,"mat-label"),r.Oc(24,"Scope"),r.Ub(),r.Vb(25,"mat-select",13),r.dc("selectionChange",(function(t){return r.Dc(n),r.hc().changeScope(t)})),r.Mc(26,M,2,2,"mat-option",14),r.Vb(27,"mat-option",15),r.Oc(28,"Other..."),r.Ub(),r.Ub(),r.Vb(29,"button",16),r.Mc(30,N,2,0,"mat-icon",17),r.Mc(31,C,2,0,"mat-icon",17),r.Ub(),r.Ub(),r.Vb(32,"app-field-hint"),r.Oc(33," The scope should almost never be changed - "),r.Vb(34,"a",18),r.Oc(35,"see help"),r.Ub(),r.Ub(),r.Ub(),r.Vb(36,"div",6),r.Vb(37,"mat-form-field",7),r.Vb(38,"mat-label"),r.Oc(39,"Static Name"),r.Ub(),r.Qb(40,"input",19),r.Ub(),r.Ub(),r.Mc(41,I,7,1,"div",20),r.Ub(),r.Ub(),r.Ub(),r.Vb(42,"div",21),r.Vb(43,"button",22),r.dc("click",(function(){return r.Dc(n),r.hc().closeDialog()})),r.Oc(44,"Cancel"),r.Ub(),r.Vb(45,"button",23),r.dc("click",(function(){return r.Dc(n),r.hc().save()})),r.Oc(46,"Save"),r.Ub(),r.Ub(),r.Ub()}if(2&t){var o=r.Bc(1),c=r.Bc(8),i=r.hc();r.Bb(7),r.nc("pattern",i.contentTypeNamePattern)("ngModel",i.contentType.Name),r.Bb(2),r.nc("ngIf",c.touched&&c.errors),r.Bb(1),r.nc("@.disabled",i.disableAnimation),r.Bb(10),r.nc("ngModel",i.contentType.Description),r.Bb(5),r.nc("ngModel",i.contentType.Scope)("disabled",i.lockScope),r.Bb(1),r.nc("ngForOf",i.scopeOptions),r.Bb(3),r.nc("matTooltip",i.lockScope?"Unlock":"Lock"),r.Bb(1),r.nc("ngIf",i.lockScope),r.Bb(1),r.nc("ngIf",!i.lockScope),r.Bb(9),r.nc("ngModel",i.contentType.StaticName),r.Bb(1),r.nc("ngIf",i.contentType.SharedDefId),r.Bb(4),r.nc("disabled",!o.form.valid)}}n.d(e,"EditContentTypeComponent",(function(){return D}));var D=function(){function t(t,e,n,o){this.dialogRef=t,this.route=e,this.contentTypesService=n,this.snackBar=o,this.hostClass="dialog-component",this.lockScope=!0,this.contentTypeNamePattern=a,this.contentTypeNameError="Standard letters and numbers are allowed. Must start with a letter.",this.disableAnimation=!0,this.scope=this.route.snapshot.paramMap.get("scope"),this.id=parseInt(this.route.snapshot.paramMap.get("id"),10)}return t.prototype.ngAfterViewInit=function(){var t=this;setTimeout((function(){return t.disableAnimation=!1}))},t.prototype.ngOnInit=function(){this.fetchScopes(),this.id?this.fetchContentType():this.contentType=Object(o.a)(Object(o.a)({},new c),{StaticName:"",Name:"",Description:"",Scope:this.scope,ChangeStaticName:!1,NewStaticName:""})},t.prototype.changeScope=function(t){var e=t.value;"Other"===e&&((e=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason."))?this.scopeOptions.find((function(t){return t.value===e}))||this.scopeOptions.push({name:e,value:e}):e=i.a.scopes.default.value),this.contentType.Scope=e},t.prototype.unlockScope=function(t){t.stopPropagation(),this.lockScope=!this.lockScope,this.lockScope&&(this.contentType.Scope=this.scope)},t.prototype.save=function(){var t=this;this.snackBar.open("Saving..."),this.contentTypesService.save(this.contentType).subscribe((function(e){t.snackBar.open("Saved",null,{duration:2e3}),t.closeDialog()}))},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchScopes=function(){var t=this;this.contentTypesService.getScopes().subscribe((function(e){t.scopeOptions=e}))},t.prototype.fetchContentType=function(){var t=this;this.contentTypesService.retrieveContentTypes(this.scope).subscribe((function(e){var n=e.find((function(e){return e.Id===t.id}));t.contentType=Object(o.a)(Object(o.a)({},n),{ChangeStaticName:!1,NewStaticName:n.StaticName})}))},t.\u0275fac=function(e){return new(e||t)(r.Pb(s.g),r.Pb(p.a),r.Pb(b.a),r.Pb(l.b))},t.\u0275cmp=r.Jb({type:t,selectors:[["app-edit-content-type"]],hostVars:1,hostBindings:function(t,e){2&t&&r.Yb("className",e.hostClass)},decls:4,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],["class","dialog-form",4,"ngIf"],[1,"dialog-form"],["ngForm","ngForm"],[1,"dialog-form-content","fancy-scrollbar-light"],[1,"edit-input"],["appearance","standard","color","accent"],["matInput","","type","text","name","Name","required","",3,"pattern","ngModel","ngModelChange"],["name","ngModel"],[4,"ngIf"],["expanded","false"],["matInput","","type","text","name","Description","disabled","",3,"ngModel"],["name","Scope",3,"ngModel","disabled","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["value","Other"],["mat-icon-button","","type","button","matSuffix","",3,"matTooltip"],[3,"click",4,"ngIf"],["href","http://2sxc.org/help?tag=scope","target","_blank","appClickStopPropagation",""],["matInput","","type","text","name","StaticName","disabled","",3,"ngModel"],["class","edit-input",4,"ngIf"],[1,"dialog-form-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],[3,"isError",4,"ngIf"],[3,"isError"],[3,"value"],[3,"click"]],template:function(t,e){1&t&&(r.Vb(0,"div",0),r.Vb(1,"div",1),r.Oc(2),r.Ub(),r.Ub(),r.Mc(3,w,47,14,"form",2)),2&t&&(r.Bb(2),r.Pc(e.id?"Edit Content Type":"New Content Type"),r.Bb(1),r.nc("ngIf",e.contentType))},directives:[s.h,d.m,u.u,u.m,u.n,f.c,f.g,h.b,u.b,u.s,u.q,u.l,u.o,m.a,m.c,m.e,m.f,m.d,g.a,d.l,y.l,v.a,f.h,S.a,U.a,O.a,V.a],styles:[".edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.mat-hint[_ngcontent-%COMP%]{font-size:12px}.mat-accordion[_ngcontent-%COMP%]{padding-bottom:8px;display:block}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.05.01/ng-edit/edit-content-type-component.371b2dd73cac5a1f2d5a.js.map