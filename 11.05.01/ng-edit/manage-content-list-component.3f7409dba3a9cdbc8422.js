(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{EqWC:function(t,e,n){"use strict";n.r(e),n.d(e,"ManageContentListComponent",(function(){return P}));var i=n("D57K"),o=n("5/c3"),c=n("9Saw"),r=n("LR82"),a=n("z5yO"),s=n("W/Ou"),d=n("Jg5f"),p=n("QagP"),b=n("uuTa"),u=n("1C3z"),l=n("BLjT"),h=n("PlBB"),g=n("2pW/"),f=n("8AiQ"),m=n("9HSk"),v=n("Qc/f"),O=n("r4gC"),x=n("kVtj");function k(t,e){if(1&t){var n=u.Wb();u.Tb(0),u.Vb(1,"span"),u.Oc(2),u.Ub(),u.Vb(3,"button",11),u.dc("click",(function(){return u.Dc(n),u.hc(2).editHeader()})),u.Vb(4,"mat-icon"),u.Oc(5,"edit"),u.Ub(),u.Ub(),u.Sb()}if(2&t){var i=u.hc(2);u.Bb(2),u.Pc(i.header.Title)}}function C(t,e){1&t&&(u.Tb(0),u.Oc(1,"(this list has no header)"),u.Sb())}function y(t,e){if(1&t&&(u.Tb(0),u.Vb(1,"p",10),u.Oc(2," You can manage the list header here (if it is defined): "),u.Ub(),u.Vb(3,"p",10),u.Mc(4,k,6,1,"ng-container",3),u.Mc(5,C,2,0,"ng-container",3),u.Ub(),u.Sb()),2&t){var n=u.hc();u.Bb(4),u.nc("ngIf",n.header.Type),u.Bb(1),u.nc("ngIf",!n.header.Type)}}function _(t,e){if(1&t){var n=u.Wb();u.Vb(0,"div"),u.Vb(1,"button",16),u.dc("click",(function(){u.Dc(n);var t=u.hc().$implicit;return u.hc().editItem(t.Id)})),u.Vb(2,"mat-icon"),u.Oc(3,"edit"),u.Ub(),u.Ub(),u.Ub()}}function M(t,e){if(1&t&&(u.Vb(0,"div",12),u.Vb(1,"div",13),u.Vb(2,"mat-icon",14),u.Oc(3,"drag_handle"),u.Ub(),u.Vb(4,"span",15),u.Oc(5),u.Ub(),u.Ub(),u.Mc(6,_,4,0,"div",3),u.Ub()),2&t){var n=e.$implicit;u.Bb(5),u.Rc("",n.Title," (",n.Id,")"),u.Bb(1),u.nc("ngIf",0!==n.Id)}}var P=function(){function t(t,e,n,i,o){this.dialogRef=t,this.contentGroupService=e,this.route=n,this.router=i,this.snackBar=o,this.hostClass="dialog-component",this.subscription=new r.a,this.contentGroup={id:null,guid:this.route.snapshot.paramMap.get("guid"),part:this.route.snapshot.paramMap.get("part"),index:parseInt(this.route.snapshot.paramMap.get("index"),10)}}return t.prototype.ngOnInit=function(){this.fetchList(),this.fetchHeader(),this.refreshOnChildClosed()},t.prototype.ngOnDestroy=function(){this.subscription.unsubscribe()},t.prototype.saveList=function(){var t=this;this.snackBar.open("Saving..."),this.contentGroupService.saveList(this.contentGroup,this.items).subscribe((function(e){t.snackBar.open("Saved"),t.closeDialog()}))},t.prototype.editHeader=function(){var t={items:[{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listcontent",Add:0===this.header.Id}},{Group:{Guid:this.contentGroup.guid,Index:0,Part:"listpresentation",Add:0===this.header.Id}}]},e=Object(b.a)(t);this.router.navigate(["edit/"+e],{relativeTo:this.route})},t.prototype.editItem=function(t){var e={items:[{EntityId:t}]},n=Object(b.a)(e);this.router.navigate(["edit/"+n],{relativeTo:this.route})},t.prototype.drop=function(t){Object(c.d)(this.items,t.previousIndex,t.currentIndex)},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.fetchList=function(){var t=this;this.contentGroupService.getList(this.contentGroup).subscribe((function(e){t.items=e}))},t.prototype.fetchHeader=function(){var t=this;this.contentGroupService.getHeader(this.contentGroup).subscribe((function(e){t.header=e}))},t.prototype.refreshOnChildClosed=function(){var t=this;this.subscription.add(this.router.events.pipe(Object(a.a)((function(t){return t instanceof o.b})),Object(s.a)(!!this.route.snapshot.firstChild),Object(d.a)((function(){return!!t.route.snapshot.firstChild})),Object(p.a)(),Object(a.a)((function(t){var e=Object(i.f)(t,2);return e[0]&&!e[1]}))).subscribe((function(){t.fetchList(),t.fetchHeader()})))},t.\u0275fac=function(e){return new(e||t)(u.Pb(l.g),u.Pb(h.a),u.Pb(o.a),u.Pb(o.c),u.Pb(g.b))},t.\u0275cmp=u.Jb({type:t,selectors:[["app-manage-content-list"]],hostVars:1,hostBindings:function(t,e){2&t&&u.Yb("className",e.hostClass)},decls:15,vars:2,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],[1,"dialog-component-content","fancy-scrollbar-light"],[4,"ngIf"],[1,"dialog-description","sort-title"],["cdkDropList","",1,"dnd-list",3,"cdkDropListDropped"],["class","dnd-item","cdkDrag","",4,"ngFor","ngForOf"],[1,"dialog-component-actions"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"click"],[1,"dialog-description"],["mat-icon-button","","matTooltip","Edit header",3,"click"],["cdkDrag","",1,"dnd-item"],[1,"dnd-item__title"],["matTooltip","Drag to reorder the list",1,"dnd-item__title-icon"],[1,"dnd-item__title-text"],["mat-icon-button","","matTooltip","Edit item","appMousedownStopPropagation","",3,"click"]],template:function(t,e){1&t&&(u.Vb(0,"div",0),u.Vb(1,"div",1),u.Oc(2,"Manage content-item lists"),u.Ub(),u.Ub(),u.Qb(3,"router-outlet"),u.Vb(4,"div",2),u.Mc(5,y,6,2,"ng-container",3),u.Vb(6,"p",4),u.Oc(7,"Sort the items by dragging as you need, then save:"),u.Ub(),u.Vb(8,"div",5),u.dc("cdkDropListDropped",(function(t){return e.drop(t)})),u.Mc(9,M,7,3,"div",6),u.Ub(),u.Ub(),u.Vb(10,"div",7),u.Vb(11,"button",8),u.dc("click",(function(){return e.closeDialog()})),u.Oc(12,"Cancel"),u.Ub(),u.Vb(13,"button",9),u.dc("click",(function(){return e.saveList()})),u.Oc(14,"Save"),u.Ub(),u.Ub()),2&t&&(u.Bb(5),u.nc("ngIf",e.header),u.Bb(4),u.nc("ngForOf",e.items))},directives:[l.h,o.e,f.m,c.b,f.l,m.a,v.a,O.a,c.a,x.a],styles:[".sort-title[_ngcontent-%COMP%]{padding-top:16px}.dnd-list[_ngcontent-%COMP%]{margin:16px 0;border:1px solid #ccc;border-radius:4px;overflow:hidden}.dnd-item[_ngcontent-%COMP%]{cursor:move;height:40px;border-bottom:1px solid #ccc;padding:0 8px;display:flex;align-items:center;justify-content:space-between;background:#fff;box-sizing:border-box;font-size:14px}.dnd-item[_ngcontent-%COMP%]:last-child{border:none}.dnd-item__title[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden}.dnd-item__title-icon[_ngcontent-%COMP%]{margin-right:8px;opacity:.4}.dnd-item__title-text[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%], .dnd-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dnd-item[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.05.01/ng-edit/manage-content-list-component.3f7409dba3a9cdbc8422.js.map