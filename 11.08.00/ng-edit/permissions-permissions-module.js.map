{"version":3,"sources":["../edit/shared/index.ts","./src/app/permissions/permissions.component.html","./src/app/permissions/permissions-routing.module.ts","./src/app/permissions/ag-grid-components/permissions-actions/permissions-actions.component.scss","./src/app/permissions/ag-grid-components/permissions-actions/permissions-actions.component.ts","./src/app/permissions/ag-grid-components/permissions-actions/permissions-actions.component.html","./src/app/permissions/services/permissions.service.ts","./src/app/permissions/permissions.component.ts","./src/app/permissions/permissions-dialog.config.ts","./src/app/permissions/permissions.component.scss","../edit/index.ts","./src/app/permissions/permissions.module.ts","../edit/shared/services/index.ts"],"names":[],"mappings":"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","file":"permissions-permissions-module.js","sourcesContent":["\r\nexport * from './services';\r\n","export default \"<div class=\\\"nav-component-wrapper\\\">\\r\\n  <div mat-dialog-title>\\r\\n    <div class=\\\"dialog-title-box\\\">\\r\\n      <div>Permissions</div>\\r\\n      <button mat-icon-button matTooltip=\\\"Close dialog\\\" (click)=\\\"closeDialog()\\\">\\r\\n        <mat-icon>close</mat-icon>\\r\\n      </button>\\r\\n    </div>\\r\\n  </div>\\r\\n\\r\\n  <router-outlet></router-outlet>\\r\\n\\r\\n  <div class=\\\"grid-wrapper\\\">\\r\\n    <ag-grid-angular class=\\\"ag-theme-material\\\" [rowData]=\\\"permissions$ | async\\\" [modules]=\\\"modules\\\"\\r\\n      [gridOptions]=\\\"gridOptions\\\">\\r\\n    </ag-grid-angular>\\r\\n\\r\\n    <button mat-fab mat-elevation-z24 class=\\\"grid-fab\\\" matTooltip=\\\"Create a new permission\\\"\\r\\n      (click)=\\\"editPermission(null)\\\">\\r\\n      <mat-icon>add</mat-icon>\\r\\n    </button>\\r\\n  </div>\\r\\n</div>\\r\\n\";","import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { edit, refreshEdit } from '../../../../edit/edit.matcher';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '', component: DialogEntryComponent, data: { dialog: permissionsDialog }, children: [\r\n      {\r\n        matcher: edit,\r\n        loadChildren: () => import('../../../../edit/edit.module').then(m => m.EditModule)\r\n      },\r\n      {\r\n        matcher: refreshEdit,\r\n        loadChildren: () => import('../../../../edit/refresh-edit.module').then(m => m.RefreshEditModule)\r\n      },\r\n    ]\r\n  },\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PermissionsRoutingModule { }\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9qZWN0cy9uZy1kaWFsb2dzL3NyYy9hcHAvcGVybWlzc2lvbnMvYWctZ3JpZC1jb21wb25lbnRzL3Blcm1pc3Npb25zLWFjdGlvbnMvcGVybWlzc2lvbnMtYWN0aW9ucy5jb21wb25lbnQuc2NzcyJ9 */\";","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { Permission } from '../../models/permission.model';\r\nimport { PermissionsActionsParams } from './permissions-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-permissions-actions',\r\n  templateUrl: './permissions-actions.component.html',\r\n  styleUrls: ['./permissions-actions.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class PermissionsActionsComponent implements ICellRendererAngularComp {\r\n  private params: PermissionsActionsParams;\r\n\r\n  agInit(params: PermissionsActionsParams) {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deletePermission() {\r\n    const permission: Permission = this.params.data;\r\n    this.params.onDelete(permission);\r\n  }\r\n}\r\n","export default \"<div class=\\\"actions-component\\\">\\r\\n  <div class=\\\"like-button highlight\\\" matRipple matTooltip=\\\"Delete\\\" (click)=\\\"deletePermission()\\\">\\r\\n    <mat-icon>delete</mat-icon>\\r\\n  </div>\\r\\n</div>\\r\\n\";","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { EntitiesService } from '../../content-items/services/entities.service';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { Permission } from '../models/permission.model';\r\nimport { MetadataService } from './metadata.service';\r\n\r\n@Injectable()\r\nexport class PermissionsService {\r\n  constructor(private metadataService: MetadataService, private entitiesService: EntitiesService) { }\r\n\r\n  getAll(targetType: number, keyType: string, key: string) {\r\n    return this.metadataService.getMetadata(targetType, keyType, key, eavConstants.contentTypes.permissions) as Observable<Permission[]>;\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.entitiesService.delete(eavConstants.contentTypes.permissions, id, false) as Observable<null>;\r\n  }\r\n}\r\n","import { AllCommunityModules, CellClickedEvent, GridOptions } from '@ag-grid-community/all-modules';\r\nimport { ChangeDetectionStrategy, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { IdFieldComponent } from '../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants, EavMetadataKey } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../shared/models/edit-form.model';\r\nimport { PermissionsActionsComponent } from './ag-grid-components/permissions-actions/permissions-actions.component';\r\nimport { PermissionsActionsParams } from './ag-grid-components/permissions-actions/permissions-actions.models';\r\nimport { Permission } from './models/permission.model';\r\nimport { PermissionsService } from './services/permissions.service';\r\n\r\n@Component({\r\n  selector: 'app-permissions',\r\n  templateUrl: './permissions.component.html',\r\n  styleUrls: ['./permissions.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class PermissionsComponent implements OnInit, OnDestroy {\r\n  permissions$ = new BehaviorSubject<Permission[]>(null);\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      permissionsActionsComponent: PermissionsActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter',\r\n        cellRendererParams: {\r\n          tooltipGetter: (paramsData: Permission) => `ID: ${paramsData.Id}\\nGUID: ${paramsData.Guid}`,\r\n        } as IdFieldParams,\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'Title', flex: 2, minWidth: 250, cellClass: 'primary-action highlight',\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: this.editPermission.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Identity', field: 'Identity', flex: 2, minWidth: 250, cellClass: 'no-outline', sortable: true,\r\n        filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Condition', field: 'Condition', flex: 2, minWidth: 250, cellClass: 'no-outline', sortable: true,\r\n        filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Grant', field: 'Grant', width: 70, headerClass: 'dense', cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        width: 40, cellClass: 'secondary-action no-padding', cellRenderer: 'permissionsActionsComponent', pinned: 'right',\r\n        cellRendererParams: {\r\n          onDelete: this.deletePermission.bind(this),\r\n        } as PermissionsActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  private subscription = new Subscription();\r\n  private targetType = parseInt(this.route.snapshot.paramMap.get('type'), 10);\r\n  private keyType = this.route.snapshot.paramMap.get('keyType');\r\n  private key = this.route.snapshot.paramMap.get('key');\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<PermissionsComponent>,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private permissionsService: PermissionsService,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchPermissions();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.permissions$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  private fetchPermissions() {\r\n    this.permissionsService.getAll(this.targetType, this.keyType, this.key).subscribe(permissions => {\r\n      this.permissions$.next(permissions);\r\n    });\r\n  }\r\n\r\n  editPermission(params: CellClickedEvent) {\r\n    let form: EditForm;\r\n    if (params == null) {\r\n      let target: string;\r\n      const keys = Object.keys(eavConstants.metadata) as EavMetadataKey[];\r\n      for (const key of keys) {\r\n        if (eavConstants.metadata[key].type !== this.targetType) { continue; }\r\n        target = eavConstants.metadata[key].target;\r\n        break;\r\n      }\r\n      form = {\r\n        items: [{\r\n          ContentTypeName: eavConstants.contentTypes.permissions,\r\n          For: {\r\n            Target: target,\r\n            ...(this.keyType === eavConstants.keyTypes.guid && { Guid: this.key }),\r\n            ...(this.keyType === eavConstants.keyTypes.number && { Number: parseInt(this.key, 10) }),\r\n            ...(this.keyType === eavConstants.keyTypes.string && { String: this.key }),\r\n          }\r\n        }],\r\n      };\r\n    } else {\r\n      const permission: Permission = params.data;\r\n      form = {\r\n        items: [{ EntityId: permission.Id }],\r\n      };\r\n    }\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route });\r\n  }\r\n\r\n  private deletePermission(permission: Permission) {\r\n    if (!confirm(`Delete '${permission.Title}' (${permission.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.permissionsService.delete(permission.Id).subscribe(() => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchPermissions();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchPermissions();\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJwcm9qZWN0cy9uZy1kaWFsb2dzL3NyYy9hcHAvcGVybWlzc2lvbnMvcGVybWlzc2lvbnMuY29tcG9uZW50LnNjc3MifQ== */\";","\r\nexport * from './shared';\r\n","import { AgGridModule } from '@ag-grid-community/angular';\r\nimport { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatDialogModule } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBarModule } from '@angular/material/snack-bar';\r\nimport { MatTooltipModule } from '@angular/material/tooltip';\r\nimport { EntitiesService } from '../content-items/services/entities.service';\r\nimport { Context } from '../shared/services/context';\r\nimport { SharedComponentsModule } from '../shared/shared-components.module';\r\nimport { PermissionsActionsComponent } from './ag-grid-components/permissions-actions/permissions-actions.component';\r\nimport { PermissionsRoutingModule } from './permissions-routing.module';\r\nimport { PermissionsComponent } from './permissions.component';\r\nimport { MetadataService } from './services/metadata.service';\r\nimport { PermissionsService } from './services/permissions.service';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PermissionsComponent,\r\n    PermissionsActionsComponent,\r\n  ],\r\n  entryComponents: [\r\n    PermissionsComponent,\r\n    PermissionsActionsComponent,\r\n  ],\r\n  imports: [\r\n    CommonModule,\r\n    PermissionsRoutingModule,\r\n    SharedComponentsModule,\r\n    MatDialogModule,\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    MatTooltipModule,\r\n    AgGridModule.withComponents([]),\r\n    MatRippleModule,\r\n    MatSnackBarModule,\r\n  ],\r\n  providers: [\r\n    Context,\r\n    PermissionsService,\r\n    MetadataService,\r\n    EntitiesService,\r\n  ]\r\n})\r\nexport class PermissionsModule { }\r\n","\r\nexport * from './assets.service';\r\nexport * from './dnn-bridge.service';\r\nexport * from './dropzone-dragging.helper';\r\nexport * from './eav.service';\r\nexport * from './edit-routing.models';\r\nexport * from './edit-routing.service';\r\nexport * from './entity.service';\r\nexport * from './file-type.service';\r\nexport * from './global-configuration.service';\r\nexport * from './load-icons.service';\r\nexport * from './query.service';\r\nexport * from './scripts-loader.service';\r\n"],"sourceRoot":"webpack:///"}