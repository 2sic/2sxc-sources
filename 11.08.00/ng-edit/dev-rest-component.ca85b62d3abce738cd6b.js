(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{Ztmg:function(e,t,n){"use strict";n.r(t),n.d(t,"DevRestComponent",(function(){return _}));var a=n("D57K"),c=n("C05f"),o=n("HM3f"),i=n("YtkY"),s=[{key:"internal",name:"Internal-Access from an App",description:"Internal access means that your JS code is running in a DNN-module on a DNN-page. This is the default access. In this scenario, various headers are included in the request, incl. the module it's coming from, which allows various automatic things to happen. This results in simpler REST requests.",notes:"This mode also makes it easier to re-distribute your app, as you can perform API calls relative to the module that's hosting it. This means, that even if you export/import the app to another system, the API-calls stay the same."},{key:"external",name:"External access",description:"External access means that the JS code could be on another page / module in DNN (which is not the same app), or it could be coming from a mobile App, or another website altogether. In this case, automatic app-detection can't work, as various headers are missing, and you must access the endpoint more explicitly.",notes:"This mode requires you to define the exact, full URL, so if you create copies of this app on another system, the URL must be updated to access that system specifically."}],r=[{key:"dnn7",name:"DNN 7 or higher",rootPath:"/desktopmodules/2sxc/api/",description:"DNN 7 had a longer API-root path, which still works in later versions of DNN"},{key:"dnn8",name:"DNN 8 or higher",rootPath:"/api/2sxc/",description:"DNN 8+ has a shorter root path, with doesn't work in DNN 7"}],l=n("OZ4H"),b=n("EM62"),u=n("PBFl"),p=n("Y2X+"),h=n("bFHC"),m=n("2kYt");function g(e,t){if(1&e&&(b.Sb(0,"p",4),b.Sb(1,"em"),b.Oc(2),b.Rb(),b.Rb()),2&e){var n=b.ec();b.Ab(2),b.Pc(n.dialogData.notes)}}var d=function(){function e(e,t){this.dialogRef=e,this.dialogData=t}return e.prototype.ngOnInit=function(){},e.prototype.closeDialog=function(){this.dialogRef.close()},e.\u0275fac=function(t){return new(t||e)(b.Mb(l.g),b.Mb(l.a))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-help-popup"]],decls:11,vars:3,consts:[["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"dialog-description"],["class","dialog-description",4,"ngIf"]],template:function(e,t){1&e&&(b.Sb(0,"div",0),b.Sb(1,"div",1),b.Sb(2,"div"),b.Oc(3),b.Rb(),b.Sb(4,"button",2),b.ac("click",(function(){return t.closeDialog()})),b.Sb(5,"mat-icon"),b.Oc(6,"close"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(7,"div",3),b.Sb(8,"p",4),b.Oc(9),b.Rb(),b.Mc(10,g,3,1,"p",5),b.Rb()),2&e&&(b.Ab(3),b.Pc(t.dialogData.name),b.Ab(6),b.Qc(" ",t.dialogData.body," "),b.Ab(1),b.kc("ngIf",t.dialogData.notes))},directives:[l.h,u.b,p.a,h.a,m.t],encapsulation:2,changeDetection:0}),e}(),f=n("29Wa"),S=n("R7+U"),v=n("mFH5");function y(e,t){if(1&e&&(b.Sb(0,"mat-option",4),b.Oc(1),b.Rb()),2&e){var n=t.$implicit;b.kc("value",n.key),b.Ab(1),b.Pc(n.name)}}var R=function(){function e(e){this.dialog=e,this.valueChange=new b.n}return e.prototype.ngOnInit=function(){},e.prototype.selectionChange=function(e){var t=this;this.value=e;var n=this.items.find((function(e){return e.key===t.value}));this.valueChange.emit(n)},e.prototype.showHelp=function(){var e=this,t=this.items.find((function(t){return t.key===e.value}));this.dialog.open(d,{width:"500px",data:{name:t.name,body:t.description,notes:t.notes},autoFocus:!1})},e.\u0275fac=function(t){return new(t||e)(b.Mb(l.b))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-selector-with-help"]],inputs:{label:"label",items:"items",value:"value"},outputs:{valueChange:"valueChange"},decls:8,vars:3,consts:[["color","accent"],[3,"value","selectionChange"],[3,"value",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],[3,"value"]],template:function(e,t){1&e&&(b.Sb(0,"mat-form-field",0),b.Sb(1,"mat-label"),b.Oc(2),b.Rb(),b.Sb(3,"mat-select",1),b.ac("selectionChange",(function(e){return t.selectionChange(e.value)})),b.Mc(4,y,2,2,"mat-option",2),b.Rb(),b.Rb(),b.Sb(5,"button",3),b.ac("click",(function(){return t.showHelp()})),b.Sb(6,"mat-icon"),b.Oc(7,"help_outline"),b.Rb(),b.Rb()),2&e&&(b.Ab(2),b.Pc(t.label),b.Ab(1),b.kc("value",t.value),b.Ab(1),b.kc("ngForOf",t.items))},directives:[f.c,f.g,S.a,m.s,u.b,h.a,v.m],encapsulation:2,changeDetection:0}),e}(),O=n("sEIs"),k=n("W1gw"),w=n("vobO"),T=n("S36y"),A=n("KoVM"),I=n("Iv+g"),x=n("B5/E"),N=n("KZIX"),$=n("nKqi"),D=n("zmEM");function M(e,t){if(1&e){var n=b.Tb();b.Sb(0,"app-selector-with-help",12),b.ac("valueChange",(function(e){return b.Ac(n),b.ec(2).changeEnv(e)})),b.Rb()}if(2&e){var a=b.ec().ngIf,c=b.ec();b.kc("items",c.environments)("value",a.currentEnv.key)}}function C(e,t){1&e&&b.Ob(0)}function E(e,t){1&e&&b.Ob(0)}function P(e,t){if(1&e&&(b.Sb(0,"p",5),b.Oc(1," Virtual REST URLs are shorter URLs, which are automatically resolved to the full length (based on the dnn-version, current portal, etc.) thanks to $2sxc. This happens when you use the "),b.Sb(2,"a",17),b.Oc(3," $2sxc.webApi(...) "),b.Rb(),b.Oc(4," or if you use "),b.Sb(5,"a",18),b.Oc(6," dnn-sxc-angular (npm package) "),b.Rb(),b.Oc(7," (which also passes url-resolving through $2sxc). "),b.Rb(),b.Mc(8,E,1,0,"ng-container",19)),2&e){b.ec(2);var n=b.yc(23);b.Ab(8),b.kc("ngTemplateOutlet",n)}}function j(e,t){1&e&&(b.Sb(0,"p",5),b.Oc(1," First you must get the "),b.Sb(2,"code"),b.Oc(3,"sxc"),b.Rb(),b.Oc(4," controller for the current module instance. The easiest way is to let "),b.Sb(5,"code"),b.Oc(6,"$2sxc"),b.Rb(),b.Oc(7," find it, by giving it a html-tag before running any additional code. $2sxc will then automatically look up everything and return a fully configured controller. Note that this is just an example, you will probably do this differently and not use a global variable (bad practice). "),b.Rb(),b.Sb(8,"pre"),b.Oc(9,"// this assumes a tag like <div id='myGalleryTag'> in your code\nvar mySxc = $2sxc(document.getElementById('myGalleryTag'));\n        "),b.Rb(),b.Sb(10,"p"),b.Oc(11," Then... "),b.Rb(),b.Sb(12,"pre"),b.Oc(13),b.Rb()),2&e&&(b.Ab(13),b.Tc("/** get all items - this returns a promise\n* so you can do getAll().then(...)\n*/\nfunction getAll() ","{","\nreturn mySxc.webApi.get('');\n","}","\n\nfunction getOne(id) ","{","\nreturn mySxc.webApi.get('' + '/' + id);\n","}","\n        "))}function U(e,t){1&e&&(b.Sb(0,"mat-tab-group",13),b.Sb(1,"mat-tab",14),b.Mc(2,P,9,1,"ng-template",15),b.Rb(),b.Sb(3,"mat-tab",16),b.Mc(4,j,14,4,"ng-template",15),b.Rb(),b.Rb())}function F(e,t){1&e&&b.Ob(0)}function G(e,t){if(1&e&&b.Mc(0,F,1,0,"ng-container",19),2&e){b.ec(2);var n=b.yc(23);b.kc("ngTemplateOutlet",n)}}function V(e,t){1&e&&b.Oc(0," todo ")}function B(e,t){1&e&&(b.Sb(0,"mat-tab-group",13),b.Sb(1,"mat-tab",20),b.Mc(2,G,1,1,"ng-template",15),b.Rb(),b.Sb(3,"mat-tab",16),b.Mc(4,V,1,0,"ng-template",15),b.Rb(),b.Rb())}function L(e,t){if(1&e&&(b.Sb(0,"a",24),b.Oc(1,"open"),b.Rb()),2&e){var n=b.ec(2).ngIf;b.kc("href",n.root,b.Dc)}}function H(e,t){if(1&e&&(b.Sb(0,"a",24),b.Oc(1,"open"),b.Rb()),2&e){var n=b.ec(2).ngIf;b.kc("href",n.root,b.Dc)}}function J(e,t){if(1&e){var n=b.Tb();b.Sb(0,"mat-list"),b.Sb(1,"mat-list-item"),b.Sb(2,"h3",21),b.Oc(3,"Read list of all items"),b.Rb(),b.Sb(4,"div",21),b.Sb(5,"code"),b.Oc(6,"GET"),b.Rb(),b.Oc(7,": "),b.Sb(8,"code"),b.Oc(9),b.Rb(),b.Rb(),b.Sb(10,"button",22),b.ac("click",(function(){b.Ac(n);var e=b.ec().ngIf;return b.ec().callApiGet(e.root)})),b.Oc(11,"execute call"),b.Rb(),b.Mc(12,L,2,1,"a",23),b.Rb(),b.Nb(13,"mat-divider"),b.Sb(14,"mat-list-item"),b.Sb(15,"h3",21),b.Oc(16,"Read a single item #27"),b.Rb(),b.Sb(17,"div",21),b.Sb(18,"code"),b.Oc(19,"GET"),b.Rb(),b.Oc(20,": "),b.Sb(21,"code"),b.Oc(22),b.Rb(),b.Rb(),b.Sb(23,"button",22),b.ac("click",(function(){b.Ac(n);var e=b.ec().ngIf;return b.ec().callApiGet(e.root)})),b.Oc(24,"execute call"),b.Rb(),b.Mc(25,H,2,1,"a",23),b.Rb(),b.Nb(26,"mat-divider"),b.Sb(27,"mat-list-item"),b.Sb(28,"h3",21),b.Oc(29,"Create an item"),b.Rb(),b.Sb(30,"div",21),b.Sb(31,"code"),b.Oc(32,"POST"),b.Rb(),b.Oc(33,": "),b.Sb(34,"code"),b.Oc(35),b.Rb(),b.Rb(),b.Rb(),b.Nb(36,"mat-divider"),b.Sb(37,"mat-list-item"),b.Sb(38,"h3",21),b.Oc(39,"Update the item #27"),b.Rb(),b.Sb(40,"div",21),b.Sb(41,"code"),b.Oc(42,"POST"),b.Rb(),b.Oc(43,": "),b.Sb(44,"code"),b.Oc(45),b.Rb(),b.Rb(),b.Rb(),b.Nb(46,"mat-divider"),b.Sb(47,"mat-list-item"),b.Sb(48,"h3",21),b.Oc(49,"Delete the item #27"),b.Rb(),b.Sb(50,"div",21),b.Sb(51,"code"),b.Oc(52,"DELETE"),b.Rb(),b.Oc(53,": "),b.Sb(54,"code"),b.Oc(55),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&e){var a=b.ec().ngIf;b.Ab(9),b.Pc(a.root),b.Ab(3),b.kc("ngIf","external"===(null==a.currentScenario?null:a.currentScenario.key)),b.Ab(10),b.Qc("",a.root,"/27"),b.Ab(3),b.kc("ngIf","external"===(null==a.currentScenario?null:a.currentScenario.key)),b.Ab(10),b.Pc(a.root),b.Ab(10),b.Qc("",a.root,"/27"),b.Ab(10),b.Qc("",a.root,"/27")}}function Q(e,t){if(1&e){var n=b.Tb();b.Qb(0),b.Sb(1,"div",1),b.Sb(2,"div",2),b.Sb(3,"div"),b.Oc(4),b.Rb(),b.Sb(5,"button",3),b.ac("click",(function(){return b.Ac(n),b.ec().closeDialog()})),b.Sb(6,"mat-icon"),b.Oc(7,"close"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Sb(8,"div",4),b.Sb(9,"p",5),b.Oc(10," All data can easily be used in JavaScript using a REST API. "),b.Rb(),b.Sb(11,"p",5),b.Sb(12,"em"),b.Oc(13," Important: As a host-user you can always access these REST endpoints, but if you want to use them in a public UI, you must remember to set the permissions to allow this. "),b.Rb(),b.Rb(),b.Sb(14,"div"),b.Sb(15,"app-selector-with-help",6),b.ac("valueChange",(function(e){return b.Ac(n),b.ec().changeScenario(e)})),b.Rb(),b.Mc(16,M,1,2,"app-selector-with-help",7),b.Rb(),b.Mc(17,C,1,0,"ng-container",8),b.Rb(),b.Mc(18,U,5,0,"ng-template",null,9,b.Nc),b.Mc(20,B,5,0,"ng-template",null,10,b.Nc),b.Mc(22,J,56,7,"ng-template",null,11,b.Nc),b.Pb()}if(2&e){var a=t.ngIf,c=b.yc(19),o=b.yc(21),i=b.ec();b.Ab(4),b.Qc("Using REST with ",null==a.contentType?null:a.contentType.Name,""),b.Ab(11),b.kc("items",i.scenarios)("value",a.currentScenario.key),b.Ab(1),b.kc("ngIf",!a.modeInternal),b.Ab(1),b.kc("ngIf",a.modeInternal)("ngIfThen",c)("ngIfElse",o)}}var _=function(){function e(e,t,n,l,b,u,p,h){this.dialogRef=e,this.route=t,this.snackBar=n,this.http=l,this.contentTypesService=b,this.appDialogConfigService=u,this.context=p,this.dnnContext=h,this.hostClass="dialog-component dialog-component--no-actions",this.environments=r,this.scenarios=s,this.contentTypeStaticName=this.route.snapshot.paramMap.get("contentTypeStaticName"),this.contentType$=new c.a(null),this.dialogSettings$=new c.a(null),this.currentEnv$=new c.a(this.environments[0]),this.currentScenario$=new c.a(this.scenarios[0]),this.modeInternal$=this.currentScenario$.pipe(Object(i.a)((function(e){return"internal"===e.key}))),this.root$=Object(o.a)([this.contentType$,this.currentEnv$,this.currentScenario$,this.dialogSettings$]).pipe(Object(i.a)((function(e){var t=Object(a.f)(e,4),n=t[0],c=t[3];if(null==n||null==c)return"";var o=t[2]===s[0];return(o?"":t[1].rootPath)+"app/{appname}/content/{typename}".replace("{typename}",n.Name).replace("{appname}",o?"auto":c.Context.App.Name)}))),this.templateVars$=Object(o.a)([this.contentType$,this.currentEnv$,this.currentScenario$,this.modeInternal$,this.root$]).pipe(Object(i.a)((function(e){var t=Object(a.f)(e,5);return{contentType:t[0],currentEnv:t[1],currentScenario:t[2],modeInternal:t[3],root:t[4]}})))}return e.prototype.ngOnInit=function(){this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe(this.contentType$),this.appDialogConfigService.getDialogSettings().subscribe(this.dialogSettings$)},e.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.dialogSettings$.complete(),this.currentEnv$.complete(),this.currentScenario$.complete()},e.prototype.changeEnv=function(e){this.currentEnv$.next(e)},e.prototype.changeScenario=function(e){this.currentScenario$.next(e)},e.prototype.closeDialog=function(){this.dialogRef.close()},e.prototype.callApiGet=function(e){this.http.get(e).subscribe((function(e){console.log(e)})),this.openSnackBar("API call dispatched - to see it, you should have the console (F12) open.","API call")},e.prototype.openSnackBar=function(e,t){this.snackBar.open(e,t,{duration:2e3})},e.\u0275fac=function(t){return new(t||e)(b.Mb(l.g),b.Mb(O.a),b.Mb(k.b),b.Mb(w.b),b.Mb(T.a),b.Mb(A.a),b.Mb(I.a),b.Mb(x.a))},e.\u0275cmp=b.Gb({type:e,selectors:[["app-dev-rest"]],hostVars:1,hostBindings:function(e,t){2&e&&b.Vb("className",t.hostClass)},decls:2,vars:3,consts:[[4,"ngIf"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","matTooltip","Close dialog",3,"click"],[1,"dialog-component-content","fancy-scrollbar-light"],[1,"dialog-description"],["label","Choose Scenario",3,"items","value","valueChange"],["label","Choose DNN Version",3,"items","value","valueChange",4,"ngIf"],[4,"ngIf","ngIfThen","ngIfElse"],["internal",""],["external",""],["restUrls",""],["label","Choose DNN Version",3,"items","value","valueChange"],["color","accent"],["label","Virtual REST URLs"],["matTabContent",""],["label","JS Calls using $2sxc"],["href","https://github.com/2sic/2sxc/wiki/javascript-sxc-webapi","target","_blank"],["href","https://www.npmjs.com/package/@2sic.com/dnn-sxc-angular","target","_blank"],[4,"ngTemplateOutlet"],["label","Full REST URLs"],["matLine",""],["mat-raised-button","",3,"click"],["target","_blank",3,"href",4,"ngIf"],["target","_blank",3,"href"]],template:function(e,t){1&e&&(b.Mc(0,Q,24,7,"ng-container",0),b.fc(1,"async")),2&e&&b.kc("ngIf",b.gc(1,1,t.templateVars$))},directives:[m.t,l.h,u.b,p.a,h.a,R,N.c,N.a,N.b,m.A,$.a,$.c,v.j,D.a],pipes:[m.b],styles:[""],changeDetection:0}),e}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.03/ng-edit/dev-rest-component.ca85b62d3abce738cd6b.js.map