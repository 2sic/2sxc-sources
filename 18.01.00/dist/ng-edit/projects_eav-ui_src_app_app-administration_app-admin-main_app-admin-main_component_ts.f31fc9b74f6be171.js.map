{"version":3,"file":"projects_eav-ui_src_app_app-administration_app-admin-main_app-admin-main_component_ts.f31fc9b74f6be171.js","mappings":"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","names":["AppAdminMenu","name","path","icon","svgIcon","tippy","eavConstants","scopes","default","value","child","GoToCopilot","routeDefinition","GoToDevRest","routeDataDefinition","routeQueryDefinition","CopilotSpecs","webApi","teaser","routeWebApiDefinition","i0","_r2","sidenav_r3","opened","vm_r4","dialogSettings","Context","App","Icon","_r5","Name","breadcrumb_r6","AppAdminMainComponent_Conditional_0_ng_container_13_Conditional_1_Template","last_r7","AppAdminMainComponent_Conditional_0_Conditional_2_Template","AppAdminMainComponent_Conditional_0_Conditional_3_Template","AppAdminMainComponent_Conditional_0_Conditional_5_Template","AppAdminMainComponent_Conditional_0_Conditional_6_Template","AppAdminMainComponent_Conditional_0_ng_container_13_Template","AppAdminMainComponent_Conditional_0_ng_template_14_Template","_r1","ctx_r7","closeDialog","AppAdminMainComponent_Conditional_0_For_24_Template","_forTrack0","SettingsScope","AppScopes","Global","emptyTemplate_r10","smallScreen","matches","sideNavOpened","navItems","AppAdminMainComponent","#dialogConfigSvc","#dialogRouter","constructor","dialogRef","media","this","log","classLog","transient","DialogConfigAppService","DialogRoutingService","dialogSettings$","BehaviorSubject","undefined","pathsArray$","currentPath$","combineLatest","router","events","pipe","filter","event","NavigationEnd","map","snapshot","firstChild","url","startWith","paths","currentPath","viewModel$","matchMedia","a","ngOnInit","fetchDialogSettings","doOnDialogClosed","addEventListener","c","sidenav","mode","ngOnDestroy","complete","close","getCurrent$","subscribe","UpdateEnvVarsFromDialogSettings","next","Enable","Query","item","static","t","i1","i2","core","VBU","selectors","viewQuery","rf","ctx","AppAdminMainComponent_Conditional_0_Template","tmp_0_0","MatToolbarModule","i3","MatIconModule","i4","BreadcrumbModule","i5","MatButtonModule","i6","MatSidenavModule","i7","RouterOutlet","AsyncPipe","NavItemListComponent","ToggleDebugDirective","styles"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-menu.ts","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.component.html","./projects/eav-ui/src/app/app-administration/app-admin-main/app-admin-main.component.ts"],"sourcesContent":["import { NavItem } from \"../../shared/models/nav-item.model\";\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { GoToCopilot } from '../copilot/go-to-copilot';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { CopilotSpecs } from '../copilot/copilot-specs';\r\n\r\nexport const AppAdminMenu: NavItem[] = [\r\n\r\n  { name: 'App Info', path: 'home', icon: 'info', svgIcon: false, tippy: 'App Info' },\r\n  {\r\n    name: 'Data', path: `data/${eavConstants.scopes.default.value}`, icon: 'menu', svgIcon: false, tippy: 'Data / Content',\r\n    child: [\r\n      { ...GoToCopilot.routeDefinition('data'), tippy: 'Autogenerate content types ' },\r\n      { ...GoToDevRest.routeDataDefinition, tippy: 'Rest-Api Data ' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Queries',\r\n    path: 'queries',\r\n    icon: 'filter_list',\r\n    svgIcon: false,\r\n    tippy: 'Queries / Visual Query Designer',\r\n    child: [\r\n      { ...GoToDevRest.routeQueryDefinition, tippy: 'Rest-Api Queries' },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Views',\r\n    path: 'views',\r\n    icon: 'layers',\r\n    svgIcon: false,\r\n    tippy: 'Views / Templates',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('views'),\r\n        tippy: 'Autogenerate Razor Views'\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    name: 'Web API', path: 'web-api', icon: 'offline_bolt', svgIcon: false, tippy: 'WebApi',\r\n    child: [\r\n      {\r\n        ...GoToCopilot.routeDefinition('web-api'),\r\n        tippy: CopilotSpecs.webApi.teaser,\r\n      },\r\n      {\r\n        ...GoToDevRest.routeWebApiDefinition,\r\n        tippy: 'Rest-Api Queries'\r\n      },\r\n    ]\r\n  },\r\n  {\r\n    name: 'App',\r\n    path: 'app',\r\n    icon: 'settings_applications',\r\n    svgIcon: false,\r\n    tippy: 'App Settings',\r\n    child: [\r\n      {\r\n        name: 'Export App',\r\n        path: 'export-app',\r\n        // icon: 'browser_updated',\r\n        // 2dm: note that I would prefer this icon, but we would first have to switch to Material Symbols\r\n        icon: 'deployed_code_update',\r\n        svgIcon: false,\r\n        tippy: 'Export this entire App'\r\n      },\r\n      {\r\n        name: 'Export Parts',\r\n        path: 'export-parts',\r\n        icon: 'cloud_download',\r\n        svgIcon: false,\r\n        tippy: 'Export parts of this App'\r\n      },\r\n      {\r\n        name: 'Imports Parts',\r\n        path: 'import-parts',\r\n        icon: 'cloud_upload',\r\n        svgIcon: false,\r\n        tippy: 'Import parts of this App'\r\n      },\r\n      {\r\n        name: 'App-State Git Sync',\r\n        path: 'app-state',\r\n        icon: 'sync',\r\n        svgIcon: false,\r\n        tippy: 'App-State Versioning'\r\n      },\r\n    ]\r\n  },\r\n];\r\n","@if (viewModel$ | async; as vm) {\r\n<mat-toolbar appToggleDebug>\r\n  <div class=\"toolbar-container\">\r\n    <!-- App Logo -->\r\n    @if (vm.dialogSettings?.Context.App.Icon) {\r\n    <img (click)=\"sidenav.opened = !sidenav.opened\"\r\n      [src]=\"vm.dialogSettings?.Context.App.Icon + '?w=40&h=40&mode=crop'\" />\r\n    } @else {\r\n    <mat-icon class=\"menu-container\" (click)=\"sidenav.opened = !sidenav.opened\">menu</mat-icon>\r\n    }\r\n    <!-- App Name -->\r\n    <div class=\"d-flex\">\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope === AppScopes.Global) {\r\n      Global\r\n      }\r\n      @if (vm.dialogSettings?.Context.App.SettingsScope !== AppScopes.Global) {\r\n      {{ vm.dialogSettings?.Context.App.Name }}\r\n      }\r\n      <span>\r\n        <span class=\"mat-icon-admin\">\r\n          <mat-icon>settings</mat-icon>\r\n        </span>\r\n        Admin\r\n      </span>\r\n    </div>\r\n    <!-- Breadcrumb in the Toolbar after show Img and Aoo Name -->\r\n    <xng-breadcrumb [separator]=\"emptyTemplate\">\r\n      <ng-container *xngBreadcrumbItem=\"let breadcrumb; let info = info; let last = last\">\r\n        @if (last) {\r\n        <mat-icon class=\"breadcrumb-icon\">chevron_right</mat-icon>\r\n        {{ breadcrumb }}\r\n        }\r\n      </ng-container>\r\n    </xng-breadcrumb>\r\n    <ng-template #emptyTemplate></ng-template>\r\n  </div>\r\n  <span class=\"toolbar-spacer\"></span>\r\n  <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n    <mat-icon>close</mat-icon>\r\n  </button>\r\n</mat-toolbar>\r\n<mat-sidenav-container appToggleDebug>\r\n\r\n  <mat-sidenav #sidenav [mode]=\"smallScreen.matches ? 'over' : 'side'\" [opened]=\"sideNavOpened\">\r\n    @for (navItem of navItems; track navItem.path) {\r\n    <app-nav-item-list [navItem]=\"navItem\"></app-nav-item-list>\r\n    }\r\n    <div class=\"sideNav-bottom-info\">\r\n      <p>use App logo to show/hide menu</p>\r\n    </div>\r\n  </mat-sidenav>\r\n\r\n  <mat-sidenav-content>\r\n    <router-outlet></router-outlet>\r\n  </mat-sidenav-content>\r\n</mat-sidenav-container>\r\n}\r\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { NavigationEnd, RouterOutlet } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, filter, map, startWith } from 'rxjs';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { AppScopes } from '../../shared/models/dialog-context.models';\r\nimport { DialogSettings } from '../../shared/models/dialog-settings.model';\r\nimport { MatSidenav, MatSidenavModule } from '@angular/material/sidenav';\r\nimport { MediaMatcher } from '@angular/cdk/layout';\r\nimport { AppAdminMenu } from './app-admin-menu';\r\nimport { AsyncPipe } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { BreadcrumbModule } from 'xng-breadcrumb';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatToolbarModule } from '@angular/material/toolbar';\r\nimport { NavItemListComponent } from '../../shared/components/nav-item-list/nav-item-list.component';\r\nimport { ToggleDebugDirective } from '../../shared/directives/toggle-debug.directive';\r\nimport { DialogConfigAppService } from '../services/dialog-config-app.service';\r\nimport { transient } from '../../core';\r\nimport { DialogRoutingService } from '../../shared/routing/dialog-routing.service';\r\nimport { classLog } from '../../shared/logging';\r\n\r\n@Component({\r\n  selector: 'app-app-admin-main',\r\n  templateUrl: './app-admin-main.component.html',\r\n  styleUrls: ['./app-admin-main.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatToolbarModule,\r\n    MatIconModule,\r\n    BreadcrumbModule,\r\n    MatButtonModule,\r\n    MatSidenavModule,\r\n    RouterOutlet,\r\n    AsyncPipe,\r\n    NavItemListComponent,\r\n    ToggleDebugDirective,\r\n  ],\r\n})\r\nexport class AppAdminMainComponent implements OnInit, OnDestroy {\r\n\r\n  log = classLog({AppAdminMainComponent});\r\n\r\n  #dialogConfigSvc = transient(DialogConfigAppService);\r\n  #dialogRouter = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AppAdminMainComponent>,\r\n    private media: MediaMatcher\r\n  ) {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  AppScopes = AppScopes;\r\n\r\n  private dialogSettings$ = new BehaviorSubject<DialogSettings>(undefined);\r\n  private pathsArray$ = new BehaviorSubject<string[]>(undefined);\r\n  private currentPath$ = combineLatest([\r\n    this.pathsArray$,\r\n    this.#dialogRouter.router.events.pipe(\r\n      filter((event) => event instanceof NavigationEnd),\r\n      map(() => this.#dialogRouter.snapshot.firstChild.url[0].path),\r\n      startWith(this.#dialogRouter.snapshot.firstChild.url[0].path)\r\n    ),\r\n  ]).pipe(\r\n    map(([paths, currentPath]) => {\r\n      if (paths == null) return;\r\n      return currentPath;\r\n    })\r\n  );\r\n\r\n  // Generate View Model\r\n  viewModel$ = combineLatest([this.dialogSettings$, this.currentPath$]).pipe(\r\n    map(([dialogSettings, currentPath]) => {\r\n      return {\r\n        dialogSettings,\r\n        currentPath,\r\n      };\r\n    })\r\n  );\r\n\r\n  smallScreen: MediaQueryList = this.media.matchMedia('(max-width: 1000px)');\r\n  @ViewChild('sidenav') sidenav!: MatSidenav;\r\n  sideNavOpened = !this.smallScreen.matches;\r\n\r\n  /** Navigation menu buttons - prefilled; may be modified after settings are loaded */\r\n  navItems = AppAdminMenu;\r\n\r\n  matcher!: MediaQueryList;\r\n\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.#dialogRouter.doOnDialogClosed(() => this.fetchDialogSettings());\r\n\r\n    this.smallScreen.addEventListener(\r\n      'change',\r\n      (c) => (\r\n        this.sidenav.opened = !c.matches,\r\n        this.sidenav.mode = c.matches ? 'over' : 'side'\r\n      )\r\n    );\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.pathsArray$.complete();\r\n  }\r\n\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.#dialogConfigSvc.getCurrent$().subscribe(dialogSettings => {\r\n      UpdateEnvVarsFromDialogSettings(dialogSettings.Context.App);\r\n      this.dialogSettings$.next(dialogSettings);\r\n\r\n      if (!dialogSettings.Context.Enable.Query)\r\n        this.navItems = this.navItems.filter(\r\n          (item) => item.name !== 'Queries' && item.name !== 'Web API'\r\n        );\r\n\r\n      this.pathsArray$.next(this.navItems.map((item) => item.path));\r\n    });\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}