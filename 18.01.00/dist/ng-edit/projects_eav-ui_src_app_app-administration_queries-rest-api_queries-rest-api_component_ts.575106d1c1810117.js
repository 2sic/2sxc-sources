"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_queries-rest-api_queries-rest-api_component_ts"],{3960:(A,l,t)=>{t.r(l),t.d(l,{QueriesRestApiComponent:()=>o});var m=t(316),r=t(4456),a=t(4175),u=t(3777),d=t(3840),s=t(5175),i=t(5445),P=t(5797),O=t(52),E=t(2159),y=t(5437),_=t(7037),c=t(8471),e=t(7580),C=t(5944),g=t(5060);function h(n,v){if(1&n&&(e.j41(0,"mat-option",3),e.EFF(1),e.k0s()),2&n){const p=v.$implicit;e.Y8G("value",p.Guid),e.R7$(),e.SpI(" ",p.Name," ")}}function T(n,v){1&n&&e.Z7z(0,h,2,2,"mat-option",3,e.fX1),2&n&&e.Dyx(v.sort())}let o=(()=>{class n{#e;#t;constructor(p){this.fb=p,this.#e=(0,y.d)(i.xR),this.#t=(0,y.d)(c.c),this.queryTypes$=new P.t(void 0)}ngOnInit(){this.fetchQueries(),this.queryTypeForm=this.fb.group({queryType:[""]})}fetchQueries(){this.#e.getAll(O.YX.contentTypes.query).subscribe(p=>{this.queryTypes$.next(p);const D=this.#t.url.split("/"),I=D[D.length-1],M=p.find(R=>R.Guid===I);M&&this.queryTypeForm.get("queryType").setValue(M.Guid)})}openRestApi(p){p&&this.#t.navParentFirstChild([`${p}`])}static#s=this.\u0275fac=function(D){return new(D||n)(e.rXU(r.ok))};static#r=this.\u0275cmp=e.VBU({type:n,selectors:[["app-web-api-rest-api"]],standalone:!0,features:[e.aNF],decls:8,vars:4,consts:[[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","queryType",3,"valueChange"],[3,"value"]],template:function(D,I){if(1&D&&(e.j41(0,"form",0)(1,"mat-form-field",1)(2,"mat-label"),e.EFF(3,"Query"),e.k0s(),e.j41(4,"mat-select",2),e.bIt("valueChange",function(R){return I.openRestApi(R)}),e.DNE(5,T,2,0),e.nI1(6,"async"),e.k0s()()(),e.nrm(7,"router-outlet")),2&D){let M;e.Y8G("formGroup",I.queryTypeForm),e.R7$(5),e.vxM(5,(M=e.bMT(6,2,I.queryTypes$))?5:-1,M)}},dependencies:[s.Ve,C.rl,C.nJ,s.VO,g.wT,a.Hl,u.Hu,d.m_,r.X1,r.qT,r.BC,r.cb,r.j4,r.JD,m.Jj,E.n3,_.p]})}return n})()},5445:(A,l,t)=>{t.d(l,{Cu:()=>s.Cu,JL:()=>s.JL,Mk:()=>s.Mk,ei:()=>s.ei,gs:()=>r.g,tr:()=>m.t,vN:()=>s.vN,xR:()=>s.xR,y0:()=>i.y});var m=t(1479),r=t(7693),s=(t(1475),t(320),t(8624),t(6460)),i=t(2570)},6460:(A,l,t)=>{t.d(l,{Cu:()=>c,JL:()=>e,Mk:()=>y,ei:()=>_,vN:()=>C,xR:()=>g});var m=t(4600),r=t(6647),a=t(271),u=t(693),d=t(9234),s=t(6474),i=t(7580);const y="admin/query/Run",_="admin/query/DebugStream",c="admin/query/Save",e="admin/query/Get",C="admin/query/DataSources";let g=(()=>{class h extends s.D{getAll(o){return this.http.get(this.apiUrl(d.Gg),{params:{appId:this.appId,contentType:o}})}importQuery(o){return(0,m.H)((0,u.n)(o)).pipe((0,r.n)(n=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:n})),(0,a.T)(n=>({Success:n,Messages:[]})))}clonePipeline(o){return this.http.get(this.apiUrl("admin/query/Clone"),{params:{Id:o.toString(),appId:this.appId}})}delete(o){return this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:o.toString()}})}static#e=this.\u0275fac=(()=>{let o;return function(v){return(o||(o=i.xGo(h)))(v||h)}})();static#t=this.\u0275prov=i.jDH({token:h,factory:h.\u0275fac})}return h})()},2570:(A,l,t)=>{t.d(l,{y:()=>O});var m=t(6474),r=t(7580);const a="admin/view/",u=a+"all",d=a+"delete",s=a+"import",i=a+"polymorphism",P=a+"usage";let O=(()=>{class E extends m.D{getAll(){return this.http.get(this.apiUrl(u),{params:{appId:this.appId}})}delete(_){return this.http.get(this.apiUrl(d),{params:{appId:this.appId,Id:_.toString()}})}import(_){const c=new FormData;return c.append("File",_),this.http.post(this.apiUrl(s),c,{params:{appId:this.appId,zoneId:this.zoneId}})}export(_){const c=this.apiUrl(a+"json")+"?appId="+this.appId+"&viewId="+_;window.open(c,"_blank","")}getPolymorphism(){return this.http.get(this.apiUrl(i),{params:{appId:this.appId}})}getUsage(_){return this.http.get(this.apiUrl(P),{params:{appId:this.appId,guid:_}})}static#e=this.\u0275fac=(()=>{let _;return function(e){return(_||(_=r.xGo(E)))(e||E)}})();static#t=this.\u0275prov=r.jDH({token:E,factory:E.\u0275fac})}return E})()},693:(A,l,t)=>{function m(a){return new Promise((u,d)=>{const s=new FileReader;s.readAsDataURL(a),s.onload=()=>{u(s.result.split(",")[1])},s.onerror=i=>{d(i)}})}function r(a){return new Promise((u,d)=>{const s=new FileReader;s.readAsText(a),s.onload=()=>{u(s.result)},s.onerror=i=>{d(i)}})}t.d(l,{d:()=>r,n:()=>m})}}]);
//# sourceMappingURL=https://sources.2sxc.org/18.01.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_queries-rest-api_queries-rest-api_component_ts.575106d1c1810117.js.map