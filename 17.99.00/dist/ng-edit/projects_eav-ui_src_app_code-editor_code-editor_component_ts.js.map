{"version":3,"file":"projects_eav-ui_src_app_code-editor_code-editor_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/app-administration/services/content-types.service.ts","./projects/eav-ui/src/app/code-editor/code-and-edition-warnings/code-and-edition-warnings.component.ts","./projects/eav-ui/src/app/code-editor/code-and-edition-warnings/code-and-edition-warnings.component.html","./projects/eav-ui/src/app/code-editor/code-editor.component.ts","./projects/eav-ui/src/app/code-editor/code-editor.component.html","./projects/eav-ui/src/app/code-editor/code-editor.models.ts","./projects/eav-ui/src/app/code-editor/code-snippets/code-snippets.component.ts","./projects/eav-ui/src/app/code-editor/code-snippets/code-snippets.component.html","./projects/eav-ui/src/app/code-editor/code-snippets/object-to-array.pipe.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.component.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.component.html","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.helpers.ts","./projects/eav-ui/src/app/code-editor/code-templates/code-templates.models.ts","./projects/eav-ui/src/app/code-editor/code-templates/depth-padding.pipe.ts","./projects/eav-ui/src/app/code-editor/code-templates/order-items.pipe.ts","./projects/eav-ui/src/app/code-editor/services/snippets.service.ts","./projects/eav-ui/src/app/content-type-fields/services/content-types-fields.service.ts","./projects/eav-ui/src/app/monaco-editor/index.ts","./projects/eav-ui/src/app/monaco-editor/monaco-editor.models.ts"],"sourcesContent":["import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { Context } from '../../shared/services/context';\r\nimport { ContentType, ContentTypeEdit } from '../models/content-type.model';\r\nimport { ScopeDetailsDto } from '../models/scopedetails.dto';\r\n\r\n// We should list all the \"full\" paths here, so it's easier to find when searching for API calls\r\nexport const webApiTypeRoot = 'admin/type/';\r\nconst webApiTypeGet = 'admin/type/get';\r\nconst webApiTypes = 'admin/type/list';\r\nconst webApiTypeScopes = 'admin/type/scopes';\r\nconst webApiTypeSave = 'admin/type/save';\r\nconst webApiTypeDelete = 'admin/type/delete';\r\nconst webApiTypeImport = 'admin/type/import';\r\nconst webApiTypeAddGhost = 'admin/type/addghost';\r\n\r\n@Injectable()\r\nexport class ContentTypesService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  private apiUrl(name: string) {\r\n    return this.dnnContext.$2sxc.http.apiUrl(name);\r\n  }\r\n\r\n  retrieveContentType(staticName: string) {\r\n    return this.http.get<ContentType>(this.apiUrl(webApiTypeGet), {\r\n      params: { appId: this.context.appId.toString(), contentTypeId: staticName }\r\n    });\r\n  }\r\n\r\n  retrieveContentTypes(scope: string) {\r\n    return this.http.get<ContentType[]>(this.apiUrl(webApiTypes), {\r\n      params: { appId: this.context.appId.toString(), scope }\r\n    });\r\n  }\r\n\r\n  // TODO: remove this method after upgrade to V2\r\n  getScopes() {\r\n    return this.http.get<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(this.apiUrl(webApiTypeScopes), {\r\n      params: { appId: this.context.appId.toString() }\r\n    }).pipe(\r\n      map(scopesData => {\r\n        // wip during upgrade:\r\n        const scopes = scopesData.old;\r\n        const scopeOptions: ScopeOption[] = Object.keys(scopes).map(key => ({ name: scopes[key], value: key }));\r\n        return scopeOptions;\r\n      }),\r\n    );\r\n  }\r\n\r\n  getScopesV2() {\r\n    return this.http.get<{ old: Record<string, string>, scopes: ScopeDetailsDto[] }>(this.apiUrl(webApiTypeScopes), {\r\n      params: { appId: this.context.appId.toString() }\r\n    }).pipe(\r\n      map(scopesData => scopesData.scopes),\r\n    );\r\n  }\r\n\r\n  save(contentType: ContentTypeEdit) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeSave), contentType, {\r\n      params: { appid: this.context.appId.toString() },\r\n    });\r\n  }\r\n\r\n  delete(contentType: ContentType) {\r\n    return this.http.delete<boolean>(this.apiUrl(webApiTypeDelete), {\r\n      params: { appid: this.context.appId.toString(), staticName: contentType.StaticName },\r\n    });\r\n  }\r\n\r\n  import(files: File[]) {\r\n    const formData = new FormData();\r\n    for (const file of files) {\r\n      formData.append('File', file);\r\n    }\r\n    return this.http.post<FileUploadResult>(this.apiUrl(webApiTypeImport), formData, {\r\n      params: { appId: this.context.appId.toString(), zoneId: this.context.zoneId.toString() }\r\n    });\r\n  }\r\n\r\n  createGhost(sourceStaticName: string) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiTypeAddGhost), null, {\r\n      params: { appid: this.context.appId.toString(), sourceStaticName },\r\n    });\r\n  }\r\n}\r\n","import { Component, Inject } from '@angular/core';\r\nimport { MatSnackBarRef, MAT_SNACK_BAR_DATA } from '@angular/material/snack-bar';\r\nimport { CodeAndEditionWarningsSnackBarData } from './code-and-edition-warnings.models';\r\nimport { MatButtonModule } from '@angular/material/button';\r\n\r\n@Component({\r\n    selector: 'app-code-and-edition-warnings',\r\n    templateUrl: './code-and-edition-warnings.component.html',\r\n    styleUrls: ['./code-and-edition-warnings.component.scss'],\r\n    standalone: true,\r\n    imports: [MatButtonModule],\r\n})\r\nexport class CodeAndEditionWarningsComponent {\r\n  constructor(\r\n    private snackRef: MatSnackBarRef<CodeAndEditionWarningsComponent>,\r\n    @Inject(MAT_SNACK_BAR_DATA) public snackBarData: CodeAndEditionWarningsSnackBarData,\r\n  ) { }\r\n\r\n  openCodeBehind(): void {\r\n    this.snackBarData.openCodeBehind = true;\r\n    this.snackRef.dismissWithAction();\r\n  }\r\n}\r\n","<div class=\"messages\">\r\n  @if (snackBarData.codeFile) {\r\n    <div>\"{{ snackBarData.fileName }}\" also has a code-behind file \"{{ snackBarData.codeFile }}\".</div>\r\n    <br>\r\n  }\r\n\r\n  @if (snackBarData.otherEditions) {\r\n    <div>\r\n      @if (snackBarData.edition) {\r\n        You are editing \"{{ snackBarData.edition }}\" edition.\r\n      }\r\n      There are {{ snackBarData.otherEditions }} other editions of \"{{ snackBarData.fileName }}\".\r\n      @if (!snackBarData.edition) {\r\n        You may be editing an edition which is not the one you see.\r\n      }\r\n      See <a href=\"https://go.2sxc.org/polymorphism\" target=\"_blank\">docs</a>.\r\n    </div>\r\n  }\r\n</div>\r\n\r\n<div class=\"actions\">\r\n  @if (snackBarData.codeFile) {\r\n    <button mat-button color=\"primary\" (click)=\"openCodeBehind()\">\r\n      Open code-behind file\r\n    </button>\r\n  }\r\n</div>","import { Component, NgZone, OnDestroy, OnInit, ViewChild, ViewContainerRef } from '@angular/core';\r\nimport { MatDialog } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { Title } from '@angular/platform-browser';\r\nimport { ActivatedRoute } from '@angular/router';\r\nimport type * as Monaco from 'monaco-editor';\r\nimport { BehaviorSubject, combineLatest, forkJoin, fromEvent, map, Observable, of, share, switchMap } from 'rxjs';\r\n// tslint:disable-next-line:max-line-length\r\nimport { CreateFileDialogComponent, CreateFileDialogData, CreateFileDialogResult } from '../create-file-dialog';\r\nimport { MonacoEditorComponent } from '../monaco-editor';\r\nimport { BaseComponent } from '../shared/components/base.component';\r\nimport { keyIsShared, keyItems } from '../shared/constants/session.constants';\r\nimport { ViewOrFileIdentifier } from '../shared/models/edit-form.model';\r\nimport { Context } from '../shared/services/context';\r\nimport { CodeAndEditionWarningsComponent } from './code-and-edition-warnings/code-and-edition-warnings.component';\r\nimport { CodeAndEditionWarningsSnackBarData } from './code-and-edition-warnings/code-and-edition-warnings.models';\r\nimport { CodeEditorViewModel, ExplorerOption, Explorers, Tab, ViewInfo, ViewKey } from './code-editor.models';\r\nimport { CreateTemplateParams } from './code-templates/code-templates.models';\r\nimport { FileAsset } from './models/file-asset.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { SnippetsService } from './services/snippets.service';\r\nimport { SourceService } from './services/source.service';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MonacoEditorComponent as MonacoEditorComponent_1 } from '../monaco-editor/monaco-editor.component';\r\nimport { MatProgressSpinnerModule } from '@angular/material/progress-spinner';\r\nimport { CodeSnippetsComponent } from './code-snippets/code-snippets.component';\r\nimport { CodeTemplatesComponent } from './code-templates/code-templates.component';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgClass, AsyncPipe } from '@angular/common';\r\nimport { ClickStopPropagationDirective } from '../shared/directives/click-stop-propagation.directive';\r\nimport { RxHelpers } from '../shared/rxJs/rx.helpers';\r\nimport { TippyDirective } from '../shared/directives/tippy.directive';\r\nimport { ToggleDebugDirective } from '../shared/directives/toggle-debug.directive';\r\n\r\n@Component({\r\n  selector: 'app-code-editor',\r\n  templateUrl: './code-editor.component.html',\r\n  styleUrls: ['./code-editor.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgClass,\r\n    MatIconModule,\r\n    CodeTemplatesComponent,\r\n    CodeSnippetsComponent,\r\n    MatProgressSpinnerModule,\r\n    MonacoEditorComponent_1,\r\n    MatButtonModule,\r\n    AsyncPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n    ToggleDebugDirective,\r\n  ],\r\n  providers: [\r\n    SourceService,\r\n    SnippetsService,\r\n  ],\r\n})\r\nexport class CodeEditorComponent extends BaseComponent implements OnInit, OnDestroy {\r\n  @ViewChild(MonacoEditorComponent) private monacoEditorRef: MonacoEditorComponent;\r\n\r\n  Explorers = Explorers;\r\n  activeExplorer: ExplorerOption = Explorers.Templates;\r\n  monacoOptions: Monaco.editor.IStandaloneEditorConstructionOptions = {\r\n    theme: '2sxc-dark',\r\n    tabSize: 2,\r\n    fixedOverflowWidgets: true,\r\n  };\r\n  viewModel$: Observable<CodeEditorViewModel>;\r\n\r\n  private templates$: BehaviorSubject<FileAsset[]>;\r\n  private activeView$: BehaviorSubject<ViewKey>;\r\n  private openViews$: BehaviorSubject<ViewKey[]>;\r\n  private viewInfos$: BehaviorSubject<ViewInfo[]>;\r\n  private urlItems: ViewOrFileIdentifier[];\r\n\r\n  constructor(\r\n    private context: Context,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private sourceService: SourceService,\r\n    private snippetsService: SnippetsService,\r\n    private zone: NgZone,\r\n    private titleService: Title,\r\n    private dialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n  ) {\r\n    super();\r\n    this.context.init(this.route);\r\n    const codeItems: ViewOrFileIdentifier[] = JSON.parse(sessionStorage.getItem(keyItems));\r\n    const isShared = sessionStorage.getItem(keyIsShared) === 'true' ?? false;\r\n    codeItems.forEach(codeItem => {\r\n      // remove leading \"/\" from path\r\n      if (codeItem.Path.startsWith('/')) {\r\n        codeItem.Path = codeItem.Path.substring(1);\r\n      }\r\n      codeItem.IsShared ??= isShared;\r\n    });\r\n    this.urlItems = codeItems;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.templates$ = new BehaviorSubject<FileAsset[]>([]);\r\n    const initialViews = this.urlItems.map(item => {\r\n      const viewKey: ViewKey = { key: item.EntityId?.toString() ?? item.Path, shared: item.IsShared };\r\n      return viewKey;\r\n    });\r\n    this.activeView$ = new BehaviorSubject<ViewKey>(initialViews[0]);\r\n    this.openViews$ = new BehaviorSubject<ViewKey[]>(initialViews);\r\n    this.viewInfos$ = new BehaviorSubject<ViewInfo[]>([]);\r\n\r\n    this.attachListeners();\r\n\r\n    this.sourceService.getAll().subscribe(templates => {\r\n      this.templates$.next(templates);\r\n    });\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([this.templates$, this.openViews$]).subscribe(([templates, openViews]) => {\r\n        if (templates.length === 0) { return; }\r\n\r\n        let viewInfos = this.viewInfos$.value;\r\n        const notLoaded = openViews.filter(viewKey => !viewInfos.some(v => RxHelpers.objectsEqual(v.viewKey, viewKey)));\r\n        if (notLoaded.length === 0) { return; }\r\n\r\n        forkJoin(\r\n          notLoaded.map(viewKey => {\r\n            // set viewKey in viewInfos to mark that view is being fetched\r\n            const newViewInfo: ViewInfo = {\r\n              viewKey,\r\n            };\r\n            viewInfos = [...viewInfos, newViewInfo];\r\n\r\n            const view$ = this.sourceService.get(viewKey.key, viewKey.shared, this.urlItems).pipe(share());\r\n            const snippets$ = view$.pipe(switchMap(view => this.snippetsService.getSnippets(view)));\r\n            const tooltips$ = view$.pipe(switchMap(view => this.snippetsService.getTooltips(view.Extension.substring(1))));\r\n            return forkJoin([of(viewKey), view$, snippets$, tooltips$]);\r\n          })\r\n        ).subscribe(results => {\r\n          let viewInfos1 = this.viewInfos$.value;\r\n\r\n          results.forEach(([viewKey, view, snippets, tooltips]) => {\r\n            const selectedIndex = viewInfos1.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n            if (selectedIndex < 0) { return; }\r\n\r\n            const newViewInfo: ViewInfo = {\r\n              viewKey,\r\n              view,\r\n              explorerSnipps: snippets.sets,\r\n              editorSnipps: snippets.list,\r\n              tooltips,\r\n              savedCode: view.Code,\r\n            };\r\n            viewInfos1 = [...viewInfos1.slice(0, selectedIndex), newViewInfo, ...viewInfos1.slice(selectedIndex + 1)];\r\n            this.showCodeAndEditionWarnings(viewKey, view, templates);\r\n          });\r\n\r\n          this.viewInfos$.next(viewInfos1);\r\n        });\r\n\r\n        this.viewInfos$.next(viewInfos);\r\n      })\r\n    );\r\n\r\n    this.subscriptions.add(\r\n      combineLatest([this.activeView$, this.viewInfos$]).subscribe(([activeView, viewInfos]) => {\r\n        const active = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, activeView));\r\n        const defaultTitle = 'Code Editor';\r\n        const newTitle = active == null ? defaultTitle : `${active.view?.FileName} - ${defaultTitle}`;\r\n        const oldTitle = this.titleService.getTitle();\r\n        if (newTitle !== oldTitle) {\r\n          this.titleService.setTitle(newTitle);\r\n        }\r\n      })\r\n    );\r\n\r\n    this.viewModel$ = combineLatest([this.templates$, this.activeView$, this.openViews$, this.viewInfos$]).pipe(\r\n      map(([templates, activeView, openViews, viewInfos]) => {\r\n        const tabs = openViews.map(viewKey => {\r\n          const viewInfo = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n          const label: Tab = {\r\n            viewKey,\r\n            label: viewInfo?.view?.FileName ?? viewKey.key,\r\n            isActive: RxHelpers.objectsEqual(viewKey, activeView),\r\n            isModified: viewInfo?.view?.Code !== viewInfo?.savedCode,\r\n            isLoading: viewInfo?.view == null,\r\n          };\r\n          return label;\r\n        });\r\n        const activeViewInfo = viewInfos.find(v => RxHelpers.objectsEqual(v.viewKey, activeView));\r\n\r\n        const viewModel: CodeEditorViewModel = {\r\n          activeView,\r\n          tabs,\r\n          viewKey: activeViewInfo?.viewKey,\r\n          view: activeViewInfo?.view,\r\n          templates,\r\n          explorerSnipps: activeViewInfo?.explorerSnipps,\r\n          editorSnipps: activeViewInfo?.editorSnipps,\r\n          tooltips: activeViewInfo?.tooltips,\r\n        };\r\n        return viewModel;\r\n      }),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.templates$.complete();\r\n    this.activeView$.complete();\r\n    this.openViews$.complete();\r\n    this.viewInfos$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  toggleExplorer(explorer: ExplorerOption): void {\r\n    this.activeExplorer = (this.activeExplorer !== explorer) ? explorer : null;\r\n  }\r\n\r\n  createTemplate(params: CreateTemplateParams): void {\r\n    // This FileLocationDialogComponent dialog is currently never going to be opened because it has been replaced by mat-menu\r\n    // in the code-templates.component.html template. If you want to use the dialog instead of the menu, you need to remove the\r\n    // mat-menu and replace it with a button that opens the dialog with empty parameters.\r\n    // Dialog has been replaced by menu because from update to Angular 16 CreateFileDialogComponent wasn't opening anymore if\r\n    // FileLocationDialogComponent dialog was used.\r\n    // if (params.isShared == null) {\r\n    //   const fileLocationDialogRef = this.dialog.open(FileLocationDialogComponent, {\r\n    //     autoFocus: false,\r\n    //     viewContainerRef: this.viewContainerRef,\r\n    //     width: '650px',\r\n    //   });\r\n    //   fileLocationDialogRef.afterClosed().subscribe((isShared?: boolean) => {\r\n    //     if (isShared == null) { return; }\r\n    //     params.isShared = isShared;\r\n    //     this.createTemplate(params);\r\n    //   });\r\n    //   return;\r\n    // }\r\n\r\n    const createFileDialogData: CreateFileDialogData = {\r\n      folder: params.folder,\r\n      global: params.isShared,\r\n      purpose: params.folder === 'api' || params.folder?.startsWith('api/') ? 'Api' : undefined,\r\n    };\r\n    const createFileDialogRef = this.dialog.open(CreateFileDialogComponent, {\r\n      autoFocus: false,\r\n      data: createFileDialogData,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n\r\n    createFileDialogRef.afterClosed().subscribe((result?: CreateFileDialogResult) => {\r\n      if (!result) { return; }\r\n\r\n      this.sourceService.create(result.name, params.isShared, result.templateKey).subscribe(() => {\r\n        this.sourceService.getAll().subscribe(files => {\r\n          this.templates$.next(files);\r\n        });\r\n      });\r\n    });\r\n  }\r\n\r\n  insertSnippet(snippet: string): void {\r\n    this.monacoEditorRef?.insertSnippet(snippet);\r\n  }\r\n\r\n  codeChanged(code: string, viewKey: ViewKey): void {\r\n    let viewInfos = this.viewInfos$.value;\r\n    const selectedIndex = viewInfos.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n    const selectedViewInfo = viewInfos[selectedIndex];\r\n    const newViewInfo: ViewInfo = {\r\n      ...selectedViewInfo,\r\n      view: {\r\n        ...selectedViewInfo.view,\r\n        Code: code,\r\n      },\r\n    };\r\n    viewInfos = [...viewInfos.slice(0, selectedIndex), newViewInfo, ...viewInfos.slice(selectedIndex + 1)];\r\n    this.viewInfos$.next(viewInfos);\r\n  }\r\n\r\n  openView(viewKey: ViewKey): void {\r\n    // fix viewKey because it can be a templateId or a path, and file might already be open\r\n    viewKey = this.viewInfos$.value.find(\r\n      v => !RxHelpers.objectsEqual(v.viewKey, viewKey) && v.view?.FileName === viewKey.key && v.view?.IsShared === viewKey.shared\r\n    )?.viewKey ?? viewKey;\r\n\r\n    const oldActiveView = this.activeView$.value;\r\n    if (!RxHelpers.objectsEqual(oldActiveView, viewKey)) {\r\n      this.activeView$.next(viewKey);\r\n    }\r\n    const oldOpenViews = this.openViews$.value;\r\n    if (!oldOpenViews.some(v => RxHelpers.objectsEqual(v, viewKey))) {\r\n      const newOpenViews = [...oldOpenViews, viewKey];\r\n      this.openViews$.next(newOpenViews);\r\n    }\r\n  }\r\n\r\n  closeEditor(viewKey: ViewKey): void {\r\n    const oldOpenViews = this.openViews$.value;\r\n    const newOpenViews = oldOpenViews.filter(key => !RxHelpers.objectsEqual(key, viewKey));\r\n\r\n    const oldActiveView = this.activeView$.value;\r\n    if (RxHelpers.objectsEqual(oldActiveView, viewKey)) {\r\n      const newActiveView = oldOpenViews[oldOpenViews.findIndex(v => RxHelpers.objectsEqual(v, oldActiveView)) - 1] ?? newOpenViews[0];\r\n      this.activeView$.next(newActiveView);\r\n    }\r\n\r\n    this.openViews$.next(newOpenViews);\r\n  }\r\n\r\n  save(viewKey?: ViewKey): void {\r\n    viewKey ??= this.activeView$.value;\r\n    const viewInfo = this.viewInfos$.value.find(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n    if (viewInfo?.view == null) { return; }\r\n\r\n    this.snackBar.open('Saving...');\r\n    const codeToSave = viewInfo.view.Code;\r\n    this.sourceService.save(viewKey.key, viewKey.shared, viewInfo.view, this.urlItems).subscribe({\r\n      next: res => {\r\n        if (!res) {\r\n          this.snackBar.open('Failed', null, { duration: 2000 });\r\n          return;\r\n        }\r\n\r\n        let newViewInfos = [...this.viewInfos$.value];\r\n        const selectedIndex = newViewInfos.findIndex(v => RxHelpers.objectsEqual(v.viewKey, viewKey));\r\n        if (selectedIndex < 0) { return; }\r\n\r\n        const selectedViewInfo = newViewInfos[selectedIndex];\r\n        const newViewInfo: ViewInfo = {\r\n          ...selectedViewInfo,\r\n          savedCode: codeToSave,\r\n        };\r\n        newViewInfos = [...newViewInfos.slice(0, selectedIndex), newViewInfo, ...newViewInfos.slice(selectedIndex + 1)];\r\n        this.viewInfos$.next(newViewInfos);\r\n        this.snackBar.open('Saved', null, { duration: 2000 });\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Failed', null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  /** Show info about editions if other files with the same name exist */\r\n  private showCodeAndEditionWarnings(viewKey: ViewKey, view: SourceView, files: FileAsset[]): void {\r\n    const pathAndName = view.FileName;\r\n    const pathSeparator = pathAndName.indexOf('/') > -1 ? pathAndName.lastIndexOf('/') + 1 : 0;\r\n    const pathWithSlash = pathSeparator === 0 ? '' : pathAndName.substring(0, pathSeparator);\r\n    const fullName = pathAndName.substring(pathSeparator);\r\n    const name = fullName.substring(0, fullName.length - view.Extension.length);\r\n    const nameCode = name + '.code' + view.Extension;\r\n    // find out if we also have a code file\r\n    const codeFile = files.find(file => file.Path === pathWithSlash + nameCode && file.Shared === view.IsShared);\r\n    const otherEditions = files.filter(file => file.Path.endsWith(fullName) && file.Shared === view.IsShared).length - 1;\r\n\r\n    if (codeFile || otherEditions) {\r\n      const snackBarData: CodeAndEditionWarningsSnackBarData = {\r\n        fileName: fullName,\r\n        codeFile: codeFile?.Path,\r\n        edition: this.urlItems\r\n          .find(i => i.EntityId?.toString() === viewKey.key && i.IsShared === view.IsShared && i.Path === view.FileName)?.Edition,\r\n        otherEditions,\r\n        openCodeBehind: false,\r\n      };\r\n      const snackBarRef = this.snackBar.openFromComponent(CodeAndEditionWarningsComponent, {\r\n        data: snackBarData,\r\n        duration: 10000,\r\n      });\r\n\r\n      snackBarRef.onAction().subscribe(() => {\r\n        if ((snackBarRef.containerInstance.snackBarConfig.data as CodeAndEditionWarningsSnackBarData).openCodeBehind) {\r\n          const openViewKey: ViewKey = { key: codeFile?.Path, shared: codeFile?.Shared };\r\n          this.openView(openViewKey);\r\n        }\r\n      });\r\n    }\r\n  }\r\n\r\n  private attachListeners(): void {\r\n    this.zone.runOutsideAngular(() => {\r\n      this.subscriptions.add(\r\n        fromEvent<BeforeUnloadEvent>(window, 'beforeunload').subscribe(event => {\r\n          const allSaved = !this.viewInfos$.value.some(v => v.view != null && v.view.Code !== v.savedCode);\r\n          if (allSaved) { return; }\r\n          event.preventDefault();\r\n          event.returnValue = ''; // fix for Chrome\r\n        })\r\n      );\r\n      this.subscriptions.add(\r\n        fromEvent<KeyboardEvent>(window, 'keydown').subscribe(event => {\r\n          const CTRL_S = event.keyCode === 83 && (navigator.platform.match('Mac') ? event.metaKey : event.ctrlKey);\r\n          if (!CTRL_S) { return; }\r\n          event.preventDefault();\r\n          this.zone.run(() => { this.save(); });\r\n        })\r\n      );\r\n    });\r\n  }\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"editor-root\" appToggleDebug [ngClass]=\"{ 'sxc-dark': monacoOptions.theme === '2sxc-dark' }\">\r\n    <div class=\"editor-side-toolbar\">\r\n      <div class=\"button\" [ngClass]=\"{ 'active': activeExplorer === Explorers.Templates }\" tippy=\"Templates\"\r\n        (click)=\"toggleExplorer(Explorers.Templates)\">\r\n        <mat-icon>file_copy</mat-icon>\r\n      </div>\r\n      <div class=\" button\" [ngClass]=\"{ 'active': activeExplorer === Explorers.Snippets }\" tippy=\"Snippets\"\r\n        (click)=\"toggleExplorer(Explorers.Snippets)\">\r\n        <mat-icon>code</mat-icon>\r\n      </div>\r\n    </div>\r\n    <app-code-templates [hidden]=\"activeExplorer !== Explorers.Templates\" [view]=\"vm.view\" [templates]=\"vm.templates\"\r\n      (openView)=\"openView($event)\" (createTemplate)=\"createTemplate($event)\">\r\n    </app-code-templates>\r\n    <app-code-snippets [hidden]=\"activeExplorer !== Explorers.Snippets\" [snippets]=\"vm.explorerSnipps\"\r\n      (insertSnippet)=\"insertSnippet($event)\">\r\n    </app-code-snippets>\r\n    <div class=\"editor-group\">\r\n      @if (vm.tabs.length > 0) {\r\n        <div class=\"tabs-container fancy-scrollbar-dark\">\r\n          @for (tab of vm.tabs; track tab) {\r\n            <div class=\"tab\" [ngClass]=\"{\r\n              'active': tab.isActive,\r\n              'modified': tab.isModified,\r\n              'loading': tab.isLoading\r\n              }\" (click)=\"openView(tab.viewKey)\">\r\n              <div class=\"tab-label-container\" [tippy]=\"tab.label\" tippyShowDelay=\"750\">\r\n                @if (tab.viewKey.shared) {\r\n                  <mat-icon class=\"icon-shared\">share</mat-icon>\r\n                }\r\n                <span class=\"tab-label\">{{ tab.label }}</span>\r\n              </div>\r\n              <div class=\"tab-actions-container\">\r\n                @if (tab.isModified) {\r\n                  <mat-icon class=\"tab-action icon-modified\" fontSet=\"material-icons\">circle</mat-icon>\r\n                }\r\n                @if (tab.isLoading) {\r\n                  <mat-spinner class=\"spinner\" mode=\"indeterminate\" diameter=\"14\" color=\"white\">\r\n                  </mat-spinner>\r\n                }\r\n                <mat-icon class=\"tab-action icon-close\" tippy=\"Close\" appClickStopPropagation\r\n                (click)=\"closeEditor(tab.viewKey)\">close</mat-icon>\r\n              </div>\r\n            </div>\r\n          }\r\n        </div>\r\n      }\r\n      @if (vm.view) {\r\n        <app-monaco-editor [filename]=\"vm.view.FileName\" [value]=\"vm.view.Code\"\r\n          (valueChanged)=\"codeChanged($event, vm.viewKey)\" [options]=\"monacoOptions\" [snippets]=\"vm.editorSnipps\"\r\n          [tooltips]=\"vm.tooltips\" [autoFocus]=\"true\">\r\n        </app-monaco-editor>\r\n      }\r\n    </div>\r\n    @if (vm.activeView) {\r\n      <button mat-fab mat-elevation-z24 tippy=\"Click to save or CTRL + S\" (click)=\"save()\">\r\n        <mat-icon>done</mat-icon>\r\n      </button>\r\n    }\r\n  </div>\r\n}","import { FileAsset } from './models/file-asset.model';\r\nimport { Snippet, SnippetsSets } from './models/snippet.model';\r\nimport { SourceView } from './models/source-view.model';\r\nimport { Tooltip } from './models/tooltip.model';\r\n\r\nexport interface Tab {\r\n  viewKey: ViewKey;\r\n  label: string;\r\n  isActive: boolean;\r\n  isModified: boolean;\r\n  isLoading: boolean;\r\n}\r\n\r\nexport interface CodeEditorViewModel {\r\n  activeView: ViewKey;\r\n  tabs: Tab[];\r\n  viewKey: ViewKey;\r\n  view?: SourceView;\r\n  templates: FileAsset[];\r\n  explorerSnipps: SnippetsSets;\r\n  editorSnipps: Snippet[];\r\n  tooltips?: Tooltip[];\r\n}\r\n\r\nexport const Explorers = {\r\n  Templates: 'Templates',\r\n  Snippets: 'Snippets',\r\n} as const;\r\n\r\nexport type ExplorerOption = typeof Explorers[keyof typeof Explorers];\r\n\r\nexport interface ViewInfo {\r\n  viewKey: ViewKey;\r\n  view?: SourceView;\r\n  explorerSnipps?: SnippetsSets;\r\n  editorSnipps?: Snippet[];\r\n  tooltips?: Tooltip[];\r\n  savedCode?: string;\r\n}\r\n\r\nexport interface ViewKey {\r\n  /** ViewKey is templateId or path */\r\n  key: string;\r\n  shared: boolean;\r\n}\r\n","import { Component, EventEmitter, Input, Output } from '@angular/core';\r\nimport { SnippetsSets } from '../models/snippet.model';\r\nimport { ObjectToArrayPipe } from './object-to-array.pipe';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\nimport { KeyValuePipe } from '@angular/common';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\n\r\n@Component({\r\n  selector: 'app-code-snippets',\r\n  templateUrl: './code-snippets.component.html',\r\n  styleUrls: ['./code-snippets.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatIconModule,\r\n    MatRippleModule,\r\n    KeyValuePipe,\r\n    TranslateModule,\r\n    ObjectToArrayPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n    SafeHtmlPipe,\r\n  ],\r\n})\r\nexport class CodeSnippetsComponent {\r\n  @Input() snippets: SnippetsSets;\r\n  @Output() insertSnippet: EventEmitter<string> = new EventEmitter();\r\n  toggledSections: string[] = [];\r\n  toggledFolders: string[] = [];\r\n  toggledInfos: string[] = [];\r\n  toggledMores: string[] = [];\r\n\r\n  constructor() { }\r\n\r\n  addSnippet(snippet: string): void {\r\n    this.insertSnippet.emit(snippet);\r\n  }\r\n\r\n  toggleSection(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledSections);\r\n  }\r\n\r\n  toggleFolder(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledFolders);\r\n  }\r\n\r\n  toggleInfo(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledInfos);\r\n  }\r\n\r\n  toggleMore(key: string): void {\r\n    ArrayHelpers.toggleInArray(key, this.toggledMores);\r\n  }\r\n}\r\n","<div class=\"editor-active-explorer fancy-scrollbar-dark\">\r\n  @for (section of snippets | keyvalue; track section) {\r\n    <div>\r\n      <div class=\"collapsible-header section\" [tippy]=\"'SourceEditorSnippets.' + section.key + '.Help' | translate\"\r\n        tippyShowDelay=\"750\" (click)=\"toggleSection(section.key)\">\r\n        <mat-icon>\r\n          {{ toggledSections.includes(section.key) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n        </mat-icon>\r\n        <span>{{ 'SourceEditorSnippets.' + section.key + '.Title' | translate }}</span>\r\n      </div>\r\n      @if (toggledSections.includes(section.key)) {\r\n        @for (folder of section.value | keyvalue; track folder) {\r\n          <div>\r\n            <div class=\"collapsible-header folder\"\r\n              [tippy]=\"'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Help' | translate\" tippyShowDelay=\"750\"\r\n              (click)=\"toggleFolder(folder.key)\">\r\n              <mat-icon>\r\n                {{ toggledFolders.includes(folder.key) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n              </mat-icon>\r\n              <span>{{ 'SourceEditorSnippets.' + section.key + '.' + folder.key + '.Title' | translate }}</span>\r\n            </div>\r\n            @if (toggledFolders.includes(folder.key)) {\r\n              @for (snippet of (folder.value | objectToArray); track snippet) {\r\n                <div class=\"snippet\">\r\n                  <div class=\"snippet-label\">\r\n                    <div matRipple class=\"text\" [tippy]=\"snippet.snip\" tippyShowDelay=\"750\"\r\n                      (click)=\"addSnippet(snippet.snip)\">\r\n                      {{ snippet.label }}\r\n                    </div>\r\n                    @if (snippet.more) {\r\n                      <mat-icon tippy=\"Show More\" tippyShowDelay=\"750\" (click)=\"toggleMore(snippet.key)\">\r\n                        {{ toggledMores.includes(snippet.key) ? 'more_vert' : 'more_horiz' }}\r\n                      </mat-icon>\r\n                    }\r\n                    <mat-icon tippy=\"Show Help\" tippyShowDelay=\"750\" appClickStopPropagation\r\n                    (click)=\"toggleInfo(snippet.key)\">info</mat-icon>\r\n                  </div>\r\n                  @if (toggledInfos.includes(snippet.key)) {\r\n                    <div class=\"snippet-help\">\r\n                      <div class=\"text\" [innerHTML]=\"snippet.help | safeHtml\"></div>\r\n                      @for (link of snippet.links; track link) {\r\n                        <div>\r\n                          <a [href]=\"link.url\" target=\"_blank\">{{ link.name }}</a>\r\n                        </div>\r\n                      }\r\n                    </div>\r\n                  }\r\n                  @if (toggledMores.includes(snippet.key)) {\r\n                    @for (more of (snippet.more | objectToArray); track more) {\r\n                      <div>\r\n                        <div class=\"snippet-label\">\r\n                          <div matRipple class=\"text text-more\" [tippy]=\"more.snip\" tippyShowDelay=\"750\"\r\n                            (click)=\"addSnippet(more.snip)\">\r\n                            {{ more.label }}\r\n                          </div>\r\n                          <mat-icon tippy=\"Show Help\" tippyShowDelay=\"750\" appClickStopPropagation\r\n                          (click)=\"toggleInfo(more.key)\">info</mat-icon>\r\n                        </div>\r\n                        @if (toggledInfos.includes(more.key)) {\r\n                          <div class=\"snippet-help snippet-help-more\">\r\n                            <div class=\"text\" [innerHTML]=\"more.help | safeHtml\"></div>\r\n                            @for (link of more.links; track link) {\r\n                              <div>\r\n                                <a [href]=\"link.url\" target=\"_blank\">{{ link.name }}</a>\r\n                              </div>\r\n                            }\r\n                          </div>\r\n                        }\r\n                      </div>\r\n                    }\r\n                  }\r\n                </div>\r\n              }\r\n            }\r\n          </div>\r\n        }\r\n      }\r\n    </div>\r\n  }\r\n</div>","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n    name: 'objectToArray',\r\n    standalone: true\r\n})\r\nexport class ObjectToArrayPipe implements PipeTransform {\r\n  transform(obj: Record<string, any> | Record<string, any>[]): Record<string, any>[] {\r\n    if (obj == null) { return; }\r\n\r\n    if (Array.isArray(obj)) { return obj; }\r\n\r\n    return Object.values(obj);\r\n  }\r\n}\r\n","import { Component, EventEmitter, Input, OnChanges, Output, SimpleChanges } from '@angular/core';\r\nimport { ViewKey } from '../code-editor.models';\r\nimport { FileAsset } from '../models/file-asset.model';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { calculateTreeAppShared } from './code-templates.helpers';\r\nimport { appSharedRoot, CreateTemplateParams } from './code-templates.models';\r\nimport { SortItemsPipe } from './order-items.pipe';\r\nimport { DepthPaddingPipe } from './depth-padding.pipe';\r\nimport { MatMenuModule } from '@angular/material/menu';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { NgTemplateOutlet, NgClass } from '@angular/common';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { ArrayHelpers } from '../../shared/helpers/array.helpers';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n  selector: 'app-code-templates',\r\n  templateUrl: './code-templates.component.html',\r\n  styleUrls: ['./code-templates.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    NgTemplateOutlet,\r\n    NgClass,\r\n    MatIconModule,\r\n    MatButtonModule,\r\n    MatMenuModule,\r\n    DepthPaddingPipe,\r\n    SortItemsPipe,\r\n    ClickStopPropagationDirective,\r\n    TippyDirective,\r\n  ],\r\n})\r\nexport class CodeTemplatesComponent implements OnChanges {\r\n  @Input() view?: SourceView;\r\n  @Input() templates: FileAsset[];\r\n  @Output() openView: EventEmitter<ViewKey> = new EventEmitter();\r\n  @Output() createTemplate: EventEmitter<CreateTemplateParams> = new EventEmitter();\r\n  tree: TreeItem[];\r\n  toggledItemsApp: string[] = [];\r\n  toggledItemsShared: string[] = [];\r\n\r\n  constructor() { }\r\n\r\n  ngOnChanges(changes: SimpleChanges): void {\r\n    if (changes.templates != null) {\r\n      this.tree = calculateTreeAppShared(this.templates);\r\n    }\r\n    if (changes.view != null) {\r\n      const previousView: SourceView = changes.view?.previousValue;\r\n      if (previousView) {\r\n        this.toggleItem(previousView.FileName, previousView.IsShared);\r\n      }\r\n      if (this.view) {\r\n        this.showFileInTree(this.view.FileName, this.view.IsShared);\r\n      }\r\n    }\r\n  }\r\n\r\n  isToggled(path: string, isShared: boolean): boolean {\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    return toggledItems.includes(path);\r\n  }\r\n\r\n  openTemplate(path: string, isShared: boolean): void {\r\n    const viewKey: ViewKey = { key: path, shared: isShared };\r\n    this.openView.emit(viewKey);\r\n  }\r\n\r\n  toggleItem(path: string, isShared: boolean): void {\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    ArrayHelpers.toggleInArray(path, toggledItems);\r\n  }\r\n\r\n  addFile(folder?: string, isShared?: boolean): void {\r\n    const params: CreateTemplateParams = { folder, isShared };\r\n    this.createTemplate.emit(params);\r\n  }\r\n\r\n  private showFileInTree(file: string, isShared: boolean): void {\r\n    if (file == null) { return; }\r\n    const toggledItems = isShared ? this.toggledItemsShared : this.toggledItemsApp;\r\n    if (toggledItems.includes(file)) { return; }\r\n\r\n    const paths = [appSharedRoot, ...file.split('/')];\r\n    let pathFromRoot = '';\r\n    for (const path of paths) {\r\n      pathFromRoot = !pathFromRoot ? path : `${pathFromRoot}/${path}`;\r\n      if (toggledItems.includes(pathFromRoot)) { continue; }\r\n      this.toggleItem(pathFromRoot, isShared);\r\n    }\r\n  }\r\n}\r\n","<div class=\"editor-active-explorer fancy-scrollbar-dark explorer-wrapper\">\r\n\r\n  <div>\r\n    @for (item of (tree | sortItems); track item) {\r\n      <ng-container *ngTemplateOutlet=\"fileOrFolder; context: {item: item}\"></ng-container>\r\n    }\r\n\r\n    <ng-template #fileOrFolder let-item=\"item\">\r\n\r\n      @if (!item.isFolder) {\r\n        <div class=\"file\" [style]=\"item.depth | depthPadding: item.isFolder\"\r\n          [ngClass]=\"{'active': isToggled(item.pathFromRoot, item.isShared) }\" [tippy]=\"item.name\" tippyShowDelay=\"750\"\r\n          (click)=\"openTemplate(item.pathFromRoot, item.isShared)\">\r\n          {{ item.name }}\r\n        </div>\r\n      }\r\n\r\n      @if (item.isFolder) {\r\n        <div>\r\n          <div class=\"folder-name-wrapper\" [ngClass]=\"{'app-shared-root': item.depth < 0}\"\r\n            [style]=\"item.depth + 1 | depthPadding: item.isFolder\" (click)=\"toggleItem(item.pathFromRoot, item.isShared)\">\r\n            <div class=\"folder-name\" [tippy]=\"item.name\" tippyShowDelay=\"750\">\r\n              <mat-icon> {{ isToggled(item.pathFromRoot, item.isShared) ? 'keyboard_arrow_down' : 'keyboard_arrow_right' }}\r\n              </mat-icon>\r\n              <span>{{ item.name }}</span>\r\n            </div>\r\n            <div class=\"add-item\" tippy=\"Create file in this folder\" tippyShowDelay=\"750\" appClickStopPropagation\r\n              (click)=\"addFile(item.pathFromRoot, item.isShared)\">\r\n              <mat-icon>add</mat-icon>\r\n            </div>\r\n          </div>\r\n          @if (isToggled(item.pathFromRoot, item.isShared)) {\r\n            @for (item1 of (item.children | sortItems); track item1) {\r\n              <ng-container *ngTemplateOutlet=\"fileOrFolder; context: {item: item1}\"></ng-container>\r\n            }\r\n          }\r\n        </div>\r\n      }\r\n\r\n    </ng-template>\r\n  </div>\r\n\r\n  <div class=\"create-button-wrapper\">\r\n    <button mat-icon-button [matMenuTriggerFor]=\"menu\" tippy=\"Create file\" tippyPlacement=\"left\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    <mat-menu #menu=\"matMenu\">\r\n      <button mat-menu-item  (click)=\"addFile('', false)\">\r\n        <span>App</span>\r\n      </button>\r\n      <button mat-menu-item  (click)=\"addFile('', true)\">\r\n        <span>Shared (global)</span>\r\n      </button>\r\n    </mat-menu>\r\n  </div>\r\n</div>","import { FileAsset } from '../models/file-asset.model';\r\nimport { TreeItem } from '../models/tree-item.model';\r\nimport { appSharedRoot } from './code-templates.models';\r\n\r\nexport function calculateTreeAppShared(templates: FileAsset[]): TreeItem[] {\r\n  const tree: TreeItem[] = [\r\n    {\r\n      depth: -1,\r\n      name: 'App Files',\r\n      pathFromRoot: appSharedRoot,\r\n      isShared: false,\r\n      isFolder: true,\r\n      children: calculateTree(templates.filter(f => !f.Shared)),\r\n    },\r\n    {\r\n      depth: -1,\r\n      name: 'Shared App Files',\r\n      pathFromRoot: appSharedRoot,\r\n      isShared: true,\r\n      isFolder: true,\r\n      children: calculateTree(templates.filter(f => f.Shared)),\r\n    },\r\n  ];\r\n  return tree;\r\n}\r\n\r\nfunction calculateTree(templates: FileAsset[]): TreeItem[] {\r\n  if (!templates) { return []; }\r\n\r\n  const tree: TreeItem[] = [];\r\n  for (const template of templates) {\r\n    let parent: TreeItem[] = tree;\r\n    const paths = template.Path.split('/');\r\n    const last = paths[paths.length - 1];\r\n    let pathFromRoot = '';\r\n    for (let i = 0; i < paths.length; i++) {\r\n      const path = paths[i];\r\n      pathFromRoot += i ? `/${path}` : path;\r\n      const existing = parent.find(item => item.name === path);\r\n      if (existing) {\r\n        parent = existing.children;\r\n      } else {\r\n        const item: TreeItem = {\r\n          depth: i,\r\n          name: path,\r\n          pathFromRoot,\r\n          isShared: template.Shared,\r\n          isFolder: path !== last,\r\n          ...(path !== last && { children: [] }),\r\n        };\r\n        parent.push(item);\r\n        parent = item.children;\r\n      }\r\n    }\r\n  }\r\n\r\n  return tree;\r\n}\r\n","export const appSharedRoot = '' as const;\r\n\r\nexport interface CreateTemplateParams {\r\n  folder?: string;\r\n  isShared?: boolean;\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { DomSanitizer, SafeStyle } from '@angular/platform-browser';\r\n\r\n@Pipe({\r\n    name: 'depthPadding',\r\n    standalone: true\r\n})\r\nexport class DepthPaddingPipe implements PipeTransform {\r\n\r\n  constructor(private sanitizer: DomSanitizer) { }\r\n\r\n  transform(depth: number, isFolder: boolean): SafeStyle {\r\n    let padding: number;\r\n    if (isFolder) {\r\n      padding = depth * 8;\r\n    } else {\r\n      padding = (depth === 0) ? 8 : (depth * 8 + 16);\r\n    }\r\n    return this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${padding}px;`);\r\n  }\r\n}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { TreeItem } from '../models/tree-item.model';\r\n\r\n/** Sorts folders before files */\r\n@Pipe({\r\n    name: 'sortItems',\r\n    standalone: true\r\n})\r\nexport class SortItemsPipe implements PipeTransform {\r\n\r\n  transform(items: TreeItem[]) {\r\n    if (items == null) { return items; }\r\n\r\n    items.sort((item1, item2) => {\r\n      if (item1.isFolder < item2.isFolder) {\r\n        return 1;\r\n      } else if (item1.isFolder > item2.isFolder) {\r\n        return -1;\r\n      } else {\r\n        return 0;\r\n      }\r\n    });\r\n    return items;\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport cloneDeep from 'lodash-es/cloneDeep';\r\nimport { map, Observable } from 'rxjs';\r\nimport { DataTypeConstants } from '../../content-type-fields/constants/data-type.constants';\r\nimport { Field } from '../../content-type-fields/models/field.model';\r\nimport { webApiFieldsAll } from '../../content-type-fields/services/content-types-fields.service';\r\nimport { MoreSnippet, SetSnippet, SetSnippetLink, Snippet, SnippetsSets, SnippetsSubSubSets } from '../models/snippet.model';\r\nimport { SourceView } from '../models/source-view.model';\r\nimport { Tooltip } from '../models/tooltip.model';\r\nimport { InputTypeStrict } from '../../content-type-fields/constants/input-type.constants';\r\n\r\nexport const inlineHelp = 'admin/Code/InlineHelp';\r\n\r\n@Injectable()\r\nexport class SnippetsService {\r\n\r\n  constructor(private http: HttpClient, private dnnContext: DnnContext, private translate: TranslateService) { }\r\n\r\n  getTooltips(language: string): Observable<Tooltip[]> {\r\n    return this.http.get<Tooltip[]>(this.dnnContext.$2sxc.http.apiUrl(inlineHelp), {\r\n      params: {\r\n        language,\r\n      },\r\n    });\r\n  }\r\n\r\n  getSnippets(view: SourceView): Observable<{ list: Snippet[]; sets: SnippetsSets; }> {\r\n    return this.http.get<{ snippets: Snippet[] }>('../ng-assets/snippets.json.js').pipe(\r\n      map(res => {\r\n        const relevant = this.filterAwayNotNeededSnippetsList(res.snippets, view);\r\n        const standardAndInputSnips = this.extractInputTypeSnippets(relevant);\r\n        const sets = this.initSnippetsWithConfig(standardAndInputSnips.standardArray, view, standardAndInputSnips.inputTypeSnippets);\r\n        const sorted: { list: Snippet[]; sets: SnippetsSets; } = {\r\n          list: standardAndInputSnips.standardArray,\r\n          sets\r\n        };\r\n        return sorted;\r\n      }),\r\n    );\r\n  }\r\n\r\n  /** Scan the list for sets starting with @ or [ and filter if not needed right now */\r\n  private filterAwayNotNeededSnippetsList(list: Snippet[], view: SourceView): Snippet[] {\r\n    const keyPrefixes = ['@', '['];\r\n    const keyPrefixIndex = (v: SourceView) => (v.Type.indexOf('Razor') > -1) ? 0 : 1;\r\n\r\n    const newList: Snippet[] = [];\r\n    for (const itm of list) {\r\n      const setHasPrefix = keyPrefixes.indexOf(itm.set[0]);\r\n      if (setHasPrefix === -1 || (setHasPrefix === keyPrefixIndex(view))) {\r\n        // if necessary, remove first char\r\n        if (setHasPrefix === keyPrefixIndex(view)) {\r\n          itm.set = itm.set.substring(1);\r\n        }\r\n        newList.push(itm);\r\n      }\r\n    }\r\n    return newList;\r\n  }\r\n\r\n  private extractInputTypeSnippets(list: Snippet[]): { standardArray: Snippet[]; inputTypeSnippets: Record<string, Snippet[]>; } {\r\n    const standardArray: Snippet[] = [];\r\n    const inputTypeArray: Snippet[] = [];\r\n\r\n    for (const itm of list) {\r\n      const systemSnippet = itm.set[0] === '\\\\';\r\n      if (!systemSnippet) {\r\n        standardArray.push(itm);\r\n      } else {\r\n        itm.set = itm.set.substring(1);\r\n        inputTypeArray.push(itm);\r\n      }\r\n    }\r\n    const inputTypeSnippets = this.catalogInputTypeSnippets(inputTypeArray);\r\n    const extracted: { standardArray: Snippet[]; inputTypeSnippets: Record<string, Snippet[]>; } = {\r\n      standardArray,\r\n      inputTypeSnippets,\r\n    };\r\n    return extracted;\r\n  }\r\n\r\n  private catalogInputTypeSnippets(list: Snippet[]): Record<string, Snippet[]> {\r\n    const inputTypeList: Record<string, Snippet[]> = {};\r\n    for (const itm of list) {\r\n      if (inputTypeList[itm.subset] === undefined) {\r\n        inputTypeList[itm.subset] = [];\r\n      }\r\n      inputTypeList[itm.subset].push(itm);\r\n    }\r\n    return inputTypeList;\r\n  }\r\n\r\n  private initSnippetsWithConfig(\r\n    standardArray: Snippet[],\r\n    templateConfiguration: SourceView,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): SnippetsSets {\r\n    const sets = this.makeTree(standardArray);\r\n\r\n    // retrieve all relevant content-types and infos\r\n    sets.Content = Object.assign({}, sets.Content, { Fields: {}, PresentationFields: {} });\r\n    if (templateConfiguration.TypeContent) {\r\n      this.loadContentType(\r\n        sets.Content.Fields as SnippetsSubSubSets,\r\n        templateConfiguration.TypeContent,\r\n        'Content',\r\n        templateConfiguration,\r\n        inputTypeSnippets,\r\n      );\r\n    }\r\n    if (templateConfiguration.TypeContentPresentation) {\r\n      this.loadContentType(\r\n        sets.Content.PresentationFields as SnippetsSubSubSets,\r\n        templateConfiguration.TypeContentPresentation,\r\n        'Content.Presentation',\r\n        templateConfiguration,\r\n        inputTypeSnippets,\r\n      );\r\n    }\r\n\r\n    if (templateConfiguration.HasList) {\r\n      sets.List = Object.assign({}, sets.List, { Fields: {}, PresentationFields: {} });\r\n      if (templateConfiguration.TypeList) {\r\n        this.loadContentType(\r\n          sets.List.Fields as SnippetsSubSubSets,\r\n          templateConfiguration.TypeList,\r\n          'Header',\r\n          templateConfiguration,\r\n          inputTypeSnippets,\r\n        );\r\n      }\r\n      if (templateConfiguration.TypeListPresentation) {\r\n        this.loadContentType(\r\n          sets.List.PresentationFields as SnippetsSubSubSets,\r\n          templateConfiguration.TypeListPresentation,\r\n          'Header.Presentation',\r\n          templateConfiguration,\r\n          inputTypeSnippets,\r\n        );\r\n      }\r\n    } else {\r\n      delete sets.List;\r\n    }\r\n\r\n    // maybe App-infos\r\n    if (templateConfiguration.HasApp) {\r\n      sets.App.Resources = {};\r\n      sets.App.Settings = {};\r\n      this.loadContentType(sets.App.Resources, 'App-Resources', 'App.Resources', templateConfiguration, inputTypeSnippets);\r\n      this.loadContentType(sets.App.Settings, 'App-Settings', 'App.Settings', templateConfiguration, inputTypeSnippets);\r\n    }\r\n\r\n    return sets;\r\n  }\r\n\r\n  /** Convert the list into a tree with set/subset/item */\r\n  private makeTree(list: Snippet[]): SnippetsSets {\r\n    const tree: SnippetsSets = {};\r\n    for (const o of list) {\r\n      if (tree[o.set] === undefined) {\r\n        tree[o.set] = {};\r\n      }\r\n      if (tree[o.set][o.subset] === undefined) {\r\n        tree[o.set][o.subset] = [];\r\n      }\r\n      const reformatted: SetSnippet = {\r\n        key: o.name,\r\n        label: this.label(o.set, o.subset, o.name),\r\n        snip: o.content,\r\n        help: o.help || this.help(o.set, o.subset, o.name),\r\n        links: this.linksList(o.links)\r\n      };\r\n\r\n      (tree[o.set][o.subset] as SetSnippet[]).push(reformatted);\r\n    }\r\n    return tree;\r\n  }\r\n\r\n  private label(set: string, subset: string, snip: string): string {\r\n    const key = this.getHelpKey(set, subset, snip, '.Key');\r\n\r\n    let result: string = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = snip;\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private getHelpKey(set: string, subset: string, snip: string, addition: string): string {\r\n    return 'SourceEditorSnippets' + '.' + set + '.' + subset + '.' + snip + addition;\r\n  }\r\n\r\n  private help(set: string, subset: string, snip: string): string {\r\n    const key = this.getHelpKey(set, subset, snip, '.Help');\r\n\r\n    let result: string = this.translate.instant(key);\r\n    if (result === key) {\r\n      result = '';\r\n    }\r\n    return result;\r\n  }\r\n\r\n  private linksList(linksString: string): SetSnippetLink[] {\r\n    if (!linksString) { return null; }\r\n\r\n    const links: SetSnippetLink[] = [];\r\n    const llist = linksString.split('\\n');\r\n    for (const l of llist) {\r\n      const pair = l.split(':');\r\n      if (pair.length === 3) {\r\n        const link: SetSnippetLink = {\r\n          name: pair[0].trim(),\r\n          url: pair[1].trim() + ':' + pair[2].trim(),\r\n        };\r\n        links.push(link);\r\n      }\r\n    }\r\n    if (links.length === 0) { return null; }\r\n    return links;\r\n  }\r\n\r\n  /** spm TODO: this happens after snippets are calculated for the first time. Needs to be fixed */\r\n  private loadContentType(\r\n    target: SnippetsSubSubSets,\r\n    type: string,\r\n    prefix: string,\r\n    templateConfiguration: SourceView,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): void {\r\n    this.getFields(templateConfiguration.AppId, type).subscribe(fields => {\r\n      // first add common items if the content-type actually exists\r\n      for (const field of fields) {\r\n        const fieldname = field.StaticName;\r\n        target[fieldname] = {\r\n          key: fieldname,\r\n          label: fieldname,\r\n          snip: this.valuePlaceholder(prefix, fieldname, templateConfiguration),\r\n          help: field.Metadata.merged.Notes || ' (' + field.Type.toLowerCase() + ') '\r\n        };\r\n        // try to add generic snippets specific to this input-type\r\n        const snipDefaults = cloneDeep(target[fieldname]); // must be a copy, because target[fieldname] will grow\r\n        this.attachSnippets(target, prefix, fieldname, field.InputType, snipDefaults, inputTypeSnippets);\r\n      }\r\n\r\n      if (fields.length) {\r\n        const std = ['EntityId', 'EntityTitle', 'EntityGuid', 'EntityType', 'IsPublished', 'Modified'];\r\n        // tslint:disable-next-line:prefer-for-of\r\n        for (let i = 0; i < std.length; i++) {\r\n          target[std[i]] = {\r\n            key: std[i],\r\n            label: std[i],\r\n            snip: this.valuePlaceholder(prefix, std[i], templateConfiguration),\r\n            help: this.translate.instant('SourceEditorSnippets.StandardFields.' + std[i] + '.Help'),\r\n          };\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  private valuePlaceholder(obj: string, val: string, templateConfiguration: SourceView): string {\r\n    return (templateConfiguration.Type.indexOf('Razor') > -1)\r\n      ? '@' + obj + '.' + val\r\n      : '[' + obj.replace('.', ':') + ':' + val + ']';\r\n  }\r\n\r\n  private getFields(appId: number, staticName: string): Observable<Field[]> {\r\n    return this.http.get<Field[]>(this.dnnContext.$2sxc.http.apiUrl(webApiFieldsAll), {\r\n      params: { appid: appId.toString(), staticName },\r\n    }).pipe(\r\n      map(fields => {\r\n        fields = fields.filter(field => field.Type !== DataTypeConstants.Empty);\r\n        for (const fld of fields) {\r\n          if (!fld.Metadata) { continue; }\r\n          const md = fld.Metadata;\r\n          const allMd = md.All;\r\n          const typeMd = md[fld.Type];\r\n          const inputMd = md[fld.InputType];\r\n          md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n        }\r\n        return fields;\r\n      }),\r\n    );\r\n  }\r\n\r\n  private attachSnippets(\r\n    target: SnippetsSubSubSets,\r\n    prefix: string,\r\n    fieldname: string,\r\n    inputType: InputTypeStrict,\r\n    snipDefaults: SetSnippet,\r\n    inputTypeSnippets: Record<string, Snippet[]>,\r\n  ): void {\r\n    let genericSnippet = inputTypeSnippets[inputType];\r\n    if (inputType.indexOf('-')) { // if it's a sub-type, let's also get the master-type\r\n      const fieldType = inputType.substring(0, inputType.indexOf('-'));\r\n      if (fieldType) {\r\n        const typeSnips = inputTypeSnippets[fieldType];\r\n        if (typeSnips) {\r\n          genericSnippet = genericSnippet ? genericSnippet.concat(typeSnips) : typeSnips;\r\n        }\r\n      }\r\n    }\r\n    if (!genericSnippet) { return; }\r\n\r\n    if (target[fieldname].more === undefined) {\r\n      target[fieldname].more = {};\r\n    }\r\n    const fieldSnips = target[fieldname].more;\r\n    // tslint:disable-next-line:prefer-for-of\r\n    for (let g = 0; g < genericSnippet.length; g++) {\r\n      try {\r\n        fieldSnips[fieldname + '-' + genericSnippet[g].name] = Object.assign({}, snipDefaults, {\r\n          key: fieldname + ' - ' + genericSnippet[g].name,\r\n          label: genericSnippet[g].name,\r\n          snip: this.localizeGenericSnippet(genericSnippet[g].content, prefix, fieldname),\r\n          collapse: true,\r\n        } as MoreSnippet);\r\n      } finally { }\r\n    }\r\n  }\r\n\r\n  private localizeGenericSnippet(snip: string, objName: string, fieldName: string): string {\r\n    snip = snip\r\n      .replace(/(\\$\\{[0-9]+\\:)var(\\})/gi, '$1' + objName + '$2')\r\n      .replace(/(\\$\\{[0-9]+\\:)prop(\\})/gi, '$1' + fieldName + '$2');\r\n    return snip;\r\n  }\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map } from 'rxjs';\r\nimport { ContentType } from '../../app-administration/models/content-type.model';\r\nimport { webApiTypeRoot } from '../../app-administration/services/content-types.service';\r\nimport { Context } from '../../shared/services/context';\r\nimport { Field, FieldInputTypeOption } from '../models/field.model';\r\nimport { InputType } from '../models/input-type.model';\r\nimport { ReservedNames } from '../models/reserved-names.model';\r\nimport { InputTypeStrict } from '../constants/input-type.constants';\r\n\r\nexport const webApiFieldsRoot = 'admin/field/';\r\nexport const webApiFieldsAll = 'admin/field/all';\r\nexport const webApiFieldsGetShared = 'admin/field/GetSharedFields';\r\n\r\n@Injectable()\r\nexport class ContentTypesFieldsService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  private apiUrl(name: string) {\r\n    return this.dnnContext.$2sxc.http.apiUrl(name);\r\n  }\r\n\r\n  typeListRetrieve() {\r\n    return this.http.get<string[]>(this.apiUrl(webApiFieldsRoot + 'DataTypes'), {\r\n      params: { appid: this.context.appId.toString() }\r\n    });\r\n  }\r\n\r\n  getInputTypesList() {\r\n    return this.http\r\n      .get<InputType[]>(this.apiUrl(webApiFieldsRoot + 'InputTypes'), { params: { appid: this.context.appId.toString() } })\r\n      .pipe(\r\n        map(inputConfigs => {\r\n          const inputTypeOptions = inputConfigs.map(config => {\r\n            const option: FieldInputTypeOption = {\r\n              dataType: config.Type.substring(0, config.Type.indexOf('-')),\r\n              inputType: config.Type,\r\n              label: config.Label,\r\n              description: config.Description,\r\n              isDefault: config.IsDefault,\r\n              isObsolete: config.IsObsolete,\r\n              isRecommended: config.IsRecommended,\r\n              obsoleteMessage: config.ObsoleteMessage,\r\n              icon: config.IsDefault ? 'star' : config.IsRecommended ? 'star_outline' : null,\r\n            };\r\n            return option;\r\n          });\r\n          return inputTypeOptions;\r\n        }),\r\n      );\r\n  }\r\n\r\n  getReservedNames() {\r\n    return this.http.get<ReservedNames>(this.apiUrl(webApiFieldsRoot + 'ReservedNames'));\r\n  }\r\n\r\n  /** Get all fields for some content type */\r\n  getFields(contentTypeStaticName: string) {\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsAll), {\r\n        params: { appid: this.context.appId.toString(), staticName: contentTypeStaticName },\r\n      })\r\n      .pipe(\r\n        map(fields => {\r\n          if (fields) {\r\n            for (const fld of fields) {\r\n              if (!fld.Metadata) { continue; }\r\n              const md = fld.Metadata;\r\n              const allMd = md.All;\r\n              const typeMd = md[fld.Type];\r\n              const inputMd = md[fld.InputType];\r\n              md.merged = { ...allMd, ...typeMd, ...inputMd };\r\n            }\r\n          }\r\n          return fields;\r\n        }),\r\n      );\r\n  }\r\n\r\n  /** Get all possible sharable fields for a new sharing */\r\n  getShareableFields() {\r\n    return this.http.get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.context.appId.toString() },\r\n      });\r\n  }\r\n\r\n  /**\r\n   * Get sharable fields which are possible for this attribute.\r\n   * \r\n   * Reason is that eg. a bool-attribute can only receive metadata from a bool attribute, etc.\r\n   * \r\n   * @param attributeId the existing attributeId which will receive the new metadata\r\n   */\r\n  getShareableFieldsFor(attributeId: number) {\r\n    // TODO: @SDV - do the same as in getShareableFields()\r\n    // but add parameter attributeId to the webapi call\r\n    // I'll create the backend afterwards\r\n    return this.http\r\n      .get<Field[]>(this.apiUrl(webApiFieldsGetShared), {\r\n        params: { appid: this.context.appId.toString(), attributeId: attributeId.toString() },\r\n      });\r\n  }\r\n\r\n  addInheritedField(targetContentTypeId: number, sourceContentTypeStaticName: string, sourceFieldGuid: string, newName: string) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'AddInheritedField'), null, {\r\n      params: {\r\n        AppId: this.context.appId.toString(),\r\n        ContentTypeId: targetContentTypeId.toString(),\r\n        SourceType: sourceContentTypeStaticName,\r\n        SourceField: sourceFieldGuid,\r\n        name: newName,\r\n      }\r\n    });\r\n  }\r\n\r\n  share(attributeId: number, share: boolean = true) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Share'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        attributeId: attributeId.toString(),\r\n        share,\r\n      },\r\n    });\r\n  }\r\n\r\n  inherit(attributeId: number, sourceFieldGuid: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Inherit'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        attributeId: attributeId.toString(),\r\n        inheritMetadataOf: sourceFieldGuid,\r\n      },\r\n    });\r\n  }\r\n\r\n  reOrder(idArray: number[], contentType: ContentType) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'Sort'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        order: JSON.stringify(idArray),\r\n      },\r\n    });\r\n  }\r\n\r\n  setTitle(item: Field, contentType: ContentType) {\r\n    return this.http.post<null>(this.apiUrl(webApiTypeRoot + 'SetTitle'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  rename(fieldId: number, contentTypeId: number, newName: string) {\r\n    return this.http.post<null>(this.apiUrl(webApiFieldsRoot + 'Rename'), null, {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentTypeId.toString(),\r\n        attributeId: fieldId.toString(),\r\n        newName,\r\n      },\r\n    });\r\n  }\r\n\r\n  delete(item: Field, contentType: ContentType) {\r\n    if (item.IsTitle) {\r\n      throw new Error('Can\\'t delete Title');\r\n    }\r\n\r\n    return this.http.delete<boolean>(this.apiUrl(webApiFieldsRoot + 'Delete'), {\r\n      params: {\r\n        appid: this.context.appId.toString(),\r\n        contentTypeId: contentType.Id.toString(),\r\n        attributeId: item.Id.toString(),\r\n      },\r\n    });\r\n  }\r\n\r\n  add(newField: Partial<Field>, contentTypeId: number) {\r\n    return this.http.post<number>(this.apiUrl(webApiFieldsRoot + 'Add'), null, {\r\n      params: {\r\n        AppId: this.context.appId.toString(),\r\n        ContentTypeId: contentTypeId.toString(),\r\n        Id: newField.Id.toString(),\r\n        Type: newField.Type,\r\n        InputType: newField.InputType,\r\n        StaticName: newField.StaticName,\r\n        IsTitle: newField.IsTitle.toString(),\r\n        Index: newField.SortOrder.toString(),\r\n      }\r\n    });\r\n  }\r\n\r\n  updateInputType(id: number, staticName: string, inputType: InputTypeStrict) {\r\n    return this.http.post<boolean>(this.apiUrl(webApiFieldsRoot + 'InputType'), null, {\r\n      params: { appId: this.context.appId.toString(), attributeId: id.toString(), field: staticName, inputType }\r\n    });\r\n  }\r\n}\r\n","export * from './monaco-editor.component';\r\nexport * from './monaco-editor.models';\r\n// export * from './monaco-editor.module';\r\n","export interface JsonSchema {\r\n  type: 'link' | 'raw';\r\n  value: string;\r\n}\r\n\r\nexport interface Monaco2sxc {\r\n  themesAreDefined: boolean;\r\n  savedStates: Monaco2sxcSavedStates;\r\n}\r\n\r\nexport interface Monaco2sxcSavedStates {\r\n  [uri: string]: Monaco2sxcSavedState;\r\n}\r\n\r\nexport interface Monaco2sxcSavedState {\r\n  viewState: string;\r\n}\r\n"],"names":["Context","DnnContext","HttpClient","map","webApiTypeRoot","webApiTypeGet","webApiTypes","webApiTypeScopes","webApiTypeSave","webApiTypeDelete","webApiTypeImport","webApiTypeAddGhost","ContentTypesService","constructor","http","context","dnnContext","apiUrl","name","$2sxc","retrieveContentType","staticName","get","params","appId","toString","contentTypeId","retrieveContentTypes","scope","getScopes","pipe","scopesData","scopes","old","scopeOptions","Object","keys","key","value","getScopesV2","save","contentType","post","appid","delete","StaticName","import","files","formData","FormData","file","append","zoneId","createGhost","sourceStaticName","_","i0","ɵɵinject","i1","i2","i3","_2","factory","ɵfac","MatSnackBarRef","MAT_SNACK_BAR_DATA","MatButtonModule","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵelement","ɵɵadvance","ɵɵtextInterpolate2","ctx_r0","snackBarData","fileName","codeFile","ɵɵtextInterpolate1","edition","ɵɵtemplate","CodeAndEditionWarningsComponent_Conditional_2_Conditional_1_Template","CodeAndEditionWarningsComponent_Conditional_2_Conditional_3_Template","ɵɵconditional","otherEditions","ɵɵlistener","CodeAndEditionWarningsComponent_Conditional_4_Template_button_click_0_listener","ɵɵrestoreView","_r2","ɵɵnextContext","ɵɵresetView","openCodeBehind","CodeAndEditionWarningsComponent","snackRef","dismissWithAction","ɵɵdirectiveInject","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","CodeAndEditionWarningsComponent_Template","rf","ctx","CodeAndEditionWarningsComponent_Conditional_1_Template","CodeAndEditionWarningsComponent_Conditional_2_Template","CodeAndEditionWarningsComponent_Conditional_4_Template","MatButton","styles","NgZone","ViewContainerRef","MatDialog","MatSnackBar","Title","ActivatedRoute","BehaviorSubject","combineLatest","forkJoin","fromEvent","of","share","switchMap","CreateFileDialogComponent","MonacoEditorComponent","BaseComponent","keyIsShared","keyItems","Explorers","SnippetsService","SourceService","MonacoEditorComponent_1","MatProgressSpinnerModule","CodeSnippetsComponent","CodeTemplatesComponent","MatIconModule","NgClass","AsyncPipe","ClickStopPropagationDirective","RxHelpers","TippyDirective","ToggleDebugDirective","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Template_div_click_0_listener","tab_r4","_r3","$implicit","ctx_r1","openView","viewKey","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Conditional_2_Template","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Conditional_6_Template","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Conditional_7_Template","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Template_mat_icon_click_8_listener","closeEditor","ɵɵproperty","ɵɵpureFunction3","_c2","isActive","isModified","isLoading","label","shared","ɵɵtextInterpolate","ɵɵrepeaterCreate","CodeEditorComponent_Conditional_0_Conditional_11_For_2_Template","ɵɵrepeaterTrackByIdentity","ɵɵrepeater","vm_r5","tabs","CodeEditorComponent_Conditional_0_Conditional_12_Template_app_monaco_editor_valueChanged_0_listener","$event","_r6","codeChanged","view","FileName","Code","monacoOptions","editorSnipps","tooltips","CodeEditorComponent_Conditional_0_Conditional_13_Template_button_click_0_listener","_r7","CodeEditorComponent_Conditional_0_Template_div_click_2_listener","_r1","toggleExplorer","Templates","CodeEditorComponent_Conditional_0_Template_div_click_5_listener","Snippets","CodeEditorComponent_Conditional_0_Template_app_code_templates_openView_8_listener","CodeEditorComponent_Conditional_0_Template_app_code_templates_createTemplate_8_listener","createTemplate","CodeEditorComponent_Conditional_0_Template_app_code_snippets_insertSnippet_9_listener","insertSnippet","CodeEditorComponent_Conditional_0_Conditional_11_Template","CodeEditorComponent_Conditional_0_Conditional_12_Template","CodeEditorComponent_Conditional_0_Conditional_13_Template","ɵɵpureFunction1","_c0","theme","_c1","activeExplorer","templates","explorerSnipps","length","activeView","CodeEditorComponent","route","snackBar","sourceService","snippetsService","zone","titleService","dialog","viewContainerRef","tabSize","fixedOverflowWidgets","init","codeItems","JSON","parse","sessionStorage","getItem","isShared","forEach","codeItem","Path","startsWith","substring","IsShared","urlItems","ngOnInit","templates$","initialViews","item","EntityId","activeView$","openViews$","viewInfos$","attachListeners","getAll","subscribe","next","subscriptions","add","openViews","viewInfos","notLoaded","filter","some","v","objectsEqual","newViewInfo","view$","snippets$","getSnippets","tooltips$","getTooltips","Extension","results","viewInfos1","snippets","selectedIndex","findIndex","sets","list","savedCode","slice","showCodeAndEditionWarnings","active","find","defaultTitle","newTitle","oldTitle","getTitle","setTitle","viewModel$","viewInfo","activeViewInfo","viewModel","ngOnDestroy","complete","explorer","createFileDialogData","folder","global","purpose","undefined","createFileDialogRef","open","autoFocus","data","width","afterClosed","result","create","templateKey","snippet","monacoEditorRef","code","selectedViewInfo","oldActiveView","oldOpenViews","newOpenViews","newActiveView","codeToSave","res","duration","newViewInfos","error","pathAndName","pathSeparator","indexOf","lastIndexOf","pathWithSlash","fullName","nameCode","Shared","endsWith","i","Edition","snackBarRef","openFromComponent","onAction","containerInstance","snackBarConfig","openViewKey","runOutsideAngular","window","event","allSaved","preventDefault","returnValue","CTRL_S","keyCode","navigator","platform","match","metaKey","ctrlKey","run","i4","i5","i6","i7","viewQuery","CodeEditorComponent_Query","ɵɵInheritDefinitionFeature","CodeEditorComponent_Template","CodeEditorComponent_Conditional_0_Template","tmp_0_0","ɵɵpipeBind1","i8","MatIcon","i9","MatProgressSpinner","i10","MatFabButton","EventEmitter","ObjectToArrayPipe","TranslateModule","KeyValuePipe","MatRippleModule","ArrayHelpers","SafeHtmlPipe","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_4_Template_mat_icon_click_0_listener","_r8","snippet_r7","ctx_r2","toggleMore","toggledMores","includes","link_r9","url","ɵɵsanitizeUrl","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_7_For_4_Template","help","ɵɵsanitizeHtml","links","link_r12","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Conditional_6_For_4_Template","more_r11","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Template_div_click_2_listener","_r10","addSnippet","snip","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Template_mat_icon_click_4_listener","toggleInfo","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Conditional_6_Template","toggledInfos","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_For_1_Template","more","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Template_div_click_2_listener","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_4_Template","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Template_mat_icon_click_5_listener","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_7_Template","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Conditional_8_Template","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_For_1_Template","folder_r5","CodeSnippetsComponent_For_2_Conditional_8_For_1_Template_div_click_1_listener","_r4","toggleFolder","CodeSnippetsComponent_For_2_Conditional_8_For_1_Conditional_8_Template","section_r2","toggledFolders","CodeSnippetsComponent_For_2_Conditional_8_For_1_Template","CodeSnippetsComponent_For_2_Template_div_click_1_listener","toggleSection","CodeSnippetsComponent_For_2_Conditional_8_Template","toggledSections","emit","toggleInArray","inputs","outputs","CodeSnippetsComponent_Template","CodeSnippetsComponent_For_2_Template","MatRipple","TranslatePipe","transform","obj","Array","isArray","values","pure","SimpleChanges","calculateTreeAppShared","appSharedRoot","SortItemsPipe","DepthPaddingPipe","MatMenuModule","NgTemplateOutlet","ɵɵelementContainer","CodeTemplatesComponent_For_3_ng_container_0_Template","fileOrFolder_r3","item_r2","CodeTemplatesComponent_ng_template_5_Conditional_0_Template_div_click_0_listener","item_r5","ctx_r5","openTemplate","pathFromRoot","ɵɵstyleMap","ɵɵpipeBind2","depth","isFolder","isToggled","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_For_1_ng_container_0_Template","item1_r8","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_For_1_Template","children","CodeTemplatesComponent_ng_template_5_Conditional_1_Template_div_click_1_listener","toggleItem","CodeTemplatesComponent_ng_template_5_Conditional_1_Template_div_click_8_listener","addFile","CodeTemplatesComponent_ng_template_5_Conditional_1_Conditional_11_Template","CodeTemplatesComponent_ng_template_5_Conditional_0_Template","CodeTemplatesComponent_ng_template_5_Conditional_1_Template","toggledItemsApp","toggledItemsShared","ngOnChanges","changes","tree","previousView","previousValue","showFileInTree","path","toggledItems","paths","split","ɵɵNgOnChangesFeature","CodeTemplatesComponent_Template","CodeTemplatesComponent_For_3_Template","CodeTemplatesComponent_ng_template_5_Template","ɵɵtemplateRefExtractor","CodeTemplatesComponent_Template_button_click_13_listener","CodeTemplatesComponent_Template_button_click_16_listener","menu_r9","MatIconButton","MatMenu","MatMenuItem","MatMenuTrigger","calculateTree","f","parent","last","existing","push","DomSanitizer","sanitizer","padding","bypassSecurityTrustStyle","items","sort","item1","item2","TranslateService","cloneDeep","DataTypeConstants","webApiFieldsAll","inlineHelp","translate","language","relevant","filterAwayNotNeededSnippetsList","standardAndInputSnips","extractInputTypeSnippets","initSnippetsWithConfig","standardArray","inputTypeSnippets","sorted","keyPrefixes","keyPrefixIndex","Type","newList","itm","setHasPrefix","set","inputTypeArray","systemSnippet","catalogInputTypeSnippets","extracted","inputTypeList","subset","templateConfiguration","makeTree","Content","assign","Fields","PresentationFields","TypeContent","loadContentType","TypeContentPresentation","HasList","List","TypeList","TypeListPresentation","HasApp","App","Resources","Settings","o","reformatted","content","linksList","getHelpKey","instant","addition","linksString","llist","l","pair","link","trim","target","type","prefix","getFields","AppId","fields","field","fieldname","valuePlaceholder","Metadata","merged","Notes","toLowerCase","snipDefaults","attachSnippets","InputType","std","val","replace","Empty","fld","md","allMd","All","typeMd","inputMd","inputType","genericSnippet","fieldType","typeSnips","concat","fieldSnips","g","localizeGenericSnippet","collapse","objName","fieldName","webApiFieldsRoot","webApiFieldsGetShared","ContentTypesFieldsService","typeListRetrieve","getInputTypesList","inputConfigs","inputTypeOptions","config","option","dataType","Label","description","Description","isDefault","IsDefault","isObsolete","IsObsolete","isRecommended","IsRecommended","obsoleteMessage","ObsoleteMessage","icon","getReservedNames","contentTypeStaticName","getShareableFields","getShareableFieldsFor","attributeId","addInheritedField","targetContentTypeId","sourceContentTypeStaticName","sourceFieldGuid","newName","ContentTypeId","SourceType","SourceField","inherit","inheritMetadataOf","reOrder","idArray","Id","order","stringify","rename","fieldId","IsTitle","Error","newField","Index","SortOrder","updateInputType","id"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}