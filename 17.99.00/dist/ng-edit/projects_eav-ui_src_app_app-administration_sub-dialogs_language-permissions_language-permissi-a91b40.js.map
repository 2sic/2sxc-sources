{"version":3,"file":"projects_eav-ui_src_app_app-administration_sub-dialogs_language-permissions_language-permissi-a91b40.js","mappings":"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","sources":["./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/language-permissions.component.html","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.ts","./projects/eav-ui/src/app/app-administration/sub-dialogs/language-permissions/languages-permissions-actions/languages-permissions-actions.component.html"],"sourcesContent":["import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef, MatDialogActions } from '@angular/material/dialog';\r\nimport { ActivatedRoute, Router, RouterOutlet } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, map, Observable, Subscription } from 'rxjs';\r\nimport { SiteLanguagePermissions } from '../../../apps-management/models/site-language.model';\r\nimport { ZoneService } from '../../../apps-management/services/zone.service';\r\nimport { GoToPermissions } from '../../../permissions';\r\nimport { BaseWithChildDialogComponent } from '../../../shared/components/base-with-child-dialog.component';\r\nimport { IdFieldComponent } from '../../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../../shared/constants/default-grid-options.constants';\r\nimport { LanguagesPermissionsActionsComponent } from './languages-permissions-actions/languages-permissions-actions.component';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions/languages-permissions-actions.models';\r\nimport { ColumnDefinitions } from '../../../shared/ag-grid/column-definitions';\r\nimport { AsyncPipe } from '@angular/common';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { SxcGridModule } from '../../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { transient } from '../../../core';\r\n\r\n@Component({\r\n  selector: 'app-language-permissions',\r\n  templateUrl: './language-permissions.component.html',\r\n  styleUrls: ['./language-permissions.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatButtonModule,\r\n    MatIconModule,\r\n    RouterOutlet,\r\n    MatDialogActions,\r\n    AsyncPipe,\r\n    SxcGridModule,\r\n  ],\r\n})\r\nexport class LanguagePermissionsComponent extends BaseWithChildDialogComponent implements OnInit, OnDestroy {\r\n  languages$: BehaviorSubject<SiteLanguagePermissions[] | undefined>;\r\n  gridOptions: GridOptions;\r\n\r\n  viewModel$: Observable<LanguagePermissionsViewModel>;\r\n\r\n  private zoneService = transient(ZoneService);\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    private dialogRef: MatDialogRef<LanguagePermissionsComponent>,\r\n  ) {\r\n    super(router, route);\r\n    this.subscriptions = new Subscription();\r\n    this.languages$ = new BehaviorSubject<SiteLanguagePermissions[] | undefined>(undefined);\r\n    this.gridOptions = this.buildGridOptions();\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getLanguages();\r\n    this.subscriptions.add(this.childDialogClosed$().subscribe(() => { this.getLanguages(); }));\r\n    this.viewModel$ = combineLatest([this.languages$]).pipe(\r\n      map(([languages]) => ({ languages }))\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.languages$.complete();\r\n    super.ngOnDestroy();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  openPermissions(language: SiteLanguagePermissions): void {\r\n    this.router.navigate([GoToPermissions.getUrlLanguage(language.NameId)], { relativeTo: this.route });\r\n  }\r\n\r\n  private getLanguages(): void {\r\n    this.zoneService.getLanguagesPermissions().subscribe({\r\n      error: () => {\r\n        this.languages$.next(undefined);\r\n      },\r\n      next: (languages) => {\r\n        this.languages$.next(languages);\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.Id,\r\n          field: 'Code',\r\n          filter: 'agTextColumnFilter',\r\n          cellRenderer: IdFieldComponent,\r\n          cellRendererParams: (() => {\r\n            const params: IdFieldParams<SiteLanguagePermissions> = {\r\n              tooltipGetter: (language) => `ID: ${language.Code}`,\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Name',\r\n          sort: 'asc',\r\n          valueGetter: (params) => {\r\n            const language: SiteLanguagePermissions = params.data;\r\n            return language.Culture;\r\n          },\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: LanguagesPermissionsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: LanguagesPermissionsActionsParams = {\r\n              onOpenPermissions: (language) => this.openPermissions(language),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n\r\ninterface LanguagePermissionsViewModel {\r\n  languages: SiteLanguagePermissions[] | undefined\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog nav-component-wrapper\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">Language permissions</div>\r\n      <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n    <div class=\"eav-dialog-content nav-component-wrapper\">\r\n      <p>\r\n        If no language permissions are defined, all editors can edit all languages.\r\n        As soon as you set any language permission, only the specified users\r\n        (or users in the specified groups) can edit these permissions.\r\n      </p>\r\n      <router-outlet></router-outlet>\r\n      <div class=\"grid-wrapper\">\r\n        <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"vm.languages\" [gridOptions]=\"gridOptions\">\r\n        </ag-grid-angular>\r\n      </div>\r\n      <mat-dialog-actions align=\"end\"></mat-dialog-actions>\r\n    </div>\r\n  </div>\r\n}","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { SiteLanguagePermissions } from '../../../../apps-management/models/site-language.model';\r\nimport { LanguagesPermissionsActionsParams } from './languages-permissions-actions.models';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatRippleModule } from '@angular/material/core';\r\n\r\n@Component({\r\n  selector: 'app-languages-permissions-actions',\r\n  templateUrl: './languages-permissions-actions.component.html',\r\n  styleUrls: ['./languages-permissions-actions.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatRippleModule,\r\n    MatIconModule,\r\n    MatBadgeModule,\r\n  ],\r\n})\r\nexport class LanguagesPermissionsActionsComponent implements ICellRendererAngularComp {\r\n  language: SiteLanguagePermissions;\r\n\r\n  private params: ICellRendererParams & LanguagesPermissionsActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & LanguagesPermissionsActionsParams): void {\r\n    this.params = params;\r\n    this.language = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openPermissions(): void {\r\n    this.params.onOpenPermissions(this.language);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Permissions\" (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"language.Permissions.Count\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      [matBadgeHidden]=\"!language.Permissions.Count\" matBadgePosition=\"below after\" aria-hidden=\"false\">\r\n      person\r\n    </mat-icon>\r\n  </div>\r\n</div>"],"names":["MatDialogRef","MatDialogActions","ActivatedRoute","Router","RouterOutlet","BehaviorSubject","combineLatest","map","Subscription","ZoneService","GoToPermissions","BaseWithChildDialogComponent","IdFieldComponent","defaultGridOptions","LanguagesPermissionsActionsComponent","ColumnDefinitions","AsyncPipe","MatIconModule","MatButtonModule","SxcGridModule","transient","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","LanguagePermissionsComponent_Conditional_0_Template_button_click_4_listener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","closeDialog","ɵɵelement","ɵɵadvance","ɵɵproperty","ctx","languages","gridOptions","LanguagePermissionsComponent","constructor","router","route","dialogRef","zoneService","subscriptions","languages$","undefined","buildGridOptions","ngOnInit","getLanguages","add","childDialogClosed$","subscribe","viewModel$","pipe","ngOnDestroy","complete","close","openPermissions","language","navigate","getUrlLanguage","NameId","relativeTo","getLanguagesPermissions","error","next","columnDefs","Id","field","filter","cellRenderer","cellRendererParams","params","tooltipGetter","Code","TextWide","sort","valueGetter","data","Culture","ActionsPinnedRight1","onOpenPermissions","_","ɵɵdirectiveInject","i1","i2","_2","selectors","standalone","features","ɵɵInheritDefinitionFeature","ɵɵStandaloneFeature","decls","vars","consts","template","LanguagePermissionsComponent_Template","rf","ɵɵtemplate","LanguagePermissionsComponent_Conditional_0_Template","ɵɵconditional","tmp_0_0","ɵɵpipeBind1","i3","MatIconButton","i4","MatIcon","i5","AgGridAngular","styles","MatBadgeModule","MatRippleModule","agInit","refresh","LanguagesPermissionsActionsComponent_Template","LanguagesPermissionsActionsComponent_Template_div_click_1_listener","Permissions","Count","MatRipple","MatBadge"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}