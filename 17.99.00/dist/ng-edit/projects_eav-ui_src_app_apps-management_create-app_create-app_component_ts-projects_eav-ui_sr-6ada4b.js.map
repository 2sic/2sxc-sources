{"version":3,"file":"projects_eav-ui_src_app_apps-management_create-app_create-app_component_ts-projects_eav-ui_sr-6ada4b.js","mappings":";;;;;;;;;;;;;;AAAO,MAAMA,cAAc,GAAG,oCAAoC;AAC3D,MAAMC,YAAY,GAAG,sGAAsG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACAd;AAC1C;AAChB;AACa;AACE;AACT;AACpB;AACe;AACF;AACE;AACF;AACS;AACnB;AAC8C;AACtD;;;;;;;;;;;;ICE3BsB,4DAAA,yBAAiC;IAC/BA,oDAAA,iBACF;IAAAA,0DAAA,EAAiB;;;IAFDA,wDAAA,iBAAgB;;;;;IAKhCA,4DAAA,yBAAiC;IAC/BA,oDAAA,GACF;IAAAA,0DAAA,EAAiB;;;;IAFDA,wDAAA,iBAAgB;IAC9BA,uDAAA,EACF;IADEA,gEAAA,MAAAO,MAAA,CAAA7B,YAAA,MACF;;;;;IAHFsB,wDALA,IAAAS,sEAAA,6BAA2C,IAAAC,sEAAA,6BAKD;;;;IAL1CV,2DAAA,KAAAO,MAAA,CAAAK,IAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAC,MAAA,kBAAAR,MAAA,CAAAK,IAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAC,MAAA,CAAAC,QAAA,WAIC;IACDhB,uDAAA,EAIC;IAJDA,2DAAA,KAAAO,MAAA,CAAAK,IAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAC,MAAA,kBAAAR,MAAA,CAAAK,IAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAC,MAAA,CAAAE,OAAA,WAIC;;;;;;IAtBLjB,4DAFJ,aAAwB,aACS,aACS;IAAAA,oDAAA,iBAAU;IAClDA,0DADkD,EAAM,EAClD;IACNA,4DAAA,aAAgC;IAC9BA,uDAAA,oBAA+B;IAG3BA,4DAFJ,cAAyB,wBACmC,gBAC7C;IAAAA,oDAAA,WAAI;IAAAA,0DAAA,EAAY;IAC3BA,uDAAA,gBAAmD;IACrDA,0DAAA,EAAiB;IACjBA,4DAAA,sBAAgB;IACdA,oDAAA,mDACF;IAAAA,0DAAA,EAAiB;IACjBA,wDAAA,KAAAmB,wDAAA,OAAkC;IAYlCnB,uDAAA,UAAI;IAGFA,4DADF,yBAA0D,iBAC7C;IAAAA,oDAAA,gBAAQ;IAAAA,0DAAA,EAAY;IAC/BA,4DAAA,qBAAsD;IAA1BA,8DAAA,yBAAAqB,6EAAAC,MAAA;MAAAtB,2DAAA,CAAAwB,GAAA;MAAA,MAAAjB,MAAA,GAAAP,2DAAA;MAAAA,gEAAA,CAAAO,MAAA,CAAAoB,aAAA,EAAAL,MAAA,MAAAf,MAAA,CAAAoB,aAAA,GAAAL,MAAA;MAAA,OAAAtB,yDAAA,CAAAsB,MAAA;IAAA,EAAyB;IACnDtB,4DAAA,qBAAsB;IACpBA,oDAAA,oCACF;IAAAA,0DAAA,EAAa;IACbA,4DAAA,qBAAsB;IACpBA,oDAAA,mDACF;IAAAA,0DAAA,EAAa;IACbA,4DAAA,sBAAsB;IACpBA,oDAAA,4DACF;IAKRA,0DALQ,EAAa,EACF,EACE,EAEZ,EACH;IAEJA,4DADF,8BAAgC,kBAC0D;IAAxBA,wDAAA,mBAAA8B,mEAAA;MAAA9B,2DAAA,CAAAwB,GAAA;MAAA,MAAAjB,MAAA,GAAAP,2DAAA;MAAA,OAAAA,yDAAA,CAASO,MAAA,CAAAwB,WAAA,EAAa;IAAA,EAAC;IACrF/B,oDAAA,gBACF;IAAAA,0DAAA,EAAS;IACTA,4DAAA,kBAAiH;IAAnBA,wDAAA,mBAAAgC,mEAAA;MAAAhC,2DAAA,CAAAwB,GAAA;MAAA,MAAAjB,MAAA,GAAAP,2DAAA;MAAA,OAAAA,yDAAA,CAASO,MAAA,CAAA0B,MAAA,EAAQ;IAAA,EAAC;IAC9GjC,oDAAA,gBACF;IAEJA,0DAFI,EAAS,EACU,EACjB;;;;;IA/CIA,uDAAA,GAAkB;IAAlBA,wDAAA,cAAAO,MAAA,CAAAK,IAAA,CAAkB;IAQtBZ,uDAAA,GAWC;IAXDA,2DAAA,KAAAO,MAAA,CAAAK,IAAA,CAAAC,QAAA,CAAAC,IAAA,CAAAoB,OAAA,WAWC;IAK6BlC,uDAAA,GAAyB;IAAzBA,8DAAA,UAAAO,MAAA,CAAAoB,aAAA,CAAyB;IAgBjB3B,uDAAA,GAAuB;IAAvBA,wDAAA,aAAAoC,KAAA,CAAAC,OAAA,CAAuB;IAGRrC,uDAAA,GAAsC;IAAtCA,wDAAA,aAAAoC,KAAA,CAAAC,OAAA,KAAA9B,MAAA,CAAAK,IAAA,CAAA0B,KAAA,CAAsC;;;ADd7F,MAAOC,kBAAkB;EAY7BC,YACUC,SAA2C,EAC3CC,QAAqB;IADrB,KAAAD,SAAS,GAATA,SAAS;IACT,KAAAC,QAAQ,GAARA,QAAQ;IAbQ,KAAAC,SAAS,GAAG,kBAAkB;IAIxD,KAAAjE,YAAY,GAAGA,iEAAY;IAC3B,KAAAiD,aAAa,GAAG,GAAG;IAIX,KAAAiB,eAAe,GAAG7C,gDAAS,CAACT,wEAAe,CAAC;IAMlD,IAAI,CAACsB,IAAI,GAAG,IAAI,CAACiC,SAAS,EAAE;IAC5B,IAAI,CAACC,QAAQ,GAAG,IAAI3D,iDAAe,CAAC,KAAK,CAAC;EAC5C;EAEA4D,QAAQA,CAAA;IACN,IAAI,CAACC,UAAU,GAAG,IAAI,CAACF,QAAQ,CAACG,IAAI,CAClC5D,yCAAG,CAAEgD,OAAO,KAAM;MAAEA;IAAO,CAAE,CAAC,CAAC,CAChC;EACH;EAEAa,WAAWA,CAAA;IACT,IAAI,CAACJ,QAAQ,CAACK,QAAQ,EAAE;EAC1B;EAEApB,WAAWA,CAAA;IACT,IAAI,CAACU,SAAS,CAACW,KAAK,EAAE;EACxB;EAEAnB,MAAMA,CAAA;IACJ,IAAI,CAACrB,IAAI,CAACyC,OAAO,EAAE;IACnB,IAAI,CAACP,QAAQ,CAACQ,IAAI,CAAC,IAAI,CAAC;IACxB,MAAMxC,IAAI,GAAG,IAAI,CAACF,IAAI,CAACC,QAAQ,CAACC,IAAI,CAACyC,KAAK,EAAEC,IAAI,EAAE,CAACC,OAAO,CAAC,QAAQ,EAAE,GAAG,CAAC,CAAC,CAAC;IAC3E,MAAM9B,aAAa,GAAG+B,MAAM,CAAC,IAAI,CAAC/B,aAAa,CAAC;IAChD;IACA;IAEA,IAAI,CAACe,QAAQ,CAACiB,IAAI,CAAC,iBAAiB,CAAC;IACrC,IAAI,CAACf,eAAe,CAACX,MAAM,CAACnB,IAAI,EAAE,IAAI,EAAEa,aAAa,CAAC,CAACiC,SAAS,CAAC;MAC/DC,KAAK,EAAEA,CAAA,KAAK;QACV,IAAI,CAACjD,IAAI,CAACkD,MAAM,EAAE;QAClB,IAAI,CAAChB,QAAQ,CAACQ,IAAI,CAAC,KAAK,CAAC;QACzB,IAAI,CAACZ,QAAQ,CAACiB,IAAI,CAAC,iEAAiE,EAAEI,SAAS,EAAE;UAAEC,QAAQ,EAAE;QAAI,CAAE,CAAC;MACtH,CAAC;MACDV,IAAI,EAAEA,CAAA,KAAK;QACT,IAAI,CAAC1C,IAAI,CAACkD,MAAM,EAAE;QAClB,IAAI,CAACpB,QAAQ,CAACiB,IAAI,CAAC,aAAa,EAAEI,SAAS,EAAE;UAAEC,QAAQ,EAAE;QAAI,CAAE,CAAC;QAChE,IAAI,CAACjC,WAAW,EAAE;MACpB;KACD,CAAC;EACJ;EAEQc,SAASA,CAAA;IACf,MAAMjC,IAAI,GAAG,IAAIhC,4DAAgB,CAAC;MAChCkC,IAAI,EAAE,IAAInC,8DAAkB,CAAC,IAAI,EAAE,CAACE,sDAAU,CAACmC,QAAQ,EAAEnC,sDAAU,CAACoC,OAAO,CAACxC,mEAAc,CAAC,CAAC;KAC7F,CAAC;IACF,OAAOmC,IAAI;EACb;EAAC,QAAAqD,CAAA;qBA9DU1B,kBAAkB,EAAAvC,+DAAA,CAAAmE,kEAAA,GAAAnE,+DAAA,CAAAoE,oEAAA;EAAA;EAAA,QAAAC,EAAA;UAAlB9B,kBAAkB;IAAA+B,SAAA;IAAAC,QAAA;IAAAC,YAAA,WAAAC,gCAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;QAAlB1E,4DAAA,cAAA2E,GAAA,CAAAhC,SAAA,CAAkB;;;;;;;;;;QCpC/B3C,wDAAA,IAAA6E,yCAAA,kBAAiC;;;;;QAAjC7E,2DAAA,KAAA8E,OAAA,GAAA9E,yDAAA,OAAA2E,GAAA,CAAA3B,UAAA,aAAA8B,OAAA,CAuDC;;;mBDhCGjF,0DAAY,EACZf,uDAAW,EAAAkG,4DAAA,EAAAA,gEAAA,EAAAA,2DAAA,EAAAA,gEAAA,EACXjG,+DAAmB,EAAAiG,8DAAA,EAAAA,2DAAA,EACnBpF,6EAAkB,EAAA2F,uEAAA,EAAAA,mEAAA,EAClB5F,oEAAc,EAAA+F,8DAAA,EACdhG,sEAAe,EAAAkG,gEAAA,EAAAE,8DAAA,EACfrG,oEAAe,EACfR,sEAAgB,EAChBO,sEAAe,EAAAwG,gEAAA,EACfzG,uDAAS,EACTO,kGAAkB;IAAAoG,MAAA;EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEjCwD;AAE9E;;;;;;;;;;;;;AAaM,SAAUnG,SAASA,CAAIsG,KAAuB,EAAEC,QAAmB;EACvE;EACA;EACAA,QAAQ,KAAKF,qDAAM,CAACD,mDAAQ,CAAC;EAE7B;EACA,MAAMI,WAAW,GAAGJ,mDAAQ,CAAClE,MAAM,CAAC;IAClCuE,SAAS,EAAE,CACTH,KAAqB,CACtB;IACDI,MAAM,EAAEH;GACT,CAAC;EAEF;EACA,OAAOC,WAAW,CAACG,GAAG,CAACL,KAAK,EAAEtC,SAAS,EAAE;IAAE4C,IAAI,EAAE;EAAI,CAAE,CAAC;AAC1D;;;;;;;;;;;;;;;;;;;;;;AC9B8D;AACZ;AAED;AACqD;AAC9C;;;;;AAEjD,MAAMO,aAAa,GAAG,YAAY;AAGnC,MAAOC,gBAAgB;EAC3B3E,YAAoB4E,IAAgB,EAAUC,OAAgB,EAAUC,UAAsB;IAA1E,KAAAF,IAAI,GAAJA,IAAI;IAAsB,KAAAC,OAAO,GAAPA,OAAO;IAAmB,KAAAC,UAAU,GAAVA,UAAU;EAAgB;EAElGC,SAASA,CAACC,IAAU,EAAEC,WAAmB,EAAEC,gBAAgB,GAAG,KAAK;IACjE,MAAMC,QAAQ,GAAG,IAAIC,QAAQ,EAAE;IAC/BD,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEL,IAAI,CAAC;IAC7BG,QAAQ,CAACE,MAAM,CAAC,MAAM,EAAEJ,WAAW,IAAI,EAAE,CAAC;IAC1C,OAAO,IAAI,CAACL,IAAI,CAACU,IAAI,CAAmB,IAAI,CAACR,UAAU,CAACS,KAAK,CAACX,IAAI,CAACY,MAAM,CAACd,aAAa,GAAG,QAAQ,CAAC,EAAES,QAAQ,EAAE;MAC7GM,MAAM,EAAE;QAAEC,MAAM,EAAE,IAAI,CAACb,OAAO,CAACa,MAAM,CAACC,QAAQ;MAAE;KACjD,CAAC,CAAClF,IAAI,CACL+D,+CAAS,CAACoB,MAAM,IAAG;MACjB,IAAIV,gBAAgB,IAAIU,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAC,EAAEC,WAAW,KAAKrB,yFAAsB,CAACsB,OAAO,EAAE;QAC1F,MAAMC,UAAU,GAAGC,MAAM,CAACL,MAAM,CAACC,QAAQ,CAAC,CAAC,CAAC,CAACK,IAAI,GAAG,0DAA0D,CAAC;QAC/G,IAAIF,UAAU,EAAE;UACd,OAAO,IAAI,CAACjB,SAAS,CAACC,IAAI,EAAEgB,UAAU,EAAE,IAAI,CAAC;;;MAGjD,OAAOzB,wCAAE,CAACqB,MAAM,CAAC;IACnB,CAAC,CAAC,CACH;EACH;EAAC,QAAAnE,CAAA;qBApBUkD,gBAAgB,EAAAnH,sDAAA,CAAAmE,4DAAA,GAAAnE,sDAAA,CAAAoE,6DAAA,GAAApE,sDAAA,CAAAgF,0DAAA;EAAA;EAAA,QAAAX,EAAA;WAAhB8C,gBAAgB;IAAAyB,OAAA,EAAhBzB,gBAAgB,CAAA0B;EAAA;;;;;;;;;;;;;;;;;;ACV+B;AAEM;;;;;;;;;ICE1D7I,gEAAA,GAAyD;;;;;IAD3DA,4DAAA,eAAU;IACRA,wDAAA,IAAAiJ,iDAAA,0BAA0C;IAC5CjJ,0DAAA,EAAW;;;;;IADMA,uDAAA,EAAyB;IAAzBA,wDAAA,qBAAAkJ,UAAA,CAAyB;;;;;IAKxClJ,gEAAA,GAAyD;;;;;IAD3DA,4DAAA,gBAAW;IACTA,wDAAA,IAAAmJ,iDAAA,0BAA0C;IAC5CnJ,0DAAA,EAAY;;;;;IADKA,uDAAA,EAAyB;IAAzBA,wDAAA,qBAAAkJ,UAAA,CAAyB;;;;;IAO9ClJ,0DAAA,GAAyB;;;ADHrB,MAAOF,kBAAkB;EAI7B0C,YAAA;IAHS,KAAA6G,OAAO,GAAG,KAAK;IACxB,KAAAC,OAAO,GAAG,IAAI;EAEE;EAEhBC,aAAaA,CAAA;IACX,IAAI,CAACD,OAAO,GAAG,CAAC,IAAI,CAACA,OAAO;EAC9B;EAAC,QAAArF,CAAA;qBARUnE,kBAAkB;EAAA;EAAA,QAAAuE,EAAA;UAAlBvE,kBAAkB;IAAAwE,SAAA;IAAAkF,MAAA;MAAAH,OAAA;IAAA;IAAAI,UAAA;IAAAC,QAAA,GAAA1J,iEAAA;IAAA4J,kBAAA,EAAAC,GAAA;IAAAC,KAAA;IAAAC,IAAA;IAAAC,MAAA;IAAAC,QAAA,WAAAC,4BAAAxF,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;;;QCb/B1E,4DAAA,aAA2F;QAArEA,wDAAA,mBAAAmK,iDAAA;UAAAnK,2DAAA,CAAAwB,GAAA;UAAA,OAAAxB,yDAAA,CAAS2E,GAAA,CAAA4E,aAAA,EAAe;QAAA,EAAC;QAO3CvJ,wDALA,IAAAoK,kCAAA,OAAe,IAAAC,kCAAA,OAKD;QAMlBrK,0DAAA,EAAM;QAENA,wDAAA,IAAAsK,yCAAA,gCAAAtK,oEAAA,CAAsB;;;;QAf0BA,wDAAA,YAAAA,6DAAA,IAAAyK,GAAA,EAAA9F,GAAA,CAAA2E,OAAA,EAA0C;QACxFtJ,uDAAA,EAWC;QAXDA,2DAAA,KAAA0K,OAAA,GAAA/F,GAAA,CAAA0E,OAAA,WAAK,OAAAqB,OAAA,KAAL,IAAI,UAWH;;;mBDFC9K,4EAAkB,EAAAuE,iEAAA,EAAAA,kEAAA,EAAE2E,oDAAO,EAAEC,6DAAgB;IAAA7C,MAAA;EAAA","sources":["./projects/eav-ui/src/app/apps-management/constants/app.patterns.ts","./projects/eav-ui/src/app/apps-management/create-app/create-app.component.ts","./projects/eav-ui/src/app/apps-management/create-app/create-app.component.html","./projects/eav-ui/src/app/core/transient.ts","./projects/eav-ui/src/app/import-app/services/import-app.service.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html"],"sourcesContent":["export const appNamePattern = /^[A-Za-z](?:[A-Za-z0-9\\s\\(\\)-]+)*$/;\r\nexport const appNameError = 'Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.';\r\n","import { Component, HostBinding, OnDestroy, OnInit } from '@angular/core';\r\nimport { UntypedFormControl, UntypedFormGroup, Validators, FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatDialogRef, MatDialogActions } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject, Observable, combineLatest, map } from 'rxjs';\r\nimport { appNameError, appNamePattern } from '../constants/app.patterns';\r\nimport { AppsListService } from '../services/apps-list.service';\r\nimport { AsyncPipe } from '@angular/common';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { transient } from '../../core';\r\n\r\n@Component({\r\n  selector: 'app-create-app',\r\n  templateUrl: './create-app.component.html',\r\n  styleUrls: ['./create-app.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    RouterOutlet,\r\n    FormsModule,\r\n    ReactiveFormsModule,\r\n    MatFormFieldModule,\r\n    MatInputModule,\r\n    MatSelectModule,\r\n    MatOptionModule,\r\n    MatDialogActions,\r\n    MatButtonModule,\r\n    AsyncPipe,\r\n    FieldHintComponent,\r\n  ],\r\n})\r\nexport class CreateAppComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  loading$: BehaviorSubject<boolean>;\r\n  appNameError = appNameError;\r\n  appTemplateId = '1';\r\n\r\n  viewModel$: Observable<CreateAppViewModel>;\r\n\r\n  private appsListService = transient(AppsListService);\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateAppComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n    this.loading$ = new BehaviorSubject(false);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.viewModel$ = this.loading$.pipe(\r\n      map((loading) => ({ loading })),\r\n    );\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading$.complete();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading$.next(true);\r\n    const name = this.form.controls.name.value?.trim().replace(/\\s\\s+/g, ' '); // remove multiple white spaces and tabs;\r\n    const appTemplateId = Number(this.appTemplateId);\r\n    // console.warn('2dm: name', name, this.appTemplateId);\r\n    // return;\r\n\r\n    this.snackBar.open('Creating app...');\r\n    this.appsListService.create(name, null, appTemplateId).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n        this.loading$.next(false);\r\n        this.snackBar.open('Failed to create app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): UntypedFormGroup {\r\n    const form = new UntypedFormGroup({\r\n      name: new UntypedFormControl(null, [Validators.required, Validators.pattern(appNamePattern)]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n\r\ninterface CreateAppViewModel {\r\n  loading: boolean;\r\n}\r\n","@if (viewModel$ | async; as vm) {\r\n  <div class=\"eav-dialog\">\r\n    <div class=\"eav-dialog-header\">\r\n      <div class=\"eav-dialog-header__title\">Create App</div>\r\n    </div>\r\n    <div class=\"eav-dialog-content\">\r\n      <router-outlet></router-outlet>\r\n      <form [formGroup]=\"form\">\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Name</mat-label>\r\n          <input matInput type=\"text\" formControlName=\"name\">\r\n        </mat-form-field>\r\n        <app-field-hint>\r\n          App name will also be used for the folder\r\n        </app-field-hint>\r\n        @if (form.controls.name.touched) {\r\n          @if (form.controls.name.errors?.required) {\r\n            <app-field-hint [isError]=\"true\">\r\n              Required\r\n            </app-field-hint>\r\n          }\r\n          @if (form.controls.name.errors?.pattern) {\r\n            <app-field-hint [isError]=\"true\">\r\n              {{ appNameError }}\r\n            </app-field-hint>\r\n          }\r\n        }\r\n        <br>\r\n\r\n        <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n          <mat-label>Template</mat-label>\r\n          <mat-select required=\"true\" [(value)]=\"appTemplateId\">\r\n            <mat-option value=\"0\">\r\n              Completely Naked / Raw App\r\n            </mat-option>\r\n            <mat-option value=\"1\">\r\n              App Template Empty with some instructions\r\n            </mat-option>\r\n            <mat-option value=\"2\">\r\n              App Template Basic with instructions and some data\r\n            </mat-option>\r\n          </mat-select>\r\n        </mat-form-field>\r\n\r\n      </form>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      <button type=\"button\" mat-raised-button [disabled]=\"vm.loading\" (click)=\"closeDialog()\">\r\n        Cancel\r\n      </button>\r\n      <button type=\"button\" mat-raised-button color=\"accent\" [disabled]=\"vm.loading || !form.valid\" (click)=\"create()\">\r\n        Create\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n}\r\n","import { Injector, ProviderToken, TypeProvider, inject } from '@angular/core';\r\n\r\n/**\r\n * Transient dependency injection provider.\r\n * This will create a new instance of the provided token,\r\n * without making it available in sub-components\r\n * as would happen with providers in a component.\r\n * \r\n * @param token the class which is injectable\r\n * @param injector the injector to use, if not provided, the current injector will be used.\r\n *     Not not necessary when using transient in the class properties construction or in the constructor,\r\n *     as the injector will be available in the constructor.\r\n *     But necessary when using transient inside anything else.\r\n * @returns \r\n */\r\nexport function transient<T>(token: ProviderToken<T>, injector?: Injector): T {\r\n  // make sure we have an injector\r\n  // this will throw an error, if transient is used outside of construction and without providing an injector\r\n  injector ??= inject(Injector);\r\n\r\n  // create a new injector which is only meant to be used for this transient instance\r\n  const subInjector = Injector.create({\r\n    providers: [\r\n      token as TypeProvider\r\n    ],\r\n    parent: injector\r\n  });\r\n\r\n  // return the instance\r\n  return subInjector.get(token, undefined, { self: true });\r\n}\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable, of, switchMap } from 'rxjs';\r\nimport { FileUploadMessageTypes, FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { Context } from '../../shared/services/context';\r\n\r\nexport const webApiAppRoot = 'admin/app/';\r\n\r\n@Injectable()\r\nexport class ImportAppService {\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  importApp(file: File, changedName: string, retryOnDuplicate = false): Observable<FileUploadResult> {\r\n    const formData = new FormData();\r\n    formData.append('File', file);\r\n    formData.append('Name', changedName ?? '');\r\n    return this.http.post<FileUploadResult>(this.dnnContext.$2sxc.http.apiUrl(webApiAppRoot + 'Import'), formData, {\r\n      params: { zoneId: this.context.zoneId.toString() }\r\n    }).pipe(\r\n      switchMap(result => {\r\n        if (retryOnDuplicate && result.Messages[0]?.MessageType === FileUploadMessageTypes.Warning) {\r\n          const folderName = prompt(result.Messages[0].Text + ' Would you like to install it using another folder name?');\r\n          if (folderName) {\r\n            return this.importApp(file, folderName, true);\r\n          }\r\n        }\r\n        return of(result);\r\n      }),\r\n    );\r\n  }\r\n}\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, Input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n  standalone: true,\r\n  imports: [\r\n    MatFormFieldModule, NgClass, NgTemplateOutlet\r\n  ]\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n"],"names":["appNamePattern","appNameError","UntypedFormControl","UntypedFormGroup","Validators","FormsModule","ReactiveFormsModule","MatDialogRef","MatDialogActions","MatSnackBar","BehaviorSubject","Observable","map","AppsListService","AsyncPipe","MatButtonModule","MatOptionModule","MatSelectModule","MatInputModule","MatFormFieldModule","RouterOutlet","FieldHintComponent","transient","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate1","ctx_r1","ɵɵtemplate","CreateAppComponent_Conditional_0_Conditional_13_Conditional_0_Template","CreateAppComponent_Conditional_0_Conditional_13_Conditional_1_Template","ɵɵconditional","form","controls","name","errors","required","pattern","ɵɵelement","CreateAppComponent_Conditional_0_Conditional_13_Template","ɵɵtwoWayListener","CreateAppComponent_Conditional_0_Template_mat_select_valueChange_18_listener","$event","ɵɵrestoreView","_r1","ɵɵnextContext","ɵɵtwoWayBindingSet","appTemplateId","ɵɵresetView","ɵɵlistener","CreateAppComponent_Conditional_0_Template_button_click_26_listener","closeDialog","CreateAppComponent_Conditional_0_Template_button_click_28_listener","create","touched","ɵɵtwoWayProperty","vm_r3","loading","valid","CreateAppComponent","constructor","dialogRef","snackBar","hostClass","appsListService","buildForm","loading$","ngOnInit","viewModel$","pipe","ngOnDestroy","complete","close","disable","next","value","trim","replace","Number","open","subscribe","error","enable","undefined","duration","_","ɵɵdirectiveInject","i1","i2","_2","selectors","hostVars","hostBindings","CreateAppComponent_HostBindings","rf","ctx","ɵɵhostProperty","CreateAppComponent_Conditional_0_Template","tmp_0_0","ɵɵpipeBind1","i3","ɵNgNoValidate","DefaultValueAccessor","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","i4","MatFormField","MatLabel","i5","MatInput","i6","MatSelect","i7","MatOption","i8","MatButton","styles","Injector","inject","token","injector","subInjector","providers","parent","get","self","Context","DnnContext","HttpClient","of","switchMap","FileUploadMessageTypes","webApiAppRoot","ImportAppService","http","context","dnnContext","importApp","file","changedName","retryOnDuplicate","formData","FormData","append","post","$2sxc","apiUrl","params","zoneId","toString","result","Messages","MessageType","Warning","folderName","prompt","Text","ɵɵinject","factory","ɵfac","NgClass","NgTemplateOutlet","ɵɵelementContainer","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","ɵɵprojection","isError","isShort","toggleIsShort","inputs","standalone","features","ɵɵStandaloneFeature","ngContentSelectors","_c0","decls","vars","consts","template","FieldHintComponent_Template","FieldHintComponent_Template_div_click_0_listener","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","ɵɵtemplateRefExtractor","ɵɵpureFunction1","_c1","tmp_2_0","MatHint","MatError"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}