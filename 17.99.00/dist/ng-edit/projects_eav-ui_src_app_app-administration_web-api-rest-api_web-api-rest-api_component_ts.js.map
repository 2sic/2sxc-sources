{"version":3,"file":"projects_eav-ui_src_app_app-administration_web-api-rest-api_web-api-rest-api_component_ts.js","mappings":"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","sources":["./projects/eav-ui/src/app/app-administration/web-api-rest-api/web-api-rest-api.component.ts","./projects/eav-ui/src/app/app-administration/web-api-rest-api/web-api-rest-api.component.html","./projects/eav-ui/src/app/code-editor/services/source.service.ts"],"sourcesContent":["import { AsyncPipe } from '@angular/common';\r\nimport { Component } from '@angular/core';\r\nimport { FormBuilder, FormGroup, ReactiveFormsModule } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { DevRestQueryComponent } from '../../dev-rest/query/query.component';\r\nimport { WebApi } from '../models';\r\nimport { ActivatedRoute, Router, RouterOutlet } from '@angular/router';\r\nimport { SourceService } from '../../code-editor/services/source.service';\r\nimport { SxcGridModule } from '../../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { transient } from '../../core';\r\n\r\n@Component({\r\n  selector: 'app-web-api-rest-api',\r\n  standalone: true,\r\n  imports: [\r\n    MatSelectModule,\r\n    MatButtonModule,\r\n    MatCardModule,\r\n    MatIconModule,\r\n    ReactiveFormsModule,\r\n    AsyncPipe,\r\n    DevRestQueryComponent,\r\n    RouterOutlet,\r\n    SxcGridModule,\r\n  ],\r\n  templateUrl: './web-api-rest-api.component.html',\r\n  styleUrl: './web-api-rest-api.component.scss'\r\n})\r\nexport class WebApiRestApiComponent {\r\n  private sourceService = transient(SourceService);\r\n  webApis$ = new BehaviorSubject<WebApi[]>(undefined);\r\n  webApiTypeForm: FormGroup;\r\n\r\n  constructor(\r\n    private fb: FormBuilder,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchWebApis();\r\n    this.webApiTypeForm = this.fb.group({\r\n      webApiType: ['']\r\n    });\r\n  }\r\n\r\n  fetchWebApis() {\r\n    this.sourceService.getWebApis().subscribe((webApis: WebApi[]) => {\r\n      this.webApis$.next(webApis);\r\n      // When Route are reload and have some Guid in the Route\r\n      const urlSegments = this.router.url.split('/');\r\n      const urlPath = urlSegments[urlSegments.length - 1]\r\n      // var encodedUrlPath = decodeURIComponent(urlPath) // not Working 2dg\r\n      var encodedUrlPath = urlPath.replace(\"%252F\", \"/\");\r\n\r\n      const selectedContentType = webApis.find(webApi => webApi.path === encodedUrlPath);\r\n\r\n      if (selectedContentType)\r\n        this.webApiTypeForm.get('webApiType').setValue(selectedContentType.path);\r\n    });\r\n  }\r\n\r\n  openRestApi(apiRoute: string): void {\r\n    if (!apiRoute) return;\r\n    this.router.navigate([encodeURIComponent(apiRoute)], { relativeTo: this.route.parent.firstChild });\r\n  }\r\n}\r\n","<form [formGroup]=\"webApiTypeForm\">\r\n  <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n    <mat-label>Endpoint</mat-label>\r\n    <mat-select formControlName=\"webApiType\" (valueChange)=\"openRestApi($event)\">\r\n      @if (webApis$ | async; as endpoints) {\r\n        @for (endpoint of endpoints.sort() ; track endpoint) {\r\n        <mat-option [value]=\"endpoint.path\">\r\n          {{ endpoint.name }}\r\n        </mat-option>\r\n        }\r\n      }\r\n    </mat-select>\r\n  </mat-form-field>\r\n</form>\r\n\r\n<router-outlet></router-outlet>\r\n","import { Context as DnnContext } from '@2sic.com/sxc-angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { WebApi, WebApiDetails } from '../../app-administration/models';\r\nimport { ViewOrFileIdentifier } from '../../shared/models/edit-form.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { FileAsset } from '../models/file-asset.model';\r\nimport { PredefinedTemplatesResponse } from '../models/predefined-template.model';\r\nimport { Preview } from '../models/preview.models';\r\nimport { SourceView } from '../models/source-view.model';\r\n\r\nconst appFilesAll = 'admin/AppFiles/AppFiles';\r\nconst appFilesAsset = 'admin/AppFiles/asset';\r\nconst appFilesCreate = 'admin/AppFiles/create';\r\nconst apiExplorerInspect = 'admin/ApiExplorer/inspect';\r\nconst apiExplorerAppApiFiles = 'admin/ApiExplorer/AppApiFiles';\r\nconst appFilesPredefinedTemplates = 'admin/AppFiles/GetTemplates';\r\nconst appFilesPreview = 'admin/AppFiles/preview';\r\n\r\n@Injectable()\r\nexport class SourceService {\r\n\r\n  constructor(private http: HttpClient, private context: Context, private dnnContext: DnnContext) { }\r\n\r\n  /** ViewKey is templateId or path */\r\n  get(viewKey: string, global: boolean, urlItems: ViewOrFileIdentifier[]): Observable<SourceView> {\r\n    return this.http.get<SourceView>(this.dnnContext.$2sxc.http.apiUrl(appFilesAsset), {\r\n      params: {\r\n        appId: this.context.appId,\r\n        global,\r\n        ...this.templateIdOrPath(viewKey, global, urlItems),\r\n      },\r\n    }).pipe(\r\n      map(view => {\r\n        if (view.Type.toLocaleLowerCase() === 'auto') {\r\n          switch (view.Extension.toLocaleLowerCase()) {\r\n            case '.cs':\r\n            case '.cshtml':\r\n              view.Type = 'Razor';\r\n              break;\r\n            case '.html':\r\n            case '.css':\r\n            case '.js':\r\n              view.Type = 'Token';\r\n              break;\r\n          }\r\n        }\r\n        return view;\r\n      })\r\n    );\r\n  }\r\n\r\n  /** ViewKey is templateId or path */\r\n  save(viewKey: string, global: boolean, view: SourceView, urlItems: ViewOrFileIdentifier[]): Observable<boolean> {\r\n    return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(appFilesAsset), view, {\r\n      params: {\r\n        appId: this.context.appId,\r\n        global,\r\n        ...this.templateIdOrPath(viewKey, global, urlItems),\r\n      },\r\n    });\r\n  }\r\n\r\n  getAll(mask?: string): Observable<FileAsset[]> {\r\n    return this.http.get<{ Files: FileAsset[] }>(this.dnnContext.$2sxc.http.apiUrl(appFilesAll), {\r\n      params: {\r\n        appId: this.context.appId,\r\n        ...(mask && { mask }),\r\n      },\r\n    }).pipe(\r\n      map(({ Files }) => {\r\n        Files.forEach(file => {\r\n          file.Shared ??= false;\r\n        });\r\n        return Files;\r\n      }),\r\n    );\r\n  }\r\n\r\n  getWebApis(): Observable<WebApi[]> {\r\n    return this.http.get<{ files: WebApi[] }>(this.dnnContext.$2sxc.http.apiUrl(apiExplorerAppApiFiles), {\r\n      params: {\r\n        appId: this.context.appId,\r\n      },\r\n    }).pipe(\r\n      map(({ files }) => {\r\n        files.forEach(file => {\r\n          file.isShared ??= false;\r\n          file.isCompiled ??= false;\r\n        });\r\n        return files;\r\n      }),\r\n    ).pipe(\r\n      map(files => {\r\n        const webApis: WebApi[] = files.map(file => {\r\n          const splitIndex = file.path.lastIndexOf('/');\r\n          const fileExtIndex = file.path.lastIndexOf('.');\r\n          const folder = file.path.substring(0, splitIndex);\r\n          const name = file.path.substring(splitIndex + 1, fileExtIndex);\r\n          const webApi: WebApi = { path: file.path, folder, name, isShared: file.isShared, endpointPath: file.endpointPath, isCompiled: file.isCompiled, edition: file.edition };\r\n          return webApi;\r\n        });\r\n        return webApis;\r\n      }),\r\n    );\r\n  }\r\n\r\n  getWebApiDetails(apiPath: string): Observable<WebApiDetails> {\r\n    return this.http.get<WebApiDetails>(this.dnnContext.$2sxc.http.apiUrl(apiExplorerInspect), {\r\n      params: { appId: this.context.appId, zoneId: this.context.zoneId, path: apiPath },\r\n    });\r\n  }\r\n\r\n  getPredefinedTemplates(purpose?: 'Template' | 'Search' | 'Api', type?: 'Token' | 'Razor'): Observable<PredefinedTemplatesResponse> {\r\n    return this.http.get<PredefinedTemplatesResponse>(this.dnnContext.$2sxc.http.apiUrl(appFilesPredefinedTemplates), {\r\n      params: {\r\n        ...(purpose && { purpose }),\r\n        ...(type && { type }),\r\n      },\r\n    });\r\n  }\r\n\r\n  getPreview(path: string, global: boolean, templateKey: string): Observable<Preview> {\r\n    return this.http.get<Preview>(this.dnnContext.$2sxc.http.apiUrl(appFilesPreview), {\r\n      params: {\r\n        appId: this.context.appId,\r\n        path,\r\n        templateKey,\r\n        global,\r\n      },\r\n    });\r\n  }\r\n\r\n  create(path: string, global: boolean, templateKey: string): Observable<boolean> {\r\n    return this.http.post<boolean>(this.dnnContext.$2sxc.http.apiUrl(appFilesCreate), {}, {\r\n      params: {\r\n        appId: this.context.appId,\r\n        global,\r\n        purpose: 'auto',\r\n        path,\r\n        templateKey,\r\n      },\r\n    });\r\n  }\r\n\r\n  private templateIdOrPath(viewKey: string, global: boolean, urlItems: ViewOrFileIdentifier[]) {\r\n    if (/^[0-9]*$/g.test(viewKey)) {\r\n      const path = urlItems.find(i => i.EntityId?.toString() === viewKey && i.IsShared === global)?.Path;\r\n      return {\r\n        templateId: viewKey,\r\n        ...(path != null && { path }),\r\n      };\r\n    } else {\r\n      return { path: viewKey };\r\n    }\r\n  }\r\n}\r\n"],"names":["AsyncPipe","FormBuilder","ReactiveFormsModule","MatButtonModule","MatCardModule","MatIconModule","MatSelectModule","BehaviorSubject","ActivatedRoute","Router","RouterOutlet","SourceService","SxcGridModule","transient","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵproperty","endpoint_r1","path","ɵɵadvance","ɵɵtextInterpolate1","name","ɵɵrepeaterCreate","WebApiRestApiComponent_Conditional_5_For_1_Template","ɵɵrepeaterTrackByIdentity","ɵɵrepeater","ctx","sort","WebApiRestApiComponent","constructor","fb","router","route","sourceService","webApis$","undefined","ngOnInit","fetchWebApis","webApiTypeForm","group","webApiType","getWebApis","subscribe","webApis","next","urlSegments","url","split","urlPath","length","encodedUrlPath","replace","selectedContentType","find","webApi","get","setValue","openRestApi","apiRoute","navigate","encodeURIComponent","relativeTo","parent","firstChild","_","ɵɵdirectiveInject","i1","i2","_2","selectors","standalone","features","ɵɵStandaloneFeature","decls","vars","consts","template","WebApiRestApiComponent_Template","rf","ɵɵlistener","WebApiRestApiComponent_Template_mat_select_valueChange_4_listener","$event","ɵɵtemplate","WebApiRestApiComponent_Conditional_5_Template","ɵɵelement","ɵɵconditional","tmp_1_0","ɵɵpipeBind1","i3","MatFormField","MatLabel","i4","MatSelect","i5","MatOption","ɵNgNoValidate","NgControlStatus","NgControlStatusGroup","FormGroupDirective","FormControlName","styles","Context","DnnContext","HttpClient","map","appFilesAll","appFilesAsset","appFilesCreate","apiExplorerInspect","apiExplorerAppApiFiles","appFilesPredefinedTemplates","appFilesPreview","http","context","dnnContext","viewKey","global","urlItems","$2sxc","apiUrl","params","appId","templateIdOrPath","pipe","view","Type","toLocaleLowerCase","Extension","save","post","getAll","mask","Files","forEach","file","Shared","files","isShared","isCompiled","splitIndex","lastIndexOf","fileExtIndex","folder","substring","endpointPath","edition","getWebApiDetails","apiPath","zoneId","getPredefinedTemplates","purpose","type","getPreview","templateKey","create","test","i","EntityId","toString","IsShared","Path","templateId","ɵɵinject","factory","ɵfac"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}