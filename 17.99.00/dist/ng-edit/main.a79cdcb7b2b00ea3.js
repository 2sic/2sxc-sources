"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["main"],{2220:(Y,_,t)=>{t.d(_,{m:()=>s});const s={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},8170:(Y,_,t)=>{t.d(_,{I:()=>s});const s={BooleanDefault:"boolean-default",BooleanTristate:"boolean-tristate",CustomDefault:"custom-default",CustomGps:"custom-gps",CustomJsonEditor:"custom-json-editor",DateTimeDefault:"datetime-default",DefaultSuffix:"-default",EmptyDefault:"empty-default",EmptyEnd:"empty-end",EmptyMessage:"empty-message",EntityContentBlocks:"entity-content-blocks",EntityDefault:"entity-default",EntityQuery:"entity-query",ExternalWebComponent:"external-web-component",HyperlinkDefault:"hyperlink-default",HyperlinkLibrary:"hyperlink-library",NumberDefault:"number-default",NumberDropdown:"number-dropdown",StringDefault:"string-default",StringDropdown:"string-dropdown",StringDropdownQuery:"string-dropdown-query",StringFontIconPicker:"string-font-icon-picker",StringJson:"string-json",StringTemplatePicker:"string-template-picker",StringUrlPath:"string-url-path",StringWysiwyg:"string-wysiwyg",EntityPicker:"entity-picker",StringPicker:"string-picker",NumberPicker:"number-picker",Unknown:"unknown"}},2134:(Y,_,t)=>{t.d(_,{fu:()=>v,H3:()=>E,AK:()=>A});var s=t(5544),d=t(9204);const p={name:"ITEMS_EDIT_DIALOG",initContext:!0,panelSize:"custom",panelClass:["c-multi-item-dialog"],getComponent:()=>(0,d.A)(function*(){const{EditEntryComponent:I}=yield Promise.all([t.e("default-node_modules_angular_material_fesm2022_card_mjs"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-node_modules_angular_material_fesm2022_menu_mjs"),t.e("default-node_modules_angular_material_fesm2022_slide-toggle_mjs"),t.e("default-projects_eav-ui_src_app_create-file-dialog_index_ts"),t.e("default-projects_eav-ui_src_app_shared_directives_mousedown-stop-propagation_directive_ts-nod-e2f6cd"),t.e("default-node_modules_angular_material_fesm2022_autocomplete_mjs"),t.e("default-projects_eav-ui_src_app_monaco-editor_monaco-editor_component_ts-projects_eav-ui_src_-57db9c"),t.e("common"),t.e("projects_eav-ui_src_app_edit_dialog_entry_edit-entry_component_ts")]).then(t.bind(t,1296));return I})()};var i=t(3472);const o=new i.B("EditRouteMatchers",!1);function m(I){const N=o.fn("edit","check",{url:I});if(I.length<2||"edit"!==I[0].path)return N.rNull();const et=null!=I[2]&&"details"===I[2].path&&null!=I[3]&&null!=I[4],w=null!=I[2]&&"update"===I[2].path&&null!=I[3]&&null!=I[4],H={items:I[1],...et&&{detailsEntityGuid:I[3],detailsFieldId:I[4]},...w&&{updateEntityGuid:I[3],updateFieldId:I[4]}},O={consumed:I.slice(0,et||w?5:2),posParams:H};return N.r(O,"\u2705")}const T=new i.B("EditRoutingModule",!1),E=[{matcher:m,loadChildren:()=>(T.a("loadChildren - matcher: sub-edit"),S)},{matcher:function y(I){const N=o.fn("refreshEdit","check",{url:I});if(I.length<3||"edit"!==I[0].path||"refresh"!==I[1].path)return N.rNull();const et={items:I[2]},w={consumed:I.slice(0,3),posParams:et};return N.r(w,"\u2705")},loadChildren:()=>t.e("projects_eav-ui_src_app_edit_refresh-edit_module_ts").then(t.bind(t,5668)).then(I=>I.RefreshEditModule)}],A=[{matcher:m,loadChildren:()=>S,data:{history:!1}}],S=[{path:"",component:s.U,data:{dialog:p},children:[...E,{path:"versions/:itemId",loadChildren:()=>t.e("projects_eav-ui_src_app_item-history_item-history_routing_ts").then(t.bind(t,6860)).then(I=>I.historyRoutes)}]}],v=[{matcher:function e(I){const N=o.fn("editRoot","check",{url:I});if(I.length<4||"edit"!==I[2].path)return N.rNull();const et=null!=I[4]&&"details"===I[4].path&&null!=I[5]&&null!=I[6],w=null!=I[4]&&"update"===I[4].path&&null!=I[5]&&null!=I[6],H={zoneId:I[0],appId:I[1],items:I[3],...et&&{detailsEntityGuid:I[5],detailsFieldId:I[6]},...w&&{updateEntityGuid:I[5],updateFieldId:I[6]}},O={consumed:I.slice(0,et||w?7:4),posParams:H};return N.r(O,"\u2705")},loadChildren:()=>S},{matcher:function c(I){const N=o.fn("refreshEditRoot","check",{url:I});if(I.length<5)return N.rNull();if("edit"!==I[2].path||"refresh"!==I[3].path)return null;const et={zoneId:I[0],appId:I[1],items:I[4]},w={consumed:I.slice(0,5),posParams:et};return N.r(w,"\u2705")},loadChildren:()=>t.e("projects_eav-ui_src_app_edit_refresh-edit_module_ts").then(t.bind(t,5668)).then(I=>I.RefreshEditModule)}]},5091:(Y,_,t)=>{t.d(_,{W:()=>s});class s{constructor(p,i,h,o,e,c,m,y){this.name=p,this.config=i,this.group=h,this.control=o,this.settings$=e,this.settings=c,this.basics=m,this.controlStatus=y}}},2895:(Y,_,t)=>{t.d(_,{r:()=>i});var s=t(8170);const d=[s.I.EmptyDefault,s.I.EmptyEnd,s.I.EmptyMessage],p=[s.I.EmptyDefault,s.I.EmptyEnd];class i{static isEmptyField(o){return this.isEmptyInputType(o.inputType)}static isEmptyInputType(o){return d.includes(o)}static endsPreviousGroup(o){return p.includes(o)}static isGroupStart(o){return o===s.I.EmptyDefault}static isGroupEnd(o){return o===s.I.EmptyEnd}static isMessage(o){return o===s.I.EmptyMessage}}},780:(Y,_,t)=>{t.d(_,{m:()=>c});var s=t(271),d=t(1817),p=t(1220),h=t(3826),o=t(8559),e=t(3190);let c=(()=>{class m extends p.L{constructor(C){super("EntityCache",C)}loadEntities(C){if(null!=C){var T=C.map(E=>function i(m){return{id:m.Id,label:m.Text,value:m.Value}}(E));this.upsertManyInCache(T)}}getEntities$(C){return null==C?this.cache$.asObservable():this.cache$.pipe((0,s.T)(T=>T.filter(E=>C.includes(E.value))),(0,d.F)(h.a.arraysEqual))}static#t=this.\u0275fac=function(T){return new(T||m)(o.KVO(e.cu))};static#e=this.\u0275prov=o.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},7315:(Y,_,t)=>{t.d(_,{KR:()=>p,PX:()=>i,py:()=>h});var s=t(3472);const d=!1;function p(e,c,m){const y=new s.B("correctStringEmptyValue",d),C="string"==typeof e?i(e,c,m):e,T=C.map(E=>({noEdit:!0,noDelete:!0,id:null,label:m?.find(S=>S.value==E)?.label??E,tooltip:`${E}`,value:E}));return y.a("equalizeSelectedItems",{fieldValue:e,separator:c,dropdownOptions:m,valueAsArray:C,result:T}),T}function i(e,c,m){return""==e&&m?.some(y=>""==y.value)?[""]:""!=e&&e?Array.isArray(e)?e:e.split(c):[]}function h(e,c){return e?Array.isArray(e)?e.join(c):e:""}},6494:(Y,_,t)=>{t.d(_,{S:()=>h});var s=t(3472),d=t(3050);const i="FieldLogic";class h{constructor(e,c){this.canAutoTranslate=!1,e&&(this.name=e,this._log=new s.B(`${i}[${e}]`,c),this.log.a(`constructor for ${e}`))}static add(e){const c=new e;d.y.singleton().add(c)}static importMe(){}get log(){return this._log??=new s.B(`${i}[${this.name}]`,!1)}isValueEmpty(e,c){const m=this.log.fn("isValueEmpty",null,{value:e,isCreateMode:c}),y=Array.isArray(e)&&0===e.length&&c;return m.r(void 0===e||y)}findAndMergeAdvanced(e,c,m){if(!c)return m;const y=e.eavConfig.settings.Entities.find(T=>T.Guid===c);if(!y)return m;const C=e.entityReader.flatten(y);return{...m,...C}}}},3050:(Y,_,t)=>{t.d(_,{y:()=>i});var s=t(8170),d=t(6494);class p extends d.S{constructor(){super(...arguments),this.name=s.I.Unknown,this.canAutoTranslate=!1}update(o,e,c){return o}}class i{constructor(){this.logics={},this.add(new p)}static singleton(){return window.eavFieldLogicManager??=new i}add(o){this.logics[o.name]=o}get(o){return this.logics[o]??null}getOrUnknown(o){return this.get(o)??this.get(s.I.Unknown)}}},3076:(Y,_,t)=>{t.d(_,{x:()=>d});var s=t(4257);class d{static getTranslationStateClass(i){switch(i){case s.Jo.MissingDefaultLangValue:return"localization-missing-default-lang-value";case s.Jo.Translate:case s.Jo.LinkCopyFrom:return"localization-translate";case s.Jo.DontTranslate:return"";case s.Jo.LinkReadOnly:return"localization-link-read-only";case s.Jo.LinkReadWrite:return"localization-link-read-write";default:return""}}static calculateSharedInfoMessage(i,h){i=d.calculateShortDimensions(i,h);const o=d.calculateEditAndReadDimensions(i),e=o.editableDimensions,c=o.readOnlyDimensions;let m="";const y=e.length>0,C=c.length>0;return y&&C?m=`${e.join(", ")}, (${c.join(", ")})`:y?m=e.join(", "):C&&(m=`(${c.join(", ")})`),m}static calculateShortDimensions(i,h){const o={},e=h.slice(0,h.indexOf("-"));return o[e]=[],o[e].push(e),i.forEach(c=>{const y=c.slice(0,c.indexOf("-")).replace("~","");o[y]||(o[y]=[]),o[y].push(c)}),i.map(c=>{const m=c.slice(0,c.indexOf("-")),y=m.replace("~","");return o[y].length>1?c:m})}static calculateEditAndReadDimensions(i){const h=[],o=[];return i.forEach(e=>{e.includes("~")?o.push(e.replace("~","")):h.push(e)}),{editableDimensions:h,readOnlyDimensions:o}}}},4034:(Y,_,t)=>{t.d(_,{T:()=>p});var s=t(3826),d=t(8559);let p=(()=>{class i{constructor(){this.itemService=null,this.valueFormulaCounter=0,this.maxValueFormulaCycles=5}init(o){this.itemService=o}applyValueChangesFromFormulas(o,e,c,m,y,C,T,E){const A={};for(const S of e.Attributes){const v=C.filter(H=>H.name===S.Name),I=c[S.Name],N=y[S.Name],et=v[v.length-1]?.value,w=et||N;this.shouldUpdate(I,w,T,m[S.Name]?.settings._disabledBecauseOfTranslation)&&(A[S.Name]=w)}return Object.keys(A).length>0&&this.maxValueFormulaCycles>this.valueFormulaCounter&&(this.valueFormulaCounter++,this.itemService.updateItemAttributesValues(o,A,E),!0)}shouldUpdate(o,e,c,m){if(c||m||void 0===o||void 0===e)return!1;let y=o!==e;return y&&Array.isArray(o)&&Array.isArray(e)&&(y=!s.a.arraysEqual(o,e)),y}static#t=this.\u0275fac=function(e){return new(e||i)};static#e=this.\u0275prov=d.jDH({token:i,factory:i.\u0275fac})}return i})()},8705:(Y,_,t)=>{t.d(_,{f:()=>I});var s=t(7092),d=t(5797),p=t(271),i=t(1817),h=t(1567),o=t(6647),e=t(9835),c=t(9999),m=t(2454),y=t(1199),C=t(4522),T=t(4902),E=t(8131),A=t(3826),S=t(8559),v=t(852);let I=(()=>{class N{constructor(w,H,O,M,F,W){this.formConfig=w,this.itemService=H,this.contentTypeService=O,this.contentTypeItemService=M,this.loggingService=F,this.translate=W,this.subscription=new s.yU}ngOnDestroy(){this.formulaCache$?.complete(),this.formulaResults$?.complete(),this.designerState$?.complete(),this.subscription.unsubscribe()}init(){this.formulaResults$=new d.t([]),this.designerState$=new d.t({editMode:!1,entityGuid:void 0,fieldName:void 0,isOpen:!1,target:void 0});const H=this.buildFormulaCache();this.formulaCache$=new d.t(H)}getFormula(w,H,O,M){return this.formulaCache$.value.find(F=>!(F.entityGuid!==w||F.fieldName!==H||F.target!==O||!M&&F.isDraft))}getFormula$(w,H,O,M){const F=M?[!0,!1]:[!1];return this.formulaCache$.pipe((0,p.T)(W=>W.find(B=>B.entityGuid===w&&B.fieldName===H&&B.target===O&&F.includes(B.isDraft))),(0,i.F)(A.a.objectsEqual))}getFormulas(w,H,O,M){return this.formulaCache$.value.filter(F=>(!w||F.entityGuid===w)&&(!H||F.fieldName===H)&&(!O||O?.find(W=>F.target==W))&&(!!M||!F.isDraft))}getFormulas$(){return this.formulaCache$.asObservable()}updateFormulaFromEditor(w,H,O,M,F){let W;if(F)try{W=E.u.buildFormulaFunction(M)}catch(at){this.sendFormulaResultToUi(w,H,O,void 0,!0,!1);const pt=this.itemService.getItem(w),yt=m.yP.getContentTypeId(pt),vt=this.contentTypeService.getContentType(yt),dt=this.formConfig.language(),rt=`Error building formula for Entity: "${m.qR.getContentTypeTitle(vt,dt)}", Field: "${H}", Target: "${O}"`;this.loggingService.addLog(y.EU.Error,rt,at);const ht=this.getDesignerState();ht.isOpen&&ht.entityGuid===w&&ht.fieldName===H&&ht.target===O&&console.error(rt,at)}const B=this.formulaCache$.value,J=B.findIndex(at=>at.entityGuid===w&&at.fieldName===H&&at.target===O),K=B[J],L=this.buildItemFormulaCacheSharedParts(null,w),Z=K?.promises$&&K?.updateCallback$?{promises$:K.promises$,callback$:K.updateCallback$}:this.createPromisedParts(),k={cache:K?.cache??{},entityGuid:w,fieldName:H,fn:W?.bind({}),isDraft:!F||null==W,source:M,sourceFromSettings:K?.sourceFromSettings,sourceGuid:K?.sourceGuid,sourceId:K?.sourceId,target:O,version:E.u.findFormulaVersion(M),targetEntity:K?.targetEntity??L.targetEntity,user:K?.user??L.user,app:K?.app??L.app,sxc:K?.sxc??L.sxc,stopFormula:!1,promises$:K?.promises$??Z.promises$,updateCallback$:K?.updateCallback$??Z.callback$},ut=J>=0?[...B.slice(0,J),k,...B.slice(J+1)]:[k,...B];this.formulaCache$.next(ut)}updateSaved(w,H,O,M,F,W){const B=this.formulaCache$.value,J=B.findIndex(k=>k.entityGuid===w&&k.fieldName===H&&k.target===O),K=B[J];if(null==K)return;const L={...K,sourceFromSettings:M,sourceGuid:F,sourceId:W},Z=[...B.slice(0,J),L,...B.slice(J+1)];this.formulaCache$.next(Z)}delete(w,H,O){const M=this.formulaCache$.value,F=M.findIndex(B=>B.entityGuid===w&&B.fieldName===H&&B.target===O),W=[...M.slice(0,F),...M.slice(F+1)];this.formulaCache$.next(W)}resetFormula(w,H,O){const M=this.formulaResults$.value,F=M.findIndex(K=>K.entityGuid===w&&K.fieldName===H&&K.target===O);if(F>=0){const K=[...M.slice(0,F),...M.slice(F+1)];this.formulaResults$.next(K)}const W=this.formulaCache$.value,B=W.findIndex(K=>K.entityGuid===w&&K.fieldName===H&&K.target===O),J=W[B];if(null!=J?.sourceFromSettings)this.updateFormulaFromEditor(w,H,O,J.sourceFromSettings,!0);else if(B>=0){const K=[...W.slice(0,B),...W.slice(B+1)];this.formulaCache$.next(K)}}sendFormulaResultToUi(w,H,O,M,F,W){const B={entityGuid:w,fieldName:H,target:O,value:M,isError:F,isOnlyPromise:W},J=this.formulaResults$.value,K=J.findIndex(Z=>Z.entityGuid===w&&Z.fieldName===H&&Z.target===O),L=K>=0?[...J.slice(0,K),B,...J.slice(K+1)]:[B,...J];this.formulaResults$.next(L)}getFormulaResult$(w,H,O){return this.formulaResults$.pipe((0,p.T)(M=>M.find(F=>F.entityGuid===w&&F.fieldName===H&&F.target===O)),(0,i.F)(A.a.objectsEqual))}setDesignerOpen(w){const H={...this.getDesignerState(),isOpen:w};this.setDesignerState(H)}setDesignerState(w){this.designerState$.next(w)}getDesignerState(){return this.designerState$.value}getDesignerState$(){return this.designerState$.pipe((0,i.F)(A.a.objectsEqual))}buildItemFormulaCacheSharedParts(w,H){const O=(w=w??this.itemService.getItem(H)).Entity,M=O.For,W=this.formConfig.config,B=W.dialogContext.User;return{targetEntity:{guid:O.Guid,id:O.Id,type:{guid:O.Type.Id,name:O.Type.Name},for:{targetType:M?.TargetType??0,guid:M?.Guid,number:M?.Number,string:M?.String}},user:{email:B?.Email,guid:B?.Guid,id:B?.Id,isAnonymous:B?.IsAnonymous,isSiteAdmin:B?.IsSiteAdmin,isContentAdmin:B?.IsContentAdmin,isSystemAdmin:B?.IsSystemAdmin,name:B?.Name,username:B?.Username},app:{appId:parseInt(W.appId,10),zoneId:parseInt(W.zoneId,10),isGlobal:W.dialogContext.App.IsGlobalApp,isSite:W.dialogContext.App.IsSiteApp,isContent:W.dialogContext.App.IsContentApp,getSetting:J=>{}},sxc:window.$2sxc({zoneId:W.zoneId,appId:W.appId,pageId:W.tabId,moduleId:W.moduleId,_noContextInHttpHeaders:!0,_autoAppIdsInUrl:!0})}}buildFormulaCache(){const w=[],H=this.formConfig.language(),O=new m.bT(H.current,H.primary);for(const M of this.formConfig.config.itemGuids){const F=this.itemService.getItem(M),W=this.buildItemFormulaCacheSharedParts(F,M),B=m.yP.getContentTypeId(F),J=this.contentTypeService.getContentType(B);for(const K of J.Attributes){const L=m.qR.setDefaultFieldSettings(O.flattenAll(K.Metadata)),Z=this.contentTypeItemService.getContentTypeItems(L.Formulas).filter(k=>m.JS.translate(H,k.Attributes.Enabled,null));for(const k of Z){const ut=m.JS.translate(H,k.Attributes.Formula,null);if(null==ut)continue;const at=m.JS.translate(H,k.Attributes.Target,null);let pt;try{pt=E.u.buildFormulaFunction(ut)}catch(dt){this.sendFormulaResultToUi(M,K.Name,at,void 0,!0,!1);const u=m.qR.getContentTypeTitle(J,H);this.loggingService.addLog(y.EU.Error,`Error building formula for Entity: "${u}", Field: "${K.Name}", Target: "${at}"`,dt),this.loggingService.showMessage(this.translate.instant("Errors.FormulaConfiguration"),2e3)}const yt=this.createPromisedParts(),vt={cache:{},entityGuid:M,fieldName:K.Name,fn:pt?.bind({}),isDraft:null==pt,source:ut,sourceFromSettings:ut,sourceGuid:k.Guid,sourceId:k.Id,target:at,version:E.u.findFormulaVersion(ut),targetEntity:W.targetEntity,user:W.user,app:W.app,sxc:W.sxc,stopFormula:!1,promises$:yt.promises$,updateCallback$:yt.callback$};w.push(vt)}}}return w}createPromisedParts(){const w=new d.t(null),H=new d.t(null),O=w.pipe((0,h.p)(M=>!!M),(0,o.n)(M=>(0,e.H)(M)));return this.subscription.add((0,c.z)([O,H.pipe((0,h.p)(M=>!!M))]).subscribe(([M,F])=>{F(M)})),{promises$:w,callback$:H}}static#t=this.\u0275fac=function(H){return new(H||N)(S.KVO(C.Sy),S.KVO(T.bX),S.KVO(T.n9),S.KVO(T.k1),S.KVO(C.J6),S.KVO(v.c$))};static#e=this.\u0275prov=S.jDH({token:N,factory:N.\u0275fac})}return N})()},3199:(Y,_,t)=>{t.d(_,{F:()=>E});var s=t(8559),d=t(7092),p=t(4858),i=t(1199),h=t(4522),o=t(4902),e=t(8705),c=t(8131),m=t(6231),y=t(5894),C=t(5502),T=t(852);let E=(()=>{class A{constructor(v,I,N,et,w,H,O,M){this.formConfig=v,this.itemService=I,this.languageService=N,this.formulaDesignerService=et,this.loggingService=w,this.translate=H,this.globalConfigService=O,this.editInitializerService=M,this.subscription=new d.yU,this.features=(0,s.WQX)(p.D).getAll(),this.fieldsSettingsService=null,this.formulaPromiseHandler=null}ngOnDestroy(){this.subscription.unsubscribe()}init(v,I,N){this.fieldsSettingsService=v,this.formulaPromiseHandler=I,this.contentTypeSettings$=N}runAllListItemsFormulas(v,I,N,et,w,H,O,M,F){const W=this.formulaDesignerService.getFormulas(v,N.Name,Object.values(m.UZ),!1).filter(B=>!B.stopFormula);if(0===W.length)return F;for(const B of W)for(const J of F){const K=this.runFormula(B,I,et,w,H,O,M,J);switch(B.target){case m.tC.ListItemLabel:J.label=K.value;break;case m.tC.ListItemDisabled:J.notSelectable=K.value;break;case m.tC.ListItemTooltip:J.tooltip=K.value;break;case m.tC.ListItemInformation:J.infoBox=K.value;break;case m.tC.ListItemHelpLink:J.helpLink=K.value}}return F}runAllFormulas(v,I,N,et,w,H,O,M,F,W,B,J,K,L,Z,k){const ut=this.formulaDesignerService.getFormulas(v,N.Name,Object.values(m.a2).concat(Object.values(m.j5)),!1).filter(rt=>!rt.stopFormula);let at,pt;const yt=[],vt={};for(const rt of ut){const ht=this.runFormula(rt,I,et,w,O,M,F);if(ht?.promise instanceof Promise?(this.formulaPromiseHandler.handleFormulaPromise(v,ht,rt,w),rt.stopFormula=ht.stop??!0):rt.stopFormula=ht.stop??rt.stopFormula,ht.fields&&yt.push(...ht.fields),void 0!==ht.value){if(rt.target===m.tC.Value){at=ht.value;continue}if(rt.target===m.tC.Validation){pt=ht.value;continue}y.O.keepSettingsIfTypeMatches(rt.target,M,ht.value,vt)}}return{settings:y.O.ensureNewSettingsMatchRequirements(O,{...M,...vt},N,W,w,H,B,J,K,L,Z,k),validation:pt,value:at,fields:yt}}getFormulaSettingsKey(v,I,N){return`fieldName:${v}:currentLanguage:${I}:defaultLanguage:${N}`}runFormula(v,I,N,et,w,H,O,M){const F=this.formConfig.language(),W=this.languageService.getLanguages(),B=this.globalConfigService.getDebugEnabled(),J=this.editInitializerService.getInitialValues(v.entityGuid,F.current),K=c.u.buildFormulaProps(v,et?.Type,w,H,N,J,F,W,O,B,this.itemService,this.formConfig,this.fieldsSettingsService,this.features()),L=this.isDesignerOpen(v),Z=this.contentTypeSettings$.value;try{switch(v.version){case m.GI.V1:L&&console.log(`Running formula${v.version.toLocaleUpperCase()} for Entity: "${Z._itemTitle}", Field: "${v.fieldName}", Target: "${v.target}" with following arguments:`,K);const k=v.fn(K.data,K.context,K.experimental,M),ut=k&&Array.isArray(k)&&k.every(dt=>"string"==typeof dt);if("string"==typeof k||"number"==typeof k||"boolean"==typeof k||k instanceof Date||ut||!k){if(v.target===m.tC.Value){const dt={value:C.d.valueCorrection(k,et),fields:[],stop:null,openInDesigner:L};return this.formulaDesignerService.sendFormulaResultToUi(v.entityGuid,v.fieldName,v.target,dt.value,!1,!1),L&&console.log("Formula result:",dt),dt}return{value:k,fields:[],stop:null,openInDesigner:L}}return console.error("V1 formulas accept only simple values in return statements. If you need to return an complex object, use V2 formulas."),{value:void 0,fields:[],stop:null,openInDesigner:L};case m.GI.V2:L&&console.log(`Running formula${v.version.toLocaleUpperCase()} for Entity: "${Z._itemTitle}", Field: "${v.fieldName}", Target: "${v.target}" with following arguments:`,K);const at=v.fn(K.data,K.context,K.experimental,M),pt=C.d.correctAllValues(v.target,at,et);return pt.openInDesigner=L,void 0===pt.value&&pt.promise?this.formulaDesignerService.sendFormulaResultToUi(v.entityGuid,v.fieldName,v.target,void 0,!1,!0):this.formulaDesignerService.sendFormulaResultToUi(v.entityGuid,v.fieldName,v.target,pt.value,!1,!1),L&&console.log("Formula result:",pt.value),pt;default:L&&console.log(`Running formula for Entity: "${Z._itemTitle}", Field: "${v.fieldName}", Target: "${v.target}" with following arguments:`,void 0);const yt=v.fn(),vt=C.d.correctAllValues(v.target,yt,et);return vt.openInDesigner=L,this.formulaDesignerService.sendFormulaResultToUi(v.entityGuid,v.fieldName,v.target,vt.value,!1,!1),L&&console.log("Formula result:",vt),vt}}catch(k){const ut=`Error in formula calculation for Entity: "${Z._itemTitle}", Field: "${v.fieldName}", Target: "${v.target}"`;return this.formulaDesignerService.sendFormulaResultToUi(v.entityGuid,v.fieldName,v.target,void 0,!0,!1),this.loggingService.addLog(i.EU.Error,ut,k),L?console.error(ut,k):this.loggingService.showMessage(this.translate.instant("Errors.FormulaCalculation"),2e3),{value:void 0,fields:[],stop:null,openInDesigner:L}}}isDesignerOpen(v){const I=this.formulaDesignerService.getDesignerState();return I.isOpen&&I.entityGuid===v.entityGuid&&I.fieldName===v.fieldName&&I.target===v.target}static#t=this.\u0275fac=function(I){return new(I||A)(s.KVO(h.Sy),s.KVO(o.bX),s.KVO(o.gw),s.KVO(e.f),s.KVO(h.J6),s.KVO(T.c$),s.KVO(o.Bj),s.KVO(h.gy))};static#e=this.\u0275prov=s.jDH({token:A,factory:A.\u0275fac})}return A})()},2968:(Y,_,t)=>{t.d(_,{w:()=>e});var s=t(4230);class d{constructor(m,y,C){this.valueUpdates=m,this.fieldUpdates=y,this.settingUpdates=C}}var p=t(5894),i=t(5502),h=t(6231),o=t(8559);let e=(()=>{class c{constructor(){this.fieldsSettingsService=null}init(y){this.fieldsSettingsService=y}handleFormulaPromise(y,C,T,E){(0,s.mF)("formula promise",T.target,C),C.openInDesigner&&null===C.stop&&console.log("FYI: formula returned a promise. This automatically stops this formula from running again. If you want it to continue running, return stop: false"),T.promises$.next(C.promise),this.DefineCallbackHandlerIfMissing(T,E,y)}DefineCallbackHandlerIfMissing(y,C,T){if(!y.updateCallback$.value){const E=this.fieldsSettingsService.updateValueQueue;y.updateCallback$.next(A=>{const S=i.d.correctAllValues(y.target,A,C),v=E[T]??new d({},[],[]);let I={},N=[];if(y.target===h.tC.Value)I=v.valueUpdates??{},I[y.fieldName]=S.value;else if(y.target.startsWith(h.si)){(0,s.mF)("formula promise settings");const w=y.target.substring(h.si.length);N=v.settingUpdates??[];const H={name:y.fieldName,settings:[{settingName:w,value:A}]};N=N.filter(O=>O.name!==y.fieldName&&!O.settings.find(M=>M.settingName===w)),N.push(H)}const et=v.fieldUpdates??[];S.fields&&et.push(...S.fields),E[T]=new d(I,et,N),y.stopFormula=S.stop??y.stopFormula,this.fieldsSettingsService.retriggerFormulas()})}}updateValuesFromQueue(y,C,T,E,A,S,v,I,N,et,w,H,O,M,F){if(null==C[y])return{valuesUpdated:!1,newFieldProps:null};const W=C[y];C[y]={valueUpdates:{},fieldUpdates:[],settingUpdates:[]};const B=W.valueUpdates,J=W.fieldUpdates,K=W.settingUpdates;let L=!1;(0!==Object.keys(B).length||0!==J.length)&&(F.applyValueChangesFromFormulas(y,T,E,A,B,J,S,v),L=!0);let Z=null;return K.length&&(Z={...A},K.forEach(k=>{const ut={},at=I[k.name]?.settings,pt=w.find(vt=>vt.constants.fieldName===k.name);k.settings.forEach(vt=>{p.O.keepSettingsIfTypeMatches(h.si+vt.settingName,at,vt.value,ut)});const yt=p.O.ensureNewSettingsMatchRequirements(pt.settingsInitial,{...at,...ut},N.find(vt=>vt.Name===k.name),et,pt.inputType,pt.logic,H[k.name],v,S,O,E[k.name],M);Z[k.name]={...Z[k.name],settings:yt}})),{valuesUpdated:L,newFieldProps:Z}}static#t=this.\u0275fac=function(C){return new(C||c)};static#e=this.\u0275prov=o.jDH({token:c,factory:c.\u0275fac})}return c})()},59:(Y,_,t)=>{t.d(_,{Gm:()=>o,Ix:()=>c,UG:()=>d,e5:()=>s});const s="function ",d="v1",o="// new formula syntax - see https://go.2sxc.org/formulas\nv2((data, context) => {\n  return data.value;\n});",c="v2((data, context, item) => {\n  return data.value;\n});"},5894:(Y,_,t)=>{t.d(_,{O:()=>p});var s=t(2454),d=t(6231);class p{static ensureNewSettingsMatchRequirements(h,o,e,c,m,y,C,T,E,A,S,v){o.Name=o.Name||e.Name,o._currentRequired=s.dB.isRequired(o);const I=s.qR.findDisableTranslation(c,m,C,T.primary,e.Metadata);return o.DisableTranslation=E||I,o._disabledBecauseOfTranslation=s.qR.getDisabledBecauseTranslations(C,o.DisableTranslation,T),o.ForcedDisabled=E||o._disabledBecauseOfTranslation||A,o.DisableAutoTranslation=h.DisableAutoTranslation||o.DisableTranslation,y?.update(o,S,v)??o}static keepSettingsIfTypeMatches(h,o,e,c){if(h.startsWith(d.si)){const m=h.substring(d.si.length),y=o[m];if(null==y||null==e||Array.isArray(y)&&Array.isArray(e)||typeof y==typeof e)return c[m]=e,!0}return!1}}},5502:(Y,_,t)=>{t.d(_,{d:()=>i});var s=t(2220),d=t(8170),p=t(6231);class i{static correctAllValues(o,e,c){const m=e?.stop??null;if(null==e)return{value:e,fields:[],stop:m};if("object"==typeof e){if(e instanceof Date&&o===p.tC.Value)return{value:this.valueCorrection(e,c),fields:[],stop:m};if(e instanceof Promise)return{value:void 0,promise:e,fields:[],stop:m};const C=e;return C.stop=m,e.value&&o===p.tC.Value&&(C.value=this.valueCorrection(e.value,c)),e.fields&&(C.fields=e.fields?.map(T=>(T.value=this.valueCorrection(T.value,c),T))),C}const y={value:e};return o===p.tC.Value?{value:this.valueCorrection(y.value,c),fields:[],stop:m}:y}static valueCorrection(o,e){if(null==o)return o;if(e?.Type===d.I.DateTimeDefault){const c=new Date(o);return!("string"==typeof o&&o.endsWith("Z"))&&c.getTime()!==o&&c.setTime(c.getTime()-6e4*c.getTimezoneOffset()),c.setMilliseconds(0),c.toJSON()}return"string"!=typeof o&&(e?.Type?.startsWith(s.m.String.toLocaleLowerCase())||e?.Type?.startsWith(s.m.Hyperlink.toLocaleLowerCase()))?o.toString():o}}},8131:(Y,_,t)=>{t.d(_,{u:()=>h});var s=t(2454);var p=t(59),i=t(6231);class h{static cleanFormula(e){if(!e)return e;let c=e.trim();return c.startsWith("//")&&(c=c.replace(/^\/\/.*\n/gm,"").trim()),c.startsWith(p.UG)?c=`${p.e5}${c}`:c.startsWith(`${p.e5}${p.UG}`)||c.startsWith("v2(")&&(c=c.substring(3,c.lastIndexOf("}")+1),c=c.replace("=>",""),c=`${p.e5}v2 ${c}`),c}static findFormulaVersion(e){const c=this.cleanFormula(e),m=c.substring(p.e5.length,c.indexOf("(")).trim();return Object.values(i.GI).includes(m)?m:void 0}static buildFormulaFunction(e){const c=this.cleanFormula(e);return new Function(`return ${c}`)()}static buildFormulaProps(e,c,m,y,C,T,E,A,S,v,I,N,et,w){switch(e.version){case i.GI.V1:case i.GI.V2:const H={...C,get default(){},get initial(){},get parameters(){},get prefill(){},get value(){},get settings(){}};return Object.defineProperties(H,{default:{get(){if(e.target===i.tC.Value)return s.yP.parseDefaultValue(e.fieldName,c,m);if(e.target.startsWith(i.si)){const M=e.target.substring(i.si.length);return m[M]}}},initial:{get(){if(e.target===i.tC.Value)return T[e.fieldName]}},parameters:{get:()=>h.buildFormulaPropsParameters(S.ClientData?.parameters)},prefill:{get(){if(e.target===i.tC.Value)return s.yP.parseDefaultValue(e.fieldName,c,m,S,!0)}},value:{get(){if(e.target===i.tC.Value)return C[e.fieldName];if(e.target===i.tC.Validation)return{severity:"",message:""};if(e.target.startsWith(i.si)){const M=e.target.substring(i.si.length);return y[M]}}}}),{data:H,context:{app:{...e.app,getSetting:M=>e.version===i.GI.V1?(console.warn("app.getSetting() is not available in v1 formulas, please use v2."),"\u26a0\ufe0f error - see console"):N.config.settings.Values[M]??(console.warn(`Error: Setting '${M}' not found. Did you configure it in the ContentType to be included? See https://go.2sxc.org/formulas`),"\u26a0\ufe0f error - see console")},cache:e.cache,culture:{code:E.current,name:A.find(M=>M.NameId===E.current)?.Culture},debug:v,features:{isEnabled:M=>w.find(F=>F.nameId===M)?.isEnabled??!1},form:{runFormulas(){e.version===i.GI.V1?(console.warn("form.runFormulas() is being deprecated. Use V2 formulas and return the promise. Formulas will auto-run when it completes."),et.retriggerFormulas()):e.version===i.GI.V2&&console.error("form.runFormulas() is not supported in V2 formulas. Just return the promise. Formulas will auto-run when it completes.")}},sxc:e.sxc,target:{entity:e.targetEntity,name:e.target===i.tC.Value||e.target===i.tC.Validation?e.fieldName:e.target.substring(e.target.lastIndexOf(".")+1),type:e.target===i.tC.Value||e.target===i.tC.Validation?e.target:e.target.substring(0,e.target.lastIndexOf("."))},user:e.user},experimental:{getEntities:()=>I.getItems(N.config.itemGuids).map(F=>({guid:F.Entity.Guid,id:F.Entity.Id,type:{id:F.Entity.Type.Id,guid:F.Entity.Type.Id,name:F.Entity.Type.Name}})),getSettings:M=>et.getFieldSettings(M),getValues(M){const F=I.getItem(M),W={};for(const[B,J]of Object.entries(F.Entity.Attributes))W[B]=s.JS.translate(E,J,null);return W}}};default:return}}static buildFormulaPropsParameters(e){return e?JSON.parse(JSON.stringify(e)):{}}static buildDesignerSnippetsData(e,c,m){if(e.version===i.GI.V1){const y=this.buildFormulaPropsParameters(m);return["value","default","prefill","initial",...c.map(T=>T.fieldName),"parameters.ChangeThis",...Object.keys(y).map(T=>`parameters.${T}`)].map(T=>{const E=`data.${T}`;return{code:E,label:E}})}}static buildDesignerSnippetsContext(e){if(e.version===i.GI.V1)return["app.appId","app.zoneId","app.isGlobal","app.isSite","app.isContent","cache.ChangeThis","culture.code","culture.name","debug","features.isEnabled('nameId')","form.runFormulas()","sxc.ChangeThis","target.entity.id","target.entity.guid","target.name","target.type","user.id","user.isAnonymous","user.isSiteAdmin","user.isSystemAdmin"].map(m=>{const y=`context.${m}`;return{code:y,label:y}})}static buildFormulaTypings(e,c,m){if(e.version===i.GI.V2){const y=this.buildFormulaPropsParameters(m),C=c.map(A=>`${A.fieldName}: any;`).join("\n"),T=Object.keys(y).map(A=>`${A}: any;`).join("\n");return"/*\r\n  This is a special file which is not compiled as a normal TypeScript.\r\n  Instead it's loaded as raw text, to hand over to Monaco.\r\n  It ensures that v2 functions have intellisense.\r\n\r\n  TIP: To edit this file, briefly rename it to ...raw.ts, then back to ...rawts\r\n       This will make VSCode load it as a normal TypeScript file, so you can edit it.\r\n\r\n  - Try to keep in sync with the real code in the 2sxc project.\r\n  - The comments are _documentation_ for the user, so they can see what's available\r\n  - If you need any \"internal\" comments, use // instead\r\n  - Note that the [inject:...] comments are replaced by the build process\r\n*/\r\n\r\n/**\r\n * The data object is the main object for figuring out what the field or setting contained and what other fields currently store.\r\n * It has properties such as `.value` etc.\r\n * Just start typing to see the intellisense.\r\n */\r\n// Note that the type must be explicitly like `string | boolean | number | string[]`\r\n// Otherwise it won't show the details to the user\r\ndeclare interface FormulaData {\r\n  /**\r\n   * The value of the current field/setting when the formula runs.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  value: string | boolean | number | string[];\r\n  /**\r\n   * The _default_ value of the current field/setting as defined in the field settings.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  default: string | boolean | number | string[];\r\n  /**\r\n   * A prefill value that was passed into the form when it was loaded.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  prefill: string | boolean | number | string[];\r\n  /**\r\n   * The value of the current field/setting when the form initially loaded.\r\n   *\r\n   * _It's exact type depends on the underlying type._\r\n   */\r\n  initial: string | boolean | number | string[];\r\n  /* [inject:AllFields] */\r\n  /**\r\n   * All parameters which were passed to the form when it was loaded\r\n   *\r\n   * _It's exact type depends on the parameter, but it's usually a string._\r\n   */\r\n  parameters: {\r\n    /* [inject:AllParameters] */\r\n  };\r\n}\r\n\r\ndeclare interface FormulaContext {\r\n  /**\r\n   * Information about the current App\r\n   */\r\n  app: {\r\n    /** The current App ID */\r\n    appId: number;\r\n    /** The current Zone ID */\r\n    zoneId: number;\r\n    /** Determines if the current App is the global App */\r\n    isGlobal: boolean;\r\n    /** Determines if the current App is the primary (main) App on the site */\r\n    isSite: boolean;\r\n    /** Determines if the current App is a content App */\r\n    isContent: boolean;\r\n    /**\r\n     * Retrieve a setting like an App setting.\r\n     * You need the full path like `Settings.ShowCategories`.\r\n     * \r\n     * Important: For security reasons formulas will only get settings which where configured in the ContentType for use in Formulas.\r\n     */\r\n    getSetting(settingPath: string): string;\r\n  };\r\n  /**\r\n   * Cache for this formula. You can store any data here and it will be available in the next run.\r\n   */\r\n  cache: Record<string, any>;\r\n  /**\r\n   * Information about the current language\r\n   */\r\n  culture: {\r\n    code: string;\r\n    name: string;\r\n  };\r\n  debug: boolean;\r\n  /**\r\n   * API to detect what features are currently enabled/available\r\n   */\r\n  features: {\r\n    // /**\r\n    //  * Get internal information about a feature if it's available. This is rarely used.\r\n    //  * @param nameId The name of the feature, eg. `PasteImageFromClipboard`\r\n    //  */\r\n    // get(nameId: string): Record<string, any>;\r\n    /** Find out if the feature is enabled. Eg. `...isEnabled('PasteImageFromClipboard')` */\r\n    isEnabled(nameId: string): boolean;\r\n  };\r\n  /**\r\n   * Work with the current form\r\n   */\r\n  form: {\r\n    // v16 Deprecated for v2\r\n    // /** Re-trigger all formulas. Usually used inside promises when they complete. */\r\n    // runFormulas(): void;\r\n  };\r\n  /**\r\n   * The standard sxc object for the current App.\r\n   * It's the same as the sxc-instance in the page.\r\n   *\r\n   * You can use it to make API calls to the server.\r\n   */\r\n  sxc: {\r\n    /** The module ID */\r\n    id: number;\r\n    /** The Content-Block ID - matches the module ID unless it's an inner-content block inside another module */\r\n    cbid: number;\r\n    /** The sxc WebAPI object. Check the docs: https://docs.2sxc.org/api/js/SxcWebApi.html */\r\n    webApi: {\r\n      /**\r\n       * Get data from a url and return the json-object\r\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\r\n       * @param data Optional data. If provided, it will use a POST\r\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\r\n       */\r\n      fetchJson<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\r\n      /**\r\n       * Get data from a url and return the response (not a nice object)\r\n       * @param url Url to call. It's usually a virtual url such as `app/auto/api/basic/hello`\r\n       * @param data Optional data. If provided, it will use a POST\r\n       * @param method Optional method, default is `GET` unless you specify data, then it's `POST`\r\n       */\r\n      fetchRaw<TData>(url: string, data?: string | Record<string, any>, method?: string): Promise<TData>;\r\n    };\r\n    // turn off for now v16.00 - confusing\r\n    // [key: string]: any;\r\n  };\r\n  /**\r\n   * Information about the item this formula targets.\r\n   */\r\n  target: {\r\n    /** The entity the current formula affects */\r\n    entity: {\r\n      /** The entity ID */\r\n      id: number;\r\n      /** The entity GUID */\r\n      guid: string;\r\n      /** Metadata For information */\r\n      for: {\r\n        /** The target type like `4` (Entity). `0` if it's not metadata  */\r\n        targetType: number;\r\n        /** The int-key if it uses number keys, otherwise null */\r\n        number?: number;\r\n        /** The string-key if it uses string keys, otherwise null */\r\n        string?: string;\r\n        /** The GUID-key if it uses GUIDs, otherwise null */\r\n        guid?: string;\r\n      }\r\n    };\r\n    name: string;\r\n    /** The entity type name */\r\n    type: string;\r\n  };\r\n  /**\r\n   * Information about the current user\r\n   */\r\n  user: {\r\n    /** The current user ID */\r\n    id: number;\r\n    /** Check if the current user is anonymous eg. not logged in */\r\n    isAnonymous: boolean;\r\n    /** Check if the current user is a content admin */\r\n    isContentAdmin: boolean;\r\n    /** Check if the current user is a site admin */\r\n    isSiteAdmin: boolean;\r\n    /** Check if the current user is a system admin */\r\n    isSystemAdmin: boolean;\r\n    /** current user e-mail */\r\n    email: string;\r\n    /** The user GUID */\r\n    guid: string;\r\n    /** the name usually shown in greetings */\r\n    name: string;\r\n    /** The user name used for login */\r\n    username: string;\r\n  };\r\n}\r\n\r\n// /**\r\n//  * Test docs\r\n//  * @param data The data object\r\n//  */\r\n// declare function callbackV2(data: FormulaData): string | string[];\r\n\r\n// /**\r\n//  * test docs 3\r\n//  * @param callback The real code of the formula\r\n//  */\r\n// declare function v3(callback: typeof callbackV2);\r\n\r\n/**\r\n * This `v2` wrapper is required for the intellisense to work.\r\n * @param callback The real code of the formula\r\n * @returns A string, boolean, number, date or an advanced object\r\n */\r\ndeclare function v2(\r\n  // The main function - adding comments here does not show up, so we don't have them ATM\r\n  callback: (\r\n    data: FormulaData,\r\n    context: FormulaContext,\r\n  ) => string | boolean | number | Date | {\r\n    value?: string | boolean | number | Date | { severity: 'warning' | 'error', message: string },\r\n    fields?: {\r\n      name: string,\r\n      value: string | boolean | number | Date\r\n    }[],\r\n    promise?: Promise<any>,\r\n    stop?: boolean,\r\n  },\r\n): void;\r\n".replace("/* [inject:AllFields] */",C).replace("/* [inject:AllParameters] */",T)}}}},6231:(Y,_,t)=>{t.d(_,{GI:()=>s,UZ:()=>i,a2:()=>o,j5:()=>h,si:()=>p,tC:()=>e});const s={V1:"v1",V2:"v2"},d="Field.ListItem.",p="Field.Settings.",i={ListItemLabel:`${d}Label`,ListItemDisabled:`${d}Disabled`,ListItemTooltip:`${d}Tooltip`,ListItemInformation:`${d}Information`,ListItemHelpLink:`${d}HelpLink`},h={Collapsed:`${p}Collapsed`,DropdownValues:`${p}DropdownValues`},o={Disabled:`${p}Disabled`,Name:`${p}Name`,Notes:`${p}Notes`,Required:`${p}Required`,Value:"Field.Value",Visible:`${p}Visible`,Validation:"Field.Validation"},e={...o,...h,...i}},4257:(Y,_,t)=>{t.d(_,{G6:()=>d,Vg:()=>s,so:()=>p,Jo:()=>i,a5:()=>h.a});const s="FieldMetadata",d={Default:"Default",Strict:"Strict"},p={LanguagesDecorator:"LanguagesDecorator",SaveEmptyDecorator:"SaveEmptyDecorator"},i={Translate:"Translate",DontTranslate:"DontTranslate",MissingDefaultLangValue:"MissingDefaultLangValue",LinkReadOnly:"LinkReadOnly",LinkReadWrite:"LinkReadWrite",LinkCopyFrom:"LinkCopyFrom"};var h=t(7011)},7011:(Y,_,t)=>{t.d(_,{a:()=>s,u:()=>d});const s={AdamWrapper:"app-adam-wrapper",CollapsibleWrapper:"app-collapsible-wrapper",DropzoneWrapper:"app-dropzone-wrapper",PickerExpandableWrapper:"app-picker-expandable-wrapper",PickerPreviewWrapper:"app-picker-preview-wrapper",ExpandableWrapper:"app-expandable-wrapper",HiddenWrapper:"app-hidden-wrapper",HyperlinkDefaultExpandableWrapper:"app-hyperlink-default-expandable-wrapper",HyperlinkLibraryExpandableWrapper:"app-hyperlink-library-expandable-wrapper",LocalizationWrapper:"app-localization-wrapper"},d={wrappers:[s.LocalizationWrapper]}},9839:(Y,_,t)=>{t.d(_,{D:()=>d});var s=t(3826);class d{static getFormChanges(i,h){const o={};for(const e of Object.keys(h)){const c=h[e];this.controlValuesEqual(c,i[e])||(o[e]=c)}return 0===Object.keys(o).length?void 0:o}static markControlTouched(i){i.touched||(i.markAsTouched(),i.updateValueAndValidity())}static patchControlValue(i,h){i.touched||i.markAsTouched(),!i.dirty&&!this.controlValuesEqual(i.value,h)&&i.markAsDirty(),i.patchValue(h)}static disableControl(i,h){i.disabled!==h&&(h?i.disable():i.enable())}static controlValuesEqual(i,h){return!!(i===h||"number"==typeof i&&"number"==typeof h&&isNaN(i)&&isNaN(h)||Array.isArray(i)&&Array.isArray(h)&&s.a.arraysEqual(i,h))}}},1573:(Y,_,t)=>{t.d(_,{N:()=>y});var s=t(4979),d=t(3472),p=t(8559),i=t(5091),h=t(4522);const e="FieldMask",c=/\[.*?\]/gi,m=/[\[\]]/gi;let y=(()=>{class E extends s.V{constructor(S){super(new d.B(e,!1)),this.injector=S,this.signal=(0,p.vPA)(""),this.watch=!1,this.fieldsUsedInMask=[],this.fieldState=(0,p.WQX)(i.W),this.controls=this.fieldState.group.controls,this.fieldConfig=this.fieldState.config,this.formConfig=(0,p.WQX)(h.Sy),this.log.a("constructor")}ngOnDestroy(){this.destroy()}initPreClean(S){return this.log.a("initPreClean"),this.preClean=S,this}initCallback(S){return this.log.a("initCallback"),this.callback=S,this.watch=!0,this}init(S,v,I){return this.log.rename(`${this.log.name}-${S}`),null!=I&&(this.watch=I),this.updateMask(v),this}logChanges(){const S=this.log.enabled?this.log:new d.B(e,!0);return(0,p.QZP)(()=>{const v=this.signal();S.a(`Mask '${this.mask}' value changed to: ${v}`)},{injector:this.injector}),this}updateMask(S){this.mask=S??"",this.fieldsUsedInMask=this.extractFieldNames(this.mask),(this.watch||this.callback)&&this.watchAllFields(),this.onChange()}resolve(){if(!C(this.mask))return this.mask;let S=function T(E){return E.replace(/\[([^\]]+)\]/g,(A,S)=>`[${S.toLowerCase()}]`)}(this.mask);return null!=this.formConfig&&(S=S.replace("[app:appid]",this.formConfig.config.appId).replace("[app:zoneid]",this.formConfig.config.zoneId)),null!=this.fieldConfig&&(S=S.replace("[guid]",this.fieldConfig.entityGuid).replace("[id]",this.fieldConfig.entityId.toString())),this.fieldsUsedInMask.forEach((v,I)=>{const N=this.controls.hasOwnProperty(v)&&this.controls[v]&&this.controls[v].value?this.controls[v].value:"",et=this.preClean(v,N);S=S.replace("["+v.toLowerCase()+"]",et)}),S}extractFieldNames(S){if(!S||!C(S))return[];const v=[],I=S.match(c);return I?I.forEach(N=>{const et=N.replace(m,"");v.push(et)}):v.push(this.mask),v}preClean(S,v){return v}onChange(){const S=this.resolve();this.signal()!==S&&(this.signal.set(S),this.callback?.(S))}watchAllFields(){this.fieldsUsedInMask.forEach(S=>{const v=this.controls[S];if(!v)return;const I=v.valueChanges.subscribe(N=>this.onChange());this.subscriptions.add(I)})}static#t=this.\u0275fac=function(v){return new(v||E)(p.KVO(p.zZn))};static#e=this.\u0275prov=p.jDH({token:E,factory:E.\u0275fac})}return E})();function C(E){return(E??"").includes("[")}},2454:(Y,_,t)=>{t.d(_,{zW:()=>s,bT:()=>A,Nt:()=>d.N,qR:()=>e,M5:()=>S,yP:()=>w,JS:()=>E,CK:()=>$t,SX:()=>Lt,b:()=>wt.b,dB:()=>Gt,xd:()=>zt});class s{constructor(a){this.zone=a,this.eventListeners=[]}attach(a){this.zone.runOutsideAngular(()=>{function n(){(function g(D){for(const z of D)clearTimeout(z);D.splice(0,D.length)})(window.windowBodyTimeouts),document.body.classList.add(window.draggingClass)}function r(){document.body.classList.remove(window.draggingClass)}a.addEventListener("dragover",n,{passive:!0}),a.addEventListener("drop",r,{passive:!0}),this.eventListeners.push({element:a,type:"dragover",listener:n},{element:a,type:"drop",listener:r})})}detach(){this.zone.runOutsideAngular(()=>{this.eventListeners.forEach(({element:a,type:n,listener:r})=>{a.removeEventListener(n,r)})})}}var d=t(1573),p=t(2895),i=t(3050),h=t(3076),o=t(4257);class e{static setDefaultContentTypeSettings(a,n,r,g){const D={...a};return D.Description??="",D.EditInstructions??="",D.Features??="",D.Label??="",D.ListInstructions??="",D.Notes??="",D.Icon??="",D.Link??="",D._itemTitle=e.getContentTypeTitle(n,r),D._slotCanBeEmpty=g.IsEmptyAllowed??!1,D._slotIsEmpty=g.IsEmpty??!1,D}static setDefaultFieldSettings(a){const n=c.moveDeprecatedSettings({...a});n.Name??="",n.Placeholder??="",n.Notes??="",n.Required??=!1,n.Disabled??=!1,n.DisableTranslation??=!1,n.Visible??=!0,null!=n.DefaultCollapsed&&(n.Collapsed=n.DefaultCollapsed,delete n.DefaultCollapsed),n.Formulas??=[];let r=i.y.singleton().get(a.InputType);return n.DisableAutoTranslation??=!r?.canAutoTranslate,n}static findDisableTranslation(a,n,r,g,D){if(a.find(lt=>lt.Type.Name===o.so.LanguagesDecorator)?.Attributes.Enabled?.Values.some(lt=>!1===lt.Value)||n?.DisableI18n||!E.hasValueOnPrimary(r,g))return!0;for(const lt of D??[])if(lt.Attributes.DisableTranslation?.Values.some(nt=>!0===nt.Value))return!0;return!1}static getContentTypeTitle(a,n){let r;try{const g=a.Metadata.find(D=>"ContentType"===D.Type.Name||"xx ContentType"===D.Type.Name);g&&(r=E.getValueOrDefault(g.Attributes.Label,n)?.Value),r=r||a.Name}catch{r=a.Name}return r}static findIsLastInGroup(a,n){const r=a.Attributes.indexOf(n);return null==a.Attributes[r+1]||!(r<a.Attributes.findIndex(D=>p.r.isGroupStart(D.InputType))||!p.r.isGroupEnd(n.InputType)&&!p.r.endsPreviousGroup(a.Attributes[r+1].InputType))}static getDisabledBecauseTranslations(a,n,r){return!(r.current===r.primary||E.hasValueOnPrimary(a,r.primary)&&!n&&(E.hasEditableValue(a,r)||(E.hasReadonlyValue(a,r.current),0)))}static getTranslationState(a,n,r){let g,D;if(n)g="LangMenu.InAllLanguages",D="";else if(E.hasValueOnPrimary(a,r.primary)){const nt=E.hasEditableValue(a,r),ft=E.hasReadonlyValue(a,r.current);if(nt||ft){const St=E.getValueTranslation(a,r).Dimensions.map(Rt=>Rt.Value).filter(Rt=>!Rt.includes(r.current));St.length>0?(nt?g="LangMenu.In":ft&&(g="LangMenu.From"),D=h.x.calculateSharedInfoMessage(St,r.current)):(g="",D="")}else g="LangMenu.UseDefault",D=""}else g="LangMenu.MissingDefaultLangValue",D=r.primary;const z=this.getTranslationStateCore(a,n,r);return{infoLabel:g,infoMessage:D,language:z.language,linkType:z.linkType}}static getTranslationStateCore(a,n,r){if(!E.hasValueOnPrimary(a,r.primary))return{language:"",linkType:o.Jo.MissingDefaultLangValue};if(n)return{language:"",linkType:o.Jo.DontTranslate};if(E.hasEditableValue(a,r)){const g=E.getValueTranslation(a,r).Dimensions.filter(D=>D.Value!==r.current);return g.length>0?{language:g[0].Value,linkType:o.Jo.LinkReadWrite}:{language:"",linkType:o.Jo.Translate}}return E.hasReadonlyValue(a,r.current)?{language:E.getValueTranslation(a,r).Dimensions.filter(D=>D.Value!==r.current)[0].Value,linkType:o.Jo.LinkReadOnly}:{language:"",linkType:o.Jo.DontTranslate}}}class c{static moveDeprecatedSettings(a){var n=a;return null==n.VisibleInEditUI||(a.Visible=n.VisibleInEditUI,delete n.VisibleInEditUI),a}}var m=t(4230),y=t(3408),C=t(8021),T=t(3064);class E{static translate(a,n,r){if(!n)return r;const g=this.getValueTranslation(n,a);if(g)return g.Value;const D=this.getValueTranslation(n,T.N.bothPrimary(a));return D?D.Value:n.Values[0]?.Value??null}static getValueOrDefault(a,n){return this.getValueTranslation(a,n)??this.getValueTranslation(a,T.N.bothPrimary(n))}static valuesOfLanguage(a,n){return a?a.Values.filter(r=>this.valueHasLanguage(r,n)):[]}static valueHasLanguage(a,n){return a.Dimensions.find(r=>r.Value===n.current||r.Value===`~${n.current}`||n.current===n.primary&&"*"===r.Value)}static getValueTranslation(a,n){return this.valuesOfLanguage(a,n)[0]}static isEditableOrReadonlyTranslationExist(a,n){return!!a&&this.valuesEditableOfCurrent(a,n).length>0}static valuesEditableOfCurrent(a,n){return a?a.Values.filter(r=>r.Dimensions.find(g=>g.Value===n.current||"*"===g.Value&&n.current===n.primary)):[]}static hasEditableValue(a,n){return this.valuesEditableOfCurrent(a,n).length>0}static countEditableValues(a,n){return this.valuesEditableOfCurrent(a,n).length}static countEditableValuesWithContent(a,n){return a?this.valuesEditableOfCurrent(a,n).filter(r=>""!=r.Value&&null!=r.Value)?.length:0}static hasReadonlyValue(a,n){return!!a&&a.Values.filter(r=>r.Dimensions.find(g=>g.Value===`~${n}`)).length>0}static hasValueOnPrimary(a,n){return!!a&&a.Values.filter(r=>r.Dimensions.find(g=>g.Value===n||"*"===g.Value)).length>0}static updateAttribute(a,n,r){const g={};if(0===Object.keys(a).length){const D={...r};return g[n]=D,g}for(const D of Object.keys(a))if(D===n){const z={...r};g[D]=z}else{const z={...a[D]};g[D]=z}if(null==a[n]){const D={...r};g[n]=D}return g}static updateAttributesValues(a,n,r){const g={};return Object.keys(a).forEach(D=>{const z=n[D];if(void 0!==z)if(this.isEditableOrReadonlyTranslationExist(a[D],r)){const nt={...a[D],Values:a[D].Values.map(ft=>this.valueHasLanguage(ft,r)?{...ft,Value:z}:ft)};g[D]=nt}else{(0,m.mF)("saveAttributeValues add values ",z);const nt=y._.create(z,[C.v.create(r.current)]),ft={...a[D],Values:[...a[D].Values,nt]};g[D]=ft}else{const lt={...a[D]};g[D]=lt}}),g}static updateAttributeValue(a,n,r,g,D){let z={},lt=g.current;D&&(lt=`~${g.current}`);const nt={...a[n],Values:a[n].Values.map(ft=>this.valueHasLanguage(ft,g)?{...ft,Value:r,Dimensions:ft.Dimensions.map(Rt=>Rt.Value===g.current||Rt.Value===`~${g.current}`||g.current===g.primary&&"*"===Rt.Value?{Value:lt}:Rt)}:ft)};return z=this.updateAttribute(a,n,nt),z}static addAttributeValue(a,n,r,g){let D={};const z=0!==Object.keys(a).length&&a[r]?{...a[r],Values:[...a[r].Values,n],Type:g}:{...a[r],Values:[n],Type:g};return D=this.updateAttribute(a,r,z),D}static addAttributeDimension(a,n,r,g,D,z){let lt={},nt=r;z&&(nt=`~${r}`);const ft={...a[n],Values:a[n].Values.map(St=>St.Dimensions.find(Rt=>Rt.Value===g||g===D&&"*"===Rt.Value)?{...St,Dimensions:St.Dimensions.concat({Value:nt})}:St)};return lt=this.updateAttribute(a,n,ft),lt}static removeAttributeDimension(a,n,r){const g=a,D=[r,`~${r}`],z=g[n].Values.find(ft=>ft.Dimensions.some(Ft=>D.includes(Ft.Value)));if(!z)return{...g};let lt;return z.Dimensions.length>1?lt={...g[n],Values:g[n].Values.map(ft=>ft.Dimensions.some(Ft=>D.includes(Ft.Value))?{...ft,Dimensions:ft.Dimensions.filter(Ft=>!D.includes(Ft.Value))}:ft)}:1===z.Dimensions.length&&(lt={...g[n],Values:g[n].Values.filter(ft=>!ft.Dimensions.some(Ft=>D.includes(Ft.Value)))}),this.updateAttribute(g,n,lt)}static getBestValue(a,n,r,g){if(null==a)return;let D=[n,`~${n}`],z=this.findValueForDimensions(a,D);return void 0!==z||(D=["*"],z=this.findValueForDimensions(a,D),void 0!==z)?z:g!==o.G6.Strict?(D=[r,`~${r}`],z=this.findValueForDimensions(a,D),void 0!==z||(z=a.Values[0]?.Value),z):void 0}static findOfExactDimension(a,n){return a.find(r=>r.Dimensions.find(g=>g.Value===n))}static findValueForDimensions(a,n){return a.Values.find(g=>!!g.Dimensions.find(D=>n.includes(D.Value)))?.Value}}class A{constructor(a,n){this.current=a,this.primary=n}getBestValue(a,n){return E.translate(this,a,n)}flatten(a){return this.flattenAll([a])}flattenAll(a){if(null==a||0===a.length||null==a[0])return{};const n={};for(const r of a)if("@All"!==r.Type.Id)for(const[g,D]of Object.entries(r.Attributes)){const z=this.getBestValue(D,null);n[g]=z}for(const r of a)if("@All"===r.Type.Id)for(const[g,D]of Object.entries(r.Attributes)){const z=this.getBestValue(D,null);null!=n[g]&&(null==z||""===z)||(n[g]=z)}return n}}let S=(()=>{class G{static#t=this.defaultIcon="file";static#e=this.customExtensions={doc:"file-word",docx:"file-word",xls:"file-excel",xlsx:"file-excel",ppt:"file-powerpoint",pptx:"file-powerpoint",pdf:"file-pdf",mp3:"file-audio",avi:"file-video",mpg:"file-video",mpeg:"file-video",mov:"file-video",mp4:"file-video",zip:"file-archive",rar:"file-archive",txt:"file-text",html:"file-code",css:"file-code",xml:"file-code",xsl:"file-code"};static#n=this.matExtensions={vcf:"person"};static getExtension(n){return n.substring(n.lastIndexOf(".")+1).toLocaleLowerCase()}static getIconClass(n){const r=this.getExtension(n);return this.matExtensions[r]||this.customExtensions[r]||this.defaultIcon}static isKnownType(n){return null!=this.matExtensions[this.getExtension(n)]}static isImage(n){return this.isImgRegex().test(n)}static isImgRegex(){return/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*\.(?:jpg|jpeg|gif|png|webp))(?:\?([^#]*))?(?:#(.*))?/i}}return G})();var v=t(8170),I=t(3472),N=t(7011);class w{static getContentTypeId(a){return a.Entity.Type?.Id??a.Header.ContentTypeName}static getInputTypeNames(a,n){return a.map(r=>{const g=this.calculateInputType(r,n);return{name:r.Name,inputType:g.inputType}})}static calculateInputType(a,n){const r=n.find(D=>D.Type===a.InputType);return{inputType:a.InputType,isExternal:!!r&&!!r.AngularAssets}}static getWrappers(a,n){const r=n.inputType,g=n.isExternal;if(p.r.isMessage(r))return[];if(p.r.isGroupStart(r))return[N.a.CollapsibleWrapper];const D=[N.a.HiddenWrapper],lt=a.AllowMultiValue??!1;return(r===v.I.EntityDefault||r===v.I.StringDropdownQuery||r===v.I.EntityQuery||r===v.I.EntityContentBlocks||r===v.I.StringDropdown||r===v.I.EntityPicker||r===v.I.StringPicker)&&(D.push(N.a.LocalizationWrapper),(lt||r===v.I.EntityContentBlocks)&&D.push(N.a.PickerExpandableWrapper)),g&&D.push(N.a.DropzoneWrapper,N.a.LocalizationWrapper,N.a.ExpandableWrapper,N.a.AdamWrapper),D}static parseDefaultValue(a,n,r,g,D){const lt=new I.B("InputFieldHelpers",!1).fn("parseDefaultValue",null,{name:a,inputType:n,settings:r,itemHeader:g,onlyPrefill:D});if(D&&void 0===g?.Prefill?.[a])return lt.rNull("only prefill, but no prefill data found");let nt=g?.Prefill?.[a]?.toString()??r.DefaultValue;switch(lt.values({defaultValue:nt}),n){case v.I.BooleanDefault:return"true"===nt?.toLowerCase();case v.I.BooleanTristate:return null!=nt&&""!==nt?"true"===nt.toLowerCase():null;case v.I.DateTimeDefault:return null!=nt&&""!==nt?new Date(nt).toJSON():null;case v.I.NumberDefault:case v.I.NumberDropdown:case v.I.NumberPicker:return null!=nt&&""!==nt?isNaN(Number(nt))?null:Number(nt):null;case v.I.EntityDefault:case v.I.EntityQuery:case v.I.EntityContentBlocks:case v.I.EntityPicker:if(null==nt||""===nt)return[];if(nt.includes("{")&&(nt=nt.replace(/[\{\}]/g,'"')),nt.includes(",")&&!nt.includes("[")){const ft=nt.split(",").map(St=>St.trim());nt=JSON.stringify(ft)}return nt.startsWith("[")?JSON.parse(nt):[nt.replace(/"/g,"")];default:return nt??""}}}var H=t(4334),O=t(7941),M=t(852),F=t(5797),W=t(9999),B=t(271),J=t(4522),Z=t(3840),k=t(2913),ut=t(316),at=t(4456),pt=t(7984),yt=t(5944),vt=t(4981),dt=t(4601),u=t(8559);const rt=G=>({page:G});function ht(G,a){1&G&&u.eu8(0)}function Et(G,a){if(1&G&&u.DNE(0,ht,1,0,"ng-container",9),2&G){const n=a.$implicit;u.XpG(2);const r=u.sdS(15);u.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",u.eq3(2,rt,n))}}function Vt(G,a){if(1&G&&(u.j41(0,"ul"),u.Z7z(1,Et,1,4,"ng-container",null,u.fX1),u.k0s()),2&G){const n=u.XpG();u.R7$(),u.Dyx(n.tree)}}function bt(G,a){1&G&&(u.j41(0,"li")(1,"div",10),u.nrm(2,"div",11),u.j41(3,"div"),u.EFF(4,"No results"),u.k0s()()())}function gt(G,a){if(1&G&&(u.j41(0,"span",15),u.EFF(1),u.k0s()),2&G){const n=u.XpG().$implicit;u.Y8G("tippy",n.path),u.R7$(),u.SpI("",n.path,"\xa0>\xa0")}}function Mt(G,a){1&G&&(u.j41(0,"mat-icon",18),u.EFF(1,"visibility_off"),u.k0s())}function j(G,a){1&G&&(u.j41(0,"mat-icon",18),u.EFF(1,"cancel"),u.k0s())}function _t(G,a){if(1&G){const n=u.RV6();u.j41(0,"li")(1,"div",10),u.nrm(2,"div",11),u.j41(3,"div",12),u.bIt("click",function(){const g=u.eBV(n).$implicit,D=u.XpG(3);return u.Njj(D.select(g))}),u.j41(4,"div",13),u.nrm(5,"mat-icon",14),u.DNE(6,gt,2,2,"span",15),u.j41(7,"span",16),u.EFF(8),u.k0s()(),u.j41(9,"div",17),u.DNE(10,Mt,2,0,"mat-icon",18)(11,j,2,0,"mat-icon",18),u.k0s()()()()}if(2&G){const n=a.$implicit,r=u.XpG(3);u.R7$(3),u.Y8G("ngClass",n.id===r.selected?"selected":""),u.R7$(3),u.vxM(6,n.path?6:-1),u.R7$(),u.Y8G("tippy",n.name),u.R7$(),u.JRh(n.name),u.R7$(2),u.vxM(10,n.isVisible?-1:10),u.R7$(),u.vxM(11,n.isClickable?-1:11)}}function P(G,a){if(1&G&&(u.j41(0,"ul"),u.DNE(1,bt,5,0,"li"),u.Z7z(2,_t,12,6,"li",null,u.fX1),u.k0s()),2&G){const n=u.XpG();u.R7$(),u.vxM(1,0===n.filteredSearch.length?1:-1),u.R7$(),u.Dyx(n.filteredSearch)}}function x(G,a){1&G&&u.nrm(0,"div",11)}function b(G,a){if(1&G){const n=u.RV6();u.j41(0,"mat-icon",20),u.bIt("click",function(){u.eBV(n);const g=u.XpG().page,D=u.XpG(2);return u.Njj(D.toggle(g.id))}),u.EFF(1),u.k0s()}if(2&G){const n=u.XpG().page,r=u.XpG(2);u.R7$(),u.SpI(" ",r.toggled.includes(n.id)?"keyboard_arrow_down":"keyboard_arrow_right"," ")}}function X(G,a){1&G&&(u.j41(0,"mat-icon",18),u.EFF(1,"visibility_off"),u.k0s())}function q(G,a){1&G&&(u.j41(0,"mat-icon",18),u.EFF(1,"cancel"),u.k0s())}function U(G,a){1&G&&u.eu8(0)}function ct(G,a){if(1&G&&u.DNE(0,U,1,0,"ng-container",9),2&G){const n=a.$implicit;u.XpG(3);const r=u.sdS(15);u.Y8G("ngTemplateOutlet",r)("ngTemplateOutletContext",u.eq3(2,rt,n))}}function it(G,a){if(1&G&&(u.j41(0,"ul"),u.Z7z(1,ct,1,4,"ng-container",null,u.fX1),u.k0s()),2&G){const n=u.XpG().page;u.R7$(),u.Dyx(n.children)}}function ot(G,a){if(1&G){const n=u.RV6();u.j41(0,"li")(1,"div",10),u.DNE(2,x,1,0,"div",11)(3,b,2,1,"mat-icon",19),u.j41(4,"div",12),u.bIt("click",function(){const g=u.eBV(n).page,D=u.XpG(2);return u.Njj(D.select(g))}),u.j41(5,"div",13),u.nrm(6,"mat-icon",14),u.j41(7,"span"),u.EFF(8),u.k0s()(),u.j41(9,"div",17),u.DNE(10,X,2,0,"mat-icon",18)(11,q,2,0,"mat-icon",18),u.k0s()()(),u.DNE(12,it,3,0,"ul"),u.k0s()}if(2&G){const n=a.page,r=u.XpG(2);u.R7$(2),u.vxM(2,0===n.children.length?2:-1),u.R7$(),u.vxM(3,n.children.length>0?3:-1),u.R7$(),u.Y8G("ngClass",n.id===r.selected?"selected":""),u.R7$(4),u.JRh(n.name),u.R7$(2),u.vxM(10,n.isVisible?-1:10),u.R7$(),u.vxM(11,n.isClickable?-1:11),u.R7$(),u.vxM(12,n.children.length>0&&r.toggled.includes(n.id)?12:-1)}}function It(G,a){if(1&G){const n=u.RV6();u.j41(0,"div",1)(1,"div",2)(2,"div",3),u.EFF(3),u.nI1(4,"translate"),u.k0s()(),u.j41(5,"div",4)(6,"div",5)(7,"mat-form-field",6)(8,"mat-label"),u.EFF(9,"Search"),u.k0s(),u.j41(10,"input",7),u.bIt("ngModelChange",function(g){u.eBV(n);const D=u.XpG();return u.Njj(D.setFilter(g))}),u.k0s()()(),u.j41(11,"div",8),u.DNE(12,Vt,3,0,"ul")(13,P,4,1,"ul"),u.k0s(),u.DNE(14,ot,13,7,"ng-template",null,0,u.C5r),u.k0s(),u.nrm(16,"mat-dialog-actions"),u.k0s()}if(2&G){const n=a;u.R7$(3),u.JRh(u.bMT(4,4,"Fields.Hyperlink.PagePicker.Title")),u.R7$(7),u.Y8G("ngModel",n.filterText),u.R7$(2),u.vxM(12,n.filterText?-1:12),u.R7$(),u.vxM(13,n.filterText?13:-1)}}let Pt=(()=>{class G{constructor(n,r,g,D){this.dialogData=n,this.dialogRef=r,this.queryService=g,this.translate=D}ngOnInit(){this.selected=this.parseSelectedPageId(),this.toggled=[],this.filterText$=new F.t(""),this.searchItems$=new F.t([]),this.tree$=new F.t([]);const n=(0,W.z)([this.filterText$,this.searchItems$]).pipe((0,B.T)(([r,g])=>g.filter(D=>D.name.toLocaleLowerCase().includes(r.toLocaleLowerCase()))));this.viewModel$=(0,W.z)([this.filterText$,n,this.tree$]).pipe((0,B.T)(([r,g,D])=>({filterText:r,filteredSearch:g,tree:D}))),this.fetchPages()}ngOnDestroy(){this.filterText$.complete(),this.searchItems$.complete(),this.tree$.complete()}setFilter(n){this.filterText$.next(n)}select(n){null!=n.id&&((!n.isClickable||!n.isVisible)&&!window.confirm(this.translate.instant("Fields.Hyperlink.PagePicker.HiddenOrSystemPageWarning"))||this.closeDialog(n.id))}toggle(n){vt.f.toggleInArray(n,this.toggled)}closeDialog(n){if(null==n)return void this.dialogRef.close();const r=this.searchItems$.value.find(D=>D.id===n),g={id:r.id.toString(),name:r.name};this.dialogRef.close(g)}fetchPages(){const n="Default";this.queryService.getAvailableEntities("System.Pages/Default","includehidden=true",null).subscribe({next:g=>{if(!g)return void console.error(this.translate.instant("Fields.Picker.QueryErrorNoData"));if(!g[n])return void console.error(this.translate.instant("Fields.Picker.QueryStreamNotFound")+" "+n);const D=g[n],z=function K(G){return G?G.map(n=>{let r=n.Path.trim().replace(/\\/g,"/").replace(/\/\//g,"/");return r.startsWith("/")&&(r=r.substring(1)),r=r.split("/").slice(0,-1).join(" > "),{id:n.Id,name:n.Name,path:r,isVisible:n.Visible,isClickable:n.Clickable}}):[]}(D);this.searchItems$.next(z);const lt=function L(G){if(!G)return[];const a=G.map(r=>({children:[],id:r.Id,name:r.Name,parentId:r.ParentId,isVisible:r.Visible,isClickable:r.Clickable})),n=[];for(const r of a){if(-1===r.parentId){n.push(r);continue}const g=a.find(D=>D.id===r.parentId);g?g.children.push(r):n.push(r)}return n}(D);this.tree$.next(lt)},error:g=>{console.error(g),console.error(`${this.translate.instant("Fields.Picker.QueryError")} - ${g.data}`)}})}parseSelectedPageId(){const n="page:";let r=this.dialogData.group.controls[this.dialogData.config.fieldName].value;if("string"==typeof r&&(r=r.trim().toLocaleLowerCase(),r.startsWith(n)))try{return parseInt(r.split(n)[1],10)}catch{return}}static#t=this.\u0275fac=function(r){return new(r||G)(u.rXU(O.Vh),u.rXU(O.CP),u.rXU(J.cq),u.rXU(M.c$))};static#e=this.\u0275cmp=u.VBU({type:G,selectors:[["app-page-picker"]],standalone:!0,features:[u.Jv_([J.cq]),u.aNF],decls:2,vars:3,consts:[["pageAndChildren",""],[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[1,"page-search-box"],["color","accent",1,"eav-mat-form-field"],["matInput","",3,"ngModelChange","ngModel"],[1,"page-tree-box"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"page-row"],[1,"no-toggle"],[1,"page-label",3,"click","ngClass"],[1,"page-icon-and-text"],["svgIcon","file",1,"page-icon"],[1,"page-path",3,"tippy"],[1,"page-name",3,"tippy"],[1,"page-icons"],[1,"page-visible-clickable-icon"],[1,"page-toggle"],[1,"page-toggle",3,"click"]],template:function(r,g){if(1&r&&(u.DNE(0,It,17,6,"div",1),u.nI1(1,"async")),2&r){let D;u.vxM(0,(D=u.bMT(1,1,g.viewModel$))?0:-1,D)}},dependencies:[yt.RG,yt.rl,yt.nJ,pt.fS,pt.fg,at.YN,at.me,at.BC,at.vS,ut.T3,ut.YU,k.Cc,k.PW,Z.m_,Z.An,O.E7,ut.Jj,M.h,M.D9,dt.e],styles:[".page-picker-title[_ngcontent-%COMP%]{margin:0}.page-search-box[_ngcontent-%COMP%]{margin-bottom:16px;width:40%}.page-tree-box[_ngcontent-%COMP%]{height:82%;max-width:100%;overflow:auto}.page-tree-box[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;padding-left:8px;margin:0}.page-tree-box[_ngcontent-%COMP%] > ul[_ngcontent-%COMP%]{padding-left:0}.page-row[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-row[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:20px;height:20px;font-size:20px}.no-toggle[_ngcontent-%COMP%]{width:20px;height:20px;display:inline-block;flex-shrink:0}.page-toggle[_ngcontent-%COMP%]{cursor:pointer;flex-shrink:0}.page-icon[_ngcontent-%COMP%]{margin-right:4px;flex-shrink:0}.page-visible-clickable-icon[_ngcontent-%COMP%]{margin-left:4px;flex-shrink:0}.page-label[_ngcontent-%COMP%]{cursor:pointer;display:flex;align-items:center;justify-content:space-between;padding:4px 4px 4px 2px;border-radius:4px;width:100%}.page-label[_ngcontent-%COMP%]   .page-icon-and-text[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start}.page-label[_ngcontent-%COMP%]   .page-icons[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-end}.page-label[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#a2a7b1;text-overflow:ellipsis;max-width:270px;white-space:nowrap;overflow:hidden;padding-right:.5em}.page-label[_ngcontent-%COMP%]   .page-name[_ngcontent-%COMP%]{text-overflow:ellipsis;max-width:225px;white-space:nowrap;overflow:hidden}.page-label[_ngcontent-%COMP%]:hover{background-color:#06599a;color:#fff}.page-label[_ngcontent-%COMP%]:hover   .page-path[_ngcontent-%COMP%]{color:#c7cad0}.page-label.selected[_ngcontent-%COMP%]{background-color:#002753;color:#fff}.page-label.selected[_ngcontent-%COMP%]   .page-path[_ngcontent-%COMP%]{color:#c7cad0}"]})}return G})();class $t{static open(a,n,r,g,D,z){r.open(Pt,{autoFocus:!1,data:{config:a,group:n},viewContainerRef:g,height:"80%",width:"650px"}).afterClosed().pipe((0,H.s)(1)).subscribe(ft=>{z(ft)}),D.markForCheck()}}class Lt{static removeFromStart(a,n){if(!a)return a;for(;a.substring(0,1)===n;)a=a.substring(1);return a}static removeFromEnd(a,n){if(!a)return a;for(;a.substring(a.length-1,a.length)===n;)a=a.substring(0,a.length-1);return a}static cleanBadPath(a){if(!a)return a;const n="_";return a.replace(/[\?<>\\:\*\|":]/g,n).replace(/[\x00-\x1f\x80-\x9f]/g,n).replace(/^\.+$/,n).replace(/^(con|prn|aux|nul|com[0-9]|lpt[0-9])(\..*)?$/i,n).replace(/[\. ]+$/,n)}static sanitizePath(a){return a&&(a=this.removeFromStart(a,"/"),a=this.removeFromEnd(a,"/"),a=this.removeFromStart(a,"\\"),a=this.removeFromEnd(a,"\\"),this.cleanBadPath(a))}static sanitizeName(a){return a?this.sanitizePath(a).replace(/\//g,"_"):a}}var wt=t(3412),At=t(9839);let zt=(()=>{class G{static#t=this.validationMessages={required:n=>n?"ValidationMessage.Required":"ValidationMessage.RequiredShort",min:n=>n?"ValidationMessage.Min":"ValidationMessage.NotValid",max:n=>n?"ValidationMessage.Max":"ValidationMessage.NotValid",minNoItems:n=>n?"ValidationMessage.MinNoItems":"ValidationMessage.NotValid",maxNoItems:n=>n?"ValidationMessage.MaxNoItems":"ValidationMessage.NotValid",pattern:n=>n?"ValidationMessage.Pattern":"ValidationMessage.NotValid",decimals:n=>n?"ValidationMessage.Decimals":"ValidationMessage.NotValid",jsonError:n=>n?"ValidationMessage.JsonError":"ValidationMessage.NotValid",formulaError:n=>"ValidationMessage.NotValid"};static#e=this.warningMessages={jsonWarning:"ValidationMessage.JsonWarning",formulaWarning:"ValidationMessage.NotValid"};static validateForm(n){const r={};for(const[g,D]of Object.entries(n.controls))if(At.D.markControlTouched(D),D.invalid)for(const z of Object.keys(D.errors))if(r[g]=this.validationMessages[z]?.(void 0),r[g])break;return r}static getErrorMessage(n,r){let g="";if(!n.invalid||!n.dirty&&!n.touched)return g;for(const D of Object.keys(n.errors))if(g="formulaError"===D?n.errors.formulaMessage??this.validationMessages[D]?.(r):this.validationMessages[D]?.(r),g)break;return g}static getWarningMessage(n){let r="";if(null==n._warning$.value||!n.dirty&&!n.touched)return r;for(const g of Object.keys(n._warning$.value))if(r="formulaWarning"===g?n._warning$.value.formulaMessage??this.warningMessages[g]:this.warningMessages[g],r)break;return r}}return G})();var Ht=t(4860),Bt=t(7315);class Gt{static isRequired(a){return!this.ignoreValidators(a)&&a.Required}static getValidators(a,n,r){const g=[n!==v.I.HyperlinkLibrary?this.required(a,r):this.requiredAdam(a,r),this.pattern(a,r),this.decimals(a,r),this.min(a,r),this.max(a,r),this.minNoItems(a,r),this.maxNoItems(a,r),this.formulaValidate(a,r)];return n===v.I.CustomJsonEditor&&g.push(this.validJson(a,r)),g}static ensureWarning(a){null==a._warning$&&(a._warning$=new F.t(null))}static required(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||!g._currentRequired?null:at.k0.required(r)}}static requiredAdam(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||!g._currentRequired?null:0===r.adamItems?{required:!0}:null}}static pattern(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||!g.ValidationRegExJavaScript?null:at.k0.pattern(g.ValidationRegExJavaScript)(r)}}static decimals(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);if(this.ignoreValidators(g)||null==g.Decimals||g.Decimals<0||null==r.value)return null;const D=0===g.Decimals?"^-?[0-9]+$":`^-?[0-9]+(.[0-9]{1,${g.Decimals}})?$`;return r.value.toString().match(D)?null:{decimals:!0}}}static min(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||null==g.Min?null:at.k0.min(g.Min)(r)}}static max(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||null==g.Max?null:at.k0.max(g.Max)(r)}}static minNoItems(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||0==g.AllowMultiMin||null==g.AllowMultiMin?null:(Array.isArray(r.value)?r.value.length:(0,Bt.PX)(r.value,g.Separator,g._options).length)<g.AllowMultiMin?{minNoItems:g.AllowMultiMin}:null}}static maxNoItems(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);return this.ignoreValidators(g)||0==g.AllowMultiMax||null==g.AllowMultiMax?null:(Array.isArray(r.value)?r.value.length:(0,Bt.PX)(r.value,g.Separator,g._options).length)>g.AllowMultiMax?{maxNoItems:g.AllowMultiMax}:null}}static validJson(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldSettings(a);let D,z;if(this.ignoreValidators(g)||"none"===g.JsonValidation||!r.value)D=!1,z=!1;else try{JSON.parse(r.value),D=!1,z=!1}catch{"strict"===g.JsonValidation?(D=!0,z=!1):"light"===g.JsonValidation&&(D=!1,z=!0)}return r._warning$.next(z?{jsonWarning:!0}:null),D?{jsonError:!0}:null}}static formulaValidate(a,n){return r=>{this.ensureWarning(r);const g=n.getFieldsProps()[a],z=g.formulaValidation;let lt,nt;return this.ignoreValidators(g.settings)||null==z?(lt=!1,nt=!1):"error"===z.severity?(lt=!0,nt=!1):"warning"===z.severity?(lt=!1,nt=!0):(lt=!1,nt=!1),r._warning$.next(nt?{formulaWarning:!0,formulaMessage:z.message}:null),lt?{formulaError:!0,formulaMessage:z.message}:null}}static ignoreValidators(a){return!Ht.E.mergedVisible(a)}}},3412:(Y,_,t)=>{t.d(_,{b:()=>s});class s{static stripNonUrlCharacters(p,i,h){if(!p)return"";const o=i?/[^a-z0-9-_/]+/gi:/[^a-z0-9-_]+/gi;return this.latinizeText(p.toLowerCase()).replace("'s ","s ").replace("\\","/").replace(o,"-").replace(/-+/gi,"-").replace(/\/+/gi,"/").replace(/-*\/-*/gi,"/").replace(h?/^-|-+$/gi:/^-/gi,"")}static latinizeText(p){const i={\u00c1:"A",\u0102:"A",\u1eae:"A",\u1eb6:"A",\u1eb0:"A",\u1eb2:"A",\u1eb4:"A",\u01cd:"A",\u00c2:"A",\u1ea4:"A",\u1eac:"A",\u1ea6:"A",\u1ea8:"A",\u1eaa:"A",\u00c4:"Ae",\u01de:"A",\u0226:"A",\u01e0:"A",\u1ea0:"A",\u0200:"A",\u00c0:"A",\u1ea2:"A",\u0202:"A",\u0100:"A",\u0104:"A",\u00c5:"A",\u01fa:"A",\u1e00:"A",\u023a:"A",\u00c3:"A",\ua732:"AA",\u00c6:"AE",\u01fc:"AE",\u01e2:"AE",\ua734:"AO",\ua736:"AU",\ua738:"AV",\ua73a:"AV",\ua73c:"AY",\u1e02:"B",\u1e04:"B",\u0181:"B",\u1e06:"B",\u0243:"B",\u0182:"B",\u0106:"C",\u010c:"C",\u00c7:"C",\u1e08:"C",\u0108:"C",\u010a:"C",\u0187:"C",\u023b:"C",\u010e:"D",\u1e10:"D",\u1e12:"D",\u1e0a:"D",\u1e0c:"D",\u018a:"D",\u1e0e:"D",\u01f2:"D",\u01c5:"D",\u0110:"D",\u018b:"D",\u01f1:"DZ",\u01c4:"DZ",\u00c9:"E",\u0114:"E",\u011a:"E",\u0228:"E",\u1e1c:"E",\u00ca:"E",\u1ebe:"E",\u1ec6:"E",\u1ec0:"E",\u1ec2:"E",\u1ec4:"E",\u1e18:"E",\u00cb:"E",\u0116:"E",\u1eb8:"E",\u0204:"E",\u00c8:"E",\u1eba:"E",\u0206:"E",\u0112:"E",\u1e16:"E",\u1e14:"E",\u0118:"E",\u0246:"E",\u1ebc:"E",\u1e1a:"E",\ua76a:"ET",\u1e1e:"F",\u0191:"F",\u01f4:"G",\u011e:"G",\u01e6:"G",\u0122:"G",\u011c:"G",\u0120:"G",\u0193:"G",\u1e20:"G",\u01e4:"G",\u1e2a:"H",\u021e:"H",\u1e28:"H",\u0124:"H",\u2c67:"H",\u1e26:"H",\u1e22:"H",\u1e24:"H",\u0126:"H",\u00cd:"I",\u012c:"I",\u01cf:"I",\u00ce:"I",\u00cf:"I",\u1e2e:"I",\u0130:"I",\u1eca:"I",\u0208:"I",\u00cc:"I",\u1ec8:"I",\u020a:"I",\u012a:"I",\u012e:"I",\u0197:"I",\u0128:"I",\u1e2c:"I",\ua779:"D",\ua77b:"F",\ua77d:"G",\ua782:"R",\ua784:"S",\ua786:"T",\ua76c:"IS",\u0134:"J",\u0248:"J",\u1e30:"K",\u01e8:"K",\u0136:"K",\u2c69:"K",\ua742:"K",\u1e32:"K",\u0198:"K",\u1e34:"K",\ua740:"K",\ua744:"K",\u0139:"L",\u023d:"L",\u013d:"L",\u013b:"L",\u1e3c:"L",\u1e36:"L",\u1e38:"L",\u2c60:"L",\ua748:"L",\u1e3a:"L",\u013f:"L",\u2c62:"L",\u01c8:"L",\u0141:"L",\u01c7:"LJ",\u1e3e:"M",\u1e40:"M",\u1e42:"M",\u2c6e:"M",\u0143:"N",\u0147:"N",\u0145:"N",\u1e4a:"N",\u1e44:"N",\u1e46:"N",\u01f8:"N",\u019d:"N",\u1e48:"N",\u0220:"N",\u01cb:"N",\u00d1:"N",\u01ca:"NJ",\u00d3:"O",\u014e:"O",\u01d1:"O",\u00d4:"O",\u1ed0:"O",\u1ed8:"O",\u1ed2:"O",\u1ed4:"O",\u1ed6:"O",\u00d6e:"O",\u022a:"O",\u022e:"O",\u0230:"O",\u1ecc:"O",\u0150:"O",\u020c:"O",\u00d2:"O",\u1ece:"O",\u01a0:"O",\u1eda:"O",\u1ee2:"O",\u1edc:"O",\u1ede:"O",\u1ee0:"O",\u020e:"O",\ua74a:"O",\ua74c:"O",\u014c:"O",\u1e52:"O",\u1e50:"O",\u019f:"O",\u01ea:"O",\u01ec:"O",\u00d8:"O",\u01fe:"O",\u00d5:"O",\u1e4c:"O",\u1e4e:"O",\u022c:"O",\u01a2:"OI",\ua74e:"OO",\u0190:"E",\u0186:"O",\u0222:"OU",\u1e54:"P",\u1e56:"P",\ua752:"P",\u01a4:"P",\ua754:"P",\u2c63:"P",\ua750:"P",\ua758:"Q",\ua756:"Q",\u0154:"R",\u0158:"R",\u0156:"R",\u1e58:"R",\u1e5a:"R",\u1e5c:"R",\u0210:"R",\u0212:"R",\u1e5e:"R",\u024c:"R",\u2c64:"R",\ua73e:"C",\u018e:"E",\u015a:"S",\u1e64:"S",\u0160:"S",\u1e66:"S",\u015e:"S",\u015c:"S",\u0218:"S",\u1e60:"S",\u1e62:"S",\u1e68:"S",\u0164:"T",\u0162:"T",\u1e70:"T",\u021a:"T",\u023e:"T",\u1e6a:"T",\u1e6c:"T",\u01ac:"T",\u1e6e:"T",\u01ae:"T",\u0166:"T",\u2c6f:"A",\ua780:"L",\u019c:"M",\u0245:"V",\ua728:"TZ",\u00da:"U",\u016c:"U",\u01d3:"U",\u00db:"U",\u1e76:"U",\u00dc:"Ue",\u01d7:"U",\u01d9:"U",\u01db:"U",\u01d5:"U",\u1e72:"U",\u1ee4:"U",\u0170:"U",\u0214:"U",\u00d9:"U",\u1ee6:"U",\u01af:"U",\u1ee8:"U",\u1ef0:"U",\u1eea:"U",\u1eec:"U",\u1eee:"U",\u0216:"U",\u016a:"U",\u1e7a:"U",\u0172:"U",\u016e:"U",\u0168:"U",\u1e78:"U",\u1e74:"U",\ua75e:"V",\u1e7e:"V",\u01b2:"V",\u1e7c:"V",\ua760:"VY",\u1e82:"W",\u0174:"W",\u1e84:"W",\u1e86:"W",\u1e88:"W",\u1e80:"W",\u2c72:"W",\u1e8c:"X",\u1e8a:"X",\u00dd:"Y",\u0176:"Y",\u0178:"Y",\u1e8e:"Y",\u1ef4:"Y",\u1ef2:"Y",\u01b3:"Y",\u1ef6:"Y",\u1efe:"Y",\u0232:"Y",\u024e:"Y",\u1ef8:"Y",\u0179:"Z",\u017d:"Z",\u1e90:"Z",\u2c6b:"Z",\u017b:"Z",\u1e92:"Z",\u0224:"Z",\u1e94:"Z",\u01b5:"Z",\u0132:"IJ",\u0152:"OE",\u1d00:"A",\u1d01:"AE",\u0299:"B",\u1d03:"B",\u1d04:"C",\u1d05:"D",\u1d07:"E",\ua730:"F",\u0262:"G",\u029b:"G",\u029c:"H",\u026a:"I",\u0281:"R",\u1d0a:"J",\u1d0b:"K",\u029f:"L",\u1d0c:"L",\u1d0d:"M",\u0274:"N",\u1d0f:"O",\u0276:"OE",\u1d10:"O",\u1d15:"OU",\u1d18:"P",\u0280:"R",\u1d0e:"N",\u1d19:"R",\ua731:"S",\u1d1b:"T",\u2c7b:"E",\u1d1a:"R",\u1d1c:"U",\u1d20:"V",\u1d21:"W",\u028f:"Y",\u1d22:"Z",\u00e1:"a",\u0103:"a",\u1eaf:"a",\u1eb7:"a",\u1eb1:"a",\u1eb3:"a",\u1eb5:"a",\u01ce:"a",\u00e2:"a",\u1ea5:"a",\u1ead:"a",\u1ea7:"a",\u1ea9:"a",\u1eab:"a",\u00e4:"ae",\u01df:"a",\u0227:"a",\u01e1:"a",\u1ea1:"a",\u0201:"a",\u00e0:"a",\u1ea3:"a",\u0203:"a",\u0101:"a",\u0105:"a",\u1d8f:"a",\u1e9a:"a",\u00e5:"a",\u01fb:"a",\u1e01:"a",\u2c65:"a",\u00e3:"a",\ua733:"aa",\u00e6:"ae",\u01fd:"ae",\u01e3:"ae",\ua735:"ao",\ua737:"au",\ua739:"av",\ua73b:"av",\ua73d:"ay",\u1e03:"b",\u1e05:"b",\u0253:"b",\u1e07:"b",\u1d6c:"b",\u1d80:"b",\u0180:"b",\u0183:"b",\u0275:"o",\u0107:"c",\u010d:"c",\u00e7:"c",\u1e09:"c",\u0109:"c",\u0255:"c",\u010b:"c",\u0188:"c",\u023c:"c",\u010f:"d",\u1e11:"d",\u1e13:"d",\u0221:"d",\u1e0b:"d",\u1e0d:"d",\u0257:"d",\u1d91:"d",\u1e0f:"d",\u1d6d:"d",\u1d81:"d",\u0111:"d",\u0256:"d",\u018c:"d",\u0131:"i",\u0237:"j",\u025f:"j",\u0284:"j",\u01f3:"dz",\u01c6:"dz",\u00e9:"e",\u0115:"e",\u011b:"e",\u0229:"e",\u1e1d:"e",\u00ea:"e",\u1ebf:"e",\u1ec7:"e",\u1ec1:"e",\u1ec3:"e",\u1ec5:"e",\u1e19:"e",\u00eb:"e",\u0117:"e",\u1eb9:"e",\u0205:"e",\u00e8:"e",\u1ebb:"e",\u0207:"e",\u0113:"e",\u1e17:"e",\u1e15:"e",\u2c78:"e",\u0119:"e",\u1d92:"e",\u0247:"e",\u1ebd:"e",\u1e1b:"e",\ua76b:"et",\u1e1f:"f",\u0192:"f",\u1d6e:"f",\u1d82:"f",\u01f5:"g",\u011f:"g",\u01e7:"g",\u0123:"g",\u011d:"g",\u0121:"g",\u0260:"g",\u1e21:"g",\u1d83:"g",\u01e5:"g",\u1e2b:"h",\u021f:"h",\u1e29:"h",\u0125:"h",\u2c68:"h",\u1e27:"h",\u1e23:"h",\u1e25:"h",\u0266:"h",\u1e96:"h",\u0127:"h",\u0195:"hv",\u00ed:"i",\u012d:"i",\u01d0:"i",\u00ee:"i",\u00ef:"i",\u1e2f:"i",\u1ecb:"i",\u0209:"i",\u00ec:"i",\u1ec9:"i",\u020b:"i",\u012b:"i",\u012f:"i",\u1d96:"i",\u0268:"i",\u0129:"i",\u1e2d:"i",\ua77a:"d",\ua77c:"f",\u1d79:"g",\ua783:"r",\ua785:"s",\ua787:"t",\ua76d:"is",\u01f0:"j",\u0135:"j",\u029d:"j",\u0249:"j",\u1e31:"k",\u01e9:"k",\u0137:"k",\u2c6a:"k",\ua743:"k",\u1e33:"k",\u0199:"k",\u1e35:"k",\u1d84:"k",\ua741:"k",\ua745:"k",\u013a:"l",\u019a:"l",\u026c:"l",\u013e:"l",\u013c:"l",\u1e3d:"l",\u0234:"l",\u1e37:"l",\u1e39:"l",\u2c61:"l",\ua749:"l",\u1e3b:"l",\u0140:"l",\u026b:"l",\u1d85:"l",\u026d:"l",\u0142:"l",\u01c9:"lj",\u017f:"s",\u1e9c:"s",\u1e9b:"s",\u1e9d:"s",\u1e3f:"m",\u1e41:"m",\u1e43:"m",\u0271:"m",\u1d6f:"m",\u1d86:"m",\u0144:"n",\u0148:"n",\u0146:"n",\u1e4b:"n",\u0235:"n",\u1e45:"n",\u1e47:"n",\u01f9:"n",\u0272:"n",\u1e49:"n",\u019e:"n",\u1d70:"n",\u1d87:"n",\u0273:"n",\u00f1:"n",\u01cc:"nj",\u00f3:"o",\u014f:"o",\u01d2:"o",\u00f4:"o",\u1ed1:"o",\u1ed9:"o",\u1ed3:"o",\u1ed5:"o",\u1ed7:"o",\u00f6:"oe",\u022b:"o",\u022f:"o",\u0231:"o",\u1ecd:"o",\u0151:"o",\u020d:"o",\u00f2:"o",\u1ecf:"o",\u01a1:"o",\u1edb:"o",\u1ee3:"o",\u1edd:"o",\u1edf:"o",\u1ee1:"o",\u020f:"o",\ua74b:"o",\ua74d:"o",\u2c7a:"o",\u014d:"o",\u1e53:"o",\u1e51:"o",\u01eb:"o",\u01ed:"o",\u00f8:"o",\u01ff:"o",\u00f5:"o",\u1e4d:"o",\u1e4f:"o",\u022d:"o",\u01a3:"oi",\ua74f:"oo",\u025b:"e",\u1d93:"e",\u0254:"o",\u1d97:"o",\u0223:"ou",\u1e55:"p",\u1e57:"p",\ua753:"p",\u01a5:"p",\u1d71:"p",\u1d88:"p",\ua755:"p",\u1d7d:"p",\ua751:"p",\ua759:"q",\u02a0:"q",\u024b:"q",\ua757:"q",\u0155:"r",\u0159:"r",\u0157:"r",\u1e59:"r",\u1e5b:"r",\u1e5d:"r",\u0211:"r",\u027e:"r",\u1d73:"r",\u0213:"r",\u1e5f:"r",\u027c:"r",\u1d72:"r",\u1d89:"r",\u024d:"r",\u027d:"r",\u2184:"c",\ua73f:"c",\u0258:"e",\u027f:"r",\u00df:"ss",\u015b:"s",\u1e65:"s",\u0161:"s",\u1e67:"s",\u015f:"s",\u015d:"s",\u0219:"s",\u1e61:"s",\u1e63:"s",\u1e69:"s",\u0282:"s",\u1d74:"s",\u1d8a:"s",\u023f:"s",\u0261:"g",\u1d11:"o",\u1d13:"o",\u1d1d:"u",\u0165:"t",\u0163:"t",\u1e71:"t",\u021b:"t",\u0236:"t",\u1e97:"t",\u2c66:"t",\u1e6b:"t",\u1e6d:"t",\u01ad:"t",\u1e6f:"t",\u1d75:"t",\u01ab:"t",\u0288:"t",\u0167:"t",\u1d7a:"th",\u0250:"a",\u1d02:"ae",\u01dd:"e",\u1d77:"g",\u0265:"h",\u02ae:"h",\u02af:"h",\u1d09:"i",\u029e:"k",\ua781:"l",\u026f:"m",\u0270:"m",\u1d14:"oe",\u0279:"r",\u027b:"r",\u027a:"r",\u2c79:"r",\u0287:"t",\u028c:"v",\u028d:"w",\u028e:"y",\ua729:"tz",\u00fa:"u",\u016d:"u",\u01d4:"u",\u00fb:"u",\u1e77:"u",\u00fc:"ue",\u01d8:"u",\u01da:"u",\u01dc:"u",\u01d6:"u",\u1e73:"u",\u1ee5:"u",\u0171:"u",\u0215:"u",\u00f9:"u",\u1ee7:"u",\u01b0:"u",\u1ee9:"u",\u1ef1:"u",\u1eeb:"u",\u1eed:"u",\u1eef:"u",\u0217:"u",\u016b:"u",\u1e7b:"u",\u0173:"u",\u1d99:"u",\u016f:"u",\u0169:"u",\u1e79:"u",\u1e75:"u",\u1d6b:"ue",\ua778:"um",\u2c74:"v",\ua75f:"v",\u1e7f:"v",\u028b:"v",\u1d8c:"v",\u2c71:"v",\u1e7d:"v",\ua761:"vy",\u1e83:"w",\u0175:"w",\u1e85:"w",\u1e87:"w",\u1e89:"w",\u1e81:"w",\u2c73:"w",\u1e98:"w",\u1e8d:"x",\u1e8b:"x",\u1d8d:"x",\u00fd:"y",\u0177:"y",\u00ff:"y",\u1e8f:"y",\u1ef5:"y",\u1ef3:"y",\u01b4:"y",\u1ef7:"y",\u1eff:"y",\u0233:"y",\u1e99:"y",\u024f:"y",\u1ef9:"y",\u017a:"z",\u017e:"z",\u1e91:"z",\u0291:"z",\u2c6c:"z",\u017c:"z",\u1e93:"z",\u0225:"z",\u1e95:"z",\u1d76:"z",\u1d8e:"z",\u0290:"z",\u01b6:"z",\u0240:"z",\ufb00:"ff",\ufb03:"ffi",\ufb04:"ffl",\ufb01:"fi",\ufb02:"fl",\u0133:"ij",\u0153:"oe",\ufb06:"st",\u2090:"a",\u2091:"e",\u1d62:"i",\u2c7c:"j",\u2092:"o",\u1d63:"r",\u1d64:"u",\u1d65:"v",\u2093:"x"};return p.replace(/[^A-Za-z0-9\[\] ]/g,h=>i[h]||h)}static readQueryStringParameters(p){const i={};return p.split("&").forEach(h=>{2===h.split("=").length&&(i[h.split("=")[0]]=decodeURIComponent(h.split("=")[1].replace(/\+/g," ")))}),i}static getUrlParams(p){p=p.split("+").join(" ");const i={};let h;const o=/[?&]?([^=]+)=([^&]*)/g;for(;h=o.exec(p);)i[decodeURIComponent(h[1])]=decodeURIComponent(h[2]);return i}static replaceUrlParam(p,i,h){null===h&&(h="");const o=new RegExp("\\b("+i+"=).*?(&|#|$)");return p.search(o)>=0?p.replace(o,"$1"+h+"$2"):(p=p.replace(/[?#]$/,""))+(p.indexOf("?")>0?"&":"?")+i+"="+h}static getUrlPrefix(p,i){let h="";return"system"===p&&(h=i.systemRoot),"zone"===p&&(h=i.portalRoot),"app"===p&&(h=i.appRoot),"appShared"===p&&(h=i.appSharedRoot),h.endsWith("/")&&(h=h.substring(0,h.length-1)),h}static calculatePathFromRoot(p){let i=p;for(;i.firstChild;)i=i.firstChild;let h="";for(const o of i.snapshot.pathFromRoot)if(!(o.url.length<=0))for(const e of o.url)e.path&&(h+="/"+e.path);return h}}},4813:(Y,_,t)=>{t.d(_,{_:()=>i});var s=t(8394),d=t(3626);class p{static convertOne(o){const e=s.g.convertMany(o.Metadata),c=d.h.mergeSettings(e);return{InputType:o.InputType,IsTitle:o.IsTitle,Metadata:e,Name:o.Name,Settings:c,Type:o.Type}}static convertMany(o){return null==o?[]:o.map(c=>p.convertOne(c))}}class i{static convertOne(o){const e=p.convertMany(o.Attributes),c=s.g.convertMany(o.Metadata),m=d.h.mergeSettings(c);return{Attributes:e,Description:o.Description,Id:o.Id,Metadata:c,Name:o.Name,Scope:o.Scope,Settings:m}}static convertMany(o){return null==o?null:o.map(c=>i.convertOne(c))}}},8021:(Y,_,t)=>{t.d(_,{v:()=>s});class s{static create(p){return{Value:p}}}},3626:(Y,_,t)=>{t.d(_,{h:()=>p});var s=t(3408);class d{static convert(h,o){return{Values:s._.convert(h),Type:o}}}class p{static convert(h){const o={};for(const[e,c]of Object.entries(h))for(const[m,y]of Object.entries(c))o[m]=d.convert(y,e);return o}static mergeSettings(h){if(null==h)return{};const o={};for(const e of h)if("@All"!==e.Type.Id)for(const[c,m]of Object.entries(e.Attributes)){const y={...m};o[c]=y}for(const e of h)if("@All"===e.Type.Id)for(const[c,m]of Object.entries(e.Attributes)){if(null!=o[c]&&""===m.Values[0].Value)continue;const T={...m};o[c]=T}return o}}},8394:(Y,_,t)=>{t.d(_,{g:()=>d});var s=t(3626);class d{static convertOne(i){const h=s.h.convert(i.Attributes),o=this.convertMany(i.Metadata);return{Attributes:h,Guid:i.Guid,Id:i.Id,Owner:i.Owner,Type:i.Type,Version:i.Version,For:i.For,Metadata:o}}static convertMany(i){return null==i?null:i.map(o=>d.convertOne(o))}}},3966:(Y,_,t)=>{t.d(_,{U:()=>d});var s=t(8394);class d{static convert(i){return{Entity:s.g.convertOne(i.Entity),Header:i.Header}}}},3408:(Y,_,t)=>{t.d(_,{_:()=>d});var s=t(8021);class d{static create(i,h){return{Value:i,Dimensions:h}}static convert(i){return Object.entries(i).map(([o,e])=>{const c=o.split(",").map(m=>s.v.create(m));return this.create(e,c)})}}},3064:(Y,_,t)=>{t.d(_,{N:()=>s});class s{static bothPrimary(i){return{current:i.primary,primary:i.primary}}static diffCurrent(i,h){return{current:h,primary:i.primary}}static empty(){return{current:"",primary:"",initial:""}}}},1199:(Y,_,t)=>{t.d(_,{EU:()=>p,iy:()=>i,oY:()=>d,Jk:()=>s});const s={value:null,disabled:!0,dirty:!1,invalid:!1,touched:!1,touchedAndInvalid:!1};function d(h,o){const e=h.touched,c=h.invalid;return{dirty:h.dirty,disabled:h.disabled||o,invalid:c,touched:e,touchedAndInvalid:e&&c,value:h.value}}const p={Error:"error",Log:"log",Warn:"warn"},i={Show:"show",Hide:"hide",Branch:"branch"}},9585:(Y,_,t)=>{t.d(_,{K:()=>B});var s=t(5797),d=t(3942),p=t(9999),i=t(271),h=t(1567),o=t(1817),e=t(6301),c=t(4522),m=t(4230),y=t(3050),C=t(3199),T=t(2454),E=t(4902),A=t(6275),S=t(2968),v=t(4860),I=t(2895),N=t(3826),et=t(9074),w=t(4979),H=t(3472),O=t(8559),M=t(4034);let B=(()=>{class J extends w.V{constructor(L,Z,k,ut,at,pt,yt,vt,dt,u,rt){super(new H.B("FieldsSettingsService",!1)),this.contentTypeService=L,this.contentTypeItemService=Z,this.languageInstanceService=k,this.formConfig=ut,this.itemService=at,this.inputTypeService=pt,this.globalConfigService=yt,this.formsStateService=vt,this.formulaEngine=dt,this.formItemFormulaService=u,this.formulaPromiseHandler=rt,this.contentTypeSettings$=new s.t(null),this.fieldsProps$=new s.t(null),this.forceRefreshSettings$=new s.t(null),this.updateValueQueue={},this.latestFieldProps={},this.contentType$=new d.c,this.itemAttributes$=new d.c,this.entityReader$=new d.c,this.constantFieldParts$=new d.c,this.itemHeader$=new d.c,this.signalsCache={},rt.init(this),u.init(this.itemService),dt.init(this,this.formulaPromiseHandler,this.contentTypeSettings$)}ngOnDestroy(){this.contentTypeSettings$?.complete(),this.fieldsProps$?.complete(),this.forceRefreshSettings$?.complete(),super.destroy()}init(L){this.entityGuid=L;const Z=this.itemService.getItem(L);this.itemFieldVisibility=new v.E(Z.Header);const k=T.yP.getContentTypeId(Z);this.contentType$=this.contentTypeService.getContentType$(k),this.itemHeader$=this.itemService.getItemHeader$(L),this.entityReader$=this.languageInstanceService.getEntityReader$(this.formConfig.config.formId),this.subscriptions.add((0,p.z)([this.contentType$,this.itemHeader$,this.entityReader$]).pipe((0,i.T)(([u,rt,ht])=>T.qR.setDefaultContentTypeSettings(ht.flattenAll(u.Metadata),u,ht,rt))).subscribe(u=>{this.contentTypeSettings$.next(u)}));const ut=this.inputTypeService.getInputTypes$(),at=Z.Entity.Id;this.entityId=at;const pt=this.formConfig.config;this.constantFieldParts$=(0,p.z)([ut,this.contentType$,this.entityReader$,this.formConfig.language$]).pipe((0,i.T)(([u,rt,ht,Et])=>{const Vt=new T.bT(Et.initial,Et.primary),bt=rt.Attributes.map((gt,Mt)=>{const _t=T.qR.setDefaultFieldSettings(Vt.flattenAll(gt.Metadata)).Disabled??!1,P=T.yP.calculateInputType(gt,u),x=u.find(it=>it.Type===gt.InputType),b={angularAssets:x?.AngularAssets,contentTypeId:k,dropzonePreviewsClass:`dropzone-previews-${pt.formId}-${Mt}`,entityGuid:L,entityId:at,fieldName:gt.Name,index:Mt,initialDisabled:_t,inputType:P.inputType,isExternal:P.isExternal,isLastInGroup:T.qR.findIsLastInGroup(rt,gt),type:gt.Type},X=ht.flattenAll(gt.Metadata);X.InputType=gt.InputType,X.VisibleDisabled=this.itemFieldVisibility.isVisibleDisabled(gt.Name);const q=T.qR.setDefaultFieldSettings(X);return{logic:y.y.singleton().get(gt.InputType),settingsInitial:q,inputType:x,calculatedInputType:P,constants:b,currentLanguage:ht.current}});try{this.itemFieldVisibility.hasRules()&&bt.forEach((gt,Mt)=>{if(I.r.isGroupStart(gt.calculatedInputType.inputType)&&0!=gt.settingsInitial.VisibleDisabled)for(let j=Mt+1;j<bt.length;j++){const _t=bt[j];if(I.r.endsPreviousGroup(_t.calculatedInputType.inputType))return;if(0==_t.settingsInitial.VisibleDisabled)return(0,m.mF)("Forced visible",gt.constants.fieldName,"because of",_t.constants.fieldName),void(gt.settingsInitial.VisibleDisabled=!1)}})}catch(gt){console.error("Error trying to set item field visibility",gt)}return bt})),this.itemAttributes$=this.itemService.getItemAttributes$(L);const yt=this.formsStateService.readOnly$,vt=this.globalConfigService.getDebugEnabled$(),dt=this.log.rxTap("updateFieldProps",{enabled:!0});this.subscriptions.add((0,p.z)([this.contentType$,this.itemAttributes$,this.itemHeader$,this.entityReader$,yt,this.forceRefreshSettings$,vt,this.constantFieldParts$]).pipe(dt.pipe(),(0,i.T)(([u,rt,ht,Et,Vt,bt,gt,Mt])=>{const j={};for(const[U,ct]of Object.entries(rt))j[U]=Et.getBestValue(ct,null);const _t=ht.IsEmptyAllowed&&ht.IsEmpty,P={eavConfig:this.formConfig.config,entityReader:Et,debug:gt,contentTypeItemService:this.contentTypeItemService};if(Object.keys(this.latestFieldProps).length){const U=this.formulaPromiseHandler.updateValuesFromQueue(L,this.updateValueQueue,u,j,this.latestFieldProps,_t,Et,this.latestFieldProps,u.Attributes,u.Metadata,Mt,rt,Vt.isReadOnly,P,this.formItemFormulaService);if(U.newFieldProps&&(this.latestFieldProps=U.newFieldProps),U.valuesUpdated)return null}const x={},b={},X=[];for(const U of u.Attributes){const ct=rt[U.Name],it=j[U.Name],ot=Mt.find(At=>At.constants.fieldName===U.Name);let It;It=ot.currentLanguage==this.latestFieldProps[U.Name]?.currentLanguage?this.latestFieldProps[U.Name]?.settings??{...ot.settingsInitial}:{...ot.settingsInitial};const Pt=this.formulaEngine.runAllFormulas(L,at,U,j,ot.inputType,ot.logic,ot.settingsInitial,It,ht,u.Metadata,ct,Et,_t,Vt.isReadOnly,it,P),$t=Pt.settings;b[U.Name]=Pt.value,Pt.fields&&X.push(...Pt.fields);const Lt=T.qR.getTranslationState(ct,$t.DisableTranslation,Et),wt=T.yP.getWrappers($t,ot.calculatedInputType);x[U.Name]={calculatedInputType:ot.calculatedInputType,constants:ot.constants,settings:$t,translationState:Lt,value:it,wrappers:wt,formulaValidation:Pt.validation,currentLanguage:ot.currentLanguage}}return this.latestFieldProps=x,this.formItemFormulaService.applyValueChangesFromFormulas(L,u,j,x,b,X,_t,Et)?null:(this.formItemFormulaService.valueFormulaCounter=0,x)}),dt.map(),(0,h.p)(u=>!!u),dt.filter()).subscribe(u=>{(0,m.mF)("fieldsProps",JSON.parse(JSON.stringify(u))),this.fieldsProps$.next(u)}))}processPickerItems$(L,Z){return(0,p.z)([Z,this.contentType$,this.itemAttributes$,this.entityReader$,this.constantFieldParts$,this.itemHeader$]).pipe((0,i.T)(([k,ut,at,pt,yt,vt])=>{const dt=ut.Attributes.find(Et=>Et.Name===L),u={};for(const[Et,Vt]of Object.entries(at))u[Et]=pt.getBestValue(Vt,null);const rt=yt.find(Et=>Et.constants.fieldName===dt.Name);let ht;return ht=rt.currentLanguage==this.latestFieldProps[dt.Name]?.currentLanguage?this.latestFieldProps[dt.Name]?.settings??{...rt.settingsInitial}:{...rt.settingsInitial},this.formulaEngine.runAllListItemsFormulas(this.entityGuid,this.entityId,dt,u,rt.inputType,rt.settingsInitial,ht,vt,k)}))}getContentTypeSettings(){return this.contentTypeSettings$.value}getContentTypeSettings$(){return this.contentTypeSettings$.asObservable()}getFieldsProps(){return this.fieldsProps$.value}getFieldsProps$(){return this.fieldsProps$.asObservable()}getFieldSettings(L){return this.fieldsProps$.value[L].settings}getFieldSettings$(L){return this.fieldsProps$.pipe((0,i.T)(Z=>Z[L].settings),(0,o.F)(N.a.objectsEqual))}getFieldSettingsReplayed$(L){return this.fieldsProps$.pipe((0,i.T)(Z=>Z[L].settings),(0,o.F)(N.a.objectsEqual),(0,e.t)(1))}getFieldSettingsSignal(L){const Z=this.signalsCache[L];if(Z)return Z;var k=this.getFieldSettingsReplayed$(L);return this.signalsCache[L]=(0,et.ot)(k)}getTranslationState$(L){return this.fieldsProps$.pipe((0,i.T)(Z=>Z[L].translationState),(0,o.F)(N.a.objectsEqual))}retriggerFormulas(){this.forceRefreshSettings$.next()}updateSetting(L,Z){const k=this.latestFieldProps[L],ut={...k.settings,...Z},at={...this.latestFieldProps,[L]:{...k,settings:ut}};this.fieldsProps$.next(at),this.latestFieldProps=at}static#t=this.\u0275fac=function(Z){return new(Z||J)(O.KVO(E.n9),O.KVO(E.k1),O.KVO(E.Tw),O.KVO(c.Sy),O.KVO(E.bX),O.KVO(E.A8),O.KVO(E.Bj),O.KVO(A.y),O.KVO(C.F),O.KVO(M.T),O.KVO(S.w))};static#e=this.\u0275prov=O.jDH({token:J,factory:J.\u0275fac})}return J})()},7253:(Y,_,t)=>{t.d(_,{Q:()=>E});var s=t(271),d=t(8764),p=t(8873),i=t(4902),h=t(4979),o=t(3472),e=t(8559),c=t(6443),m=t(4821);const T="cms/edit/";let E=(()=>{class A extends h.V{constructor(v,I,N,et){super(new o.B("FormDataService",!1)),this.http=v,this.dnnContext=I,this.context=N,this.globalConfigService=et}fetchFormData(v){return this.log.a("fetchFormData",{items:v,context:this.context}),this.http.post(this.dnnContext.$2sxc.http.apiUrl(T+"load"),v,{params:{appId:this.context.appId}}).pipe((0,s.T)(I=>(I.Context.Language.List=I.Context.Language.List.filter(N=>N.IsEnabled),I)),(0,d.M)(I=>{this.globalConfigService.allowDebug(I.Context.Enable.DebugMode)}))}saveFormData(v,I){return this.http.post(this.dnnContext.$2sxc.http.apiUrl(T+"save"),v,{params:{appId:this.context.appId,partOfPage:I}})}static#t=this.\u0275fac=function(I){return new(I||A)(e.KVO(c.Qq),e.KVO(m.ob),e.KVO(p.o),e.KVO(i.Bj))};static#e=this.\u0275prov=e.jDH({token:A,factory:A.\u0275fac})}return A})()},6275:(Y,_,t)=>{t.d(_,{y:()=>C});var s=t(8559),d=t(7092),p=t(4205),i=t(5797),h=t(9999),o=t(271),e=t(1817),c=t(4522),m=t(4902),y=t(3826);let C=(()=>{class T{constructor(A,S,v){this.formConfig=A,this.itemService=S,this.languageService=v,this.readOnly=(0,s.vPA)({isReadOnly:!0,reason:void 0}),this.formsValidTemp=(0,s.vPA)(!1),this.saveButtonDisabled=(0,s.EWP)(()=>this.readOnly().isReadOnly||!this.formsValidTemp())}ngOnDestroy(){this.saveForm$.complete(),this.readOnly$?.complete(),this.formsValid$?.complete(),this.formsDirty$?.complete(),this.subscription?.unsubscribe()}init(){this.subscription=new d.yU,this.saveForm$=new p.B,this.readOnly$=new i.t({isReadOnly:!0,reason:void 0}),this.formsValid$=new i.t(!1),this.formsDirty$=new i.t(!1),this.saveButtonDisabled$=(0,h.z)([this.readOnly$,this.formsValid$]).pipe((0,o.T)(([S,v])=>S.isReadOnly||!v),(0,e.F)()),this.formsValid={},this.formsDirty={};for(const S of this.formConfig.config.itemGuids)this.formsValid[S]=!1,this.formsDirty[S]=!1;this.subscription.add((0,h.z)([(0,h.z)(this.formConfig.config.itemGuids.map(S=>this.itemService.getItemHeader$(S))).pipe((0,o.T)(S=>S.some(v=>v?.EditInfo?.ReadOnly??!1))),(0,h.z)([this.formConfig.language$,this.languageService.getLanguages$()]).pipe((0,o.T)(([S,v])=>v.find(I=>I.NameId===S.current)?.IsAllowed??!0))]).subscribe(([S,v])=>{const I={isReadOnly:S||!v,reason:S?"Form":v?void 0:"Language"};y.a.objectsEqual(I,this.readOnly$.value)||(this.readOnly$.next(I),this.readOnly.set(I))}))}getFormValid(A){return this.formsValid[A]}setFormValid(A,S){this.formsValid[A]=S;const v=!Object.values(this.formsValid).some(I=>!1===I);v!==this.formsValidTemp()&&(this.formsValidTemp.set(v),this.formsValid$.next(v))}setFormDirty(A,S){this.formsDirty[A]=S;const v=Object.values(this.formsDirty).some(I=>!0===I);v!==this.formsDirty$.value&&this.formsDirty$.next(v)}static#t=this.\u0275fac=function(S){return new(S||T)(s.KVO(c.Sy),s.KVO(m.bX),s.KVO(m.gw))};static#e=this.\u0275prov=s.jDH({token:T,factory:T.\u0275fac})}return T})()},4522:(Y,_,t)=>{t.d(_,{NU:()=>h,gy:()=>yt,e0:()=>gt,Tr:()=>b,K6:()=>X.K,bh:()=>Pt,Sy:()=>A,ym:()=>$t.y,UT:()=>se,J6:()=>wt,cq:()=>Qt,je:()=>oe,Gg:()=>x,gb:()=>P});var s=t(2454),d=t(8559),p=t(6443),i=t(4821);let h=(()=>{class tt{constructor(l,f,$){this.http=l,this.dnnContext=f,this.formConfig=$}getAll(l,f){return this.http.get(l+"/items",{params:{subfolder:f.subfolder,usePortalRoot:f.usePortalRoot.toString(),appId:this.formConfig.config.appId}})}addFolder(l,f,$){return this.http.post(f+"/folder",{},{params:{subfolder:$.subfolder,newFolder:s.SX.sanitizeName(l),usePortalRoot:$.usePortalRoot.toString(),appId:this.formConfig.config.appId}})}rename(l,f,$,V){return this.http.get($+"/rename",{params:{subfolder:V.subfolder,isFolder:l.IsFolder.toString(),id:l.Id.toString(),usePortalRoot:V.usePortalRoot.toString(),newName:s.SX.sanitizeName(f),appId:this.formConfig.config.appId}})}deleteItem(l,f,$){return this.http.get(f+"/delete",{params:{subfolder:$.subfolder,isFolder:l.IsFolder.toString(),id:l.Id.toString(),usePortalRoot:$.usePortalRoot.toString(),appId:this.formConfig.config.appId}})}getLinkInfo(l,f,$,V){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("cms/edit/linkInfo"),{params:{link:l,...$&&{guid:$},...f&&{contentType:f},...V&&{field:V},appid:this.formConfig.config.appId}})}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(p.Qq),d.KVO(i.ob),d.KVO(A))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var o=t(8172),e=t(8873),c=t(6114),m=t(3472),y=t(9074);let A=(()=>{class tt{constructor(){this.log=new m.B("FormConfigService",!1),this.configSignal=(0,d.vPA)(null),this.context=(0,d.WQX)(e.o),this.languageService=(0,d.WQX)(c.T),this.injector=(0,d.WQX)(d.zZn)}initFormConfig(l,f,$,V,R,Q,st,mt){this.settings=mt,this.languages={initial:l.Language.Current,primary:l.Language.Primary,list:l.Language.List},this.config={zoneId:this.context.zoneId.toString(),appId:this.context.appId.toString(),appRoot:l.App.Url,appSharedRoot:l.App.SharedUrl,moduleId:this.context.moduleId?.toString(),partOfPage:sessionStorage.getItem(o.h9)??o.bO,portalRoot:l.Site.Url,tabId:this.context.tabId?.toString(),systemRoot:window.location.pathname.split("/dist/")[0]+"/",versioningOptions:this.getVersioningOptions("true"===sessionStorage.getItem(o.h9),sessionStorage.getItem(o.Hh)),formId:f,isParentDialog:$,itemGuids:V,createMode:R,isCopy:Q,enableHistory:st,enableFormulaSave:l.Enable.FormulaSave??!1,overrideEditRestrictions:l.Enable.OverrideEditRestrictions??!1,dialogContext:l,settings:mt},this.configSignal.set(this.config),this.language=(0,y.ot)(this.language$,{injector:this.injector})}getVersioningOptions(l,f){const $={show:!0,hide:!0,branch:!0};if(!l)return $;const V=f||"";switch(V){case"":case"DraftOptional":return $;case"DraftRequired":return{branch:!0,hide:!0};case"DraftForbidden":return{show:!0};default:return console.error(`Invalid versioning requirements: ${V}`),{}}}get language$(){return this._language$??=this.languageService.getLanguage$(this.config.formId)}static#t=this.\u0275fac=function(f){return new(f||tt)};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var S=t(1477),v=t(3216),I=t(4858),w=t(4257),H=t(8394),O=t(4902),M=t(2895),F=t(3050),W=t(4813),B=t(780),J=t(4979),K=t(7253),L=t(3064),Z=t(9184),k=t(852),ut=t(3347);let yt=(()=>{class tt extends J.V{constructor(l,f,$,V,R,Q,st,mt,Ct,Tt,Ot,Ut,Dt,xt,jt,kt){super(new m.B("EditInitializerService",!1)),this.route=l,this.formConfig=f,this.itemService=$,this.inputTypeService=V,this.contentTypeItemService=R,this.contentTypeService=Q,this.publishStatusService=st,this.translate=mt,this.languageService=Ct,this.languageStore=Tt,this.snackBar=Ot,this.entityCacheService=Ut,this.adamCacheService=Dt,this.linkCacheService=xt,this.featuresService=jt,this.formDataService=kt,this.loaded=(0,d.vPA)(!1),this.initialFormValues={}}ngOnDestroy(){super.destroy()}fetchFormData(){const l=(0,v.K)(this.route.snapshot.params.items),f={...l,items:l.items.map((V,R)=>({...V,clientId:R}))};this.log.a("fetchFormData",f);const $=JSON.stringify(f.items);this.formDataService.fetchFormData($).subscribe(V=>{const R={...V,Items:V.Items.map(Q=>{const st=f.items.find(mt=>mt.clientId===Q.Header.clientId);return this.log.a("fetchFormData - remix",{item:Q,originalItem:st}),null==st?Q:{...Q,Header:{...Q.Header,Prefill:st.Prefill,ClientData:st.ClientData}}})};this.log.a("fetchFormData - after remix",{formData:R}),this.featuresService.load(R.Context),(0,S.W)(R.Context.App),this.importLoadedData(R),this.keepInitialValues(),this.initMissingValues(),this.loaded.set(!0)})}importLoadedData(l){const f=Math.floor(99999*Math.random()),$=function N(tt){let Wt=0;for(const l of tt.snapshot.pathFromRoot)if(!(l.url.length<=0))for(const f of l.url)"edit"===f.path&&Wt++;return 1===Wt}(this.route),V=l.Items.map(Dt=>Dt.Entity.Guid);this.itemService.loadItems(l.Items),this.inputTypeService.addInputTypes(l.InputTypes),this.contentTypeItemService.addContentTypeItems(l.ContentTypeItems),this.contentTypeService.addContentTypes(l.ContentTypes),this.adamCacheService.loadPrefetch(l.Prefetch?.Adam),this.entityCacheService.loadEntities(l.Prefetch?.Entities),this.linkCacheService.loadPrefetch(l.Prefetch?.Links,l.Prefetch?.Adam);const R=this.itemService.getItems(V),Q=0===R[0].Entity.Id,st=null!=R[0].Header.DuplicateEntity,mt=!Q&&!1!==this.route.snapshot.data.history,Ct={...l.Settings,Entities:H.g.convertMany(l.Settings.Entities),ContentTypes:W._.convertMany(l.Settings.ContentTypes)};this.formConfig.initFormConfig(l.Context,f,$,V,Q,st,mt,Ct);var Tt=l.Context.Language;const Ot=Tt.Current.split("-")[0];if(this.translate.use(Ot),$){const Dt=function et(tt,Wt){if(0===Wt.length)return Wt;let l;const f=[],$=[];for(const R of Wt)R.NameId===tt?l=R:R.NameId.startsWith(tt.split("-")[0])?f.push(R):$.push(R);return f.sort((R,Q)=>R.NameId.localeCompare(Q.NameId)),$.sort((R,Q)=>R.NameId.localeCompare(Q.NameId)),l?[l,...f,...$]:[...f,...$]}(Tt.Primary,Tt.List);this.languageService.loadLanguages(Dt)}this.languageStore.addToStore(f,Tt.Primary,Tt.Current,!1);const Ut=this.publishStatusService.asPublishMode(l.IsPublished,l.DraftShouldBranch);this.publishStatusService.setPublishMode(Ut,f,this.formConfig)}keepInitialValues(){const l=this.itemService.getItems(this.formConfig.config.itemGuids),f=this.languageService.getLanguages().map(V=>V.NameId),$=this.formConfig.language();f.includes($.current)||f.push($.current),f.includes($.primary)||f.push($.primary);for(const V of l)for(const R of f){const Q={},st=L.N.diffCurrent($,R);for(const[mt,Ct]of Object.entries(V.Entity.Attributes))Q[mt]=s.JS.translate(st,Ct,null);this.initialFormValues[this.initialValuesCacheKey(V.Entity.Guid,R)]=Q}}initialValuesCacheKey(l,f){return`entityGuid:${l}:language:${f}`}getInitialValues(l,f){return this.initialFormValues[this.initialValuesCacheKey(l,f)]}initMissingValues(){const l=this.log.fn("initMissingValues"),f=this.formConfig.config,$=f.formId,V=this.itemService.getItems(f.itemGuids),R=this.inputTypeService.getInputTypes(),Q=this.languageService.getLanguages(),st=this.formConfig.language();let mt=!1;const Ct=f.createMode;for(const Tt of V){const Ot=s.yP.getContentTypeId(Tt),Ut=this.contentTypeService.getContentType(Ot);for(const Dt of Ut.Attributes){const xt=Dt.Name,jt=R.find(Kt=>Kt.Type===Dt.InputType),kt=M.r.isEmptyInputType(jt?.Type);if(l.a(`Attribute: '${xt}' InputType: '${jt?.Type}' isEmptyType: '${kt}'`),kt)continue;const qt=F.y.singleton().getOrUnknown(jt?.Type),Jt=Tt.Entity.Attributes[Dt.Name],Xt=s.qR.setDefaultFieldSettings(new s.bT(st.primary,st.primary).flattenAll(Dt.Metadata));if(0===Q.length){l.a(`${xt} languages none, simple init`);const Kt=s.JS.getBestValue(Jt,"*","*",w.G6.Default);qt.isValueEmpty(Kt,Ct)&&this.itemService.setDefaultValue(Tt,Dt,jt,Xt,Q,st.primary)}else{l.a(`${xt} languages many, complex init`);const Kt=jt?.DisableI18n,Yt=s.JS.getBestValue(Jt,"*","*",w.G6.Strict);if(l.values({disableI18n:Kt,noLanguageValue:Yt},xt),!Kt&&void 0!==Yt){const ne=this.itemService.removeItemAttributeDimension(Tt.Entity.Guid,Dt.Name,"*",!0);this.itemService.addItemAttributeValue(Tt.Entity.Guid,Dt.Name,Yt,st.primary,!1,Dt.Type,!1,ne),l.a(`${xt} exit`);continue}const te=s.JS.getBestValue(Jt,st.primary,st.primary,w.G6.Strict),ee=qt.isValueEmpty(te,Ct);l.values({currentName:xt,valueIsEmpty:ee,defaultLanguageValue:te,isCreateMode:Ct},xt),ee&&null!=this.itemService.setDefaultValue(Tt,Dt,jt,Xt,Q,st.primary)&&!Xt.IsEphemeral&&(mt=!0)}}}if(mt&&st.current!==st.primary){this.languageStore.setCurrent($,st.primary);const Tt=this.translate.instant("Message.SwitchedLanguageToDefault",{language:st.primary});this.snackBar.open(Tt,null,{duration:5e3})}}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(Z.nX),d.KVO(A),d.KVO(O.bX),d.KVO(O.A8),d.KVO(O.k1),d.KVO(O.n9),d.KVO(O.F_),d.KVO(k.c$),d.KVO(O.gw),d.KVO(O.Tw),d.KVO(ut.UG),d.KVO(B.m),d.KVO(O.Rf),d.KVO(O.kT),d.KVO(I.D),d.KVO(K.Q))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var vt=t(4205),dt=t(271),u=t(1817),rt=t(1567),ht=t(3037),Et=t(5057),Vt=t(3176),bt=t(7941);let gt=(()=>{class tt extends Vt.${constructor(l,f,$,V,R){super(),this.dialogRef=l,this.route=f,this.router=$,this.languageInstanceService=V,this.formConfig=R}ngOnDestroy(){this.childFormResult$.complete(),super.ngOnDestroy()}init(){this.childFormResult$=new vt.B,this.initHideHeader(),this.initChildFormResult(),this.refreshOnChildVersionsClosed()}isExpanded(l,f){const $=l.toString(),V=this.route.snapshot.params;return V.detailsEntityGuid===f&&V.detailsFieldId===$}isExpanded$(l,f){const $=l.toString();return this.route.params.pipe((0,dt.T)(V=>V.detailsEntityGuid===f&&V.detailsFieldId===$),(0,u.F)())}isExpandedSignal(l,f){return(0,y.ot)(this.isExpanded$(l,f))}childFormResult(l,f){return this.childFormResult$.pipe((0,rt.p)($=>$.updateEntityGuid===f&&$.updateFieldId===l&&null!=$.result),(0,dt.T)($=>$.result))}childFormClosed(){return this.childFormResult$.pipe((0,dt.T)(l=>null))}expand(l,f,$,V){const R=this.route.snapshot.params,st=`edit/${R.items}`+(null!=R.detailsEntityGuid&&null!=R.detailsFieldId?`/details/${R.detailsEntityGuid}/${R.detailsFieldId}`:""),mt=`edit/${R.items}`+(l?`/details/${$}/${f}`:""),Ct=s.b.calculatePathFromRoot(this.route),Tt=Ct.lastIndexOf(st);if(Tt<=0)return;const Ot=Ct.substring(0,Tt)+Ct.substring(Tt).replace(st,mt);this.router.navigate([Ot],{state:V&&{componentTag:V}})}open(l,f,$){const V=(0,v.s)($),R=this.route.snapshot.params;if(null!=R.detailsEntityGuid&&null!=R.detailsFieldId)return void this.router.navigate([`edit/${V}`],{relativeTo:this.route});const st=`edit/${R.items}`,mt=`edit/${R.items}/update/${f}/${l}/edit/${V}`,Ct=s.b.calculatePathFromRoot(this.route),Tt=Ct.lastIndexOf(st);if(Tt<=0)return;const Ot=Ct.substring(0,Tt)+Ct.substring(Tt).replace(st,mt);this.router.navigate([Ot])}initHideHeader(){this.subscriptions.add(this.route.params.pipe((0,dt.T)(l=>null!=l.detailsEntityGuid&&null!=l.detailsFieldId),(0,u.F)()).subscribe(l=>{this.languageInstanceService.updateHideHeader(this.formConfig.config.formId,l)}))}initChildFormResult(){this.subscriptions.add(this.router.events.pipe((0,rt.p)(l=>l instanceof Z.wF),(0,ht.Z)(!!this.route.snapshot.firstChild),(0,dt.T)(()=>!!this.route.snapshot.firstChild),(0,Et.J)(),(0,rt.p)(([l,f])=>l&&!f),(0,dt.T)(()=>{const l=this.route.snapshot.params,f=null!=l.detailsEntityGuid&&null!=l.detailsFieldId,$=f?l.detailsEntityGuid:l.updateEntityGuid,V=f?l.detailsFieldId:l.updateFieldId,Q=this.router.getCurrentNavigation().extras?.state;return{updateEntityGuid:$,updateFieldId:parseInt(V,10),result:Q}})).subscribe(l=>{this.childFormResult$.next(l);const f=this.route.snapshot.params;if(null==f.updateEntityGuid||null==f.updateFieldId)return;const V=`edit/${f.items}/update/${f.updateEntityGuid}/${f.updateFieldId}`,R=`edit/${f.items}`,Q=s.b.calculatePathFromRoot(this.route),st=Q.lastIndexOf(V);if(st<=0)return;const mt=Q.substring(0,st)+Q.substring(st).replace(V,R);this.router.navigate([mt])}))}refreshOnChildVersionsClosed(){this.subscriptions.add(this.router.events.pipe((0,rt.p)(l=>l instanceof Z.wF),(0,ht.Z)(!!this.route.snapshot.firstChild),(0,dt.T)(()=>!!this.route.snapshot.firstChild),(0,Et.J)(),(0,rt.p)(([l,f])=>l&&!f),(0,dt.T)(()=>this.router.getCurrentNavigation().extras?.state),(0,rt.p)(l=>null!=l?.refreshEdit)).subscribe(l=>{if(!l.refreshEdit)return;const f=this.route.snapshot.params,$=`edit/${f.items}`,V=`edit/refresh/${f.items}`,R=s.b.calculatePathFromRoot(this.route),Q=R.lastIndexOf($);if(Q<=0)return;const mt={navigateUrl:R.substring(0,Q)+R.substring(Q).replace($,V)};this.dialogRef.close(mt)}))}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(bt.CP),d.KVO(Z.nX),d.KVO(Z.Ix),d.KVO(O.Tw),d.KVO(A))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var Mt=t(6647),j=t(6301);const P="admin/entity/",x="admin/entity/list";let b=(()=>{class tt extends J.V{constructor(l,f,$,V){super(new m.B("EntityService",!1)),this.http=l,this.formConfig=f,this.dnnContext=$,this.queryService=V}getEntities$(l){return l.pipe((0,rt.p)(f=>null!=f),(0,Mt.n)(f=>this.getAvailableEntities(f.contentTypeName).pipe((0,j.t)(1))))}getAvailableEntities(l,f){var $=this.log.rxTap("getEntities",{enabled:!0});return this.queryService.getEntities({contentTypes:[l],itemIds:f,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe($.pipe(),(0,dt.T)(V=>V.Default))}delete(l,f,$,V,R){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(P+"delete"),{params:{contentType:l,id:f.toString(),appId:this.formConfig.config.appId,force:$.toString(),...V&&{parentId:V.toString()},...V&&R&&{parentField:R}}})}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(p.Qq),d.KVO(A),d.KVO(i.ob),d.KVO(Qt))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var X=t(9585),q=t(8764),U=t(52),ct=t(4230);let Pt=(()=>{class tt{constructor(l,f,$,V,R){this.http=l,this.itemService=f,this.formConfig=$,this.contentTypeService=V,this.fieldsSettingsService=R,this.log=new m.B("FieldsTranslateService",!1)}init(l){const f=this.log.fn("init");this.entityGuid=l;const $=this.itemService.getItem(l);this.contentTypeId=s.yP.getContentTypeId($),f.end({entityGuid:l,contentTypeId:this.contentTypeId})}translate(l,f=!1,$){const V=this.log.fn("translate","",{fieldName:l,isTransaction:f,transactionItem:$});if(this.isTranslationDisabled(l))return V.rNull("Translation is disabled for this field.");const R=this.formConfig.language();$=this.itemService.removeItemAttributeDimension(this.entityGuid,l,R.current,f,$);const st=this.itemService.getItemAttributes(this.entityGuid)[l],mt=void 0!==s.JS.findOfExactDimension(st.Values,R.current),Ct=s.JS.getValueTranslation(st,L.N.bothPrimary(R));return mt?V.rNull():V.r(this.addItemAttributeValueHelper(l,Ct.Value,R.current,!1))}dontTranslate(l,f=!1,$){const V=this.log.fn("dontTranslate","",{fieldName:l,isTransaction:f,transactionItem:$});if(this.isTranslationDisabled(l))return V.rNull("Translation is disabled for this field.");const R=this.formConfig.language();return this.itemService.removeItemAttributeDimension(this.entityGuid,l,R.current,f,$)}autoTranslate(l,f,$=!1,V=!1){const R=this.formConfig.settings.Values[U.Ox.GoogleTranslate];R.IsDemo&&alert("This translation is a demo. Please provide your own Google Translate API key in the EAV configuration.");const Q=this.formConfig.language(),st=this.itemService.getItemAttributes(this.entityGuid),mt=(l=l.filter(Ot=>!this.isTranslationDisabled(Ot))).map(Ot=>s.JS.findOfExactDimension(st[Ot].Values,f).Value),Ct=l.map(Ot=>void 0!==s.JS.findOfExactDimension(st[Ot].Values,Q.current));V||l.forEach((Ot,Ut)=>{const Dt=mt[Ut],xt=this.isAutoTranslationEnabledButWasDisabledByDefault(Ot);(null==Dt||""===Dt||xt)&&this.translate(Ot)}),this.http.post(`https://translation.googleapis.com/language/translate/v2?key=${R.ApiKey}`,{q:mt,target:Q.current,source:f}).pipe((0,q.M)(Ot=>{Ot.data.translations.forEach((Ut,Dt)=>{const xt=document.createElement("textarea");xt.innerHTML=Ut.translatedText,!$&&Ct[Dt]?this.itemService.updateItemAttributeValue(this.entityGuid,l[Dt],xt.value,Q,!1):Ct[Dt]||this.addItemAttributeValueHelper(l[Dt],xt.value,Q.current,!1)})})).subscribe()}copyFrom(l,f){if(this.isTranslationDisabled(l))return;const V=this.itemService.getItemAttributes(this.entityGuid)[l],R=this.formConfig.language(),Q=s.JS.getValueTranslation(V,L.N.diffCurrent(R,f));Q?V&&s.JS.isEditableOrReadonlyTranslationExist(V,R)?this.itemService.updateItemAttributeValue(this.entityGuid,l,Q.Value,R,!1):this.addItemAttributeValueHelper(l,Q.Value,R.current,!1):(0,ct.mF)(`${R.current}: Cant copy value from ${f} because that value does not exist.`)}linkReadOnly(l,f){this.linkToOtherField(l,f,!0)}linkReadWrite(l,f){return this.linkToOtherField(l,f,!1)}linkToOtherField(l,f,$){if(this.isTranslationDisabled(l))return;const V=this.formConfig.language(),R=this.itemService.removeItemAttributeDimension(this.entityGuid,l,V.current,!0);this.itemService.addItemAttributeDimension(this.entityGuid,l,V.current,f,V.primary,$,R)}translateMany(){const l=this.findTranslatableFields();let f;for(const $ of l)f=this.translate($,$!==l[l.length-1],f)}dontTranslateMany(){const l=this.findTranslatableFields();let f;for(const $ of l)f=this.dontTranslate($,$!==l[l.length-1],f)}autoTranslateMany(l){const f=this.itemService.getItemAttributes(this.entityGuid),$=[],V=this.findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault();this.findAutoTranslatableFields().filter(st=>!V.includes(st)).forEach(st=>{const mt=s.JS.findOfExactDimension(f[st].Values,l)?.Value;""!==mt&&null!=mt&&void 0!==mt&&$.push(st)}),this.autoTranslate($,l,!0,!0),V.forEach(st=>{this.translate(st,!1,void 0)})}findTranslatableFields(){const l=this.itemService.getItemAttributes(this.entityGuid);return Object.keys(l).filter(f=>!this.isTranslationDisabled(f))}findAutoTranslatableFields(){const l=this.itemService.getItemAttributes(this.entityGuid);return Object.keys(l).filter(f=>!this.isTranslationDisabled(f)&&!this.isAutoTranslationDisabled(f))}findAutoTranslatableFieldsThatWereNotAutoTranslatableByDefault(){const l=this.itemService.getItemAttributes(this.entityGuid);return Object.keys(l).filter(f=>!this.isTranslationDisabled(f)&&this.isAutoTranslationEnabledButWasDisabledByDefault(f))}isTranslationDisabled(l){return this.fieldsSettingsService.getFieldSettings(l).DisableTranslation}isAutoTranslationDisabled(l){return this.fieldsSettingsService.getFieldSettings(l).DisableAutoTranslation}isAutoTranslationEnabledButWasDisabledByDefault(l){const f=this.fieldsSettingsService.getFieldsProps(),$=F.y.singleton().get(f[l].calculatedInputType.inputType);return!f[l].settings.DisableAutoTranslation&&!$.canAutoTranslate}addItemAttributeValueHelper(l,f,$,V){const R=this.log.fn("addItemAttributeValueHelper","",{fieldName:l,value:f,currentLanguage:$,isReadOnly:V}),st=this.contentTypeService.getContentType(this.contentTypeId).Attributes.find(Ct=>Ct.Name===l),mt=this.itemService.addItemAttributeValue(this.entityGuid,l,f,$,V,st.Type);return R.r(mt)}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(p.Qq),d.KVO(O.bX),d.KVO(A),d.KVO(O.n9),d.KVO(X.K))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var $t=t(6275),Lt=t(5797);let wt=(()=>{class tt{constructor(l){this.snackBar=l,this.logs$=new Lt.t([]),this.logLimit=50,this.lastSnackBarTime=0,this.snackBarDebounce=1e4}ngOnDestroy(){this.logs$.complete()}addLog(l,f,$){const Q=[{error:$,label:f,severity:l,time:Date.now()},...this.logs$.value.slice(0,this.logLimit-2)];this.logs$.next(Q)}showMessage(l,f,$){const V=Date.now();!$&&V-this.lastSnackBarTime<=this.snackBarDebounce||(null!=f&&f>0?this.snackBar.open(l,null,{duration:f}):this.snackBar.open(l),this.lastSnackBarTime=V)}getLogs$(){return this.logs$.asObservable()}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(ut.UG))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();var Rt=t(3840),Zt=t(436);let se=(()=>{class tt{constructor(l,f){this.matIconRegistry=l,this.domSanitizer=f,this.icons={"apple-filled":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">\r\n<style type="text/css">\r\n\t.st0{display:none;}\r\n\t.st1{display:inline;}\r\n</style>\r\n<g id="Layer_1">\r\n\t<path d="M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z"/>\r\n</g>\r\n<g id="Layer_3" class="st0">\r\n</g>\r\n<g id="Icon">\r\n\t<path d="M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44c2,0,4-1.85,6-1.85S28,44,30,44\r\n\t\tc6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z"/>\r\n</g>\r\n</svg>\r\n',"apple-outlined":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48">\r\n<style type="text/css">\r\n\t.st0{display:none;}\r\n\t.st1{display:inline;}\r\n</style>\r\n<g id="Layer_1">\r\n\t<path d="M32,4c-6,0-10,4-10,10C28,14,32,10,32,4z"/>\r\n</g>\r\n<g id="Layer_3" class="st0">\r\n</g>\r\n<g id="Icon">\r\n\t<path d="M32,20c3.7,0,6,2.1,6,5.47C38,33.21,33.01,40,30.06,40c-0.25-0.04-0.93-0.35-1.38-0.56c-1.25-0.58-2.8-1.3-4.68-1.3\r\n\t\ts-3.43,0.72-4.68,1.3C18.87,39.65,18.19,39.97,18,40c-3.01,0-8-6.79-8-14.53C10,22.1,12.3,20,16,20c2.44,0,5.29,1.17,6.17,1.62\r\n\t\tL24,22.56l1.83-0.94C26.64,21.2,29.53,20,32,20 M32,16c-4,0-8,2.06-8,2.06S20,16,16,16c-6,0-10,4.01-10,9.47C6,34.74,12,44,18,44\r\n\t\tc2,0,4-1.85,6-1.85S28,44,30,44c6,0,12-9.26,12-18.53C42,20.01,38,16,32,16L32,16z"/>\r\n</g>\r\n</svg>\r\n',"draft-branch":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M384 144c0-44.2-35.8-80-80-80s-80 35.8-80 80c0 39.2 28.2 71.8 65.5 78.7-.8 17.2-5 30.4-12.7 40-17.5 21.8-53.1 25.2-90.7 28.7-28.2 2.6-57.4 5.4-80.4 16.9-3.4 1.7-6.7 3.6-9.7 5.7V158.4c36.5-7.4 64-39.7 64-78.4 0-44.2-35.8-80-80-80S0 35.8 0 80c0 38.7 27.5 71 64 78.4v195.2C27.5 361 0 393.3 0 432c0 44.2 35.8 80 80 80s80-35.8 80-80c0-36.9-24.9-67.9-58.9-77.2 5-9.6 12.3-14.6 19-18 17.5-8.8 42.5-11.2 68.9-13.7 42.6-4 86.7-8.1 112.7-40.5 12.4-15.5 19-35.5 19.8-60.7C357.3 214 384 182.1 384 144zM32 80c0-26.5 21.5-48 48-48s48 21.5 48 48-21.5 48-48 48-48-21.5-48-48zm96 352c0 26.5-21.5 48-48 48s-48-21.5-48-48c0-26.4 21.4-47.9 47.8-48h.6c26.3.2 47.6 21.7 47.6 48zm187.8-241.5L304 192c-26.5 0-48-21.5-48-48s21.5-48 48-48 48 21.5 48 48c0 22.4-15.4 41.2-36.2 46.5z"/></svg>',file:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16z"/></svg>',"file-archive":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M128 96v32h32V96zm65.9 169.6c-1.1-5.6-6-9.6-11.8-9.6H160v-32h-32v32l-19.4 97.2c-6.5 32.5 18.3 62.8 51.4 62.8s57.9-30.3 51.4-62.8zm-33.6 124.5c-17.9 0-32.4-12.1-32.4-27s14.5-27 32.4-27 32.4 12.1 32.4 27-14.5 27-32.4 27zM128 160v32h32v-32zm64-96h-32v32h32zm177.9 33.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.4 2.1 7.4 4.2l83.9 83.9c2 2 3.5 4.6 4.2 7.4H256zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h79.7v32h32V32H224v104c0 13.3 10.7 24 24 24h104zM192 192h-32v32h32zm0-64h-32v32h32z"/></svg>',"file-audio":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-77.6-66.6c38.5-26 61.6-69.3 61.6-115.7 0-24.7-6.5-48.9-18.9-70.1-12-20.6-29.1-37.8-49.6-50-7.1-4.2-16.3-1.9-20.6 5.2-4.2 7.1-1.9 16.3 5.2 20.6 33.1 19.7 53.7 55.8 53.7 94.3 0 36.5-18.1 70.4-48.3 90.9-6.9 4.6-8.7 14-4 20.8 2.9 4.3 7.6 6.6 12.4 6.6 3.1 0 6-.8 8.5-2.6zm-26.6-38.3c26-17.3 41.5-46.2 41.5-77.4 0-32.9-17.7-63.7-46.2-80.3-7.2-4.2-16.3-1.7-20.5 5.4-4.2 7.2-1.7 16.3 5.4 20.5 19.3 11.2 31.3 32 31.3 54.3 0 21.1-10.5 40.7-28.1 52.4-6.9 4.6-8.8 13.9-4.2 20.8 2.9 4.4 7.7 6.7 12.5 6.7 2.8.1 5.7-.7 8.3-2.4zm-27-38.2c13.7-8.5 21.8-23.1 21.8-39.2 0-17-9.3-32.5-24.2-40.6-7.3-3.9-16.4-1.2-20.3 6.1-3.9 7.3-1.2 16.4 6.1 20.3 5.2 2.8 8.5 8.3 8.5 14.2 0 5.6-2.9 10.8-7.6 13.7-7 4.4-9.2 13.6-4.8 20.7 2.8 4.6 7.7 7.1 12.8 7.1 2.5 0 5.2-.7 7.7-2.3zM138 266.7v74.7L112 322H94v-36h18l26-19.3m17.9-50.7c-2.9 0-6 1.1-8.4 3.5L104 256H76c-6.6 0-12 5.4-12 12v72c0 6.6 5.4 12 12 12h28l43.5 36.5c2.4 2.4 5.4 3.5 8.4 3.5 6.2 0 12.1-4.8 12.1-12V228c0-7.2-5.9-12-12.1-12z"/></svg>',"file-code":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.941 97.941l-83.882-83.882A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zm-22.627 22.628a15.89 15.89 0 0 1 4.195 7.431H256V32.491a15.88 15.88 0 0 1 7.431 4.195l83.883 83.883zM336 480H48c-8.837 0-16-7.163-16-16V48c0-8.837 7.163-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304c0 8.837-7.163 16-16 16zm-161.471-67.404l-25.928-7.527a5.1 5.1 0 0 1-3.476-6.32l58.027-199.869a5.1 5.1 0 0 1 6.32-3.476l25.927 7.527a5.1 5.1 0 0 1 3.476 6.32L180.849 409.12a5.1 5.1 0 0 1-6.32 3.476zm-48.446-47.674l18.492-19.724a5.101 5.101 0 0 0-.351-7.317L105.725 304l38.498-33.881a5.1 5.1 0 0 0 .351-7.317l-18.492-19.724a5.1 5.1 0 0 0-7.209-.233L57.61 300.279a5.1 5.1 0 0 0 0 7.441l61.263 57.434a5.1 5.1 0 0 0 7.21-.232zm139.043.232l61.262-57.434a5.1 5.1 0 0 0 0-7.441l-61.262-57.434a5.1 5.1 0 0 0-7.209.233l-18.492 19.724a5.101 5.101 0 0 0 .351 7.317L278.275 304l-38.499 33.881a5.1 5.1 0 0 0-.351 7.317l18.492 19.724a5.1 5.1 0 0 0 7.209.232z"/></svg>',"file-excel":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM211.7 308l50.5-81.8c4.8-8-.9-18.2-10.3-18.2h-4.1c-4.1 0-7.9 2.1-10.1 5.5-31 48.5-36.4 53.5-45.7 74.5-17.2-32.2-8.4-16-45.8-74.5-2.2-3.4-6-5.5-10.1-5.5H132c-9.4 0-15.1 10.3-10.2 18.2L173 308l-59.1 89.5c-5.1 8 .6 18.5 10.1 18.5h3.5c4.1 0 7.9-2.1 10.1-5.5 37.2-58 45.3-62.5 54.4-82.5 31.5 56.7 44.3 67.2 54.4 82.6 2.2 3.4 6 5.4 10 5.4h3.6c9.5 0 15.2-10.4 10.1-18.4L211.7 308z"/></svg>',"file-image":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M159 336l-39.5-39.5c-4.7-4.7-12.3-4.7-17 0l-39 39L63 448h256V304l-55.5-55.5c-4.7-4.7-12.3-4.7-17 0L159 336zm96-50.7l32 32V416H95.1l.3-67.2 15.6-15.6 48 48c20.3-20.3 77.7-77.6 96-95.9zM127 256c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm0-96c17.6 0 32 14.4 32 32s-14.4 32-32 32-32-14.4-32-32 14.4-32 32-32zm242.9-62.1L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zM256 32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5zM352 464c0 8.8-7.2 16-16 16H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304z"/></svg>',"file-pdf":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-22-171.2c-13.5-13.3-55-9.2-73.7-6.7-21.2-12.8-35.2-30.4-45.1-56.6 4.3-18 12-47.2 6.4-64.9-4.4-28.1-39.7-24.7-44.6-6.8-5 18.3-.3 44.4 8.4 77.8-11.9 28.4-29.7 66.9-42.1 88.6-20.8 10.7-54.1 29.3-58.8 52.4-3.5 16.8 22.9 39.4 53.1 6.4 9.1-9.9 19.3-24.8 31.3-45.5 26.7-8.8 56.1-19.8 82-24 21.9 12 47.6 19.9 64.6 19.9 27.7.1 28.9-30.2 18.5-40.6zm-229.2 89c5.9-15.9 28.6-34.4 35.5-40.8-22.1 35.3-35.5 41.5-35.5 40.8zM180 175.5c8.7 0 7.8 37.5 2.1 47.6-5.2-16.3-5-47.6-2.1-47.6zm-28.4 159.3c11.3-19.8 21-43.2 28.8-63.7 9.7 17.7 22.1 31.7 35.1 41.5-24.3 4.7-45.4 15.1-63.9 22.2zm153.4-5.9s-5.8 7-43.5-9.1c41-3 47.7 6.4 43.5 9.1z"/></svg>',"file-powerpoint":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zM204.3 208H140c-6.6 0-12 5.4-12 12v184c0 6.6 5.4 12 12 12h8c6.6 0 12-5.4 12-12v-60.4h44.3c38.7 0 67.7-27.3 67.7-69 0-38.6-23.8-66.6-67.7-66.6zm26 97.7c-7.5 7.6-17.8 11.4-31 11.4H160V233h39.7c12.9 0 23.1 3.7 30.6 11.1 15.3 15.1 15 46.5 0 61.6z"/></svg>',"file-text":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-48-244v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12zm0 64v8c0 6.6-5.4 12-12 12H108c-6.6 0-12-5.4-12-12v-8c0-6.6 5.4-12 12-12h168c6.6 0 12 5.4 12 12z"/></svg>',"file-video":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M224 280.593C224 267.01 212.989 256 199.407 256H88.593C75.011 256 64 267.01 64 280.593v110.815C64 404.99 75.011 416 88.593 416h110.814C212.989 416 224 404.99 224 391.407V381l27.971 27.971a23.998 23.998 0 0 0 16.97 7.029H296c13.255 0 24-10.745 24-24V280c0-13.255-10.745-24-24-24h-27.059a24.003 24.003 0 0 0-16.97 7.029L224 291v-10.407zM192 384H96v-96h96v96zm80.255-96H288v96h-15.745L224 342.826v-13.652L272.255 288zm97.686-190.059l-83.883-83.882A47.996 47.996 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v416c0 26.51 21.49 48 48 48h288c26.51 0 48-21.49 48-48V131.882a48 48 0 0 0-14.059-33.941zM256 32.491a15.888 15.888 0 0 1 7.432 4.195l83.882 83.882a15.882 15.882 0 0 1 4.195 7.431H256V32.491zM352 464c0 8.837-7.164 16-16 16H48c-8.836 0-16-7.163-16-16V48c0-8.837 7.164-16 16-16h176v104c0 13.255 10.745 24 24 24h104v304z"/></svg>',"file-word":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M369.9 97.9L286 14C277 5 264.8-.1 252.1-.1H48C21.5 0 0 21.5 0 48v416c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48V131.9c0-12.7-5.1-25-14.1-34zm-22.6 22.7c2.1 2.1 3.5 4.6 4.2 7.4H256V32.5c2.8.7 5.3 2.1 7.4 4.2l83.9 83.9zM336 480H48c-8.8 0-16-7.2-16-16V48c0-8.8 7.2-16 16-16h176v104c0 13.3 10.7 24 24 24h104v304c0 8.8-7.2 16-16 16zm-53.6-246.5c-6.8 32.8-32.5 139.7-33.4 150.3-5.8-29.1-.7 1.6-41.8-150.9-1.4-5.2-6.2-8.9-11.6-8.9h-6.4c-5.4 0-10.2 3.6-11.6 8.9-38.3 142.3-37.4 140.6-39.4 154.7-4.1-23.9 2.1-2.9-34.4-154.4-1.3-5.4-6.1-9.2-11.7-9.2h-7.2c-7.8 0-13.5 7.3-11.6 14.9 9.5 38 34.5 137.4 42.2 168 1.3 5.3 6.1 9.1 11.6 9.1h17c5.4 0 10.2-3.7 11.6-8.9 34.2-127.7 33.5-123.4 36.7-142.9 6.5 31.1.2 7 36.7 142.9 1.4 5.2 6.2 8.9 11.6 8.9h14c5.5 0 13.7-3.7 15.1-9l42.8-168c1.9-7.6-3.8-15-11.6-15h-6.8c-5.7 0-10.6 4-11.8 9.5z"/></svg>',folder:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z"/></svg>',"folder-plus":'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M344 272h-72v-72c0-4.42-3.58-8-8-8h-16c-4.42 0-8 3.58-8 8v72h-72c-4.42 0-8 3.58-8 8v16c0 4.42 3.58 8 8 8h72v72c0 4.42 3.58 8 8 8h16c4.42 0 8-3.58 8-8v-72h72c4.42 0 8-3.58 8-8v-16c0-4.42-3.58-8-8-8zM194.74 96l54.63 54.63c6 6 14.14 9.37 22.63 9.37h192c8.84 0 16 7.16 16 16v224c0 8.84-7.16 16-16 16H48c-8.84 0-16-7.16-16-16V112c0-8.84 7.16-16 16-16h146.74M48 64C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48z"/></svg>',sitemap:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><path d="M608 352h-32v-97.59c0-16.77-13.62-30.41-30.41-30.41H336v-64h48c17.67 0 32-14.33 32-32V32c0-17.67-14.33-32-32-32H256c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h48v64H94.41C77.62 224 64 237.64 64 254.41V352H32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32H96v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32h-32v-96h208v96h-32c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zm-480 32v96H32v-96h96zm240 0v96h-96v-96h96zM256 128V32h128v96H256zm352 352h-96v-96h96v96z"/></svg>'}}load(){Object.entries(this.icons).forEach(([l,f])=>{this.matIconRegistry.addSvgIconLiteral(l,this.domSanitizer.bypassSecurityTrustHtml(f))})}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(Rt.tp),d.KVO(Zt.up))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})(),Qt=(()=>{class tt extends J.V{constructor(l,f){super(new m.B("QueryService",!1)),this.http=l,this.context=f}getAvailableEntities(l,f,$,V){this.log.a("getAvailableEntities",{queryUrl:l,params:f,fields:$,entitiesFilter:V});const R=!!f,Ct=(((f?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(R?`&${f}`:"")+"&$select="+($??"")).substring(1);return this.http.post(`app/auto/query/${l}?${Ct}`,{Guids:V})}getEntities({contentTypes:l,itemIds:f,fields:$,log:V}){this.log.a(`getEntities(${V})`,{contentTypes:l,itemIds:f,fields:$});const Q=("&typeNames="+(l?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(f?.join(",")??"")+"&$select="+($??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${Q}`,{})}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(p.Qq),d.KVO(e.o))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})();let oe=(()=>{class tt extends J.V{constructor(l){super(new m.B("ScriptsLoaderService",!1)),this.formConfig=l,this.loadedFiles=[]}load(l,f){this.log.a("Loading scripts:",{scripts:l});const $=this.sortByType(l);this.insertToDom($,f,0)}sortByType(l){const f=[],$=[];return l.forEach(V=>{const R={path:this.resolveSpecialPaths(V),type:null,loaded:!1,domEl:null};R.path.endsWith(".css")?(R.type=".css",f.push(R)):R.path.endsWith(".js")&&(R.type=".js",$.push(R))}),f.concat($)}insertToDom(l,f,$){const V=l[$];if($++,!V)return void f();V.path=V.path+"?sxcver="+window.sxcVersion;const R=this.loadedFiles.find(Q=>Q.path===V.path);if(R)if(R.loaded)this.insertToDom(l,f,$);else{const Q=()=>{V.loaded=!0,this.insertToDom(l,f,$),R.domEl.removeEventListener("load",Q),R.domEl.removeEventListener("error",Q)};R.domEl.addEventListener("load",Q),R.domEl.addEventListener("error",Q)}else{".css"===V.type?(V.domEl=document.createElement("link"),V.domEl.rel="stylesheet",V.domEl.href=V.path):".js"===V.type&&(V.domEl=document.createElement("script"),V.domEl.type="module",V.domEl.src=V.path);const Q=()=>{V.loaded=!0,this.insertToDom(l,f,$),V.domEl.removeEventListener("load",Q),V.domEl.removeEventListener("error",Q)};V.domEl.addEventListener("load",Q),V.domEl.addEventListener("error",Q),document.querySelector("head").appendChild(V.domEl),this.loadedFiles.push(V)}}resolveSpecialPaths(l){return l.replace(/\[System:Path\]/i,s.b.getUrlPrefix("system",this.formConfig.config)).replace(/\[Zone:Path\]/i,s.b.getUrlPrefix("zone",this.formConfig.config)).replace(/\[App:Path\]/i,s.b.getUrlPrefix("app",this.formConfig.config)).replace(/\[App:PathShared\]/i,s.b.getUrlPrefix("appShared",this.formConfig.config))}static#t=this.\u0275fac=function(f){return new(f||tt)(d.KVO(A))};static#e=this.\u0275prov=d.jDH({token:tt,factory:tt.\u0275fac})}return tt})()},4860:(Y,_,t)=>{t.d(_,{E:()=>d});var s=t(4230);class d{constructor(i){this.defaultIsShow=!0,this.fields=null;var h=i.ClientData?.fields;if(null==h||""==h)return;this.defaultIsShow="-"==h[0],this.defaultIsShow&&(h=h.substring(1));const o=!this.defaultIsShow;this.fields=h.toLowerCase().split(",").reduce((e,c)=>(e[c]=o,e),{}),(0,s.mF)("ItemFieldVisibility",this.fields,"default",this.defaultIsShow)}hasRules(){return null!=this.fields}isVisibleDisabled(i){return null!=this.fields&&!(this.fields[i.toLowerCase()]??this.defaultIsShow)}static mergedVisible(i){return i.Visible&&!i.VisibleDisabled}}},1220:(Y,_,t)=>{t.d(_,{L:()=>p});var s=t(3190),d=t(5797);class p extends s.OA{constructor(h,o){super(h,o),this.cache$=new d.t([]),this.entities$.subscribe(e=>{this.cache$.next(e)})}}},7284:(Y,_,t)=>{t.d(_,{B:()=>c});var s=t(271),d=t(1817),p=t(8172),i=t(1220),h=t(8559),o=t(3190),e=t(3347);let c=(()=>{class m extends i.L{constructor(C,T){super("GlobalConfig",C),this.snackBar=T;const E={id:0,debugEnabled:"true"===sessionStorage.getItem(p.tn),allowDebugMode:!1};this.addOneToCache(E)}allowDebug(C){const T=this.cache$.value[0];if(T.allowDebugMode===C)return;const E={...T,allowDebugMode:C};this.updateOneInCache(E)}getDebugEnabled(){return this.cache$.value[0].allowDebugMode&&this.cache$.value[0].debugEnabled}getDebugEnabled$(){return this.cache$.pipe((0,s.T)(C=>C[0].allowDebugMode&&C[0].debugEnabled),(0,d.F)())}toggleDebugEnabled(){const C=this.cache$.value[0];if(!C.allowDebugMode)return void this.snackBar.open("You do not have permissions to enter developer mode",null,{duration:3e3});const T={...C,debugEnabled:!C.debugEnabled};this.updateOneInCache(T),this.snackBar.open(T.debugEnabled?"developer mode on":"developer mode off",null,{duration:3e3})}static#t=this.\u0275fac=function(T){return new(T||m)(h.KVO(o.cu),h.KVO(e.UG))};static#e=this.\u0275prov=h.jDH({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()},4902:(Y,_,t)=>{t.d(_,{Rf:()=>i,LE:()=>s.L,k1:()=>o,n9:()=>y,Bj:()=>J.B,A8:()=>K,bX:()=>ht,Tw:()=>Et.T,gw:()=>Vt,kT:()=>bt,F_:()=>Mt,Ev:()=>E});var s=t(1220),d=t(8559),p=t(3190);let i=(()=>{class j extends s.L{constructor(P){super("AdamCache",P)}loadPrefetch(P){if(null==P)return;const x=Object.entries(P).map(([b,X])=>({Guid:b,Attributes:X}));this.upsertManyInCache(x)}getAdamSnapshot(P,x){return this.cache$.value.find(b=>b.Guid===P)?.Attributes[x]}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})();var h=t(8394);let o=(()=>{class j extends s.L{constructor(P){super("ContentTypeItem",P)}addContentTypeItems(P){const x=h.g.convertMany(P);this.upsertManyInCache(x)}getContentTypeItem(P){return this.cache$.value.find(x=>x.Guid===P)}getContentTypeItems(P){return this.cache$.value.filter(x=>P.includes(x.Guid))}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})();var e=t(271),c=t(1817),m=t(4813);let y=(()=>{class j extends s.L{constructor(P){super("ContentType",P)}addContentTypes(P){const x=m._.convertMany(P);this.addManyToCache(x)}getContentType(P){return this.cache$.value.find(x=>x.Id===P)}getContentType$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.Id===P)),(0,c.F)())}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})();const E={entityMetadata:{GlobalConfig:{},Item:{selectId:function A(j){return j?.Entity?.Guid}},Feature:{selectId:function S(j){return j?.guid}},Language:{selectId:function v(j){return j?.NameId}},FormLanguageInStore:{selectId:function I(j){return j?.formId}},ContentType:{selectId:function N(j){return j?.Id}},ContentTypeItem:{selectId:function et(j){return j?.Guid}},InputType:{selectId:function w(j){return j?.Type}},PublishStatus:{selectId:function H(j){return j?.formId}},Prefetch:{selectId:function O(j){return j?._guid}},EntityCache:{selectId:function F(j){return j?.id}},AdamCache:{selectId:function W(j){return j?.Guid}},LinkCache:{selectId:function B(j){return j?.key}}},pluralNames:{Feature:"Features",PublishStatus:"PublishStatuses"}};var J=t(7284);let K=(()=>{class j extends s.L{constructor(P){super("InputType",P)}addInputTypes(P){this.addManyToCache(P)}getInputType(P){return this.cache$.value.find(x=>x.Type===P)}getInputTypes(){return this.cache$.value}getInputTypes$(){return this.cache$.asObservable()}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})();var L=t(52),Z=t(4257),k=t(2454),ut=t(3966),at=t(3408),pt=t(8021),yt=t(3472),vt=t(9839),dt=t(3826);let ht=(()=>{class j extends s.L{constructor(P){super("Item",P),this.log=new yt.B("ItemService",!1)}loadItems(P){const x=P.map(b=>ut.U.convert(b));this.upsertManyInCache(x)}updateItemId(P){const x=Object.keys(P)[0],b=P[x],X=this.cache$.value.find(U=>U.Entity.Guid===x);if(!X||0!==X.Header.EntityId&&0!==X.Entity.Id)return;const q={...X,Header:{...X.Header,EntityId:b},Entity:{...X.Entity,Id:b}};this.updateOneInCache(q)}updateItemMetadata(P,x){const b=this.cache$.value.find(q=>q.Entity.Guid===P),X={...b,Entity:{...b.Entity,Metadata:x}};this.updateOneInCache(X)}addItemAttributeValue(P,x,b,X,q,U,ct=!1,it){const It=at._.create(b,[pt.v.create(q?`~${X}`:X)]),Pt=it??this.cache$.value.find(Lt=>Lt.Entity.Guid===P),$t={...Pt,Entity:{...Pt.Entity,Attributes:k.JS.addAttributeValue(Pt.Entity.Attributes,It,x,U)}};return ct||this.updateOneInCache($t),$t}updateItemAttributeValue(P,x,b,X,q){const U=this.cache$.value.find(it=>it.Entity.Guid===P);if(!U)return;const ct={...U,Entity:{...U.Entity,Attributes:k.JS.updateAttributeValue(U.Entity.Attributes,x,b,X,q)}};this.updateOneInCache(ct)}updateItemAttributesValues(P,x,b){const X=this.cache$.value.find(it=>it.Entity.Guid===P);if(!X)return;const q={};for(const[it,ot]of Object.entries(X.Entity.Attributes))x.hasOwnProperty(it)&&(q[it]=k.JS.translate(b,ot,null));const U=vt.D.getFormChanges(q,x);if(null==U)return;const ct={...X,Entity:{...X.Entity,Attributes:k.JS.updateAttributesValues(X.Entity.Attributes,U,b)}};this.updateOneInCache(ct)}addItemAttributeDimension(P,x,b,X,q,U,ct){const it=ct??this.cache$.value.find(It=>It.Entity.Guid===P),ot={...it,Entity:{...it.Entity,Attributes:k.JS.addAttributeDimension(it.Entity.Attributes,x,b,X,q,U)}};this.updateOneInCache(ot)}removeItemAttributeDimension(P,x,b,X=!1,q){const U=this.log.fn("removeItemAttributeDimension","",{entityGuid:P,attributeKey:x,currentLanguage:b,isTransaction:X,transactionItem:q}),ct=q??this.cache$.value.find(ot=>ot.Entity.Guid===P),it={...ct,Entity:{...ct.Entity,Attributes:k.JS.removeAttributeDimension(ct.Entity.Attributes,x,b)}};return X||this.updateOneInCache(it),U.r(it)}updateItemHeader(P,x){const b=this.cache$.value.find(q=>q.Entity.Guid===P);if(!b)return;const X={...b,Header:{...x}};this.updateOneInCache(X)}getItemAttributes(P){const x=this.log.fn("getItemAttributes","",{entityGuid:P}),b=this.cache$.value.find(X=>X.Entity.Guid===P)?.Entity.Attributes;return x.r(b)}getItemAttributes$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.Entity.Guid===P)?.Entity.Attributes),(0,c.F)())}getItem(P){return this.cache$.value.find(x=>x.Entity.Guid===P)}getItem$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.Entity.Guid===P)),(0,c.F)())}getItemFor$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.Entity.Guid===P)?.Entity.For),(0,c.F)())}getItemNote(P){return this.cache$.value.find(x=>x.Entity.Guid===P)?.Entity.Metadata?.find(x=>x.Type.Name===L.YX.contentTypes.notes)}getItemNote$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.Entity.Guid===P)?.Entity.Metadata?.find(b=>b.Type.Name===L.YX.contentTypes.notes)),(0,c.F)())}getItemHeader$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.Entity.Guid===P)?.Header),(0,c.F)())}getItems(P){return null==P?this.cache$.value:this.cache$.value.filter(x=>P.includes(x.Entity.Guid))}getItems$(P){return null==P?this.cache$.asObservable():this.cache$.pipe((0,e.T)(x=>x.filter(b=>P.includes(b.Entity.Guid))),(0,c.F)(dt.a.arraysEqual))}setDefaultValue(P,x,b,X,q,U){this.log.fn("setDefaultValue",`Name: ${x.Name}`,{item:P,ctAttribute:x,inputType:b,settings:X,languages:q,defaultLanguage:U});const it=k.yP.parseDefaultValue(x.Name,b?.Type,X,P.Header),ot=k.JS.getBestValue(P.Entity.Attributes[x.Name],U,U,Z.G6.Strict),It=0===q.length||b?.DisableI18n?"*":U;return void 0===ot?this.addItemAttributeValue(P.Entity.Guid,x.Name,it,It,!1,x.Type):this.updateItemAttributeValue(P.Entity.Guid,x.Name,it,{current:It,primary:U},!1),it}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})();var Et=t(6114);let Vt=(()=>{class j extends s.L{constructor(P){super("Language",P)}loadLanguages(P){this.addAllToCache(P)}getLanguages(){return this.cache$.value}getLanguages$(){return this.cache$.asObservable()}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})(),bt=(()=>{class j extends s.L{constructor(P){super("LinkCache",P)}loadPrefetch(P,x){const b=[];if(null!=P)for(const[X,q]of Object.entries(P))b.push({key:X,linkInfo:q});if(null!=x)for(const[X,q]of Object.entries(x))for(const[U,ct]of Object.entries(q)){const it=this.adamToLinks(ct);b.push(...it)}this.upsertManyInCache(b)}loadAdam(P){const x=this.adamToLinks(P);this.upsertManyInCache(x)}loadLink(P,x){const b={key:P=P.trim().toLocaleLowerCase(),linkInfo:{...x,Adam:{...x.Adam}}};this.upsertOneInCache(b)}getLinkInfo(P){return P=P.trim().toLocaleLowerCase(),this.cache$.value.find(x=>x.key.trim().toLocaleLowerCase()===P)?.linkInfo}adamToLinks(P){const x=[];for(const b of P){if(b.IsFolder)continue;const X={key:b.ReferenceId,linkInfo:{Adam:{...b},Value:b.Url}};x.push(X)}return x}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})();var gt=t(1199);let Mt=(()=>{class j extends s.L{constructor(P){super("PublishStatus",P)}setPublishStatus(P){this.upsertOneInCache(P)}removePublishStatus(P){this.removeOneFromCache(P)}getPublishStatus(P){return this.cache$.value.find(x=>x.formId===P)}getPublishStatus$(P){return this.cache$.pipe((0,e.T)(x=>x.find(b=>b.formId===P)),(0,c.F)())}asPublishMode(P,x){return x?gt.iy.Branch:P?gt.iy.Show:gt.iy.Hide}setPublishMode(P,x,b){null==b.config.versioningOptions[P]&&(P=Object.keys(b.config.versioningOptions)[0]),this.setPublishStatus({formId:x,DraftShouldBranch:P===gt.iy.Branch,IsPublished:P===gt.iy.Show})}getPublishMode$(P){return this.getPublishStatus$(P).pipe((0,e.T)(x=>x.DraftShouldBranch?gt.iy.Branch:x.IsPublished?gt.iy.Show:gt.iy.Hide))}static#t=this.\u0275fac=function(x){return new(x||j)(d.KVO(p.cu))};static#e=this.\u0275prov=d.jDH({token:j,factory:j.\u0275fac,providedIn:"root"})}return j})()},6114:(Y,_,t)=>{t.d(_,{T:()=>m});var s=t(271),d=t(1817),p=t(6301),i=t(2454),h=t(1220),o=t(3064),e=t(8559),c=t(3190);let m=(()=>{class y extends h.L{constructor(T){super("FormLanguageInStore",T)}addToStore(T,E,A,S){this.addOneToCache({formId:T,current:A,initial:A,primary:E,hideHeader:S})}removeFromStore(T){this.removeOneFromCache(T)}setCurrent(T,E){this.updateOneInCache({formId:T,current:E})}getEntityReader$(T){return this.getLanguage$(T).pipe((0,s.T)(E=>new i.bT(E.current,E.primary)),(0,d.F)(),(0,p.t)(1))}getLanguage$(T){return this.cache$.pipe((0,s.T)(E=>{const A=E.find(S=>S.formId===T);return{...o.N.empty,...A}}),(0,d.F)(),(0,p.t)(1))}getHideHeader$(T){return this.cache$.pipe((0,s.T)(E=>E.find(A=>A.formId===T)?.hideHeader),(0,d.F)())}updateHideHeader(T,E){this.updateOneInCache({formId:T,hideHeader:E})}static#t=this.\u0275fac=function(E){return new(E||y)(e.KVO(c.cu))};static#e=this.\u0275prov=e.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},3176:(Y,_,t)=>{t.d(_,{$:()=>i});var s=t(7092),d=t(3472),p=t(8559);let i=(()=>{class h{constructor(e){this.log=e,this.subscriptions=new s.yU,this.log??=new d.B("BaseComponent",!1)}ngOnDestroy(){this.subscriptions.unsubscribe()}static#t=this.\u0275fac=function(c){return new(c||h)(p.rXU(d.B))};static#e=this.\u0275cmp=p.VBU({type:h,selectors:[["app-base-component"]],decls:0,vars:0,template:function(c,m){},encapsulation:2})}return h})()},5544:(Y,_,t)=>{t.d(_,{U:()=>y});var s=t(4230),d=t(8873),p=t(3472),i=t(3176),h=t(8559),o=t(7941),e=t(9184);let y=(()=>{class C extends i.${constructor(E,A,S,v,I,N){super(new p.B("DialogEntryComponent",!1)),this.dialog=E,this.viewContainerRef=A,this.router=S,this.route=v,this.context=I,this.changeDetectorRef=N;const et=this.router.getCurrentNavigation();this.dialogData=et?.extras?.state||{}}ngOnInit(){const E=this.route.snapshot.data.dialog;if(null==E)throw new Error("Could not find config for dialog. Did you forget to add DialogConfig to route data?");(0,s.Ly)("Open dialog:",E.name,"Context id:",this.context.id,"Context:",this.context),E.getComponent().then(A=>{const S=this.dialog;S._dialogAnimatingOpen&&S._lastDialogRef?S._lastDialogRef.afterOpened().subscribe(()=>this.openDialogComponent(E,A)):this.openDialogComponent(E,A)})}ngOnDestroy(){this.dialogRef.close(),super.ngOnDestroy()}openDialogComponent(E,A){this.log.a(`Open dialog(initContext: ${E.initContext})`,{name:E.name,"Contextid:":this.context.log.svcId,"Context:":this.context}),E.initContext&&this.context.init(this.route),this.dialogRef=this.dialog.open(A,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,data:this.dialogData,panelClass:["dialog-panel",`dialog-panel-${E.panelSize}`,E.showScrollbar?"show-scrollbar":"no-scrollbar",...E.panelClass?E.panelClass:[]],position:{top:"0"},viewContainerRef:this.viewContainerRef}),this.dialogRef.afterClosed().subscribe(S=>{(0,s.Ly)("Dialog was closed:",E.name,"Data:",S);const v=S;if(null==v?.navigateUrl)if(this.route.pathFromRoot.length<=3)try{window.parent.$2sxc.totalPopup.close()}catch{}else this.router.navigate(["./"],this.route.snapshot.url.length>0?{relativeTo:this.route.parent,state:S}:{relativeTo:this.route.parent.parent,state:S});else this.router.navigate([v.navigateUrl])}),this.changeDetectorRef.markForCheck()}static#t=this.\u0275fac=function(A){return new(A||C)(h.rXU(o.bZ),h.rXU(h.c1b),h.rXU(e.Ix),h.rXU(e.nX),h.rXU(d.o),h.rXU(h.gRc))};static#e=this.\u0275cmp=h.VBU({type:C,selectors:[["app-dialog-entry"]],standalone:!0,features:[h.Jv_([d.o]),h.Vt3,h.aNF],decls:0,vars:0,template:function(A,S){}})}return C})()},7567:(Y,_,t)=>{t.d(_,{Y:()=>s});const s={Zone:"zone",Apps:"apps",AppImport:"app-import",App:"app",ContentType:"contenttype",ContentItems:"contentitems",Edit:"edit",ItemHistory:"item-history",Develop:"develop",PipelineDesigner:"pipeline-designer",Replace:"replace",InstanceList:"instance-list"}},52:(Y,_,t)=>{t.d(_,{Ox:()=>p,Sq:()=>d,YX:()=>i});const d={App:"app",Site:"site"},p={GoogleTranslate:"Settings.GoogleTranslate.ApiKey",GoogleMaps:"Settings.GoogleMaps.ApiKey"},i={metadata:{attribute:{targetType:2,target:"EAV Field Properties",label:"Content-Type Field/Attribute (2)",keyType:"number"},app:{targetType:3,target:"App",label:"App (3)",keyType:"number"},entity:{targetType:4,target:"Entity",label:"Entity (4)",keyType:"guid"},contentType:{targetType:5,target:"ContentType",label:"Content-Type (5)",keyType:"string"},zone:{targetType:6,target:"Zone",label:"Zone (6) - not used as of now",keyType:"number"},language:{targetType:8,target:"Dimension",label:"Language (8)",keyType:"string"},cmsObject:{targetType:10,target:"CmsObject",label:"Cms Object (10)",keyType:"string",hint:'Usually this is "file:400" or "folder:4030"'}},appMetadata:{LightSpeed:{ContentTypeName:"LightSpeedOutputDecorator"}},keyTypes:{guid:"guid",string:"string",number:"number"},scopes:{default:{name:"Default",value:"Default"},configuration:{name:"Configuration (Views etc.)",value:"System.Configuration"}},contentTypes:{appConfiguration:"2SexyContent-App",template:"2SexyContent-Template",permissions:"PermissionConfiguration",query:"DataPipeline",contentType:"ContentType",settings:"App-Settings",resources:"App-Resources",systemSettings:"SettingsSystem",systemResources:"ResourcesSystem",customSettings:"SettingsCustom",customResources:"ResourcesCustom",formulas:"UiFormula",notes:"NoteDecorator",imageDecorator:"ImageDecorator"},pipelineDesigner:{dataSourceDifficulties:{default:100,advanced:200},outDataSource:{Description:"The template/script which will show this data",EntityGuid:"Out",In:["Default","Header"],Name:"2sxc Target (View or API)",PartAssemblyAndType:"SexyContentTemplate",PrimaryType:"Target",VisualDesignerData:{Top:20,Left:200,Width:700}},defaultPipeline:{dataSources:[{EntityGuid:"unsaved1",PartAssemblyAndType:"ToSic.Sxc.DataSources.CmsBlock, ToSic.Sxc",VisualDesignerData:{Top:170,Left:440}}],streamWiring:[{From:"unsaved1",Out:"Header",To:"Out",In:"Header"},{From:"unsaved1",Out:"Default",To:"Out",In:"Default"}]},testParameters:"[Demo:Demo]=true"}}},8172:(Y,_,t)=>{t.d(_,{Dr:()=>c,Hh:()=>C,K7:()=>h,P3:()=>v,Pl:()=>s,Q$:()=>e,Ul:()=>m,Xw:()=>E,Zm:()=>i,bO:()=>N,bo:()=>T,h9:()=>y,p$:()=>p,tn:()=>o,v4:()=>d,z0:()=>I,zX:()=>S});const s="eav-",d=s+"zoneId",p=s+"cbid",i=s+"mid",h=s+"appId",o=s+"debug",e=s+"dialog",c=s+"contentType",m=s+"items",y=s+"partOfPage",C=s+"publishing",T=s+"filters",E=s+"pipelineId",S=s+"url",v=s+"isshared",I=s+"extras",N="false"},4601:(Y,_,t)=>{t.d(_,{e:()=>p});var s=t(9470),d=t(8559);let p=(()=>{class i{constructor(o){this.elementRef=o}ngOnChanges(o){if(null==this.tooltip&&(this.tooltip=(0,s.Ay)(this.elementRef.nativeElement,{animation:"scale-subtle",arrow:!!this.tippyArrow,duration:[100,50],placement:"bottom",theme:"2sxc",allowHTML:!!this.tippyAllowHtml})),null!=o.tippy&&this.tooltip.setContent(this.tippy),null!=o.tippyDisabled&&(this.tippyDisabled?this.tooltip.disable():this.tooltip.enable()),null!=o.tippyPlacement&&this.tooltip.setProps({placement:this.tippyPlacement}),null!=o.tippyShowDelay){const e="number"==typeof this.tippyShowDelay?this.tippyShowDelay:parseInt(this.tippyShowDelay,10);this.tooltip.setProps({delay:[e,null]})}}ngOnDestroy(){this.tooltip?.destroy()}static#t=this.\u0275fac=function(e){return new(e||i)(d.rXU(d.aKT))};static#e=this.\u0275dir=d.FsC({type:i,selectors:[["","tippy",""]],inputs:{tippy:"tippy",tippyDisabled:"tippyDisabled",tippyPlacement:"tippyPlacement",tippyShowDelay:"tippyShowDelay",tippyAllowHtml:"tippyAllowHtml",tippyArrow:"tippyArrow"},standalone:!0,features:[d.OA$]})}return i})()},4981:(Y,_,t)=>{t.d(_,{f:()=>s});class s{static toggleInArray(p,i){const h=i.indexOf(p);-1===h?i.push(p):i.splice(h,1)}}},4230:(Y,_,t)=>{t.d(_,{EL:()=>e,Ly:()=>o,mF:()=>h,xY:()=>i});var s=t(6619);const d={always:!0,dev:!1,store:!1,editForm:!1},p={};function i(y,...C){c({segment:"store",message:y,data:C})}function h(y,...C){c({segment:"editForm",message:y,data:C})}function o(y,...C){c({segment:"dev",message:y,data:C})}function e(y,C){!function m({segment:y,message:C,callStack:T,data:E=null}){if(s.c.production)return;const A=`[${y?.toUpperCase()}]`;if(!d[y]){if(p[y])return;return console.log(`${A}-logging disabled, no further messages will show for this segment.`),void(p[y]=!0)}const S="always"===y?"":A;if(0!=T)console.groupCollapsed(`${S} ${C}`,E),console.trace(),console.groupEnd();else{if(!E)return console.log(`${S} ${C}`);const v=Object.keys(E);if(0===v.length)return console.log(`${S} ${C}`);if(1===v.length){const I=v[0],N=E[I];return"string"==typeof N?console.log(`${S} ${C} [string:${N.length}] '${I}'='${N}'`):console.log(`${S} ${C} [${typeof N}}] '${I}'=`,N)}console.log(`${S} ${C} [${v.length} keys]`,E)}}({segment:"always",message:y,callStack:!1,data:C})}function c({segment:y,message:C,callStack:T,data:E=[]}){if(s.c.production)return;const A=`[${y?.toUpperCase()}]`;if(!d[y]){if(p[y])return;return console.log(`${A}-logging disabled, no further messages will show for this segment.`),void(p[y]=!0)}const S="always"===y?"":A;if(0!=T)console.groupCollapsed(`${S} ${C}`,...E),console.trace(),console.groupEnd();else{if(!E||0===E.length)return void console.log(`${S} ${C}`);if(1===E.length){const v=E[0];return void console.log(`${S} ${C} [${typeof v}${"string"==typeof v?`:${v.length}`:""}]`,v)}console.log(`${S} ${C}`,...E)}}},1576:(Y,_,t)=>{t.d(_,{W:()=>d});var s=t(3826);class d{static#t=this.boolEquals={equal:s.a.valueEquals};static#e=this.numberEquals={equal:s.a.valueEquals};static#n=this.stringEquals={equal:s.a.valueEquals};static#s=this.objectEquals={equal:s.a.objectsEqual}}},1477:(Y,_,t)=>{function s(d){try{const p=d?.Api;if(!p)return;const h={...window.$2sxc.env.header,appApi:p};window.$2sxc.env.load(h)}catch{}}t.d(_,{W:()=>s})},3216:(Y,_,t)=>{t.d(_,{K:()=>N,s:()=>y});var s=t(52);const d="prefill:",p="group:",i="uifields:",h="parameters:",o=",",e="&",c=":";function m(O){return O.join(c)}function y(O){let M="";for(const F of O.items){M&&(M+=o);const W=F,B=F,J=F,K=J.UiFields??F.ClientData?.fields,L=J.Parameters??F.ClientData?.parameters;if(W.Parent)M+=p+m([W.Parent,W.Field,W.Index,W.Add,W.EntityId]),M+=E(W.Prefill),M+=v(K),M+=A(L,h);else if(B.EntityId)M+=B.EntityId,M+=v(K),M+=A(L,h);else if(F.ContentTypeName){const Z=F;M+="new:"+Z.ContentTypeName,M+=C(Z),M+=E(Z.Prefill),M+=v(K),M+=A(L,h),Z.DuplicateEntity&&(M+=`${e}copy:`+Z.DuplicateEntity)}}return M}function C(O){const M=F=>m(["",F.Target,F.TargetType,F.Singleton?F.Singleton.toString():""]);return O.For?.String?`${e}for:s~`+w(O.For.String)+M(O.For):O.For?.Number?`${e}for:n~`+O.For.Number+M(O.For):O.For?.Guid?`${e}for:g~`+O.For.Guid+M(O.For):O.Metadata?function T(O){let M;switch(O.Metadata.keyType.toLocaleLowerCase()){case s.YX.keyTypes.string:M="s";break;case s.YX.keyTypes.number:M="n";break;case s.YX.keyTypes.guid:M="g"}const F=Object.values(s.YX.metadata).find(W=>W.targetType===O.Metadata.targetType)?.target;return`${e}for:`+M+"~"+m([w(O.Metadata.key),F,O.Metadata.targetType])}(O):""}function E(O){return A(O,d)}function A(O,M){let F="";if(!O)return F;for(const[W,B]of Object.entries(O))null!=B&&(F+=`${e}${M}${W}~${w(B.toString())}`);return F}function S(O,M){const F=M??{};if(null==O)return F;const W=O.split(c),B=W[1].split("~")[0],J=H(W[1].split("~")[1]);return F[B]=J,F}function v(O){return O?`${e}${i}${w(O)}`:""}function I(O){return/^[0-9]*$/g.test(O)}function N(O){const M={items:[]},F=O.split(o);for(const W of F)if(W.startsWith(p)){const B={},J=W.split(e);for(const K of J)if(K.startsWith(p)){const L=K.split(c);B.Parent=L[1],B.Field=L[2],B.Index=parseInt(L[3],10),B.Add="true"===L[4],L.length>4&&L[5]&&I(L[5])&&(B.EntityId=parseInt(L[5],10))}else et(B,K);M.items.push(B)}else if(I((W??"").split(e)[0])){const B=W.split(e),J={EntityId:parseInt(B[0],10)};for(const K of B)et(J,K);M.items.push(J)}else if(W.startsWith("new:")){const B={},J=W.split(e);for(const K of J)if(K.startsWith("new:")){const L=K.split(c);B.ContentTypeName=L[1]}else if(K.startsWith("for:")){const L=K.split(c),Z=L[1].split("~")[0],k=L[1].split("~")[1],ut=L[2],at=parseInt(L[3],10),pt=null!=L[4]?"true"===L[4]:void 0;B.For={Target:ut,TargetType:at,..."g"===Z&&{Guid:k},..."n"===Z&&{Number:parseInt(k,10)},..."s"===Z&&{String:H(k)},...null!=pt&&{Singleton:pt}}}else if(K.startsWith("copy:")){const L=K.split(c);B.DuplicateEntity=parseInt(L[1],10)}else et(B,K);M.items.push(B)}return M}function et(O,M){if(M.startsWith(i)){const F=H(M.split(":")[1]);return O.Prefill=S(M,{fields:F}),void(O.ClientData={...O.ClientData,fields:F})}if(M.startsWith(d))O.Prefill=S(M,O.Prefill);else if(M.startsWith(h)){const F=S(M,O.ClientData?.parameters);O.ClientData={...O.ClientData,parameters:F}}}function w(O){return(O??"").replace(/\//g,"%2F").replace(/\:/g,"%3A").replace(/\&/g,"%26").replace(/\~/g,"%7E").replace(/\,/g,"%2C")}function H(O){return(O??"").replace(/%2F/g,"/").replace(/%3A/g,":").replace(/%26/g,"&").replace(/%7E/g,"~").replace(/%2C/g,",")}},3472:(Y,_,t)=>{t.d(_,{B:()=>h});var s=t(4230);class d{constructor(e,c,m,y){this.parent=e,this.fnName=c,this.parent.a(c+"() "+(m??""),y)}values(e,c){e&&this.parent.enabled&&(0,s.EL)(`[${this.parent.nameWithSvcId}.${this.fnName}()] ${c=c?` ${c} `:""} values:`,e)}a(e,c){this.parent.a(`${this.fnName}/${e}`,c)}r(e,c){return this.parent.a(`${this.fnName}/return${c?" "+c:""}`,{result:e}),e}rNull(e){return this.parent.a(`${this.fnName}/return NULL ${e}`),null}end(e,c){this.parent.a(`${this.fnName}/end${c?" "+c:""}`,e)}}var p=t(8764);class i{constructor(e,c,m=!0,y=!0){this.logger=e,this.name=c,this.enabled=m,this.jsonify=y}generateFn(e,c,m){if(!this.enabled||!this.logger.enabled)return T=>T;const y=`${this.name}/${e}${c?`-${c}`:""}`;let C=0;return T=>T.pipe((0,p.M)(E=>{const A=null==E?E:this.jsonify?JSON.parse(JSON.stringify(E)):E;return this.logger.a(y+" #"+C++,{showData:A})}))}rxTap(e,{enabled:c=!0,jsonify:m=!0}={enabled:!0,jsonify:!0}){return new i(this.logger,`${this.name}-${e}`,c,m)}pipe(e){return this.generateFn("pipe",e)}map(e){return this.generateFn("map",e)}filter(e){return this.generateFn("filter",e)}shareReplay(e){return this.generateFn("shareReplay",e)}distinctUntilChanged(e){return this.generateFn("distinctUntilChanged",e)}start(){return this.generateFn("start")}end(){return this.generateFn("end")}step(e){return this.generateFn("step"+e)}part(e){return this.generateFn("part",e)}read(e){return this.generateFn("read",e)}}class h{constructor(e,c,m){this.name=e,this.enabled=c,this.svcId=Math.random().toString(36).substring(7),this.enableChildren=m??!1,this.nameWithSvcId=`${e}-${this.svcId}`}rename(e){this.name=e,this.nameWithSvcId=`${e}-${this.svcId}`}inherit(e){this.enabled=this.enabled||e.enabled,e.enabled&&this.a(`Enabled: Inheriting log settings from parent ${e.nameWithSvcId}`)}a(e,c){this.enabled&&(0,s.EL)(`[${this.nameWithSvcId}] ${e}`,c)}rxTap(e,{enabled:c=!0,jsonify:m=!0}={enabled:!0,jsonify:!0}){return new i(this,e,c,m)}val(e,c){this.enabled&&(0,s.EL)(`[${this.nameWithSvcId}] value of ${e}:`,{value:c})}values(e){this.enabled&&(0,s.EL)(`[${this.nameWithSvcId}] values:`,e)}fn(e,c,m){return new d(this,e,c,m)}fnCond(e,c,m,y){return e||!this.enabled?this.fn(c,y,m):new h("noop",!1).fn("noop","noop",{condition:e})}}},3826:(Y,_,t)=>{t.d(_,{a:()=>s});class s{static boolEquals(p,i){return p===i}static stringEquals(p,i){return p===i}static valueEquals(p,i){return p===i}static manyEquals(p,i){if(null==p||null==i)return p===i;const h=typeof p;return h===typeof i&&("string"===h||"number"===h||"boolean"===h?p===i:Array.isArray(p)?s.arraysEqual(p,i):s.objectsEqual(p,i))}static objectsEqual(p,i){if(null==p||null==i)return p===i;const h=p,o=i,e=Object.keys(h),c=Object.keys(o);return e.length===c.length&&e.every(y=>!!o.hasOwnProperty(y)&&h[y]===o[y])}static arraysEqual(p,i){return null==p||null==i?p===i:p.length===i.length&&p.every((o,e)=>p[e]===i[e])}static distinct(p,i,h){return h.indexOf(p)===i}}},8873:(Y,_,t)=>{t.d(_,{o:()=>c});var s=t(8172),d=t(4230),p=t(4979),i=t(3472),h=t(8559);let c=(()=>{class m extends p.V{constructor(C){super(new i.B("RouteContext",!1)),this.ready=!1,this.log.a(`constructor; hasParent: ${null!=C}`,{parentContext:C,parentId:C?.id}),this.parent=C,window.contextId||(window.contextId=0),this.id=window.contextId++,(0,d.Ly)("Context.constructor",this)}get zoneId(){return this._zoneId||(this._zoneId=this.routeNum(s.v4)||this.parent?.zoneId)}get appId(){return null!=this._appId?this._appId:this._appId=this.routeNum(s.K7)||this.parent?.appId}get tabId(){return window.$2sxc.env.page()}get contentBlockId(){return this._contentBlockId||(this._contentBlockId=this.routeNum(s.p$)||this.parent?.contentBlockId)}get moduleId(){return this._moduleId||(this._moduleId=this.routeNum(s.Zm)||this.parent?.moduleId)}init(C){const T=this.log.fn(`init - previously ready: '${this.ready}'`,null,{route:C});if(this.ready)return T.r(this,"Already ready, skipping init");this.routeSnapshot=C?.snapshot,this.clearCachedValues(),this.ready=null!=C,this.log.a("init done",{this:this,appId:this.appId,zoneId:this.zoneId,contentBlockId:this.contentBlockId,moduleId:this.moduleId})}initRoot(){const C=this.log.fn("initRoot");if(this._zoneId=this.sessionNumber(s.v4),this._contentBlockId=this.sessionNumber(s.p$),this._moduleId=this.sessionNumber(s.Zm),this._appId=this.sessionNumber(s.K7),!this._zoneId)throw new Error("Context is missing some of the required parameters");this.ready=!0,C.r(this)}sessionNumber(C){const T=sessionStorage.getItem(C);if(null===T)return null;const E=parseInt(T,10);return isNaN(E)?null:E}routeNum(C){if(null==this.routeSnapshot)return null;const T=C.substring(s.Pl.length),E=this.routeSnapshot.paramMap.get(T);if(null!==E){const A=parseInt(E,10);return isNaN(A)?null:A}}clearCachedValues(){this._zoneId=null,this._appId=null,this._contentBlockId=null,this._moduleId=null}static#t=this.\u0275fac=function(T){return new(T||m)(h.KVO(m,12))};static#e=this.\u0275prov=h.jDH({token:m,factory:m.\u0275fac})}return m})()},4858:(Y,_,t)=>{t.d(_,{D:()=>m});var s=t(8559),d=t(6042),p=t(271),i=t(4979),h=t(3472),o=t(1576),e=t(3826);let m=(()=>{class y extends i.V{constructor(){super(new h.B("FeaturesService",!1)),this.dialogContext$=new d.m(1),this.dialogContextSignal=(0,s.vPA)(null)}loadFromService(T){T.getCurrent$().subscribe(E=>this.load(E.Context))}load(T){this.dialogContext$.next(T),this.dialogContextSignal.set(T)}getAll(){return(0,s.EWP)(()=>this.dialogContextSignal()?.Features??[],{equal:e.a.arraysEqual})}get$(T){return this.dialogContext$.pipe((0,p.T)(E=>E?.Features.find(A=>A.nameId===T)))}getSignal(T){return(0,s.EWP)(()=>this.dialogContextSignal()?.Features.find(E=>E.nameId===T),{equal:e.a.objectsEqual})}isEnabled$(T){return this.get$(T).pipe((0,p.T)(E=>E?.isEnabled??!1))}isEnabled(T){return(0,s.EWP)(()=>this.dialogContextSignal()?.Features.find(E=>E.nameId===T)?.isEnabled??!1,o.W.boolEquals)}static#t=this.\u0275fac=function(E){return new(E||y)};static#e=this.\u0275prov=s.jDH({token:y,factory:y.\u0275fac,providedIn:"root"})}return y})()},2987:(Y,_,t)=>{t.d(_,{n:()=>o});var s=t(271),d=t(3037),p=t(4205),i=t(8559),h=t(6443);let o=(()=>{class e{constructor(m){this.http=m,this.installSettingsSubject=new p.B,this.settings$=this.installSettingsSubject.asObservable(),this.settings$.pipe((0,s.T)(()=>!0),(0,d.Z)(!1)).subscribe()}loadGettingStarted(m){this.http.get(`sys/install/InstallSettings?isContentApp=${m}`).subscribe(y=>this.installSettingsSubject.next(y))}static#t=this.\u0275fac=function(y){return new(y||e)(i.KVO(h.Qq))};static#e=this.\u0275prov=i.jDH({token:e,factory:e.\u0275fac})}return e})()},4147:(Y,_,t)=>{t.d(_,{e:()=>h});var s=t(9452),d=t(6647),p=t(8559),i=t(6443);let h=(()=>{class o{constructor(c){this.http=c}installPackages(c,m){return c.reduce((y,C)=>y.pipe((0,d.n)(()=>C.url?(m(C),this.http.post(`sys/install/RemotePackage?packageUrl=${C.url}`,{})):(0,s.of)(!0))),(0,s.of)(!0))}static#t=this.\u0275fac=function(m){return new(m||o)(p.KVO(i.Qq))};static#e=this.\u0275prov=p.jDH({token:o,factory:o.\u0275fac})}return o})()},4979:(Y,_,t)=>{t.d(_,{V:()=>d});var s=t(7092);class d{constructor(i){this.log=i,this.subscriptions=new s.yU}destroy(){this.subscriptions.unsubscribe()}}},6619:(Y,_,t)=>{t.d(_,{c:()=>s});const s={production:!0}},8115:(Y,_,t)=>{var s=t(8559),d=t(6619),p=t(4821),i=t(9184),h=t(7092),o=t(1567),e=t(271);Object.keys({}).reduce((b,X)=>({...b,[X]:X}),{});const T={"code-curly":'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\r\n<path d="M2.98187 13.2188C3.38292 13.2083 3.70844 13.1016 3.95844 12.8984C4.21365 12.6901 4.38292 12.4062 4.46625 12.0469C4.54958 11.6875 4.59385 11.0729 4.59906 10.2031C4.60427 9.33333 4.6199 8.76042 4.64594 8.48438C4.69281 8.04688 4.77875 7.69531 4.90375 7.42969C5.03396 7.16406 5.19281 6.95312 5.38031 6.79688C5.56781 6.63542 5.8074 6.51302 6.09906 6.42969C6.29698 6.3776 6.6199 6.35156 7.06781 6.35156H7.50531V7.57812H7.26312C6.72146 7.57812 6.36208 7.67708 6.185 7.875C6.00792 8.06771 5.91937 8.5026 5.91937 9.17969C5.91937 10.5443 5.89073 11.4062 5.83344 11.7656C5.73969 12.3229 5.57823 12.7526 5.34906 13.0547C5.1251 13.3568 4.77094 13.625 4.28656 13.8594C4.85948 14.099 5.27354 14.4661 5.52875 14.9609C5.78917 15.4505 5.91937 16.2552 5.91937 17.375C5.91937 18.3906 5.92979 18.9948 5.95062 19.1875C5.99229 19.5417 6.09646 19.7891 6.26312 19.9297C6.435 20.0703 6.76833 20.1406 7.26312 20.1406H7.50531V21.3672H7.06781C6.5574 21.3672 6.1876 21.3255 5.95844 21.2422C5.6251 21.1224 5.34906 20.9271 5.13031 20.6562C4.91156 20.3906 4.76833 20.0521 4.70062 19.6406C4.63812 19.2292 4.60427 18.5547 4.59906 17.6172C4.59385 16.6797 4.54958 16.0312 4.46625 15.6719C4.38292 15.3125 4.21365 15.0286 3.95844 14.8203C3.70844 14.612 3.38292 14.5026 2.98187 14.4922V13.2188ZM8.05344 18V16.3984H9.655V18H8.05344ZM11.2266 18V16.3984H12.8281V18H11.2266ZM14.3997 18V16.3984H16.0012V18H14.3997ZM21.0103 13.2188V14.4922C20.6093 14.5026 20.2811 14.612 20.0259 14.8203C19.7759 15.0286 19.6093 15.3125 19.5259 15.6719C19.4426 16.026 19.3983 16.638 19.3931 17.5078C19.3879 18.3776 19.3723 18.9505 19.3462 19.2266C19.2994 19.6693 19.2108 20.0208 19.0806 20.2812C18.9556 20.5469 18.7994 20.7578 18.6119 20.9141C18.4244 21.0755 18.1848 21.1979 17.8931 21.2812C17.6952 21.3385 17.3723 21.3672 16.9244 21.3672H16.4869V20.1406H16.7291C17.2707 20.1406 17.6301 20.0417 17.8072 19.8438C17.9843 19.651 18.0728 19.2135 18.0728 18.5312C18.0728 17.2292 18.0962 16.4036 18.1431 16.0547C18.2265 15.4766 18.3931 15.0156 18.6431 14.6719C18.8931 14.3229 19.2473 14.0521 19.7056 13.8594C19.1067 13.5729 18.6848 13.1953 18.44 12.7266C18.1952 12.2526 18.0728 11.4557 18.0728 10.3359C18.0728 9.32031 18.0598 8.71354 18.0337 8.51562C17.9973 8.16667 17.8931 7.92448 17.7212 7.78906C17.5546 7.64844 17.2239 7.57812 16.7291 7.57812H16.4869V6.35156H16.9244C17.4348 6.35156 17.8046 6.39323 18.0337 6.47656C18.3671 6.59115 18.6431 6.78385 18.8619 7.05469C19.0806 7.32552 19.2212 7.66667 19.2837 8.07812C19.3515 8.48958 19.3879 9.16406 19.3931 10.1016C19.3983 11.0391 19.4426 11.6875 19.5259 12.0469C19.6093 12.401 19.7759 12.6823 20.0259 12.8906C20.2811 13.099 20.6093 13.2083 21.0103 13.2188Z"/>\r\n</svg>\r\n'};var E=t(3840),A=t(436);let S=(()=>{class b{constructor(q,U){this.matIconRegistry=q,this.domSanitizer=U}load(){this.matIconRegistry.setDefaultFontSetClass("material-icons-outlined"),Object.entries(T).forEach(([q,U])=>{this.matIconRegistry.addSvgIconLiteral(q,this.domSanitizer.bypassSecurityTrustHtml(U))})}static#t=this.\u0275fac=function(U){return new(U||b)(s.KVO(E.tp),s.KVO(A.up))};static#e=this.\u0275prov=s.jDH({token:b,factory:b.\u0275fac})}return b})();var v=t(8172),I=t(8873);let N=(()=>{class b extends p.Z{constructor(q,U,ct,it,ot,It,Pt){super(q,U.preConfigure({moduleId:parseInt(sessionStorage.getItem(v.Zm)||"-1234",10),contentBlockId:parseInt(sessionStorage.getItem(v.p$)||"-1234",10)})),this.context=ct,this.titleService=it,this.router=ot,this.activatedRoute=It,this.appIconsService=Pt,this.subscription=new h.yU,this.context.initRoot(),this.appIconsService.load()}ngOnInit(){const q=this.titleService.getTitle();this.subscription.add(this.router.events.pipe((0,o.p)(U=>U instanceof i.wF),(0,e.T)(()=>{let U=this.activatedRoute.firstChild;for(;U?.firstChild;)U=U.firstChild;return U?.snapshot.data.title?U.snapshot.data.title:q})).subscribe(U=>{this.titleService.setTitle(U)}))}ngOnDestroy(){this.subscription.unsubscribe()}static#t=this.\u0275fac=function(U){return new(U||b)(s.rXU(s.aKT),s.rXU(p.ob),s.rXU(I.o),s.rXU(A.hE),s.rXU(i.Ix),s.rXU(i.nX),s.rXU(S))};static#e=this.\u0275cmp=s.VBU({type:b,selectors:[["app-root"]],standalone:!0,features:[s.Jv_([]),s.Vt3,s.aNF],decls:1,vars:0,template:function(U,ct){1&U&&s.nrm(0,"router-outlet")},dependencies:[i.iI,i.n3],changeDetection:0})}return b})();const w=[{path:":zoneId/apps",loadChildren:()=>t.e("projects_eav-ui_src_app_apps-management_apps-management_routing_ts").then(t.bind(t,6490)).then(b=>b.appsManagementRoutes),data:{title:"Apps"}},{path:":zoneId/import",loadChildren:()=>t.e("projects_eav-ui_src_app_import-app_import-app_routing_ts").then(t.bind(t,7903)).then(b=>b.importRoutes),data:{title:"Import App"}},{path:":zoneId/:appId/app",loadChildren:()=>Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-projects_eav-ui_src_app_shared_constants_default-grid-options_constants_ts-projects_e-814394"),t.e("default-projects_eav-ui_src_app_app-administration_services_index_ts-projects_eav-ui_src_app_-488733"),t.e("default-projects_eav-ui_src_app_permissions_permissions_component_ts"),t.e("default-projects_eav-ui_src_app_dev-rest_index_ts"),t.e("common"),t.e("projects_eav-ui_src_app_app-administration_app-administration_routing_ts")]).then(t.bind(t,6180)).then(b=>b.appAdministrationRoutes),data:{title:"App"}},{path:":zoneId/:appId/code",loadChildren:()=>t.e("projects_eav-ui_src_app_code-editor_code-editor_routing_ts").then(t.bind(t,5316)).then(b=>b.codeEditorRoutes),data:{title:"Code Editor"}},{path:":zoneId/:appId/query/:pipelineId",loadChildren:()=>Promise.all([t.e("default-projects_eav-ui_src_app_shared_components_file-upload-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2022_select_mjs"),t.e("default-node_modules_angular_material_fesm2022_radio_mjs"),t.e("default-projects_eav-ui_src_app_shared_constants_default-grid-options_constants_ts-projects_e-814394"),t.e("default-projects_eav-ui_src_app_app-administration_services_index_ts-projects_eav-ui_src_app_-488733"),t.e("default-projects_eav-ui_src_app_permissions_permissions_component_ts"),t.e("default-projects_eav-ui_src_app_dev-rest_index_ts"),t.e("projects_eav-ui_src_app_visual-query_visual-query_routing_ts")]).then(t.bind(t,5932)).then(b=>b.visualQueryRoutes),data:{title:"Visual Query"}},{path:":zoneId/:appId/:guid/:part/:index/replace",loadChildren:()=>t.e("projects_eav-ui_src_app_replace-content_replace-content_routing_ts").then(t.bind(t,318)).then(b=>b.replaceContentRoutes),data:{title:"Apps"}},{path:":zoneId/:appId/:guid/:part/:index/reorder",loadChildren:()=>t.e("projects_eav-ui_src_app_manage-content-list_manage-content-list_routing_ts").then(t.bind(t,6736)).then(b=>b.manageContentRoutes),data:{title:"Reorder Items"}},{path:":zoneId/:appId/items/:contentTypeStaticName",loadChildren:()=>t.e("common").then(t.bind(t,753)).then(b=>b.contentItemsRoutes),data:{title:"Items"}},{path:":zoneId/:appId/fields/:contentTypeStaticName",loadChildren:()=>Promise.all([t.e("common"),t.e("projects_eav-ui_src_app_permissions_go-to-permissions_ts")]).then(t.bind(t,5733)).then(b=>b.contentTypeFieldsRoutes),data:{title:"Fields"}},{path:":zoneId/:appId/versions/:itemId",loadChildren:()=>t.e("projects_eav-ui_src_app_item-history_item-history_routing_ts").then(t.bind(t,6860)).then(b=>b.historyRoutes)},...t(2134).fu];var H=t(316),O=t(6443),M=t(3412),F=t(7567),W=t(3216),J=t(1318),K=t(7919);let L=(()=>{class b{constructor(){this.excludedUrls=["dist/ng-edit/i18n"]}intercept(q,U){return U.handle(q).pipe((0,J.W)(ct=>(this.checkIfExcluded(ct.url)||this.showDetailedHttpError(ct),(0,K.$)(ct))))}checkIfExcluded(q){for(const U of this.excludedUrls)if(q.includes(U))return!0;return!1}showDetailedHttpError(q){let U="Had an error talking to the server (status "+q.status+").";const ct=q.error;if(ct){const it=ct.Message;it&&(U+="\nMessage: "+it);const ot=ct.MessageDetail||ct.ExceptionMessage;ot&&(U+="\nDetail: "+ot),ot&&0===ot.indexOf("No action was found")&&(ot.indexOf("that matches the name")>0?U+="\n\nTip from 2sxc: you probably got the action-name wrong in your JS.":ot.indexOf("that matches the request.")>0&&(U+="\n\nTip from 2sxc: Seems like the parameters are the wrong amount or type.")),it&&0===it.indexOf("Controller")&&it.indexOf("not found")>0&&(U+="\n\nTip from 2sxc: you probably spelled the controller name wrong or forgot to remove the word 'controller' from the call in JS. To call a controller called 'DemoController' only use 'Demo'."),U+="\n\nif you are an advanced user you can learn more about what went wrong - discover how on 2sxc.org/help?tag=debug"}alert(U)}static#t=this.\u0275fac=function(U){return new(U||b)};static#e=this.\u0275prov=s.jDH({token:b,factory:b.\u0275fac})}return b})(),Z=(()=>{class b{constructor(){}intercept(q,U){let ct;return q.body instanceof FormData?U.handle(q):(ct=q.clone({setHeaders:{"Content-Type":"application/json;charset=UTF-8"}}),U.handle(ct))}static#t=this.\u0275fac=function(U){return new(U||b)};static#e=this.\u0275prov=s.jDH({token:b,factory:b.\u0275fac})}return b})();var k=t(2987),ut=t(4147),at=t(2552),pt=t(1439),yt=t(4230);const dt=d.c.production?[]:[function vt(b){return(X,q)=>((0,yt.xY)("state:",X,"action:",q),b(X,q))}];var rt=t(5469),ht=t(1925),Et=t(3190),Vt=t(4902),bt=t(852),Mt=t(9452);class j{constructor(X,q,U){this.http=X,this.prefix=q,this.suffix=U}getTranslation(X){return this.http.get(`${this.prefix}${X}${this.suffix}`).pipe((0,J.W)(q=>(console.warn(`Translation: Failed to get language '${X}' from ${this.prefix}`,q),(0,Mt.of)({}))))}}var P=t(5944);const x={providers:[(0,i.lh)(w),(0,s.oKB)(A.Bb,at.wb,O.q1,pt.md.forRoot({},{metaReducers:dt,runtimeChecks:{strictStateImmutability:!0,strictActionImmutability:!0}}),rt.Vm.forRoot([]),ht.Oo.instrument({maxAge:25}),Et.WZ.forRoot(Vt.Ev),bt.h.forRoot(),bt.h.forChild(function gt(b){return{loader:{provide:bt.Wr,useFactory:b,deps:[O.Qq]},defaultLanguage:"en",isolate:!0}}(function _t(b){return new j(b,"./i18n/",`.js?${window.sxcVersion}`)}))),p.dT,I.o,A.hE,S,k.n,ut.e,{provide:s.hnV,useFactory:function B(b){return()=>{console.log("Setting parameters config and clearing route");const X=Object.keys(sessionStorage).filter(U=>U.startsWith(v.Pl));if(window.location.hash.startsWith("#/")){if(0===X.length)throw alert("Missing required url parameters. Please reopen dialog."),new Error("Missing required url parameters. Please reopen dialog.");console.log("Initial route:",sessionStorage.getItem(v.zX))}else{console.log("Initial route:",window.location.href);for(const wt of X)sessionStorage.removeItem(wt);sessionStorage.setItem(v.zX,window.location.href),sessionStorage.setItem(v.Q$,F.Y.Edit);const U=window.location.hash.substring(1),ct=M.b.readQueryStringParameters(U);for(const[wt,At]of Object.entries(ct))null!=At&&sessionStorage.setItem(v.Pl+wt,At);const it=b.get(i.Ix),ot=sessionStorage.getItem(v.v4),It=sessionStorage.getItem(v.K7),Pt=sessionStorage.getItem(v.Q$),$t=sessionStorage.getItem(v.Dr),Lt=sessionStorage.getItem(v.Ul);switch(Pt){case F.Y.Zone:const wt=JSON.parse(sessionStorage.getItem(v.z0));it.navigate([`${ot}/apps${wt?.tab?`/${wt.tab}`:""}`]);break;case F.Y.Apps:it.navigate([`${ot}/apps/list`]);break;case F.Y.AppImport:it.navigate([`${ot}/import`]);break;case F.Y.App:const At=JSON.parse(sessionStorage.getItem(v.z0));it.navigate([`${ot}/${It}/app${At?.tab?`/${At.tab}`:""}${At?.scope?`/${At.scope}`:""}`]);break;case F.Y.ContentType:it.navigate([`${ot}/${It}/fields/${$t}`]);break;case F.Y.ContentItems:it.navigate([`${ot}/${It}/items/${$t}`]);break;case F.Y.Edit:const Ht={items:JSON.parse(Lt)},Bt=(0,W.s)(Ht);it.navigate([`${ot}/${It}/edit/${Bt}`]);break;case F.Y.ItemHistory:const Gt=JSON.parse(Lt);it.navigate([`${ot}/${It}/versions/${Gt[0].EntityId}`]);break;case F.Y.Develop:it.navigate([`${ot}/${It}/code`]);break;case F.Y.PipelineDesigner:const G=sessionStorage.getItem(v.Xw);it.navigate([`${ot}/${It}/query/${G}`]);break;case F.Y.Replace:const a=JSON.parse(Lt)[0];it.navigate([`${ot}/${It}/${a.Parent}/${a.Field}/${a.Index}/replace`],{queryParams:a.Add?{add:!0}:{}});break;case F.Y.InstanceList:const lt=JSON.parse(Lt)[0];it.navigate([`${ot}/${It}/${lt.Parent}/${lt.Field}/${lt.Index}/reorder`]);break;default:alert(`Cannot open unknown dialog "${Pt}"`);try{window.parent.$2sxc.totalPopup.close()}catch{}}}}},deps:[s.zZn],multi:!0},{provide:H.hb,useClass:H.fw},{provide:O.a7,useClass:Z,multi:!0},{provide:O.a7,useClass:L,multi:!0},{provide:P.U$,useValue:{subscriptSizing:"dynamic"}}]};d.c.production&&(0,s.SmG)(),(0,A.B8)(N,x).catch(b=>console.error(b))}},Y=>{Y.O(0,["vendor"],()=>Y(Y.s=8115)),Y.O()}]);
//# sourceMappingURL=https://sources.2sxc.org/17.99.00/dist/ng-edit/main.a79cdcb7b2b00ea3.js.map