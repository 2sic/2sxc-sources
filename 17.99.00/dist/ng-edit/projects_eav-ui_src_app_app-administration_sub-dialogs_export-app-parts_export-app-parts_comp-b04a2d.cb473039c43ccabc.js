"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_comp-b04a2d"],{3695:(D,x,a)=>{a.r(x),a.d(x,{ExportAppPartsComponent:()=>U});var m=a(7941),r=a(5797),o=a(9999),h=a(271),M=a(5858),c=a(52),C=a(7693),v=a(1475),T=a(316),u=a(7024),O=a(3840),_=a(4175),g=a(5060),d=a(4456),E=a(5175),f=a(5944),P=a(3758),F=a(9333),R=a(4601),I=a(5437),t=a(8559);function k(s,l){if(1&s&&(t.j41(0,"mat-option",8),t.EFF(1),t.k0s()),2&s){const n=l.$implicit;t.Y8G("value",n.value),t.R7$(),t.SpI(" ",n.name," ")}}function A(s,l){if(1&s){const n=t.RV6();t.j41(0,"li",17)(1,"div",18)(2,"mat-checkbox",19),t.mxI("ngModelChange",function(i){const p=t.eBV(n).$implicit;return t.DH7(p._export,i)||(p._export=i),t.Njj(i)}),t.j41(3,"span",20),t.EFF(4),t.k0s()()()()}if(2&s){const n=l.$implicit;t.R7$(2),t.R50("ngModel",n._export),t.R7$(2),t.Lme("",n.Name," (",n.Id,")")}}function j(s,l){if(1&s&&(t.j41(0,"ul",21)(1,"p",22),t.EFF(2,"Templates"),t.k0s(),t.Z7z(3,A,5,3,"li",17,t.fX1),t.k0s()),2&s){const n=t.XpG().$implicit;t.R7$(3),t.Dyx(n.Templates)}}function y(s,l){if(1&s){const n=t.RV6();t.j41(0,"li",17)(1,"div",18)(2,"mat-checkbox",19),t.mxI("ngModelChange",function(i){const p=t.eBV(n).$implicit;return t.DH7(p._export,i)||(p._export=i),t.Njj(i)}),t.j41(3,"span",20),t.EFF(4),t.k0s()()()()}if(2&s){const n=l.$implicit;t.R7$(2),t.R50("ngModel",n._export),t.R7$(2),t.Lme("",n.Title," (",n.Id,")")}}function S(s,l){if(1&s&&(t.j41(0,"ul",21)(1,"p",22),t.EFF(2,"Entities"),t.k0s(),t.Z7z(3,y,5,3,"li",17,t.fX1),t.k0s()),2&s){const n=t.XpG().$implicit;t.R7$(3),t.Dyx(n.Entities)}}function $(s,l){if(1&s){const n=t.RV6();t.j41(0,"li",17)(1,"div",18)(2,"mat-checkbox",19),t.mxI("ngModelChange",function(i){const p=t.eBV(n).$implicit;return t.DH7(p._export,i)||(p._export=i),t.Njj(i)}),t.j41(3,"span",20),t.EFF(4),t.k0s()()(),t.DNE(5,j,5,0,"ul",21)(6,S,5,0,"ul",21),t.k0s()}if(2&s){const n=l.$implicit;t.R7$(2),t.R50("ngModel",n._export),t.R7$(2),t.Lme("",n.Name," (",n.Id,")"),t.R7$(),t.vxM(5,n.Templates.length>0?5:-1),t.R7$(),t.vxM(6,n.Entities.length>0?6:-1)}}function B(s,l){if(1&s){const n=t.RV6();t.j41(0,"li",17)(1,"div",18)(2,"mat-checkbox",19),t.mxI("ngModelChange",function(i){const p=t.eBV(n).$implicit;return t.DH7(p._export,i)||(p._export=i),t.Njj(i)}),t.j41(3,"span",20),t.EFF(4),t.k0s()()()()}if(2&s){const n=l.$implicit;t.R7$(2),t.R50("ngModel",n._export),t.R7$(2),t.Lme("",n.Name," (",n.Id,")")}}function b(s,l){if(1&s&&(t.j41(0,"div")(1,"ul",15)(2,"p",16),t.EFF(3,"Content Types"),t.k0s(),t.Z7z(4,$,7,5,"li",17,t.fX1),t.k0s(),t.j41(6,"ul",15)(7,"p",16),t.EFF(8,"Templates Without Content Types"),t.k0s(),t.Z7z(9,B,5,3,"li",17,t.fX1),t.k0s()()),2&s){const n=t.XpG(2);t.R7$(4),t.Dyx(n.contentInfo.ContentTypes),t.R7$(5),t.Dyx(n.contentInfo.TemplatesWithoutContentTypes)}}function L(s,l){if(1&s){const n=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Export Content and Templates from this App"),t.k0s()(),t.j41(4,"div",3)(5,"p"),t.EFF(6," This is an advanced feature to export parts of the app. The export will create an xml file which can be imported into another site or app. To export the entire content of the app (for example when duplicating the entire site), go to the app export. For further help visit "),t.j41(7,"a",4),t.EFF(8,"2sxc Help"),t.k0s(),t.EFF(9,". "),t.k0s(),t.j41(10,"div",5)(11,"mat-form-field",6)(12,"mat-label"),t.EFF(13,"Scope"),t.k0s(),t.j41(14,"mat-select",7),t.bIt("ngModelChange",function(i){t.eBV(n);const p=t.XpG();return t.Njj(p.changeScope(i))}),t.Z7z(15,k,2,2,"mat-option",8,t.fX1),t.j41(17,"mat-option",8),t.EFF(18,"Other..."),t.k0s()(),t.j41(19,"button",9)(20,"mat-icon",10),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.unlockScope())}),t.EFF(21),t.k0s()()(),t.j41(22,"app-field-hint"),t.EFF(23," The scope should almost never be changed - "),t.j41(24,"a",11),t.EFF(25,"see help"),t.k0s()()(),t.DNE(26,b,11,0,"div"),t.k0s(),t.j41(27,"mat-dialog-actions",12)(28,"button",13),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.closeDialog())}),t.EFF(29," Cancel "),t.k0s(),t.j41(30,"button",14),t.bIt("click",function(){t.eBV(n);const i=t.XpG();return t.Njj(i.exportAppParts())}),t.EFF(31," Export "),t.k0s()()()}if(2&s){const n=l,e=t.XpG();t.R7$(14),t.Y8G("ngModel",e.exportScope)("disabled",e.lockScope),t.R7$(),t.Dyx(e.scopeOptions),t.R7$(2),t.Y8G("value",e.dropdownInsertValue),t.R7$(2),t.Y8G("tippy",e.lockScope?"Unlock":"Lock"),t.R7$(2),t.SpI(" ",e.lockScope?"lock":"lock_open"," "),t.R7$(5),t.vxM(26,e.contentInfo?26:-1),t.R7$(2),t.Y8G("disabled",n.loading||n.isExporting),t.R7$(2),t.Y8G("disabled",n.loading||n.isExporting)}}let U=(()=>{class s{constructor(n){this.dialogRef=n,this.hostClass="dialog-component",this.exportAppPartsService=(0,I.d)(v.j),this.contentTypesService=(0,I.d)(C.g),this.exportScope=c.YX.scopes.default.value,this.lockScope=!0,this.dropdownInsertValue=M.O,this.loading$=new r.t(!1),this.isExporting$=new r.t(!1),this.viewModel$=(0,o.z)([this.loading$,this.isExporting$]).pipe((0,h.T)(([e,i])=>({loading:e,isExporting:i})))}ngOnInit(){this.fetchScopes(),this.fetchContentInfo()}ngOnDestroy(){this.loading$.complete(),this.isExporting$.complete()}closeDialog(){this.dialogRef.close()}exportAppParts(){this.isExporting$.next(!0);const n=this.selectedContentTypes().map(p=>p.Id),e=this.selectedTemplates().map(p=>p.Id);let i=this.selectedEntities().map(p=>p.Id);i=i.concat(e),this.exportAppPartsService.exportParts(n,i,e),this.isExporting$.next(!1)}changeScope(n){n!==M.O||(n=prompt("This is an advanced feature to show content-types of another scope. Don't use this if you don't know what you're doing, as content-types of other scopes are usually hidden for a good reason.")||c.YX.scopes.default.value,this.scopeOptions.find(e=>e.value===n))||this.scopeOptions.unshift({name:n,value:n}),this.exportScope=n,this.fetchContentInfo()}unlockScope(){this.lockScope=!this.lockScope,this.lockScope&&(this.exportScope=c.YX.scopes.default.value,this.fetchContentInfo())}fetchScopes(){this.loading$.next(!0),this.contentTypesService.getScopes().subscribe(n=>{this.scopeOptions=n,this.loading$.next(!1)})}fetchContentInfo(){this.loading$.next(!0),this.exportAppPartsService.getContentInfo(this.exportScope).subscribe(n=>{this.contentInfo=n,this.loading$.next(!1)})}selectedContentTypes(){return this.contentInfo.ContentTypes.filter(n=>n._export)}selectedEntities(){let n=[];for(const e of this.contentInfo.ContentTypes)n=n.concat(e.Entities.filter(i=>i._export));return n}selectedTemplates(){let n=[];for(const e of this.contentInfo.ContentTypes)n=n.concat(e.Templates.filter(i=>i._export));return n=n.concat(this.contentInfo.TemplatesWithoutContentTypes.filter(e=>e._export)),n}static#t=this.\u0275fac=function(e){return new(e||s)(t.rXU(m.CP))};static#n=this.\u0275cmp=t.VBU({type:s,selectors:[["app-export-app-parts"]],hostVars:1,hostBindings:function(e,i){2&e&&t.Mr5("className",i.hostClass)},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog","eav-no-scrollbar"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],["href","https://2sxc.org/en/help?tag=export","target","_blank"],[1,"eav-edit-input"],["color","accent",1,"eav-mat-form-field"],["name","Scope",3,"ngModelChange","ngModel","disabled"],[3,"value"],["mat-icon-button","","matTextSuffix","",3,"tippy"],["appClickStopPropagation","",3,"click"],["appClickStopPropagation","","href","https://2sxc.org/help?tag=scope","target","_blank"],["align","end"],["mat-raised-button","",3,"click","disabled"],["mat-raised-button","","color","accent",3,"click","disabled"],[1,"eav-content-info__list","eav-content-info__base"],[1,"eav-content-info__title"],[1,"eav-content-info__item"],[1,"eav-option-box"],[3,"ngModelChange","ngModel"],[1,"eav-option-box__text"],[1,"eav-content-info__list"],[1,"eav-content-info__subtitle"]],template:function(e,i){if(1&e&&(t.DNE(0,L,32,8,"div",0),t.nI1(1,"async")),2&e){let p;t.vxM(0,(p=t.bMT(1,1,i.viewModel$))?0:-1,p)}},dependencies:[f.RG,f.rl,f.nJ,f.yw,E.Ve,E.VO,g.wT,d.YN,d.BC,d.vS,g.Sy,_.Hl,_.$z,_.iY,O.m_,O.An,u.g7,u.So,m.E7,T.Jj,P.F,F.c,R.e],styles:[".eav-edit-input[_ngcontent-%COMP%]{padding-bottom:8px}.eav-content-info__title[_ngcontent-%COMP%]{font-size:18px;font-weight:700}.eav-content-info__subtitle[_ngcontent-%COMP%]{font-size:14px;font-weight:700}.eav-content-info__list[_ngcontent-%COMP%]{font-size:14px;list-style-type:none}.eav-content-info__base[_ngcontent-%COMP%]{padding:0}.eav-content-info__item[_ngcontent-%COMP%]{border-top:1px solid #DDD;padding:2px}.eav-option-box[_ngcontent-%COMP%]{margin:8px 0}.eav-option-box__text[_ngcontent-%COMP%]{white-space:normal;font-size:14px}"]})}return s})()},3758:(D,x,a)=>{a.d(x,{F:()=>O});var m=a(316),r=a(5944),o=a(8559);const h=["*"],M=_=>({"hint-box__short":_});function c(_,g){1&_&&o.eu8(0)}function C(_,g){if(1&_&&(o.j41(0,"mat-hint"),o.DNE(1,c,1,0,"ng-container",2),o.k0s()),2&_){o.XpG();const d=o.sdS(4);o.R7$(),o.Y8G("ngTemplateOutlet",d)}}function v(_,g){1&_&&o.eu8(0)}function T(_,g){if(1&_&&(o.j41(0,"mat-error"),o.DNE(1,v,1,0,"ng-container",2),o.k0s()),2&_){o.XpG();const d=o.sdS(4);o.R7$(),o.Y8G("ngTemplateOutlet",d)}}function u(_,g){1&_&&o.SdG(0)}let O=(()=>{class _{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(E){return new(E||_)};static#n=this.\u0275cmp=o.VBU({type:_,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[o.aNF],ngContentSelectors:h,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(E,f){if(1&E){const P=o.RV6();o.NAR(),o.j41(0,"div",1),o.bIt("click",function(){return o.eBV(P),o.Njj(f.toggleIsShort())}),o.DNE(1,C,2,1)(2,T,2,1),o.k0s(),o.DNE(3,u,1,0,"ng-template",null,0,o.C5r)}if(2&E){let P;o.Y8G("ngClass",o.eq3(2,M,f.isShort)),o.R7$(),o.vxM(1,!1===(P=f.isError)?1:!0===P?2:-1)}},dependencies:[r.RG,r.MV,r.TL,m.YU,m.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return _})()},9333:(D,x,a)=>{a.d(x,{c:()=>o});var m=a(8559);let o=(()=>{class h{constructor(){}onClick(c){c.stopPropagation()}static#t=this.\u0275fac=function(C){return new(C||h)};static#n=this.\u0275dir=m.FsC({type:h,selectors:[["","appClickStopPropagation",""]],hostBindings:function(C,v){1&C&&m.bIt("click",function(u){return v.onClick(u)})},standalone:!0})}return h})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.99.00/dist/ng-edit/projects_eav-ui_src_app_app-administration_sub-dialogs_export-app-parts_export-app-parts_comp-b04a2d.cb473039c43ccabc.js.map