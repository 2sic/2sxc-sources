{"version":3,"file":"projects_eav-ui_src_app_shared_components_base-with-child-dialog_component_ts.a6c5c30e3e964dbe.js","mappings":"qQAkBM,MAAgBA,UAAqCC,IAEzDC,YACYC,EACAC,EACHC,GAEPC,QAJUC,KAAAJ,SACAI,KAAAH,QACHG,KAAAF,MAGPE,KAAKF,MAAQ,IAAIG,IAAU,iBApBf,EAqBd,CAkBUC,qBACR,OAAOF,KAAKJ,OAAOO,OAAOC,QACxBC,KAAOC,GAASA,aAAiBC,OAAa,EAC9CC,OAAYR,KAAKH,MAAMY,SAASC,aAAU,EAC1CC,KAAI,MAAQX,KAAKH,MAAMY,SAASC,aAAU,EAC1CE,QAAQ,EACRP,KAAO,EAAEQ,EAAgBC,KAAiBD,IAAmBC,GAGjE","names":["BaseWithChildDialogComponent","BaseComponent","constructor","router","route","log","super","this","EavLogger","childDialogClosed$","events","pipe","filter","event","NavigationEnd","startWith","snapshot","firstChild","map","pairwise","hadChildBefore","hasChildNow"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/eav-ui/src/app/shared/components/base-with-child-dialog.component.ts"],"sourcesContent":["import { Directive, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { filter, map, pairwise, startWith, tap } from 'rxjs';\r\nimport { BaseComponent } from './base.component';\r\nimport { EavLogger } from '../logging/eav-logger';\r\n\r\nconst logThis = false;\r\n\r\n// 2024-06-12 2dm experimental - remove comments if all is good mid of June\r\n// - previously had\r\n// @Directive()   // Needs the @Directive() so the compiler allows OnDestroy to be implemented\r\n// ...then tried this\r\n// @Component({\r\n//   selector: 'app-base-component-with-child',\r\n//   template: ''\r\n// })\r\n// ...but then added abstract, so I think it doesn't actually need all that\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseWithChildDialogComponent extends BaseComponent implements OnDestroy {\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    public log?: EavLogger\r\n  ) {\r\n    super();\r\n    this.log ??= new EavLogger('BaseComponent', logThis);\r\n  }\r\n\r\n  // 2024-06-12 2dm - don't think this is needed since it's already on the base class\r\n  // ngOnDestroy() {\r\n  //   super.ngOnDestroy();\r\n  // }\r\n\r\n  // TODO @2dg not longer in use after refactoring SideNav with Routing\r\n  // protected refreshOnChildClosedDeep() {\r\n  //   return this.router.events.pipe(\r\n  //     filter(event => event instanceof NavigationEnd),\r\n  //     startWith(!!this.route.snapshot.firstChild.firstChild),\r\n  //     map(() => !!this.route.snapshot.firstChild.firstChild),\r\n  //     pairwise(),\r\n  //     filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n  //   )\r\n  // }\r\n\r\n  protected childDialogClosed$() {\r\n    return this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      startWith(!!this.route.snapshot.firstChild),\r\n      map(() => !!this.route.snapshot.firstChild),\r\n      pairwise(),\r\n      filter(([hadChildBefore, hasChildNow]) => hadChildBefore && !hasChildNow),\r\n      // tap(() => console.log('2dm ' + 'childDialogClosed$'))\r\n    )\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}