{"version":3,"file":"projects_eav-ui_src_app_shared_components_base-with-child-dialog_component_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;AACwE;AACX;AACZ;AACC;AAElD,MAAMO,OAAO,GAAG,KAAK;AAErB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACM,MAAgBC,4BAA6B,SAAQH,0DAAa;EAEtEI,YACYC,MAAc,EACdC,KAAqB,EACxBC,GAAe;IAEtB,KAAK,EAAE;IAJG,KAAAF,MAAM,GAANA,MAAM;IACN,KAAAC,KAAK,GAALA,KAAK;IACR,KAAAC,GAAG,GAAHA,GAAG;IAGV,IAAI,CAACA,GAAG,KAAK,IAAIN,0DAAS,CAAC,eAAe,EAAEC,OAAO,CAAC;EACtD;EAEA;EACA;EACA;EACA;EAEA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EAEUM,kBAAkBA,CAAA;IAC1B,OAAO,IAAI,CAACH,MAAM,CAACI,MAAM,CAACC,IAAI,CAC5Bd,4CAAM,CAACe,KAAK,IAAIA,KAAK,YAAYhB,0DAAa,CAAC,EAC/CI,+CAAS,CAAC,CAAC,CAAC,IAAI,CAACO,KAAK,CAACM,QAAQ,CAACC,UAAU,CAAC,EAC3ChB,yCAAG,CAAC,MAAM,CAAC,CAAC,IAAI,CAACS,KAAK,CAACM,QAAQ,CAACC,UAAU,CAAC,EAC3Cf,8CAAQ,EAAE,EACVF,4CAAM,CAAC,CAAC,CAACkB,cAAc,EAAEC,WAAW,CAAC,KAAKD,cAAc,IAAI,CAACC,WAAW,CAAC,CAE1E;EACH","sources":["./projects/eav-ui/src/app/shared/components/base-with-child-dialog.component.ts"],"sourcesContent":["import { Directive, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { filter, map, pairwise, startWith, tap } from 'rxjs';\r\nimport { BaseComponent } from './base.component';\r\nimport { EavLogger } from '../logging/eav-logger';\r\n\r\nconst logThis = false;\r\n\r\n// 2024-06-12 2dm experimental - remove comments if all is good mid of June\r\n// - previously had\r\n// @Directive()   // Needs the @Directive() so the compiler allows OnDestroy to be implemented\r\n// ...then tried this\r\n// @Component({\r\n//   selector: 'app-base-component-with-child',\r\n//   template: ''\r\n// })\r\n// ...but then added abstract, so I think it doesn't actually need all that\r\n// tslint:disable-next-line:directive-class-suffix\r\nexport abstract class BaseWithChildDialogComponent extends BaseComponent implements OnDestroy {\r\n\r\n  constructor(\r\n    protected router: Router,\r\n    protected route: ActivatedRoute,\r\n    public log?: EavLogger\r\n  ) {\r\n    super();\r\n    this.log ??= new EavLogger('BaseComponent', logThis);\r\n  }\r\n\r\n  // 2024-06-12 2dm - don't think this is needed since it's already on the base class\r\n  // ngOnDestroy() {\r\n  //   super.ngOnDestroy();\r\n  // }\r\n\r\n  // TODO @2dg not longer in use after refactoring SideNav with Routing\r\n  // protected refreshOnChildClosedDeep() {\r\n  //   return this.router.events.pipe(\r\n  //     filter(event => event instanceof NavigationEnd),\r\n  //     startWith(!!this.route.snapshot.firstChild.firstChild),\r\n  //     map(() => !!this.route.snapshot.firstChild.firstChild),\r\n  //     pairwise(),\r\n  //     filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n  //   )\r\n  // }\r\n\r\n  protected childDialogClosed$() {\r\n    return this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      startWith(!!this.route.snapshot.firstChild),\r\n      map(() => !!this.route.snapshot.firstChild),\r\n      pairwise(),\r\n      filter(([hadChildBefore, hasChildNow]) => hadChildBefore && !hasChildNow),\r\n      // tap(() => console.log('2dm ' + 'childDialogClosed$'))\r\n    )\r\n  }\r\n}\r\n"],"names":["NavigationEnd","filter","map","pairwise","startWith","BaseComponent","EavLogger","logThis","BaseWithChildDialogComponent","constructor","router","route","log","childDialogClosed$","events","pipe","event","snapshot","firstChild","hadChildBefore","hasChildNow"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}