"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_code-editor_code-editor_component_ts"],{7693:(W,P,l)=>{l.d(P,{X:()=>D,g:()=>u});var b=l(271),E=l(8873),T=l(8559),I=l(6443),$=l(4821);const D="admin/type/",k="admin/type/scopes";let u=(()=>{class _{constructor(g,y,M){this.http=g,this.context=y,this.dnnContext=M}apiUrl(g){return this.dnnContext.$2sxc.http.apiUrl(g)}retrieveContentType(g){return this.http.get(this.apiUrl("admin/type/get"),{params:{appId:this.context.appId.toString(),contentTypeId:g}})}retrieveContentTypes(g){return this.http.get(this.apiUrl("admin/type/list"),{params:{appId:this.context.appId.toString(),scope:g}})}getScopes(){return this.http.get(this.apiUrl(k),{params:{appId:this.context.appId.toString()}}).pipe((0,b.T)(g=>{const y=g.old;return Object.keys(y).map(X=>({name:y[X],value:X}))}))}getScopesV2(){return this.http.get(this.apiUrl(k),{params:{appId:this.context.appId.toString()}}).pipe((0,b.T)(g=>g.scopes))}save(g){return this.http.post(this.apiUrl("admin/type/save"),g,{params:{appid:this.context.appId.toString()}})}delete(g){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.context.appId.toString(),staticName:g.StaticName}})}import(g){const y=new FormData;for(const M of g)y.append("File",M);return this.http.post(this.apiUrl("admin/type/import"),y,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}createGhost(g){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:g}})}static#t=this.\u0275fac=function(y){return new(y||_)(T.KVO(I.Qq),T.KVO(E.o),T.KVO($.ob))};static#e=this.\u0275prov=T.jDH({token:_,factory:_.\u0275fac})}return _})()},2934:(W,P,l)=>{l.r(P),l.d(P,{CodeEditorComponent:()=>qt});var b=l(5797),E=l(9999),T=l(1873),I=l(1870),$=l(6647),D=l(9452),v=l(271),O=l(8537),k=l(3556),j=l(8801),F=l(3176),G=l(8172),d=l(8873),u=l(3347),_=l(4175),t=l(8559);function g(o,c){if(1&o&&(t.j41(0,"div"),t.EFF(1),t.k0s(),t.nrm(2,"br")),2&o){const e=t.XpG();t.R7$(),t.Lme('"',e.snackBarData.fileName,'" also has a code-behind file "',e.snackBarData.codeFile,'".')}}function y(o,c){if(1&o&&t.EFF(0),2&o){const e=t.XpG(2);t.SpI(' You are editing "',e.snackBarData.edition,'" edition. ')}}function M(o,c){1&o&&t.EFF(0," You may be editing an edition which is not the one you see. ")}function X(o,c){if(1&o&&(t.j41(0,"div"),t.DNE(1,y,1,1),t.EFF(2),t.DNE(3,M,1,0),t.EFF(4," See "),t.j41(5,"a",3),t.EFF(6,"docs"),t.k0s(),t.EFF(7,". "),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.vxM(1,e.snackBarData.edition?1:-1),t.R7$(),t.Lme(" There are ",e.snackBarData.otherEditions,' other editions of "',e.snackBarData.fileName,'". '),t.R7$(),t.vxM(3,e.snackBarData.edition?-1:3)}}function it(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",4),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.openCodeBehind())}),t.EFF(1," Open code-behind file "),t.k0s()}}let ot=(()=>{class o{constructor(e,n){this.snackRef=e,this.snackBarData=n}openCodeBehind(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(u.TQ),t.rXU(u.ht))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-and-edition-warnings"]],standalone:!0,features:[t.aNF],decls:5,vars:3,consts:[[1,"messages"],[1,"actions"],["mat-button","","color","primary"],["href","https://go.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.DNE(1,g,3,2)(2,X,8,4,"div"),t.k0s(),t.j41(3,"div",1),t.DNE(4,it,2,0,"button",2),t.k0s()),2&n&&(t.R7$(),t.vxM(1,i.snackBarData.codeFile?1:-1),t.R7$(),t.vxM(2,i.snackBarData.otherEditions?2:-1),t.R7$(2),t.vxM(4,i.snackBarData.codeFile?4:-1))},dependencies:[_.Hl,_.$z],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]})}return o})();const Y={Templates:"Templates",Snippets:"Snippets"};var st=l(803),at=l(2220),rt=l(3051),pt=l(6443),lt=l(4821),U=l(852);let H=(()=>{class o{constructor(e,n,i){this.http=e,this.dnnContext=n,this.translate=i}getTooltips(e){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/Code/InlineHelp"),{params:{language:e}})}getSnippets(e){return this.http.get("../ng-assets/snippets.json.js").pipe((0,v.T)(n=>{const i=this.filterAwayNotNeededSnippetsList(n.snippets,e),s=this.extractInputTypeSnippets(i),a=this.initSnippetsWithConfig(s.standardArray,e,s.inputTypeSnippets);return{list:s.standardArray,sets:a}}))}filterAwayNotNeededSnippetsList(e,n){const i=["@","["],s=p=>p.Type.indexOf("Razor")>-1?0:1,a=[];for(const p of e){const r=i.indexOf(p.set[0]);(-1===r||r===s(n))&&(r===s(n)&&(p.set=p.set.substring(1)),a.push(p))}return a}extractInputTypeSnippets(e){const n=[],i=[];for(const p of e)"\\"===p.set[0]?(p.set=p.set.substring(1),i.push(p)):n.push(p);return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(i)}}catalogInputTypeSnippets(e){const n={};for(const i of e)void 0===n[i.subset]&&(n[i.subset]=[]),n[i.subset].push(i);return n}initSnippetsWithConfig(e,n,i){const s=this.makeTree(e);return s.Content=Object.assign({},s.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(s.Content.Fields,n.TypeContent,"Content",n,i),n.TypeContentPresentation&&this.loadContentType(s.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,i),n.HasList?(s.List=Object.assign({},s.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(s.List.Fields,n.TypeList,"Header",n,i),n.TypeListPresentation&&this.loadContentType(s.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,i)):delete s.List,n.HasApp&&(s.App.Resources={},s.App.Settings={},this.loadContentType(s.App.Resources,"App-Resources","App.Resources",n,i),this.loadContentType(s.App.Settings,"App-Settings","App.Settings",n,i)),s}makeTree(e){const n={};for(const i of e){void 0===n[i.set]&&(n[i.set]={}),void 0===n[i.set][i.subset]&&(n[i.set][i.subset]=[]);const s={key:i.name,label:this.label(i.set,i.subset,i.name),snip:i.content,help:i.help||this.help(i.set,i.subset,i.name),links:this.linksList(i.links)};n[i.set][i.subset].push(s)}return n}label(e,n,i){const s=this.getHelpKey(e,n,i,".Key");let a=this.translate.instant(s);return a===s&&(a=i),a}getHelpKey(e,n,i,s){return"SourceEditorSnippets."+e+"."+n+"."+i+s}help(e,n,i){const s=this.getHelpKey(e,n,i,".Help");let a=this.translate.instant(s);return a===s&&(a=""),a}linksList(e){if(!e)return null;const n=[],i=e.split("\n");for(const s of i){const a=s.split(":");if(3===a.length){const p={name:a[0].trim(),url:a[1].trim()+":"+a[2].trim()};n.push(p)}}return 0===n.length?null:n}loadContentType(e,n,i,s,a){this.getFields(s.AppId,n).subscribe(p=>{for(const r of p){const h=r.StaticName;e[h]={key:h,label:h,snip:this.valuePlaceholder(i,h,s),help:r.Metadata.merged.Notes||" ("+r.Type.toLowerCase()+") "};const m=(0,st.A)(e[h]);this.attachSnippets(e,i,h,r.InputType,m,a)}if(p.length){const r=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"];for(let h=0;h<r.length;h++)e[r[h]]={key:r[h],label:r[h],snip:this.valuePlaceholder(i,r[h],s),help:this.translate.instant("SourceEditorSnippets.StandardFields."+r[h]+".Help")}}})}valuePlaceholder(e,n,i){return i.Type.indexOf("Razor")>-1?"@"+e+"."+n:"["+e.replace(".",":")+":"+n+"]"}getFields(e,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(rt.zZ),{params:{appid:e.toString(),staticName:n}}).pipe((0,v.T)(i=>{i=i.filter(s=>s.Type!==at.m.Empty);for(const s of i){if(!s.Metadata)continue;const a=s.Metadata;a.merged={...a.All,...a[s.Type],...a[s.InputType]}}return i}))}attachSnippets(e,n,i,s,a,p){let r=p[s];if(s.indexOf("-")){const m=s.substring(0,s.indexOf("-"));if(m){const f=p[m];f&&(r=r?r.concat(f):f)}}if(!r)return;void 0===e[i].more&&(e[i].more={});const h=e[i].more;for(let m=0;m<r.length;m++)try{h[i+"-"+r[m].name]=Object.assign({},a,{key:i+" - "+r[m].name,label:r[m].name,snip:this.localizeGenericSnippet(r[m].content,n,i),collapse:!0})}finally{}}localizeGenericSnippet(e,n,i){return e.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+i+"$2")}static#t=this.\u0275fac=function(n){return new(n||o)(t.KVO(pt.Qq),t.KVO(lt.ob),t.KVO(U.c$))};static#e=this.\u0275prov=t.jDH({token:o,factory:o.\u0275fac})}return o})();var J=l(9996),Z=l(1134);let dt=(()=>{class o{transform(e){if(null!=e)return Array.isArray(e)?e:Object.values(e)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.EJ8({name:"objectToArray",type:o,pure:!0,standalone:!0})}return o})();var V=l(316),Q=l(5060),R=l(3840),L=l(9333),A=l(4981),z=l(4601),_t=l(9914);function ht(o,c){if(1&o){const e=t.RV6();t.j41(0,"mat-icon",9),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,s=t.XpG(5);return t.Njj(s.toggleMore(i.key))}),t.EFF(1),t.k0s()}if(2&o){const e=t.XpG().$implicit,n=t.XpG(5);t.R7$(),t.SpI(" ",n.toggledMores.includes(e.key)?"more_vert":"more_horiz"," ")}}function mt(o,c){if(1&o&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.k0s()()),2&o){const e=c.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name)}}function ut(o,c){if(1&o&&(t.j41(0,"div",8),t.nrm(1,"div",10),t.nI1(2,"safeHtml"),t.Z7z(3,mt,3,2,"div",null,t.fX1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.help),t.npT),t.R7$(2),t.Dyx(e.links)}}function gt(o,c){if(1&o&&(t.j41(0,"div")(1,"a",11),t.EFF(2),t.k0s()()),2&o){const e=c.$implicit;t.R7$(),t.Y8G("href",e.url,t.B4B),t.R7$(),t.JRh(e.name)}}function ft(o,c){if(1&o&&(t.j41(0,"div",13),t.nrm(1,"div",10),t.nI1(2,"safeHtml"),t.Z7z(3,gt,3,2,"div",null,t.fX1),t.k0s()),2&o){const e=t.XpG().$implicit;t.R7$(),t.Y8G("innerHTML",t.bMT(2,1,e.help),t.npT),t.R7$(2),t.Dyx(e.links)}}function Ct(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",4)(2,"div",12),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(7);return t.Njj(s.addSnippet(i.snip))}),t.EFF(3),t.k0s(),t.j41(4,"mat-icon",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(7);return t.Njj(s.toggleInfo(i.key))}),t.EFF(5,"info"),t.k0s()(),t.DNE(6,ft,5,3,"div",13),t.k0s()}if(2&o){const e=c.$implicit,n=t.XpG(7);t.R7$(2),t.Y8G("tippy",e.snip),t.R7$(),t.SpI(" ",e.label," "),t.R7$(3),t.vxM(6,n.toggledInfos.includes(e.key)?6:-1)}}function vt(o,c){if(1&o&&(t.Z7z(0,Ct,7,3,"div",null,t.fX1),t.nI1(2,"objectToArray")),2&o){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.more))}}function xt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",3)(1,"div",4)(2,"div",5),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.addSnippet(i.snip))}),t.EFF(3),t.k0s(),t.DNE(4,ht,2,1,"mat-icon",6),t.j41(5,"mat-icon",7),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(5);return t.Njj(s.toggleInfo(i.key))}),t.EFF(6,"info"),t.k0s()(),t.DNE(7,ut,5,3,"div",8)(8,vt,3,2),t.k0s()}if(2&o){const e=c.$implicit,n=t.XpG(5);t.R7$(2),t.Y8G("tippy",e.snip),t.R7$(),t.SpI(" ",e.label," "),t.R7$(),t.vxM(4,e.more?4:-1),t.R7$(3),t.vxM(7,n.toggledInfos.includes(e.key)?7:-1),t.R7$(),t.vxM(8,n.toggledMores.includes(e.key)?8:-1)}}function yt(o,c){if(1&o&&(t.Z7z(0,xt,9,5,"div",3,t.fX1),t.nI1(2,"objectToArray")),2&o){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.value))}}function St(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",2),t.nI1(2,"translate"),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.toggleFolder(i.key))}),t.j41(3,"mat-icon"),t.EFF(4),t.k0s(),t.j41(5,"span"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.DNE(8,yt,3,2),t.k0s()}if(2&o){const e=c.$implicit,n=t.XpG(2).$implicit,i=t.XpG();t.R7$(),t.Y8G("tippy",t.bMT(2,4,"SourceEditorSnippets."+n.key+"."+e.key+".Help")),t.R7$(3),t.SpI(" ",i.toggledFolders.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(t.bMT(7,6,"SourceEditorSnippets."+n.key+"."+e.key+".Title")),t.R7$(2),t.vxM(8,i.toggledFolders.includes(e.key)?8:-1)}}function bt(o,c){if(1&o&&(t.Z7z(0,St,9,8,"div",null,t.fX1),t.nI1(2,"keyvalue")),2&o){const e=t.XpG().$implicit;t.Dyx(t.bMT(2,0,e.value))}}function Tt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",1),t.nI1(2,"translate"),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG();return t.Njj(s.toggleSection(i.key))}),t.j41(3,"mat-icon"),t.EFF(4),t.k0s(),t.j41(5,"span"),t.EFF(6),t.nI1(7,"translate"),t.k0s()(),t.DNE(8,bt,3,2),t.k0s()}if(2&o){const e=c.$implicit,n=t.XpG();t.R7$(),t.Y8G("tippy",t.bMT(2,4,"SourceEditorSnippets."+e.key+".Help")),t.R7$(3),t.SpI(" ",n.toggledSections.includes(e.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(t.bMT(7,6,"SourceEditorSnippets."+e.key+".Title")),t.R7$(2),t.vxM(8,n.toggledSections.includes(e.key)?8:-1)}}let Ft=(()=>{class o{constructor(){this.insertSnippet=new t.bkB,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}addSnippet(e){this.insertSnippet.emit(e)}toggleSection(e){A.f.toggleInArray(e,this.toggledSections)}toggleFolder(e){A.f.toggleInArray(e,this.toggledFolders)}toggleInfo(e){A.f.toggleInArray(e,this.toggledInfos)}toggleMore(e){A.f.toggleInArray(e,this.toggledMores)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},standalone:!0,features:[t.aNF],decls:4,vars:2,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],["tippyShowDelay","750",1,"collapsible-header","section",3,"click","tippy"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"click","tippy"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"click","tippy"],["tippy","Show More","tippyShowDelay","750"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],[1,"snippet-help"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"click","tippy"],[1,"snippet-help","snippet-help-more"]],template:function(n,i){1&n&&(t.j41(0,"div",0),t.Z7z(1,Tt,9,8,"div",null,t.fX1),t.nI1(3,"keyvalue"),t.k0s()),2&n&&(t.R7$(),t.Dyx(t.bMT(3,0,i.snippets)))},dependencies:[R.m_,R.An,Q.pZ,Q.r6,V.lG,U.h,U.D9,dt,L.c,z.e,_t.$],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]})}return o})();function q(o){if(!o)return[];const c=[];for(const e of o){let n=c;const i=e.Path.split("/"),s=i[i.length-1];let a="";for(let p=0;p<i.length;p++){const r=i[p];a+=p?`/${r}`:r;const h=n.find(m=>m.name===r);if(h)n=h.children;else{const m={depth:p,name:r,pathFromRoot:a,isShared:e.Shared,isFolder:r!==s,...r!==s&&{children:[]}};n.push(m),n=m.children}}}return c}let Mt=(()=>{class o{transform(e){return null==e||e.sort((n,i)=>n.isFolder<i.isFolder?1:n.isFolder>i.isFolder?-1:0),e}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275pipe=t.EJ8({name:"sortItems",type:o,pure:!0,standalone:!0})}return o})();var tt=l(436);let Et=(()=>{class o{constructor(e){this.sanitizer=e}transform(e,n){let i;return i=n?8*e:0===e?8:8*e+16,this.sanitizer.bypassSecurityTrustStyle(`padding-left: ${i}px;`)}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(tt.up,16))};static#e=this.\u0275pipe=t.EJ8({name:"depthPadding",type:o,pure:!0,standalone:!0})}return o})();var N=l(1034);const et=o=>({item:o}),Ot=o=>({active:o}),kt=o=>({"app-shared-root":o});function wt(o,c){1&o&&t.eu8(0)}function Pt(o,c){if(1&o&&t.DNE(0,wt,1,0,"ng-container",6),2&o){const e=c.$implicit;t.XpG();const n=t.sdS(6);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,et,e))}}function $t(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",8),t.nI1(1,"depthPadding"),t.bIt("click",function(){t.eBV(e);const i=t.XpG().item,s=t.XpG();return t.Njj(s.openTemplate(i.pathFromRoot,i.isShared))}),t.EFF(2),t.k0s()}if(2&o){const e=t.XpG().item,n=t.XpG();t.Aen(t.i5U(1,5,e.depth,e.isFolder)),t.Y8G("ngClass",t.eq3(8,Ot,n.isToggled(e.pathFromRoot,e.isShared)))("tippy",e.name),t.R7$(2),t.SpI(" ",e.name," ")}}function jt(o,c){1&o&&t.eu8(0)}function Rt(o,c){if(1&o&&t.DNE(0,jt,1,0,"ng-container",6),2&o){const e=c.$implicit;t.XpG(4);const n=t.sdS(6);t.Y8G("ngTemplateOutlet",n)("ngTemplateOutletContext",t.eq3(2,et,e))}}function Dt(o,c){if(1&o&&(t.Z7z(0,Rt,1,4,"ng-container",null,t.fX1),t.nI1(2,"sortItems")),2&o){const e=t.XpG(2).item;t.Dyx(t.bMT(2,0,e.children))}}function Vt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div")(1,"div",9),t.nI1(2,"depthPadding"),t.bIt("click",function(){t.eBV(e);const i=t.XpG().item,s=t.XpG();return t.Njj(s.toggleItem(i.pathFromRoot,i.isShared))}),t.j41(3,"div",10)(4,"mat-icon"),t.EFF(5),t.k0s(),t.j41(6,"span"),t.EFF(7),t.k0s()(),t.j41(8,"div",11),t.bIt("click",function(){t.eBV(e);const i=t.XpG().item,s=t.XpG();return t.Njj(s.addFile(i.pathFromRoot,i.isShared))}),t.j41(9,"mat-icon"),t.EFF(10,"add"),t.k0s()()(),t.DNE(11,Dt,3,2),t.k0s()}if(2&o){const e=t.XpG().item,n=t.XpG();t.R7$(),t.Aen(t.i5U(2,7,e.depth+1,e.isFolder)),t.Y8G("ngClass",t.eq3(10,kt,e.depth<0)),t.R7$(2),t.Y8G("tippy",e.name),t.R7$(2),t.SpI(" ",n.isToggled(e.pathFromRoot,e.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),t.R7$(2),t.JRh(e.name),t.R7$(4),t.vxM(11,n.isToggled(e.pathFromRoot,e.isShared)?11:-1)}}function At(o,c){if(1&o&&t.DNE(0,$t,3,10,"div",7)(1,Vt,12,12,"div"),2&o){const e=c.item;t.vxM(0,e.isFolder?-1:0),t.R7$(),t.vxM(1,e.isFolder?1:-1)}}let Gt=(()=>{class o{constructor(){this.openView=new t.bkB,this.createTemplate=new t.bkB,this.toggledItemsApp=[],this.toggledItemsShared=[]}ngOnChanges(e){if(null!=e.templates&&(this.tree=function It(o){return[{depth:-1,name:"App Files",pathFromRoot:"",isShared:!1,isFolder:!0,children:q(o.filter(e=>!e.Shared))},{depth:-1,name:"Shared App Files",pathFromRoot:"",isShared:!0,isFolder:!0,children:q(o.filter(e=>e.Shared))}]}(this.templates)),null!=e.view){const n=e.view?.previousValue;n&&this.toggleItem(n.FileName,n.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}isToggled(e,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(e)}openTemplate(e,n){this.openView.emit({key:e,shared:n})}toggleItem(e,n){A.f.toggleInArray(e,n?this.toggledItemsShared:this.toggledItemsApp)}addFile(e,n){this.createTemplate.emit({folder:e,isShared:n})}showFileInTree(e,n){if(null==e)return;const i=n?this.toggledItemsShared:this.toggledItemsApp;if(i.includes(e))return;const s=["",...e.split("/")];let a="";for(const p of s)a=a?`${a}/${p}`:p,!i.includes(a)&&this.toggleItem(a,n)}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},standalone:!0,features:[t.OA$,t.aNF],decls:19,vars:3,consts:[["fileOrFolder",""],["menu","matMenu"],[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file","tippyPlacement","left",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["tippyShowDelay","750",1,"file",3,"style","ngClass","tippy"],["tippyShowDelay","750",1,"file",3,"click","ngClass","tippy"],[1,"folder-name-wrapper",3,"click","ngClass"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(n,i){if(1&n){const s=t.RV6();t.j41(0,"div",2)(1,"div"),t.Z7z(2,Pt,1,4,"ng-container",null,t.fX1),t.nI1(4,"sortItems"),t.DNE(5,At,2,2,"ng-template",null,0,t.C5r),t.k0s(),t.j41(7,"div",3)(8,"button",4)(9,"mat-icon"),t.EFF(10,"add"),t.k0s()(),t.j41(11,"mat-menu",null,1)(13,"button",5),t.bIt("click",function(){return t.eBV(s),t.Njj(i.addFile("",!1))}),t.j41(14,"span"),t.EFF(15,"App"),t.k0s()(),t.j41(16,"button",5),t.bIt("click",function(){return t.eBV(s),t.Njj(i.addFile("",!0))}),t.j41(17,"span"),t.EFF(18,"Shared (global)"),t.k0s()()()()()}if(2&n){const s=t.sdS(12);t.R7$(2),t.Dyx(t.bMT(4,1,i.tree)),t.R7$(6),t.Y8G("matMenuTriggerFor",s)}},dependencies:[V.T3,V.YU,R.m_,R.An,_.Hl,_.iY,N.Cn,N.kk,N.fb,N.Cp,Et,Mt,L.c,z.e],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]})}return o})();var x=l(3826),Xt=l(5699),Nt=l(9184),Bt=l(7941);const Ut=o=>({"sxc-dark":o}),nt=o=>({active:o}),Lt=(o,c,e)=>({active:o,modified:c,loading:e});function zt(o,c){1&o&&(t.j41(0,"mat-icon",13),t.EFF(1,"share"),t.k0s())}function Kt(o,c){1&o&&(t.j41(0,"mat-icon",16),t.EFF(1,"circle"),t.k0s())}function Wt(o,c){1&o&&t.nrm(0,"mat-spinner",17)}function Yt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",11),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.openView(i.viewKey))}),t.j41(1,"div",12),t.DNE(2,zt,2,0,"mat-icon",13),t.j41(3,"span",14),t.EFF(4),t.k0s()(),t.j41(5,"div",15),t.DNE(6,Kt,2,0,"mat-icon",16)(7,Wt,1,0,"mat-spinner",17),t.j41(8,"mat-icon",18),t.bIt("click",function(){const i=t.eBV(e).$implicit,s=t.XpG(3);return t.Njj(s.closeEditor(i.viewKey))}),t.EFF(9,"close"),t.k0s()()()}if(2&o){const e=c.$implicit;t.Y8G("ngClass",t.sMw(6,Lt,e.isActive,e.isModified,e.isLoading)),t.R7$(),t.Y8G("tippy",e.label),t.R7$(),t.vxM(2,e.viewKey.shared?2:-1),t.R7$(2),t.JRh(e.label),t.R7$(2),t.vxM(6,e.isModified?6:-1),t.R7$(),t.vxM(7,e.isLoading?7:-1)}}function Ht(o,c){if(1&o&&(t.j41(0,"div",7),t.Z7z(1,Yt,10,10,"div",10,t.fX1),t.k0s()),2&o){const e=t.XpG();t.R7$(),t.Dyx(e.tabs)}}function Jt(o,c){if(1&o){const e=t.RV6();t.j41(0,"app-monaco-editor",19),t.bIt("valueChanged",function(i){t.eBV(e);const s=t.XpG(),a=t.XpG();return t.Njj(a.codeChanged(i,s.viewKey))}),t.k0s()}if(2&o){const e=t.XpG(),n=t.XpG();t.Y8G("filename",e.view.FileName)("value",e.view.Code)("options",n.monacoOptions)("snippets",e.editorSnipps)("tooltips",e.tooltips)("autoFocus",!0)}}function Zt(o,c){if(1&o){const e=t.RV6();t.j41(0,"button",20),t.bIt("click",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.save())}),t.j41(1,"mat-icon"),t.EFF(2,"done"),t.k0s()()}}function Qt(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleExplorer(i.Explorers.Templates))}),t.j41(3,"mat-icon"),t.EFF(4,"file_copy"),t.k0s()(),t.j41(5,"div",3),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.toggleExplorer(i.Explorers.Snippets))}),t.j41(6,"mat-icon"),t.EFF(7,"code"),t.k0s()()(),t.j41(8,"app-code-templates",4),t.bIt("openView",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.openView(i))})("createTemplate",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.createTemplate(i))}),t.k0s(),t.j41(9,"app-code-snippets",5),t.bIt("insertSnippet",function(i){t.eBV(e);const s=t.XpG();return t.Njj(s.insertSnippet(i))}),t.k0s(),t.j41(10,"div",6),t.DNE(11,Ht,3,0,"div",7)(12,Jt,1,6,"app-monaco-editor",8),t.k0s(),t.DNE(13,Zt,3,0,"button",9),t.k0s()}if(2&o){const e=c,n=t.XpG();t.Y8G("ngClass",t.eq3(11,Ut,"2sxc-dark"===n.monacoOptions.theme)),t.R7$(2),t.Y8G("ngClass",t.eq3(13,nt,n.activeExplorer===n.Explorers.Templates)),t.R7$(3),t.Y8G("ngClass",t.eq3(15,nt,n.activeExplorer===n.Explorers.Snippets)),t.R7$(3),t.Y8G("hidden",n.activeExplorer!==n.Explorers.Templates)("view",e.view)("templates",e.templates),t.R7$(),t.Y8G("hidden",n.activeExplorer!==n.Explorers.Snippets)("snippets",e.explorerSnipps),t.R7$(2),t.vxM(11,e.tabs.length>0?11:-1),t.R7$(),t.vxM(12,e.view?12:-1),t.R7$(),t.vxM(13,e.activeView?13:-1)}}let qt=(()=>{class o extends F.${constructor(e,n,i,s,a,p,r,h,m){super(),this.context=e,this.route=n,this.snackBar=i,this.sourceService=s,this.snippetsService=a,this.zone=p,this.titleService=r,this.dialog=h,this.viewContainerRef=m,this.Explorers=Y,this.activeExplorer=Y.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2,fixedOverflowWidgets:!0},this.context.init(this.route);const f=JSON.parse(sessionStorage.getItem(G.Ul)),S="true"===sessionStorage.getItem(G.P3);f.forEach(C=>{C.Path.startsWith("/")&&(C.Path=C.Path.substring(1)),C.IsShared??=S}),this.urlItems=f}ngOnInit(){this.templates$=new b.t([]);const e=this.urlItems.map(n=>({key:n.EntityId?.toString()??n.Path,shared:n.IsShared}));this.activeView$=new b.t(e[0]),this.openViews$=new b.t(e),this.viewInfos$=new b.t([]),this.attachListeners(),this.sourceService.getAll().subscribe(n=>{this.templates$.next(n)}),this.subscriptions.add((0,E.z)([this.templates$,this.openViews$]).subscribe(([n,i])=>{if(0===n.length)return;let s=this.viewInfos$.value;const a=i.filter(p=>!s.some(r=>x.a.objectsEqual(r.viewKey,p)));0!==a.length&&((0,T.p)(a.map(p=>{const r={viewKey:p};s=[...s,r];const h=this.sourceService.get(p.key,p.shared,this.urlItems).pipe((0,I.u)()),m=h.pipe((0,$.n)(S=>this.snippetsService.getSnippets(S))),f=h.pipe((0,$.n)(S=>this.snippetsService.getTooltips(S.Extension.substring(1))));return(0,T.p)([(0,D.of)(p),h,m,f])})).subscribe(p=>{let r=this.viewInfos$.value;p.forEach(([h,m,f,S])=>{const C=r.findIndex(w=>x.a.objectsEqual(w.viewKey,h));if(C<0)return;const B={viewKey:h,view:m,explorerSnipps:f.sets,editorSnipps:f.list,tooltips:S,savedCode:m.Code};r=[...r.slice(0,C),B,...r.slice(C+1)],this.showCodeAndEditionWarnings(h,m,n)}),this.viewInfos$.next(r)}),this.viewInfos$.next(s))})),this.subscriptions.add((0,E.z)([this.activeView$,this.viewInfos$]).subscribe(([n,i])=>{const s=i.find(h=>x.a.objectsEqual(h.viewKey,n)),a="Code Editor",p=null==s?a:`${s.view?.FileName} - ${a}`;p!==this.titleService.getTitle()&&this.titleService.setTitle(p)})),this.viewModel$=(0,E.z)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,v.T)(([n,i,s,a])=>{const p=s.map(m=>{const f=a.find(C=>x.a.objectsEqual(C.viewKey,m));return{viewKey:m,label:f?.view?.FileName??m.key,isActive:x.a.objectsEqual(m,i),isModified:f?.view?.Code!==f?.savedCode,isLoading:null==f?.view}}),r=a.find(m=>x.a.objectsEqual(m.viewKey,i));return{activeView:i,tabs:p,viewKey:r?.viewKey,view:r?.view,templates:n,explorerSnipps:r?.explorerSnipps,editorSnipps:r?.editorSnipps,tooltips:r?.tooltips}}))}ngOnDestroy(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),super.ngOnDestroy()}toggleExplorer(e){this.activeExplorer=this.activeExplorer!==e?e:null}createTemplate(e){const n={folder:e.folder,global:e.isShared,purpose:"api"===e.folder||e.folder?.startsWith("api/")?"Api":void 0};this.dialog.open(k.g,{autoFocus:!1,data:n,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(s=>{s&&this.sourceService.create(s.name,e.isShared,s.templateKey).subscribe(()=>{this.sourceService.getAll().subscribe(a=>{this.templates$.next(a)})})})}insertSnippet(e){this.monacoEditorRef?.insertSnippet(e)}codeChanged(e,n){let i=this.viewInfos$.value;const s=i.findIndex(r=>x.a.objectsEqual(r.viewKey,n)),a=i[s],p={...a,view:{...a.view,Code:e}};i=[...i.slice(0,s),p,...i.slice(s+1)],this.viewInfos$.next(i)}openView(e){e=this.viewInfos$.value.find(s=>!x.a.objectsEqual(s.viewKey,e)&&s.view?.FileName===e.key&&s.view?.IsShared===e.shared)?.viewKey??e,x.a.objectsEqual(this.activeView$.value,e)||this.activeView$.next(e);const i=this.openViews$.value;if(!i.some(s=>x.a.objectsEqual(s,e))){const s=[...i,e];this.openViews$.next(s)}}closeEditor(e){const n=this.openViews$.value,i=n.filter(a=>!x.a.objectsEqual(a,e)),s=this.activeView$.value;if(x.a.objectsEqual(s,e)){const a=n[n.findIndex(p=>x.a.objectsEqual(p,s))-1]??i[0];this.activeView$.next(a)}this.openViews$.next(i)}save(e){e??=this.activeView$.value;const n=this.viewInfos$.value.find(s=>x.a.objectsEqual(s.viewKey,e));if(null==n?.view)return;this.snackBar.open("Saving...");const i=n.view.Code;this.sourceService.save(e.key,e.shared,n.view,this.urlItems).subscribe({next:s=>{if(!s)return void this.snackBar.open("Failed",null,{duration:2e3});let a=[...this.viewInfos$.value];const p=a.findIndex(m=>x.a.objectsEqual(m.viewKey,e));if(p<0)return;const h={...a[p],savedCode:i};a=[...a.slice(0,p),h,...a.slice(p+1)],this.viewInfos$.next(a),this.snackBar.open("Saved",null,{duration:2e3})},error:()=>{this.snackBar.open("Failed",null,{duration:2e3})}})}showCodeAndEditionWarnings(e,n,i){const s=n.FileName,a=s.indexOf("/")>-1?s.lastIndexOf("/")+1:0,p=0===a?"":s.substring(0,a),r=s.substring(a),m=r.substring(0,r.length-n.Extension.length)+".code"+n.Extension,f=i.find(C=>C.Path===p+m&&C.Shared===n.IsShared),S=i.filter(C=>C.Path.endsWith(r)&&C.Shared===n.IsShared).length-1;if(f||S){const C={fileName:r,codeFile:f?.Path,edition:this.urlItems.find(w=>w.EntityId?.toString()===e.key&&w.IsShared===n.IsShared&&w.Path===n.FileName)?.Edition,otherEditions:S,openCodeBehind:!1},B=this.snackBar.openFromComponent(ot,{data:C,duration:1e4});B.onAction().subscribe(()=>{B.containerInstance.snackBarConfig.data.openCodeBehind&&this.openView({key:f?.Path,shared:f?.Shared})})}}attachListeners(){this.zone.runOutsideAngular(()=>{this.subscriptions.add((0,O.R)(window,"beforeunload").subscribe(e=>{this.viewInfos$.value.some(i=>null!=i.view&&i.view.Code!==i.savedCode)&&(e.preventDefault(),e.returnValue="")})),this.subscriptions.add((0,O.R)(window,"keydown").subscribe(e=>{83===e.keyCode&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),this.zone.run(()=>{this.save()}))}))})}static#t=this.\u0275fac=function(n){return new(n||o)(t.rXU(d.o),t.rXU(Nt.nX),t.rXU(u.UG),t.rXU(J.F),t.rXU(H),t.rXU(t.SKi),t.rXU(tt.hE),t.rXU(Bt.bZ),t.rXU(t.c1b))};static#e=this.\u0275cmp=t.VBU({type:o,selectors:[["app-code-editor"]],viewQuery:function(n,i){if(1&n&&t.GBs(j.K,5),2&n){let s;t.mGM(s=t.lsd())&&(i.monacoEditorRef=s.first)}},standalone:!0,features:[t.Jv_([J.F,H]),t.Vt3,t.aNF],decls:2,vars:3,consts:[["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"click","ngClass"],["tippy","Snippets",1,"button",3,"click","ngClass"],[3,"openView","createTemplate","hidden","view","templates"],[3,"insertSnippet","hidden","snippets"],[1,"editor-group"],[1,"tabs-container","fancy-scrollbar-dark"],[3,"filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S"],[1,"tab",3,"ngClass"],[1,"tab",3,"click","ngClass"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],[1,"icon-shared"],[1,"tab-label"],[1,"tab-actions-container"],["fontSet","material-icons",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[3,"valueChanged","filename","value","options","snippets","tooltips","autoFocus"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(n,i){if(1&n&&(t.DNE(0,Qt,14,17,"div",0),t.nI1(1,"async")),2&n){let s;t.vxM(0,(s=t.bMT(1,1,i.viewModel$))?0:-1,s)}},dependencies:[V.YU,R.m_,R.An,Gt,Ft,Z.D6,Z.LG,j.K,_.Hl,_.Sr,V.Jj,L.c,z.e,Xt.V],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid rgb(37,37,38);background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-mdc-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]})}return o})()},3051:(W,P,l)=>{l.d(P,{h6:()=>j,zZ:()=>O});var b=l(271),E=l(7693),T=l(8873),I=l(8559),$=l(6443),D=l(4821);const v="admin/field/",O="admin/field/all",k="admin/field/GetSharedFields";let j=(()=>{class F{constructor(d,u,_){this.http=d,this.context=u,this.dnnContext=_}apiUrl(d){return this.dnnContext.$2sxc.http.apiUrl(d)}typeListRetrieve(){return this.http.get(this.apiUrl(v+"DataTypes"),{params:{appid:this.context.appId.toString()}})}getInputTypesList(){return this.http.get(this.apiUrl(v+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,b.T)(d=>d.map(_=>({dataType:_.Type.substring(0,_.Type.indexOf("-")),inputType:_.Type,label:_.Label,description:_.Description,isDefault:_.IsDefault,isObsolete:_.IsObsolete,isRecommended:_.IsRecommended,obsoleteMessage:_.ObsoleteMessage,icon:_.IsDefault?"star":_.IsRecommended?"star_outline":null}))))}getReservedNames(){return this.http.get(this.apiUrl(v+"ReservedNames"))}getFields(d){return this.http.get(this.apiUrl(O),{params:{appid:this.context.appId.toString(),staticName:d}}).pipe((0,b.T)(u=>{if(u)for(const _ of u){if(!_.Metadata)continue;const t=_.Metadata;t.merged={...t.All,...t[_.Type],...t[_.InputType]}}return u}))}getShareableFields(){return this.http.get(this.apiUrl(k),{params:{appid:this.context.appId.toString()}})}getShareableFieldsFor(d){return this.http.get(this.apiUrl(k),{params:{appid:this.context.appId.toString(),attributeId:d.toString()}})}addInheritedField(d,u,_,t){return this.http.post(this.apiUrl(v+"AddInheritedField"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:d.toString(),SourceType:u,SourceField:_,name:t}})}share(d,u=!0){return this.http.post(this.apiUrl(v+"Share"),null,{params:{appid:this.context.appId.toString(),attributeId:d.toString(),share:u}})}inherit(d,u){return this.http.post(this.apiUrl(v+"Inherit"),null,{params:{appid:this.context.appId.toString(),attributeId:d.toString(),inheritMetadataOf:u}})}reOrder(d,u){return this.http.post(this.apiUrl(v+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:u.Id.toString(),order:JSON.stringify(d)}})}setTitle(d,u){return this.http.post(this.apiUrl(E.X+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:u.Id.toString(),attributeId:d.Id.toString()}})}rename(d,u,_){return this.http.post(this.apiUrl(v+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:u.toString(),attributeId:d.toString(),newName:_}})}delete(d,u){if(d.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(v+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:u.Id.toString(),attributeId:d.Id.toString()}})}add(d,u){return this.http.post(this.apiUrl(v+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:u.toString(),Id:d.Id.toString(),Type:d.Type,InputType:d.InputType,StaticName:d.StaticName,IsTitle:d.IsTitle.toString(),Index:d.SortOrder.toString()}})}updateInputType(d,u,_){return this.http.post(this.apiUrl(v+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:d.toString(),field:u,inputType:_}})}static#t=this.\u0275fac=function(u){return new(u||F)(I.KVO($.Qq),I.KVO(T.o),I.KVO(D.ob))};static#e=this.\u0275prov=I.jDH({token:F,factory:F.\u0275fac})}return F})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.99.00/dist/ng-edit/projects_eav-ui_src_app_code-editor_code-editor_component_ts.031446204016206b.js.map