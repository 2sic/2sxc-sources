"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-b7baef"],{7574:(I,u,n)=>{n.r(u),n.d(u,{CreateInheritedAppComponent:()=>R});var a=n(4456),c=n(7941),e=n(5797),E=n(9999),h=n(271),M=n(3583),O=n(316),C=n(4175),g=n(5060),d=n(5175),D=n(5944),i=n(9184),l=n(3758),_=n(5437),t=n(8559),m=n(3347);function f(s,v){if(1&s&&(t.j41(0,"mat-option",7),t.EFF(1),t.k0s()),2&s){const o=v.$implicit;t.Y8G("value",o.Id),t.R7$(),t.SpI(" ",o.Name," ")}}function A(s,v){1&s&&(t.j41(0,"app-field-hint",8),t.EFF(1," Required "),t.k0s()),2&s&&t.Y8G("isError",!0)}function T(s,v){if(1&s){const o=t.RV6();t.j41(0,"div",0)(1,"div",1)(2,"div",2),t.EFF(3,"Create inherited App"),t.k0s()(),t.j41(4,"div",3),t.nrm(5,"router-outlet"),t.j41(6,"p"),t.EFF(7," Create an App which inherits everything (data, views, queries) from a global App. Only Apps which were specifically marked for this will be listed here, and these apps must already have been loaded into Cache. If you don't see the App you expect, make sure that has happened. "),t.k0s(),t.j41(8,"form",4)(9,"mat-form-field",5)(10,"mat-label"),t.EFF(11,"Inherit App"),t.k0s(),t.j41(12,"mat-select",6),t.Z7z(13,f,2,2,"mat-option",7,t.fX1),t.k0s()(),t.DNE(15,A,2,1,"app-field-hint",8),t.k0s()(),t.j41(16,"mat-dialog-actions",9)(17,"button",10),t.bIt("click",function(){t.eBV(o);const p=t.XpG();return t.Njj(p.closeDialog())}),t.EFF(18," Cancel "),t.k0s(),t.j41(19,"button",11),t.bIt("click",function(){t.eBV(o);const p=t.XpG();return t.Njj(p.create())}),t.EFF(20," Create "),t.k0s()()()}if(2&s){const o=v,r=t.XpG();t.R7$(8),t.Y8G("formGroup",r.form),t.R7$(4),t.Y8G("placeholder",void 0===o.inheritableApps?"Loading...":null===o.inheritableApps||0===o.inheritableApps.length?"No inheritable apps found":""),t.R7$(),t.Dyx(o.inheritableApps),t.R7$(2),t.vxM(15,r.form.controls.inheritId.touched&&null!=r.form.controls.inheritId.errors&&r.form.controls.inheritId.errors.required?15:-1),t.R7$(2),t.Y8G("disabled",o.loading),t.R7$(2),t.Y8G("disabled",o.loading||!r.form.valid)}}let R=(()=>{class s{constructor(o,r){this.dialogRef=o,this.snackBar=r,this.hostClass="dialog-component",this.appsListService=(0,_.d)(M.U),this.form=this.buildForm(),this.loading$=new e.t(!1),this.inheritableApps$=new e.t(void 0),this.viewModel$=(0,E.z)([this.loading$,this.inheritableApps$]).pipe((0,h.T)(([p,P])=>({loading:p,inheritableApps:P})))}ngOnInit(){this.fetchInheritedApps()}ngOnDestroy(){this.loading$.complete(),this.inheritableApps$.complete()}closeDialog(){this.dialogRef.close()}create(){this.form.disable(),this.loading$.next(!0);const o=this.form.controls.inheritId.value,r=this.inheritableApps$.value.find(p=>p.Id===o).Name;this.snackBar.open("Creating inherited app..."),this.appsListService.create(r,o).subscribe({error:()=>{this.form.enable(),this.loading$.next(!1),this.snackBar.open("Failed to create inherited app. Please check console for more information",void 0,{duration:3e3})},next:()=>{this.form.enable(),this.snackBar.open("Created inherited app",void 0,{duration:2e3}),this.closeDialog()}})}fetchInheritedApps(){this.appsListService.getInheritable().subscribe({error:()=>{this.inheritableApps$.next(null)},next:o=>{this.inheritableApps$.next(o)}})}buildForm(){return new a.J3({inheritId:new a.hs(null,[a.k0.required])})}static#t=this.\u0275fac=function(r){return new(r||s)(t.rXU(c.CP),t.rXU(m.UG))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-create-inherited-app"]],hostVars:1,hostBindings:function(r,p){2&r&&t.Mr5("className",p.hostClass)},standalone:!0,features:[t.aNF],decls:2,vars:3,consts:[[1,"eav-dialog"],[1,"eav-dialog-header"],[1,"eav-dialog-header__title"],[1,"eav-dialog-content"],[3,"formGroup"],["color","accent",1,"eav-mat-form-field"],["formControlName","inheritId",3,"placeholder"],[3,"value"],[3,"isError"],["align","end"],["type","button","mat-raised-button","",3,"click","disabled"],["type","button","mat-raised-button","","color","accent",3,"click","disabled"]],template:function(r,p){if(1&r&&(t.DNE(0,T,21,5,"div",0),t.nI1(1,"async")),2&r){let P;t.vxM(0,(P=t.bMT(1,1,p.viewModel$))?0:-1,P)}},dependencies:[i.n3,a.YN,a.qT,a.BC,a.cb,a.X1,a.j4,a.JD,D.RG,D.rl,D.nJ,d.Ve,d.VO,g.wT,g.Sy,c.E7,C.Hl,C.$z,O.Jj,l.F]})}return s})()},5437:(I,u,n)=>{n.d(u,{d:()=>c});var a=n(8559);function c(e,E){return E??=(0,a.WQX)(a.zZn),a.zZn.create({providers:[e],parent:E}).get(e,void 0,{self:!0})}},1772:(I,u,n)=>{n.d(u,{I:()=>g,u:()=>C});var a=n(6647),c=n(9452),e=n(3550),E=n(8873),h=n(8559),M=n(6443),O=n(4821);const C="admin/app/";let g=(()=>{class d{constructor(i,l,_){this.http=i,this.context=l,this.dnnContext=_}importApp(i,l,_=!1){const t=new FormData;return t.append("File",i),t.append("Name",l??""),this.http.post(this.dnnContext.$2sxc.http.apiUrl(C+"Import"),t,{params:{zoneId:this.context.zoneId.toString()}}).pipe((0,a.n)(m=>{if(_&&m.Messages[0]?.MessageType===e.G1.Warning){const f=prompt(m.Messages[0].Text+" Would you like to install it using another folder name?");if(f)return this.importApp(i,f,!0)}return(0,c.of)(m)}))}static#t=this.\u0275fac=function(l){return new(l||d)(h.KVO(M.Qq),h.KVO(E.o),h.KVO(O.ob))};static#e=this.\u0275prov=h.jDH({token:d,factory:d.\u0275fac})}return d})()},3758:(I,u,n)=>{n.d(u,{F:()=>D});var a=n(316),c=n(5944),e=n(8559);const E=["*"],h=i=>({"hint-box__short":i});function M(i,l){1&i&&e.eu8(0)}function O(i,l){if(1&i&&(e.j41(0,"mat-hint"),e.DNE(1,M,1,0,"ng-container",2),e.k0s()),2&i){e.XpG();const _=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",_)}}function C(i,l){1&i&&e.eu8(0)}function g(i,l){if(1&i&&(e.j41(0,"mat-error"),e.DNE(1,C,1,0,"ng-container",2),e.k0s()),2&i){e.XpG();const _=e.sdS(4);e.R7$(),e.Y8G("ngTemplateOutlet",_)}}function d(i,l){1&i&&e.SdG(0)}let D=(()=>{class i{constructor(){this.isError=!1,this.isShort=!0}toggleIsShort(){this.isShort=!this.isShort}static#t=this.\u0275fac=function(t){return new(t||i)};static#e=this.\u0275cmp=e.VBU({type:i,selectors:[["app-field-hint"]],inputs:{isError:"isError"},standalone:!0,features:[e.aNF],ngContentSelectors:E,decls:5,vars:4,consts:[["content",""],[1,"hint-box",3,"click","ngClass"],[4,"ngTemplateOutlet"]],template:function(t,m){if(1&t){const f=e.RV6();e.NAR(),e.j41(0,"div",1),e.bIt("click",function(){return e.eBV(f),e.Njj(m.toggleIsShort())}),e.DNE(1,O,2,1)(2,g,2,1),e.k0s(),e.DNE(3,d,1,0,"ng-template",null,0,e.C5r)}if(2&t){let f;e.Y8G("ngClass",e.eq3(2,h,m.isShort)),e.R7$(),e.vxM(1,!1===(f=m.isError)?1:!0===f?2:-1)}},dependencies:[c.RG,c.MV,c.TL,a.YU,a.T3],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-mdc-form-field-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]})}return i})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/17.99.00/dist/ng-edit/projects_eav-ui_src_app_apps-management_create-inherited-app_create-inherited-app_component_t-b7baef.ad5fa0fc62d32910.js.map