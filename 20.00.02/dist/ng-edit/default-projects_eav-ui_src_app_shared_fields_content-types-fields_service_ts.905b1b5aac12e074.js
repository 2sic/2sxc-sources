"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts"],{320:(R,m,t)=>{t.d(m,{t:()=>l});var s=t(89204),c=t(46443),d=t(71772),p=t(24467),u=t(99293),o=t(44444);let l=(()=>{class r extends p.B{getAppInfo(){return(0,c.fx)(()=>({url:this.apiUrl("admin/app/Statistics"),params:{appid:this.appId,zoneId:this.zoneId}}))}exportAppUrl(){return`${this.apiUrl(`${d.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl(E){var h=this;return(0,s.A)(function*({includeContentGroups:f,resetAppGuid:n,withFiles:O}){return h.getStatusPromise("admin/app/SaveData",{params:{appid:h.appId,zoneId:h.zoneId,includeContentGroups:f.toString(),resetAppGuid:n.toString(),withPortalFiles:O.toString()}})}).apply(this,arguments)}static#t=this.\u0275fac=(()=>{let E;return function(f){return(E||(E=u.xGo(r)))(f||r)}})();static#e=this.\u0275prov=o.jDH({token:r,factory:r.\u0275fac})}return r})()},1726:(R,m,t)=>{t.d(m,{O:()=>s});const s={Boolean:"Boolean",Custom:"Custom",DateTime:"DateTime",Empty:"Empty",Entity:"Entity",Hyperlink:"Hyperlink",Number:"Number",String:"String"}},2570:(R,m,t)=>{t.d(m,{y:()=>E});var s=t(89204),c=t(46443),d=t(24467),p=t(99293),u=t(44444);const o="admin/view/all";let E=(()=>{class h extends d.B{getAllOnce(){return(0,c.fx)(()=>({url:this.apiUrl(o),params:{appId:this.appId}}))}getAllLive(n){return(0,c.fx)(()=>(n(),{url:this.apiUrl(o),params:{appId:this.appId}}))}delete(n){var O=this;return(0,s.A)(function*(){return O.getStatusPromise("admin/view/delete",{params:{appId:O.appId,Id:n.toString()}})})()}import(n){const O=new FormData;return O.append("File",n),this.http.post(this.apiUrl("admin/view/import"),O,{params:{appId:this.appId,zoneId:this.zoneId}})}export(n){const O=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+n;window.open(O,"_blank","")}getPolymorphismLive(n){return(0,c.fx)(()=>(n(),{url:this.apiUrl("admin/view/polymorphism"),params:{appId:this.appId}}))}getUsage(n){return this.newHttpResource(()=>({url:this.apiUrl("admin/view/usage"),params:{appId:this.appId,guid:n}}))}static#t=this.\u0275fac=(()=>{let n;return function(a){return(n||(n=p.xGo(h)))(a||h)}})();static#e=this.\u0275prov=u.jDH({token:h,factory:h.\u0275fac})}return h})()},9234:(R,m,t)=>{t.d(m,{Gg:()=>h,Tr:()=>f,gb:()=>E});var s=t(51567),c=t(36647),d=t(86301),p=t(70271),u=t(12938),o=t(34435),i=t(24467),g=t(54839),l=t(99293),r=t(44444);const I={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},E="admin/entity/",h="admin/entity/list";let f=(()=>{class n extends i.B{constructor(){super(...arguments),this.log=(0,o.Tq)({EntityService:n},I),this.queryService=(0,u.d)(g.c)}getEntities$(a){return this.log.fnIf("getEntities"),a.pipe((0,s.p)(y=>null!=y),(0,c.n)(y=>this.getAvailableEntities(y.contentTypeName).pipe((0,d.t)(1))))}getAvailableEntities(a,y){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[a],itemIds:y,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,p.T)(T=>T.Default))}delete(a,y,M,T,P,L){return this.log.fnIf("delete",{appId:a,contentType:y,entityId:M,force:T,parentId:P,parent}),this.http.delete(this.apiUrl(E+"delete"),{params:{contentType:y,id:M.toString(),appId:a,force:T.toString(),...P&&{parentId:P.toString()},...P&&L&&{parentField:L}}})}static#t=this.\u0275fac=(()=>{let a;return function(M){return(a||(a=l.xGo(n)))(M||n)}})();static#e=this.\u0275prov=r.jDH({token:n,factory:n.\u0275fac})}return n})()},14007:(R,m,t)=>{t.d(m,{D:()=>d,y:()=>c});var s=t(1726);function c(p){return{[s.O.Boolean]:"toggle_on",[s.O.Custom]:"extension",[s.O.DateTime]:"today",[s.O.Empty]:"crop_free",[s.O.Entity]:"share",[s.O.Hyperlink]:"link",[s.O.Number]:"dialpad",[s.O.String]:"text_fields"}[p]??"device_unknown"}function d(p){return{[s.O.Boolean]:"Boolean (yes/no)",[s.O.Custom]:"Custom - ui-tools or custom types",[s.O.DateTime]:"Date and/or time",[s.O.Empty]:"Empty - for form-titles etc.",[s.O.Entity]:"Entity (other content-items)",[s.O.Hyperlink]:"Link / file reference",[s.O.Number]:"Number",[s.O.String]:"Text / string"}[p]??"device_unknown"}},17693:(R,m,t)=>{t.d(m,{X:()=>o,g:()=>f});var s=t(46443),c=t(64173),d=t(96474),p=t(99293),u=t(44444);const o="admin/type/",i="admin/type/get",g="admin/type/list",l="admin/type/scopes";let f=(()=>{class n extends d.D{retrieveContentType(a){return this.getHttpApiUrl(i,{params:{appId:this.appId,contentTypeId:a}})}getType(a){return(0,s.fx)(()=>({url:this.apiUrl(i),params:{appId:this.appId,contentTypeId:a}}))}getTypes(a){return(0,s.fx)(()=>({url:this.apiUrl(g),params:{appId:this.appId,scope:a()}}),{defaultValue:[]})}retrieveContentTypesPromise(a){return this.fetchPromise(g,{params:{appId:this.appId,scope:a}})}getScopesPromise(){return this.fetchPromise(l,{params:{appId:this.appId}}).then(a=>{const y=a.old;return Object.keys(y).map(T=>({name:y[T],value:T}))})}getScopesSig(){const a=(0,s.fx)(()=>({url:this.apiUrl(l),params:{appid:this.appId}}));return(0,c.EW)(()=>{const T=(0,a.value)();if(!T||!T.old)return[];const P=T.old;return Object.keys(P).map(L=>({name:P[L],value:L}))})}getScopesV2Promise(){return this.fetchPromise(l,{params:{appId:this.appId}}).then(a=>a.scopes)}save(a){return this.http.post(this.apiUrl("admin/type/save"),a,{params:{appid:this.appId}})}delete(a){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:a.NameId}})}import(a){const y=new FormData;for(const M of a)y.append("File",M);return this.http.post(this.apiUrl("admin/type/import"),y,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(a){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceNameId:a}})}static#t=this.\u0275fac=(()=>{let a;return function(M){return(a||(a=p.xGo(n)))(M||n)}})();static#e=this.\u0275prov=u.jDH({token:n,factory:n.\u0275fac})}return n})()},54839:(R,m,t)=>{t.d(m,{c:()=>o});var s=t(34435),c=t(68873),d=t(44444),p=t(47215);const u={all:!1,getAvailableEntities:!1,getEntities:!1};let o=(()=>{class i{constructor(l,r){this.http=l,this.context=r,this.log=(0,s.Tq)({QueryService:i},u)}getFromQuery(l,r,I,E){this.log.fnIf("getAvailableEntities",{queryUrl:l,params:r,fields:I,entitiesFilter:E});const h=!!r,a=(((r?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(h?`&${r}`:"")+"&$select="+(I??"")).substring(1);return this.http.post(`app/auto/query/${l}?${a}`,{Guids:E})}getEntities({contentTypes:l,itemIds:r,fields:I,log:E}){this.log.fnIf("getEntities",{log:E,contentTypes:l,itemIds:r,fields:I});const f=("&typeNames="+(l?.join(",")??"")+`&appId=${this.context.appId}&$select=`+(I??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${f}`,{Guids:r})}static#t=this.\u0275fac=function(r){return new(r||i)(d.KVO(p.Qq),d.KVO(c.o))};static#e=this.\u0275prov=d.jDH({token:i,factory:i.\u0275fac})}return i})()},58624:(R,m,t)=>{t.d(m,{Q:()=>u,S:()=>o});var s=t(71772),c=t(24467),d=t(99293),p=t(44444);const u="admin/appParts/";let o=(()=>{class i extends c.B{importAppParts(l){const r=new FormData;return r.append("File",l),this.http.post(this.apiUrl(u+"Import"),r,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(l){return this.http.post(this.apiUrl(s.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:l.toString()}})}static#t=this.\u0275fac=(()=>{let l;return function(I){return(l||(l=d.xGo(i)))(I||i)}})();static#e=this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}return i})()},70693:(R,m,t)=>{function s(d){return new Promise((p,u)=>{const o=new FileReader;o.readAsDataURL(d),o.onload=()=>{p(o.result.split(",")[1])},o.onerror=i=>{u(i)}})}function c(d){return new Promise((p,u)=>{const o=new FileReader;o.readAsText(d),o.onload=()=>{p(o.result)},o.onerror=i=>{u(i)}})}t.d(m,{d:()=>c,n:()=>s})},71475:(R,m,t)=>{t.d(m,{j:()=>i});var s=t(46443),c=t(24467),d=t(58624),p=t(99293),u=t(44444);let i=(()=>{class g extends c.B{getContentInfoLiveParam(r){return(0,s.fx)(()=>({url:this.apiUrl("admin/appParts/get"),params:{appid:this.appId,zoneId:this.zoneId,scope:r()}}))}exportParts(r,I,E){const h=this.apiUrl(d.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+r.join(";")+"&entityIdsString="+I.join(";")+"&templateIdsString="+E.join(";");window.open(h,"_blank","")}static#t=this.\u0275fac=(()=>{let r;return function(E){return(r||(r=p.xGo(g)))(E||g)}})();static#e=this.\u0275prov=u.jDH({token:g,factory:g.\u0275fac})}return g})()},71772:(R,m,t)=>{t.d(m,{I:()=>g,u:()=>i});var s=t(36647),c=t(59452),d=t(13550),p=t(24467),u=t(99293),o=t(44444);const i="admin/app/";let g=(()=>{class l extends p.B{importApp(I,E,h=!1){const f=new FormData;return f.append("File",I),f.append("Name",E??""),this.http.post(this.apiUrl(i+"Import"),f,{params:{zoneId:this.zoneId}}).pipe((0,s.n)(n=>{if(h&&n.Messages[0]?.MessageType===d.G1.Warning){const O=prompt(n.Messages[0].Text+" Would you like to install it using another folder name?");if(O)return this.importApp(I,O,!0)}return(0,c.of)(n)}))}static#t=this.\u0275fac=(()=>{let I;return function(h){return(I||(I=u.xGo(l)))(h||l)}})();static#e=this.\u0275prov=o.jDH({token:l,factory:l.\u0275fac})}return l})()},74079:(R,m,t)=>{t.d(m,{Cu:()=>a,JL:()=>y,Mk:()=>n,ei:()=>O,vN:()=>M,xR:()=>T});var s=t(46443),c=t(14600),d=t(36647),p=t(70271),u=t(70693),o=t(34435),i=t(9234),g=t(96474),l=t(99293),r=t(44444);const I={all:!0,getAll:!1,getAllSig:!0,getAllLive:!1,getAllRes:!0,importQuery:!1,clonePipeline:!1,delete:!1,update:!1},n="admin/query/Run",O="admin/query/DebugStream",a="admin/query/Save",y="admin/query/Get",M="admin/query/DataSources";let T=(()=>{class P extends g.D{constructor(){super(...arguments),this.log=(0,o.Tq)({PipelinesService:P},I)}getAll(v){return this.log.fnIf("getAll").r(this.getHttpApiUrl(i.Gg,{params:{appId:this.appId,contentType:v}}))}getAllLive(v,U){return this.log.fnIf("getAllLive",{contentType:v,refresh:U}),(0,s.fx)(()=>(U(),{url:this.apiUrl(i.Gg),params:{appId:this.appId,contentType:v}}))}getAllRes(v,U){const C=this.log.fnIf("getAllRes"),S=(0,s.fx)(()=>({url:i.Gg,params:{appId:this.appId,contentType:v}}),{defaultValue:U});return C.r(S)}importQuery(v){const U=this.log.fnIf("importQuery"),C=(0,c.H)((0,u.n)(v)).pipe((0,d.n)(S=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:S})),(0,p.T)(S=>({Success:S,Messages:[]})));return U.r(C)}clonePipelinePromise(v){const U=this.log.fnIf("clonePipeline"),C=this.fetchPromise("admin/query/Clone",{params:{Id:v.toString(),appId:this.appId}});return U.r(C)}delete(v){const U=this.log.fnIf("delete"),C=this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:v.toString()}});return U.r(C)}static#t=this.\u0275fac=(()=>{let v;return function(C){return(v||(v=l.xGo(P)))(C||P)}})();static#e=this.\u0275prov=r.jDH({token:P,factory:P.\u0275fac})}return P})()},75445:(R,m,t)=>{t.d(m,{Cu:()=>o.Cu,JL:()=>o.JL,Mk:()=>o.Mk,X6:()=>c.X,ei:()=>o.ei,gs:()=>c.g,tr:()=>s.t,vN:()=>o.vN,xR:()=>o.xR,y0:()=>i.y});var s=t(61479),c=t(17693),o=(t(71475),t(320),t(58624),t(74079)),i=t(2570)},78742:(R,m,t)=>{t.d(m,{h:()=>S,z:()=>r});var s=t(64173),c=t(75445),d=t(1726),p=t(14007);const u={Boolean:{label:(0,p.D)(d.O.Boolean),description:"Yes/no or true/false values"},Custom:{label:(0,p.D)(d.O.Custom),description:"Use for things like gps-pickers (which writes into multiple fields) or for custom-data which serializes something exotic into the db like an array, a custom json or anything"},DateTime:{label:(0,p.D)(d.O.DateTime),description:"For date, time or combined values"},Empty:{label:(0,p.D)(d.O.Empty),description:"Use to structure your form"},Entity:{label:(0,p.D)(d.O.Entity),description:"One or more other content-items"},Hyperlink:{label:(0,p.D)(d.O.Hyperlink),description:"Hyperlink or reference to a picture / file"},Number:{label:(0,p.D)(d.O.Number),description:"Any kind of number"},String:{label:(0,p.D)(d.O.String),description:"Any kind of text"}};var i=t(24467),g=t(99293),l=t(44444);const r="admin/field/all",M=c.X6+"SetTitle",v="admin/field/GetSharedFields";let S=(()=>{class B extends i.B{paramsAppId(e={}){return{params:{appid:this.appId,...e}}}dataTypes(){const e=this.newHttpResource(()=>({url:this.apiUrl("admin/field/DataTypes"),params:this.paramsAppId().params}));return{value:(0,s.EW)(()=>{const A=e.value();return A?function o(B){const x=[];for(const e of B)x.push({name:e,label:u[e].label,icon:(0,p.y)(e),description:u[e].description});return x}(A):[]}),loading:e.isLoading,error:e.error}}getInputTypes(){const e=this.newHttpResource(()=>({url:this.apiUrl("admin/field/InputTypes"),params:this.paramsAppId().params})),_=D=>({dataType:D.Type.substring(0,D.Type.indexOf("-")),inputType:D.Type,label:D.Label,description:D.Description,isDefault:D.IsDefault,isObsolete:D.IsObsolete,isRecommended:D.IsRecommended,obsoleteMessage:D.ObsoleteMessage,icon:D.IsDefault?"stars":D.IsRecommended?"star":null,sort:(D.IsObsolete?"z":D.IsDefault?"a":D.IsRecommended?"b":"c")+D.Label});return{value:(0,s.EW)(()=>e.value()?.map(_).sort((D,W)=>D.sort.localeCompare(W.sort))||[]),loading:e.isLoading,error:e.error}}getReservedNames(){return this.newHttpResource(()=>({url:this.apiUrl("admin/field/ReservedNames")}))}getFieldsLive(e,_){const A=this.newHttpResource(()=>(e(),{url:this.apiUrl(r),params:this.paramsAppId({staticName:_}).params})).value;return(0,s.EW)(()=>{const W=A()||[];for(const b of W){if(!b.Metadata)continue;const K=b.Metadata;K.merged={...K.All,...K[b.Type],...K[b.InputType]}}return W})}getFieldsPromise(e){return this.fetchPromise(r,this.paramsAppId({staticName:e})).then(_=>{if(_)for(const A of _){if(!A.Metadata)continue;const D=A.Metadata;D.merged={...D.All,...D[A.Type],...D[A.InputType]}}return _})}getShareableFieldsPromise(){return this.fetchPromise(v,{params:this.paramsAppId().params})}getShareableFieldsFor(e){return this.#t(v,e)}getAncestors(e){return this.#t("admin/field/GetAncestors",e)}getDescendants(e){return this.#t("admin/field/GetDescendants",e)}#t(e,_){return this.fetchPromise(e,{params:this.paramsAppId({attributeId:_}).params})}addInheritedField(e,_,A,D){return this.http.post(this.apiUrl("admin/field/AddInheritedField"),null,this.paramsAppId({contentTypeId:e.toString(),sourceType:_,sourceField:A,name:D}))}share(e,_=!0){return this.http.post(this.apiUrl("admin/field/Share"),null,{params:{appid:this.appId,attributeId:e.toString(),share:_}})}inherit(e,_){return this.http.post(this.apiUrl("admin/field/Inherit"),null,{params:{appid:this.appId,attributeId:e.toString(),inheritMetadataOf:_}})}reOrder(e,_){return this.http.post(this.apiUrl("admin/field/Sort"),null,{params:{appid:this.appId,contentTypeId:_.Id.toString(),order:JSON.stringify(e)}})}setTitle(e,_){return this.http.post(this.apiUrl(M),null,{params:{appid:this.appId,contentTypeId:_.Id.toString(),attributeId:e.Id.toString()}})}rename(e,_,A){return this.http.post(this.apiUrl("admin/field/Rename"),null,{params:{appid:this.appId,contentTypeId:_.toString(),attributeId:e.toString(),newName:A}})}delete(e,_){if(e.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl("admin/field/Delete"),{params:{appid:this.appId,contentTypeId:_.Id.toString(),attributeId:e.Id.toString()}})}add(e,_){return this.http.post(this.apiUrl("admin/field/Add"),null,{params:{AppId:this.appId,ContentTypeId:_.toString(),Id:e.Id.toString(),Type:e.Type,InputType:e.InputType,StaticName:e.StaticName,IsTitle:e.IsTitle.toString(),Index:e.SortOrder.toString()}})}updateInputType(e,_,A){return this.http.post(this.apiUrl("admin/field/InputType"),null,{params:{appId:this.appId,attributeId:e,field:_,inputType:A}})}static#e=this.\u0275fac=(()=>{let e;return function(A){return(e||(e=g.xGo(B)))(A||B)}})();static#s=this.\u0275prov=l.jDH({token:B,factory:B.\u0275fac})}return B})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/20.00.02/dist/ng-edit/default-projects_eav-ui_src_app_shared_fields_content-types-fields_service_ts.905b1b5aac12e074.js.map