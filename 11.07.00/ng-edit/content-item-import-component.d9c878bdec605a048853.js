(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{K0pi:function(t,e,n){"use strict";n.r(e),n.d(e,"ContentItemImportComponent",(function(){return V}));var i=n("D57K"),o=n("BLjT"),s=n("LiEJ"),c=n("3riI"),r=n("Jg5f"),a=n("1C3z"),l=n("5/c3"),p=n("S36y"),m=n("55Ui"),u=n("2pW/"),b=n("8AiQ"),f=n("8/3+"),g=n("9HSk"),d=n("Qc/f"),h=n("nYrE");function I(t,e){1&t&&a.Qb(0,"mat-spinner",12)}function v(t,e){1&t&&(a.Vb(0,"div",17),a.Oc(1," The import has been done. See the messages below for more information. "),a.Ub())}function y(t,e){1&t&&(a.Vb(0,"div",18),a.Oc(1," The import failed. See the messages below for more information. "),a.Ub())}var x=function(t,e,n){return{"sxc-message-warning":t,"sxc-message-success":e,"sxc-message-error":n}};function $(t,e){if(1&t&&(a.Vb(0,"div",19),a.Oc(1),a.Ub()),2&t){var n=e.$implicit;a.nc("ngClass",a.tc(2,x,0===n.MessageType,1===n.MessageType,2===n.MessageType)),a.Bb(1),a.Qc(" ",n.Text," ")}}function D(t,e){if(1&t&&(a.Vb(0,"div",13),a.Mc(1,v,2,0,"div",14),a.Mc(2,y,2,0,"div",15),a.Mc(3,$,2,6,"div",16),a.Ub()),2&t){var n=a.hc().ngIf;a.Bb(1),a.nc("ngIf",n.importResult.Success),a.Bb(1),a.nc("ngIf",!n.importResult.Success),a.Bb(1),a.nc("ngForOf",n.importResult.Messages)}}function T(t,e){if(1&t){var n=a.Wb();a.Tb(0),a.Vb(1,"button",20),a.dc("click",(function(){return a.Dc(n),a.hc(2).closeDialog()})),a.Oc(2,"Cancel"),a.Ub(),a.Vb(3,"button",21),a.dc("click",(function(){return a.Dc(n),a.hc(2).importContentItem()})),a.Oc(4," Import "),a.Ub(),a.Sb()}if(2&t){var i=a.hc().ngIf;a.Bb(3),a.nc("disabled",!i.importFile||i.isImporting||i.importResult)}}function S(t,e){if(1&t){var n=a.Wb();a.Tb(0),a.Vb(1,"button",22),a.dc("click",(function(){return a.Dc(n),a.hc(2).closeDialog()})),a.Oc(2,"Close"),a.Ub(),a.Sb()}}function R(t,e){if(1&t){var n=a.Wb();a.Vb(0,"div",1),a.dc("filesDropped",(function(t){return a.Dc(n),a.hc().filesDropped(t)})),a.Vb(1,"div",2),a.Vb(2,"div",3),a.Oc(3),a.ic(4,"async"),a.Ub(),a.Ub(),a.Mc(5,I,1,0,"mat-spinner",4),a.Vb(6,"p",5),a.Oc(7,"Select an item file (json) from your computer to import."),a.Ub(),a.Vb(8,"div"),a.Vb(9,"button",6),a.dc("click",(function(){return a.Dc(n),a.Bc(13).click()})),a.Vb(10,"span"),a.Oc(11),a.Ub(),a.Ub(),a.Vb(12,"input",7,8),a.dc("change",(function(t){return a.Dc(n),a.hc().fileChange(t)})),a.Ub(),a.Ub(),a.Mc(14,D,4,3,"div",9),a.Vb(15,"div",10),a.Mc(16,T,5,1,"ng-container",11),a.Mc(17,S,3,0,"ng-container",11),a.Ub(),a.Ub()}if(2&t){var i,o=e.ngIf,s=a.hc();a.nc("allowedFileTypes","json"),a.Bb(3),a.Qc("",null==(i=a.jc(4,8,s.contentType$))?null:i.Name," Import Single Item"),a.Bb(2),a.nc("ngIf",o.isImporting),a.Bb(4),a.nc("disabled",o.isImporting),a.Bb(2),a.Pc(o.importFile?o.importFile.name:"Select or drop file"),a.Bb(3),a.nc("ngIf",o.importResult),a.Bb(2),a.nc("ngIf",!(null!=o.importResult&&o.importResult.Success)),a.Bb(1),a.nc("ngIf",null==o.importResult?null:o.importResult.Success)}}var V=function(){function t(t,e,n,o,a,l){this.dialogData=t,this.dialogRef=e,this.route=n,this.contentTypesService=o,this.contentItemsService=a,this.snackBar=l,this.hostClass="dialog-component",this.contentType$=new s.a(null),this.isImporting$=new s.a(!1),this.importFile$=new s.a(null),this.importResult$=new s.a(null),this.templateVars$=Object(c.a)([this.isImporting$,this.importFile$,this.importResult$]).pipe(Object(r.a)((function(t){var e=Object(i.f)(t,3);return{isImporting:e[0],importFile:e[1],importResult:e[2]}}))),this.contentTypeStaticName=this.route.snapshot.parent.paramMap.get("contentTypeStaticName")}return t.prototype.ngOnInit=function(){var t=this;this.contentTypesService.retrieveContentType(this.contentTypeStaticName).subscribe((function(e){t.contentType$.next(e)})),null!=this.dialogData.files&&(this.importFile$.next(this.dialogData.files[0]),this.importContentItem())},t.prototype.ngOnDestroy=function(){this.contentType$.complete(),this.isImporting$.complete(),this.importFile$.complete(),this.importResult$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.filesDropped=function(t){this.importFile$.next(t[0]),this.importResult$.next(null),this.importContentItem()},t.prototype.fileChange=function(t){this.importFile$.next(t.target.files[0]),this.importResult$.next(null)},t.prototype.importContentItem=function(){var t=this;this.isImporting$.next(!0),this.contentItemsService.importItem(this.importFile$.value).subscribe({next:function(e){t.isImporting$.next(!1),t.importResult$.next({Success:!0,Messages:[]})},error:function(e){t.isImporting$.next(!1),t.importResult$.next(null),t.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})},t.\u0275fac=function(e){return new(e||t)(a.Pb(o.a),a.Pb(o.g),a.Pb(l.a),a.Pb(p.a),a.Pb(m.a),a.Pb(u.b))},t.\u0275cmp=a.Jb({type:t,selectors:[["app-content-item-import"]],hostVars:1,hostBindings:function(t,e){2&t&&a.Yb("className",e.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","matTooltip","Open file browser",3,"disabled","click"],["type","file",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],[4,"ngIf"],["mode","indeterminate","diameter","20","color","accent"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(a.Mc(0,R,18,10,"div",0),a.ic(1,"async")),2&t&&a.nc("ngIf",a.jc(1,1,e.templateVars$))},directives:[b.m,f.a,o.h,g.a,d.a,h.b,b.l,b.k],pipes:[b.b],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.00/ng-edit/content-item-import-component.d9c878bdec605a048853.js.map