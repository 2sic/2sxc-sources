(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{NtNJ:function(t,e,n){"use strict";n.r(e),n.d(e,"ImportContentTypeComponent",(function(){return B}));var i=n("D57K"),o=n("BLjT"),s=n("LiEJ"),c=n("3riI"),r=n("Jg5f"),l=n("1C3z"),a=n("S36y"),p=n("2pW/"),m=n("8AiQ"),f=n("8/3+"),u=n("9HSk"),b=n("Qc/f"),g=n("nYrE");function d(t,e){1&t&&l.Qb(0,"mat-spinner",12)}function h(t,e){1&t&&(l.Vb(0,"div"),l.Oc(1,"Select or drop files"),l.Ub())}function v(t,e){if(1&t&&(l.Vb(0,"div"),l.Oc(1),l.Ub()),2&t){var n=e.$implicit;l.Bb(1),l.Pc(n.name)}}function I(t,e){if(1&t&&(l.Tb(0),l.Mc(1,v,2,1,"div",13),l.Sb()),2&t){var n=l.hc().ngIf;l.Bb(1),l.nc("ngForOf",n.importFiles)}}function y(t,e){1&t&&(l.Vb(0,"div",18),l.Oc(1," The import has been done. See the messages below for more information. "),l.Ub())}function x(t,e){1&t&&(l.Vb(0,"div",19),l.Oc(1," The import failed. See the messages below for more information. "),l.Ub())}var D=function(t,e,n){return{"sxc-message-warning":t,"sxc-message-success":e,"sxc-message-error":n}};function $(t,e){if(1&t&&(l.Vb(0,"div",20),l.Oc(1),l.Ub()),2&t){var n=e.$implicit;l.nc("ngClass",l.tc(2,D,0===n.MessageType,1===n.MessageType,2===n.MessageType)),l.Bb(1),l.Qc(" ",n.Text," ")}}function T(t,e){if(1&t&&(l.Vb(0,"div",14),l.Mc(1,y,2,0,"div",15),l.Mc(2,x,2,0,"div",16),l.Mc(3,$,2,6,"div",17),l.Ub()),2&t){var n=l.hc().ngIf;l.Bb(1),l.nc("ngIf",n.importResult.Success),l.Bb(1),l.nc("ngIf",!n.importResult.Success),l.Bb(1),l.nc("ngForOf",n.importResult.Messages)}}function F(t,e){if(1&t){var n=l.Wb();l.Tb(0),l.Vb(1,"button",21),l.dc("click",(function(){return l.Dc(n),l.hc(2).closeDialog()})),l.Oc(2,"Cancel"),l.Ub(),l.Vb(3,"button",22),l.dc("click",(function(){return l.Dc(n),l.hc(2).importContentType()})),l.Oc(4," Import "),l.Ub(),l.Sb()}if(2&t){var i=l.hc().ngIf;l.Bb(3),l.nc("disabled",!i.importFiles||i.isImporting||i.importResult)}}function O(t,e){if(1&t){var n=l.Wb();l.Tb(0),l.Vb(1,"button",23),l.dc("click",(function(){return l.Dc(n),l.hc(2).closeDialog()})),l.Oc(2,"Close"),l.Ub(),l.Sb()}}function V(t,e){if(1&t){var n=l.Wb();l.Vb(0,"div",1),l.dc("filesDropped",(function(t){return l.Dc(n),l.hc().filesDropped(t)})),l.Vb(1,"div",2),l.Vb(2,"div",3),l.Oc(3,"Import Content Types"),l.Ub(),l.Ub(),l.Mc(4,d,1,0,"mat-spinner",4),l.Vb(5,"p",5),l.Oc(6,"Select Content Type definition files (json) from your computer to import."),l.Ub(),l.Vb(7,"div"),l.Vb(8,"button",6),l.dc("click",(function(){return l.Dc(n),l.Bc(12).click()})),l.Mc(9,h,2,0,"div",7),l.Mc(10,I,2,1,"ng-container",7),l.Ub(),l.Vb(11,"input",8,9),l.dc("change",(function(t){return l.Dc(n),l.hc().filesChange(t)})),l.Ub(),l.Ub(),l.Mc(13,T,4,3,"div",10),l.Vb(14,"div",11),l.Mc(15,F,5,1,"ng-container",7),l.Mc(16,O,3,0,"ng-container",7),l.Ub(),l.Ub()}if(2&t){var i=e.ngIf;l.nc("allowedFileTypes","json"),l.Bb(4),l.nc("ngIf",i.isImporting),l.Bb(4),l.nc("disabled",i.isImporting),l.Bb(1),l.nc("ngIf",!i.importFiles),l.Bb(1),l.nc("ngIf",i.importFiles),l.Bb(3),l.nc("ngIf",i.importResult),l.Bb(2),l.nc("ngIf",!(null!=i.importResult&&i.importResult.Success)),l.Bb(1),l.nc("ngIf",null==i.importResult?null:i.importResult.Success)}}var B=function(){function t(t,e,n,o){this.dialogData=t,this.dialogRef=e,this.contentTypesService=n,this.snackBar=o,this.hostClass="dialog-component",this.isImporting$=new s.a(!1),this.importFiles$=new s.a(null),this.importResult$=new s.a(null),this.templateVars$=Object(c.a)([this.isImporting$,this.importFiles$,this.importResult$]).pipe(Object(r.a)((function(t){var e=Object(i.f)(t,3);return{isImporting:e[0],importFiles:e[1],importResult:e[2]}})))}return t.prototype.ngOnInit=function(){null!=this.dialogData.files&&(this.importFiles$.next(this.dialogData.files),this.importContentType())},t.prototype.ngOnDestroy=function(){this.isImporting$.complete(),this.importFiles$.complete(),this.importResult$.complete()},t.prototype.closeDialog=function(){this.dialogRef.close()},t.prototype.filesDropped=function(t){this.importFiles$.next(t),this.importResult$.next(null),this.importContentType()},t.prototype.filesChange=function(t){var e=t.target.files,n=null;if(e.length){n=[];for(var i=0;i<e.length;i++)n.push(e[i])}this.importFiles$.next(n),this.importResult$.next(null)},t.prototype.importContentType=function(){var t=this;this.isImporting$.next(!0),this.contentTypesService.import(this.importFiles$.value).subscribe({next:function(e){t.isImporting$.next(!1),t.importResult$.next(e)},error:function(e){t.isImporting$.next(!1),t.importResult$.next(null),t.snackBar.open("Import failed. Please check console for more information",null,{duration:3e3})}})},t.\u0275fac=function(e){return new(e||t)(l.Pb(o.a),l.Pb(o.g),l.Pb(a.a),l.Pb(p.b))},t.\u0275cmp=l.Jb({type:t,selectors:[["app-import-content-type"]],hostVars:1,hostBindings:function(t,e){2&t&&l.Yb("className",e.hostClass)},decls:2,vars:3,consts:[["appDragAndDrop","",3,"allowedFileTypes","filesDropped",4,"ngIf"],["appDragAndDrop","",3,"allowedFileTypes","filesDropped"],["mat-dialog-title",""],[1,"dialog-title-box"],["mode","indeterminate","diameter","20","color","accent",4,"ngIf"],[1,"dialog-description"],["mat-raised-button","","matTooltip","Open file browser",3,"disabled","click"],[4,"ngIf"],["type","file","multiple","",1,"hide",3,"change"],["fileInput",""],["class","dialog-component-content fancy-scrollbar-light import-result-box",4,"ngIf"],[1,"dialog-component-actions"],["mode","indeterminate","diameter","20","color","accent"],[4,"ngFor","ngForOf"],[1,"dialog-component-content","fancy-scrollbar-light","import-result-box"],["class","sxc-message sxc-message-info",4,"ngIf"],["class","sxc-message sxc-message-error",4,"ngIf"],["class","sxc-message",3,"ngClass",4,"ngFor","ngForOf"],[1,"sxc-message","sxc-message-info"],[1,"sxc-message","sxc-message-error"],[1,"sxc-message",3,"ngClass"],["mat-raised-button","",3,"click"],["mat-raised-button","","color","accent",3,"disabled","click"],["mat-raised-button","","color","accent",3,"click"]],template:function(t,e){1&t&&(l.Mc(0,V,17,8,"div",0),l.ic(1,"async")),2&t&&l.nc("ngIf",l.jc(1,1,e.templateVars$))},directives:[m.m,f.a,o.h,u.a,b.a,g.b,m.l,m.k],pipes:[m.b],styles:[".import-result-box[_ngcontent-%COMP%]{margin-top:16px}"],changeDetection:0}),t}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/11.07.00/ng-edit/import-content-type-component.112b49194774d5f78bab.js.map