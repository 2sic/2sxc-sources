{"version":3,"file":"projects_eav-ui_src_app_metadata_metadata_component_ts-projects_eav-ui_src_app_shared_service-802177.3cf1df465b1204a3.js","mappings":"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","names":["convert","obj","fn","getWith","logSpecs","getAll","getAllSig","ContentItemsService","HttpServiceBase","constructor","this","log","classLog","contentTypeStaticName","fnIf","getHttpApiUrl","webApiEntityList","params","appId","contentType","initial","getSignal","getColumns","webApiFieldsAll","staticName","importItem","file","from","toBase64","pipe","switchMap","fileBase64","http","post","apiUrl","webApiEntityRoot","AppId","ContentBase64","map","success","Success","Messages","__ngFactoryType__","factory","Éµfac","i0","ctx_r0","dialogData","message","ConfirmDeleteDialogComponent","dialog","hostClass","closeDialog","confirm","close","MAT_DIALOG_DATA","i1","selectors","hostVars","hostBindings","rf","ctx","ConfirmDeleteDialogComponent_Conditional_4_Template","entityTitle","entityId","MatCardModule","i2","MatButtonModule","i3","SafeHtmlPipe","styles","MetadataActionsComponent","agInit","refresh","deleteMetadata","onDelete","data","decls","vars","consts","template","MatRippleModule","MatIconModule","TippyDirective","encapsulation","MetadataContentTypeComponent","value","metadata","_Type","Description","scopeOption_r1","name","MetadataSaveDialogComponent_Conditional_11_For_5_Template","ctx_r1","scopeOptions","length","dropdownInsertValue","contentType_r3","NameId","Label","MetadataSaveDialogComponent_Conditional_15_For_2_Template","tmp_1_0","contentTypes","MetadataSaveDialogComponent","#contentTypesService","guidedContentType","advancedMode","transient","ContentTypesService","scope","signal","eavConstants","scopes","default","getScopesSig","undefined","computed","retrieveContentTypesSig","ngOnInit","buildForm","toggleGuidedContentType","toggleAdvancedMode","event","checked","formValues","form","getRawValue","UntypedFormGroup","addControl","UntypedFormControl","Validators","required","controls","valueChanges","startWith","distinctUntilChanged","subscribe","newScope","patchValue","prompt","some","option","set","MetadataSaveDialogComponent_Conditional_11_Template","MetadataSaveDialogComponent_Conditional_15_Template","MetadataSaveDialogComponent_Conditional_16_Template","MetadataSaveDialogComponent_Conditional_24_Template","$event","_c0","touched","errors","valid","FormsModule","ReactiveFormsModule","MatFormFieldModule","i4","MatSelectModule","i5","i6","MatOptionModule","MatInputModule","i7","i8","NgClass","i9","MatSlideToggleModule","i10","FieldHintComponent","ClickStopPropagationDirective","itemFor","KeyNumber","KeyGuid","KeyString","Title","MetadataComponent_Conditional_10_Conditional_5_Template","MetadataComponent_Conditional_10_Conditional_6_Template","MetadataComponent_Conditional_10_Conditional_7_Template","MetadataComponent_Conditional_10_Conditional_8_Template","Target","TargetType","_r2","createMetadata","recommendation_r5","Icon","Enabled","_r4","$implicit","MetadataComponent_Conditional_16_For_10_Conditional_1_Template","MetadataComponent_Conditional_16_For_10_Conditional_2_Template","_r3","openChange","MetadataComponent_Conditional_16_For_10_Template","fabOpen","recommendations","MetadataComponent","#entitiesSvc","#metadataSvc","#contentItemSvc","#dialogRoutes","snackBar","matDialog","viewContainerRef","changeDetectorRef","EntityEditService","MetadataService","DialogRoutingService","gridOptions","#buildGridOptions","#params","getParams","p","targetType","parseInt","keyType","key","#itemsFromHttp","item","find","i","Guid","For","metadataSet","Items","Recommendations","filter","r","Id","Count","title","decodeURIComponent","getParam","console","error","#fetchMetadata","doOnDialogClosed","open","recommendation","CreateEmpty","Name","create","calculateItemFor","duration","next","createMetadataForm","openFeatureDialog","MissingFeature","autoFocus","width","afterClosed","items","formUrl","convertFormToUrl","navRelative","markForCheck","x","EditPrep","constructMetadataInfo","newMetadataFromInfo","logGetMetadata","rxTap","getMetadata","take","forEach","startsWith","replace","window","atob","#editMetadata","editId","#deleteMetadata","confirmed","delete","DeleteWarning","isConfirmed","defaultGridOptions","columnDefs","ColumnDefinitions","IdWithDefaultRenderer","cellRendererParams","idFieldParamsTooltipGetter","TextWide","field","onCellClicked","headerName","valueGetter","cellRenderer","ActionsPinnedRight1","MetadataComponent_Conditional_9_Template","MetadataComponent_Conditional_10_Template","MetadataComponent_Conditional_15_Template","MetadataComponent_Conditional_16_Template","RouterOutlet","SxcGridModule","MatDialogActions","EcoFabSpeedDialComponent","EcoFabSpeedDialTriggerComponent","EcoFabSpeedDialActionsComponent","MatBadgeModule","GoToPermissions","route","path","loadChildren","__webpack_require__","e","then","bind","m","permissionRoutes","getUrl","getUrlApp","app","toString","getUrlAttribute","id","attribute","getUrlContentType","guid","getUrlEntity","entity","getUrlLanguage","language","permissionsDialog","initContext","panelSize","panelClass","getComponent","_asyncToGenerator","PermissionsComponent","Promise","all","PermissionsActionsComponent","deletePermission","#permissionsService","#prefills","buildGridOptions","permissions","PermissionsService","PermissionType","#fetchPermissions","editPermission","permission","Prefill","sort","Character","component","DialogEntryComponent","children","EditRoutes","contentTypeName","getHttp","metadataService","entitiesService","FieldHintComponent_Case_1_ng_container_1_Template","content_r2","FieldHintComponent_Case_2_ng_container_1_Template","isError","input","isShort","toggleIsShort","inputs","ngContentSelectors","_r1","FieldHintComponent_Case_1_Template","FieldHintComponent_Case_2_Template","FieldHintComponent_ng_template_3_Template","_c1","tmp_2_0","NgTemplateOutlet","a","onClick","stopPropagation","zoneId","update","type","tryForce","force","ServiceBase","subscriptions","Subscription","ngOnDestroy","destroy","unsubscribe"],"ignoreList":[],"sourceRoot":"webpack:///","sources":["./projects/core/object-utilities.ts","./projects/eav-ui/src/app/content-items/services/content-items.service.ts","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.html","./projects/eav-ui/src/app/metadata/confirm-delete-dialog/confirm-delete-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.ts","./projects/eav-ui/src/app/metadata/metadata-actions/metadata-actions.component.html","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.ts","./projects/eav-ui/src/app/metadata/metadata-content-type/metadata-content-type.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.html","./projects/eav-ui/src/app/metadata/metadata-save-dialog/metadata-save-dialog.component.ts","./projects/eav-ui/src/app/metadata/metadata.component.html","./projects/eav-ui/src/app/metadata/metadata.component.ts","./projects/eav-ui/src/app/permissions/go-to-permissions.ts","./projects/eav-ui/src/app/permissions/permissions-dialog.config.ts","./projects/eav-ui/src/app/permissions/permissions-actions/permissions-actions.component.ts","./projects/eav-ui/src/app/permissions/permissions-actions/permissions-actions.component.html","./projects/eav-ui/src/app/permissions/permissions.component.ts","./projects/eav-ui/src/app/permissions/permissions.component.html","./projects/eav-ui/src/app/permissions/permissions.routing.ts","./projects/eav-ui/src/app/permissions/services/metadata.service.ts","./projects/eav-ui/src/app/permissions/services/permissions.service.ts","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.html","./projects/eav-ui/src/app/shared/components/field-hint/field-hint.component.ts","./projects/eav-ui/src/app/shared/constants/dropdown-insert-value.constant.ts","./projects/eav-ui/src/app/shared/directives/click-stop-propagation.directive.ts","./projects/eav-ui/src/app/shared/services/entity-edit.service.ts","./projects/eav-ui/src/app/shared/services/service-base.ts"],"sourcesContent":["\r\n/**\r\n * Conversion function to change something to something else, a bit like 'map' but for a single item.\r\n * \r\n * Typically used in short return statements.\r\n * \r\n * Internally it's the same as the `getWith` function, but has a different name to indicate the usage.\r\n */\r\nexport function convert<T extends unknown, R extends unknown>(obj: T, fn: (value: T) => R): R {\r\n  return fn(obj);\r\n}\r\n\r\n/**\r\n * Function to do something with an object and return the result.\r\n * \r\n * Typically used in short return statements.\r\n * \r\n * Internally it's the same as the `convert` function, but has a different name to indicate the usage.\r\n */\r\nexport function getWith<T extends unknown, R extends unknown>(obj: T, fn: (value: T) => R): R {\r\n  return fn(obj);\r\n}\r\n\r\n","import { Injectable, Signal } from '@angular/core';\r\nimport { from, map, switchMap } from 'rxjs';\r\nimport { FileUploadResult } from '../../shared/components/file-upload-dialog';\r\nimport { webApiFieldsAll } from '../../shared/fields/content-types-fields.service';\r\nimport { Field } from '../../shared/fields/field.model';\r\nimport { toBase64 } from '../../shared/helpers/file-to-base64.helper';\r\nimport { classLog } from '../../shared/logging';\r\nimport { webApiEntityList, webApiEntityRoot } from '../../shared/services/entity.service';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\nimport { ContentItem } from '../models/content-item.model';\r\n\r\nconst logSpecs = {\r\n  getAll: true,\r\n  getAllSig: true,\r\n}\r\n\r\n@Injectable()\r\nexport class ContentItemsService extends HttpServiceBase {\r\n\r\n  log = classLog({ ContentItemsService }, logSpecs);\r\n\r\n  getAll(contentTypeStaticName: string) {\r\n    this.log.fnIf('getAll', { contentTypeStaticName });\r\n    return this.getHttpApiUrl<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  getAllSig(contentTypeStaticName: string, initial: undefined): Signal<ContentItem[]> {\r\n    this.log.fnIf('getAllSig', { contentTypeStaticName, initial });\r\n    return this.getSignal<ContentItem[]>(webApiEntityList, {\r\n      params: { appId: this.appId, contentType: contentTypeStaticName }\r\n    }, initial);\r\n  }\r\n\r\n  getColumns(contentTypeStaticName: string) {\r\n    return this.getHttpApiUrl<Field[]>(webApiFieldsAll, {\r\n      params: { appId: this.appId, staticName: contentTypeStaticName }\r\n    });\r\n  }\r\n\r\n  importItem(file: File) {\r\n    return from(toBase64(file)).pipe(\r\n      switchMap(fileBase64 => {\r\n        return this.http.post<boolean>(this.apiUrl(webApiEntityRoot + 'upload'), {\r\n          AppId: this.appId,\r\n          ContentBase64: fileBase64,\r\n        });\r\n      }),\r\n      map(success => {\r\n        const result: FileUploadResult = {\r\n          Success: success,\r\n          Messages: [],\r\n        };\r\n        return result;\r\n      }),\r\n    );\r\n  }\r\n}\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Delete {{ dialogData.entityTitle }} ({{ dialogData.entityId }})?</mat-card-title>\r\n    @if (dialogData.message) {\r\n      <mat-card-subtitle [innerHtml]=\"dialogData.message | safeHtml\"></mat-card-subtitle>\r\n    }\r\n  </mat-card-header>\r\n  <mat-card-actions align=\"end\">\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n    <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog(true)\">Delete</button>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { Component, HostBinding, Inject } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MAT_DIALOG_DATA, MatDialogRef } from '@angular/material/dialog';\r\nimport { SafeHtmlPipe } from '../../shared/pipes/safe-html.pipe';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog.models';\r\n\r\n@Component({\r\n    selector: 'app-confirm-delete-dialog',\r\n    templateUrl: './confirm-delete-dialog.component.html',\r\n    styleUrls: ['./confirm-delete-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        MatButtonModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class ConfirmDeleteDialogComponent {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  constructor(\r\n    @Inject(MAT_DIALOG_DATA) public dialogData: ConfirmDeleteDialogData,\r\n    private dialog: MatDialogRef<ConfirmDeleteDialogComponent>,\r\n  ) { }\r\n\r\n  closeDialog(confirm?: boolean) {\r\n    this.dialog.close(confirm);\r\n  }\r\n}\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { MetadataActionsParams } from './metadata-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-actions',\r\n    templateUrl: './metadata-actions.component.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class MetadataActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & MetadataActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & MetadataActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deleteMetadata(): void {\r\n    const metadata: MetadataItem = this.params.data;\r\n    this.params.onDelete(metadata);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deleteMetadata()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MetadataItem } from '../models/metadata.model';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\n\r\n@Component({\r\n    selector: 'app-metadata-content-type',\r\n    templateUrl: './metadata-content-type.component.html',\r\n    styleUrls: ['./metadata-content-type.component.scss'],\r\n    imports: [TippyDirective,]\r\n})\r\nexport class MetadataContentTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  metadata: MetadataItem;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    this.metadata = params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"container\" [tippy]=\"metadata._Type.Description\">\r\n  {{ value }}\r\n</div>\r\n","<mat-card>\r\n  <mat-card-header>\r\n    <mat-card-title>Create Metadata</mat-card-title>\r\n    <mat-card-subtitle>\r\n      This is a special operation to add an item which is metadata for another item,\r\n      see <a href=\"https://go.2sxc.org/metadata\" target=\"_blank\">docs</a>.\r\n    </mat-card-subtitle>\r\n  </mat-card-header>\r\n  <mat-card-content>\r\n    <form [formGroup]=\"form\">\r\n      <!-- Scope -->\r\n      @if (advancedMode && guidedContentType) {\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Scope</mat-label>\r\n        <mat-select formControlName=\"scope\" [placeholder]=\"!scopeOptions().length ? 'No items found' : ''\">\r\n          @for (scopeOption of scopeOptions(); track scopeOption) {\r\n          <mat-option [value]=\"scopeOption.value\">\r\n            {{ scopeOption.name }}\r\n          </mat-option>\r\n          }\r\n          <mat-option [value]=\"dropdownInsertValue\">Other...</mat-option>\r\n        </mat-select>\r\n      </mat-form-field>\r\n      <app-field-hint>\r\n        The scope should almost never be changed -\r\n        <a href=\"https://2sxc.org/help?tag=scope\" target=\"_blank\" appClickStopPropagation>see help</a>\r\n      </app-field-hint>\r\n      }\r\n      <!-- Content Type of metadata item -->\r\n      <mat-form-field color=\"accent\" class=\"eav-mat-form-field\">\r\n        <mat-label>Content Type</mat-label>\r\n        @if (guidedContentType) {\r\n        <mat-select formControlName=\"contentType\" required\r\n          [placeholder]=\"!contentTypes()()?.length ? 'No items found' : ''\">\r\n          @for (contentType of contentTypes()(); track contentType) {\r\n          <mat-option [value]=\"contentType.NameId\">\r\n            {{ contentType.Label }}\r\n          </mat-option>\r\n          }\r\n        </mat-select>\r\n        }\r\n        @if (!guidedContentType) {\r\n        <input matInput type=\"text\" formControlName=\"contentType\" required>\r\n        }\r\n        <div matTextSuffix>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': guidedContentType }\" tippy=\"Pick existing value\"\r\n            (click)=\"toggleGuidedContentType(true)\">\r\n            <mat-icon>search</mat-icon>\r\n          </button>\r\n          <button mat-icon-button type=\"button\" [ngClass]=\"{ 'active': !guidedContentType }\" tippy=\"Manual entry\"\r\n            (click)=\"toggleGuidedContentType(false)\">\r\n            <mat-icon>text_fields</mat-icon>\r\n          </button>\r\n        </div>\r\n      </mat-form-field>\r\n      @if (form.controls.contentType.touched && form.controls.contentType.errors?.required) {\r\n      <app-field-hint [isError]=\"true\">\r\n        This field is required\r\n      </app-field-hint>\r\n      }\r\n    </form>\r\n  </mat-card-content>\r\n  <mat-card-actions class=\"eav-card-actions\">\r\n    <mat-slide-toggle color=\"accent\" [checked]=\"advancedMode\" (change)=\"toggleAdvancedMode($event)\">\r\n      {{ advancedMode ? 'Advanced' : 'Simple' }}\r\n    </mat-slide-toggle>\r\n    <div>\r\n      <button mat-raised-button class=\"eav-card-action-button\" (click)=\"closeDialog()\">Cancel</button>\r\n      <button mat-raised-button color=\"accent\" class=\"eav-card-action-button\" [disabled]=\"!form.valid\"\r\n        (click)=\"confirm()\">\r\n        Confirm\r\n      </button>\r\n    </div>\r\n  </mat-card-actions>\r\n</mat-card>\r\n","import { NgClass } from '@angular/common';\r\nimport { Component, computed, HostBinding, OnInit, signal, WritableSignal } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule, UntypedFormControl, UntypedFormGroup, Validators } from '@angular/forms';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatCardModule } from '@angular/material/card';\r\nimport { MatOptionModule } from '@angular/material/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatInputModule } from '@angular/material/input';\r\nimport { MatSelectModule } from '@angular/material/select';\r\nimport { MatSlideToggleChange, MatSlideToggleModule } from '@angular/material/slide-toggle';\r\nimport { distinctUntilChanged, startWith } from 'rxjs';\r\nimport { transient } from '../../../../../core';\r\nimport { ContentTypesService } from '../../app-administration/services';\r\nimport { FieldHintComponent } from '../../shared/components/field-hint/field-hint.component';\r\nimport { dropdownInsertValue } from '../../shared/constants/dropdown-insert-value.constant';\r\nimport { eavConstants, ScopeOption } from '../../shared/constants/eav.constants';\r\nimport { ClickStopPropagationDirective } from '../../shared/directives/click-stop-propagation.directive';\r\nimport { MetadataSaveFormValues } from './metadata-save-dialog.models';\r\n\r\n@Component({\r\n    selector: 'app-metadata-save-dialog',\r\n    templateUrl: './metadata-save-dialog.component.html',\r\n    styleUrls: ['./metadata-save-dialog.component.scss'],\r\n    imports: [\r\n        MatCardModule,\r\n        FormsModule,\r\n        ReactiveFormsModule,\r\n        MatFormFieldModule,\r\n        MatSelectModule,\r\n        MatOptionModule,\r\n        MatInputModule,\r\n        MatButtonModule,\r\n        NgClass,\r\n        MatIconModule,\r\n        MatSlideToggleModule,\r\n        FieldHintComponent,\r\n        ClickStopPropagationDirective,\r\n    ]\r\n})\r\nexport class MetadataSaveDialogComponent implements OnInit {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: UntypedFormGroup;\r\n  dropdownInsertValue = dropdownInsertValue;\r\n  guidedContentType = true;\r\n  advancedMode = false;\r\n\r\n  #contentTypesService = transient(ContentTypesService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataSaveDialogComponent>,\r\n  ) { }\r\n\r\n  scope = signal(eavConstants.scopes.default.value);\r\n  scopeOptions = this.#contentTypesService.getScopesSig(undefined) as WritableSignal<ScopeOption[]>;\r\n\r\n  contentTypes = computed(() => {\r\n    const scope = this.scope();\r\n    return this.#contentTypesService.retrieveContentTypesSig(scope, undefined);\r\n  });\r\n\r\n\r\n  ngOnInit(): void {\r\n    this.buildForm();\r\n  }\r\n\r\n  closeDialog(contentType?: string): void {\r\n    this.dialog.close(contentType);\r\n  }\r\n\r\n  toggleGuidedContentType(guidedContentType: boolean): void {\r\n    this.guidedContentType = guidedContentType;\r\n  }\r\n\r\n  toggleAdvancedMode(event: MatSlideToggleChange): void {\r\n    this.advancedMode = event.checked;\r\n  }\r\n\r\n  confirm(): void {\r\n    const formValues: MetadataSaveFormValues = this.form.getRawValue();\r\n    this.closeDialog(formValues.contentType);\r\n  }\r\n\r\n  private buildForm(): void {\r\n    this.form = new UntypedFormGroup({});\r\n    this.form.addControl('contentType', new UntypedFormControl(null, [Validators.required]));\r\n    this.form.addControl('scope', new UntypedFormControl(eavConstants.scopes.default.value));\r\n\r\n    this.form.controls.scope.valueChanges.pipe(\r\n      startWith(this.form.controls.scope.value),\r\n      distinctUntilChanged(),\r\n    ).subscribe((newScope: string) => {\r\n      // reset content types when scope changes\r\n      if (this.form.controls.contentType.value != null) {\r\n        this.form.controls.contentType.patchValue(null);\r\n      }\r\n\r\n      // add new scope on manual entry\r\n      if (newScope === dropdownInsertValue) {\r\n        newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.') || eavConstants.scopes.default.value;\r\n        if (!this.scopeOptions().some(option => option.value === newScope)) {\r\n          const newScopeOption: ScopeOption = {\r\n            name: newScope,\r\n            value: newScope,\r\n          };\r\n          this.scopeOptions.set([newScopeOption, ...this.scopeOptions()]);\r\n        }\r\n        this.form.controls.scope.patchValue(newScope);\r\n      } else {\r\n        this.scope.set(newScope);\r\n      }\r\n    });\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">\r\n      {{ title || 'Metadata' }}\r\n    </div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <p>\r\n      @if (!itemFor()) {\r\n      This item is not metadata for anything else.\r\n      }\r\n      @else {\r\n      This item is metadata for:\r\n      <br>Target: {{ itemFor().Target }}\r\n      <br>TargetType: {{ itemFor().TargetType }}\r\n      @if (itemFor().KeyNumber) {\r\n      <br>Key Number: {{ itemFor().KeyNumber }}\r\n      }\r\n      @if (itemFor().KeyGuid) {\r\n      <br>Key Guid: {{ itemFor().KeyGuid }}\r\n      }\r\n      @if (itemFor().KeyString) {\r\n      <br>Key String: {{ itemFor().KeyString }}\r\n      }\r\n      @if (itemFor().Title) {\r\n      <br>Title: {{ itemFor().Title }}\r\n      }\r\n      }\r\n    </p>\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"metadataSet().Items\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n  </div>\r\n  <mat-dialog-actions align=\"end\">\r\n    @if (recommendations().length === 0) {\r\n    <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new metadata for this item\"\r\n      (click)=\"createMetadata()\">\r\n      <mat-icon>add</mat-icon>\r\n    </button>\r\n    }\r\n    @if (recommendations().length > 0) {\r\n    <eco-fab-speed-dial class=\"eav-eco-fab-speed-dial\" [ngClass]=\"{ 'fab-opened': fabOpen() }\"\r\n      (openChange)=\"openChange($event)\">\r\n      <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n        <button mat-fab>\r\n          <mat-icon class=\"spin180\">{{ fabOpen() ? 'close' : 'add' }}</mat-icon>\r\n        </button>\r\n      </eco-fab-speed-dial-trigger>\r\n      <eco-fab-speed-dial-actions class=\"eav-eco-fab-speed-dial-actions\">\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" label=\"Other Content Type\"\r\n          (click)=\"createMetadata()\">\r\n          <mat-icon>search</mat-icon>\r\n        </button>\r\n        @for (recommendation of recommendations(); track recommendation) {\r\n        <button mat-mini-fab class=\"eav-eco-fab-speed-dial-action-button\" [attr.label]=\"recommendation.Title\"\r\n          (click)=\"createMetadata(recommendation)\">\r\n          @if (recommendation.Icon) {\r\n          <div style=\"color: white; fill: white;\" [innerHTML]=\"recommendation.Icon | safeHtml\"\r\n            [matBadgeHidden]=\"recommendation.Enabled\" matBadgeColor=\"accent\" matBadgeSize=\"small\" matBadge=\"ðŸ’Ž\"\r\n            matBadgePosition=\"below after\" aria-hidden=\"false\"></div>\r\n          } @else {\r\n          <mat-icon>add</mat-icon>\r\n          }\r\n        </button>\r\n        }\r\n      </eco-fab-speed-dial-actions>\r\n    </eco-fab-speed-dial>\r\n    }\r\n  </mat-dialog-actions>\r\n</div>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { NgClass } from '@angular/common';\r\nimport { ChangeDetectorRef, Component, computed, OnInit, signal, ViewContainerRef } from '@angular/core';\r\nimport { MatBadgeModule } from '@angular/material/badge';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialog, MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { EcoFabSpeedDialActionsComponent, EcoFabSpeedDialComponent, EcoFabSpeedDialTriggerComponent } from '@ecodev/fab-speed-dial';\r\nimport { map, take } from 'rxjs';\r\nimport { convert, Of, transient } from '../../../../core';\r\nimport { ContentItemsService } from '../content-items/services/content-items.service';\r\nimport { EavForInAdminUi } from '../edit/shared/models/eav';\r\nimport { openFeatureDialog } from '../features/shared/base-feature.component';\r\nimport { MetadataService } from '../permissions';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { MetadataKeyTypes } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { classLog } from '../shared/logging';\r\nimport { EditForm, EditPrep, ItemAddIdentifier } from '../shared/models/edit-form.model';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { SafeHtmlPipe } from '../shared/pipes/safe-html.pipe';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { EntityEditService } from '../shared/services/entity-edit.service';\r\nimport { ConfirmDeleteDialogComponent } from './confirm-delete-dialog/confirm-delete-dialog.component';\r\nimport { ConfirmDeleteDialogData } from './confirm-delete-dialog/confirm-delete-dialog.models';\r\nimport { MetadataActionsComponent } from './metadata-actions/metadata-actions.component';\r\nimport { MetadataActionsParams } from './metadata-actions/metadata-actions.models';\r\nimport { MetadataContentTypeComponent } from './metadata-content-type/metadata-content-type.component';\r\nimport { MetadataSaveDialogComponent } from './metadata-save-dialog/metadata-save-dialog.component';\r\nimport { MetadataDto, MetadataItem, MetadataRecommendation } from './models/metadata.model';\r\n\r\n@Component({\r\n    selector: 'app-metadata',\r\n    templateUrl: './metadata.component.html',\r\n    styleUrls: ['./metadata.component.scss'],\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        RouterOutlet,\r\n        SxcGridModule,\r\n        MatDialogActions,\r\n        EcoFabSpeedDialComponent,\r\n        NgClass,\r\n        EcoFabSpeedDialTriggerComponent,\r\n        EcoFabSpeedDialActionsComponent,\r\n        MatBadgeModule,\r\n        SafeHtmlPipe,\r\n    ]\r\n})\r\nexport class MetadataComponent implements OnInit {\r\n\r\n  log = classLog({ MetadataComponent });\r\n\r\n  #entitiesSvc = transient(EntityEditService);\r\n  #metadataSvc = transient(MetadataService);\r\n  #contentItemSvc = transient(ContentItemsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<MetadataComponent>,\r\n    private snackBar: MatSnackBar,\r\n    private matDialog: MatDialog,\r\n    private viewContainerRef: ViewContainerRef,\r\n    private changeDetectorRef: ChangeDetectorRef,\r\n  ) { }\r\n\r\n  gridOptions = this.#buildGridOptions();\r\n\r\n  fabOpen = signal(false);\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key', 'title', 'contentTypeStaticName']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as Of<typeof MetadataKeyTypes>,\r\n    key: p.key,\r\n    contentTypeStaticName: p.contentTypeStaticName,\r\n  }));\r\n\r\n  // 2024-11-05 2dm: broken, must inform @2dg\r\n  // itemFor = computed<EavForInAdminUi | undefined>(() => {\r\n  //   const items = this.#contentItemSvc.getAllSig(this.#params.contentTypeStaticName, undefined)\r\n  //   const item = items()?.find(i => i.Guid === this.#params.key);\r\n  //   if (item?.For)\r\n  //     return item.For;\r\n  //   return undefined;\r\n  // });\r\n\r\n  // Signal to get itemFor - must be _outside_ the computed property, otherwise it regenerates infinitely\r\n  #itemsFromHttp = this.#contentItemSvc.getAllSig(this.#params.contentTypeStaticName,  /* initial: */ null);\r\n\r\n  itemFor = computed<EavForInAdminUi | undefined>(() => {\r\n    const item = this.#itemsFromHttp()?.find(i => i.Guid === this.#params.key);\r\n    return (item?.For)\r\n      ? item.For\r\n      : undefined;\r\n  });\r\n\r\n  metadataSet = signal<MetadataDto>({ Items: [], Recommendations: [] } as MetadataDto);\r\n\r\n  recommendations = computed(() => {\r\n    const metadata = this.metadataSet();\r\n    return metadata.Recommendations.filter(r =>\r\n      metadata.Items.filter(i => i._Type.Id === r.Id).length < r.Count\r\n    );\r\n  });\r\n\r\n  protected title = (() => {\r\n    try {\r\n      return decodeURIComponent(this.#dialogRoutes.getParam('title') ?? '');\r\n    } catch (e) {\r\n      console.error('Couldn\\'t properly decode title');\r\n      return this.#dialogRoutes.getParam('title') ?? '';\r\n    }\r\n  })();\r\n\r\n  ngOnInit() {\r\n    this.#fetchMetadata();\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.#fetchMetadata());\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  openChange(open: boolean) {\r\n    this.fabOpen.set(open);\r\n  }\r\n\r\n  createMetadata(recommendation?: MetadataRecommendation) {\r\n    if (recommendation) {\r\n      // If the feature is not enabled, open the info dialog instead of metadata\r\n      if (!recommendation.Enabled) {\r\n        openFeatureDialog(this.matDialog, recommendation.MissingFeature, this.viewContainerRef, this.changeDetectorRef);\r\n        return;\r\n      }\r\n      // Feature is enabled, check if it's an empty metadata\r\n      if (recommendation.CreateEmpty) {\r\n        this.snackBar.open(`Creating ${recommendation.Name}...`);\r\n        this.#entitiesSvc.create(recommendation.Id, { For: this.calculateItemFor('dummy').For }).subscribe({\r\n          error: () => {\r\n            this.snackBar.open(`Creating ${recommendation.Name} failed. Please check console for more info`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n          next: () => {\r\n            this.snackBar.open(`Created ${recommendation.Name}`, undefined, { duration: 3000 });\r\n            this.#fetchMetadata();\r\n          },\r\n        });\r\n      } else {\r\n        // Default case - open new-metadata dialog\r\n        this.createMetadataForm(recommendation.Id);\r\n      }\r\n      return;\r\n    }\r\n    const metadataDialogRef = this.matDialog.open(MetadataSaveDialogComponent, {\r\n      autoFocus: false,\r\n      viewContainerRef: this.viewContainerRef,\r\n      width: '650px',\r\n    });\r\n    metadataDialogRef.afterClosed().subscribe((contentType?: string) => {\r\n      if (contentType == null) return;\r\n      this.createMetadataForm(contentType);\r\n    });\r\n  }\r\n\r\n  private createMetadataForm(contentType: string) {\r\n    const form: EditForm = {\r\n      items: [this.calculateItemFor(contentType)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n    this.changeDetectorRef.markForCheck();\r\n  }\r\n\r\n  private calculateItemFor(contentType: string): ItemAddIdentifier {\r\n    const x = EditPrep.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key);\r\n    return EditPrep.newMetadataFromInfo(contentType, x);\r\n  }\r\n\r\n  #fetchMetadata() {\r\n    const logGetMetadata = this.log.rxTap('getMetadata');\r\n    this.#metadataSvc.getMetadata(this.#params.targetType, this.#params.keyType, this.#params.key)\r\n      .pipe(\r\n        logGetMetadata.pipe(),\r\n        take(1),\r\n        map(metadata => {\r\n          metadata.Recommendations.forEach(r => {\r\n            if (r.Icon?.startsWith('base64:')) {\r\n              r.Icon = r.Icon.replace('base64:', '');\r\n              r.Icon = window.atob(r.Icon);\r\n              // used for coloring black icons to white\r\n              r.Icon = r.Icon.replace('fill=\"#000000\"', 'fill=\"#ffffff\"');\r\n            }\r\n          });\r\n          return metadata;\r\n        }),\r\n        logGetMetadata.map(),\r\n      )\r\n      // 2024-05-30 2dm - this standard shorthand seems to fail\r\n      // for reasons unknown to me. I've replaced it with the longhand\r\n      // The problem occurs when the metadataSet$ is updated after the initial load.\r\n      // .subscribe(this.metadataSet$);\r\n      .subscribe(data => {\r\n        this.metadataSet.set(data);\r\n      }\r\n      );\r\n  }\r\n\r\n  #editMetadata(metadata: MetadataItem) {\r\n    const form: EditForm = {\r\n      items: [EditPrep.editId(metadata.Id)],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  #deleteMetadata(metadata: MetadataItem, confirmed = false) {\r\n    if (!confirmed) {\r\n      const data: ConfirmDeleteDialogData = {\r\n        entityId: metadata.Id,\r\n        entityTitle: metadata.Title,\r\n        message: this.metadataSet().Recommendations.find(r => r.Id === metadata._Type.Id)?.DeleteWarning,\r\n      };\r\n      const confirmationDialogRef = this.matDialog.open(ConfirmDeleteDialogComponent, {\r\n        autoFocus: false,\r\n        data,\r\n        viewContainerRef: this.viewContainerRef,\r\n        width: '400px',\r\n      });\r\n      confirmationDialogRef.afterClosed().subscribe((isConfirmed: boolean) => {\r\n        if (isConfirmed)\r\n          this.#deleteMetadata(metadata, true);\r\n      });\r\n      return;\r\n    }\r\n\r\n    this.snackBar.open('Deleting...');\r\n    this.#entitiesSvc.delete(metadata._Type.Id, metadata.Id, false).subscribe({\r\n      next: () => {\r\n        this.snackBar.open('Deleted', null, { duration: 2000 });\r\n        this.#fetchMetadata();\r\n      },\r\n      error: () => {\r\n        this.snackBar.open('Delete failed. Please check console for more information', null, { duration: 3000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  #buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.IdWithDefaultRenderer,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<MetadataItem>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Title',\r\n          onCellClicked: (p: { data: MetadataItem }) => this.#editMetadata(p.data),\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Content Type',\r\n          field: 'ContentType',\r\n          valueGetter: (p: { data: MetadataItem }) => `${p.data._Type.Name}${p.data._Type.Title !== p.data._Type.Name ? ` (${p.data._Type.Title})` : ''}`,\r\n          cellRenderer: MetadataContentTypeComponent,\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: MetadataActionsComponent,\r\n          cellRendererParams: (() => ({\r\n            onDelete: (metadata) => this.#deleteMetadata(metadata),\r\n          } satisfies MetadataActionsParams))(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","import { Route } from '@angular/router';\r\nimport { Of } from '../../../../core';\r\nimport { eavConstants, MetadataKeyTypes } from '../shared/constants/eav.constants';\r\n\r\nexport class GoToPermissions {\r\n\r\n  static route: Route = {\r\n    path: 'permissions/:targetType/:keyType/:key',\r\n    loadChildren: () => import('./permissions.routing').then(m => m.permissionRoutes),\r\n    // loadChildren: () => import('./permissions.module').then(m => m.PermissionsModule),\r\n    data: { title: 'Permissions' },\r\n  };\r\n\r\n  static getUrl(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string): string {\r\n    return `permissions/${targetType}/${keyType}/${key}`;\r\n  }\r\n\r\n  static getUrlApp(appId: number): string {\r\n    return this.getUrl(eavConstants.metadata.app.targetType, eavConstants.metadata.app.keyType, appId.toString());\r\n  }\r\n\r\n  static getUrlAttribute(id: number): string {\r\n    return this.getUrl(eavConstants.metadata.attribute.targetType, eavConstants.metadata.attribute.keyType, id.toString());\r\n  }\r\n\r\n  /** For historic reasons, it's the same as Entity */\r\n  static getUrlContentType(guid: string): string {\r\n    return this.getUrlEntity(guid);\r\n  }\r\n\r\n  static getUrlEntity(guid: string): string {\r\n    return this.getUrl(eavConstants.metadata.entity.targetType, eavConstants.metadata.entity.keyType, guid);\r\n  }\r\n\r\n  static getUrlLanguage(id: string): string {\r\n    return this.getUrl(eavConstants.metadata.language.targetType, eavConstants.metadata.language.keyType, id);\r\n  }\r\n\r\n}\r\n","import { DialogConfig } from '../shared/models/dialog-config.model';\r\n\r\nexport const permissionsDialog: DialogConfig = {\r\n  name: 'SET_PERMISSIONS_DIALOG',\r\n  initContext: true,\r\n  panelSize: 'large',\r\n  panelClass: null,\r\n\r\n  async getComponent() {\r\n    const { PermissionsComponent } = await import('./permissions.component');\r\n    return PermissionsComponent;\r\n  }\r\n};\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ICellRendererParams } from '@ag-grid-community/core';\r\nimport { Component } from '@angular/core';\r\nimport { MatRippleModule } from '@angular/material/core';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { TippyDirective } from '../../shared/directives/tippy.directive';\r\nimport { Permission } from '../models/permission.model';\r\nimport { PermissionsActionsParams } from './permissions-actions.models';\r\n\r\n@Component({\r\n    selector: 'app-permissions-actions',\r\n    templateUrl: './permissions-actions.component.html',\r\n    imports: [\r\n        MatRippleModule,\r\n        MatIconModule,\r\n        TippyDirective,\r\n    ]\r\n})\r\nexport class PermissionsActionsComponent implements ICellRendererAngularComp {\r\n  private params: ICellRendererParams & PermissionsActionsParams;\r\n\r\n  agInit(params: ICellRendererParams & PermissionsActionsParams): void {\r\n    this.params = params;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  deletePermission(): void {\r\n    const permission: Permission = this.params.data;\r\n    this.params.onDelete(permission);\r\n  }\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"eav-grid-action-button highlight\" matRipple tippy=\"Delete\" (click)=\"deletePermission()\">\r\n    <mat-icon>delete</mat-icon>\r\n  </div>\r\n</div>\r\n","import { GridOptions } from '@ag-grid-community/core';\r\nimport { Component, OnInit, signal } from '@angular/core';\r\nimport { MatButtonModule } from '@angular/material/button';\r\nimport { MatDialogActions, MatDialogRef } from '@angular/material/dialog';\r\nimport { MatIconModule } from '@angular/material/icon';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { RouterOutlet } from '@angular/router';\r\nimport { convert, Of, transient } from '../../../../core';\r\nimport { ColumnDefinitions } from '../shared/ag-grid/column-definitions';\r\nimport { defaultGridOptions } from '../shared/constants/default-grid-options.constants';\r\nimport { eavConstants, MetadataKeyTypes } from '../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../shared/helpers/url-prep.helper';\r\nimport { EditForm, EditPrep } from '../shared/models/edit-form.model';\r\nimport { SxcGridModule } from '../shared/modules/sxc-grid-module/sxc-grid.module';\r\nimport { DialogRoutingService } from '../shared/routing/dialog-routing.service';\r\nimport { Permission } from './models/permission.model';\r\nimport { PermissionsActionsComponent } from './permissions-actions/permissions-actions.component';\r\nimport { PermissionsActionsParams } from './permissions-actions/permissions-actions.models';\r\nimport { PermissionsService } from './services/permissions.service';\r\n\r\n@Component({\r\n    selector: 'app-permissions',\r\n    templateUrl: './permissions.component.html',\r\n    imports: [\r\n        MatButtonModule,\r\n        MatIconModule,\r\n        RouterOutlet,\r\n        MatDialogActions,\r\n        SxcGridModule,\r\n    ]\r\n})\r\nexport class PermissionsComponent implements OnInit {\r\n  gridOptions = this.buildGridOptions();\r\n  permissions = signal<Permission[]>([]);\r\n  #permissionsService = transient(PermissionsService);\r\n  #dialogRoutes = transient(DialogRoutingService);\r\n\r\n  #params = convert(this.#dialogRoutes.getParams(['targetType', 'keyType', 'key']), p => ({\r\n    targetType: parseInt(p.targetType, 10),\r\n    keyType: p.keyType as Of<typeof MetadataKeyTypes>,\r\n    key: p.key,\r\n  }));\r\n\r\n  #prefills: Record<string, Record<string, string>> = {\r\n    [eavConstants.metadata.language.targetType]: {\r\n      PermissionType: 'language',\r\n    },\r\n  };\r\n\r\n  constructor(\r\n    private dialog: MatDialogRef<PermissionsComponent>,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.#fetchPermissions();\r\n    this.#dialogRoutes.doOnDialogClosed(() => this.#fetchPermissions());\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialog.close();\r\n  }\r\n\r\n  #fetchPermissions() {\r\n    this.#permissionsService.getAll(this.#params.targetType, this.#params.keyType, this.#params.key)\r\n      .subscribe(permissions => {\r\n        this.permissions.set(permissions);\r\n      });\r\n  }\r\n\r\n  editPermission(permission?: Permission) {\r\n    let form: EditForm;\r\n    if (permission == null) {\r\n      form = {\r\n        items: [{\r\n          ...EditPrep.newMetadataFromInfo(\r\n            eavConstants.contentTypes.permissions,\r\n            EditPrep.constructMetadataInfo(this.#params.targetType, this.#params.keyType, this.#params.key)\r\n          ),\r\n          ...(this.#prefills[this.#params.targetType] && { Prefill: this.#prefills[this.#params.targetType] }),\r\n        }],\r\n      };\r\n    } else {\r\n      form = {\r\n        items: [EditPrep.editId(permission.Id)],\r\n      };\r\n    }\r\n    const formUrl = convertFormToUrl(form);\r\n    this.#dialogRoutes.navRelative([`edit/${formUrl}`]);\r\n  }\r\n\r\n  private deletePermission(permission: Permission) {\r\n    if (!confirm(`Delete '${permission.Title}' (${permission.Id})?`)) return;\r\n    this.snackBar.open('Deleting...');\r\n    this.#permissionsService.delete(permission.Id).subscribe(() => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.#fetchPermissions();\r\n    });\r\n  }\r\n\r\n  private buildGridOptions(): GridOptions {\r\n    const gridOptions: GridOptions = {\r\n      ...defaultGridOptions,\r\n      columnDefs: [\r\n        {\r\n          ...ColumnDefinitions.Id,\r\n          cellRendererParams: ColumnDefinitions.idFieldParamsTooltipGetter<Permission>()\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          headerName: 'Name',\r\n          field: 'Title',\r\n          sort: 'asc',\r\n          onCellClicked: (params) => {\r\n            const permission: Permission = params.data;\r\n            this.editPermission(permission);\r\n          },\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Identity',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.TextWide,\r\n          field: 'Condition',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.Character,\r\n          field: 'Grant',\r\n        },\r\n        {\r\n          ...ColumnDefinitions.ActionsPinnedRight1,\r\n          cellRenderer: PermissionsActionsComponent,\r\n          cellRendererParams: (() => {\r\n            const params: PermissionsActionsParams = {\r\n              onDelete: (permission) => this.deletePermission(permission),\r\n            };\r\n            return params;\r\n          })(),\r\n        },\r\n      ],\r\n    };\r\n    return gridOptions;\r\n  }\r\n}\r\n","<div class=\"eav-dialog nav-component-wrapper\">\r\n  <div class=\"eav-dialog-header\">\r\n    <div class=\"eav-dialog-header__title\">Permissions</div>\r\n    <button mat-icon-button tippy=\"Close dialog\" (click)=\"closeDialog()\">\r\n      <mat-icon>close</mat-icon>\r\n    </button>\r\n  </div>\r\n  <div class=\"eav-dialog-content nav-component-wrapper\">\r\n    <router-outlet></router-outlet>\r\n    <div class=\"grid-wrapper\">\r\n      <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"permissions()\" [gridOptions]=\"gridOptions\">\r\n      </ag-grid-angular>\r\n    </div>\r\n    <mat-dialog-actions align=\"end\">\r\n      <button mat-fab mat-elevation-z24 class=\"grid-fab\" tippy=\"Create a new permission\" (click)=\"editPermission(null)\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </mat-dialog-actions>\r\n  </div>\r\n</div>\r\n","import { Routes } from '@angular/router';\r\nimport { DialogEntryComponent } from '../shared/components/dialog-entry/dialog-entry.component';\r\nimport { permissionsDialog } from './permissions-dialog.config';\r\nimport { EditRoutes } from '../edit/edit.routing';\r\n\r\nexport const permissionRoutes: Routes = [\r\n  {\r\n    path: '',\r\n    component: DialogEntryComponent,\r\n    data: { dialog: permissionsDialog },\r\n    children: EditRoutes\r\n  },\r\n];\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { Of } from '../../../../../core';\r\nimport { MetadataDto } from '../../metadata';\r\nimport { MetadataKeyTypes } from '../../shared/constants/eav.constants';\r\nimport { HttpServiceBase } from '../../shared/services/http-service-base';\r\n\r\nconst webApiRoot = 'admin/metadata/get';\r\n\r\n@Injectable()\r\nexport class MetadataService extends HttpServiceBase {\r\n  /**\r\n   * Fetches metadata for given key in metadata content type\r\n   * @param targetType type of target metadata item is for, e.g. for Entity, or ContentType\r\n   * @param keyType e.g. for keyType === guid, key === contentTypeStaticName\r\n   * @param key key of target metadata item is for\r\n   * @param contentTypeName name of content type where permissions are stored. If blank, backend returns all metadata except permissions\r\n   */\r\n  getMetadata(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string | number, contentTypeName?: string): Observable<MetadataDto> {\r\n    return this.getHttp<MetadataDto>(webApiRoot, {\r\n      params: {\r\n        appId: this.appId,\r\n        targetType: targetType.toString(),\r\n        keyType,\r\n        key: key.toString(),\r\n        ...(contentTypeName && { contentType: contentTypeName }),\r\n      },\r\n    });\r\n  }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { map, Observable } from 'rxjs';\r\nimport { Of, transient } from '../../../../../core';\r\nimport { eavConstants, MetadataKeyTypes } from '../../shared/constants/eav.constants';\r\nimport { EntityEditService } from '../../shared/services/entity-edit.service';\r\nimport { Permission } from '../models/permission.model';\r\nimport { MetadataService } from './metadata.service';\r\n\r\n@Injectable()\r\nexport class PermissionsService {\r\n\r\n  private metadataService = transient(MetadataService);\r\n\r\n  private entitiesService = transient(EntityEditService);\r\n\r\n  getAll(targetType: number, keyType: Of<typeof MetadataKeyTypes>, key: string): Observable<Permission[]> {\r\n    return this.metadataService.getMetadata(targetType, keyType, key, eavConstants.contentTypes.permissions).pipe(\r\n      map(metadata => metadata.Items as Permission[]),\r\n    );\r\n  }\r\n\r\n  delete(id: number) {\r\n    return this.entitiesService.delete(eavConstants.contentTypes.permissions, id, false);\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\">\r\n  @switch (isError()) {\r\n    @case (false) {\r\n      <mat-hint>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-hint>\r\n    }\r\n    @case (true) {\r\n      <mat-error>\r\n        <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n      </mat-error>\r\n    }\r\n  }\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { NgClass, NgTemplateOutlet } from '@angular/common';\r\nimport { Component, input } from '@angular/core';\r\nimport { MatFormFieldModule } from '@angular/material/form-field';\r\n\r\n@Component({\r\n    selector: 'app-field-hint',\r\n    templateUrl: './field-hint.component.html',\r\n    styleUrls: ['./field-hint.component.scss'],\r\n    imports: [\r\n        MatFormFieldModule,\r\n        NgClass,\r\n        NgTemplateOutlet\r\n    ]\r\n})\r\nexport class FieldHintComponent {\r\n  isError = input<boolean>(false);\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n","export const dropdownInsertValue = 'DROPDOWN_INSERT_VALUE' as const;\r\n","import { Directive, HostListener } from '@angular/core';\r\nimport { classLog } from '../logging';\r\n\r\n@Directive({\r\n  selector: '[appClickStopPropagation]',\r\n})\r\nexport class ClickStopPropagationDirective {\r\n\r\n  log = classLog({ClickStopPropagationDirective});\r\n\r\n  // Log constructor to detect that it was really attached/created\r\n  constructor() {\r\n    this.log.a('constructor');\r\n  }\r\n\r\n  @HostListener('click', ['$event'])\r\n  onClick(event: MouseEvent): void {\r\n    this.log.a('onClick', { event });\r\n    event.stopPropagation();\r\n\r\n    // This should never be added here, as it's often on a link, and the default behavior (link open) should happen\r\n    // event.preventDefault();\r\n  }\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { EavFor } from '../../edit/shared/models/eav';\r\nimport { ItemInListIdentifier } from '../models/edit-form.model';\r\nimport { webApiEntityRoot } from './entity.service';\r\nimport { HttpServiceBase } from './http-service-base';\r\n\r\n@Injectable()\r\nexport class EntityEditService extends HttpServiceBase {\r\n\r\n  create<T = QuickEntityResponse>(contentType: string, entity: QuickEntityRequest): Observable<T> {\r\n    return this.http.post<T>(`app/auto/data/${contentType}`, entity, {\r\n      params: { appId: this.appId, zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  update<T = QuickEntityResponse>(contentType: string, entityId: number, entity: QuickEntityRequest): Observable<T> {\r\n    return this.http.post<T>(`app/auto/data/${contentType}/${entityId}`, entity, {\r\n      params: { appId: this.appId, zoneId: this.zoneId },\r\n    });\r\n  }\r\n\r\n  delete(type: string, id: number, tryForce: boolean) {\r\n    return this.http.delete<null>(this.apiUrl(webApiEntityRoot + 'delete'), {\r\n      params: { contentType: type, id: id.toString(), appId: this.appId, force: tryForce.toString() },\r\n    });\r\n  }\r\n}\r\n\r\ninterface QuickEntityRequest {\r\n  /** Metadata target */\r\n  For?: EavFor;\r\n  /** Parent linking target (add to this entity) */\r\n  ParentRelationship?: ItemInListIdentifier;\r\n  [field: string]: any;\r\n}\r\n\r\ninterface QuickEntityResponse {\r\n  Created: string;\r\n  Guid: string;\r\n  Id: number;\r\n  Modified: string;\r\n  [field: string]: any;\r\n}\r\n","import { Injectable, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\n/**\r\n * Base class for services - just to standardize use of subscriptions.\r\n * Has @Injectable() just to allow it ot use the standard OnDestroy interface.\r\n */\r\n@Injectable()\r\nexport abstract class ServiceBase implements OnDestroy {\r\n\r\n  protected subscriptions = new Subscription();\r\n\r\n  ngOnDestroy(): void {\r\n    this.destroy();\r\n  }\r\n\r\n  // TODO: TRY TO GET RID OF THIS. AFAIK it's just used in the mask, which should switch over to signals.\r\n  destroy() {\r\n    this.subscriptions.unsubscribe();\r\n  }\r\n}\r\n"],"x_google_ignoreList":[]}