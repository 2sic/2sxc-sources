"use strict";(self.webpackChunkeav_ui=self.webpackChunkeav_ui||[]).push([["projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts"],{7693:(O,u,t)=>{t.d(u,{X:()=>c,g:()=>v});var e=t(7580),_=t(271),l=t(6474);const c="admin/type/",h="admin/type/get",n="admin/type/list",o="admin/type/scopes";let v=(()=>{class a extends l.D{retrieveContentType(r){return this.getHttpApiUrl(h,{params:{appId:this.appId,contentTypeId:r}})}retrieveContentTypeSig(r,m){return this.getSignal(h,{params:{appId:this.appId,contentTypeId:r}},m)}retrieveContentTypes(r){return this.getHttpApiUrl(n,{params:{appId:this.appId,scope:r}})}retrieveContentTypesSig(r,m){return this.getSignal(n,{params:{appId:this.appId,scope:r}},m)}getScopes(){return this.getHttpApiUrl(o,{params:{appId:this.appId}}).pipe((0,_.T)(r=>{const m=r.old;return Object.keys(m).map(M=>({name:m[M],value:M}))}))}getScopesSig(r){const m=this.getSignal(o,{params:{appId:this.appId}},r);return(0,e.EWP)(()=>{const M=m();if(!M||!M.old)return[];const I=M.old;return Object.keys(I).map(D=>({name:I[D],value:D}))})}getScopesV2(){return this.getHttpApiUrl(o,{params:{appId:this.appId}}).pipe((0,_.T)(r=>r.scopes))}save(r){return this.http.post(this.apiUrl("admin/type/save"),r,{params:{appid:this.appId}})}delete(r){return this.http.delete(this.apiUrl("admin/type/delete"),{params:{appid:this.appId,staticName:r.NameId}})}import(r){const m=new FormData;for(const E of r)m.append("File",E);return this.http.post(this.apiUrl("admin/type/import"),m,{params:{appId:this.appId,zoneId:this.zoneId}})}createGhost(r){return this.http.post(this.apiUrl("admin/type/addghost"),null,{params:{appid:this.appId,sourceNameId:r}})}static{this.\u0275fac=(()=>{let r;return function(E){return(r||(r=e.xGo(a)))(E||a)}})()}static{this.\u0275prov=e.jDH({token:a,factory:a.\u0275fac})}}return a})()},1475:(O,u,t)=>{t.d(u,{j:()=>h});var e=t(6474),_=t(8624),l=t(7580);let h=(()=>{class n extends e.D{getContentInfo(d,p){return this.getSignal("admin/appParts/get",{params:{appid:this.appId,zoneId:this.zoneId,scope:d}},p)}exportParts(d,p,s){const g=this.apiUrl(_.Q+"Export")+"?appId="+this.appId+"&zoneId="+this.zoneId+"&contentTypeIdsString="+d.join(";")+"&entityIdsString="+p.join(";")+"&templateIdsString="+s.join(";");window.open(g,"_blank","")}static{this.\u0275fac=(()=>{let d;return function(s){return(d||(d=l.xGo(n)))(s||n)}})()}static{this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac})}}return n})()},320:(O,u,t)=>{t.d(u,{t:()=>n});var e=t(1772),_=t(6474),l=t(7580);let n=(()=>{class o extends _.D{getAppInfo(p){return this.getSignal("admin/app/Statistics",{params:{appid:this.appId,zoneId:this.zoneId}},p)}exportAppUrl(){return`${this.apiUrl(`${e.u}Export`)}?appId=${this.appId}&zoneId=${this.zoneId}`}exportForVersionControl({includeContentGroups:p,resetAppGuid:s,withFiles:g}){return this.getHttpApiUrl("admin/app/SaveData",{params:{appid:this.appId,zoneId:this.zoneId,includeContentGroups:p.toString(),resetAppGuid:s.toString(),withPortalFiles:g.toString()}})}static{this.\u0275fac=(()=>{let p;return function(g){return(p||(p=l.xGo(o)))(g||o)}})()}static{this.\u0275prov=l.jDH({token:o,factory:o.\u0275fac})}}return o})()},8624:(O,u,t)=>{t.d(u,{Q:()=>c,S:()=>h});var e=t(1772),_=t(6474),l=t(7580);const c="admin/appParts/";let h=(()=>{class n extends _.D{importAppParts(d){const p=new FormData;return p.append("File",d),this.http.post(this.apiUrl(c+"Import"),p,{params:{appId:this.appId,zoneId:this.zoneId}})}resetApp(d){return this.http.post(this.apiUrl(e.u+"Reset"),{},{params:{appId:this.appId,zoneId:this.zoneId,withPortalFiles:d.toString()}})}static{this.\u0275fac=(()=>{let d;return function(s){return(d||(d=l.xGo(n)))(s||n)}})()}static{this.\u0275prov=l.jDH({token:n,factory:n.\u0275fac})}}return n})()},5445:(O,u,t)=>{t.d(u,{Cu:()=>n.Cu,JL:()=>n.JL,Mk:()=>n.Mk,X6:()=>_.X,ei:()=>n.ei,gs:()=>_.g,tr:()=>e.t,vN:()=>n.vN,xR:()=>n.xR,y0:()=>o.y});var e=t(1479),_=t(7693),n=(t(1475),t(320),t(8624),t(6460)),o=t(2570)},6460:(O,u,t)=>{t.d(u,{Cu:()=>a,JL:()=>i,Mk:()=>g,ei:()=>v,vN:()=>r,xR:()=>m});var e=t(4600),_=t(6647),l=t(271),c=t(693),h=t(9234),n=t(6474),o=t(7580);const g="admin/query/Run",v="admin/query/DebugStream",a="admin/query/Save",i="admin/query/Get",r="admin/query/DataSources";let m=(()=>{class E extends n.D{getAll(I){return this.getHttpApiUrl(h.Gg,{params:{appId:this.appId,contentType:I}})}getAllSig(I,D){return this.getSignal(h.Gg,{params:{appId:this.appId,contentType:I}},D)}importQuery(I){return(0,e.H)((0,c.n)(I)).pipe((0,_.n)(D=>this.http.post(this.apiUrl("admin/query/import"),{AppId:this.appId,ContentBase64:D})),(0,l.T)(D=>({Success:D,Messages:[]})))}clonePipeline(I){return this.getHttpApiUrl("admin/query/Clone",{params:{Id:I.toString(),appId:this.appId}})}delete(I){return this.http.delete(this.apiUrl("admin/query/Delete"),{params:{appId:this.appId,Id:I.toString()}})}static{this.\u0275fac=(()=>{let I;return function(C){return(I||(I=o.xGo(E)))(C||E)}})()}static{this.\u0275prov=o.jDH({token:E,factory:E.\u0275fac})}}return E})()},2570:(O,u,t)=>{t.d(u,{y:()=>p});var e=t(6474),_=t(7580);let p=(()=>{class s extends e.D{getAll(){return this.getSignal("admin/view/all",{params:{appId:this.appId}})}delete(v){return this.getHttpApiUrl("admin/view/delete",{params:{appId:this.appId,Id:v.toString()}})}import(v){const a=new FormData;return a.append("File",v),this.http.post(this.apiUrl("admin/view/import"),a,{params:{appId:this.appId,zoneId:this.zoneId}})}export(v){const a=this.apiUrl("admin/view/json")+"?appId="+this.appId+"&viewId="+v;window.open(a,"_blank","")}getPolymorphism(){return this.getSignal("admin/view/polymorphism",{params:{appId:this.appId}})}getUsage(v){return this.getSignal("admin/view/usage",{params:{appId:this.appId,guid:v}})}static{this.\u0275fac=(()=>{let v;return function(i){return(v||(v=_.xGo(s)))(i||s)}})()}static{this.\u0275prov=_.jDH({token:s,factory:s.\u0275fac})}}return s})()},7756:(O,u,t)=>{t.r(u),t.d(u,{AppsManagementNavComponent:()=>B});var e=t(7580),_=t(4175),l=t(3840),c=t(7049),h=t(9552),n=t(2159),o=t(3011),d=t(2938),p=t(5445),s=t(1808),g=t(5699),v=t(8471),a=t(8873);const i=[{name:"System",path:"system",icon:"settings",tippy:"System Info",child:[{name:"Register",path:"registration",icon:"how_to_reg",tippy:"Register this System on 2sxc Patrons"}]},{name:"Apps",path:"list",icon:"star",tippy:"Apps"},{name:"Languages",path:"languages",icon:"translate",tippy:"Languages"},{name:"Extensions / Features",path:"license",icon:"tune",tippy:"Extensions and Features"}];var r=t(7941),m=t(7912);const E=["sidenav"],M=(P,T)=>T.path;function I(P,T){if(1&P&&(e.j41(0,"mat-icon",13),e.EFF(1,"chevron_right"),e.k0s(),e.EFF(2)),2&P){const A=e.XpG().$implicit;e.R7$(2),e.SpI(" ",A," ")}}function D(P,T){if(1&P&&(e.qex(0),e.DNE(1,I,3,1),e.bVm()),2&P){const A=T.last;e.R7$(),e.vxM(A?1:-1)}}function C(P,T){}function R(P,T){1&P&&e.nrm(0,"app-nav-item-list",10),2&P&&e.Y8G("navItem",T.$implicit)}let B=(()=>{class P{#t;#e;constructor(A,f,y){this.dialog=A,this.context=f,this.media=y,this.#t=(0,e.WQX)(p.tr),this.zoneId=this.context.zoneId,this.smallScreen=this.media.matchMedia("(max-width: 1000px)"),this.sideNavOpened=!this.smallScreen.matches,this.navItems=i,this.#e=(0,d.d)(v.c)}ngOnInit(){this.fetchDialogSettings(),this.#e.doOnDialogClosed(()=>this.fetchDialogSettings()),this.smallScreen.addEventListener("change",A=>(this.sidenav.opened=!A.matches,this.sidenav.mode=A.matches?"over":"side"))}closeDialog(){this.dialog.close()}fetchDialogSettings(){this.#t.getShared$(0).subscribe()}static{this.\u0275fac=function(f){return new(f||P)(e.rXU(r.CP),e.rXU(a.o),e.rXU(m.DY))}}static{this.\u0275cmp=e.VBU({type:P,selectors:[["app-apps-management-nav"]],viewQuery:function(f,y){if(1&f&&e.GBs(E,5),2&f){let U;e.mGM(U=e.lsd())&&(y.sidenav=U.first)}},decls:26,vars:4,consts:[["emptyTemplate",""],["sidenav",""],["appToggleDebug",""],[1,"toolbar-container"],[1,"menu-container",3,"click"],[3,"separator"],[4,"xngBreadcrumbItem"],[1,"toolbar-spacer"],["mat-icon-button","","tippy","Close dialog",3,"click"],[3,"mode","opened"],[3,"navItem"],[1,"sideNav-bottom-info"],[1,"container-content"],[1,"breadcrumb-icon"]],template:function(f,y){if(1&f){const U=e.RV6();e.j41(0,"mat-toolbar",2)(1,"div",3)(2,"mat-icon",4),e.bIt("click",function(){e.eBV(U);const x=e.sdS(17);return e.Njj(x.opened=!x.opened)}),e.EFF(3,"menu"),e.k0s(),e.j41(4,"div")(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"xng-breadcrumb",5),e.DNE(8,D,2,1,"ng-container",6),e.k0s(),e.DNE(9,C,0,0,"ng-template",null,0,e.C5r),e.k0s(),e.nrm(11,"span",7),e.j41(12,"button",8),e.bIt("click",function(){return e.eBV(U),e.Njj(y.closeDialog())}),e.j41(13,"mat-icon"),e.EFF(14,"close"),e.k0s()()(),e.j41(15,"mat-sidenav-container",2)(16,"mat-sidenav",9,1),e.Z7z(18,R,1,1,"app-nav-item-list",10,M),e.j41(20,"div",11)(21,"p"),e.EFF(22,"use Burger icon to show/hide menu"),e.k0s()()(),e.j41(23,"mat-sidenav-content")(24,"div",12),e.nrm(25,"router-outlet"),e.k0s()()()}if(2&f){const U=e.sdS(10);e.R7$(6),e.SpI(" Manage Zone ",y.zoneId," "),e.R7$(),e.Y8G("separator",U),e.R7$(9),e.Y8G("mode",y.smallScreen.matches?"over":"side")("opened",y.sideNavOpened),e.R7$(2),e.Dyx(y.navItems)}},dependencies:[h.s5,h.KQ,l.m_,l.An,o._S,o.Dg,o._Y,_.Hl,_.iY,c.vg,c.LG,c.US,c.El,n.n3,s.a,g.V],styles:["mat-toolbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid rgba(0,0,0,.1);position:sticky;top:0;z-index:10;flex:1 0 74px}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]{display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   .menu-container[_ngcontent-%COMP%]{margin-right:16px;cursor:pointer}mat-toolbar[_ngcontent-%COMP%]   .toolbar-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px;border:1px solid rgba(0,0,0,.2);border-radius:16px 0;margin-right:16px;-webkit-user-select:none;user-select:none;text-shadow:none;cursor:pointer;display:flex;align-items:center}mat-toolbar[_ngcontent-%COMP%]   .toolbar-spacer[_ngcontent-%COMP%]{flex:1 1 auto}mat-toolbar[_ngcontent-%COMP%]   .mat-icon-admin[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]{width:295px;border-right:1px solid rgba(0,0,0,.1)}mat-sidenav-container[_ngcontent-%COMP%]   mat-sidenav[_ngcontent-%COMP%]   .sideNav-bottom-info[_ngcontent-%COMP%]{position:absolute;bottom:0;text-align:center;width:100%;font-size:12px}.container-content[_ngcontent-%COMP%]{height:100%}.active[_ngcontent-%COMP%]{background-color:#8080801a}  .xng-breadcrumb-separator{margin-left:0!important;margin-right:0!important}  .mat-drawer-container{background-color:transparent!important}"]})}}return P})()},1772:(O,u,t)=>{t.d(u,{I:()=>o,u:()=>n});var e=t(6647),_=t(9452),l=t(3550),c=t(6474),h=t(7580);const n="admin/app/";let o=(()=>{class d extends c.D{importApp(s,g,v=!1){const a=new FormData;return a.append("File",s),a.append("Name",g??""),this.http.post(this.apiUrl(n+"Import"),a,{params:{zoneId:this.zoneId}}).pipe((0,e.n)(i=>{if(v&&i.Messages[0]?.MessageType===l.G1.Warning){const r=prompt(i.Messages[0].Text+" Would you like to install it using another folder name?");if(r)return this.importApp(s,r,!0)}return(0,_.of)(i)}))}static{this.\u0275fac=(()=>{let s;return function(v){return(s||(s=h.xGo(d)))(v||d)}})()}static{this.\u0275prov=h.jDH({token:d,factory:d.\u0275fac})}}return d})()},693:(O,u,t)=>{function e(l){return new Promise((c,h)=>{const n=new FileReader;n.readAsDataURL(l),n.onload=()=>{c(n.result.split(",")[1])},n.onerror=o=>{h(o)}})}function _(l){return new Promise((c,h)=>{const n=new FileReader;n.readAsText(l),n.onload=()=>{c(n.result)},n.onerror=o=>{h(o)}})}t.d(u,{d:()=>_,n:()=>e})},8471:(O,u,t)=>{t.d(u,{c:()=>s});var e=t(2159),_=t(1567),l=t(3037),c=t(271),h=t(5057),n=t(4435),o=t(4979),d=t(7580);const p={doOnDialogClosed:!0};let s=(()=>{class g extends o.V{constructor(a,i){super(),this.router=a,this.route=i,this.log=(0,n.Tq)({DialogRoutingService:g},p)}get snapshot(){return this.route.snapshot}get url(){return this.router.url}getParam(a){return this.route.snapshot.paramMap.get(a)}getParams(a){const i=this.route.snapshot.paramMap;return a.reduce((r,m)=>(r[m]=i.get(m),r),{})}getQueryParam(a){return this.route.snapshot.queryParamMap.get(a)}getQueryParams(a){const i=this.route.snapshot.queryParamMap;return a.reduce((r,m)=>(r[m]=i.get(m),r),{})}state(){return this.router.getCurrentNavigation().extras?.state}doOnDialogClosed(a){const i=this.log.fnIf("doOnDialogClosed");this.subscriptions.add(this.childDialogClosed$().subscribe(()=>a())),i.end()}urlSubRoute(a){const i=this.router.createUrlTree([a],{relativeTo:this.route});return this.router.serializeUrl(i)}navPath(a,i){return this.router.navigate([a],i)}navRelative(a,i){return this.router.navigate(a,{...i,relativeTo:this.route})}childDialogClosed$(){return this.router.events.pipe((0,_.p)(a=>a instanceof e.wF),(0,l.Z)(!!this.route.snapshot.firstChild),(0,c.T)(()=>!!this.route.snapshot.firstChild),(0,h.J)(),(0,_.p)(([a,i])=>a&&!i))}static{this.\u0275fac=function(i){return new(i||g)(d.KVO(e.Ix),d.KVO(e.nX))}}static{this.\u0275prov=d.jDH({token:g,factory:g.\u0275fac})}}return g})()},9234:(O,u,t)=>{t.d(u,{Gg:()=>v,Tr:()=>a,gb:()=>g});var e=t(1567),_=t(6647),l=t(6301),c=t(271),h=t(2938),n=t(4435),o=t(6474),d=t(4839),p=t(7580);const s={all:!1,getEntities:!1,getAvailableEntities:!1,delete:!1},g="admin/entity/",v="admin/entity/list";let a=(()=>{class i extends o.D{constructor(){super(...arguments),this.log=(0,n.Tq)({EntityService:i},s),this.queryService=(0,h.d)(d.c)}getEntities$(m){return this.log.fnIf("getEntities"),m.pipe((0,e.p)(E=>null!=E),(0,_.n)(E=>this.getAvailableEntities(E.contentTypeName).pipe((0,l.t)(1))))}getAvailableEntities(m,E){return this.log.fnIf("getAvailableEntities"),this.queryService.getEntities({contentTypes:[m],itemIds:E,fields:"Id,Guid,Title",log:"getAvailableEntities"}).pipe((0,c.T)(I=>I.Default))}delete(m,E,M,I,D,C){return this.log.fnIf("delete",{appId:m,contentType:E,entityId:M,force:I,parentId:D,parent}),this.http.delete(this.apiUrl(g+"delete"),{params:{contentType:E,id:M.toString(),appId:m,force:I.toString(),...D&&{parentId:D.toString()},...D&&C&&{parentField:C}}})}static{this.\u0275fac=(()=>{let m;return function(M){return(m||(m=p.xGo(i)))(M||i)}})()}static{this.\u0275prov=p.jDH({token:i,factory:i.\u0275fac})}}return i})()},4839:(O,u,t)=>{t.d(u,{c:()=>n});var e=t(4435),_=t(8873),l=t(7580),c=t(6443);const h={all:!1,getAvailableEntities:!1,getEntities:!1};let n=(()=>{class o{constructor(p,s){this.http=p,this.context=s,this.log=(0,e.Tq)({QueryService:o},h)}getFromQuery(p,s,g,v){this.log.fnIf("getAvailableEntities",{queryUrl:p,params:s,fields:g,entitiesFilter:v});const a=!!s,E=(((s?.toLocaleLowerCase()??"").includes("appid=")?"":`&appId=${this.context.appId}`)+(a?`&${s}`:"")+"&$select="+(g??"")).substring(1);return this.http.post(`app/auto/query/${p}?${E}`,{Guids:v})}getEntities({contentTypes:p,itemIds:s,fields:g,log:v}){this.log.fnIf("getEntities",{log:v,contentTypes:p,itemIds:s,fields:g});const i=("&typeNames="+(p?.join(",")??"")+`&appId=${this.context.appId}&itemIds=`+(s?.join(",")??"")+"&$select="+(g??"")).substring(1);return this.http.post(`app/auto/query/System.EntityPicker/Default?${i}`,{})}static{this.\u0275fac=function(s){return new(s||o)(l.KVO(c.Qq),l.KVO(_.o))}}static{this.\u0275prov=l.jDH({token:o,factory:o.\u0275fac})}}return o})()},4979:(O,u,t)=>{t.d(u,{V:()=>l});var e=t(7092),_=t(7580);let l=(()=>{class c{constructor(){this.subscriptions=new e.yU}ngOnDestroy(){this.destroy()}destroy(){this.subscriptions.unsubscribe()}static{this.\u0275fac=function(o){return new(o||c)}}static{this.\u0275prov=_.jDH({token:c,factory:c.\u0275fac})}}return c})()}}]);
//# sourceMappingURL=https://sources.2sxc.org/19.03.01/dist/ng-edit/projects_eav-ui_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.1ff36cc8687ed5a4.js.map