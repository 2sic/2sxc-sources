{"version":3,"sources":["./projects/ng-dialogs/src/app/app-administration/getting-started/getting-started.component.ts","./projects/ng-dialogs/src/app/app-administration/getting-started/getting-started.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/data-actions/data-actions.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/data-actions/data-actions.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/data-fields/data-fields.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/data-fields/data-fields.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/data-items/data-items.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/data-items/data-items.component.html","./projects/ng-dialogs/src/app/app-administration/data/data.component.html","./projects/ng-dialogs/src/app/app-administration/data/data.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/queries-actions/queries-actions.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/queries-actions/queries-actions.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/queries-actions/queries-actions.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/ag-actions/ag-actions-component.ts","./projects/ng-dialogs/src/app/app-administration/queries/queries.component.ts","./projects/ng-dialogs/src/app/app-administration/queries/queries.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/views-actions/views-actions.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/views-actions/views-actions.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/views-show/views-show.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/views-show/views-show.component.ts","./projects/ng-dialogs/src/app/app-administration/views/views.helpers.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/views-type/views-type.component.ts","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/views-type/views-type.component.html","./projects/ng-dialogs/src/app/app-administration/views/views.component.ts","./projects/ng-dialogs/src/app/app-administration/views/polymorph-logo.png","./projects/ng-dialogs/src/app/app-administration/views/views.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/web-api-actions/web-api-actions.component.html","./projects/ng-dialogs/src/app/app-administration/ag-grid-components/web-api-actions/web-api-actions.component.ts","./projects/ng-dialogs/src/app/app-administration/web-api/web-api.component.ts","./projects/ng-dialogs/src/app/app-administration/web-api/web-api.component.html","./projects/ng-dialogs/src/app/app-administration/app-configuration/app-configuration.component.html","./projects/ng-dialogs/src/app/app-administration/app-configuration/app-configuration.component.ts","./projects/ng-dialogs/src/app/app-administration/app-administration-nav/app-administration-nav.component.html","./projects/ng-dialogs/src/app/app-administration/app-administration-nav/app-administration-nav.component.ts"],"names":["ngOnInit","GettingStartedComponent","agInit","params","this","contentType","data","enablePermissions","enablePermissionsGetter","test","StaticName","refresh","createOrEditMetadata","onCreateOrEditMetadata","openPermissions","onOpenPermissions","editContentType","onEdit","openRestApi","onOpenRestApi","exportType","onTypeExport","openDataExport","onOpenDataExport","openDataImport","onOpenDataImport","deleteContentType","onDelete","DataActionsComponent","value","DataFieldsComponent","DataItemsComponent","router","route","contentTypesService","globalConfigService","snackBar","contentExportService","contentTypes$","BehaviorSubject","scope","scopes","default","defaultScope","scopeOptions$","debugEnabled$","getDebugEnabled$","modules","gridOptions","frameworkComponents","idFieldComponent","dataItemsComponent","dataFieldsComponent","dataActionsComponent","columnDefs","headerName","field","width","headerClass","cellClass","cellRenderer","sortable","filter","cellRendererParams","tooltipGetter","paramsData","Id","flex","minWidth","sort","onCellClicked","showContentItems","bind","addItem","editFields","nameCellClassGetter","event","pinned","subscription","Subscription","fetchContentTypes","fetchScopes","refreshOnChildClosed","ngOnDestroy","complete","unsubscribe","filesDropped","files","importFile","name","substring","lastIndexOf","toLocaleLowerCase","from","pipe","take","subscribe","fileString","contentTypeName","split","find","ct","Name","open","duration","importType","navigate","relativeTo","firstChild","state","UsesSharedDef","retrieveContentTypes","contentTypes","next","getScopes","createGhost","sourceName","window","prompt","res","changeScope","newScope","option","newScopeOption","form","items","ContentTypeName","formUrl","Metadata","EntityId","For","Target","metadata","target","String","Prefill","Label","Description","goToData","exportJson","goEntity","confirm","delete","result","add","events","startWith","snapshot","map","pairwise","DataComponent","QueryActions","actions","getEnablePermissions","QueriesActionsComponent","item","pipelinesService","dialogService","queries$","queriesActionsComponent","Guid","openVisualQueryDesigner","do","doMenuAction","fetchQueries","getAll","query","queries","importQuery","action","Edit","editQuery","Rest","goToQuery","Clone","cloneQuery","Permissions","Export","exportQuery","Delete","deleteQuery","TestParameters","pipelineDesigner","testParameters","openQueryDesigner","clonePipeline","exportEntity","QueriesComponent","view","enableCode","enableCodeGetter","openCode","onOpenCode","cloneView","onClone","exportView","onExport","deleteView","ViewsActionsComponent","ViewsShowComponent","calculateViewType","icon","HasQuery","List","ContentType","type","ViewsTypeComponent","viewsService","views$","polymorphStatus$","polymorphLogo","booleanFilterComponent","viewsTypeComponent","viewsShowComponent","viewsActionsComponent","valueGetter","showValueGetter","editView","typeValueGetter","openUsage","contentDemoValueGetter","presentationDemoValueGetter","headerDemoValueGetter","headerPresDemoValueGetter","fetchTemplates","fetchPolymorphism","importView","views","getPolymorphism","polymorphism","Resolver","template","editPolymorphisms","TypeName","IsHidden","DemoId","DemoTitle","PresentationType","ListContentType","ListPresentationType","openCodeFile","TemplatePath","IsShared","DuplicateEntity","export","ViewsComponent","WebApiActionsComponent","webApisService","webApis$","webApiActions","fetchWebApis","addController","length","nameLower","sanitizePath","replace","extIndex","typeIndex","charAt","toLocaleUpperCase","create","webApis","api","path","goToWebApi","WebApiComponent","contentItemsService","context","exportAppService","importAppPartsService","eavConstants","edit","staticName","contentItems","Error","config","goApp","appId","exportApp","exportParts","importParts","exportAppXml","exportForVersionControl","error","resetApp","AppConfigurationComponent","dialogRef","appDialogConfigService","dialogSettings$","tabs$","tabIndex$","combineLatest","url","tabs","indexOf","templateVars$","dialogSettings","tabIndex","fetchDialogSettings","closeDialog","close","changeTab","index","getDialogSettings","Context","App","Enable","Query","tab","AppAdministrationNavComponent"],"mappings":"sZAEA,aASE,c,OAEA,YAAAA,SAAA,a,sCALWC,I,uBAAAA,EAAuB,6JCRpC,mB,gCAAuB,gD,2MDEvB,G,6MEDE,iBACE,uEACA,mBAAU,eAAI,OAChB,Q,sBACA,iBACE,mBAAU,eAAI,OAChB,Q,yBAIE,sBAEE,mBACF,Q,mBAHU,kD,sBAIV,mBAAiD,iBAAM,Q,qCANzD,iBACE,kEACA,4BAIA,4BACF,O,qBAJ0B,qDAGb,uD,sBAEb,iBACE,mBAAU,iBAAM,OAClB,QCbF,iBAWE,c,OAEA,YAAAC,OAAA,SAAOC,GACLC,KAAKD,OAASA,EACdC,KAAKC,YAAcD,KAAKD,OAAOG,KAC/B,IAAMC,EAAoBH,KAAKD,OAAOK,0BACtCJ,KAAKG,kBAAoBA,GAAqB,cAAYE,KAAKL,KAAKC,YAAYK,aAGlF,YAAAC,QAAA,SAAQR,GACN,OAAO,GAGT,YAAAS,qBAAA,WACER,KAAKD,OAAOU,uBAAuBT,KAAKC,cAG1C,YAAAS,gBAAA,WACEV,KAAKD,OAAOY,kBAAkBX,KAAKC,cAGrC,YAAAW,gBAAA,WACEZ,KAAKD,OAAOc,OAAOb,KAAKC,cAG1B,YAAAa,YAAA,WACEd,KAAKD,OAAOgB,cAAcf,KAAKC,cAGjC,YAAAe,WAAA,WACEhB,KAAKD,OAAOkB,aAAajB,KAAKC,cAGhC,YAAAiB,eAAA,WACElB,KAAKD,OAAOoB,iBAAiBnB,KAAKC,cAGpC,YAAAmB,eAAA,WACEpB,KAAKD,OAAOsB,iBAAiBrB,KAAKC,cAGpC,YAAAqB,kBAAA,WACEtB,KAAKD,OAAOwB,SAASvB,KAAKC,c,sCA/CjBuB,I,uBAAAA,EAAoB,q7B,GAAA,MDZjC,gBACE,sBAIA,sBAIA,sBAQA,sBAIA,gBACE,mBAAU,qBAAU,OACtB,OACF,OAEA,uBACE,oBAAsB,+BAAS,EAAAZ,oBAC7B,oBAAU,oBAAQ,OAClB,gBAAM,kBAAM,OACd,OACA,oBAAsB,+BAAS,EAAAE,gBAC7B,sBACA,gBAAM,oBAAQ,OAChB,OACA,oBAAsB,+BAAS,EAAAE,eAC7B,oBAAU,0BAAc,OACxB,gBAAM,+BAAmB,OAC3B,OACA,oBAAsB,+BAAS,EAAAE,mBAC7B,oBAAU,0BAAc,OACxB,gBAAM,uBAAW,OACnB,OACA,oBAAsB,+BAAS,EAAAE,mBAC7B,oBAAU,wBAAY,OACtB,gBAAM,uBAAW,OACnB,OACA,oBAA6D,+BAAS,EAAAE,sBACpE,oBAAU,kBAAM,OAChB,gBAAM,kBAAM,OACd,OACF,Q,mBAlDgD,kDAIX,iDAIW,yCAQX,0CAI4B,oCA0BzC,wD,+ECzCxB,G,yBCNA,gBACE,gBACE,iBAAmB,QAAW,OAChC,OACA,gBACE,mBAAU,cAAG,OACf,OACF,Q,kBALuB,uB,yBAOvB,gBAEE,gBACE,iBAAmB,QAAW,OAChC,OACA,gBACE,mBAAU,gBAAK,OACjB,OACF,Q,kBAPE,8JAEqB,uBCPvB,+B,OAUE,YAAAxB,OAAA,SAAOC,GACLC,KAAKC,YAAcF,EAAOG,KAC1BF,KAAKyB,MAAQ1B,EAAO0B,OAGtB,YAAAlB,QAAA,SAAQR,GACN,OAAO,G,sCAVE2B,I,uBAAAA,EAAmB,4aDXhC,sBASA,uB,MAT0E,0CASpC,mD,uGCJtC,GCDA,2B,OASE,YAAA5B,OAAA,SAAOC,GACLC,KAAKyB,MAAQ1B,EAAO0B,OAGtB,YAAAlB,QAAA,SAAQR,GACN,OAAO,G,sCARE4B,I,uBAAAA,EAAkB,wMCV/B,gBACE,gBACE,iBAAmB,QAAW,OAChC,OACA,gBACE,mBAAU,cAAG,OACf,OACF,Q,MALuB,wB,mGDEvB,G,0IEIQ,wBACE,QACF,Q,uBAFgE,sBAC9D,wC,sCAWN,oBACE,8DACA,mBAAU,gBAAK,OACf,eAAM,gBAAK,OACb,QCEJ,kBAuEE,WACUC,EACAC,EACAC,EACAC,EACAC,EACAC,GANV,WACU,KAAAL,SACA,KAAAC,QACA,KAAAC,sBACA,KAAAC,sBACA,KAAAC,WACA,KAAAC,uBApEV,KAAAC,cAAgB,IAAIC,EAAA,EAA+B,MACnD,KAAAC,MAAQ,IAAaC,OAAOC,QAAQb,MACpC,KAAAc,aAAe,IAAaF,OAAOC,QAAQb,MAC3C,KAAAe,cAAgB,IAAIL,EAAA,EAAkC,IACtD,KAAAM,cAAgBzC,KAAK+B,oBAAoBW,mBAEzC,KAAAC,QAAU,IACV,KAAAC,YAAW,2BACN,KAAkB,CACrBC,oBAAqB,CACnBC,iBAAkB,IAClBC,mBAAoB,EACpBC,oBAAqB,EACrBC,qBAAsB,GAExBC,WAAY,CACV,CACEC,WAAY,KAAMC,MAAO,KAAMC,MAAO,GAAIC,YAAa,QAASC,UAAW,kCAC3EC,aAAc,mBAAoBC,UAAU,EAAMC,OAAQ,qBAC1DC,mBAAoB,CAClBC,cAAe,SAACC,GAA4B,aAAOA,EAAWC,GAAE,WAAWD,EAAWvD,cAG1F,CACE6C,WAAY,eAAgBC,MAAO,QAASW,KAAM,EAAGC,SAAU,IAAKT,UAAW,2BAA4BE,UAAU,EACrHQ,KAAM,MAAOP,OAAQ,qBAAsBQ,cAAelE,KAAKmE,iBAAiBC,KAAKpE,OAEvF,CACEmD,WAAY,QAASC,MAAO,QAASC,MAAO,IAAKC,YAAa,QAASC,UAAW,8BAClFE,UAAU,EAAMC,OAAQ,uBAAwBF,aAAc,qBAAsBU,cAAelE,KAAKqE,QAAQD,KAAKpE,OAEvH,CACEmD,WAAY,SAAUC,MAAO,SAAUC,MAAO,GAAIC,YAAa,QAASC,UAAW,8BACnFE,UAAU,EAAMC,OAAQ,uBAAwBF,aAAc,sBAAuBU,cAAelE,KAAKsE,WAAWF,KAAKpE,OAE3H,CACEmD,WAAY,OAAQC,MAAO,OAAQW,KAAM,EAAGC,SAAU,IAAKT,UAAWvD,KAAKuE,oBAAoBH,KAAKpE,MACpGyD,UAAU,EAAMC,OAAQ,qBAAsBQ,cAAe,SAACM,GAAY,EAAK5D,gBAAgB4D,EAAMtE,QAEvG,CACEiD,WAAY,cAAeC,MAAO,uBAAwBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC7FE,UAAU,EAAMC,OAAQ,sBAE1B,CACEL,MAAO,IAAKE,UAAW,8BAA+BC,aAAc,uBAAwBiB,OAAQ,QACpGd,mBAAoB,CAClBvD,wBAAyBJ,KAAKI,wBAAwBgE,KAAKpE,MAC3DS,uBAAwBT,KAAKQ,qBAAqB4D,KAAKpE,MACvDW,kBAAmBX,KAAKU,gBAAgB0D,KAAKpE,MAC7Ca,OAAQb,KAAKY,gBAAgBwD,KAAKpE,MAClCe,cAAef,KAAKc,YAAYsD,KAAKpE,MACrCiB,aAAcjB,KAAKgB,WAAWoD,KAAKpE,MACnCmB,iBAAkBnB,KAAKkB,eAAekD,KAAKpE,MAC3CqB,iBAAkBrB,KAAKoB,eAAegD,KAAKpE,MAC3CuB,SAAUvB,KAAKsB,kBAAkB8C,KAAKpE,WAMtC,KAAA0E,aAAe,IAAIC,EAAA,E,OAW3B,YAAA/E,SAAA,WACEI,KAAK4E,oBACL5E,KAAK6E,cACL7E,KAAK8E,wBAGP,YAAAC,YAAA,WACE/E,KAAKkC,cAAc8C,WACnBhF,KAAKwC,cAAcwC,WACnBhF,KAAK0E,aAAaO,eAGpB,YAAAC,aAAA,SAAaC,GAAb,WACQC,EAAaD,EAAM,GAEzB,OADYC,EAAWC,KAAKC,UAAUF,EAAWC,KAAKE,YAAY,KAAO,GAAGC,qBAE1E,IAAK,MACH,OAAAC,EAAA,GAAK,YAASN,EAAM,KAAKO,KAAK,OAAAC,EAAA,GAAK,IAAIC,UAAU,SAAAC,G,MACzCC,EAAuD,QAAxC,EAAGD,EAAWE,MAAM,kBAAkB,UAAE,eAAEA,MAAM,KAAK,GACpE9F,EAAc,EAAKiC,cAAcT,MAAMuE,KAAK,SAAAC,GAAM,OAAAA,EAAGC,OAASJ,IACjD,MAAf7F,EAKJ,EAAKmB,eAAenB,EAAakF,GAH/B,EAAKnD,SAASmE,KADE,mCAAmCL,EAAe,sDACtC,KAAM,CAAEM,SAAU,QAKlD,MACF,IAAK,OACHpG,KAAKqG,WAAWlB,KAKtB,YAAAkB,WAAA,SAAWlB,GAETnF,KAAK4B,OAAO0E,SAAS,CAAC,UAAW,CAAEC,WAAYvG,KAAK6B,MAAM2E,WAAYC,MADX,CAAEtB,MAAK,MAI5D,YAAAhB,iBAAR,SAAyBpE,GAEvBC,KAAK4B,OAAO0E,SAAS,CAAC,SADFvG,EAAOG,KACgBI,YAAe,CAAEiG,WAAYvG,KAAK6B,MAAM2E,cAGrF,YAAA5F,gBAAA,SAAgBX,GACd,GAAKA,EAEE,CACL,GAAIA,EAAYyG,cAAiB,OACjC1G,KAAK4B,OAAO0E,SAAS,CAAItG,KAAKoC,MAAK,IAAInC,EAAYK,WAAU,SAAU,CAAEiG,WAAYvG,KAAK6B,MAAM2E,kBAHhGxG,KAAK4B,OAAO0E,SAAS,CAAItG,KAAKoC,MAAK,QAAS,CAAEmE,WAAYvG,KAAK6B,MAAM2E,cAOjE,YAAA5B,kBAAR,sBACE5E,KAAK8B,oBAAoB6E,qBAAqB3G,KAAKoC,OAAOwD,UAAU,SAAAgB,GAClE,EAAK1E,cAAc2E,KAAKD,GACpB,EAAKxE,QAAU,EAAKG,cAEtB,EAAKP,SAASmE,KADE,6FACY,KAAM,CAAEC,SAAU,SAK5C,YAAAvB,YAAR,sBACE7E,KAAK8B,oBAAoBgF,YAAYlB,UAAU,SAAAvD,GAC7C,EAAKG,cAAcqE,KAAKxE,MAI5B,YAAA0E,YAAA,sBACQC,EAAaC,OAAOC,OAAO,oJAC5BF,IACLhH,KAAKgC,SAASmE,KAAK,aACnBnG,KAAK8B,oBAAoBiF,YAAYC,GAAYpB,UAAU,SAAAuB,GACzD,EAAKnF,SAASmE,KAAK,QAAS,KAAM,CAAEC,SAAU,MAC9C,EAAKxB,wBAIT,YAAAwC,YAAA,SAAYC,GACV,GAAiB,UAAbA,EAEF,GADAA,EAAWH,OAAO,mMAGX,IAAKlH,KAAKwC,cAAcf,MAAMuE,KAAK,SAAAsB,GAAU,OAAAA,EAAO7F,QAAU4F,IAAW,CAC9E,IAAME,EAAiC,CACrClC,KAAMgC,EACN5F,MAAO4F,GAETrH,KAAKwC,cAAcqE,KAAK,YAAI7G,KAAKwC,cAAcf,MAAO,CAAA8F,WANtDF,EAAW,IAAahF,OAAOC,QAAQb,MAS3CzB,KAAKoC,MAAQiF,EACbrH,KAAK4E,qBAGC,YAAAxE,wBAAR,WACE,OAAOJ,KAAKG,mBAGN,YAAAoE,oBAAR,SAA4BxE,GAE1B,OADiCA,EAAOG,KACxBwG,cACP,WAEA,4BAIH,YAAArC,QAAR,SAAgBtE,GACd,IACMyH,EAAiB,CACrBC,MAAO,CAAC,CAAEC,gBAFQ3H,EAAOG,KAEcI,cAEnCqH,EAAU,YAAiBH,GACjCxH,KAAK4B,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAYvG,KAAK6B,MAAM2E,cAG7D,YAAAlC,WAAR,SAAmBvE,GACjB,IAAME,EAAcF,EAAOG,KACvBD,EAAYyG,eAChB1G,KAAK4B,OAAO0E,SAAS,CAAC,UAAUrG,EAAYK,YAAe,CAAEiG,WAAYvG,KAAK6B,MAAM2E,cAG9E,YAAAhG,qBAAR,SAA6BP,GAC3B,IAAMuH,EAAiB,CACrBC,MAAO,CACJxH,EAAY2H,SAST,CAAEC,SAAU5H,EAAY2H,SAAS9D,IARjC,CACA4D,gBAAiB,IAAad,aAAa3G,YAC3C6H,IAAK,CACHC,OAAQ,IAAaC,SAAS/H,YAAYgI,OAC1CC,OAAQjI,EAAYK,YAEtB6H,QAAS,CAAEC,MAAOnI,EAAYiG,KAAMmC,YAAapI,EAAYoI,gBAK/DV,EAAU,YAAiBH,GACjCxH,KAAK4B,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAYvG,KAAK6B,MAAM2E,cAG7D,YAAA1F,YAAR,SAAoBb,GAClBD,KAAK4B,OAAO0E,SAAS,CAAC,IAAYgC,SAASrI,IAAe,CAAEsG,WAAYvG,KAAK6B,MAAM2E,cAG7E,YAAAxF,WAAR,SAAmBf,GACjBD,KAAKiC,qBAAqBsG,WAAWtI,EAAYK,aAG3C,YAAAY,eAAR,SAAuBjB,GACrBD,KAAK4B,OAAO0E,SAAS,CAAC,UAAUrG,EAAYK,YAAe,CAAEiG,WAAYvG,KAAK6B,MAAM2E,cAG9E,YAAApF,eAAR,SAAuBnB,EAA0BkF,GAE/CnF,KAAK4B,OAAO0E,SAAS,CAAIrG,EAAYK,WAAU,WAAY,CAAEiG,WAAYvG,KAAK6B,MAAM2E,WAAYC,MAD7C,CAAEtB,MAAK,MAIpD,YAAAzE,gBAAR,SAAwBT,GACtBD,KAAK4B,OAAO0E,SAAS,CAAC,IAAgBkC,SAASvI,EAAYK,aAAc,CAAEiG,WAAYvG,KAAK6B,MAAM2E,cAG5F,YAAAlF,kBAAR,SAA0BrB,GAA1B,WACOwI,QAAQ,oCAAoCxI,EAAYiG,KAAI,MAAMjG,EAAY6D,GAAE,QACrF9D,KAAKgC,SAASmE,KAAK,eACnBnG,KAAK8B,oBAAoB4G,OAAOzI,GAAa2F,UAAU,SAAA+C,GACrD,EAAK3G,SAASmE,KAAK,UAAW,KAAM,CAAEC,SAAU,MAChD,EAAKxB,wBAID,YAAAE,qBAAR,sBACE9E,KAAK0E,aAAakE,IAChB5I,KAAK4B,OAAOiH,OAAOnD,KACjB,OAAAhC,EAAA,GAAO,SAAAc,GAAS,OAAAA,aAAiB,MACjC,OAAAsE,EAAA,KAAY9I,KAAK6B,MAAMkH,SAASvC,WAAWA,YAC3C,OAAAwC,EAAA,GAAI,WAAM,QAAE,EAAKnH,MAAMkH,SAASvC,WAAWA,aAC3C,OAAAyC,EAAA,KACA,OAAAvF,EAAA,GAAO,SAAC,G,IAAA,mBAAyB,OAAhB,OAAU,QAC3BkC,UAAU,WACV,EAAKhB,wB,sCAhQAsE,GAAa,8D,uBAAbA,EAAa,8zBDhC1B,gBACE,4BAC6E,uCAAgB,EAAAhE,aAAA,K,gBAC7F,OAEA,gBACE,2BACE,uBAA2C,wCAAiB,EAAAkC,YAAA,KAC1D,8B,gBAGA,uBAA0B,0BAAe,OAC3C,OACF,OAEA,oBAAoD,+BAAS,EAAAf,eAC3D,oBAAU,wBAAY,OACtB,gBAAM,wBAAY,OACpB,OAEA,2B,iBAKF,OAEA,oBACE,+BAAS,EAAAzF,gBAAgB,QACzB,oBAAU,eAAG,OACf,OACF,Q,MA9B6C,kDAAiC,oBAAjC,CAAiC,4BAAjC,CAAiC,+BAM5D,gCAC0B,kDAYoC,mD,2MCMhF,GCpBYuI,GAAZ,SAAYA,G,OACV,mBACA,mBACA,qBACA,iCACA,uBACA,uBANUA,EAAZ,CAOC,I,0BCNG,sBAEE,mBACF,Q,mBAHU,4C,uBAIV,mBAA2C,iBAAM,Q,sCANnD,gBACE,oDAAS,EAAApJ,OAAA,mCACT,6BAIA,6BACF,O,qBAJK,+CAGQ,iD,uBAEb,iBACE,mBAAU,iBAAM,OAClB,QCVF,8E,OAQS,EAAAqJ,QAAUD,G,SAH0B,iBAK3C,YAAArJ,OAAA,SAAOC,GACL,YAAMD,OAAM,UAACC,GACbC,KAAKG,kBAAoBH,KAAKD,OAAOsJ,wB,qCAP5BC,I,uBAAAA,EAAuB,8zB,GAAA,MDVpC,gBACE,gBAA+D,+BAAS,EAAAvJ,OAAA,4BACtE,mBAAU,eAAI,OAChB,OAEA,uBAQA,uBAIA,gBACE,mBAAU,qBAAU,OACtB,OACF,OAEA,uBACE,oBAAsB,+BAAS,EAAAA,OAAA,4BAC7B,sBACA,gBAAM,oBAAQ,OAChB,OACA,oBAAsB,+BAAS,EAAAA,OAAA,6BAC7B,oBAAU,qBAAS,OACnB,gBAAM,gBAAI,OACZ,OACA,oBAAsB,+BAAS,EAAAA,OAAA,8BAC7B,oBAAU,0BAAc,OACxB,gBAAM,kBAAM,OACd,OACA,oBAAsB,+BAAS,EAAAA,OAAA,8BAC7B,oBAAU,kBAAM,OAChB,gBAAM,kBAAM,OACd,OACF,Q,oBAlCgD,yCAQX,0CAI4B,sC,mFCZjE,CCFA,WAIE,cAWF,OATE,YAAAD,OAAA,SAAOC,GACLC,KAAKD,OAASA,EACdC,KAAKuJ,KAAOvJ,KAAKD,OAAOG,MAG1B,YAAAK,QAAA,SAAQR,GACN,OAAO,GAGX,EAfA,I,QDOa,I,uCEYb,cA6CE,WACU6B,EACAC,EACA2H,EACAvH,EACAD,EACAyH,GALA,KAAA7H,SACA,KAAAC,QACA,KAAA2H,mBACA,KAAAvH,uBACA,KAAAD,WACA,KAAAyH,gBA1CV,KAAAC,SAAW,IAAIvH,EAAA,EAAyB,MACxC,KAAAQ,QAAU,IACV,KAAAC,YAAW,2BACN,KAAkB,CACrBC,oBAAqB,CACnBC,iBAAkB,IAClB6G,wBAAyB,IAE3BzG,WAAY,CACV,CACEC,WAAY,KAAMC,MAAO,KAAMC,MAAO,GAAIC,YAAa,QAASC,UAAW,kCAC3EC,aAAc,mBAAoBC,UAAU,EAAMC,OAAQ,qBAC1DC,mBAAoB,CAClBC,cAAe,SAACC,GAAsB,aAAOA,EAAWC,GAAE,WAAWD,EAAW+F,QAGpF,CACEzG,WAAY,OAAQC,MAAO,OAAQW,KAAM,EAAGC,SAAU,IAAKT,UAAW,2BAA4BE,UAAU,EAC5GQ,KAAM,MAAOP,OAAQ,qBAAsBQ,cAAelE,KAAK6J,wBAAwBzF,KAAKpE,OAE9F,CACEmD,WAAY,cAAeC,MAAO,cAAeW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAAcE,UAAU,EAC5GC,OAAQ,sBAEV,CACEL,MAAO,IAAKE,UAAW,8BAA+BkB,OAAQ,QAC9DjB,aAAc,0BAA2BG,mBAAoB,CAC3D0F,qBAAsBrJ,KAAKI,wBAAwBgE,KAAKpE,MACxD8J,GAAI9J,KAAK+J,aAAa3F,KAAKpE,WAM3B,KAAA0E,aAAe,IAAIC,EAAA,E,OAW3B,YAAA/E,SAAA,WACEI,KAAKgK,eACLhK,KAAK8E,wBAGP,YAAAC,YAAA,WACE/E,KAAK0J,SAAS1E,WACdhF,KAAK0E,aAAaO,eAGZ,YAAA+E,aAAR,sBACEhK,KAAKwJ,iBAAiBS,OAAO,IAAarD,aAAasD,OAAOtE,UAAU,SAACuE,GACvE,EAAKT,SAAS7C,KAAKsD,MAIvB,YAAAC,YAAA,SAAYjF,GAEVnF,KAAK4B,OAAO0E,SAAS,CAAC,UAAW,CAAEC,WAAYvG,KAAK6B,MAAM2E,WAAYC,MAD5B,CAAEtB,MAAK,MAS3C,YAAA4E,aAAR,SAAqBM,EAAsBH,GACzC,OAAQG,GACN,KAAKlB,GAAamB,KAAM,OAAOtK,KAAKuK,UAAUL,GAC9C,KAAKf,GAAaqB,KAChB,OAAOxK,KAAK4B,OAAO0E,SAAS,CAAC,IAAYmE,UAAUP,EAAMN,OAAQ,CAAErD,WAAYvG,KAAK6B,MAAM2E,aAC5F,KAAK2C,GAAauB,MAAO,OAAO1K,KAAK2K,WAAWT,GAChD,KAAKf,GAAayB,YAAa,OAAO5K,KAAKU,gBAAgBwJ,GAC3D,KAAKf,GAAa0B,OAAQ,OAAO7K,KAAK8K,YAAYZ,GAClD,KAAKf,GAAa4B,OAAQ,OAAO/K,KAAKgL,YAAYd,KAItD,YAAAK,UAAA,SAAUL,GACR,IAAM1C,EAAiB,CACrBC,MAAO,CACI,MAATyC,EACI,CACAxC,gBAAiB,IAAad,aAAasD,MAC3C/B,QAAS,CAAE8C,eAAgB,IAAaC,iBAAiBC,iBAEzD,CAAEtD,SAAUqC,EAAMpG,MAGpB6D,EAAU,YAAiBH,GACjCxH,KAAK4B,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAYvG,KAAK6B,MAAM2E,cAG7D,YAAApG,wBAAR,WACE,OAAOJ,KAAKG,mBAGN,YAAA0J,wBAAR,SAAgC9J,GAE9BC,KAAKyJ,cAAc2B,kBADErL,EAAOG,KACe4D,KAGrC,YAAA6G,WAAR,SAAmBT,GAAnB,WACElK,KAAKgC,SAASmE,KAAK,cACnBnG,KAAKwJ,iBAAiB6B,cAAcnB,EAAMpG,IAAI8B,UAAU,WACtD,EAAK5D,SAASmE,KAAK,SAAU,KAAM,CAAEC,SAAU,MAC/C,EAAK4D,kBAID,YAAAtJ,gBAAR,SAAwBwJ,GACtBlK,KAAK4B,OAAO0E,SAAS,CAAC,IAAgBkC,SAAS0B,EAAMN,OAAQ,CAAErD,WAAYvG,KAAK6B,MAAM2E,cAGhF,YAAAsE,YAAR,SAAoBZ,GAClBlK,KAAKiC,qBAAqBqJ,aAAapB,EAAMpG,GAAI,SAAS,IAGpD,YAAAkH,YAAR,SAAoBd,GAApB,WACOzB,QAAQ,oBAAoByB,EAAMhE,KAAI,MAAMgE,EAAMpG,GAAE,QACzD9D,KAAKgC,SAASmE,KAAK,eACnBnG,KAAKwJ,iBAAiBd,OAAOwB,EAAMpG,IAAI8B,UAAU,SAAAuB,GAC/C,EAAKnF,SAASmE,KAAK,UAAW,KAAM,CAAEC,SAAU,MAChD,EAAK4D,mBAID,YAAAlF,qBAAR,sBACE9E,KAAK0E,aAAakE,IAChB5I,KAAK4B,OAAOiH,OAAOnD,KACjB,OAAAhC,EAAA,GAAO,SAAAc,GAAS,OAAAA,aAAiB,MACjC,OAAAsE,EAAA,KAAY9I,KAAK6B,MAAMkH,SAASvC,WAAWA,YAC3C,OAAAwC,EAAA,GAAI,WAAM,QAAE,EAAKnH,MAAMkH,SAASvC,WAAWA,aAC3C,OAAAyC,EAAA,KACA,OAAAvF,EAAA,GAAO,SAAC,G,IAAA,mBAAyB,OAAhB,OAAU,QAC3BkC,UAAU,WACV,EAAKoE,mB,sCAhJAuB,GAAgB,gE,uBAAhBA,EAAgB,0eC5B7B,gBACE,4BACyE,uCAAgB,EAAAnB,YAAA,K,gBACzF,OAEA,gBAEA,+BACE,uCACE,mBACE,qBAA0B,cAAG,OAC/B,OACF,OAEA,qCACE,oBAA+C,+BAAS,EAAAA,gBACtD,oBAAU,wBAAY,OACxB,OACA,oBAAqD,+BAAS,EAAAG,UAAU,QACtE,oBAAU,eAAG,OACf,OACF,OACF,OACF,Q,MAtB6C,6CAA4B,oBAA5B,CAA4B,4BAA5B,CAA4B,2BAOzC,0B,+FDchC,G,mDErBE,gBAAkF,2DAChF,mBAAU,eAAI,OAChB,Q,uBACA,gBACE,mBAAU,eAAI,OAChB,Q,0BAIE,sBAEE,mBACF,Q,mBAHU,2C,uBAIV,mBAA0C,iBAAM,Q,sCANlD,iBACE,kEACA,6BAIA,6BACF,O,qBAJK,8CAGQ,gD,uBAEb,gBACE,mBAAU,iBAAM,OAClB,QCbF,kBAYE,c,OAEA,YAAAzK,OAAA,SAAOC,GACLC,KAAKD,OAASA,EACdC,KAAKwL,KAAOxL,KAAKD,OAAOG,KACxBF,KAAKyL,WAAazL,KAAKD,OAAO2L,mBAC9B1L,KAAKG,kBAAoBH,KAAKD,OAAOK,2BAGvC,YAAAG,QAAA,SAAQR,GACN,OAAO,GAGT,YAAA4L,SAAA,WACE3L,KAAKD,OAAO6L,WAAW5L,KAAKwL,OAG9B,YAAA9K,gBAAA,WACEV,KAAKD,OAAOY,kBAAkBX,KAAKwL,OAGrC,YAAAK,UAAA,WACE7L,KAAKD,OAAO+L,QAAQ9L,KAAKwL,OAG3B,YAAAO,WAAA,WACE/L,KAAKD,OAAOiM,SAAShM,KAAKwL,OAG5B,YAAAS,WAAA,WACEjM,KAAKD,OAAOwB,SAASvB,KAAKwL,O,sCApCjBU,I,uBAAAA,EAAqB,22B,GAAA,MDXlC,gBACE,uBAGA,uBAIA,uBAQA,uBAIA,gBACE,mBAAU,qBAAU,OACtB,OACF,OAEA,uBACE,oBAAsB,+BAAS,EAAAL,cAC7B,oBAAU,qBAAS,OACnB,gBAAM,gBAAI,OACZ,OACA,oBAAsB,+BAAS,EAAAE,eAC7B,oBAAU,0BAAc,OACxB,gBAAM,kBAAM,OACd,OACA,oBAAsB,+BAAS,EAAAE,eAC7B,oBAAU,kBAAM,OAChB,gBAAM,kBAAM,OACd,OACF,Q,mBArCgD,kCAGX,mCAIW,yCAQX,0CAI4B,sC,+ECfjE,G,uBCJE,mBAAwB,qBAAU,Q,uBAClC,mBAAyB,yBAAc,QCEzC,gC,OASE,YAAAnM,OAAA,SAAOC,GACLC,KAAKyB,MAAQ1B,EAAO0B,OAGtB,YAAAlB,QAAA,SAAQR,GACN,OAAO,G,sCAREoM,I,uBAAAA,EAAkB,oHDV/B,gBACE,4BACA,4BACF,Q,MAFa,6BACA,gC,uDCEb,GCFO,SAASC,GAAkBZ,GAChC,IAAI/J,EAAQ,GACR4K,EAAO,GAcX,OAbIb,EAAKc,UACP7K,EAAQ,oBACR4K,EAAO,eACEb,EAAKe,MACd9K,EAAQ,eACR4K,EAAO,wBACGb,EAAKgB,aAAgBhB,EAAKc,SAG1Bd,EAAKe,OACf9K,EAAQ,aACR4K,EAAO,cAJP5K,EAAQ,OACR4K,EAAO,2BAKF,CAAE5K,MAAK,EAAE4K,KAAI,GCbtB,gC,OAUE,YAAAvM,OAAA,SAAOC,GACLC,KAAKyB,MAAQ1B,EAAO0B,MACpB,IACMgL,EAAOL,GADArM,EAAOG,MAEpBF,KAAKqM,KAAOI,EAAKJ,MAGnB,YAAA9L,QAAA,SAAQR,GACN,OAAO,G,sCAZE2M,I,uBAAAA,EAAkB,wHCX/B,gBACE,mBAAU,QAAU,OACtB,Q,MAF4B,2BAChB,uB,uDDIZ,G,aEqBA,cA0GE,WACUC,EACA/K,EACAC,EACAG,EACAyH,GALV,WACU,KAAAkD,eACA,KAAA/K,SACA,KAAAC,QACA,KAAAG,WACA,KAAAyH,gBArGV,KAAAmD,OAAS,IAAIzK,EAAA,EAAwB,MACrC,KAAA0K,iBAAmB,IAAI1K,EAAA,EAAgB,IACvC,KAAA2K,cCtCa,q/NDwCb,KAAAnK,QAAU,IACV,KAAAC,YAAW,2BACN,KAAkB,CACrBC,oBAAqB,CACnBC,iBAAkB,IAClBiK,uBAAwB,KACxBC,mBAAoB,GACpBC,mBAAoB,GACpBC,sBAAuB,IAEzBhK,WAAY,CACV,CACEC,WAAY,KAAMC,MAAO,KAAMC,MAAO,GAAIC,YAAa,QAASC,UAAW,kCAC3EC,aAAc,mBAAoBC,UAAU,EAAMC,OAAQ,qBAC1DC,mBAAoB,CAClBC,cAAe,SAACC,GAAqB,aAAOA,EAAWC,GAAE,WAAWD,EAAW+F,QAGnF,CACEzG,WAAY,OAAQC,MAAO,WAAYC,MAAO,GAAIC,YAAa,QAASC,UAAW,aAAcC,aAAc,qBAC/GC,UAAU,EAAMC,OAAQ,yBAA0ByJ,YAAanN,KAAKoN,iBAEtE,CACEjK,WAAY,OAAQC,MAAO,OAAQW,KAAM,EAAGC,SAAU,IAAKT,UAAW,2BACtEE,UAAU,EAAMQ,KAAM,MAAOP,OAAQ,qBAAsBQ,cAAelE,KAAKqN,SAASjJ,KAAKpE,OAE/F,CACEmD,WAAY,OAAQC,MAAO,OAAQC,MAAO,GAAIC,YAAa,QAASC,UAAW,aAC/EE,UAAU,EAAMC,OAAQ,qBAAsBF,aAAc,qBAAsB2J,YAAanN,KAAKsN,iBAEtG,CACEnK,WAAY,OAAQC,MAAO,OAAQC,MAAO,GAAIC,YAAa,QAASC,UAAW,2BAC/EE,UAAU,EAAMC,OAAQ,uBAAwBQ,cAAe,SAACM,GAAY,EAAK+I,UAAU/I,KAE7F,CACErB,WAAY,UAAWC,MAAO,gBAAiBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAClFE,UAAU,EAAMC,OAAQ,sBAE1B,CACEP,WAAY,OAAQC,MAAO,eAAgBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC9EE,UAAU,EAAMC,OAAQ,sBAE1B,CACEP,WAAY,UAAWC,MAAO,mBAAoBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aACrFE,UAAU,EAAMC,OAAQ,sBAE1B,CACEP,WAAY,UAAWC,MAAO,qBAAsBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aACvFE,UAAU,EAAMC,OAAQ,qBAAsByJ,YAAanN,KAAKwN,wBAElE,CACErK,WAAY,eAAgBC,MAAO,wBAAyBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC/FE,UAAU,EAAMC,OAAQ,sBAE1B,CACEP,WAAY,UAAWC,MAAO,0BAA2BW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC5FE,UAAU,EAAMC,OAAQ,qBAAsByJ,YAAanN,KAAKyN,6BAElE,CACEtK,WAAY,SAAUC,MAAO,uBAAwBW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aACxFE,UAAU,EAAMC,OAAQ,sBAE1B,CACEP,WAAY,UAAWC,MAAO,yBAA0BW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC3FE,UAAU,EAAMC,OAAQ,qBAAsByJ,YAAanN,KAAK0N,uBAElE,CACEvK,WAAY,sBAAuBC,MAAO,4BAA6BW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC1GE,UAAU,EAAMC,OAAQ,sBAE1B,CACEP,WAAY,UAAWC,MAAO,8BAA+BW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAChGE,UAAU,EAAMC,OAAQ,qBAAsByJ,YAAanN,KAAK2N,2BAElE,CACEtK,MAAO,IAAKE,UAAW,8BAA+BC,aAAc,wBAAyBiB,OAAQ,QACrGd,mBAAoB,CAClB+H,iBAAkB1L,KAAK0L,iBAAiBtH,KAAKpE,MAC7CI,wBAAyBJ,KAAKI,wBAAwBgE,KAAKpE,MAC3D4L,WAAY5L,KAAK2L,SAASvH,KAAKpE,MAC/BW,kBAAmBX,KAAKU,gBAAgB0D,KAAKpE,MAC7C8L,QAAS9L,KAAK6L,UAAUzH,KAAKpE,MAC7BgM,SAAUhM,KAAK+L,WAAW3H,KAAKpE,MAC/BuB,SAAUvB,KAAKiM,WAAW7H,KAAKpE,WAM/B,KAAA0E,aAAe,IAAIC,EAAA,E,OAW3B,YAAA/E,SAAA,WACEI,KAAK4N,iBACL5N,KAAK6N,oBACL7N,KAAK8E,wBAGP,YAAAC,YAAA,WACE/E,KAAK4M,OAAO5H,WACZhF,KAAK6M,iBAAiB7H,WACtBhF,KAAK0E,aAAaO,eAGpB,YAAA6I,WAAA,SAAW3I,GAETnF,KAAK4B,OAAO0E,SAAS,CAAC,UAAW,CAAEC,WAAYvG,KAAK6B,MAAM2E,WAAYC,MADzB,CAAEtB,MAAK,MAI9C,YAAAyI,eAAR,sBACE5N,KAAK2M,aAAa1C,SAASrE,UAAU,SAAAmI,GACnC,EAAKnB,OAAO/F,KAAKkH,MAIb,YAAAF,kBAAR,sBACE7N,KAAK2M,aAAaqB,kBAAkBpI,UAAU,SAAAqI,GAC5C,EAAKA,aAAeA,EAIpB,EAAKpB,iBAAiBhG,KAHuB,OAApBoH,EAAanK,GAClC,iBAC2B,OAA1BmK,EAAaC,SAAoB,WAAa,SAAWD,EAAaC,aAK/E,YAAAb,SAAA,SAAStN,GACP,IAAMyL,EAAazL,aAAM,EAANA,EAAQG,KACrBsH,EAAiB,CACrBC,MAAO,CACG,MAAR+D,EACI,CAAE9D,gBAAiB,IAAad,aAAauH,UAC7C,CAAEtG,SAAU2D,EAAK1H,MAGnB6D,EAAU,YAAiBH,GACjCxH,KAAK4B,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAYvG,KAAK6B,MAAM2E,cAGrE,YAAA4H,kBAAA,WACE,GAAKpO,KAAKiO,aAAV,CAEA,IAAMzG,EAAiB,CACrBC,MAAO,CACJzH,KAAKiO,aAAanK,GAEf,CAAE+D,SAAU7H,KAAKiO,aAAanK,IAD9B,CAAE4D,gBAAiB1H,KAAKiO,aAAaI,YAIvC1G,EAAU,YAAiBH,GACjCxH,KAAK4B,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAYvG,KAAK6B,MAAM2E,eAG7D,YAAA4G,gBAAR,SAAwBrN,GAEtB,OADmBA,EAAOG,KACboO,UAGP,YAAAhB,gBAAR,SAAwBvN,GAGtB,OADaqM,GADMrM,EAAOG,MAEduB,OAGN,YAAAiK,iBAAR,WACE,OAAO1L,KAAKyL,YAGN,YAAArL,wBAAR,WACE,OAAOJ,KAAKG,mBAGN,YAAAqN,uBAAR,SAA+BzN,GAC7B,IAAMyL,EAAazL,EAAOG,KAC1B,OAAUsL,EAAKgB,YAAY+B,OAAM,IAAI/C,EAAKgB,YAAYgC,WAGhD,YAAAf,4BAAR,SAAoC1N,GAClC,IAAMyL,EAAazL,EAAOG,KAC1B,OAAUsL,EAAKiD,iBAAiBF,OAAM,IAAI/C,EAAKiD,iBAAiBD,WAG1D,YAAAd,sBAAR,SAA8B3N,GAC5B,IAAMyL,EAAazL,EAAOG,KAC1B,OAAUsL,EAAKkD,gBAAgBH,OAAM,IAAI/C,EAAKkD,gBAAgBF,WAGxD,YAAAb,0BAAR,SAAkC5N,GAChC,IAAMyL,EAAazL,EAAOG,KAC1B,OAAUsL,EAAKmD,qBAAqBJ,OAAM,IAAI/C,EAAKmD,qBAAqBH,WAGlE,YAAAjB,UAAR,SAAkB/I,GAEhBxE,KAAK4B,OAAO0E,SAAS,CAAC,SADH9B,EAAMtE,KACW0J,MAAS,CAAErD,WAAYvG,KAAK6B,MAAM2E,cAGhE,YAAAmF,SAAR,SAAiBH,GACfxL,KAAKyJ,cAAcmF,aAAapD,EAAKqD,aAAcrD,EAAKsD,WAGlD,YAAApO,gBAAR,SAAwB8K,GACtBxL,KAAK4B,OAAO0E,SAAS,CAAC,IAAgBkC,SAASgD,EAAK5B,OAAQ,CAAErD,WAAYvG,KAAK6B,MAAM2E,cAG/E,YAAAqF,UAAR,SAAkBL,GAChB,IAAMhE,EAAiB,CACrBC,MAAO,CAAC,CAAEC,gBAAiB,IAAad,aAAauH,SAAUY,gBAAiBvD,EAAK1H,MAEjF6D,EAAU,YAAiBH,GACjCxH,KAAK4B,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAYvG,KAAK6B,MAAM2E,cAG7D,YAAAuF,WAAR,SAAmBP,GACjBxL,KAAK2M,aAAaqC,OAAOxD,EAAK1H,KAGxB,YAAAmI,WAAR,SAAmBT,GAAnB,WACO/C,QAAQ,WAAW+C,EAAKtF,KAAI,MAAMsF,EAAK1H,GAAE,QAC9C9D,KAAKgC,SAASmE,KAAK,eACnBnG,KAAK2M,aAAajE,OAAO8C,EAAK1H,IAAI8B,UAAU,SAAAuB,GAC1C,EAAKnF,SAASmE,KAAK,UAAW,KAAM,CAAEC,SAAU,MAChD,EAAKwH,qBAID,YAAA9I,qBAAR,sBACE9E,KAAK0E,aAAakE,IAChB5I,KAAK4B,OAAOiH,OAAOnD,KACjB,OAAAhC,EAAA,GAAO,SAAAc,GAAS,OAAAA,aAAiB,MACjC,OAAAsE,EAAA,KAAY9I,KAAK6B,MAAMkH,SAASvC,WAAWA,YAC3C,OAAAwC,EAAA,GAAI,WAAM,QAAE,EAAKnH,MAAMkH,SAASvC,WAAWA,aAC3C,OAAAyC,EAAA,KACA,OAAAvF,EAAA,GAAO,SAAC,G,IAAA,mBAAyB,OAAhB,OAAU,QAC3BkC,UAAU,WACV,EAAKgI,iBACL,EAAKC,wB,sCA3PAoB,GAAc,sD,uBAAdA,EAAc,okBEhC3B,gBACE,4BAC6C,uCAAgB,EAAAnB,WAAA,K,gBAC7D,OAEA,gBACE,mBAAuD,+BAAS,EAAAM,sBAC9D,gBACA,eAAM,Q,gBAA2C,OACnD,OAEA,mBAA4C,+BAAS,EAAAN,eACnD,oBAAU,wBAAY,OACtB,gBAAM,gBAAI,OACZ,OACF,OAEA,oBAAkF,+BAAS,EAAAT,SAAS,QAClG,oBAAU,eAAG,OACf,OACF,Q,MAnB6C,2CAA0B,oBAA1B,CAA0B,4BAA1B,CAA0B,2BAMrC,yCACtB,gE,2JFkBZ,G,gEGzBE,gBAAkF,2DAChF,mBAAU,eAAI,OAChB,Q,uBACA,gBACE,mBAAU,eAAI,OAChB,QCDF,gC,OAUE,YAAAvN,OAAA,SAAOC,GACLC,KAAKD,OAASA,EACdC,KAAKyL,WAAazL,KAAKD,OAAO2L,oBAGhC,YAAAnL,QAAA,SAAQR,GACN,OAAO,GAGT,YAAA4L,SAAA,WAEE3L,KAAKD,OAAO6L,WADQ5L,KAAKD,OAAOG,OAIlC,YAAAY,YAAA,WAEEd,KAAKD,OAAOgB,cADQf,KAAKD,OAAOG,O,sCAnBvBgP,I,uBAAAA,EAAsB,6gB,GAAA,MDXnC,gBACE,uBAGA,uBAIA,gBACE,mBAAU,qBAAU,OACtB,OACF,OAEA,uBACE,mBAAsB,+BAAS,EAAApO,gBAC7B,qBACA,gBAAM,oBAAQ,OAChB,OACF,Q,mBAjBgD,kCAGX,mCAI4B,sC,2ECHjE,G,aCUA,cAoCE,WACUqO,EACAnN,EACAyH,EACA7H,EACAC,GAJA,KAAAsN,iBACA,KAAAnN,WACA,KAAAyH,gBACA,KAAA7H,SACA,KAAAC,QAhCV,KAAAuN,SAAW,IAAIjN,EAAA,EAA0B,MACzC,KAAAQ,QAAU,IACV,KAAAC,YAAW,2BACN,KAAkB,CACrBC,oBAAqB,CACnBwM,cAAe,IAEjBnM,WAAY,CACV,CACEC,WAAY,SAAUC,MAAO,SAAUW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aAC1EE,UAAU,EAAMQ,KAAM,MAAOP,OAAQ,sBAEvC,CACEP,WAAY,OAAQC,MAAO,OAAQW,KAAM,EAAGC,SAAU,IAAKT,UAAW,aACtEE,UAAU,EAAMC,OAAQ,sBAE1B,CACEL,MAAO,GAAIE,UAAW,8BAA+BC,aAAc,gBAAiBiB,OAAQ,QAC5Fd,mBAAoB,CAClB+H,iBAAkB1L,KAAK0L,iBAAiBtH,KAAKpE,MAC7C4L,WAAY5L,KAAK2L,SAASvH,KAAKpE,MAC/Be,cAAef,KAAKc,YAAYsD,KAAKpE,W,OAc7C,YAAAJ,SAAA,WACEI,KAAKsP,gBAGP,YAAAvK,YAAA,WACE/E,KAAKoP,SAASpK,YAGhB,YAAAuK,cAAA,sBACMlK,EAAO6B,OAAO,mBAAoB,MACtC,GAAa,OAAT7B,GAAiC,IAAhBA,EAAKmK,OAA1B,CAKA,IAAIC,GAFJpK,GADAA,EAAO,KAAeqK,aAAarK,IACvBsK,QAAQ,MAAO,KAENnK,oBACfoK,EAAWH,EAAUlK,YAAY,OACnCqK,EAAW,IACbH,EAAYA,EAAUnK,UAAU,EAAGsK,IAErC,IAAMC,EAAYJ,EAAUlK,YAAY,cACpCsK,EAAY,IACdJ,EAAYA,EAAUnK,UAAU,EAAGuK,IAGrCxK,EAAOA,EAAKyK,OAAO,GAAGC,oBAAsB1K,EAAKC,UAAU,EAAGmK,EAAUD,QAAU,gBAElFxP,KAAKgC,SAASmE,KAAK,aACnBnG,KAAKmP,eAAea,OAAO3K,GAAMO,UAAU,SAAAuB,GACzC,EAAKnF,SAASmE,KAAK,QAAS,KAAM,CAAEC,SAAU,MAC9C,EAAKkJ,mBAID,YAAAA,aAAR,sBACEtP,KAAKmP,eAAelF,SAASrE,UAAU,SAAAqK,GACrC,EAAKb,SAASvI,KAAKoJ,MAIf,YAAAvE,iBAAR,WACE,OAAO1L,KAAKyL,YAGN,YAAAE,SAAR,SAAiBuE,GACflQ,KAAKyJ,cAAcmF,aAAasB,EAAIC,OAG9B,YAAArP,YAAR,SAAoBoP,GAClBlQ,KAAK4B,OAAO0E,SAAS,CAAC,IAAY8J,WAAWF,IAAO,CAAE3J,WAAYvG,KAAK6B,MAAM2E,c,sCAvFpE6J,GAAe,sD,uBAAfA,EAAe,wVCrB5B,gBACE,4B,gBAIA,gBAEA,mBAAwF,+BAAS,EAAAd,kBAC/F,mBAAU,cAAG,OACf,OACF,Q,MAT6C,6CAA4B,oBAA5B,CAA4B,+B,2EDczE,G,2FEgDU,sBAEE,mBACF,Q,kBAHU,iE,uBAIV,mBAAgE,iBAAM,QCrDhF,kBAUE,WACUe,EACA1O,EACAC,EACA0O,EACAC,EACAC,EACAzO,GANA,KAAAsO,sBACA,KAAA1O,SACA,KAAAC,QACA,KAAA0O,UACA,KAAAC,mBACA,KAAAC,wBACA,KAAAzO,WATV,KAAA0O,aAAe,I,OAYf,YAAA9Q,SAAA,aAGA,YAAA+Q,KAAA,SAAKC,GAAL,WACE5Q,KAAKsQ,oBAAoBrG,OAAO2G,GAAYhL,UAAU,SAAAiL,GACpD,GAA4B,IAAxBA,EAAarB,OAAgB,MAAM,IAAIsB,MAAM,wCAAwCF,GACzF,IACMpJ,EAAiB,CACrBC,MAAO,CAAC,CAAEI,SAFCgJ,EAAa,GAEC/M,MAErB6D,EAAU,YAAiBH,GACjC,EAAK5F,OAAO0E,SAAS,CAAC,QAAQqB,GAAY,CAAEpB,WAAY,EAAK1E,MAAM2E,gBAIvE,YAAAuK,OAAA,SAAOH,GACL5Q,KAAK4B,OAAO0E,SAAS,CAAC,UAAUsK,GAAe,CAAErK,WAAYvG,KAAK6B,MAAM2E,cAG1E,YAAA9F,gBAAA,WACEV,KAAK4B,OAAO0E,SAAS,CAAC,IAAgB0K,MAAMhR,KAAKuQ,QAAQU,QAAS,CAAE1K,WAAYvG,KAAK6B,MAAM2E,cAG7F,YAAA0K,UAAA,WACElR,KAAK4B,OAAO0E,SAAS,CAAC,UAAW,CAAEC,WAAYvG,KAAK6B,MAAM2E,cAG5D,YAAA2K,YAAA,WACEnR,KAAK4B,OAAO0E,SAAS,CAAC,gBAAiB,CAAEC,WAAYvG,KAAK6B,MAAM2E,cAGlE,YAAA4K,YAAA,WACEpR,KAAK4B,OAAO0E,SAAS,CAAC,gBAAiB,CAAEC,WAAYvG,KAAK6B,MAAM2E,cAGlE,YAAA6K,aAAA,sBACErR,KAAKgC,SAASmE,KAAK,gBACnBnG,KAAKwQ,iBAAiBc,yBAAwB,GAAM,GAAO1L,UAAU,CACnEiB,KAAM,SAAA8B,GACJ,EAAK3G,SAASmE,KAAK,gDAAmD,KAAM,CAAEC,SAAU,OAE1FmL,MAAO,SAACA,GACN,EAAKvP,SAASmE,KAAK,2DAA4D,KAAM,CAAEC,SAAU,UAMvG,YAAAoL,SAAA,sBACO/I,QAAQ,kEACbzI,KAAKgC,SAASmE,KAAK,gBACnBnG,KAAKyQ,sBAAsBe,WAAW5L,UAAU,CAC9CiB,KAAM,SAAA8B,GACJ,EAAK3G,SAASmE,KAAK,gBAAiB,KAAM,CAAEC,SAAU,OAExDmL,MAAO,SAACA,GACN,EAAKvP,SAASmE,KAAK,0DAA2D,KAAM,CAAEC,SAAU,W,sCAtE3FqL,GAAyB,4E,uBAAzBA,EAAyB,wkCDpBtC,gBACE,qBACE,0BACE,yBAAgB,uBAAY,OAC5B,gBACE,mBAAuD,+BAAS,EAAAd,KAAA,wCAC9D,mBAAU,eAAI,OAChB,OACA,mBACE,+BAAS,EAAAI,OAAA,wCACT,oBAAU,eAAG,OACf,OACF,OACF,OACA,4BACE,8PAGF,OACF,OAEA,sBACE,2BACE,0BAAgB,yBAAa,OAC7B,iBACE,oBAAwD,+BAAS,EAAAJ,KAAA,yCAC/D,oBAAU,gBAAI,OAChB,OACA,oBACE,+BAAS,EAAAI,OAAA,yCACT,oBAAU,eAAG,OACf,OACF,OACF,OACA,4BACE,qLAEF,OACF,OACF,OAGA,iBACE,sBACE,2BACE,0BAAgB,kCAAsB,OACtC,iBACE,oBAAyD,+BAAS,EAAAJ,KAAA,mCAChE,oBAAU,kBAAM,OAClB,OACF,OACF,OACA,4BACE,wFACF,OACF,OAEA,sBACE,2BACE,0BAAgB,2BAAe,OAC/B,iBACE,oBACE,+BAAS,EAAAjQ,oBACT,6BAIA,8BACF,OACF,OACF,OACA,4BACE,+GACF,OACF,OACF,OAGA,iBACE,sBACE,2BACE,0BAAgB,kCAAsB,OACtC,iBACE,qBAA4C,+BAAS,EAAAwQ,cACnD,oBAAU,0BAAc,OAC1B,OACF,OACF,OACA,4BACE,mFACF,OACF,OAEA,sBACE,2BACE,0BAAgB,8CAAkC,OAClD,iBACE,qBAA4C,+BAAS,EAAAC,gBACnD,oBAAU,0BAAc,OAC1B,OACA,qBAA4C,+BAAS,EAAAC,gBACnD,oBAAU,wBAAY,OACxB,OACF,OACF,OACA,4BACE,iIAEF,OACF,OACF,OAKA,iBACE,sBACE,2BACE,0BAAgB,8CAAkC,OAClD,iBACE,oBAAU,8BAAkB,OAC9B,OACF,OACA,4BACE,0EACA,qBAAgF,+BAAS,EAAAC,iBACvF,oBAAU,oBAAQ,OAClB,gBAAO,uBAAU,OACnB,OACA,qBAA0E,+BAAS,EAAAG,aACjF,oBAAU,mBAAO,OACjB,gBAAO,0BAAa,OACtB,OACF,OACF,OAEF,Q,MA3E8D,0EAGL,oEAGpC,uE,uFCrDrB,G,uBCGM,iBACE,mBAAU,eAAI,OACd,eAAM,eAAI,OACZ,Q,yBACA,iC,wBAAoC,0E,uBAKpC,iBACE,mBAAU,eAAI,OACd,eAAM,eAAI,OACZ,Q,yBACA,sB,wBAAyB,0E,uBAIzB,iBACE,mBAAU,sBAAW,OACrB,eAAM,kBAAO,OACf,Q,yBACA,yB,wBAA4B,0E,uBAL9B,kBACE,wBAIA,gCAEF,Q,uBAGE,iBACE,mBAAU,iBAAM,OAChB,eAAM,gBAAK,OACb,Q,yBACA,uB,wBAA0B,8DAA4D,qE,uBAMtF,iBACE,mBAAU,uBAAY,OACtB,eAAM,iBAAM,OACd,Q,yBACA,yB,wBAA4B,+D,uBAL9B,kBACE,wBAIA,gCAEF,Q,uBAGE,iBACE,mBAAU,gCAAqB,OAC/B,eAAM,cAAG,OACX,Q,yBACA,mC,wBAAsC,yC,sCArD1C,0BACuD,2EAErD,kBACE,uBAIA,uCAEF,OAEA,kBACE,uBAIA,6BACF,OAEA,4BASA,kBACE,wBAIA,+BAGF,OAEA,6BASA,mBACE,yBAIA,2CAEF,OACF,O,0BAtDE,iCAkBU,2DAmBA,4D,sCApDd,gBACE,gBACE,gBACE,cAAK,QAAiD,OACtD,mBAAkD,8DAChD,mBAAU,gBAAK,OACjB,OACF,OACF,OAEA,wBAGA,kCAyDF,O,qBAnEW,wFAWN,yDCJL,kBA6BE,WACUE,EACAC,EACA/P,EACAC,GAJV,WACU,KAAA6P,YACA,KAAAC,yBACA,KAAA/P,SACA,KAAAC,QA1BF,KAAA+P,gBAAkB,IAAIzP,EAAA,EAAgC,MACtD,KAAA0P,MAAQ,IAAI1P,EAAA,EAA0B,MACtC,KAAA2P,UAAY,OAAAC,EAAA,GAAc,CAChC/R,KAAK6R,MACL7R,KAAK4B,OAAOiH,OAAOnD,KACjB,OAAAhC,EAAA,GAAO,SAAAc,GAAS,OAAAA,aAAiB,MACjC,OAAAwE,EAAA,GAAI,WAAM,SAAKnH,MAAMkH,SAASvC,WAAWwL,IAAI,GAAG7B,OAChD,OAAArH,EAAA,GAAU9I,KAAK6B,MAAMkH,SAASvC,WAAWwL,IAAI,GAAG7B,SAEjDzK,KACD,OAAAsD,EAAA,GAAI,SAAC,G,IAAA,mBAACiJ,EAAI,KACR,GAAY,MAARA,EAEJ,OADiBA,EAAKC,QAFR,SAMlB,KAAAC,cAAgB,OAAAJ,EAAA,GAAc,CAAC/R,KAAK4R,gBAAiB5R,KAAK8R,YAAYpM,KACpE,OAAAsD,EAAA,GAAI,SAAC,G,IAAA,mBAA+B,OAAGoJ,eAAnB,KAAmCC,SAAzB,SAGxB,KAAA3N,aAAe,IAAIC,EAAA,E,OAS3B,YAAA/E,SAAA,WACEI,KAAKsS,sBACLtS,KAAK8E,wBAGP,YAAAC,YAAA,WACE/E,KAAK4R,gBAAgB5M,WACrBhF,KAAK6R,MAAM7M,WACXhF,KAAK0E,aAAaO,eAGpB,YAAAsN,YAAA,WACEvS,KAAK0R,UAAUc,SAGjB,YAAAC,UAAA,SAAUjO,GAERxE,KAAK4B,OAAO0E,SAAS,CADRtG,KAAK6R,MAAMpQ,MAAM+C,EAAMkO,QACP,CAAEnM,WAAYvG,KAAK6B,SAG1C,YAAAyQ,oBAAR,sBACEtS,KAAK2R,uBAAuBgB,oBAAoB/M,UAAU,SAAAwM,GACxD,YAAgCA,EAAeQ,QAAQC,KACvD,EAAKjB,gBAAgB/K,KAAKuL,GAE1B,IAAIH,EAAO,CAAC,OAAQ,OAAQ,UAAW,QAAS,UAAW,OACtDG,EAAeQ,QAAQE,OAAOC,QACjCd,EAAOA,EAAKvO,OAAO,SAAAsP,GAAO,MAAQ,YAARA,GAA6B,YAARA,KAEjD,EAAKnB,MAAMhL,KAAKoL,MAIZ,YAAAnN,qBAAR,sBACE9E,KAAK0E,aAAakE,IAChB5I,KAAK4B,OAAOiH,OAAOnD,KACjB,OAAAhC,EAAA,GAAO,SAAAc,GAAS,OAAAA,aAAiB,MACjC,OAAAsE,EAAA,KAAY9I,KAAK6B,MAAMkH,SAASvC,WAAWA,YAC3C,OAAAwC,EAAA,GAAI,WAAM,QAAE,EAAKnH,MAAMkH,SAASvC,WAAWA,aAC3C,OAAAyC,EAAA,KACA,OAAAvF,EAAA,GAAO,SAAC,G,IAAA,mBAAyB,OAAhB,OAAU,QAC3BkC,UAAU,WACV,EAAK0M,0B,sCAxEAW,GAA6B,0C,uBAA7BA,EAA6B,2oDDhB1C,wB,sBAAmD,wC,wHCUnD","file":"app-administration-nav-component.575d1b88dc6bd9f3edac.js","sourcesContent":["import { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-getting-started',\r\n  templateUrl: './getting-started.component.html',\r\n  styleUrls: ['./getting-started.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class GettingStartedComponent implements OnInit {\r\n  @Input() gettingStartedUrl: string;\r\n\r\n  constructor() { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n}\r\n","<iframe class=\"iframe\" [src]=\"gettingStartedUrl | safeResourceUrl\"></iframe>\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"!contentType.UsesSharedDef\" matTooltip=\"Metadata\"\r\n    (click)=\"createOrEditMetadata()\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"contentType.UsesSharedDef\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"enablePermissions\" matTooltip=\"Permissions\"\r\n    (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"contentType.Permissions.Count\" matBadgePosition=\"after\" matBadgeColor=\"accent\"\r\n      matBadgeSize=\"small\" *ngIf=\"contentType.Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n    <mat-icon *ngIf=\"!contentType.Permissions.Count\">person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!enablePermissions\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <button mat-menu-item (click)=\"editContentType()\">\r\n    <mat-icon>settings</mat-icon>\r\n    <span>Rename</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"openRestApi()\">\r\n    <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n    <span>REST API</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"exportType()\">\r\n    <mat-icon>cloud_download</mat-icon>\r\n    <span>Export content type</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"openDataExport()\">\r\n    <mat-icon>cloud_download</mat-icon>\r\n    <span>Export data</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"openDataImport()\">\r\n    <mat-icon>cloud_upload</mat-icon>\r\n    <span>Import data</span>\r\n  </button>\r\n  <button mat-menu-item [disabled]=\"contentType.UsesSharedDef\" (click)=\"deleteContentType()\">\r\n    <mat-icon>delete</mat-icon>\r\n    <span>Delete</span>\r\n  </button>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { guidRegex } from '../../../shared/constants/guid.constants';\r\nimport { ContentType } from '../../models/content-type.model';\r\nimport { DataActionsParams } from './data-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-data-actions',\r\n  templateUrl: './data-actions.component.html',\r\n  styleUrls: ['./data-actions.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataActionsComponent implements ICellRendererAngularComp {\r\n  contentType: ContentType;\r\n  enablePermissions: boolean;\r\n  private params: DataActionsParams;\r\n\r\n  constructor() { }\r\n\r\n  agInit(params: DataActionsParams) {\r\n    this.params = params;\r\n    this.contentType = this.params.data;\r\n    const enablePermissions = this.params.enablePermissionsGetter();\r\n    this.enablePermissions = enablePermissions && guidRegex().test(this.contentType.StaticName);\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  createOrEditMetadata() {\r\n    this.params.onCreateOrEditMetadata(this.contentType);\r\n  }\r\n\r\n  openPermissions() {\r\n    this.params.onOpenPermissions(this.contentType);\r\n  }\r\n\r\n  editContentType() {\r\n    this.params.onEdit(this.contentType);\r\n  }\r\n\r\n  openRestApi() {\r\n    this.params.onOpenRestApi(this.contentType);\r\n  }\r\n\r\n  exportType() {\r\n    this.params.onTypeExport(this.contentType);\r\n  }\r\n\r\n  openDataExport() {\r\n    this.params.onOpenDataExport(this.contentType);\r\n  }\r\n\r\n  openDataImport() {\r\n    this.params.onOpenDataImport(this.contentType);\r\n  }\r\n\r\n  deleteContentType() {\r\n    this.params.onDelete(this.contentType);\r\n  }\r\n}\r\n","<div matRipple class=\"chip-component highlight\" matTooltip=\"Edit fields\" *ngIf=\"!contentType.UsesSharedDef\">\r\n  <div class=\"chip-box\">\r\n    <span class=\"chip\">{{ value }}</span>\r\n  </div>\r\n  <div class=\"like-button\">\r\n    <mat-icon>dns</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"chip-component disabled\" *ngIf=\"contentType.UsesSharedDef\"\r\n  matTooltip=\"This content-type shares the definition of #{{ contentType.SharedDefId }} so you can't edit it here. Read 2sxc.org/help?tag=shared-types\">\r\n  <div class=\"chip-box\">\r\n    <span class=\"chip\">{{ value }}</span>\r\n  </div>\r\n  <div class=\"like-button disabled\">\r\n    <mat-icon>share</mat-icon>\r\n  </div>\r\n</div>\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { ContentType } from '../../models/content-type.model';\r\n\r\n@Component({\r\n  selector: 'app-data-fields',\r\n  templateUrl: './data-fields.component.html',\r\n  styleUrls: ['./data-fields.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataFieldsComponent implements ICellRendererAngularComp {\r\n  contentType: ContentType;\r\n  value: number;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.contentType = params.data;\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-data-items',\r\n  templateUrl: './data-items.component.html',\r\n  styleUrls: ['./data-items.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataItemsComponent implements ICellRendererAngularComp {\r\n  value: number;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div matRipple class=\"chip-component highlight\" matTooltip=\"Add item\">\r\n  <div class=\"chip-box\">\r\n    <span class=\"chip\">{{ value }}</span>\r\n  </div>\r\n  <div class=\"like-button\">\r\n    <mat-icon>add</mat-icon>\r\n  </div>\r\n</div>\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"contentTypes$ | async\" [modules]=\"modules\"\r\n    [gridOptions]=\"gridOptions\" appDragAndDrop [allowedFileTypes]=\"'xml,json'\" (filesDropped)=\"filesDropped($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"grid-more-actions-box\">\r\n    <mat-form-field appearance=\"standard\" color=\"accent\" class=\"scope-dropdown\">\r\n      <mat-select [ngModel]=\"scope\" name=\"Scope\" (ngModelChange)=\"changeScope($event)\">\r\n        <mat-option *ngFor=\"let scopeOption of (scopeOptions$ | async)\" [value]=\"scopeOption.value\">\r\n          {{ 'Scope: ' + scopeOption.name }}\r\n        </mat-option>\r\n        <mat-option value=\"Other\">Scope: Other...</mat-option>\r\n      </mat-select>\r\n    </mat-form-field>\r\n\r\n    <button mat-button matTooltip=\"Import content type\" (click)=\"importType()\">\r\n      <mat-icon>cloud_upload</mat-icon>\r\n      <span>Content Type</span>\r\n    </button>\r\n\r\n    <button mat-button color=\"accent\" matTooltip=\"Create a ghost content type\" *ngIf=\"debugEnabled$ | async\"\r\n      (click)=\"createGhost()\">\r\n      <mat-icon>share</mat-icon>\r\n      <span>Ghost</span>\r\n    </button>\r\n  </div>\r\n\r\n  <button mat-fab mat-elevation-z24 class=\"grid-fab\" matTooltip=\"Create a new content type\"\r\n    (click)=\"editContentType(null)\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</div>\r\n","import { AllCommunityModules, CellClassParams, CellClickedEvent, GridOptions } from '@ag-grid-community/all-modules';\r\nimport { ChangeDetectionStrategy, Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, from, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith, take } from 'rxjs/operators';\r\nimport { GlobalConfigService } from '../../../../../edit/shared/store/ngrx-data';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { ContentImportDialogData } from '../../content-import/content-import-dialog.config';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants, EavScopeOption } from '../../shared/constants/eav.constants';\r\nimport { toString } from '../../shared/helpers/file-to-base64.helper';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DataActionsComponent } from '../ag-grid-components/data-actions/data-actions.component';\r\nimport { DataActionsParams } from '../ag-grid-components/data-actions/data-actions.models';\r\nimport { DataFieldsComponent } from '../ag-grid-components/data-fields/data-fields.component';\r\nimport { DataItemsComponent } from '../ag-grid-components/data-items/data-items.component';\r\nimport { ContentType } from '../models/content-type.model';\r\nimport { ContentTypesService } from '../services/content-types.service';\r\nimport { ImportContentTypeDialogData } from '../sub-dialogs/import-content-type/import-content-type-dialog.config';\r\n\r\n@Component({\r\n  selector: 'app-data',\r\n  templateUrl: './data.component.html',\r\n  styleUrls: ['./data.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class DataComponent implements OnInit, OnDestroy {\r\n  @Input() private enablePermissions: boolean;\r\n\r\n  contentTypes$ = new BehaviorSubject<ContentType[]>(null);\r\n  scope = eavConstants.scopes.default.value;\r\n  defaultScope = eavConstants.scopes.default.value;\r\n  scopeOptions$ = new BehaviorSubject<EavScopeOption[]>([]);\r\n  debugEnabled$ = this.globalConfigService.getDebugEnabled$();\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      dataItemsComponent: DataItemsComponent,\r\n      dataFieldsComponent: DataFieldsComponent,\r\n      dataActionsComponent: DataActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter',\r\n        cellRendererParams: {\r\n          tooltipGetter: (paramsData: ContentType) => `ID: ${paramsData.Id}\\nGUID: ${paramsData.StaticName}`,\r\n        } as IdFieldParams,\r\n      },\r\n      {\r\n        headerName: 'Content Type', field: 'Label', flex: 3, minWidth: 250, cellClass: 'primary-action highlight', sortable: true,\r\n        sort: 'asc', filter: 'agTextColumnFilter', onCellClicked: this.showContentItems.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Items', field: 'Items', width: 102, headerClass: 'dense', cellClass: 'secondary-action no-padding',\r\n        sortable: true, filter: 'agNumberColumnFilter', cellRenderer: 'dataItemsComponent', onCellClicked: this.addItem.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Fields', field: 'Fields', width: 94, headerClass: 'dense', cellClass: 'secondary-action no-padding',\r\n        sortable: true, filter: 'agNumberColumnFilter', cellRenderer: 'dataFieldsComponent', onCellClicked: this.editFields.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'Name', flex: 1, minWidth: 100, cellClass: this.nameCellClassGetter.bind(this),\r\n        sortable: true, filter: 'agTextColumnFilter', onCellClicked: (event) => { this.editContentType(event.data); },\r\n      },\r\n      {\r\n        headerName: 'Description', field: 'Metadata.Description', flex: 3, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        width: 120, cellClass: 'secondary-action no-padding', cellRenderer: 'dataActionsComponent', pinned: 'right',\r\n        cellRendererParams: {\r\n          enablePermissionsGetter: this.enablePermissionsGetter.bind(this),\r\n          onCreateOrEditMetadata: this.createOrEditMetadata.bind(this),\r\n          onOpenPermissions: this.openPermissions.bind(this),\r\n          onEdit: this.editContentType.bind(this),\r\n          onOpenRestApi: this.openRestApi.bind(this),\r\n          onTypeExport: this.exportType.bind(this),\r\n          onOpenDataExport: this.openDataExport.bind(this),\r\n          onOpenDataImport: this.openDataImport.bind(this),\r\n          onDelete: this.deleteContentType.bind(this),\r\n        } as DataActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private contentTypesService: ContentTypesService,\r\n    private globalConfigService: GlobalConfigService,\r\n    private snackBar: MatSnackBar,\r\n    private contentExportService: ContentExportService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchContentTypes();\r\n    this.fetchScopes();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.contentTypes$.complete();\r\n    this.scopeOptions$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  filesDropped(files: File[]) {\r\n    const importFile = files[0];\r\n    const ext = importFile.name.substring(importFile.name.lastIndexOf('.') + 1).toLocaleLowerCase();\r\n    switch (ext) {\r\n      case 'xml':\r\n        from(toString(files[0])).pipe(take(1)).subscribe(fileString => {\r\n          const contentTypeName = fileString.split('<Entity Type=\"')[1]?.split('\"')[0];\r\n          const contentType = this.contentTypes$.value.find(ct => ct.Name === contentTypeName);\r\n          if (contentType == null) {\r\n            const message = `Cannot find Content Type named '${contentTypeName}'. Please open Content Type Import dialog manually.`;\r\n            this.snackBar.open(message, null, { duration: 5000 });\r\n            return;\r\n          }\r\n          this.openDataImport(contentType, files);\r\n        });\r\n        break;\r\n      case 'json':\r\n        this.importType(files);\r\n        break;\r\n    }\r\n  }\r\n\r\n  importType(files?: File[]) {\r\n    const importContentTypeData: ImportContentTypeDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: importContentTypeData });\r\n  }\r\n\r\n  private showContentItems(params: CellClickedEvent) {\r\n    const contentType = params.data as ContentType;\r\n    this.router.navigate([`items/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editContentType(contentType: ContentType) {\r\n    if (!contentType) {\r\n      this.router.navigate([`${this.scope}/add`], { relativeTo: this.route.firstChild });\r\n    } else {\r\n      if (contentType.UsesSharedDef) { return; }\r\n      this.router.navigate([`${this.scope}/${contentType.StaticName}/edit`], { relativeTo: this.route.firstChild });\r\n    }\r\n  }\r\n\r\n  private fetchContentTypes() {\r\n    this.contentTypesService.retrieveContentTypes(this.scope).subscribe(contentTypes => {\r\n      this.contentTypes$.next(contentTypes);\r\n      if (this.scope !== this.defaultScope) {\r\n        const message = 'Warning! You are in a special scope. Changing things here could easily break functionality';\r\n        this.snackBar.open(message, null, { duration: 2000 });\r\n      }\r\n    });\r\n  }\r\n\r\n  private fetchScopes() {\r\n    this.contentTypesService.getScopes().subscribe(scopes => {\r\n      this.scopeOptions$.next(scopes);\r\n    });\r\n  }\r\n\r\n  createGhost() {\r\n    const sourceName = window.prompt('To create a ghost content-type enter source static name / id - this is a very advanced operation - read more about it on 2sxc.org/help?tag=ghost');\r\n    if (!sourceName) { return; }\r\n    this.snackBar.open('Saving...');\r\n    this.contentTypesService.createGhost(sourceName).subscribe(res => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  changeScope(newScope: string) {\r\n    if (newScope === 'Other') {\r\n      newScope = prompt('This is an advanced feature to show content-types of another scope. Don\\'t use this if you don\\'t know what you\\'re doing, as content-types of other scopes are usually hidden for a good reason.');\r\n      if (!newScope) {\r\n        newScope = eavConstants.scopes.default.value;\r\n      } else if (!this.scopeOptions$.value.find(option => option.value === newScope)) {\r\n        const newScopeOption: EavScopeOption = {\r\n          name: newScope,\r\n          value: newScope,\r\n        };\r\n        this.scopeOptions$.next([...this.scopeOptions$.value, newScopeOption]);\r\n      }\r\n    }\r\n    this.scope = newScope;\r\n    this.fetchContentTypes();\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private nameCellClassGetter(params: CellClassParams) {\r\n    const contentType: ContentType = params.data;\r\n    if (contentType.UsesSharedDef) {\r\n      return 'disabled';\r\n    } else {\r\n      return 'primary-action highlight';\r\n    }\r\n  }\r\n\r\n  private addItem(params: CellClickedEvent) {\r\n    const contentType = params.data as ContentType;\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: contentType.StaticName }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private editFields(params: CellClickedEvent) {\r\n    const contentType = params.data as ContentType;\r\n    if (contentType.UsesSharedDef) { return; }\r\n    this.router.navigate([`fields/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private createOrEditMetadata(contentType: ContentType) {\r\n    const form: EditForm = {\r\n      items: [\r\n        !contentType.Metadata\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.contentType,\r\n            For: {\r\n              Target: eavConstants.metadata.contentType.target,\r\n              String: contentType.StaticName,\r\n            },\r\n            Prefill: { Label: contentType.Name, Description: contentType.Description },\r\n          }\r\n          : { EntityId: contentType.Metadata.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openRestApi(contentType: ContentType) {\r\n    this.router.navigate([GoToDevRest.goToData(contentType)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportType(contentType: ContentType) {\r\n    this.contentExportService.exportJson(contentType.StaticName);\r\n  }\r\n\r\n  private openDataExport(contentType: ContentType) {\r\n    this.router.navigate([`export/${contentType.StaticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openDataImport(contentType: ContentType, files?: File[]) {\r\n    const contentImportData: ContentImportDialogData = { files };\r\n    this.router.navigate([`${contentType.StaticName}/import`], { relativeTo: this.route.firstChild, state: contentImportData });\r\n  }\r\n\r\n  private openPermissions(contentType: ContentType) {\r\n    this.router.navigate([GoToPermissions.goEntity(contentType.StaticName)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private deleteContentType(contentType: ContentType) {\r\n    if (!confirm(`Are you sure you want to delete '${contentType.Name}' (${contentType.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.contentTypesService.delete(contentType).subscribe(result => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchContentTypes();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchContentTypes();\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","import { Query } from '../../models/query.model';\r\nimport { IAgActions } from '../ag-actions';\r\n\r\n// Test 2dm 2020-11-20 - I believe the current model has way too much ceremony\r\n// I need to change ca. 10 places just to get one more action to work\r\n// that's not great\r\nexport enum QueryActions {\r\n  Edit,\r\n  Rest,\r\n  Clone,\r\n  Permissions,\r\n  Export,\r\n  Delete,\r\n}\r\n\r\nexport interface QueriesActionsParams extends IAgActions<QueryActions, Query> {\r\n  getEnablePermissions(): boolean;\r\n}\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"Edit\" (click)=\"params.do(actions.Edit, item)\">\r\n    <mat-icon>edit</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"enablePermissions\" matTooltip=\"Permissions\"\r\n    (click)=\"params.do(actions.Permissions, item)\">\r\n    <mat-icon [matBadge]=\"item._Permissions.Count\" matBadgePosition=\"after\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      *ngIf=\"item._Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n    <mat-icon *ngIf=\"!item._Permissions.Count\">person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!enablePermissions\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <button mat-menu-item (click)=\"params.do(actions.Rest, item)\">\r\n    <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n    <span>REST API</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"params.do(actions.Clone, item)\">\r\n    <mat-icon>file_copy</mat-icon>\r\n    <span>Copy</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"params.do(actions.Export, item)\">\r\n    <mat-icon>cloud_download</mat-icon>\r\n    <span>Export</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"params.do(actions.Delete, item)\">\r\n    <mat-icon>delete</mat-icon>\r\n    <span>Delete</span>\r\n  </button>\r\n</mat-menu>\r\n","import { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { Query } from '../../models/query.model';\r\nimport { AgActionsComponent } from '../ag-actions';\r\nimport { QueriesActionsParams, QueryActions } from './queries-actions';\r\n\r\n@Component({\r\n  selector: 'app-queries-actions',\r\n  templateUrl: './queries-actions.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class QueriesActionsComponent extends AgActionsComponent<QueriesActionsParams, Query> {\r\n  enablePermissions: boolean;\r\n\r\n  public actions = QueryActions;\r\n\r\n  agInit(params: QueriesActionsParams) {\r\n    super.agInit(params);\r\n    this.enablePermissions = this.params.getEnablePermissions();\r\n  }\r\n}\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\n\r\nexport class AgActionsComponent<TParams extends ICellRendererParams, TData> implements ICellRendererAngularComp {\r\n  public item: TData;\r\n  public params: TParams;\r\n\r\n  constructor() { }\r\n\r\n  agInit(params: TParams) {\r\n    this.params = params;\r\n    this.item = this.params.data;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n}\r\n","import { AllCommunityModules, CellClickedEvent, GridOptions } from '@ag-grid-community/all-modules';\r\nimport { ChangeDetectionStrategy, Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { ContentExportService } from '../../content-export/services/content-export.service';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { QueriesActionsParams, QueryActions } from '../ag-grid-components/queries-actions/queries-actions';\r\nimport { QueriesActionsComponent } from '../ag-grid-components/queries-actions/queries-actions.component';\r\nimport { Query } from '../models/query.model';\r\nimport { PipelinesService } from '../services/pipelines.service';\r\nimport { ImportQueryDialogData } from '../sub-dialogs/import-query/import-query-dialog.config';\r\n\r\n@Component({\r\n  selector: 'app-queries',\r\n  templateUrl: './queries.component.html',\r\n  styleUrls: ['./queries.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class QueriesComponent implements OnInit, OnDestroy {\r\n  @Input() private enablePermissions: boolean;\r\n\r\n  queries$ = new BehaviorSubject<Query[]>(null);\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      queriesActionsComponent: QueriesActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter',\r\n        cellRendererParams: {\r\n          tooltipGetter: (paramsData: Query) => `ID: ${paramsData.Id}\\nGUID: ${paramsData.Guid}`,\r\n        } as IdFieldParams,\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'Name', flex: 2, minWidth: 250, cellClass: 'primary-action highlight', sortable: true,\r\n        sort: 'asc', filter: 'agTextColumnFilter', onCellClicked: this.openVisualQueryDesigner.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Description', field: 'Description', flex: 2, minWidth: 250, cellClass: 'no-outline', sortable: true,\r\n        filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        width: 120, cellClass: 'secondary-action no-padding', pinned: 'right',\r\n        cellRenderer: 'queriesActionsComponent', cellRendererParams: {\r\n          getEnablePermissions: this.enablePermissionsGetter.bind(this),\r\n          do: this.doMenuAction.bind(this),\r\n        } as QueriesActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private pipelinesService: PipelinesService,\r\n    private contentExportService: ContentExportService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchQueries();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.queries$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  private fetchQueries() {\r\n    this.pipelinesService.getAll(eavConstants.contentTypes.query).subscribe((queries: Query[]) => {\r\n      this.queries$.next(queries);\r\n    });\r\n  }\r\n\r\n  importQuery(files?: File[]) {\r\n    const dialogData: ImportQueryDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: dialogData });\r\n  }\r\n\r\n  /**\r\n   * Experiment by 2dm 2020-11-20 - trying to reduce the ceremony around menus\r\n   * Once this works, we would then remove all the 3-line functions below, as they\r\n   * would just be added here (if that's the only place they are used)\r\n   */\r\n  private doMenuAction(action: QueryActions, query: Query) {\r\n    switch (action) {\r\n      case QueryActions.Edit: return this.editQuery(query);\r\n      case QueryActions.Rest:\r\n        return this.router.navigate([GoToDevRest.goToQuery(query.Guid)], { relativeTo: this.route.firstChild });\r\n      case QueryActions.Clone: return this.cloneQuery(query);\r\n      case QueryActions.Permissions: return this.openPermissions(query);\r\n      case QueryActions.Export: return this.exportQuery(query);\r\n      case QueryActions.Delete: return this.deleteQuery(query);\r\n    }\r\n  }\r\n\r\n  editQuery(query: Query) {\r\n    const form: EditForm = {\r\n      items: [\r\n        query == null\r\n          ? {\r\n            ContentTypeName: eavConstants.contentTypes.query,\r\n            Prefill: { TestParameters: eavConstants.pipelineDesigner.testParameters }\r\n          }\r\n          : { EntityId: query.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private openVisualQueryDesigner(params: CellClickedEvent) {\r\n    const query: Query = params.data;\r\n    this.dialogService.openQueryDesigner(query.Id);\r\n  }\r\n\r\n  private cloneQuery(query: Query) {\r\n    this.snackBar.open('Copying...');\r\n    this.pipelinesService.clonePipeline(query.Id).subscribe(() => {\r\n      this.snackBar.open('Copied', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private openPermissions(query: Query) {\r\n    this.router.navigate([GoToPermissions.goEntity(query.Guid)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportQuery(query: Query) {\r\n    this.contentExportService.exportEntity(query.Id, 'Query', true);\r\n  }\r\n\r\n  private deleteQuery(query: Query) {\r\n    if (!confirm(`Delete Pipeline '${query.Name}' (${query.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.pipelinesService.delete(query.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchQueries();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchQueries();\r\n      })\r\n    );\r\n  }\r\n\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"queries$ | async\" [modules]=\"modules\"\r\n    [gridOptions]=\"gridOptions\" appDragAndDrop [allowedFileTypes]=\"'json'\" (filesDropped)=\"importQuery($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"grid-more-actions-box\"></div>\r\n\r\n  <eco-fab-speed-dial class=\"grid-fab\">\r\n    <eco-fab-speed-dial-trigger [spin]=\"true\">\r\n      <button mat-fab>\r\n        <mat-icon class=\"spin180\">add</mat-icon>\r\n      </button>\r\n    </eco-fab-speed-dial-trigger>\r\n\r\n    <eco-fab-speed-dial-actions>\r\n      <button mat-mini-fab matTooltip=\"Import query\" (click)=\"importQuery()\">\r\n        <mat-icon>cloud_upload</mat-icon>\r\n      </button>\r\n      <button mat-mini-fab matTooltip=\"Create a new query\" (click)=\"editQuery(null)\">\r\n        <mat-icon>add</mat-icon>\r\n      </button>\r\n    </eco-fab-speed-dial-actions>\r\n  </eco-fab-speed-dial>\r\n</div>\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"enableCode\" matTooltip=\"Code\" (click)=\"openCode()\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!enableCode\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"enablePermissions\" matTooltip=\"Permissions\"\r\n    (click)=\"openPermissions()\">\r\n    <mat-icon [matBadge]=\"view.Permissions.Count\" matBadgePosition=\"after\" matBadgeColor=\"accent\" matBadgeSize=\"small\"\r\n      *ngIf=\"view.Permissions.Count\">\r\n      person\r\n    </mat-icon>\r\n    <mat-icon *ngIf=\"!view.Permissions.Count\">person</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!enablePermissions\">\r\n    <mat-icon>person</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <button mat-menu-item (click)=\"cloneView()\">\r\n    <mat-icon>file_copy</mat-icon>\r\n    <span>Copy</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"exportView()\">\r\n    <mat-icon>cloud_download</mat-icon>\r\n    <span>Export</span>\r\n  </button>\r\n  <button mat-menu-item (click)=\"deleteView()\">\r\n    <mat-icon>delete</mat-icon>\r\n    <span>Delete</span>\r\n  </button>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { View } from '../../models/view.model';\r\nimport { ViewActionsParams } from './views-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-views-actions',\r\n  templateUrl: './views-actions.component.html',\r\n  styleUrls: ['./views-actions.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ViewsActionsComponent implements ICellRendererAngularComp {\r\n  view: View;\r\n  enableCode: boolean;\r\n  enablePermissions: boolean;\r\n  private params: ViewActionsParams;\r\n\r\n  constructor() { }\r\n\r\n  agInit(params: ViewActionsParams) {\r\n    this.params = params;\r\n    this.view = this.params.data;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n    this.enablePermissions = this.params.enablePermissionsGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode() {\r\n    this.params.onOpenCode(this.view);\r\n  }\r\n\r\n  openPermissions() {\r\n    this.params.onOpenPermissions(this.view);\r\n  }\r\n\r\n  cloneView() {\r\n    this.params.onClone(this.view);\r\n  }\r\n\r\n  exportView() {\r\n    this.params.onExport(this.view);\r\n  }\r\n\r\n  deleteView() {\r\n    this.params.onDelete(this.view);\r\n  }\r\n}\r\n","<div class=\"icon-container\">\r\n  <mat-icon *ngIf=\"value\">visibility</mat-icon>\r\n  <mat-icon *ngIf=\"!value\">visibility_off</mat-icon>\r\n</div>\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-views-show',\r\n  templateUrl: './views-show.component.html',\r\n  styleUrls: ['./views-show.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ViewsShowComponent implements ICellRendererAngularComp {\r\n  value: boolean;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","import { View } from '../models/view.model';\r\n\r\nexport function calculateViewType(view: View) {\r\n  let value = '';\r\n  let icon = '';\r\n  if (view.HasQuery) {\r\n    value = 'Data (from query)';\r\n    icon = 'filter_list';\r\n  } else if (view.List) {\r\n    value = 'Items (list)';\r\n    icon = 'format_list_numbered';\r\n  } else if (!view.ContentType && !view.HasQuery) {\r\n    value = 'Code';\r\n    icon = 'check_box_outline_blank';\r\n  } else if (!view.List) {\r\n    value = 'Item (one)';\r\n    icon = 'looks_one';\r\n  }\r\n  return { value, icon };\r\n}\r\n","import { ICellRendererParams } from '@ag-grid-community/all-modules';\r\nimport { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { calculateViewType } from '../../views/views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views-type',\r\n  templateUrl: './views-type.component.html',\r\n  styleUrls: ['./views-type.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ViewsTypeComponent implements ICellRendererAngularComp {\r\n  value: string;\r\n  icon: string;\r\n\r\n  agInit(params: ICellRendererParams) {\r\n    this.value = params.value;\r\n    const view = params.data;\r\n    const type = calculateViewType(view);\r\n    this.icon = type.icon;\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n}\r\n","<div class=\"icon-container\" [matTooltip]=\"value\">\r\n  <mat-icon>{{ icon }}</mat-icon>\r\n</div>\r\n","import polymorphLogo from '!url-loader!./polymorph-logo.png';\r\nimport { AllCommunityModules, CellClickedEvent, GridOptions, ValueGetterParams } from '@ag-grid-community/all-modules';\r\nimport { ChangeDetectionStrategy, Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { BooleanFilterComponent } from '../../shared/components/boolean-filter/boolean-filter.component';\r\nimport { IdFieldComponent } from '../../shared/components/id-field/id-field.component';\r\nimport { IdFieldParams } from '../../shared/components/id-field/id-field.models';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { ViewsActionsComponent } from '../ag-grid-components/views-actions/views-actions.component';\r\nimport { ViewActionsParams } from '../ag-grid-components/views-actions/views-actions.models';\r\nimport { ViewsShowComponent } from '../ag-grid-components/views-show/views-show.component';\r\nimport { ViewsTypeComponent } from '../ag-grid-components/views-type/views-type.component';\r\nimport { Polymorphism } from '../models/polymorphism.model';\r\nimport { View } from '../models/view.model';\r\nimport { ViewsService } from '../services/views.service';\r\nimport { ImportViewDialogData } from '../sub-dialogs/import-view/import-view-dialog.config';\r\nimport { calculateViewType } from './views.helpers';\r\n\r\n@Component({\r\n  selector: 'app-views',\r\n  templateUrl: './views.component.html',\r\n  styleUrls: ['./views.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class ViewsComponent implements OnInit, OnDestroy {\r\n  @Input() private enableCode: boolean;\r\n  @Input() private enablePermissions: boolean;\r\n\r\n  views$ = new BehaviorSubject<View[]>(null);\r\n  polymorphStatus$ = new BehaviorSubject('');\r\n  polymorphLogo = polymorphLogo;\r\n\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      idFieldComponent: IdFieldComponent,\r\n      booleanFilterComponent: BooleanFilterComponent,\r\n      viewsTypeComponent: ViewsTypeComponent,\r\n      viewsShowComponent: ViewsShowComponent,\r\n      viewsActionsComponent: ViewsActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'ID', field: 'Id', width: 70, headerClass: 'dense', cellClass: 'id-action no-padding no-outline',\r\n        cellRenderer: 'idFieldComponent', sortable: true, filter: 'agTextColumnFilter',\r\n        cellRendererParams: {\r\n          tooltipGetter: (paramsData: View) => `ID: ${paramsData.Id}\\nGUID: ${paramsData.Guid}`,\r\n        } as IdFieldParams,\r\n      },\r\n      {\r\n        headerName: 'Show', field: 'IsHidden', width: 70, headerClass: 'dense', cellClass: 'no-outline', cellRenderer: 'viewsShowComponent',\r\n        sortable: true, filter: 'booleanFilterComponent', valueGetter: this.showValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'Name', flex: 2, minWidth: 250, cellClass: 'primary-action highlight',\r\n        sortable: true, sort: 'asc', filter: 'agTextColumnFilter', onCellClicked: this.editView.bind(this),\r\n      },\r\n      {\r\n        headerName: 'Type', field: 'Type', width: 70, headerClass: 'dense', cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', cellRenderer: 'viewsTypeComponent', valueGetter: this.typeValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Used', field: 'Used', width: 70, headerClass: 'dense', cellClass: 'primary-action highlight',\r\n        sortable: true, filter: 'agNumberColumnFilter', onCellClicked: (event) => { this.openUsage(event); }\r\n      },\r\n      {\r\n        headerName: 'Url Key', field: 'ViewNameInUrl', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Path', field: 'TemplatePath', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Content', field: 'ContentType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'ContentType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.contentDemoValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Presentation', field: 'PresentationType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'PresentationType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.presentationDemoValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Header', field: 'ListContentType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'ListContentType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.headerDemoValueGetter,\r\n      },\r\n      {\r\n        headerName: 'Header Presentation', field: 'ListPresentationType.Name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Default', field: 'ListPresentationType.DemoId', flex: 1, minWidth: 150, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter', valueGetter: this.headerPresDemoValueGetter,\r\n      },\r\n      {\r\n        width: 120, cellClass: 'secondary-action no-padding', cellRenderer: 'viewsActionsComponent', pinned: 'right',\r\n        cellRendererParams: {\r\n          enableCodeGetter: this.enableCodeGetter.bind(this),\r\n          enablePermissionsGetter: this.enablePermissionsGetter.bind(this),\r\n          onOpenCode: this.openCode.bind(this),\r\n          onOpenPermissions: this.openPermissions.bind(this),\r\n          onClone: this.cloneView.bind(this),\r\n          onExport: this.exportView.bind(this),\r\n          onDelete: this.deleteView.bind(this),\r\n        } as ViewActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  private subscription = new Subscription();\r\n  private polymorphism: Polymorphism;\r\n\r\n  constructor(\r\n    private viewsService: ViewsService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchTemplates();\r\n    this.fetchPolymorphism();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.views$.complete();\r\n    this.polymorphStatus$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  importView(files?: File[]) {\r\n    const importViewData: ImportViewDialogData = { files };\r\n    this.router.navigate(['import'], { relativeTo: this.route.firstChild, state: importViewData });\r\n  }\r\n\r\n  private fetchTemplates() {\r\n    this.viewsService.getAll().subscribe(views => {\r\n      this.views$.next(views);\r\n    });\r\n  }\r\n\r\n  private fetchPolymorphism() {\r\n    this.viewsService.getPolymorphism().subscribe(polymorphism => {\r\n      this.polymorphism = polymorphism;\r\n      const polymorphStatus = (polymorphism.Id === null)\r\n        ? 'not configured'\r\n        : (polymorphism.Resolver === null ? 'disabled' : 'using ' + polymorphism.Resolver);\r\n      this.polymorphStatus$.next(polymorphStatus);\r\n    });\r\n  }\r\n\r\n  editView(params: CellClickedEvent) {\r\n    const view: View = params?.data;\r\n    const form: EditForm = {\r\n      items: [\r\n        view == null\r\n          ? { ContentTypeName: eavConstants.contentTypes.template }\r\n          : { EntityId: view.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  editPolymorphisms() {\r\n    if (!this.polymorphism) { return; }\r\n\r\n    const form: EditForm = {\r\n      items: [\r\n        !this.polymorphism.Id\r\n          ? { ContentTypeName: this.polymorphism.TypeName }\r\n          : { EntityId: this.polymorphism.Id }\r\n      ],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private showValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return !view.IsHidden;\r\n  }\r\n\r\n  private typeValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    const type = calculateViewType(view);\r\n    return type.value;\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private enablePermissionsGetter() {\r\n    return this.enablePermissions;\r\n  }\r\n\r\n  private contentDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.ContentType.DemoId} ${view.ContentType.DemoTitle}`;\r\n  }\r\n\r\n  private presentationDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.PresentationType.DemoId} ${view.PresentationType.DemoTitle}`;\r\n  }\r\n\r\n  private headerDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.ListContentType.DemoId} ${view.ListContentType.DemoTitle}`;\r\n  }\r\n\r\n  private headerPresDemoValueGetter(params: ValueGetterParams) {\r\n    const view: View = params.data;\r\n    return `${view.ListPresentationType.DemoId} ${view.ListPresentationType.DemoTitle}`;\r\n  }\r\n\r\n  private openUsage(event: CellClickedEvent) {\r\n    const view: View = event.data;\r\n    this.router.navigate([`usage/${view.Guid}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private openCode(view: View) {\r\n    this.dialogService.openCodeFile(view.TemplatePath, view.IsShared);\r\n  }\r\n\r\n  private openPermissions(view: View) {\r\n    this.router.navigate([GoToPermissions.goEntity(view.Guid)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private cloneView(view: View) {\r\n    const form: EditForm = {\r\n      items: [{ ContentTypeName: eavConstants.contentTypes.template, DuplicateEntity: view.Id }],\r\n    };\r\n    const formUrl = convertFormToUrl(form);\r\n    this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  private exportView(view: View) {\r\n    this.viewsService.export(view.Id);\r\n  }\r\n\r\n  private deleteView(view: View) {\r\n    if (!confirm(`Delete '${view.Name}' (${view.Id})?`)) { return; }\r\n    this.snackBar.open('Deleting...');\r\n    this.viewsService.delete(view.Id).subscribe(res => {\r\n      this.snackBar.open('Deleted', null, { duration: 2000 });\r\n      this.fetchTemplates();\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchTemplates();\r\n        this.fetchPolymorphism();\r\n      })\r\n    );\r\n  }\r\n}\r\n","export default \"data:image/png;base64,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\"","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"views$ | async\" [modules]=\"modules\" [gridOptions]=\"gridOptions\"\r\n    appDragAndDrop [allowedFileTypes]=\"'json'\" (filesDropped)=\"importView($event)\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"grid-more-actions-box\">\r\n    <button mat-button matTooltip=\"Configure polymorphism\" (click)=\"editPolymorphisms()\">\r\n      <img class=\"polymorph-logo\" [src]=\"polymorphLogo\">\r\n      <span>Polymorphism {{ polymorphStatus$ | async }}</span>\r\n    </button>\r\n\r\n    <button mat-button matTooltip=\"Import view\" (click)=\"importView()\">\r\n      <mat-icon>cloud_upload</mat-icon>\r\n      <span>View</span>\r\n    </button>\r\n  </div>\r\n\r\n  <button mat-fab mat-elevation-z24 class=\"grid-fab\" matTooltip=\"Create a new view\" (click)=\"editView(null)\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</div>\r\n","<div class=\"actions-component\">\r\n  <div class=\"like-button highlight\" matRipple *ngIf=\"enableCode\" matTooltip=\"Code\" (click)=\"openCode()\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n  <div class=\"like-button disabled\" *ngIf=\"!enableCode\">\r\n    <mat-icon>code</mat-icon>\r\n  </div>\r\n\r\n  <div class=\"like-button highlight\" matRipple matTooltip=\"More\" [matMenuTriggerFor]=\"menu\">\r\n    <mat-icon>more_horiz</mat-icon>\r\n  </div>\r\n</div>\r\n\r\n<mat-menu #menu=\"matMenu\" class=\"grid-more-menu\">\r\n  <button mat-menu-item (click)=\"openRestApi()\">\r\n    <mat-icon svgIcon=\"code-curly\"></mat-icon>\r\n    <span>REST API</span>\r\n  </button>\r\n</mat-menu>\r\n","import { ICellRendererAngularComp } from '@ag-grid-community/angular';\r\nimport { ChangeDetectionStrategy, Component } from '@angular/core';\r\nimport { WebApi } from '../../models/web-api.model';\r\nimport { WebApiActionsParams } from './web-api-actions.models';\r\n\r\n@Component({\r\n  selector: 'app-web-api-actions',\r\n  templateUrl: './web-api-actions.component.html',\r\n  styleUrls: ['./web-api-actions.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class WebApiActionsComponent implements ICellRendererAngularComp {\r\n  enableCode: boolean;\r\n  private params: WebApiActionsParams;\r\n\r\n  agInit(params: WebApiActionsParams) {\r\n    this.params = params;\r\n    this.enableCode = this.params.enableCodeGetter();\r\n  }\r\n\r\n  refresh(params?: any): boolean {\r\n    return true;\r\n  }\r\n\r\n  openCode() {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenCode(api);\r\n  }\r\n\r\n  openRestApi() {\r\n    const api: WebApi = this.params.data;\r\n    this.params.onOpenRestApi(api);\r\n  }\r\n}\r\n","import { AllCommunityModules, GridOptions } from '@ag-grid-community/all-modules';\r\nimport { ChangeDetectionStrategy, Component, Input, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { SanitizeHelper } from '../../../../../edit/eav-material-controls/adam/sanitize.helper';\r\nimport { GoToDevRest } from '../../dev-rest/go-to-dev-rest';\r\nimport { defaultGridOptions } from '../../shared/constants/default-grid-options.constants';\r\nimport { defaultControllerName } from '../../shared/constants/file-names.constants';\r\nimport { DialogService } from '../../shared/services/dialog.service';\r\nimport { WebApiActionsComponent } from '../ag-grid-components/web-api-actions/web-api-actions.component';\r\nimport { WebApiActionsParams } from '../ag-grid-components/web-api-actions/web-api-actions.models';\r\nimport { WebApi } from '../models/web-api.model';\r\nimport { WebApisService } from '../services/web-apis.service';\r\n\r\n@Component({\r\n  selector: 'app-web-api',\r\n  templateUrl: './web-api.component.html',\r\n  styleUrls: ['./web-api.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class WebApiComponent implements OnInit, OnDestroy {\r\n  @Input() private enableCode: boolean;\r\n\r\n  webApis$ = new BehaviorSubject<WebApi[]>(null);\r\n  modules = AllCommunityModules;\r\n  gridOptions: GridOptions = {\r\n    ...defaultGridOptions,\r\n    frameworkComponents: {\r\n      webApiActions: WebApiActionsComponent,\r\n    },\r\n    columnDefs: [\r\n      {\r\n        headerName: 'Folder', field: 'folder', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, sort: 'asc', filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        headerName: 'Name', field: 'name', flex: 2, minWidth: 250, cellClass: 'no-outline',\r\n        sortable: true, filter: 'agTextColumnFilter',\r\n      },\r\n      {\r\n        width: 80, cellClass: 'secondary-action no-padding', cellRenderer: 'webApiActions', pinned: 'right',\r\n        cellRendererParams: {\r\n          enableCodeGetter: this.enableCodeGetter.bind(this),\r\n          onOpenCode: this.openCode.bind(this),\r\n          onOpenRestApi: this.openRestApi.bind(this),\r\n        } as WebApiActionsParams,\r\n      },\r\n    ],\r\n  };\r\n\r\n  constructor(\r\n    private webApisService: WebApisService,\r\n    private snackBar: MatSnackBar,\r\n    private dialogService: DialogService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchWebApis();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.webApis$.complete();\r\n  }\r\n\r\n  addController() {\r\n    let name = prompt('Controller name:', defaultControllerName);\r\n    if (name === null || name.length === 0) { return; }\r\n\r\n    name = SanitizeHelper.sanitizePath(name);\r\n    name = name.replace(/\\s/g, ''); // remove all whitespaces\r\n    // find name without extension\r\n    let nameLower = name.toLocaleLowerCase();\r\n    const extIndex = nameLower.lastIndexOf('.cs');\r\n    if (extIndex > 0) {\r\n      nameLower = nameLower.substring(0, extIndex);\r\n    }\r\n    const typeIndex = nameLower.lastIndexOf('controller');\r\n    if (typeIndex > 0) {\r\n      nameLower = nameLower.substring(0, typeIndex);\r\n    }\r\n    // uppercase first letter, take other letters as is and append extension\r\n    name = name.charAt(0).toLocaleUpperCase() + name.substring(1, nameLower.length) + 'Controller.cs';\r\n\r\n    this.snackBar.open('Saving...');\r\n    this.webApisService.create(name).subscribe(res => {\r\n      this.snackBar.open('Saved', null, { duration: 2000 });\r\n      this.fetchWebApis();\r\n    });\r\n  }\r\n\r\n  private fetchWebApis() {\r\n    this.webApisService.getAll().subscribe(webApis => {\r\n      this.webApis$.next(webApis);\r\n    });\r\n  }\r\n\r\n  private enableCodeGetter() {\r\n    return this.enableCode;\r\n  }\r\n\r\n  private openCode(api: WebApi) {\r\n    this.dialogService.openCodeFile(api.path);\r\n  }\r\n\r\n  private openRestApi(api: WebApi) {\r\n    this.router.navigate([GoToDevRest.goToWebApi(api)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n}\r\n","<div class=\"grid-wrapper mat-tab-grid-wrapper\">\r\n  <ag-grid-angular class=\"ag-theme-material\" [rowData]=\"webApis$ | async\" [modules]=\"modules\"\r\n    [gridOptions]=\"gridOptions\">\r\n  </ag-grid-angular>\r\n\r\n  <div class=\"grid-more-actions-box\"></div>\r\n\r\n  <button mat-fab mat-elevation-z24 class=\"grid-fab\" matTooltip=\"Create a new controller\" (click)=\"addController()\">\r\n    <mat-icon>add</mat-icon>\r\n  </button>\r\n</div>\r\n","<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Settings</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit app settings\" (click)=\"edit(eavConstants.contentTypes.settings)\">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"Configure app settings\"\r\n          (click)=\"config(eavConstants.contentTypes.settings)\">\r\n          <mat-icon>dns</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Settings are configurations used by the app - like SQL-connection strings, default \"items-to-show\" numbers and\r\n      things like that. They can also be multi-language, so that a setting (like default RSS-Feed) could be different in\r\n      each language.\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Resources</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit app resources\" (click)=\"edit(eavConstants.contentTypes.resources)\">\r\n          <mat-icon>edit</mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"Configure app resources\"\r\n          (click)=\"config(eavConstants.contentTypes.resources)\">\r\n          <mat-icon>dns</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Resources are used for labels and things like that in the App. They are usually needed to create multi-lingual\r\n      views and such, and should not be used for App-Settings.\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n\r\n\r\n<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Package Definition</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit app definition\" (click)=\"edit(eavConstants.scopes.app.value)\">\r\n          <mat-icon>redeem</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      The app-package definition is important when exporting/importing this app.\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>App Permissions</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Edit permissions\" [disabled]=\"!dialogSettings.Context.Enable.AppPermissions\"\r\n          (click)=\"openPermissions()\">\r\n          <mat-icon [matBadge]=\"dialogSettings.Context.App.Permissions.Count\" matBadgePosition=\"after\"\r\n            matBadgeColor=\"accent\" matBadgeSize=\"small\" *ngIf=\"dialogSettings.Context.App.Permissions.Count\">\r\n            person\r\n          </mat-icon>\r\n          <mat-icon *ngIf=\"!dialogSettings.Context.App.Permissions.Count\">person</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Permissions give access to people to the entire app (all content-types / data), so use with care.\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n\r\n\r\n<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>Export this entire App</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Export\" (click)=\"exportApp()\">\r\n          <mat-icon>cloud_download</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Create an app-package (zip) which can be installed in another portal.\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>Export or Import parts of this App</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <button mat-icon-button matTooltip=\"Export\" (click)=\"exportParts()\">\r\n          <mat-icon>cloud_download</mat-icon>\r\n        </button>\r\n        <button mat-icon-button matTooltip=\"Import\" (click)=\"importParts()\">\r\n          <mat-icon>cloud_upload</mat-icon>\r\n        </button>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Create an xml containing parts of the app, e.g. content and templates.\r\n      Import parts from such an xml into this app.\r\n    </mat-card-content>\r\n  </mat-card>\r\n</div>\r\n\r\n\r\n\r\n<!-- experimental -->\r\n<div class=\"cards-box\">\r\n  <mat-card class=\"mat-elevation-z2\">\r\n    <mat-card-header>\r\n      <mat-card-title>Experimental: App State Versioning</mat-card-title>\r\n      <div class=\"actions-box\">\r\n        <mat-icon>history_toggle_off</mat-icon>\r\n      </div>\r\n    </mat-card-header>\r\n    <mat-card-content>\r\n      Reset all app data to the state stored in the .data/app.xml.\r\n      <button mat-button matTooltip=\"Save App State to app.xml for Github versioning\" (click)=\"exportAppXml()\">\r\n        <mat-icon>save_alt</mat-icon>\r\n        <span> Save state</span>\r\n      </button>\r\n      <button mat-button matTooltip=\"Reset App state to state saved in app.xml\" (click)=\"resetApp()\">\r\n        <mat-icon>restore</mat-icon>\r\n        <span> Restore state</span>\r\n      </button>\r\n    </mat-card-content>\r\n  </mat-card>\r\n\r\n</div>\r\n","import { HttpErrorResponse } from '@angular/common/http';\r\nimport { ChangeDetectionStrategy, Component, Input, OnInit } from '@angular/core';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { ContentItemsService } from '../../content-items/services/content-items.service';\r\nimport { GoToPermissions } from '../../permissions/go-to-permissions';\r\nimport { eavConstants } from '../../shared/constants/eav.constants';\r\nimport { convertFormToUrl } from '../../shared/helpers/url-prep.helper';\r\nimport { EditForm } from '../../shared/models/edit-form.model';\r\nimport { Context } from '../../shared/services/context';\r\nimport { DialogSettings } from '../models/dialog-settings.model';\r\nimport { ExportAppService } from '../services/export-app.service';\r\nimport { ImportAppPartsService } from '../services/import-app-parts.service';\r\n\r\n@Component({\r\n  selector: 'app-app-configuration',\r\n  templateUrl: './app-configuration.component.html',\r\n  styleUrls: ['./app-configuration.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class AppConfigurationComponent implements OnInit {\r\n  @Input() dialogSettings: DialogSettings;\r\n  eavConstants = eavConstants;\r\n\r\n  constructor(\r\n    private contentItemsService: ContentItemsService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n    private context: Context,\r\n    private exportAppService: ExportAppService,\r\n    private importAppPartsService: ImportAppPartsService,\r\n    private snackBar: MatSnackBar,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\n  edit(staticName: string) {\r\n    this.contentItemsService.getAll(staticName).subscribe(contentItems => {\r\n      if (contentItems.length !== 1) { throw new Error(`Found too many settings for the type ${staticName}`); }\r\n      const item = contentItems[0];\r\n      const form: EditForm = {\r\n        items: [{ EntityId: item.Id }],\r\n      };\r\n      const formUrl = convertFormToUrl(form);\r\n      this.router.navigate([`edit/${formUrl}`], { relativeTo: this.route.firstChild });\r\n    });\r\n  }\r\n\r\n  config(staticName: string) {\r\n    this.router.navigate([`fields/${staticName}`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  openPermissions() {\r\n    this.router.navigate([GoToPermissions.goApp(this.context.appId)], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportApp() {\r\n    this.router.navigate([`export`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportParts() {\r\n    this.router.navigate([`export/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  importParts() {\r\n    this.router.navigate([`import/parts`], { relativeTo: this.route.firstChild });\r\n  }\r\n\r\n  exportAppXml() {\r\n    this.snackBar.open('Exporting...');\r\n    this.exportAppService.exportForVersionControl(true, false).subscribe({\r\n      next: result => {\r\n        this.snackBar.open('Export done. Please check your \\'.data\\' folder', null, { duration: 3000 });\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Export failed. Please check console for more information', null, { duration: 3000 });\r\n      },\r\n    });\r\n  }\r\n\r\n  /** Experimental */\r\n  resetApp() {\r\n    if (!confirm('Are you sure? All changes since last xml export will be lost')) { return; }\r\n    this.snackBar.open('Resetting...');\r\n    this.importAppPartsService.resetApp().subscribe({\r\n      next: result => {\r\n        this.snackBar.open('Reset worked!', null, { duration: 3000 });\r\n      },\r\n      error: (error: HttpErrorResponse) => {\r\n        this.snackBar.open('Reset failed. Please check console for more information', null, { duration: 3000 });\r\n      },\r\n    });\r\n  }\r\n}\r\n","<div class=\"nav-component-wrapper\" appToggleDebug *ngIf=\"(templateVars$ | async) as data\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">\r\n      <div>{{ data.dialogSettings?.Context.App.Name }} Admin</div>\r\n      <button mat-icon-button matTooltip=\"Close dialog\" (click)=\"closeDialog()\">\r\n        <mat-icon>close</mat-icon>\r\n      </button>\r\n    </div>\r\n  </div>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <!-- spm NOTE: we use mat-tab-group because mat-tab-nav-bar doesn't have animations and doesn't look pretty -->\r\n  <mat-tab-group class=\"mat-tab-group-max-height\" dynamicHeight color=\"accent\"\r\n    *ngIf=\"data.dialogSettings && data.tabIndex != null\" (selectedTabChange)=\"changeTab($event)\"\r\n    [selectedIndex]=\"data.tabIndex\">\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"App Info\">\r\n        <mat-icon>info</mat-icon>\r\n        <span>Info</span>\r\n      </div>\r\n      <app-getting-started *matTabContent [gettingStartedUrl]=\"data.dialogSettings.Context.App.GettingStartedUrl\">\r\n      </app-getting-started>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Data / Content\">\r\n        <mat-icon>menu</mat-icon>\r\n        <span>Data</span>\r\n      </div>\r\n      <app-data *matTabContent [enablePermissions]=\"data.dialogSettings.Context.Enable.AppPermissions\"></app-data>\r\n    </mat-tab>\r\n\r\n    <mat-tab *ngIf=\"data.dialogSettings.Context.Enable.Query\">\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Queries / Visual Query Designer\">\r\n        <mat-icon>filter_list</mat-icon>\r\n        <span>Queries</span>\r\n      </div>\r\n      <app-queries *matTabContent [enablePermissions]=\"data.dialogSettings.Context.Enable.AppPermissions\">\r\n      </app-queries>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"Views / Templates\">\r\n        <mat-icon>layers</mat-icon>\r\n        <span>Views</span>\r\n      </div>\r\n      <app-views *matTabContent [enableCode]=\"data.dialogSettings.Context.Enable.CodeEditor\"\r\n        [enablePermissions]=\"data.dialogSettings.Context.Enable.AppPermissions\">\r\n      </app-views>\r\n    </mat-tab>\r\n\r\n    <mat-tab *ngIf=\"data.dialogSettings.Context.Enable.Query\">\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"WebApi\">\r\n        <mat-icon>offline_bolt</mat-icon>\r\n        <span>WebApi</span>\r\n      </div>\r\n      <app-web-api *matTabContent [enableCode]=\"data.dialogSettings.Context.Enable.CodeEditor\">\r\n      </app-web-api>\r\n    </mat-tab>\r\n\r\n    <mat-tab>\r\n      <div *matTabLabel class=\"mat-tab-label-box\" matTooltip=\"App Settings\">\r\n        <mat-icon>settings_applications</mat-icon>\r\n        <span>App</span>\r\n      </div>\r\n      <app-app-configuration *matTabContent [dialogSettings]=\"data.dialogSettings\">\r\n      </app-app-configuration>\r\n    </mat-tab>\r\n  </mat-tab-group>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatTabChangeEvent } from '@angular/material/tabs';\r\nimport { ActivatedRoute, NavigationEnd, Router } from '@angular/router';\r\nimport { BehaviorSubject, combineLatest, Subscription } from 'rxjs';\r\nimport { filter, map, pairwise, startWith } from 'rxjs/operators';\r\nimport { UpdateEnvVarsFromDialogSettings } from '../../shared/helpers/update-env-vars-from-dialog-settings.helper';\r\nimport { DialogSettings } from '../models/dialog-settings.model';\r\nimport { AppDialogConfigService } from '../services/app-dialog-config.service';\r\n\r\n@Component({\r\n  selector: 'app-app-administration-nav',\r\n  templateUrl: './app-administration-nav.component.html',\r\n  styleUrls: ['./app-administration-nav.component.scss'],\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class AppAdministrationNavComponent implements OnInit, OnDestroy {\r\n  private dialogSettings$ = new BehaviorSubject<DialogSettings>(null);\r\n  private tabs$ = new BehaviorSubject<string[]>(null);\r\n  private tabIndex$ = combineLatest([\r\n    this.tabs$,\r\n    this.router.events.pipe(\r\n      filter(event => event instanceof NavigationEnd),\r\n      map(() => this.route.snapshot.firstChild.url[0].path),\r\n      startWith(this.route.snapshot.firstChild.url[0].path),\r\n    )\r\n  ]).pipe(\r\n    map(([tabs, path]) => {\r\n      if (tabs == null) { return; }\r\n      const tabIndex = tabs.indexOf(path);\r\n      return tabIndex;\r\n    })\r\n  );\r\n  templateVars$ = combineLatest([this.dialogSettings$, this.tabIndex$]).pipe(\r\n    map(([dialogSettings, tabIndex]) => ({ dialogSettings, tabIndex })),\r\n  );\r\n\r\n  private subscription = new Subscription();\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<AppAdministrationNavComponent>,\r\n    private appDialogConfigService: AppDialogConfigService,\r\n    private router: Router,\r\n    private route: ActivatedRoute,\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.fetchDialogSettings();\r\n    this.refreshOnChildClosed();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.dialogSettings$.complete();\r\n    this.tabs$.complete();\r\n    this.subscription.unsubscribe();\r\n  }\r\n\r\n  closeDialog() {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  changeTab(event: MatTabChangeEvent) {\r\n    const path = this.tabs$.value[event.index];\r\n    this.router.navigate([path], { relativeTo: this.route });\r\n  }\r\n\r\n  private fetchDialogSettings() {\r\n    this.appDialogConfigService.getDialogSettings().subscribe(dialogSettings => {\r\n      UpdateEnvVarsFromDialogSettings(dialogSettings.Context.App);\r\n      this.dialogSettings$.next(dialogSettings);\r\n\r\n      let tabs = ['home', 'data', 'queries', 'views', 'web-api', 'app']; // tabs order has to match template\r\n      if (!dialogSettings.Context.Enable.Query) {\r\n        tabs = tabs.filter(tab => tab !== 'queries' && tab !== 'web-api');\r\n      }\r\n      this.tabs$.next(tabs);\r\n    });\r\n  }\r\n\r\n  private refreshOnChildClosed() {\r\n    this.subscription.add(\r\n      this.router.events.pipe(\r\n        filter(event => event instanceof NavigationEnd),\r\n        startWith(!!this.route.snapshot.firstChild.firstChild),\r\n        map(() => !!this.route.snapshot.firstChild.firstChild),\r\n        pairwise(),\r\n        filter(([hadChild, hasChild]) => hadChild && !hasChild),\r\n      ).subscribe(() => {\r\n        this.fetchDialogSettings();\r\n      })\r\n    );\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}