"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_code-editor_code-editor_module_ts-projects_ng-dialogs_src_app_sha-ff0107"],{5005:function(K,R,d){d.d(R,{_:function(){return P},s:function(){return M}});var Z=d(5106),k=d(8069),u=d(8047),A=d(635),J=d(8598),D=d(7133),F=d(8784),Q=d(2425),P="admin/type/",M=function(){var E=function(){function U(I,h,C){(0,k.Z)(this,U),this.http=I,this.context=h,this.dnnContext=C}return(0,u.Z)(U,[{key:"apiUrl",value:function(h){return this.dnnContext.$2sxc.http.apiUrl(h)}},{key:"retrieveContentType",value:function(h){return this.http.get(this.apiUrl(P+"get"),{params:{appId:this.context.appId.toString(),contentTypeId:h}})}},{key:"retrieveContentTypes",value:function(h){return this.http.get(this.apiUrl(P+"list"),{params:{appId:this.context.appId.toString(),scope:h}})}},{key:"getScopes",value:function(){return this.http.get(this.apiUrl(P+"scopes"),{params:{appId:this.context.appId.toString()}}).pipe((0,A.U)(function(h){return Object.keys(h).map(function(f){return{name:h[f],value:f}})}))}},{key:"save",value:function(h){return this.http.post(this.apiUrl(P+"save"),h,{params:{appid:this.context.appId.toString()}})}},{key:"delete",value:function(h){return this.http.delete(this.apiUrl(P+"delete"),{params:{appid:this.context.appId.toString(),staticName:h.StaticName}})}},{key:"import",value:function(h){var T,C=new FormData,f=(0,Z.Z)(h);try{for(f.s();!(T=f.n()).done;)C.append("File",T.value)}catch(N){f.e(N)}finally{f.f()}return this.http.post(this.apiUrl(P+"import"),C,{params:{appId:this.context.appId.toString(),zoneId:this.context.zoneId.toString()}})}},{key:"createGhost",value:function(h){return this.http.post(this.apiUrl(P+"addghost"),null,{params:{appid:this.context.appId.toString(),sourceStaticName:h}})}}]),U}();return E.\u0275fac=function(I){return new(I||E)(D.LFG(F.eN),D.LFG(J._),D.LFG(Q._y))},E.\u0275prov=D.Yz7({token:E,factory:E.\u0275fac}),E}()},7180:function(K,R,d){d.r(R),d.d(R,{CodeEditorModule:function(){return _t},translateLoaderFactoryCode:function(){return de}});var Z=d(8047),k=d(8069),u=d(6362),A=d(7317),J=d(1130),D=d(5758),F=d(5590),Q=d(4742),P=d(2528),M=d(7514),E=d(5260),U=d(7200),I=d(8598),h=d(8450),C=d(8865),f=d(162),T=d(2977),x=d(6170),N=d(2090),H=d(7714),j=d(6317),V=d(6562),Y=d(1640),z=d(745),W=d(3280),ue=d(1203),ve=d(9525),q=d(635),w=d(5656),ne=d(7472),ie=d(8254),e=d(7133);function _e(i,p){if(1&i&&(e.ynx(0),e.TgZ(1,"div"),e._uU(2),e.qZA(),e._UZ(3,"br"),e.BQk()),2&i){var o=e.oxw();e.xp6(2),e.AsE('"',o.snackBarData.fileName,'" also has a code-behind file "',o.snackBarData.codeFile,'".')}}function ge(i,p){if(1&i&&(e.ynx(0),e._uU(1),e.BQk()),2&i){var o=e.oxw(2);e.xp6(1),e.hij(' You are editing "',o.snackBarData.edition,'" edition. ')}}function fe(i,p){1&i&&(e.ynx(0),e._uU(1," You may be editing an edition which is not the one you see. "),e.BQk())}function he(i,p){if(1&i&&(e.TgZ(0,"div"),e.YNc(1,ge,2,1,"ng-container",1),e._uU(2),e.YNc(3,fe,2,0,"ng-container",1),e._uU(4," See "),e.TgZ(5,"a",4),e._uU(6,"docs"),e.qZA(),e._uU(7,". "),e.qZA()),2&i){var o=e.oxw();e.xp6(1),e.Q6J("ngIf",o.snackBarData.edition),e.xp6(1),e.AsE(" There are ",o.snackBarData.otherEditions,' other editions of "',o.snackBarData.fileName,'". '),e.xp6(1),e.Q6J("ngIf",!o.snackBarData.edition)}}function me(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"button",5),e.NdJ("click",function(){return e.CHM(o),e.oxw().openCodeBehind()}),e._uU(1," Open code-behind file "),e.qZA()}}var Ce=function(){var i=function(){function p(o,t){(0,k.Z)(this,p),this.snackRef=o,this.snackBarData=t}return(0,Z.Z)(p,[{key:"openCodeBehind",value:function(){this.snackBarData.openCodeBehind=!0,this.snackRef.dismissWithAction()}}]),p}();return i.\u0275fac=function(o){return new(o||i)(e.Y36(P.OX),e.Y36(P.qD))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-and-edition-warnings"]],decls:5,vars:3,consts:[[1,"messages"],[4,"ngIf"],[1,"actions"],["mat-button","","color","primary",3,"click",4,"ngIf"],["href","http://r.2sxc.org/polymorphism","target","_blank"],["mat-button","","color","primary",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,_e,4,2,"ng-container",1),e.YNc(2,he,8,4,"div",1),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,me,2,0,"button",3),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngIf",t.snackBarData.codeFile),e.xp6(1),e.Q6J("ngIf",t.snackBarData.otherEditions),e.xp6(2),e.Q6J("ngIf",t.snackBarData.codeFile))},directives:[u.O5,A.lW],styles:[".messages[_ngcontent-%COMP%]{font-size:14px}.messages[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#fff}.actions[_ngcontent-%COMP%]{display:flex;align-items:flex-end;justify-content:flex-end}"]}),i}(),oe={Templates:"Templates",Snippets:"Snippets"},$=d(5106),ye=d(2215),xe=d(9702),Te=d(4722),Se=d(8784),Oe=d(2425),ae=function(){var i=function(){function p(o,t,n){(0,k.Z)(this,p),this.http=o,this.dnnContext=t,this.translate=n}return(0,Z.Z)(p,[{key:"getSnippets",value:function(t){var n=this;return this.http.get("../ng-assets/snippets.json.js").pipe((0,q.U)(function(a){var r=n.filterAwayNotNeededSnippetsList(a.snippets,t),s=n.extractInputTypeSnippets(r),l=n.initSnippetsWithConfig(s.standardArray,t,s.inputTypeSnippets);return{list:s.standardArray,sets:l}}))}},{key:"filterAwayNotNeededSnippetsList",value:function(t,n){var c,a=["@","["],r=function(m){return m.Type.indexOf("Razor")>-1?0:1},s=[],l=(0,$.Z)(t);try{for(l.s();!(c=l.n()).done;){var g=c.value,v=a.indexOf(g.set[0]);(-1===v||v===r(n))&&(v===r(n)&&(g.set=g.set.substr(1)),s.push(g))}}catch(_){l.e(_)}finally{l.f()}return s}},{key:"extractInputTypeSnippets",value:function(t){var s,n=[],a=[],r=(0,$.Z)(t);try{for(r.s();!(s=r.n()).done;){var l=s.value;"\\"===l.set[0]?(l.set=l.set.substr(1),a.push(l)):n.push(l)}}catch(_){r.e(_)}finally{r.f()}return{standardArray:n,inputTypeSnippets:this.catalogInputTypeSnippets(a)}}},{key:"catalogInputTypeSnippets",value:function(t){var r,n={},a=(0,$.Z)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;void 0===n[s.subset]&&(n[s.subset]=[]),n[s.subset].push(s)}}catch(l){a.e(l)}finally{a.f()}return n}},{key:"initSnippetsWithConfig",value:function(t,n,a){var r=this.makeTree(t);return r.Content=Object.assign({},r.Content,{Fields:{},PresentationFields:{}}),n.TypeContent&&this.loadContentType(r.Content.Fields,n.TypeContent,"Content",n,a),n.TypeContentPresentation&&this.loadContentType(r.Content.PresentationFields,n.TypeContentPresentation,"Content.Presentation",n,a),n.HasList?(r.List=Object.assign({},r.List,{Fields:{},PresentationFields:{}}),n.TypeList&&this.loadContentType(r.List.Fields,n.TypeList,"Header",n,a),n.TypeListPresentation&&this.loadContentType(r.List.PresentationFields,n.TypeListPresentation,"Header.Presentation",n,a)):delete r.List,n.HasApp&&(r.App.Resources={},r.App.Settings={},this.loadContentType(r.App.Resources,"App-Resources","App.Resources",n,a),this.loadContentType(r.App.Settings,"App-Settings","App.Settings",n,a)),r}},{key:"makeTree",value:function(t){var r,n={},a=(0,$.Z)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;void 0===n[s.set]&&(n[s.set]={}),void 0===n[s.set][s.subset]&&(n[s.set][s.subset]=[]);var l={key:s.name,label:this.label(s.set,s.subset,s.name),snip:s.content,help:s.help||this.help(s.set,s.subset,s.name),links:this.linksList(s.links)};n[s.set][s.subset].push(l)}}catch(c){a.e(c)}finally{a.f()}return n}},{key:"label",value:function(t,n,a){var r=this.getHelpKey(t,n,a,".Key"),s=this.translate.instant(r);return s===r&&(s=a),s}},{key:"getHelpKey",value:function(t,n,a,r){return"SourceEditorSnippets."+t+"."+n+"."+a+r}},{key:"help",value:function(t,n,a){var r=this.getHelpKey(t,n,a,".Help"),s=this.translate.instant(r);return s===r&&(s=""),s}},{key:"linksList",value:function(t){if(!t)return null;var s,n=[],a=t.split("\n"),r=(0,$.Z)(a);try{for(r.s();!(s=r.n()).done;){var c=s.value.split(":");if(3===c.length){var g={name:c[0].trim(),url:c[1].trim()+":"+c[2].trim()};n.push(g)}}}catch(v){r.e(v)}finally{r.f()}return 0===n.length?null:n}},{key:"loadContentType",value:function(t,n,a,r,s){var l=this;this.getFields(r.AppId,n).subscribe(function(c){var v,g=(0,$.Z)(c);try{for(g.s();!(v=g.n()).done;){var _=v.value,m=_.StaticName;t[m]={key:m,label:m,snip:l.valuePlaceholder(a,m,r),help:_.Metadata.merged.Notes||" ("+_.Type.toLowerCase()+") "};var y=(0,ye.Z)(t[m]);l.attachSnippets(t,a,m,_.InputType,y,s)}}catch(L){g.e(L)}finally{g.f()}if(c.length)for(var O=["EntityId","EntityTitle","EntityGuid","EntityType","IsPublished","Modified"],b=0;b<O.length;b++)t[O[b]]={key:O[b],label:O[b],snip:l.valuePlaceholder(a,O[b],r),help:l.translate.instant("SourceEditorSnippets.StandardFields."+O[b]+".Help")}})}},{key:"valuePlaceholder",value:function(t,n,a){return a.Type.indexOf("Razor")>-1?"@"+t+"."+n:"["+t.replace(".",":")+":"+n+"]"}},{key:"getFields",value:function(t,n){return this.http.get(this.dnnContext.$2sxc.http.apiUrl(Te.jt),{params:{appid:t.toString(),staticName:n}}).pipe((0,q.U)(function(a){a=a.filter(function(m){return m.Type!==xe.Q.Empty});var s,r=(0,$.Z)(a);try{for(r.s();!(s=r.n()).done;){var l=s.value;if(l.Metadata){var c=l.Metadata,v=c[l.Type],_=c[l.InputType];c.merged=Object.assign(Object.assign(Object.assign({},c.All),v),_)}}}catch(m){r.e(m)}finally{r.f()}return a}))}},{key:"attachSnippets",value:function(t,n,a,r,s,l){var c=l[r];if(r.indexOf("-")){var g=r.substr(0,r.indexOf("-"));if(g){var v=l[g];v&&(c=c?c.concat(v):v)}}if(c){void 0===t[a].more&&(t[a].more={});for(var _=t[a].more,m=0;m<c.length;m++)try{_[a+"-"+c[m].name]=Object.assign({},s,{key:a+" - "+c[m].name,label:c[m].name,snip:this.localizeGenericSnippet(c[m].content,n,a),collapse:!0})}finally{}}}},{key:"localizeGenericSnippet",value:function(t,n,a){return t.replace(/(\$\{[0-9]+\:)var(\})/gi,"$1"+n+"$2").replace(/(\$\{[0-9]+\:)prop(\})/gi,"$1"+a+"$2")}}]),p}();return i.\u0275fac=function(o){return new(o||i)(e.LFG(Se.eN),e.LFG(Oe._y),e.LFG(M.sK))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac}),i}(),re=d(1183),se=d(318),Ie=d(5469),X=d(785),G="";function pe(i){if(!i)return[];var t,p=[],o=(0,$.Z)(i);try{for(o.s();!(t=o.n()).done;)for(var n=t.value,a=p,r=n.Path.split("/"),s=r[r.length-1],l="",c=function(_){var m=r[_];l+=_?"/".concat(m):m;var y=a.find(function(b){return b.name===m});if(y)a=y.children;else{var O=Object.assign({depth:_,name:m,pathFromRoot:l,isShared:n.Shared,isFolder:m!==s},m!==s&&{children:[]});a.push(O),a=O.children}},g=0;g<r.length;g++)c(g)}catch(v){o.e(v)}finally{o.f()}return p}var ee=d(491),be=function(){var i=function(){function p(){(0,k.Z)(this,p)}return(0,Z.Z)(p,[{key:"transform",value:function(t){return null==t||t.sort(function(n,a){return n.isFolder<a.isFolder?1:n.isFolder>a.isFolder?-1:0}),t}}]),p}();return i.\u0275fac=function(o){return new(o||i)},i.\u0275pipe=e.Yjl({name:"sortItems",type:i,pure:!0}),i}(),Me=function(){var i=function(){function p(o){(0,k.Z)(this,p),this.sanitizer=o}return(0,Z.Z)(p,[{key:"transform",value:function(t,n){return this.sanitizer.bypassSecurityTrustStyle("padding-left: ".concat(n?8*t:0===t?8:8*t+16,"px;"))}}]),p}();return i.\u0275fac=function(o){return new(o||i)(e.Y36(se.H7,16))},i.\u0275pipe=e.Yjl({name:"depthPadding",type:i,pure:!0}),i}();function Pe(i,p){1&i&&e.GkF(0)}var ce=function(p){return{item:p}};function Ze(i,p){if(1&i&&(e.ynx(0),e.YNc(1,Pe,1,0,"ng-container",5),e.BQk()),2&i){var o=p.$implicit;e.oxw();var t=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,ce,o))}}var ke=function(p){return{active:p}};function Ee(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div",8),e.NdJ("click",function(){e.CHM(o);var r=e.oxw().item;return e.oxw().openTemplate(r.pathFromRoot,r.isShared)}),e.ALo(1,"depthPadding"),e._uU(2),e.qZA()}if(2&i){var t=e.oxw().item,n=e.oxw();e.Akn(e.xi3(1,5,t.depth,t.isFolder)),e.Q6J("ngClass",e.VKq(8,ke,n.isToggled(t.pathFromRoot,t.isShared)))("tippy",t.name),e.xp6(2),e.hij(" ",t.name," ")}}function Ae(i,p){1&i&&e.GkF(0)}function Fe(i,p){if(1&i&&(e.ynx(0),e.YNc(1,Ae,1,0,"ng-container",5),e.BQk()),2&i){var o=p.$implicit;e.oxw(4);var t=e.MAs(5);e.xp6(1),e.Q6J("ngTemplateOutlet",t)("ngTemplateOutletContext",e.VKq(2,ce,o))}}function De(i,p){if(1&i&&(e.ynx(0),e.YNc(1,Fe,2,4,"ng-container",1),e.ALo(2,"sortItems"),e.BQk()),2&i){var o=e.oxw(2).item;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,o.children))}}var Ne=function(p){return{"app-shared-root":p}};function Le(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",9),e.NdJ("click",function(){e.CHM(o);var r=e.oxw().item;return e.oxw().toggleItem(r.pathFromRoot,r.isShared)}),e.ALo(2,"depthPadding"),e.TgZ(3,"div",10),e.TgZ(4,"mat-icon"),e._uU(5),e.qZA(),e.TgZ(6,"span"),e._uU(7),e.qZA(),e.qZA(),e.TgZ(8,"div",11),e.NdJ("click",function(){e.CHM(o);var r=e.oxw().item;return e.oxw().addFile(r.pathFromRoot,r.isShared)}),e.TgZ(9,"mat-icon"),e._uU(10,"add"),e.qZA(),e.qZA(),e.qZA(),e.YNc(11,De,3,3,"ng-container",7),e.qZA()}if(2&i){var t=e.oxw().item,n=e.oxw();e.xp6(1),e.Akn(e.xi3(2,7,t.depth+1,t.isFolder)),e.Q6J("ngClass",e.VKq(10,Ne,t.depth<0)),e.xp6(2),e.Q6J("tippy",t.name),e.xp6(2),e.hij(" ",n.isToggled(t.pathFromRoot,t.isShared)?"keyboard_arrow_down":"keyboard_arrow_right"," "),e.xp6(2),e.Oqu(t.name),e.xp6(4),e.Q6J("ngIf",n.isToggled(t.pathFromRoot,t.isShared))}}function Ue(i,p){if(1&i&&(e.YNc(0,Ee,3,10,"div",6),e.YNc(1,Le,12,12,"div",7)),2&i){var o=p.item;e.Q6J("ngIf",!o.isFolder),e.xp6(1),e.Q6J("ngIf",o.isFolder)}}var Je=function(){var i=function(){function p(){(0,k.Z)(this,p),this.openView=new e.vpe,this.createTemplate=new e.vpe,this.toggledItemsApp=[],this.toggledItemsShared=[]}return(0,Z.Z)(p,[{key:"ngOnChanges",value:function(t){var n;if(null!=t.templates&&(this.tree=function we(i){return[{depth:-1,name:"App Files",pathFromRoot:G,isShared:!1,isFolder:!0,children:pe(i.filter(function(o){return!o.Shared}))},{depth:-1,name:"Shared App Files",pathFromRoot:G,isShared:!0,isFolder:!0,children:pe(i.filter(function(o){return o.Shared}))}]}(this.templates)),null!=t.view){var a=null===(n=t.view)||void 0===n?void 0:n.previousValue;a&&this.toggleItem(a.FileName,a.IsShared),this.view&&this.showFileInTree(this.view.FileName,this.view.IsShared)}}},{key:"isToggled",value:function(t,n){return(n?this.toggledItemsShared:this.toggledItemsApp).includes(t)}},{key:"openTemplate",value:function(t,n){this.openView.emit({key:t,shared:n})}},{key:"toggleItem",value:function(t,n){w.iX.toggleInArray(t,n?this.toggledItemsShared:this.toggledItemsApp)}},{key:"addFile",value:function(t,n){this.createTemplate.emit({folder:t,isShared:n})}},{key:"showFileInTree",value:function(t,n){if(null!=t){var a=n?this.toggledItemsShared:this.toggledItemsApp;if(!a.includes(t)){var c,r=[G].concat((0,x.Z)(t.split("/"))),s="",l=(0,$.Z)(r);try{for(l.s();!(c=l.n()).done;){var g=c.value;s=s?"".concat(s,"/").concat(g):g,!a.includes(s)&&this.toggleItem(s,n)}}catch(v){l.e(v)}finally{l.f()}}}}}]),p}();return i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-templates"]],inputs:{view:"view",templates:"templates"},outputs:{openView:"openView",createTemplate:"createTemplate"},features:[e.TTD],decls:10,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark","explorer-wrapper"],[4,"ngFor","ngForOf"],["fileOrFolder",""],[1,"create-button-wrapper"],["mat-icon-button","","tippy","Create file",3,"click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["class","file","tippyShowDelay","750",3,"style","ngClass","tippy","click",4,"ngIf"],[4,"ngIf"],["tippyShowDelay","750",1,"file",3,"ngClass","tippy","click"],[1,"folder-name-wrapper",3,"ngClass","click"],["tippyShowDelay","750",1,"folder-name",3,"tippy"],["tippy","Create file in this folder","tippyShowDelay","750","appClickStopPropagation","",1,"add-item",3,"click"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.TgZ(1,"div"),e.YNc(2,Ze,2,4,"ng-container",1),e.ALo(3,"sortItems"),e.YNc(4,Ue,2,2,"ng-template",null,2,e.W1O),e.qZA(),e.TgZ(6,"div",3),e.TgZ(7,"button",4),e.NdJ("click",function(){return t.addFile()}),e.TgZ(8,"mat-icon"),e._uU(9,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&o&&(e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,1,t.tree)))},directives:[u.sg,A.lW,X.$,F.Hw,u.tP,u.O5,u.mk,ee.E],pipes:[be,Me],styles:[".explorer-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}.create-button-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.file[_ngcontent-%COMP%]{cursor:pointer;padding:4px 0 4px 8px;overflow:hidden;white-space:nowrap;text-overflow:ellipsis;-webkit-user-select:none;user-select:none}.file[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.file.active[_ngcontent-%COMP%]{background-color:#37373d}.folder-name-wrapper[_ngcontent-%COMP%]{display:flex;cursor:pointer;-webkit-user-select:none;user-select:none;align-items:center}.folder-name-wrapper[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.folder-name-wrapper[_ngcontent-%COMP%]   .folder-name[_ngcontent-%COMP%]{display:flex;align-items:center;overflow:hidden;white-space:nowrap;padding:3px 0;flex:1 1 auto}.folder-name-wrapper[_ngcontent-%COMP%]   .add-item[_ngcontent-%COMP%]{margin-right:4px;display:none;align-items:center;justify-content:center;padding:3px}.folder-name-wrapper.app-shared-root[_ngcontent-%COMP%]{color:#fff;font-weight:500}.folder-name-wrapper[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.folder-name-wrapper[_ngcontent-%COMP%]:hover   .add-item[_ngcontent-%COMP%]{display:flex}"]}),i}(),je=function(){var i=function(){function p(){(0,k.Z)(this,p)}return(0,Z.Z)(p,[{key:"transform",value:function(t){if(null!=t)return Array.isArray(t)?t:Object.values(t)}}]),p}();return i.\u0275fac=function(o){return new(o||i)},i.\u0275pipe=e.Yjl({name:"objectToArray",type:i,pure:!0}),i}(),$e=d(845);function Re(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"mat-icon",12),e.NdJ("click",function(){e.CHM(o);var r=e.oxw().$implicit;return e.oxw(5).toggleMore(r.key)}),e._uU(1),e.qZA()}if(2&i){var t=e.oxw().$implicit,n=e.oxw(5);e.xp6(1),e.hij(" ",n.toggledMores.includes(t.key)?"more_vert":"more_horiz"," ")}}function Qe(i,p){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"a",15),e._uU(2),e.qZA(),e.qZA()),2&i){var o=p.$implicit;e.xp6(1),e.Q6J("href",o.url,e.LSH),e.xp6(1),e.Oqu(o.name)}}function Be(i,p){if(1&i&&(e.TgZ(0,"div",13),e._UZ(1,"div",14),e.ALo(2,"safeHtml"),e.YNc(3,Qe,3,2,"div",1),e.qZA()),2&i){var o=e.oxw().$implicit;e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,o.help),e.oJD),e.xp6(2),e.Q6J("ngForOf",o.links)}}function He(i,p){if(1&i&&(e.TgZ(0,"div"),e.TgZ(1,"a",15),e._uU(2),e.qZA(),e.qZA()),2&i){var o=p.$implicit;e.xp6(1),e.Q6J("href",o.url,e.LSH),e.xp6(1),e.Oqu(o.name)}}function Ve(i,p){if(1&i&&(e.TgZ(0,"div",18),e._UZ(1,"div",14),e.ALo(2,"safeHtml"),e.YNc(3,He,3,2,"div",1),e.qZA()),2&i){var o=e.oxw().$implicit;e.xp6(1),e.Q6J("innerHTML",e.lcZ(2,2,o.help),e.oJD),e.xp6(2),e.Q6J("ngForOf",o.links)}}function Ye(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",7),e.TgZ(2,"div",16),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(7).addSnippet(s.snip)}),e._uU(3),e.qZA(),e.TgZ(4,"mat-icon",10),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(7).toggleInfo(s.key)}),e._uU(5," info "),e.qZA(),e.qZA(),e.YNc(6,Ve,4,4,"div",17),e.qZA()}if(2&i){var t=p.$implicit,n=e.oxw(7);e.xp6(2),e.Q6J("tippy",t.snip),e.xp6(1),e.hij(" ",t.label," "),e.xp6(3),e.Q6J("ngIf",n.toggledInfos.includes(t.key))}}function We(i,p){if(1&i&&(e.ynx(0),e.YNc(1,Ye,7,3,"div",1),e.ALo(2,"objectToArray"),e.BQk()),2&i){var o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,o.more))}}function Ke(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div",6),e.TgZ(1,"div",7),e.TgZ(2,"div",8),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(5).addSnippet(s.snip)}),e._uU(3),e.qZA(),e.YNc(4,Re,2,1,"mat-icon",9),e.TgZ(5,"mat-icon",10),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw(5).toggleInfo(s.key)}),e._uU(6," info "),e.qZA(),e.qZA(),e.YNc(7,Be,4,4,"div",11),e.YNc(8,We,3,3,"ng-container",3),e.qZA()}if(2&i){var t=p.$implicit,n=e.oxw(5);e.xp6(2),e.Q6J("tippy",t.snip),e.xp6(1),e.hij(" ",t.label," "),e.xp6(1),e.Q6J("ngIf",t.more),e.xp6(3),e.Q6J("ngIf",n.toggledInfos.includes(t.key)),e.xp6(1),e.Q6J("ngIf",n.toggledMores.includes(t.key))}}function ze(i,p){if(1&i&&(e.ynx(0),e.YNc(1,Ke,9,5,"div",5),e.ALo(2,"objectToArray"),e.BQk()),2&i){var o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,o.value))}}function qe(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",4),e.NdJ("click",function(){var l=e.CHM(o).$implicit;return e.oxw(3).toggleFolder(l.key)}),e.ALo(2,"translate"),e.TgZ(3,"mat-icon"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.YNc(8,ze,3,3,"ng-container",3),e.qZA()}if(2&i){var t=p.$implicit,n=e.oxw(2).$implicit,a=e.oxw();e.xp6(1),e.Q6J("tippy",e.lcZ(2,4,"SourceEditorSnippets."+n.key+"."+t.key+".Help")),e.xp6(3),e.hij(" ",a.toggledFolders.includes(t.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),e.xp6(2),e.Oqu(e.lcZ(7,6,"SourceEditorSnippets."+n.key+"."+t.key+".Title")),e.xp6(2),e.Q6J("ngIf",a.toggledFolders.includes(t.key))}}function Xe(i,p){if(1&i&&(e.ynx(0),e.YNc(1,qe,9,8,"div",1),e.ALo(2,"keyvalue"),e.BQk()),2&i){var o=e.oxw().$implicit;e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,o.value))}}function Ge(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div"),e.TgZ(1,"div",2),e.NdJ("click",function(){var s=e.CHM(o).$implicit;return e.oxw().toggleSection(s.key)}),e.ALo(2,"translate"),e.TgZ(3,"mat-icon"),e._uU(4),e.qZA(),e.TgZ(5,"span"),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.qZA(),e.YNc(8,Xe,3,3,"ng-container",3),e.qZA()}if(2&i){var t=p.$implicit,n=e.oxw();e.xp6(1),e.Q6J("tippy",e.lcZ(2,4,"SourceEditorSnippets."+t.key+".Help")),e.xp6(3),e.hij(" ",n.toggledSections.includes(t.key)?"keyboard_arrow_down":"keyboard_arrow_right"," "),e.xp6(2),e.Oqu(e.lcZ(7,6,"SourceEditorSnippets."+t.key+".Title")),e.xp6(2),e.Q6J("ngIf",n.toggledSections.includes(t.key))}}var et=function(){var i=function(){function p(){(0,k.Z)(this,p),this.insertSnippet=new e.vpe,this.toggledSections=[],this.toggledFolders=[],this.toggledInfos=[],this.toggledMores=[]}return(0,Z.Z)(p,[{key:"addSnippet",value:function(t){this.insertSnippet.emit(t)}},{key:"toggleSection",value:function(t){w.iX.toggleInArray(t,this.toggledSections)}},{key:"toggleFolder",value:function(t){w.iX.toggleInArray(t,this.toggledFolders)}},{key:"toggleInfo",value:function(t){w.iX.toggleInArray(t,this.toggledInfos)}},{key:"toggleMore",value:function(t){w.iX.toggleInArray(t,this.toggledMores)}}]),p}();return i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-snippets"]],inputs:{snippets:"snippets"},outputs:{insertSnippet:"insertSnippet"},decls:3,vars:3,consts:[[1,"editor-active-explorer","fancy-scrollbar-dark"],[4,"ngFor","ngForOf"],["tippyShowDelay","750",1,"collapsible-header","section",3,"tippy","click"],[4,"ngIf"],["tippyShowDelay","750",1,"collapsible-header","folder",3,"tippy","click"],["class","snippet",4,"ngFor","ngForOf"],[1,"snippet"],[1,"snippet-label"],["matRipple","","tippyShowDelay","750",1,"text",3,"tippy","click"],["tippy","Show More","tippyShowDelay","750",3,"click",4,"ngIf"],["tippy","Show Help","tippyShowDelay","750","appClickStopPropagation","",3,"click"],["class","snippet-help",4,"ngIf"],["tippy","Show More","tippyShowDelay","750",3,"click"],[1,"snippet-help"],[1,"text",3,"innerHTML"],["target","_blank",3,"href"],["matRipple","","tippyShowDelay","750",1,"text","text-more",3,"tippy","click"],["class","snippet-help snippet-help-more",4,"ngIf"],[1,"snippet-help","snippet-help-more"]],template:function(o,t){1&o&&(e.TgZ(0,"div",0),e.YNc(1,Ge,9,8,"div",1),e.ALo(2,"keyvalue"),e.qZA()),2&o&&(e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.snippets)))},directives:[u.sg,X.$,F.Hw,u.O5,J.wG,ee.E],pipes:[u.Nd,M.X$,je,$e.z],styles:[".collapsible-header[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;overflow:hidden;white-space:nowrap;-webkit-user-select:none;user-select:none;padding:3px 0}.collapsible-header.section[_ngcontent-%COMP%]{background-color:#383838;font-weight:500}.collapsible-header.folder[_ngcontent-%COMP%]{padding-left:8px}.collapsible-header.folder[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.collapsible-header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:18px;height:18px;font-size:18px}.snippet[_ngcontent-%COMP%]{padding-right:8px}.snippet[_ngcontent-%COMP%]:hover{background-color:#2a2d2e}.snippet-label[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;-webkit-user-select:none;user-select:none}.snippet-label[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{cursor:pointer;padding:3px 0 3px 32px;flex:1 1 auto;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.snippet-label[_ngcontent-%COMP%]   .text-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-label[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;width:18px;height:18px;font-size:18px}.snippet-help[_ngcontent-%COMP%]{padding:3px 18px 3px 32px}.snippet-help-more[_ngcontent-%COMP%]{padding-left:40px}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:12px;font-style:oblique;word-break:break-word}.snippet-help[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]     p{margin:0}"]}),i}();function tt(i,p){1&i&&(e.TgZ(0,"mat-icon",21),e._uU(1,"share"),e.qZA())}function nt(i,p){1&i&&e._UZ(0,"mat-icon",22)}function it(i,p){1&i&&e._UZ(0,"mat-spinner",23)}var ot=function(p,o,t){return{active:p,modified:o,loading:t}};function at(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div",13),e.NdJ("click",function(){var r=e.CHM(o).$implicit;return e.oxw(3).openView(r.viewKey)}),e.TgZ(1,"div",14),e.YNc(2,tt,2,0,"mat-icon",15),e.TgZ(3,"span",16),e._uU(4),e.qZA(),e.qZA(),e.TgZ(5,"div",17),e.YNc(6,nt,1,0,"mat-icon",18),e.YNc(7,it,1,0,"mat-spinner",19),e.TgZ(8,"mat-icon",20),e.NdJ("click",function(){var r=e.CHM(o).$implicit;return e.oxw(3).closeEditor(r.viewKey)}),e._uU(9," close "),e.qZA(),e.qZA(),e.qZA()}if(2&i){var t=p.$implicit;e.Q6J("ngClass",e.kEZ(6,ot,t.isActive,t.isModified,t.isLoading)),e.xp6(1),e.Q6J("tippy",t.label),e.xp6(1),e.Q6J("ngIf",t.viewKey.shared),e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("ngIf",t.isModified),e.xp6(1),e.Q6J("ngIf",t.isLoading)}}function rt(i,p){if(1&i&&(e.TgZ(0,"div",11),e.YNc(1,at,10,10,"div",12),e.qZA()),2&i){var o=e.oxw().ngIf;e.xp6(1),e.Q6J("ngForOf",o.tabs)}}function st(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"app-monaco-editor",24),e.NdJ("valueChanged",function(r){e.CHM(o);var s=e.oxw().ngIf;return e.oxw().codeChanged(r,s.viewKey)}),e.qZA()}if(2&i){var t=e.oxw().ngIf,n=e.oxw();e.Q6J("filename",t.view.FileName)("value",t.view.Code)("options",n.monacoOptions)("snippets",t.editorSnipps)("autoFocus",!0)}}function pt(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){return e.CHM(o),e.oxw(2).save()}),e.TgZ(1,"mat-icon"),e._uU(2,"done"),e.qZA(),e.qZA()}}var ct=function(p){return{"sxc-dark":p}},le=function(p){return{active:p}};function lt(i,p){if(1&i){var o=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.NdJ("click",function(){e.CHM(o);var r=e.oxw();return r.toggleExplorer(r.Explorers.Templates)}),e.TgZ(3,"mat-icon"),e._uU(4,"file_copy"),e.qZA(),e.qZA(),e.TgZ(5,"div",4),e.NdJ("click",function(){e.CHM(o);var r=e.oxw();return r.toggleExplorer(r.Explorers.Snippets)}),e.TgZ(6,"mat-icon"),e._uU(7,"code"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"app-code-templates",5),e.NdJ("openView",function(r){return e.CHM(o),e.oxw().openView(r)})("createTemplate",function(r){return e.CHM(o),e.oxw().createTemplate(r)}),e.qZA(),e.TgZ(9,"app-code-snippets",6),e.NdJ("insertSnippet",function(r){return e.CHM(o),e.oxw().insertSnippet(r)}),e.qZA(),e.TgZ(10,"div",7),e.YNc(11,rt,2,1,"div",8),e.YNc(12,st,1,5,"app-monaco-editor",9),e.qZA(),e.YNc(13,pt,3,0,"button",10),e.qZA()}if(2&i){var t=p.ngIf,n=e.oxw();e.Q6J("ngClass",e.VKq(11,ct,"2sxc-dark"===n.monacoOptions.theme)),e.xp6(2),e.Q6J("ngClass",e.VKq(13,le,n.activeExplorer===n.Explorers.Templates)),e.xp6(3),e.Q6J("ngClass",e.VKq(15,le,n.activeExplorer===n.Explorers.Snippets)),e.xp6(3),e.Q6J("hidden",n.activeExplorer!==n.Explorers.Templates)("view",t.view)("templates",t.templates),e.xp6(1),e.Q6J("hidden",n.activeExplorer!==n.Explorers.Snippets)("snippets",t.explorerSnipps),e.xp6(2),e.Q6J("ngIf",t.tabs.length>0),e.xp6(1),e.Q6J("ngIf",t.view),e.xp6(1),e.Q6J("ngIf",t.activeView)}}var ut=[{path:"",component:function(){var i=function(){function p(o,t,n,a,r,s,l,c,g){var v;(0,k.Z)(this,p),this.context=o,this.route=t,this.snackBar=n,this.sourceService=a,this.snippetsService=r,this.zone=s,this.titleService=l,this.dialog=c,this.viewContainerRef=g,this.Explorers=oe,this.activeExplorer=oe.Templates,this.monacoOptions={theme:"2sxc-dark",tabSize:2},this.context.init(this.route);var _=JSON.parse(sessionStorage.getItem(ie.kF)),m=null!==(v="true"===sessionStorage.getItem(ie.PH))&&void 0!==v&&v;_.forEach(function(y){var O;y.Path.startsWith("/")&&(y.Path=y.Path.substring(1)),null!==(O=y.IsShared)&&void 0!==O||(y.IsShared=m)}),this.urlItems=_}return(0,Z.Z)(p,[{key:"ngOnInit",value:function(){var t=this;this.subscription=new H.w0,this.templates$=new j.X([]);var n=this.urlItems.map(function(a){var r,s;return{key:null!==(s=null===(r=a.EntityId)||void 0===r?void 0:r.toString())&&void 0!==s?s:a.Path,shared:a.IsShared}});this.activeView$=new j.X(n[0]),this.openViews$=new j.X(n),this.viewInfos$=new j.X([]),this.attachListeners(),this.sourceService.getAll().subscribe(function(a){t.templates$.next(a)}),this.subscription.add((0,V.a)([this.templates$,this.openViews$]).subscribe(function(a){var r=(0,N.Z)(a,2),s=r[0];if(0!==s.length){var c=t.viewInfos$.value,g=r[1].filter(function(v){return!c.some(function(_){return w.iX.objectsEqual(_.viewKey,v)})});0!==g.length&&((0,Y.D)(g.map(function(v){var _={viewKey:v};c=[].concat((0,x.Z)(c),[_]);var m=t.sourceService.get(v.key,v.shared,t.urlItems).pipe((0,ue.B)()),y=m.pipe((0,ve.z)(function(O){return t.snippetsService.getSnippets(O)}));return(0,Y.D)([(0,z.of)(v),m,y])})).subscribe(function(v){var _=t.viewInfos$.value;v.forEach(function(m){var y=(0,N.Z)(m,3),O=y[0],b=y[1],L=y[2],S=_.findIndex(function(te){return w.iX.objectsEqual(te.viewKey,O)});if(!(S<0)){var B={viewKey:O,view:b,explorerSnipps:L.sets,editorSnipps:L.list,savedCode:b.Code};_=[].concat((0,x.Z)(_.slice(0,S)),[B],(0,x.Z)(_.slice(S+1))),t.showCodeAndEditionWarnings(O,b,s)}}),t.viewInfos$.next(_)}),t.viewInfos$.next(c))}})),this.subscription.add((0,V.a)([this.activeView$,this.viewInfos$]).subscribe(function(a){var c,r=(0,N.Z)(a,2),s=r[0],g=r[1].find(function(y){return w.iX.objectsEqual(y.viewKey,s)}),v="Code Editor",_=null==g?v:"".concat(null===(c=g.view)||void 0===c?void 0:c.FileName," - ").concat(v);_!==t.titleService.getTitle()&&t.titleService.setTitle(_)})),this.templateVars$=(0,V.a)([this.templates$,this.activeView$,this.openViews$,this.viewInfos$]).pipe((0,q.U)(function(a){var r=(0,N.Z)(a,4),s=r[0],l=r[1],g=r[3],v=r[2].map(function(y){var O,b,L,S=g.find(function(te){return w.iX.objectsEqual(te.viewKey,y)});return{viewKey:y,label:null!==(b=null===(O=null==S?void 0:S.view)||void 0===O?void 0:O.FileName)&&void 0!==b?b:y.key,isActive:w.iX.objectsEqual(y,l),isModified:(null===(L=null==S?void 0:S.view)||void 0===L?void 0:L.Code)!==(null==S?void 0:S.savedCode),isLoading:null==(null==S?void 0:S.view)}}),_=g.find(function(y){return w.iX.objectsEqual(y.viewKey,l)});return{activeView:l,tabs:v,viewKey:null==_?void 0:_.viewKey,view:null==_?void 0:_.view,templates:s,explorerSnipps:null==_?void 0:_.explorerSnipps,editorSnipps:null==_?void 0:_.editorSnipps}}))}},{key:"ngOnDestroy",value:function(){this.templates$.complete(),this.activeView$.complete(),this.openViews$.complete(),this.viewInfos$.complete(),this.subscription.unsubscribe()}},{key:"toggleExplorer",value:function(t){this.activeExplorer=this.activeExplorer!==t?t:null}},{key:"createTemplate",value:function(t){var a,n=this;if(null!=t.isShared){var s={folder:t.folder,global:t.isShared,purpose:"api"===t.folder||(null===(a=t.folder)||void 0===a?void 0:a.startsWith("api/"))?"Api":void 0};this.dialog.open(E.UH,{autoFocus:!1,data:s,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(c){!c||n.sourceService.create(c.name,t.isShared,c.templateKey).subscribe(function(){n.sourceService.getAll().subscribe(function(g){n.templates$.next(g)})})})}else this.dialog.open(E.i6,{autoFocus:!1,viewContainerRef:this.viewContainerRef,width:"650px"}).afterClosed().subscribe(function(c){null!=c&&(t.isShared=c,n.createTemplate(t))})}},{key:"insertSnippet",value:function(t){var n;null===(n=this.monacoEditorRef)||void 0===n||n.insertSnippet(t)}},{key:"codeChanged",value:function(t,n){var a=this.viewInfos$.value,r=a.findIndex(function(c){return w.iX.objectsEqual(c.viewKey,n)}),s=a[r],l=Object.assign(Object.assign({},s),{view:Object.assign(Object.assign({},s.view),{Code:t})});a=[].concat((0,x.Z)(a.slice(0,r)),[l],(0,x.Z)(a.slice(r+1))),this.viewInfos$.next(a)}},{key:"openView",value:function(t){var n,a;t=null!==(a=null===(n=this.viewInfos$.value.find(function(c){var g,v;return!w.iX.objectsEqual(c.viewKey,t)&&(null===(g=c.view)||void 0===g?void 0:g.FileName)===t.key&&(null===(v=c.view)||void 0===v?void 0:v.IsShared)===t.shared}))||void 0===n?void 0:n.viewKey)&&void 0!==a?a:t,w.iX.objectsEqual(this.activeView$.value,t)||this.activeView$.next(t);var s=this.openViews$.value;if(!s.some(function(c){return w.iX.objectsEqual(c,t)})){var l=[].concat((0,x.Z)(s),[t]);this.openViews$.next(l)}}},{key:"closeEditor",value:function(t){var n,a=this.openViews$.value,r=a.filter(function(c){return!w.iX.objectsEqual(c,t)}),s=this.activeView$.value;if(w.iX.objectsEqual(s,t)){var l=null!==(n=a[a.findIndex(function(c){return w.iX.objectsEqual(c,s)})-1])&&void 0!==n?n:r[0];this.activeView$.next(l)}this.openViews$.next(r)}},{key:"save",value:function(t){var n=this;null!=t||(t=this.activeView$.value);var a=this.viewInfos$.value.find(function(s){return w.iX.objectsEqual(s.viewKey,t)});if(null!=(null==a?void 0:a.view)){this.snackBar.open("Saving...");var r=a.view.Code;this.sourceService.save(t.key,t.shared,a.view,this.urlItems).subscribe({next:function(l){if(l){var c=(0,x.Z)(n.viewInfos$.value),g=c.findIndex(function(m){return w.iX.objectsEqual(m.viewKey,t)});if(!(g<0)){var _=Object.assign(Object.assign({},c[g]),{savedCode:r});c=[].concat((0,x.Z)(c.slice(0,g)),[_],(0,x.Z)(c.slice(g+1))),n.viewInfos$.next(c),n.snackBar.open("Saved",null,{duration:2e3})}}else n.snackBar.open("Failed",null,{duration:2e3})},error:function(){n.snackBar.open("Failed",null,{duration:2e3})}})}}},{key:"showCodeAndEditionWarnings",value:function(t,n,a){var s,r=this,l=n.FileName,c=l.indexOf("/")>-1?l.lastIndexOf("/")+1:0,g=0===c?"":l.substring(0,c),v=l.substring(c),m=v.substring(0,v.length-n.Extension.length)+".code"+n.Extension,y=a.find(function(S){return S.Path===g+m&&S.Shared===n.IsShared}),O=a.filter(function(S){return S.Path.endsWith(v)&&S.Shared===n.IsShared}).length-1;if(y||O){var b={fileName:v,codeFile:null==y?void 0:y.Path,edition:null===(s=this.urlItems.find(function(S){var B;return(null===(B=S.EntityId)||void 0===B?void 0:B.toString())===t.key&&S.IsShared===n.IsShared&&S.Path===n.FileName}))||void 0===s?void 0:s.Edition,otherEditions:O,openCodeBehind:!1},L=this.snackBar.openFromComponent(Ce,{data:b,duration:1e4});L.onAction().subscribe(function(){L.containerInstance.snackBarConfig.data.openCodeBehind&&r.openView({key:null==y?void 0:y.Path,shared:null==y?void 0:y.Shared})})}}},{key:"attachListeners",value:function(){var t=this;this.zone.runOutsideAngular(function(){t.subscription.add((0,W.R)(window,"beforeunload").subscribe(function(n){!t.viewInfos$.value.some(function(r){return null!=r.view&&r.view.Code!==r.savedCode})||(n.preventDefault(),n.returnValue="")})),t.subscription.add((0,W.R)(window,"keydown").subscribe(function(n){83!==n.keyCode||!(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)||(n.preventDefault(),t.zone.run(function(){t.save()}))}))})}}]),p}();return i.\u0275fac=function(o){return new(o||i)(e.Y36(I._),e.Y36(T.gz),e.Y36(P.ux),e.Y36(re.t),e.Y36(ae),e.Y36(e.R0b),e.Y36(se.Dx),e.Y36(D.uw),e.Y36(e.s_b))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-code-editor"]],viewQuery:function(o,t){var n;1&o&&e.Gf(ne.T,5),2&o&&e.iGM(n=e.CRH())&&(t.monacoEditorRef=n.first)},decls:2,vars:3,consts:[["class","editor-root","appToggleDebug","",3,"ngClass",4,"ngIf"],["appToggleDebug","",1,"editor-root",3,"ngClass"],[1,"editor-side-toolbar"],["tippy","Templates",1,"button",3,"ngClass","click"],["tippy","Snippets",1,"button",3,"ngClass","click"],[3,"hidden","view","templates","openView","createTemplate"],[3,"hidden","snippets","insertSnippet"],[1,"editor-group"],["class","tabs-container fancy-scrollbar-dark",4,"ngIf"],[3,"filename","value","options","snippets","autoFocus","valueChanged",4,"ngIf"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click",4,"ngIf"],[1,"tabs-container","fancy-scrollbar-dark"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"ngClass","click"],["tippyShowDelay","750",1,"tab-label-container",3,"tippy"],["class","icon-shared",4,"ngIf"],[1,"tab-label"],[1,"tab-actions-container"],["class","tab-action icon-modified","svgIcon","circle",4,"ngIf"],["class","spinner","mode","indeterminate","diameter","14","color","white",4,"ngIf"],["tippy","Close","appClickStopPropagation","",1,"tab-action","icon-close",3,"click"],[1,"icon-shared"],["svgIcon","circle",1,"tab-action","icon-modified"],["mode","indeterminate","diameter","14","color","white",1,"spinner"],[3,"filename","value","options","snippets","autoFocus","valueChanged"],["mat-fab","","mat-elevation-z24","","tippy","Click to save or CTRL + S",3,"click"]],template:function(o,t){1&o&&(e.YNc(0,lt,14,17,"div",0),e.ALo(1,"async")),2&o&&e.Q6J("ngIf",e.lcZ(1,1,t.templateVars$))},directives:[u.O5,Ie.D,u.mk,X.$,F.Hw,Je,et,u.sg,ee.E,Q.$g,ne.T,A.lW],pipes:[u.Ov],styles:[".sxc-dark[_ngcontent-%COMP%]{background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]{width:100%;height:100%;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]{display:flex;height:35px;background-color:#252526;overflow:hidden}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]:hover{overflow-x:auto}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;align-items:center;cursor:pointer;color:#ccc;font-size:13px;padding-left:10px;border-right:1px solid #252526;background-color:#2d2d2d;-webkit-user-select:none;user-select:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]{height:100%;display:flex;align-items:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-label-container[_ngcontent-%COMP%]   .icon-shared[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;line-height:16px;margin-right:4px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-actions-container[_ngcontent-%COMP%]{height:100%;width:28px;display:flex;align-items:center;justify-content:center}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]{display:none;align-items:center;justify-content:center;width:16px;height:16px;padding:2px;font-size:16px;border-radius:5px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action.icon-modified[_ngcontent-%COMP%]{width:10px;height:10px;font-size:10px}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .tab-action[_ngcontent-%COMP%]:hover{background-color:#5a5d5e4f}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab.active[_ngcontent-%COMP%]{color:#fff;background-color:#1e1e1e}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:hover   .icon-close[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).modified   .icon-modified[_ngcontent-%COMP%]{display:flex}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover).loading   .spinner[_ngcontent-%COMP%]{display:block}.editor-group[_ngcontent-%COMP%]   .tabs-container[_ngcontent-%COMP%]   .tab[_ngcontent-%COMP%]:not(:hover):not(.modified):not(.loading).active   .icon-close[_ngcontent-%COMP%]{display:flex}.mat-fab[_ngcontent-%COMP%]{position:absolute;right:48px;bottom:32px;z-index:10}"]}),i}()}],vt=function(){var i=(0,Z.Z)(function p(){(0,k.Z)(this,p)});return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[T.Bz.forChild(ut)],T.Bz]}),i}();function de(i){return new C.M(i,"./i18n/code-editor.",".js?".concat(window.sxcVersion))}var _t=function(){var i=(0,Z.Z)(function p(){(0,k.Z)(this,p)});return i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[I._,re.t,ae,M.sK],imports:[[vt,h.q,u.ez,D.Is,A.ot,F.Ps,P.ZX,J.si,M.aw.forChild((0,f.f)(de)),U.n,Q.Cq,E.qH]]}),i}()},4722:function(K,R,d){d.d(R,{jt:function(){return E},Mr:function(){return U}});var Z=d(5106),k=d(8069),u=d(8047),A=d(635),J=d(5005),D=d(8598),F=d(7133),Q=d(8784),P=d(2425),M="admin/field/",E=M+"all",U=function(){var I=function(){function h(C,f,T){(0,k.Z)(this,h),this.http=C,this.context=f,this.dnnContext=T}return(0,u.Z)(h,[{key:"apiUrl",value:function(f){return this.dnnContext.$2sxc.http.apiUrl(f)}},{key:"typeListRetrieve",value:function(){return this.http.get(this.apiUrl(M+"DataTypes"),{params:{appid:this.context.appId.toString()}})}},{key:"getInputTypesList",value:function(){return this.http.get(this.apiUrl(M+"InputTypes"),{params:{appid:this.context.appId.toString()}}).pipe((0,A.U)(function(f){return f.map(function(x){return{dataType:x.Type.substring(0,x.Type.indexOf("-")),inputType:x.Type,label:x.Label,description:x.Description,isDefault:x.IsDefault,isObsolete:x.IsObsolete,isRecommended:x.IsRecommended,obsoleteMessage:x.ObsoleteMessage,icon:x.IsDefault?"star":x.IsRecommended?"star_outlined":null}})}))}},{key:"getReservedNames",value:function(){return this.http.get(this.apiUrl(M+"ReservedNames"))}},{key:"getFields",value:function(f){return this.http.get(this.apiUrl(E),{params:{appid:this.context.appId.toString(),staticName:f}}).pipe((0,A.U)(function(T){if(T){var N,x=(0,Z.Z)(T);try{for(x.s();!(N=x.n()).done;){var H=N.value;if(H.Metadata){var j=H.Metadata,Y=j[H.Type],z=j[H.InputType];j.merged=Object.assign(Object.assign(Object.assign({},j.All),Y),z)}}}catch(W){x.e(W)}finally{x.f()}}return T}))}},{key:"reOrder",value:function(f,T){return this.http.post(this.apiUrl(M+"Sort"),null,{params:{appid:this.context.appId.toString(),contentTypeId:T.Id.toString(),order:JSON.stringify(f)}})}},{key:"setTitle",value:function(f,T){return this.http.post(this.apiUrl(J._+"SetTitle"),null,{params:{appid:this.context.appId.toString(),contentTypeId:T.Id.toString(),attributeId:f.Id.toString()}})}},{key:"rename",value:function(f,T,x){return this.http.post(this.apiUrl(M+"Rename"),null,{params:{appid:this.context.appId.toString(),contentTypeId:T.toString(),attributeId:f.toString(),newName:x}})}},{key:"delete",value:function(f,T){if(f.IsTitle)throw new Error("Can't delete Title");return this.http.delete(this.apiUrl(M+"Delete"),{params:{appid:this.context.appId.toString(),contentTypeId:T.Id.toString(),attributeId:f.Id.toString()}})}},{key:"add",value:function(f,T){return this.http.post(this.apiUrl(M+"Add"),null,{params:{AppId:this.context.appId.toString(),ContentTypeId:T.toString(),Id:f.Id.toString(),Type:f.Type,InputType:f.InputType,StaticName:f.StaticName,IsTitle:f.IsTitle.toString(),Index:f.SortOrder.toString()}})}},{key:"updateInputType",value:function(f,T,x){return this.http.post(this.apiUrl(M+"InputType"),null,{params:{appId:this.context.appId.toString(),attributeId:f.toString(),field:T,inputType:x}})}}]),h}();return I.\u0275fac=function(C){return new(C||I)(F.LFG(Q.eN),F.LFG(D._),F.LFG(P._y))},I.\u0275prov=F.Yz7({token:I,factory:I.\u0275fac}),I}()},3135:function(K,R,d){d.d(R,{Y:function(){return I}});var Z=d(8069),k=d(8047),u=d(7133),A=d(6362),J=d(4770);function D(h,C){1&h&&u.GkF(0)}function F(h,C){if(1&h&&(u.TgZ(0,"mat-hint"),u.YNc(1,D,1,0,"ng-container",3),u.qZA()),2&h){u.oxw();var f=u.MAs(4);u.xp6(1),u.Q6J("ngTemplateOutlet",f)}}function Q(h,C){1&h&&u.GkF(0)}function P(h,C){if(1&h&&(u.TgZ(0,"mat-error"),u.YNc(1,Q,1,0,"ng-container",3),u.qZA()),2&h){u.oxw();var f=u.MAs(4);u.xp6(1),u.Q6J("ngTemplateOutlet",f)}}function M(h,C){1&h&&u.Hsn(0)}var E=function(C){return{"hint-box__short":C}},U=["*"],I=function(){var h=function(){function C(){(0,Z.Z)(this,C),this.isError=!1,this.isShort=!0}return(0,k.Z)(C,[{key:"toggleIsShort",value:function(){this.isShort=!this.isShort}}]),C}();return h.\u0275fac=function(f){return new(f||h)},h.\u0275cmp=u.Xpm({type:h,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:U,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(f,T){1&f&&(u.F$t(),u.TgZ(0,"div",0),u.NdJ("click",function(){return T.toggleIsShort()}),u.YNc(1,F,2,1,"mat-hint",1),u.YNc(2,P,2,1,"mat-error",1),u.qZA(),u.YNc(3,M,1,0,"ng-template",null,2,u.W1O)),2&f&&(u.Q6J("ngClass",u.VKq(4,E,T.isShort))("ngSwitch",T.isError),u.xp6(1),u.Q6J("ngSwitchCase",!1),u.xp6(1),u.Q6J("ngSwitchCase",!0))},directives:[A.mk,A.RF,A.n9,J.bx,A.tP,J.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),h}()}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_code-editor_code-editor_module_ts-projects_ng-dialogs_src_app_sha-ff0107.c8ec48bbfdf62882.js.map