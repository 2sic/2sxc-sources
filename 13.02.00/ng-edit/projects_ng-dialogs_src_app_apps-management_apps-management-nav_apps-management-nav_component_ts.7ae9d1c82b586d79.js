"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts"],{5177:function(D,F,r){r.r(F),r.d(F,{AppsManagementNavComponent:function(){return ht}});var d=r(8069),f=r(8047),c=r(2977),g=r(116),y=r(635),A=r(4874),I=r(8598),e=r(7133),b=r(5758),O=r(5469),x=r(7317),Z=r(785),C=r(5590),m=r(2379),h=r(2090),v=r(6317),M=r(6562),Y=r(5388),Q=r(3575),P=r(2528),_=r(6362),T=r(1961);function j(a,i){if(1&a){var n=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6),e.TgZ(4,"span",7),e.NdJ("click",function(){var u=e.CHM(n).$implicit;return e.oxw(2).copyToClipboard(u.value)}),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&a){var t=i.$implicit;e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("tippy",t.value),e.xp6(1),e.hij(" ",t.value," ")}}function K(a,i){if(1&a){var n=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e._uU(2),e.qZA(),e.TgZ(3,"div",6),e.TgZ(4,"span",7),e.NdJ("click",function(){var u=e.CHM(n).$implicit;return e.oxw(2).copyToClipboard(u.value)}),e._uU(5),e.qZA(),e.qZA(),e.qZA()}if(2&a){var t=i.$implicit;e.xp6(2),e.Oqu(t.label),e.xp6(2),e.Q6J("tippy",t.value),e.xp6(1),e.hij(" ",t.value," ")}}function V(a,i){if(1&a&&(e.TgZ(0,"div",1),e.TgZ(1,"mat-card",2),e.TgZ(2,"mat-card-header"),e.TgZ(3,"mat-card-title"),e._uU(4,"Platform"),e.qZA(),e.qZA(),e.TgZ(5,"mat-card-content"),e.YNc(6,j,6,3,"div",3),e.qZA(),e.qZA(),e.TgZ(7,"mat-card",2),e.TgZ(8,"mat-card-header"),e.TgZ(9,"mat-card-title"),e._uU(10,"Current Site"),e.qZA(),e.qZA(),e.TgZ(11,"mat-card-content"),e.YNc(12,K,6,3,"div",3),e.qZA(),e.qZA(),e.qZA()),2&a){var n=i.ngIf;e.xp6(6),e.Q6J("ngForOf",n.systemInfos),e.xp6(6),e.Q6J("ngForOf",n.siteInfos)}}var z=function(){var a=function(){function i(n,t){(0,d.Z)(this,i),this.zoneService=n,this.snackBar=t}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){this.systemInfoSet$=new v.X(void 0),this.buildTemplateVars(),this.getSystemInfo()}},{key:"ngOnDestroy",value:function(){this.systemInfoSet$.complete()}},{key:"copyToClipboard",value:function(t){(0,Y.v)(t),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}},{key:"getSystemInfo",value:function(){var t=this;this.zoneService.getSystemInfo().subscribe({error:function(){t.systemInfoSet$.next(void 0)},next:function(s){t.systemInfoSet$.next(s)}})}},{key:"buildTemplateVars",value:function(){var t=this.systemInfoSet$.pipe((0,y.U)(function(s){if(null!=s)return[{label:"EAV / 2sic Version",value:s.System.EavVersion},{label:"Platform",value:s.System.Platform},{label:"Platform Version",value:s.System.PlatformVersion},{label:"Zones",value:s.System.Zones.toString()},{label:"Fingerprint",value:s.System.Fingerprint}]})),o=this.systemInfoSet$.pipe((0,y.U)(function(s){if(null!=s)return[{label:"Zone Id",value:s.Site.ZoneId.toString()},{label:"Site Id",value:s.Site.SiteId.toString()},{label:"Apps",value:s.Site.Apps.toString()},{label:"Languages",value:s.Site.Languages.toString()}]}));this.templateVars$=(0,M.a)([t,o]).pipe((0,y.U)(function(s){var u=(0,h.Z)(s,2);return{systemInfos:u[0],siteInfos:u[1]}}))}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(Q.b),e.Y36(P.ux))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-system-info"]],decls:2,vars:3,consts:[["class","cards-box",4,"ngIf"],[1,"cards-box"],[1,"mat-elevation-z2"],["class","info-row",4,"ngFor","ngForOf"],[1,"info-row"],[1,"info-row__label"],[1,"info-row__value"],[3,"tippy","click"]],template:function(n,t){1&n&&(e.YNc(0,V,13,2,"div",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,t.templateVars$))},directives:[_.O5,T.a8,T.dk,T.n5,T.dn,_.sg,Z.$],pipes:[_.Ov],styles:[".info-row[_ngcontent-%COMP%]{display:flex;overflow-wrap:anywhere;margin-top:4px;margin-bottom:4px}.info-row__label[_ngcontent-%COMP%]{flex:1;font-weight:500;cursor:default}.info-row__value[_ngcontent-%COMP%]{flex:2}.info-row__value[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}"]}),a}(),w=r(1276),H=r(7714),ee=r(679),q=r(1361),k=r(5578),U=r(9119),te=r(1130),$=r(2796);function ne(a,i){1&a&&(e.TgZ(0,"mat-icon"),e._uU(1,"foundation"),e.qZA())}function ae(a,i){1&a&&(e.TgZ(0,"mat-icon"),e._uU(1,"holiday_village"),e.qZA())}var ie=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.params=t,this.app=this.params.data}},{key:"refresh",value:function(t){return!0}},{key:"flushCache",value:function(){this.params.onFlush(this.app)}},{key:"deleteApp",value:function(){this.params.onDelete(this.app)}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-apps-list-actions"]],decls:19,vars:6,consts:[[1,"actions-component"],[1,"like-button","icon",3,"tippy","tippyDisabled"],[4,"ngIf"],["matRipple","","tippy","More",1,"like-button","highlight",3,"matMenuTriggerFor"],[1,"grid-more-menu"],["menu","matMenu"],["mat-menu-item","",3,"click"],["mat-menu-item","",3,"disabled","click"]],template:function(n,t){if(1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.YNc(2,ne,2,0,"mat-icon",2),e.YNc(3,ae,2,0,"mat-icon",2),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"mat-icon"),e._uU(6,"more_horiz"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(7,"mat-menu",4,5),e.TgZ(9,"button",6),e.NdJ("click",function(){return t.flushCache()}),e.TgZ(10,"mat-icon"),e._uU(11,"cached"),e.qZA(),e.TgZ(12,"span"),e._uU(13,"Flush cache"),e.qZA(),e.qZA(),e.TgZ(14,"button",7),e.NdJ("click",function(){return t.deleteApp()}),e.TgZ(15,"mat-icon"),e._uU(16,"delete"),e.qZA(),e.TgZ(17,"span"),e._uU(18,"Delete"),e.qZA(),e.qZA(),e.qZA()),2&n){var o=e.MAs(8);e.xp6(1),e.Q6J("tippy",t.app.IsGlobal?"This app is global":t.app.IsInherited?"This app is inherited":"")("tippyDisabled",!t.app.IsGlobal&&!t.app.IsInherited),e.xp6(1),e.Q6J("ngIf",t.app.IsGlobal),e.xp6(1),e.Q6J("ngIf",t.app.IsInherited),e.xp6(1),e.Q6J("matMenuTriggerFor",o),e.xp6(10),e.Q6J("disabled",!t.app.IsApp)}},directives:[Z.$,_.O5,te.wG,$.p6,C.Hw,$.VK,$.OP],styles:[""]}),a}();function oe(a,i){1&a&&(e.TgZ(0,"mat-icon",3),e._uU(1,"visibility"),e.qZA())}function se(a,i){1&a&&(e.TgZ(0,"mat-icon",4),e._uU(1,"visibility_off"),e.qZA())}var re=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-apps-list-show"]],decls:3,vars:2,consts:[[1,"icon-container"],["tippy","Show this app to users",4,"ngIf"],["tippy","Don't show this app to users",4,"ngIf"],["tippy","Show this app to users"],["tippy","Don't show this app to users"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,oe,2,0,"mat-icon",1),e.YNc(2,se,2,0,"mat-icon",2),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value))},directives:[_.O5,C.Hw,Z.$],styles:[""]}),a}(),le=r(4628),N=r(1350),ce=r(1529),G=r(5718),ue=function(i){return{"fab-opened":i}},pe=function(){var a=function(){function i(n,t,o,s){(0,d.Z)(this,i),this.router=n,this.route=t,this.appsListService=o,this.snackBar=s,this.apps$=new v.X(null),this.fabOpen$=new v.X(!1),this.modules=w.F$,this.gridOptions=Object.assign(Object.assign({},U.f),{frameworkComponents:{booleanFilterComponent:q.U,idFieldComponent:k.m,appsListShowComponent:re,appsListActionsComponent:ie},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agNumberColumnFilter",cellRendererParams:{tooltipGetter:function(l){return"ID: ".concat(l.Id,"\nGUID: ").concat(l.Guid)}}},{headerName:"Show",field:"IsHidden",width:70,headerClass:"dense",cellClass:"icons no-outline",sortable:!0,filter:"booleanFilterComponent",cellRenderer:"appsListShowComponent",valueGetter:this.showValueGetter},{headerName:"Name",field:"Name",flex:2,minWidth:250,cellClass:"apps-list-primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.openApp.bind(this),cellRenderer:function(l){var p=l.data;return null!=p.Thumbnail?'\n            <div class="container">\n              <img class="image logo" src="'.concat(p.Thumbnail,'?w=40&h=40&mode=crop"></img>\n              <div class="text">').concat(l.value,"</div>\n            </div>"):'\n            <div class="container">\n              <div class="image logo">\n                <span class="material-icons-outlined">star_border</span>\n              </div>\n              <div class="text">'.concat(l.value,"</div>\n            </div>")}},{headerName:"Folder",field:"Folder",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Version",field:"Version",width:78,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Items",field:"Items",width:70,headerClass:"dense",cellClass:"number-cell no-outline",sortable:!0,filter:"agNumberColumnFilter"},{width:82,cellClass:"secondary-action no-padding",cellRenderer:"appsListActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deleteApp.bind(this),onFlush:this.flushApp.bind(this)}}]}),this.subscription=new H.w0}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){this.fetchAppsList(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.apps$.complete(),this.fabOpen$.complete(),this.subscription.unsubscribe()}},{key:"openChange",value:function(t){this.fabOpen$.next(t)}},{key:"browseCatalog",value:function(){window.open("https://2sxc.org/apps","_blank")}},{key:"createApp",value:function(){this.router.navigate(["create"],{relativeTo:this.route.firstChild})}},{key:"createInheritedApp",value:function(){this.router.navigate(["create-inherited"],{relativeTo:this.route.firstChild})}},{key:"importApp",value:function(t){this.router.navigate(["import"],{relativeTo:this.route.firstChild,state:{files:t}})}},{key:"fetchAppsList",value:function(){var t=this;this.appsListService.getAll().subscribe(function(o){t.apps$.next(o)})}},{key:"showValueGetter",value:function(t){return!t.data.IsHidden}},{key:"deleteApp",value:function(t){var o=this,s=prompt("This cannot be undone. To really delete this app, type 'yes!' or type/paste the app-name here. Are you sure want to delete '".concat(t.Name,"' (").concat(t.Id,")?"));null!==s&&(s===t.Name||"yes!"===s?(this.snackBar.open("Deleting..."),this.appsListService.delete(t.Id).subscribe(function(){o.snackBar.open("Deleted",null,{duration:2e3}),o.fetchAppsList()})):alert("Input did not match - will not delete"))}},{key:"flushApp",value:function(t){var o=this;!confirm("Flush the App Cache for ".concat(t.Name," (").concat(t.Id,")?"))||(this.snackBar.open("Flushing cache..."),this.appsListService.flushCache(t.Id).subscribe(function(){o.snackBar.open("Cache flushed",null,{duration:2e3})}))}},{key:"openApp",value:function(t){this.router.navigate([t.data.Id.toString()],{relativeTo:this.route.firstChild})}},{key:"refreshOnChildClosed",value:function(){var t=this;this.subscription.add(this.router.events.pipe((0,g.h)(function(o){return o instanceof c.m2}),(0,A.O)(!!this.route.snapshot.firstChild.firstChild),(0,y.U)(function(){return!!t.route.snapshot.firstChild.firstChild}),(0,ee.G)(),(0,g.h)(function(o){var s=(0,h.Z)(o,2);return s[0]&&!s[1]})).subscribe(function(){t.fetchAppsList()}))}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(c.F0),e.Y36(c.gz),e.Y36(le.A),e.Y36(P.ux))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-apps-list"]],decls:24,vars:15,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],["appDragAndDrop","",1,"ag-theme-material",3,"rowData","modules","gridOptions","allowedFileTypes","filesDropped"],[1,"grid-more-actions-box"],[1,"grid-fab",3,"ngClass","openChange"],[3,"spin"],["mat-fab",""],[1,"spin180"],["mat-mini-fab","","label","Find more apps",3,"click"],["mat-mini-fab","","label","Create inherited app",3,"click"],["mat-mini-fab","","label","Import app",3,"click"],["mat-mini-fab","","label","Create app",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"ag-grid-angular",1),e.NdJ("filesDropped",function(s){return t.importApp(s)}),e.ALo(2,"async"),e.qZA(),e._UZ(3,"div",2),e.TgZ(4,"eco-fab-speed-dial",3),e.NdJ("openChange",function(s){return t.openChange(s)}),e.ALo(5,"async"),e.TgZ(6,"eco-fab-speed-dial-trigger",4),e.TgZ(7,"button",5),e.TgZ(8,"mat-icon",6),e._uU(9),e.ALo(10,"async"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"eco-fab-speed-dial-actions"),e.TgZ(12,"button",7),e.NdJ("click",function(){return t.browseCatalog()}),e.TgZ(13,"mat-icon"),e._uU(14,"search"),e.qZA(),e.qZA(),e.TgZ(15,"button",8),e.NdJ("click",function(){return t.createInheritedApp()}),e.TgZ(16,"mat-icon"),e._uU(17,"holiday_village"),e.qZA(),e.qZA(),e.TgZ(18,"button",9),e.NdJ("click",function(){return t.importApp()}),e.TgZ(19,"mat-icon"),e._uU(20,"cloud_upload"),e.qZA(),e.qZA(),e.TgZ(21,"button",10),e.NdJ("click",function(){return t.createApp()}),e.TgZ(22,"mat-icon"),e._uU(23,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(1),e.Q6J("rowData",e.lcZ(2,7,t.apps$))("modules",t.modules)("gridOptions",t.gridOptions)("allowedFileTypes","zip"),e.xp6(3),e.Q6J("ngClass",e.VKq(13,ue,e.lcZ(5,9,t.fabOpen$))),e.xp6(2),e.Q6J("spin",!0),e.xp6(3),e.Oqu(e.lcZ(10,11,t.fabOpen$)?"close":"add"))},directives:[N.N8,ce.z,G.W7,_.mk,G.YI,x.lW,C.Hw,G.Lp],pipes:[_.Ov],styles:[""]}),a}(),W=r(6623),ge=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.params=t,this.value=this.params.value}},{key:"refresh",value:function(t){return!0}},{key:"toggleLanguage",value:function(){this.params.onEnabledToggle(this.params.data)}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-site-languages-status"]],decls:1,vars:1,consts:[[3,"checked","change"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-slide-toggle",0),e.NdJ("change",function(){return t.toggleLanguage()}),e.qZA()),2&n&&e.Q6J("checked",t.value)},directives:[W.Rr],styles:["[_nghost-%COMP%]{height:100%;display:flex;padding-left:8px;padding-right:8px;align-items:center}.mat-slide-toggle[_ngcontent-%COMP%]{padding-top:0}"]}),a}(),me=function(){var a=function(){function i(n){(0,d.Z)(this,i),this.zoneService=n,this.languages$=new v.X(null),this.modules=w.F$,this.gridOptions=Object.assign(Object.assign({},U.f),{frameworkComponents:{idFieldComponent:k.m,booleanFilterComponent:q.U,siteLanguagesStatusComponent:ge},columnDefs:[{headerName:"ID",field:"Code",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",cellRendererParams:{tooltipGetter:function(o){return"ID: ".concat(o.Code)}}},{headerName:"Name",field:"Culture",flex:2,minWidth:250,cellClass:"primary-action highlight no-outline",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.handleNameClicked.bind(this)},{headerName:"Status",field:"IsEnabled",width:72,headerClass:"dense",cellClass:"no-padding no-outline",cellRenderer:"siteLanguagesStatusComponent",sortable:!0,filter:"booleanFilterComponent",cellRendererParams:{onEnabledToggle:this.toggleLanguage.bind(this)}}]})}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){this.fetchLanguages()}},{key:"ngOnDestroy",value:function(){this.languages$.complete()}},{key:"handleNameClicked",value:function(t){this.toggleLanguage(t.data)}},{key:"toggleLanguage",value:function(t){var o=this;this.zoneService.toggleLanguage(t.Code,!t.IsEnabled).subscribe(function(){o.fetchLanguages()})}},{key:"fetchLanguages",value:function(){var t=this;this.zoneService.getLanguages().subscribe(function(o){t.languages$.next(o)})}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(Q.b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-site-languages"]],decls:4,vars:5,consts:[[1,"grid-wrapper","mat-tab-grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"ag-grid-angular",1),e.ALo(2,"async"),e._UZ(3,"div",2),e.qZA()),2&n&&(e.xp6(1),e.Q6J("rowData",e.lcZ(2,3,t.languages$))("modules",t.modules)("gridOptions",t.gridOptions))},directives:[N.N8],pipes:[_.Ov],styles:[""]}),a}(),de=r(7854),fe=r(7858),he=function(){var a=function(){function i(n,t){(0,d.Z)(this,i),this.dialogService=n,this.appDialogConfigService=t}return(0,f.Z)(i,[{key:"openSiteSettings",value:function(){var t=this;null!=this.sitePrimaryApp?this.dialogService.openAppAdministration(this.sitePrimaryApp.ZoneId,this.sitePrimaryApp.AppId,"app"):this.getDialogSettings(function(){t.openSiteSettings()})}},{key:"openGlobalSettings",value:function(){var t=this;null!=this.globalPrimaryApp?this.dialogService.openAppAdministration(this.globalPrimaryApp.ZoneId,this.globalPrimaryApp.AppId,"app"):this.getDialogSettings(function(){t.openGlobalSettings()})}},{key:"getDialogSettings",value:function(t){var o=this;this.appDialogConfigService.getDialogSettings(0).subscribe(function(s){o.sitePrimaryApp=s.Context.Site.PrimaryApp,o.globalPrimaryApp=s.Context.System.PrimaryApp,t()})}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(fe.x),e.Y36(de.Kw))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-system-settings"]],decls:37,vars:0,consts:[[1,"cards-box"],[1,"mat-elevation-z2"],[1,"mat-card-header-icon"],["href","http://r.2sxc.org/settings","target","_blank"],["mat-button","",3,"click"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-header"),e.TgZ(3,"mat-card-title"),e._uU(4,"Manage Site Settings"),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"mat-icon"),e._uU(7,"settings"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"mat-card-content"),e._uU(9," This includes both pre-defined SystemSettings as well as custom Settings. It will affect the entire Site / Portal. See "),e.TgZ(10,"a",3),e._uU(11,"docs"),e.qZA(),e._uU(12,". "),e.qZA(),e.TgZ(13,"mat-card-actions"),e.TgZ(14,"button",4),e.NdJ("click",function(){return t.openSiteSettings()}),e.TgZ(15,"mat-icon"),e._uU(16,"open_in_new"),e.qZA(),e.TgZ(17,"span"),e._uU(18,"Open Site Settings"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"mat-card",1),e.TgZ(20,"mat-card-header"),e.TgZ(21,"mat-card-title"),e._uU(22,"Manage Global Settings"),e.qZA(),e.TgZ(23,"div",2),e.TgZ(24,"mat-icon"),e._uU(25,"settings_suggest"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(26,"mat-card-content"),e._uU(27," This includes both pre-defined SystemSettings as well as custom Settings. It will affect the entire Installation. See "),e.TgZ(28,"a",3),e._uU(29,"docs"),e.qZA(),e._uU(30,". "),e.qZA(),e.TgZ(31,"mat-card-actions"),e.TgZ(32,"button",4),e.NdJ("click",function(){return t.openGlobalSettings()}),e.TgZ(33,"mat-icon"),e._uU(34,"open_in_new"),e.qZA(),e.TgZ(35,"span"),e._uU(36,"Open Global Settings"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA())},directives:[T.a8,T.dk,T.n5,C.Hw,T.dn,T.hq,x.lW],styles:[""]}),a}(),J=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value,this.feature=t.data}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-list-name"]],decls:2,vars:2,consts:[[3,"tippy"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._uU(1),e.qZA()),2&n&&(e.Q6J("tippy",t.feature.Description),e.xp6(1),e.Oqu(t.value))},directives:[Z.$],styles:[""]}),a}(),R=r(3119),E=r(6531),ve=function(){var a=function(){function i(n){(0,d.Z)(this,i),this.itemsCount=0,this.headerHeight=32,this.rowHeight=48,this.maxRows=100,this.extraHeight=2,this.element=n.nativeElement}return(0,f.Z)(i,[{key:"ngOnChanges",value:function(t){null!=t.itemsCount&&(this.element.style.height="".concat(this.headerHeight+(0===this.itemsCount?2:this.itemsCount>this.maxRows?this.maxRows:this.itemsCount)*this.rowHeight+this.extraHeight,"px"))}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(e.SBq))},a.\u0275dir=e.lG2({type:a,selectors:[["","appAgGridHeight",""]],inputs:{itemsCount:"itemsCount",headerHeight:"headerHeight",rowHeight:"rowHeight",maxRows:"maxRows"},features:[e.TTD]}),a}(),B=r(6170),_e=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"transform",value:function(t){return Array.isArray(t)?(0,B.Z)(t).sort(function(s,u){return s.Priority<u.Priority?-1:s.Priority>u.Priority?1:0}):t}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275pipe=e.Yjl({name:"licensesOrder",type:a,pure:!0}),a}();function Ce(a,i){if(1&a&&(e.ynx(0),e._UZ(1,"ag-grid-angular",7),e.BQk()),2&a){var n=e.oxw().$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("rowData",n.Features)("modules",t.modules)("gridOptions",t.gridOptions)("itemsCount",null==n.Features?null:n.Features.length)}}function Ze(a,i){if(1&a&&(e.TgZ(0,"mat-expansion-panel",null,3),e.TgZ(2,"mat-expansion-panel-header"),e.TgZ(3,"mat-panel-title"),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"div",5),e._uU(7),e.qZA(),e.qZA(),e.qZA(),e.YNc(8,Ce,2,4,"ng-container",6),e.qZA()),2&a){var n=i.$implicit,t=e.MAs(1);e.xp6(5),e.AsE("",n.Name," (",n.IsEnabled?"active":"inactive",")"),e.xp6(2),e.Oqu(n.Description),e.xp6(1),e.Q6J("ngIf",t.expanded)}}function be(a,i){if(1&a&&(e.TgZ(0,"mat-accordion",1),e.YNc(1,Ze,9,4,"mat-expansion-panel",2),e.ALo(2,"licensesOrder"),e.qZA()),2&a){var n=i.ngIf,t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,n))("ngForTrackBy",t.trackLicenses)}}var ye=function(){var a=function(){function i(n){var t=this;(0,d.Z)(this,i),this.featuresConfigService=n,this.licenses$=new v.X(void 0),this.modules=w.F$,this.gridOptions=Object.assign(Object.assign({},U.f),{frameworkComponents:{idFieldComponent:k.m,featuresListNameComponent:J},columnDefs:[{field:"ID",width:200,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(s){return s.data.NameId},cellRendererParams:{tooltipGetter:function(s){return"NameId: ".concat(s.NameId,"\nGUID: ").concat(s.Guid)}}},{field:"Name",flex:3,minWidth:250,cellClass:"primary-action highlight",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"featuresListNameComponent",onCellClicked:function(s){return t.openFeature(s.data)},valueGetter:function(s){return s.data.Name}}]})}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){this.fetchLicenses()}},{key:"ngOnDestroy",value:function(){this.licenses$.complete()}},{key:"trackLicenses",value:function(t,o){return o.Guid}},{key:"fetchLicenses",value:function(){var t=this;this.featuresConfigService.getLicenses().subscribe({error:function(){t.licenses$.next(void 0)},next:function(s){t.licenses$.next(s)}})}},{key:"openFeature",value:function(t){window.open("https://2sxc.org/r/f/".concat(t.Guid),"_blank")}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(R.G))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-license-info"]],decls:2,vars:3,consts:[["multi","",4,"ngIf"],["multi",""],[4,"ngFor","ngForOf","ngForTrackBy"],["panel",""],[1,"panel-title"],[1,"panel-description"],[4,"ngIf"],["appAgGridHeight","",1,"ag-theme-material",3,"rowData","modules","gridOptions","itemsCount"]],template:function(n,t){1&n&&(e.YNc(0,be,3,4,"mat-accordion",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,t.licenses$))},directives:[_.O5,E.pp,_.sg,E.ib,E.yz,E.yK,N.N8,ve],pipes:[_.Ov,_e],styles:["[_nghost-%COMP%]{display:block;padding-top:40px;padding-bottom:40px}.mat-expansion-panel-header[_ngcontent-%COMP%]{padding-top:4px;padding-bottom:4px}.mat-expansion-panel-header[_ngcontent-%COMP%]     .mat-content{max-height:100%}.mat-expansion-panel-header-title[_ngcontent-%COMP%]{display:flex;flex-direction:column}.panel-title[_ngcontent-%COMP%]{font-size:14px}.panel-description[_ngcontent-%COMP%]{padding-top:4px;font-size:12px;color:#0000008a;overflow:hidden}"]}),a}(),Te=r(3280),Ae=r(7338),xe=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value,this.feature=t.data}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-list-enabled-reason"]],decls:2,vars:2,consts:[[3,"tippy"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._uU(1),e.qZA()),2&n&&(e.Q6J("tippy",t.feature.EnabledReasonDetailed),e.xp6(1),e.Oqu(t.value))},directives:[Z.$],styles:[""]}),a}(),Ie=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-list-enabled"]],decls:3,vars:1,consts:[[1,"icon-container"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"mat-icon"),e._uU(2),e.qZA(),e.qZA()),2&n&&(e.xp6(2),e.Oqu(t.value?"check_box":"check_box_outline_blank"))},directives:[C.Hw],styles:[""]}),a}();function Fe(a,i){1&a&&(e.TgZ(0,"mat-icon"),e._uU(1,"person"),e.qZA())}function Se(a,i){1&a&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove"),e.qZA())}var Le=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-list-public"]],decls:3,vars:2,consts:[[1,"icon-container"],[4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Fe,2,0,"mat-icon",1),e.YNc(2,Se,2,0,"mat-icon",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value))},directives:[_.O5,C.Hw],styles:[""]}),a}(),Oe=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value,this.feature=t.data}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-list-security"]],decls:2,vars:2,consts:[[3,"tippy"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e._uU(1),e.qZA()),2&n&&(e.Q6J("tippy",t.feature.Security.Message),e.xp6(1),e.Oqu(t.value))},directives:[Z.$],styles:[""]}),a}();function Me(a,i){1&a&&(e.TgZ(0,"mat-icon"),e._uU(1,"visibility"),e.qZA())}function we(a,i){1&a&&(e.TgZ(0,"mat-icon"),e._uU(1,"remove"),e.qZA())}var ke=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.value=t.value}},{key:"refresh",value:function(t){return!0}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-list-ui"]],decls:3,vars:2,consts:[[1,"icon-container"],[4,"ngIf"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.YNc(1,Me,2,0,"mat-icon",1),e.YNc(2,we,2,0,"mat-icon",1),e.qZA()),2&n&&(e.xp6(1),e.Q6J("ngIf",t.value),e.xp6(1),e.Q6J("ngIf",!t.value))},directives:[_.O5,C.Hw],styles:[""]}),a}(),Ue=r(5656),Ne=function(i,n){return{"toggle-false":i,"toggle-null":n}},De=function(){var a=function(){function i(){(0,d.Z)(this,i)}return(0,f.Z)(i,[{key:"agInit",value:function(t){this.params=t,this.value=this.params.value}},{key:"refresh",value:function(t){return!0}},{key:"toggle",value:function(){var o,t=this.params.data;switch(this.value){case!1:o=null;break;case null:o=!0;break;case!0:o=!1}this.params.onEnabledToggle(t,o)}}]),i}();return a.\u0275fac=function(n){return new(n||a)},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-features-status"]],decls:1,vars:5,consts:[[3,"checked","ngClass","change"]],template:function(n,t){1&n&&(e.TgZ(0,"mat-slide-toggle",0),e.NdJ("change",function(){return t.toggle()}),e.qZA()),2&n&&e.Q6J("checked",t.value)("ngClass",e.WLB(2,Ne,!1===t.value,null===t.value))},directives:[W.Rr,_.mk],styles:["[_nghost-%COMP%]{height:100%;display:flex;padding-left:8px;padding-right:8px;align-items:center}.mat-slide-toggle[_ngcontent-%COMP%]{padding-top:0}  .toggle-false .mat-slide-toggle-bar{background-color:orange}  .toggle-null .mat-slide-toggle-thumb-container{margin-left:8px}"]}),a}();function Pe(a,i){if(1&a){var n=e.EpF();e.TgZ(0,"div",1),e.TgZ(1,"div",2),e.TgZ(2,"div",3),e.TgZ(3,"div"),e._uU(4,"Manage features"),e.qZA(),e.TgZ(5,"button",4),e.NdJ("click",function(){return e.CHM(n),e.oxw().closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"div",5),e._UZ(9,"ag-grid-angular",6),e._UZ(10,"div",7),e.TgZ(11,"button",8),e.NdJ("click",function(){return e.CHM(n),e.oxw().save()}),e.TgZ(12,"mat-icon"),e._uU(13,"done"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&a){var t=i.ngIf,o=e.oxw();e.xp6(9),e.Q6J("rowData",t.features)("modules",o.modules)("gridOptions",o.gridOptions),e.xp6(2),e.Q6J("disabled",!t.changed)}}var qe=function(i,n){return{features:i,changed:n}},Ee=function(){var a=function(){function i(n,t,o){var s=this;(0,d.Z)(this,i),this.dialogRef=n,this.featuresConfigService=t,this.snackBar=o,this.modules=w.F$,this.gridOptions=Object.assign(Object.assign({},U.f),{frameworkComponents:{booleanFilterComponent:q.U,idFieldComponent:k.m,featuresListNameComponent:J,featuresStatusComponent:De},columnDefs:[{field:"ID",width:200,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(l){return l.data.NameId},cellRendererParams:{tooltipGetter:function(l){return"NameId: ".concat(l.NameId,"\nGUID: ").concat(l.Guid)}}},{field:"Name",flex:3,minWidth:250,cellClass:"primary-action highlight",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"featuresListNameComponent",onCellClicked:function(l){return s.openFeature(l.data)},valueGetter:function(l){return l.data.Name}},{field:"License",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(l){return l.data.License}},{field:"Status",width:72,headerClass:"dense",cellClass:"no-padding no-outline",cellRenderer:"featuresStatusComponent",sortable:!0,filter:"booleanFilterComponent",valueGetter:function(l){return l.data.Enabled},cellRendererParams:{onEnabledToggle:function(l,p){return s.toggle(l,p)}}}]}),this.features$=new v.X(void 0),this.originalFeatures$=new v.X(void 0)}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){this.fetchFeatures(),this.changed$=(0,M.a)([this.features$,this.originalFeatures$]).pipe((0,y.U)(function(t){var o=(0,h.Z)(t,2),s=o[0],u=o[1];return null!=s&&null!=u&&s.some(function(p){return!Ue.iX.objectsEqual(p,u.find(function(L){return L.Guid===p.Guid}))})}))}},{key:"ngOnDestroy",value:function(){this.features$.complete()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"save",value:function(){var t=this;this.snackBar.open("Saving...");var o=this.features$.value.map(function(s){return{FeatureGuid:s.Guid,Enabled:s.Enabled}});this.featuresConfigService.saveFeaturesNew(o).subscribe({error:function(){t.snackBar.open("Failed to save features. Please check console for more information",void 0,{duration:3e3})},next:function(){t.snackBar.open("Saved",void 0,{duration:3e3}),t.closeDialog()}})}},{key:"openFeature",value:function(t){window.open("https://2sxc.org/r/f/".concat(t.Guid),"_blank")}},{key:"fetchFeatures",value:function(){var t=this;this.featuresConfigService.getAll().subscribe(function(o){t.originalFeatures$.next(o),t.features$.next(o)})}},{key:"toggle",value:function(t,o){var s=(0,B.Z)(this.features$.value),u=s.findIndex(function(l){return l.Guid===t.Guid});u<0||(s[u]=Object.assign(Object.assign({},s[u]),{Enabled:o}),this.features$.next(s))}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(b.so),e.Y36(R.G),e.Y36(P.ux))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-features-wip"]],decls:3,vars:8,consts:[["class","nav-component-wrapper",4,"ngIf"],[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Save",1,"grid-fab",3,"disabled","click"]],template:function(n,t){1&n&&(e.YNc(0,Pe,14,4,"div",0),e.ALo(1,"async"),e.ALo(2,"async")),2&n&&e.Q6J("ngIf",e.WLB(5,qe,e.lcZ(1,1,t.features$),e.lcZ(2,3,t.changed$)))},directives:[_.O5,b.uh,x.lW,Z.$,C.Hw,N.N8],pipes:[_.Ov],styles:[""]}),a}(),$e=r(4742),Ge=r(1239);function Je(a,i){1&a&&e._UZ(0,"mat-spinner",8)}function Re(a,i){if(1&a&&(e._UZ(0,"iframe",9),e.ALo(1,"safeResourceUrl")),2&a){var n=e.oxw().ngIf;e.Q6J("src",e.lcZ(1,1,n.managementUrl),e.uOi)}}function Ye(a,i){if(1&a){var n=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).wip()}),e.TgZ(1,"mat-icon"),e._uU(2,"bug_report"),e.qZA(),e._uU(3," WIP "),e.qZA()}}function Qe(a,i){if(1&a){var n=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){return e.CHM(n),e.oxw(2).toggleManagement()}),e.TgZ(1,"mat-icon"),e._uU(2,"tune"),e.qZA(),e.qZA()}}var He=function(i){return{"iframe-wrapper":i}},We=function(i){return{"force-hide":i}};function Be(a,i){if(1&a&&(e.ynx(0),e.TgZ(1,"div",1),e._UZ(2,"ag-grid-angular",2),e.YNc(3,Je,1,0,"mat-spinner",3),e.YNc(4,Re,2,3,"iframe",4),e.TgZ(5,"div",5),e.YNc(6,Ye,4,0,"button",6),e.ALo(7,"async"),e.qZA(),e.YNc(8,Qe,3,0,"button",7),e.qZA(),e.BQk()),2&a){var n=i.ngIf,t=e.oxw();e.xp6(1),e.Q6J("ngClass",e.VKq(11,He,n.showManagement)),e.xp6(1),e.Q6J("ngClass",e.VKq(13,We,n.showManagement))("rowData",n.features)("modules",t.modules)("gridOptions",t.gridOptions),e.xp6(1),e.Q6J("ngIf",n.showSpinner),e.xp6(1),e.Q6J("ngIf",n.showManagement),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,9,t.debugEnabled$)),e.xp6(2),e.Q6J("ngIf",!n.showManagement)}}var Xe=function(){var a=function(){function i(n,t,o,s){var u=this;(0,d.Z)(this,i),this.featuresConfigService=n,this.globalConfigService=t,this.dialog=o,this.viewContainerRef=s,this.modules=w.F$,this.gridOptions=Object.assign(Object.assign({},U.f),{frameworkComponents:{booleanFilterComponent:q.U,idFieldComponent:k.m,featuresListEnabledComponent:Ie,featuresListUiComponent:ke,featuresListPublicComponent:Le,featuresListNameComponent:J,featuresListEnabledReasonComponent:xe,featuresListSecurityComponent:Oe},columnDefs:[{field:"ID",width:200,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(p){return p.data.NameId},cellRendererParams:{tooltipGetter:function(p){return"NameId: ".concat(p.NameId,"\nGUID: ").concat(p.Guid)}}},{field:"Enabled",width:80,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"booleanFilterComponent",cellRenderer:"featuresListEnabledComponent",valueGetter:function(p){return p.data.Enabled}},{field:"UI",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"booleanFilterComponent",cellRenderer:"featuresListUiComponent",valueGetter:function(p){return p.data.Ui}},{field:"Public",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"booleanFilterComponent",cellRenderer:"featuresListPublicComponent",valueGetter:function(p){return p.data.Public}},{field:"Name",flex:3,minWidth:250,cellClass:"primary-action highlight",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"featuresListNameComponent",onCellClicked:function(p){return u.openFeature(p.data)},valueGetter:function(p){return p.data.Name}},{field:"EnabledReason",headerName:"Reason",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",cellRenderer:"featuresListEnabledReasonComponent",valueGetter:function(p){return p.data.EnabledReason}},{field:"Expires",flex:1,minWidth:200,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(p){var L;return null===(L=p.data.Expires)||void 0===L?void 0:L.replace("T"," ").replace("Z","")}},{field:"Security",width:80,cellClass:"no-outline",cellRenderer:"featuresListSecurityComponent",sortable:!0,filter:"agNumberColumnFilter",valueGetter:function(p){return p.data.Security.Impact}},{field:"License",flex:1,minWidth:150,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter",valueGetter:function(p){return p.data.License}}]}),this.debugEnabled$=this.globalConfigService.getDebugEnabled$(),this.features$=new v.X(null),this.showManagement$=new v.X(!1),this.showSpinner$=new v.X(!1),this.managementUrl$=new v.X(null),this.templateVars$=(0,M.a)([this.features$,this.showManagement$,this.showSpinner$,this.managementUrl$]).pipe((0,y.U)(function(l){var p=(0,h.Z)(l,4);return{features:p[0],showManagement:p[1],showSpinner:p[2],managementUrl:p[3]}})),this.subscription=new H.w0}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){this.fetchFeatures(),this.subscribeToMessages()}},{key:"ngOnDestroy",value:function(){this.features$.complete(),this.showManagement$.complete(),this.showSpinner$.complete(),this.managementUrl$.complete(),this.subscription.unsubscribe()}},{key:"toggleManagement",value:function(){var t=this;this.showManagement$.next(!this.showManagement$.value),this.showManagement$.value&&(this.showSpinner$.next(!0),this.managementUrl$.next(null),this.featuresConfigService.getManageFeaturesUrl().subscribe(function(o){if(t.showSpinner$.next(!1),o.includes("error: user needs host permissions"))throw t.showManagement$.next(!1),new Error("User needs host permissions!");t.managementUrl$.next(o)}))}},{key:"openFeature",value:function(t){window.open("https://2sxc.org/r/f/".concat(t.Guid),"_blank")}},{key:"fetchFeatures",value:function(){var t=this;this.featuresConfigService.getAll().subscribe(function(o){t.features$.next(o)})}},{key:"subscribeToMessages",value:function(){var t=this;this.subscription.add((0,Te.R)(window,"message").pipe((0,g.h)(function(){return t.showManagement$.value}),(0,g.h)(function(o){return!0===o.origin.endsWith("2sxc.org")}),(0,g.h)(function(o){return null!=o.data})).subscribe(function(o){var u=JSON.stringify(o.data);t.featuresConfigService.saveFeatures(u).subscribe(function(l){t.showManagement$.next(!1),t.fetchFeatures()})}))}},{key:"wip",value:function(){var t=this;this.dialog.open(Ee,{autoFocus:!1,backdropClass:"dialog-backdrop",closeOnNavigation:!1,panelClass:["dialog-panel","dialog-panel-large","no-scrollbar"],position:{top:"0"},viewContainerRef:this.viewContainerRef}).afterClosed().subscribe(function(){t.fetchFeatures()})}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(R.G),e.Y36(Ae.bE),e.Y36(b.uw),e.Y36(e.s_b))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-manage-features"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"grid-wrapper","mat-tab-grid-wrapper",3,"ngClass"],[1,"ag-theme-material",3,"ngClass","rowData","modules","gridOptions"],["class","spinner","mode","indeterminate","diameter","20","color","accent",4,"ngIf"],["class","iframe",3,"src",4,"ngIf"],[1,"grid-more-actions-box"],["mat-button","","color","accent",3,"click",4,"ngIf"],["mat-fab","","mat-elevation-z24","","class","grid-fab","tippy","Manage features",3,"click",4,"ngIf"],["mode","indeterminate","diameter","20","color","accent",1,"spinner"],[1,"iframe",3,"src"],["mat-button","","color","accent",3,"click"],["mat-fab","","mat-elevation-z24","","tippy","Manage features",1,"grid-fab",3,"click"]],template:function(n,t){1&n&&(e.YNc(0,Be,9,15,"ng-container",0),e.ALo(1,"async")),2&n&&e.Q6J("ngIf",e.lcZ(1,1,t.templateVars$))},directives:[_.O5,_.mk,N.N8,$e.$g,x.lW,C.Hw,Z.$],pipes:[_.Ov,Ge.t],styles:[".iframe-wrapper[_ngcontent-%COMP%]{padding-top:20px}.spinner[_ngcontent-%COMP%]{position:absolute;top:40px;left:20px}.iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}"]}),a}(),je=r(5286),S=r(587),X=r(4770),Ke=r(4683),Ve=r(3135);function ze(a,i){1&a&&(e.TgZ(0,"app-field-hint",14),e._uU(1," Only positive whole numbers "),e.qZA()),2&a&&e.Q6J("isError",!0)}function et(a,i){if(1&a&&(e.ynx(0),e.YNc(1,ze,2,1,"app-field-hint",13),e.BQk()),2&a){e.oxw();var n=e.MAs(32);e.xp6(1),e.Q6J("ngIf",n.errors.pattern)}}var tt=function(){var a=function(){function i(n,t){(0,d.Z)(this,i),this.sxcInsightsService=n,this.snackBar=t,this.positiveWholeNumber=/^[1-9][0-9]*$/,this.loading$=new v.X(!1)}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){this.loading$.complete()}},{key:"openInsights",value:function(){window.open(window.$2sxc.http.apiUrl("sys/insights/help"),"_blank")}},{key:"activatePageLog",value:function(t){var o=this;this.loading$.next(!0),this.snackBar.open("Activating..."),this.sxcInsightsService.activatePageLog(this.pageLogDuration).subscribe(function(s){o.loading$.next(!1),o.snackBar.open(s,null,{duration:4e3})}),document.activeElement instanceof HTMLElement&&document.activeElement.blur(),t.resetForm()}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(je.a),e.Y36(P.ux))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-sxc-insights"]],decls:39,vars:9,consts:[[1,"cards-box"],[1,"mat-elevation-z2"],[1,"mat-card-header-icon"],["href","https://2sxc.org/en/blog/post/using-2sxc-insights","target","_blank"],["mat-button","",3,"click"],[1,"activate-log-form",3,"ngSubmit"],["activateLogForm","ngForm"],["appearance","standard","color","accent"],["matInput","","type","number","min","0","required","","name","Duration",3,"pattern","ngModel","disabled","ngModelChange"],["duration","ngModel"],[4,"ngIf"],[1,"form-actions"],["mat-raised-button","","type","submit","color","accent",3,"disabled"],[3,"isError",4,"ngIf"],[3,"isError"]],template:function(n,t){if(1&n){var o=e.EpF();e.TgZ(0,"div",0),e.TgZ(1,"mat-card",1),e.TgZ(2,"mat-card-header"),e.TgZ(3,"mat-card-title"),e._uU(4,"2sxc Insights for Super Users"),e.qZA(),e.TgZ(5,"div",2),e.TgZ(6,"mat-icon"),e._uU(7,"speed"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(8,"mat-card-content"),e._uU(9," This is to access a special section to see what is really in the server memory. It's intended for extensive debugging - see also "),e.TgZ(10,"a",3),e._uU(11,"this blog post"),e.qZA(),e._uU(12,". "),e.qZA(),e.TgZ(13,"mat-card-actions"),e.TgZ(14,"button",4),e.NdJ("click",function(){return t.openInsights()}),e.TgZ(15,"mat-icon"),e._uU(16,"speed"),e.qZA(),e.TgZ(17,"span"),e._uU(18,"Open 2sxc Insights"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(19,"mat-card",1),e.TgZ(20,"mat-card-header"),e.TgZ(21,"mat-card-title"),e._uU(22,"Activate Page Level Logging"),e.qZA(),e.qZA(),e.TgZ(23,"mat-card-content"),e.TgZ(24,"form",5,6),e.NdJ("ngSubmit",function(){e.CHM(o);var p=e.MAs(25);return t.activatePageLog(p)}),e.TgZ(26,"div"),e._uU(27," This will place insights-logs in the HTML of the user output for users with ?debug=true in the url. It can only be activated for short periods of time. "),e.qZA(),e.TgZ(28,"mat-form-field",7),e.TgZ(29,"mat-label"),e._uU(30,"Duration in Minutes"),e.qZA(),e.TgZ(31,"input",8,9),e.NdJ("ngModelChange",function(p){return t.pageLogDuration=p}),e.ALo(33,"async"),e.qZA(),e.qZA(),e.YNc(34,et,2,1,"ng-container",10),e.TgZ(35,"div",11),e.TgZ(36,"button",12),e.ALo(37,"async"),e._uU(38," Activate "),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){var s=e.MAs(25),u=e.MAs(32);e.xp6(31),e.Q6J("pattern",t.positiveWholeNumber)("ngModel",t.pageLogDuration)("disabled",e.lcZ(33,5,t.loading$)),e.xp6(3),e.Q6J("ngIf",u.touched&&u.errors),e.xp6(2),e.Q6J("disabled",!s.valid||e.lcZ(37,7,t.loading$))}},directives:[T.a8,T.dk,T.n5,C.Hw,T.dn,T.hq,x.lW,S._Y,S.JL,S.F,X.KE,X.hX,Ke.Nt,S.qQ,S.wV,S.Fj,S.Q7,S.c5,S.JJ,S.On,_.O5,Ve.Y],pipes:[_.Ov],styles:[".activate-log-form[_ngcontent-%COMP%]   .mat-form-field[_ngcontent-%COMP%]{height:auto}.activate-log-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{margin-top:8px;display:flex;justify-content:flex-end}"]}),a}();function nt(a,i){1&a&&(e.TgZ(0,"div",13),e.TgZ(1,"mat-icon"),e._uU(2,"settings_suggest"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"System"),e.qZA(),e.qZA())}function at(a,i){1&a&&e._UZ(0,"app-system-info")}function it(a,i){1&a&&(e.TgZ(0,"div",14),e.TgZ(1,"mat-icon"),e._uU(2,"star_border"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Apps"),e.qZA(),e.qZA())}function ot(a,i){1&a&&e._UZ(0,"app-apps-list")}function st(a,i){1&a&&(e.TgZ(0,"div",15),e.TgZ(1,"mat-icon"),e._uU(2,"translate"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Languages"),e.qZA(),e.qZA())}function rt(a,i){1&a&&e._UZ(0,"app-site-languages")}function lt(a,i){1&a&&(e.TgZ(0,"div",16),e.TgZ(1,"mat-icon"),e._uU(2,"settings"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Settings"),e.qZA(),e.qZA())}function ct(a,i){1&a&&e._UZ(0,"app-system-settings")}function ut(a,i){1&a&&(e.TgZ(0,"div",17),e.TgZ(1,"mat-icon"),e._uU(2,"copyright"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"License"),e.qZA(),e.qZA())}function pt(a,i){1&a&&e._UZ(0,"app-license-info")}function gt(a,i){1&a&&(e.TgZ(0,"div",18),e.TgZ(1,"mat-icon"),e._uU(2,"tune"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"Features"),e.qZA(),e.qZA())}function mt(a,i){1&a&&e._UZ(0,"app-manage-features")}function dt(a,i){1&a&&(e.TgZ(0,"div",19),e.TgZ(1,"mat-icon"),e._uU(2,"speed"),e.qZA(),e.TgZ(3,"span"),e._uU(4,"2sxc Insights"),e.qZA(),e.qZA())}function ft(a,i){1&a&&e._UZ(0,"app-sxc-insights")}var ht=function(){var a=function(){function i(n,t,o,s){var u=this;(0,d.Z)(this,i),this.dialogRef=n,this.router=t,this.route=o,this.context=s,this.zoneId=this.context.zoneId,this.tabs=["system","list","languages","settings","license","features","sxc-insights"],this.tabIndex$=this.router.events.pipe((0,g.h)(function(l){return l instanceof c.m2}),(0,y.U)(function(){return u.tabs.indexOf(u.route.snapshot.firstChild.url[0].path)}),(0,g.h)(function(l){return l>=0}),(0,A.O)(this.tabs.indexOf(this.route.snapshot.firstChild.url[0].path)))}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"changeTab",value:function(t){this.router.navigate([this.tabs[t.index]],{relativeTo:this.route})}}]),i}();return a.\u0275fac=function(n){return new(n||a)(e.Y36(b.so),e.Y36(c.F0),e.Y36(c.gz),e.Y36(I._))},a.\u0275cmp=e.Xpm({type:a,selectors:[["app-apps-management-nav"]],decls:32,vars:4,consts:[["appToggleDebug","",1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],["dynamicHeight","","color","accent",1,"mat-tab-group-max-height",3,"selectedIndex","selectedTabChange"],["class","mat-tab-label-box","tippy","System Info",4,"matTabLabel"],[4,"matTabContent"],["class","mat-tab-label-box","tippy","Apps",4,"matTabLabel"],["class","mat-tab-label-box","tippy","Languages",4,"matTabLabel"],["class","mat-tab-label-box","tippy","System Settings",4,"matTabLabel"],["class","mat-tab-label-box","tippy","License Info",4,"matTabLabel"],["class","mat-tab-label-box","tippy","Features",4,"matTabLabel"],["class","mat-tab-label-box","tippy","2sxc Insights",4,"matTabLabel"],["tippy","System Info",1,"mat-tab-label-box"],["tippy","Apps",1,"mat-tab-label-box"],["tippy","Languages",1,"mat-tab-label-box"],["tippy","System Settings",1,"mat-tab-label-box"],["tippy","License Info",1,"mat-tab-label-box"],["tippy","Features",1,"mat-tab-label-box"],["tippy","2sxc Insights",1,"mat-tab-label-box"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return t.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"mat-tab-group",4),e.NdJ("selectedTabChange",function(s){return t.changeTab(s)}),e.ALo(10,"async"),e.TgZ(11,"mat-tab"),e.YNc(12,nt,5,0,"div",5),e.YNc(13,at,1,0,"app-system-info",6),e.qZA(),e.TgZ(14,"mat-tab"),e.YNc(15,it,5,0,"div",7),e.YNc(16,ot,1,0,"app-apps-list",6),e.qZA(),e.TgZ(17,"mat-tab"),e.YNc(18,st,5,0,"div",8),e.YNc(19,rt,1,0,"app-site-languages",6),e.qZA(),e.TgZ(20,"mat-tab"),e.YNc(21,lt,5,0,"div",9),e.YNc(22,ct,1,0,"app-system-settings",6),e.qZA(),e.TgZ(23,"mat-tab"),e.YNc(24,ut,5,0,"div",10),e.YNc(25,pt,1,0,"app-license-info",6),e.qZA(),e.TgZ(26,"mat-tab"),e.YNc(27,gt,5,0,"div",11),e.YNc(28,mt,1,0,"app-manage-features",6),e.qZA(),e.TgZ(29,"mat-tab"),e.YNc(30,dt,5,0,"div",12),e.YNc(31,ft,1,0,"app-sxc-insights",6),e.qZA(),e.qZA(),e.qZA()),2&n&&(e.xp6(4),e.hij("Manage Apps in Zone ",t.zoneId,""),e.xp6(5),e.Q6J("selectedIndex",e.lcZ(10,2,t.tabIndex$)))},directives:[O.D,b.uh,x.lW,Z.$,C.Hw,c.lC,m.SP,m.uX,m.uD,m.Vc,z,pe,me,he,ye,Xe,tt],pipes:[_.Ov],styles:[""]}),a}()},3135:function(D,F,r){r.d(F,{Y:function(){return C}});var d=r(8069),f=r(8047),c=r(7133),g=r(6362),y=r(4770);function A(m,h){1&m&&c.GkF(0)}function I(m,h){if(1&m&&(c.TgZ(0,"mat-hint"),c.YNc(1,A,1,0,"ng-container",3),c.qZA()),2&m){c.oxw();var v=c.MAs(4);c.xp6(1),c.Q6J("ngTemplateOutlet",v)}}function e(m,h){1&m&&c.GkF(0)}function b(m,h){if(1&m&&(c.TgZ(0,"mat-error"),c.YNc(1,e,1,0,"ng-container",3),c.qZA()),2&m){c.oxw();var v=c.MAs(4);c.xp6(1),c.Q6J("ngTemplateOutlet",v)}}function O(m,h){1&m&&c.Hsn(0)}var x=function(h){return{"hint-box__short":h}},Z=["*"],C=function(){var m=function(){function h(){(0,d.Z)(this,h),this.isError=!1,this.isShort=!0}return(0,f.Z)(h,[{key:"toggleIsShort",value:function(){this.isShort=!this.isShort}}]),h}();return m.\u0275fac=function(v){return new(v||m)},m.\u0275cmp=c.Xpm({type:m,selectors:[["app-field-hint"]],inputs:{isError:"isError"},ngContentSelectors:Z,decls:5,vars:6,consts:[[1,"hint-box",3,"ngClass","ngSwitch","click"],[4,"ngSwitchCase"],["content",""],[4,"ngTemplateOutlet"]],template:function(v,M){1&v&&(c.F$t(),c.TgZ(0,"div",0),c.NdJ("click",function(){return M.toggleIsShort()}),c.YNc(1,I,2,1,"mat-hint",1),c.YNc(2,b,2,1,"mat-error",1),c.qZA(),c.YNc(3,O,1,0,"ng-template",null,2,c.W1O)),2&v&&(c.Q6J("ngClass",c.VKq(4,x,M.isShort))("ngSwitch",M.isError),c.xp6(1),c.Q6J("ngSwitchCase",!1),c.xp6(1),c.Q6J("ngSwitchCase",!0))},directives:[g.mk,g.RF,g.n9,y.bx,g.tP,y.TO],styles:[".hint-box[_ngcontent-%COMP%]{margin-top:4px}.hint-box[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{font-size:12px;display:block}.hint-box__short[_ngcontent-%COMP%]   .mat-hint[_ngcontent-%COMP%], .hint-box__short[_ngcontent-%COMP%]   .mat-error[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}"]}),m}()},5578:function(D,F,r){r.d(F,{m:function(){return x}});var d=r(8069),f=r(8047),c=r(5388),g=r(7133),y=r(2528),A=r(1130),I=r(785),e=r(6362),b=r(5590),O=function(C,m){return{"align-start":C,"align-end":m}},x=function(){var Z=function(){function C(m){(0,d.Z)(this,C),this.snackBar=m}return(0,f.Z)(C,[{key:"agInit",value:function(h){this.id=h.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=h.tooltipGetter(h.data)}},{key:"refresh",value:function(h){return!0}},{key:"copy",value:function(){(0,c.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),C}();return Z.\u0275fac=function(m){return new(m||Z)(g.Y36(y.ux))},Z.\u0275cmp=g.Xpm({type:Z,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(m,h){1&m&&(g.TgZ(0,"div",0),g.NdJ("click",function(){return h.copy()}),g.TgZ(1,"span",1),g._uU(2),g.qZA(),g.TgZ(3,"mat-icon",2),g._uU(4,"file_copy"),g.qZA(),g.qZA()),2&m&&(g.Q6J("tippy",h.tooltip)("ngClass",g.WLB(3,O,"start"===h.align,"end"===h.align)),g.xp6(2),g.Oqu(h.id))},directives:[A.wG,I.$,e.mk,b.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),Z}()},5469:function(D,F,r){r.d(F,{D:function(){return y}});var d=r(8069),f=r(8047),c=r(7338),g=r(7133),y=function(){var A=function(){function I(e){(0,d.Z)(this,I),this.globalConfigService=e}return(0,f.Z)(I,[{key:"onClick",value:function(b){(navigator.platform.match("Mac")?b.metaKey:b.ctrlKey)&&b.shiftKey&&b.altKey&&(this.globalConfigService.toggleDebugEnabled(),window.getSelection().removeAllRanges())}}]),I}();return A.\u0275fac=function(e){return new(e||A)(g.Y36(c.bE))},A.\u0275dir=g.lG2({type:A,selectors:[["","appToggleDebug",""]],hostBindings:function(e,b){1&e&&g.NdJ("click",function(x){return b.onClick(x)})}}),A}()},5388:function(D,F,r){function d(f){var c=document.createElement("textarea");c.value=f,c.setAttribute("readonly",""),c.style.position="absolute",c.style.left="-9999px",document.body.appendChild(c);var g=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);c.select(),document.execCommand("copy"),document.body.removeChild(c),g&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(g))}r.d(F,{v:function(){return d}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_apps-management_apps-management-nav_apps-management-nav_component_ts.7ae9d1c82b586d79.js.map