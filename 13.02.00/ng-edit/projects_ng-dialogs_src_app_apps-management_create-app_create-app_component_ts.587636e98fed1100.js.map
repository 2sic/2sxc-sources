{"version":3,"mappings":"6RAAaA,EAAiB,+JCkBxBC,6BACEA,sBACFA,cAF4DA,6CAG5DA,6BACEA,SACFA,6BAF2DA,oBACzDA,iEALJA,SACEA,kCAGAA,kCAGFA,6BANmBA,mGAGAA,yIArBvBA,SAGEA,iBACEA,iBAA8BA,sBAAUA,QAC1CA,QAEAA,yBAEAA,kBACEA,4BACEA,qBAAWA,gBAAIA,QACfA,mBACFA,QACAA,2BACEA,wDACFA,QACAA,iCAQFA,QAEAA,kBACEA,qBAAkEA,iDAASC,gBACzED,qBACFA,QACAA,qBAAgGA,iDAASE,WACvGF,qBACFA,QACFA,QACFA,uCA1BQA,mCAQWA,oDAWyBA,qCAGeA,0FClB9CG,EAAb,eAAaA,EAAb,WAOE,WACUC,EACAC,EACAC,IAAqB,eAFrBC,iBACAA,uBACAA,gBATgBA,eAAY,mBAItCA,kBFjB0B,uGEwBxBA,KAAKC,KAAOD,KAAKE,YACjBF,KAAKG,SAAW,IAAIC,KAAgB,GAbxC,uCAgBE,cAhBF,yBAmBE,WACEJ,KAAKG,SAASE,aApBlB,yBAuBE,WACEL,KAAKH,UAAUS,UAxBnB,oBA2BE,WAAM,aACJN,KAAKC,KAAKM,UACVP,KAAKG,SAASK,MAAK,GACnB,IAAMC,EAAoC,QAA7BC,OAAKT,KAAKU,SAASF,KAAKG,aAAKC,eAAEC,OAAOC,QAAQ,SAAU,KACrEf,KAAKD,SAASiB,KAAK,mBACnBhB,KAAKF,gBAAgBmB,OAAOR,GAAMS,UAAU,CAC1CC,MAAO,WACLC,EAAKnB,KAAKoB,SACVD,EAAKjB,SAASK,MAAK,GACnBY,EAAKrB,SAASiB,KAAK,uEAAmEM,EAAW,CAAEC,SAAU,OAE/Gf,KAAM,WACJY,EAAKnB,KAAKoB,SACVD,EAAKrB,SAASiB,KAAK,mBAAeM,EAAW,CAAEC,SAAU,MACzDH,EAAKI,mBAzCb,uBA8CU,WAIN,OAHa,IAAIC,KAAU,CACzBhB,KAAM,IAAIiB,KAAY,KAAM,CAACC,cAAqBA,aAAmBnC,WAhD3EoC,kDAAahC,GAAkBH,6DAAlBG,EAAkBiC,4hBDb/BpC,wDAAeA,4JCaFG,EAAb,oICXIH,kCADFA,oBACEA,gCACFA,qCADiBA,2DAIfA,kCADFA,qBACEA,gCACFA,qCADiBA,2DAKjBA,gECJWqC,EAAb,eAAaA,EAAb,WAIE,6BAHS9B,cAAU,EACnBA,cAAU,EAFZ,4CAME,WACEA,KAAK+B,SAAW/B,KAAK+B,YAPzBC,kDAAaF,8BAAkBD,mPDP/BpC,iBAAsBA,gCAASwC,oBAC7BxC,4BAIAA,6BAGFA,QAEAA,iDAVgDA,sCAA0C,sBAC7EA,kCAICA,keCEDqC,EAAb","names":["appNamePattern","i0","ctx_r5","ctx_r7","CreateAppComponent","dialogRef","appsListService","snackBar","this","form","buildForm","loading$","BehaviorSubject","complete","close","disable","next","name","p","controls","value","_a","trim","replace","open","create","subscribe","error","i","enable","undefined","duration","closeDialog","FormGroup","FormControl","Validators","s","selectors","FieldHintComponent","isShort","l","ctx"],"sources":["./projects/ng-dialogs/src/app/apps-management/constants/app.patterns.ts","./projects/ng-dialogs/src/app/apps-management/create-app/create-app.component.html","./projects/ng-dialogs/src/app/apps-management/create-app/create-app.component.ts","./projects/ng-dialogs/src/app/shared/components/field-hint/field-hint.component.html","./projects/ng-dialogs/src/app/shared/components/field-hint/field-hint.component.ts"],"sourcesContent":["export const appNamePattern = /^[A-Za-z](?:[A-Za-z0-9\\s\\(\\)-]+)*$/;\r\nexport const appNameError = 'Standard letters, numbers, spaces, hyphens and round brackets are allowed. Must start with a letter.';\r\n","<ng-container *ngIf=\"{\r\n  loading: loading$ | async\r\n} as data\">\r\n  <div mat-dialog-title>\r\n    <div class=\"dialog-title-box\">Create App</div>\r\n  </div>\r\n\r\n  <router-outlet></router-outlet>\r\n\r\n  <form [formGroup]=\"form\">\r\n    <mat-form-field appearance=\"standard\" color=\"accent\">\r\n      <mat-label>Name</mat-label>\r\n      <input matInput type=\"text\" formControlName=\"name\">\r\n    </mat-form-field>\r\n    <app-field-hint>\r\n      App name will also be used for the folder\r\n    </app-field-hint>\r\n    <ng-container *ngIf=\"form.controls.name.touched\">\r\n      <app-field-hint *ngIf=\"form.controls.name.errors?.required\" [isError]=\"true\">\r\n        Required\r\n      </app-field-hint>\r\n      <app-field-hint *ngIf=\"form.controls.name.errors?.pattern\" [isError]=\"true\">\r\n        {{ appNameError }}\r\n      </app-field-hint>\r\n    </ng-container>\r\n  </form>\r\n\r\n  <div class=\"dialog-component-actions\">\r\n    <button type=\"button\" mat-raised-button [disabled]=\"data.loading\" (click)=\"closeDialog()\">\r\n      Cancel\r\n    </button>\r\n    <button type=\"button\" mat-raised-button color=\"accent\" [disabled]=\"data.loading || !form.valid\" (click)=\"create()\">\r\n      Create\r\n    </button>\r\n  </div>\r\n</ng-container>\r\n","import { Component, HostBinding, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { MatDialogRef } from '@angular/material/dialog';\r\nimport { MatSnackBar } from '@angular/material/snack-bar';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { appNameError, appNamePattern } from '../constants/app.patterns';\r\nimport { AppsListService } from '../services/apps-list.service';\r\n\r\n@Component({\r\n  selector: 'app-create-app',\r\n  templateUrl: './create-app.component.html',\r\n  styleUrls: ['./create-app.component.scss'],\r\n})\r\nexport class CreateAppComponent implements OnInit, OnDestroy {\r\n  @HostBinding('className') hostClass = 'dialog-component';\r\n\r\n  form: FormGroup;\r\n  loading$: BehaviorSubject<boolean>;\r\n  appNameError = appNameError;\r\n\r\n  constructor(\r\n    private dialogRef: MatDialogRef<CreateAppComponent>,\r\n    private appsListService: AppsListService,\r\n    private snackBar: MatSnackBar,\r\n  ) {\r\n    this.form = this.buildForm();\r\n    this.loading$ = new BehaviorSubject(false);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    this.loading$.complete();\r\n  }\r\n\r\n  closeDialog(): void {\r\n    this.dialogRef.close();\r\n  }\r\n\r\n  create(): void {\r\n    this.form.disable();\r\n    this.loading$.next(true);\r\n    const name = this.form.controls.name.value?.trim().replace(/\\s\\s+/g, ' '); // remove multiple white spaces and tabs;\r\n    this.snackBar.open('Creating app...');\r\n    this.appsListService.create(name).subscribe({\r\n      error: () => {\r\n        this.form.enable();\r\n        this.loading$.next(false);\r\n        this.snackBar.open('Failed to create app. Please check console for more information', undefined, { duration: 3000 });\r\n      },\r\n      next: () => {\r\n        this.form.enable();\r\n        this.snackBar.open('Created app', undefined, { duration: 2000 });\r\n        this.closeDialog();\r\n      },\r\n    });\r\n  }\r\n\r\n  private buildForm(): FormGroup {\r\n    const form = new FormGroup({\r\n      name: new FormControl(null, [Validators.required, Validators.pattern(appNamePattern)]),\r\n    });\r\n    return form;\r\n  }\r\n}\r\n","<div class=\"hint-box\" (click)=\"toggleIsShort()\" [ngClass]=\"{ 'hint-box__short': isShort }\" [ngSwitch]=\"isError\">\r\n  <mat-hint *ngSwitchCase=\"false\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-hint>\r\n\r\n  <mat-error *ngSwitchCase=\"true\">\r\n    <ng-container *ngTemplateOutlet=\"content\"></ng-container>\r\n  </mat-error>\r\n</div>\r\n\r\n<ng-template #content>\r\n  <ng-content></ng-content>\r\n</ng-template>\r\n","import { Component, Input } from '@angular/core';\r\n\r\n@Component({\r\n  selector: 'app-field-hint',\r\n  templateUrl: './field-hint.component.html',\r\n  styleUrls: ['./field-hint.component.scss'],\r\n})\r\nexport class FieldHintComponent {\r\n  @Input() isError = false;\r\n  isShort = true;\r\n\r\n  constructor() { }\r\n\r\n  toggleIsShort() {\r\n    this.isShort = !this.isShort;\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///","file":"projects_ng-dialogs_src_app_apps-management_create-app_create-app_component_ts.587636e98fed1100.js"}