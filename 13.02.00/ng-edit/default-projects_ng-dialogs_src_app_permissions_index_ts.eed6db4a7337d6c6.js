"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["default-projects_ng-dialogs_src_app_permissions_index_ts","projects_ng-dialogs_src_app_permissions_go-to-permissions_ts","projects_ng-dialogs_src_app_permissions_permissions_module_ts","projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{8130:function(M,p,t){t.d(p,{g:function(){return d}});var h=t(8069),f=t(8047),i=t(7368),n=t(8598),v=t(7133),c=t(8784),l=t(2425),d=function(){var o=function(){function s(a,r,m){(0,h.Z)(this,s),this.http=a,this.context=r,this.dnnContext=m}return(0,f.Z)(s,[{key:"create",value:function(r,m){return this.http.post("app/auto/data/".concat(r),m,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"update",value:function(r,m,g){return this.http.post("app/auto/data/".concat(r,"/").concat(m),g,{params:{appId:this.context.appId,zoneId:this.context.zoneId}})}},{key:"delete",value:function(r,m,g){return this.http.delete(this.dnnContext.$2sxc.http.apiUrl(i.Uo+"delete"),{params:{contentType:r,id:m.toString(),appId:this.context.appId.toString(),force:g.toString()}})}}]),s}();return o.\u0275fac=function(a){return new(a||o)(v.LFG(c.eN),v.LFG(n._),v.LFG(l._y))},o.\u0275prov=v.Yz7({token:o,factory:o.\u0275fac}),o}()},7297:function(M,p,t){t.d(p,{i:function(){return n}});var h=t(8069),f=t(8047),i=t(1825),n=function(){var v=function(){function c(){(0,h.Z)(this,c)}return(0,f.Z)(c,null,[{key:"getUrl",value:function(d,o,s){return"permissions/".concat(d,"/").concat(o,"/").concat(s)}},{key:"getUrlApp",value:function(d){return this.getUrl(i.Z.metadata.app.targetType,i.Z.metadata.app.keyType,d.toString())}},{key:"getUrlAttribute",value:function(d){return this.getUrl(i.Z.metadata.attribute.targetType,i.Z.metadata.attribute.keyType,d.toString())}},{key:"getUrlContentType",value:function(d){return this.getUrlEntity(d)}},{key:"getUrlEntity",value:function(d){return this.getUrl(i.Z.metadata.entity.targetType,i.Z.metadata.entity.keyType,d)}},{key:"getUrlLanguage",value:function(d){return this.getUrl(i.Z.metadata.language.targetType,i.Z.metadata.language.keyType,d)}}]),c}();return v.route={path:"permissions/:targetType/:keyType/:key",loadChildren:function(){return t.e("projects_ng-dialogs_src_app_permissions_permissions_module_ts").then(t.bind(t,4484)).then(function(l){return l.PermissionsModule})},data:{title:"Permissions"}},v}()},6307:function(M,p,t){t.d(p,{iK:function(){return h.i},Do:function(){return c.D},qQ:function(){return l.q}});var h=t(7297),c=(t(1157),t(7725),t(5620),t(4484),t(4753)),l=t(7170)},1157:function(M,p,t){t.d(p,{g:function(){return n}});var h=t(9016),f=t.n(h),i=t(4929),n={name:"SET_PERMISSIONS_DIALOG",initContext:!0,panelSize:"large",panelClass:null,getComponent:function(){return(0,i.mG)(this,void 0,void 0,f().mark(function c(){return f().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-projects_ng-dialogs_src_app_shared_constants_default-grid-options_constants_ts-node_m-d43c44"),t.e("projects_ng-dialogs_src_app_permissions_permissions_component_ts")]).then(t.bind(t,5620));case 2:return s.abrupt("return",s.sent.PermissionsComponent);case 5:case"end":return s.stop()}},c)}))}}},7725:function(M,p,t){t.d(p,{T:function(){return o}});var h=t(8047),f=t(8069),i=t(2977),n=t(8327),v=t(5487),c=t(1157),l=t(7133),d=[{path:"",component:v.r,data:{dialog:c.g},children:[{matcher:n.eP,loadChildren:function(){return Promise.all([t.e("default-projects_ng-dialogs_src_app_shared_directives_tippy_directive_ts"),t.e("default-node_modules_angular_material_fesm2015_progress-spinner_mjs"),t.e("default-projects_ng-dialogs_src_app_create-file-dialog_index_ts"),t.e("default-node_modules_angular_material_fesm2015_slide-toggle_mjs"),t.e("default-node_modules_angular_material_fesm2015_list_mjs"),t.e("default-projects_ng-dialogs_src_app_monaco-editor_index_ts-projects_ng-dialogs_src_app_shared-7048b1"),t.e("default-projects_edit_edit_module_ts"),t.e("default-node_modules_angular_cdk_fesm2015_drag-drop_mjs"),t.e("default-node_modules_angular_material_fesm2015_menu_mjs"),t.e("default-node_modules_angular_material_fesm2015_autocomplete_mjs"),t.e("common"),t.e("projects_ng-dialogs_src_app_shared_components_field-hint_field-hint_component_ts-projects_ng--d12a670")]).then(t.bind(t,8107)).then(function(a){return a.EditModule})}},{matcher:n.lZ,loadChildren:function(){return t.e("projects_edit_refresh-edit_module_ts").then(t.bind(t,3804)).then(function(a){return a.RefreshEditModule})}}]}],o=function(){var s=(0,h.Z)(function a(){(0,f.Z)(this,a)});return s.\u0275fac=function(r){return new(r||s)},s.\u0275mod=l.oAB({type:s}),s.\u0275inj=l.cJS({imports:[[i.Bz.forChild(d)],i.Bz]}),s}()},5620:function(M,p,t){t.r(p),t.d(p,{PermissionsComponent:function(){return F}});var h=t(2090),f=t(7797),i=t(8069),n=t(8047),v=t(1276),c=t(2977),l=t(6317),d=t(7714),o=t(116),s=t(4874),a=t(635),r=t(679),m=t(5578),g=t(9119),u=t(1825),A=t(5137),e=t(7133),y=t(1130),U=t(785),R=t(5590),Z=function(){var C=function(){function O(){(0,i.Z)(this,O)}return(0,n.Z)(O,[{key:"agInit",value:function(_){this.params=_}},{key:"refresh",value:function(_){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),O}();return C.\u0275fac=function(P){return new(P||C)},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(P,_){1&P&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return _.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.qZA(),e.qZA())},directives:[y.wG,U.$,R.Hw],styles:[""]}),C}(),W=t(7170),B=t(5758),j=t(2528),K=t(7317),x=t(1350),S=t(6362),F=function(){var C=function(){function O(P,_,E,D,T){(0,i.Z)(this,O),this.dialogRef=P,this.router=_,this.route=E,this.permissionsService=D,this.snackBar=T,this.permissions$=new l.X(null),this.modules=v.F$,this.gridOptions=Object.assign(Object.assign({},g.f),{frameworkComponents:{idFieldComponent:m.m,permissionsActionsComponent:Z},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agNumberColumnFilter",cellRendererParams:{tooltipGetter:function(L){return"ID: ".concat(L.Id,"\nGUID: ").concat(L.Guid)}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new d.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills=(0,f.Z)({},u.Z.metadata.language.targetType,{PermissionType:"language"})}return(0,n.Z)(O,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var _=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(E){_.permissions$.next(E)})}},{key:"editPermission",value:function(_){var D,T,I,E=this;I=null==_?{items:[Object.assign({ContentTypeName:u.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(T=null===(D=Object.values(u.Z.metadata).find(function(N){return N.targetType===E.targetType}))||void 0===D?void 0:D.target)&&void 0!==T?T:this.targetType.toString(),TargetType:this.targetType},this.keyType===u.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===u.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===u.Z.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:_.data.Id}]};var G=(0,A.f)(I);this.router.navigate(["edit/".concat(G)],{relativeTo:this.route})}},{key:"deletePermission",value:function(_){var E=this;!confirm("Delete '".concat(_.Title,"' (").concat(_.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(_.Id).subscribe(function(){E.snackBar.open("Deleted",null,{duration:2e3}),E.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var _=this;this.subscription.add(this.router.events.pipe((0,o.h)(function(E){return E instanceof c.m2}),(0,s.O)(!!this.route.snapshot.firstChild),(0,a.U)(function(){return!!_.route.snapshot.firstChild}),(0,r.G)(),(0,o.h)(function(E){var D=(0,h.Z)(E,2);return D[0]&&!D[1]})).subscribe(function(){_.fetchPermissions()}))}}]),O}();return C.\u0275fac=function(P){return new(P||C)(e.Y36(B.so),e.Y36(c.F0),e.Y36(c.gz),e.Y36(W.q),e.Y36(j.ux))},C.\u0275cmp=e.Xpm({type:C,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(P,_){1&P&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return _.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return _.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&P&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,3,_.permissions$))("modules",_.modules)("gridOptions",_.gridOptions))},directives:[B.uh,K.lW,U.$,R.Hw,c.lC,x.N8],pipes:[S.Ov],styles:[""]}),C}()},4484:function(M,p,t){t.r(p),t.d(p,{PermissionsModule:function(){return e}});var h=t(8047),f=t(8069),i=t(1350),n=t(6362),v=t(7317),c=t(1130),l=t(5758),d=t(5590),o=t(2528),s=t(8130),a=t(8598),r=t(8450),m=t(7725),g=t(4753),u=t(7170),A=t(7133),e=function(){var y=(0,h.Z)(function U(){(0,f.Z)(this,U)});return y.\u0275fac=function(R){return new(R||y)},y.\u0275mod=A.oAB({type:y}),y.\u0275inj=A.cJS({providers:[a._,u.q,g.D,s.g],imports:[[n.ez,m.T,r.q,l.Is,v.ot,d.Ps,i.sF.withComponents([]),c.si,o.ZX]]}),y}()},4753:function(M,p,t){t.d(p,{D:function(){return d}});var h=t(8069),f=t(8047),i=t(8598),n=t(7133),v=t(8784),c=t(2425),d=function(){var o=function(){function s(a,r,m){(0,h.Z)(this,s),this.http=a,this.context=r,this.dnnContext=m}return(0,f.Z)(s,[{key:"getMetadata",value:function(r,m,g,u){return this.http.get(this.dnnContext.$2sxc.http.apiUrl("admin/metadata/get"),{params:Object.assign({appId:this.context.appId.toString(),targetType:r.toString(),keyType:m,key:g.toString()},u&&{contentType:u})})}}]),s}();return o.\u0275fac=function(a){return new(a||o)(n.LFG(v.eN),n.LFG(i._),n.LFG(c._y))},o.\u0275prov=n.Yz7({token:o,factory:o.\u0275fac}),o}()},7170:function(M,p,t){t.d(p,{q:function(){return d}});var h=t(8069),f=t(8047),i=t(635),n=t(8130),v=t(1825),c=t(4753),l=t(7133),d=function(){var o=function(){function s(a,r){(0,h.Z)(this,s),this.metadataService=a,this.entitiesService=r}return(0,f.Z)(s,[{key:"getAll",value:function(r,m,g){return this.metadataService.getMetadata(r,m,g,v.Z.contentTypes.permissions).pipe((0,i.U)(function(u){return u.Items}))}},{key:"delete",value:function(r){return this.entitiesService.delete(v.Z.contentTypes.permissions,r,!1)}}]),s}();return o.\u0275fac=function(a){return new(a||o)(l.LFG(c.D),l.LFG(n.g))},o.\u0275prov=l.Yz7({token:o,factory:o.\u0275fac}),o}()},5578:function(M,p,t){t.d(p,{m:function(){return a}});var h=t(8069),f=t(8047),i=t(5388),n=t(7133),v=t(2528),c=t(1130),l=t(785),d=t(6362),o=t(5590),s=function(m,g){return{"align-start":m,"align-end":g}},a=function(){var r=function(){function m(g){(0,h.Z)(this,m),this.snackBar=g}return(0,f.Z)(m,[{key:"agInit",value:function(u){this.id=u.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=u.tooltipGetter(u.data)}},{key:"refresh",value:function(u){return!0}},{key:"copy",value:function(){(0,i.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),m}();return r.\u0275fac=function(g){return new(g||r)(n.Y36(v.ux))},r.\u0275cmp=n.Xpm({type:r,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(g,u){1&g&&(n.TgZ(0,"div",0),n.NdJ("click",function(){return u.copy()}),n.TgZ(1,"span",1),n._uU(2),n.qZA(),n.TgZ(3,"mat-icon",2),n._uU(4,"file_copy"),n.qZA(),n.qZA()),2&g&&(n.Q6J("tippy",u.tooltip)("ngClass",n.WLB(3,s,"start"===u.align,"end"===u.align)),n.xp6(2),n.Oqu(u.id))},directives:[c.wG,l.$,d.mk,o.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),r}()},5388:function(M,p,t){function h(f){var i=document.createElement("textarea");i.value=f,i.setAttribute("readonly",""),i.style.position="absolute",i.style.left="-9999px",document.body.appendChild(i);var n=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);i.select(),document.execCommand("copy"),document.body.removeChild(i),n&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(n))}t.d(p,{v:function(){return h}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/default-projects_ng-dialogs_src_app_permissions_index_ts.eed6db4a7337d6c6.js.map