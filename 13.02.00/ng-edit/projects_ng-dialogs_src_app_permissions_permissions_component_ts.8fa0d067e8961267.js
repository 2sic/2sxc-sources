"use strict";(self.webpackChunkng_dialogs=self.webpackChunkng_dialogs||[]).push([["projects_ng-dialogs_src_app_permissions_permissions_component_ts"],{5620:function(b,g,t){t.r(g),t.d(g,{PermissionsComponent:function(){return N}});var y=t(2090),C=t(7797),l=t(8069),i=t(8047),O=t(1276),f=t(2977),Z=t(6317),A=t(7714),P=t(116),D=t(4874),I=t(635),u=t(679),m=t(5578),r=t(9119),o=t(1825),M=t(5137),e=t(7133),U=t(1130),E=t(785),x=t(5590),R=function(){var d=function(){function c(){(0,l.Z)(this,c)}return(0,i.Z)(c,[{key:"agInit",value:function(n){this.params=n}},{key:"refresh",value:function(n){return!0}},{key:"deletePermission",value:function(){this.params.onDelete(this.params.data)}}]),c}();return d.\u0275fac=function(s){return new(s||d)},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-permissions-actions"]],decls:4,vars:0,consts:[[1,"actions-component"],["matRipple","","tippy","Delete",1,"like-button","highlight",3,"click"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.NdJ("click",function(){return n.deletePermission()}),e.TgZ(2,"mat-icon"),e._uU(3,"delete"),e.qZA(),e.qZA(),e.qZA())},directives:[U.wG,E.$,x.Hw],styles:[""]}),d}(),F=t(7170),k=t(5758),B=t(2528),_=t(7317),j=t(1350),W=t(6362),N=function(){var d=function(){function c(s,n,a,p,h){(0,l.Z)(this,c),this.dialogRef=s,this.router=n,this.route=a,this.permissionsService=p,this.snackBar=h,this.permissions$=new Z.X(null),this.modules=O.F$,this.gridOptions=Object.assign(Object.assign({},r.f),{frameworkComponents:{idFieldComponent:m.m,permissionsActionsComponent:R},columnDefs:[{headerName:"ID",field:"Id",width:70,headerClass:"dense",cellClass:"id-action no-padding no-outline",cellRenderer:"idFieldComponent",sortable:!0,filter:"agNumberColumnFilter",cellRendererParams:{tooltipGetter:function(T){return"ID: ".concat(T.Id,"\nGUID: ").concat(T.Guid)}}},{headerName:"Name",field:"Title",flex:2,minWidth:250,cellClass:"primary-action highlight",sortable:!0,sort:"asc",filter:"agTextColumnFilter",onCellClicked:this.editPermission.bind(this)},{headerName:"Identity",field:"Identity",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Condition",field:"Condition",flex:2,minWidth:250,cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{headerName:"Grant",field:"Grant",width:70,headerClass:"dense",cellClass:"no-outline",sortable:!0,filter:"agTextColumnFilter"},{width:42,cellClass:"secondary-action no-padding",cellRenderer:"permissionsActionsComponent",pinned:"right",cellRendererParams:{onDelete:this.deletePermission.bind(this)}}]}),this.subscription=new A.w0,this.targetType=parseInt(this.route.snapshot.paramMap.get("targetType"),10),this.keyType=this.route.snapshot.paramMap.get("keyType"),this.key=this.route.snapshot.paramMap.get("key"),this.prefills=(0,C.Z)({},o.Z.metadata.language.targetType,{PermissionType:"language"})}return(0,i.Z)(c,[{key:"ngOnInit",value:function(){this.fetchPermissions(),this.refreshOnChildClosed()}},{key:"ngOnDestroy",value:function(){this.permissions$.complete(),this.subscription.unsubscribe()}},{key:"closeDialog",value:function(){this.dialogRef.close()}},{key:"fetchPermissions",value:function(){var n=this;this.permissionsService.getAll(this.targetType,this.keyType,this.key).subscribe(function(a){n.permissions$.next(a)})}},{key:"editPermission",value:function(n){var p,h,v,a=this;v=null==n?{items:[Object.assign({ContentTypeName:o.Z.contentTypes.permissions,For:Object.assign(Object.assign(Object.assign({Target:null!==(h=null===(p=Object.values(o.Z.metadata).find(function(L){return L.targetType===a.targetType}))||void 0===p?void 0:p.target)&&void 0!==h?h:this.targetType.toString(),TargetType:this.targetType},this.keyType===o.Z.keyTypes.guid&&{Guid:this.key}),this.keyType===o.Z.keyTypes.number&&{Number:parseInt(this.key,10)}),this.keyType===o.Z.keyTypes.string&&{String:this.key})},this.prefills[this.targetType]&&{Prefill:this.prefills[this.targetType]})]}:{items:[{EntityId:n.data.Id}]};var G=(0,M.f)(v);this.router.navigate(["edit/".concat(G)],{relativeTo:this.route})}},{key:"deletePermission",value:function(n){var a=this;!confirm("Delete '".concat(n.Title,"' (").concat(n.Id,")?"))||(this.snackBar.open("Deleting..."),this.permissionsService.delete(n.Id).subscribe(function(){a.snackBar.open("Deleted",null,{duration:2e3}),a.fetchPermissions()}))}},{key:"refreshOnChildClosed",value:function(){var n=this;this.subscription.add(this.router.events.pipe((0,P.h)(function(a){return a instanceof f.m2}),(0,D.O)(!!this.route.snapshot.firstChild),(0,I.U)(function(){return!!n.route.snapshot.firstChild}),(0,u.G)(),(0,P.h)(function(a){var p=(0,y.Z)(a,2);return p[0]&&!p[1]})).subscribe(function(){n.fetchPermissions()}))}}]),c}();return d.\u0275fac=function(s){return new(s||d)(e.Y36(k.so),e.Y36(f.F0),e.Y36(f.gz),e.Y36(F.q),e.Y36(B.ux))},d.\u0275cmp=e.Xpm({type:d,selectors:[["app-permissions"]],decls:16,vars:5,consts:[[1,"nav-component-wrapper"],["mat-dialog-title",""],[1,"dialog-title-box"],["mat-icon-button","","tippy","Close dialog",3,"click"],[1,"grid-wrapper"],[1,"ag-theme-material",3,"rowData","modules","gridOptions"],[1,"grid-more-actions-box"],["mat-fab","","mat-elevation-z24","","tippy","Create a new permission",1,"grid-fab",3,"click"]],template:function(s,n){1&s&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div"),e._uU(4,"Permissions"),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return n.closeDialog()}),e.TgZ(6,"mat-icon"),e._uU(7,"close"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e._UZ(8,"router-outlet"),e.TgZ(9,"div",4),e._UZ(10,"ag-grid-angular",5),e.ALo(11,"async"),e._UZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return n.editPermission(null)}),e.TgZ(14,"mat-icon"),e._uU(15,"add"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(10),e.Q6J("rowData",e.lcZ(11,3,n.permissions$))("modules",n.modules)("gridOptions",n.gridOptions))},directives:[k.uh,_.lW,E.$,x.Hw,f.lC,j.N8],pipes:[W.Ov],styles:[""]}),d}()},5578:function(b,g,t){t.d(g,{m:function(){return I}});var y=t(8069),C=t(8047),l=t(5388),i=t(7133),O=t(2528),f=t(1130),Z=t(785),A=t(6362),P=t(5590),D=function(m,r){return{"align-start":m,"align-end":r}},I=function(){var u=function(){function m(r){(0,y.Z)(this,m),this.snackBar=r}return(0,C.Z)(m,[{key:"agInit",value:function(o){this.id=o.value,this.align="number"==typeof this.id?"end":"start",this.tooltip=o.tooltipGetter(o.data)}},{key:"refresh",value:function(o){return!0}},{key:"copy",value:function(){(0,l.v)(this.tooltip),this.snackBar.open("Copied to clipboard",null,{duration:2e3})}}]),m}();return u.\u0275fac=function(r){return new(r||u)(i.Y36(O.ux))},u.\u0275cmp=i.Xpm({type:u,selectors:[["app-id-field"]],decls:5,vars:6,consts:[["matRipple","",1,"id-box","highlight",3,"tippy","ngClass","click"],[1,"id"],[1,"icon"]],template:function(r,o){1&r&&(i.TgZ(0,"div",0),i.NdJ("click",function(){return o.copy()}),i.TgZ(1,"span",1),i._uU(2),i.qZA(),i.TgZ(3,"mat-icon",2),i._uU(4,"file_copy"),i.qZA(),i.qZA()),2&r&&(i.Q6J("tippy",o.tooltip)("ngClass",i.WLB(3,D,"start"===o.align,"end"===o.align)),i.xp6(2),i.Oqu(o.id))},directives:[f.wG,Z.$,A.mk,P.Hw],styles:[".id-box[_ngcontent-%COMP%]{padding:0 8px;height:100%;display:flex;align-items:center}.id-box.align-start[_ngcontent-%COMP%]{justify-content:flex-start}.id-box.align-end[_ngcontent-%COMP%]{justify-content:flex-end}.id-box[_ngcontent-%COMP%]   .id[_ngcontent-%COMP%]{max-width:100%;text-overflow:ellipsis;overflow:hidden}.id-box[_ngcontent-%COMP%]:hover{text-decoration:none}.id-box[_ngcontent-%COMP%]:hover   .id[_ngcontent-%COMP%]{display:none}.id-box[_ngcontent-%COMP%]:not(:hover)   .icon[_ngcontent-%COMP%]{display:none}"]}),u}()},5388:function(b,g,t){function y(C){var l=document.createElement("textarea");l.value=C,l.setAttribute("readonly",""),l.style.position="absolute",l.style.left="-9999px",document.body.appendChild(l);var i=document.getSelection().rangeCount>0&&document.getSelection().getRangeAt(0);l.select(),document.execCommand("copy"),document.body.removeChild(l),i&&(document.getSelection().removeAllRanges(),document.getSelection().addRange(i))}t.d(g,{v:function(){return y}})}}]);
//# sourceMappingURL=https://sources.2sxc.org/13.02.00/ng-edit/projects_ng-dialogs_src_app_permissions_permissions_component_ts.8fa0d067e8961267.js.map